import{e as s,g as o,aY as C,fI as le,n2 as de,n3 as pe,n as h,n4 as ce,w as d,aw as q,l as _,m as ne,cT as he,C as Z,at as se,ir as ue,n5 as Q,n6 as me,gG as ge,j$ as X,n7 as _e,k7 as S,y as V,j as oe,iy as K,n8 as ye,mV as M,n9 as ve,na as fe,nb as we,R as Se,nc as be,u as $e,I as x,J as De,ey as Pe,nd as L,z as Y,ne as Ce,Q as ae,nf as Me,aj as Te,ak as Oe,ng as xe,hc as Ve,m0 as ke,m2 as F,h as U,lD as Re,nh as N,ij as ze,i4 as T,ni as I,lB as W,mv as ee,nj as te,aq as B,lA as ie,m3 as He,aH as Ee}from"./index.46140dee.js";import{n as Le}from"./AnalysisView3D.d3ec91be.js";import{g as Ie}from"./SnappingVisualizer3D.cb250856.js";import{B as Ge,z as Ae}from"./dragEventPipeline3D.a7b7ffb3.js";import{S as Ne,g as je,x as Fe}from"./EditGeometryOperations.54f4e80e.js";import{p as Ue,z as We}from"./InteractiveToolBase.8fb2c02d.js";import{r as Be}from"./VertexSnappingCandidate.1ba66f63.js";import{e as Xe}from"./SnappingContext.5a2828cb.js";import{d as Ye,h as Ze,m as Je}from"./euclideanLengthMeasurementUtils.99105882.js";import{a as qe,c as Qe,m as Ke,s as et}from"./analysisViewUtils.a1a3a78f.js";import{v as tt}from"./quantityUtils.c8da0946.js";import{l as R,v as it}from"./Segment.66481a35.js";import"./PointVisualElement.6a452849.js";import"./RightAngleQuadVisualElement.0094b364.js";import"./drawUtils.55434e5c.js";import"./PointSnappingHint.2047ab1d.js";import"./dehydratedFeatureComparison.e934c649.js";import"./measurementUtils.f53ec32e.js";import"./TextOverlayItem.13fbaa65.js";const nt=["horizontal","vertical","direct"];let u=class extends ce{constructor(e){super(e),this.type="length",this.startPoint=null,this.endPoint=null,this.axis="horizontal",this.offset=0,this.heading=0}get extent(){if(d(this.startPoint))return null;const e=q.fromPoint(this.startPoint);return _(this.endPoint)&&e.union(q.fromPoint(this.endPoint)),e}};s([o({type:["length"]})],u.prototype,"type",void 0),s([o({type:C})],u.prototype,"startPoint",void 0),s([o({type:C})],u.prototype,"endPoint",void 0),s([o({type:nt,nonNullable:!0})],u.prototype,"axis",void 0),s([o({type:Number,nonNullable:!0})],u.prototype,"offset",void 0),s([o({type:Number,nonNullable:!0}),le(e=>de.normalize(pe(e),0,!0))],u.prototype,"heading",void 0),s([o({readOnly:!0})],u.prototype,"extent",null),u=s([h("esri.analysis.LengthDimension")],u);const st=u,ot={main:new ne([255,127,0])};class at{constructor(){this.color=ot.main,this.opacity=.5,this.radius=5}}class rt{constructor(){this.fontSize=14}get height(){return 1.5*he(this.fontSize)}get offset(){return this.height+20}}class lt{constructor(){this.pointManipulators=new at,this.labels=new rt}}const E=new lt;let v=class extends Z{constructor(e){super(e),this.availability=0,this._ids=new Set,this.tmpP=se()}destroy(){this.workerHandle.destroy(),this.workerHandle=null}initialize(){this.workerHandle=new dt(this.schedule,{fetchAllEdgeLocations:(e,t)=>this._fetchAllEdgeLocations(e,t)})}async fetchCandidates(e,t){const i=e.coordinateHelper.toXYZ(e.point);this.view.renderCoordsHelper.toRenderCoords(i,e.coordinateHelper.spatialReference,i);const n=typeof e.distance=="number"?e.distance:e.distance.pixelSize,a=await this.workerHandle.invoke({bounds:ue(i[0],i[1],i[2],n),types:e.types},t),r=e.coordinateHelper;return a.candidates.sort((l,m)=>l.distance-m.distance),a.candidates.map(l=>this._convertCandidate(r,l))}async add(e,t){this._ids.add(e.id),await this.workerHandle.invokeMethod("add",e,t)}async remove(e,t){this._ids.delete(e.id),await this.workerHandle.invokeMethod("remove",e,t)}_convertCandidate(e,t){switch(t.type){case"edge":return new me({coordinateHelper:e,objectId:t.objectId,targetPoint:this._convertRenderCoordinate(e,t.target),edgeStart:this._convertRenderCoordinate(e,t.start),edgeEnd:this._convertRenderCoordinate(e,t.end),elevationInfo:Q});case"vertex":return new Be({coordinateHelper:e,objectId:t.objectId,targetPoint:this._convertRenderCoordinate(e,t.target),elevationInfo:Q})}}_convertRenderCoordinate(e,t){return this.view.renderCoordsHelper.fromRenderCoords(t,this.tmpP,e.spatialReference),e.fromXYZ(this.tmpP)}async _fetchAllEdgeLocations(e,t){const i=[],n=[];for(const{id:a,uid:r}of e.components)this._ids.has(a)&&i.push((async()=>{const l=await this.fetchEdgeLocations(a,t.signal);return n.push(l.locations.buffer),{id:a,uid:r,objectIds:l.objectIds,locations:l.locations.buffer,origin:l.origin,type:l.type}})());return{result:{components:(await Promise.all(i)).filter(({id:a})=>this._ids.has(a))},transferList:n}}};s([o({constructOnly:!0})],v.prototype,"view",void 0),s([o({constructOnly:!0})],v.prototype,"fetchEdgeLocations",void 0),s([o({constructOnly:!0})],v.prototype,"schedule",void 0),s([o({readOnly:!0})],v.prototype,"availability",void 0),v=s([h("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],v);class dt extends ge{constructor(t,i){super("SceneLayerSnappingSourceWorker","fetchCandidates",{},t,{strategy:"dedicated",client:i})}}let f=class extends Z{constructor(e){super(e),this.availability=1,this.abortController=new AbortController}get updating(){return this.updatingHandles.updating}get layer(){return this.layerSource.layer}destroy(){this.abortController=X(this.abortController)}initialize(){const e=this.view.resourceController;this.edgeWorker=new _e(t=>e.schedule(t)),this.workerHandle=new v({view:this.view,schedule:t=>e.schedule(t),fetchEdgeLocations:async(t,i)=>{if(d(this.tracker))throw new Error("tracker-not-initialized");return this.tracker.fetchEdgeLocations(t,this.edgeWorker,i)}}),this.updatingHandles.addPromise(this._setupLayerView()),this.handles.add([S(this.workerHandle),S(this.edgeWorker)])}async fetchCandidates(e,t){return this.workerHandle.fetchCandidates(e,t)}refresh(){}async _setupLayerView(){const e=await this.view.whenLayerView(this.layer);if(e.type==="scene-layer-graphics-3d")return;const t={add:(i,n)=>this.updatingHandles.addPromise(this.workerHandle.add({id:i,bounds:n},this.abortController.signal)),remove:i=>this.updatingHandles.addPromise(this.workerHandle.remove({id:i},this.abortController.signal))};this.tracker=e.trackSnappingSources(t),this.handles.add(this.tracker)}};s([o({constructOnly:!0})],f.prototype,"layerSource",void 0),s([o({constructOnly:!0})],f.prototype,"view",void 0),s([o({readOnly:!0})],f.prototype,"updating",null),s([o({readOnly:!0})],f.prototype,"availability",void 0),f=s([h("esri.views.interactive.snapping.featureSources.SceneLayerSnappingSource")],f);let w=class extends V{constructor(e){super(e),this.options=null,this._snappingSources=new oe}initialize(){this.own([this.view.on("layerview-create",({layerView:e})=>this._createSource(e)),this.view.on("layerview-destroy",({layerView:e})=>this._removeSource(e))]);for(const e of this.view.allLayerViews.items)this._createSource(e)}destroy(){this.options=null,this._snappingSources.drain(e=>e.destroy())}get updating(){return this._snappingSources.some(e=>e.updating)}get _types(){return K.EDGE|K.VERTEX}async fetchCandidates(e,t,i){const{view:n,options:a}=this,{coordinateHelper:r,elevationInfo:l}=t,m=_(a)?a.distance:1,y=ye(e,r,l,n,M.get()),k=m*n.state.camera.computeScreenPixelSizeAt(y),b=this._types,g=this._snappingSources.items.map(j=>j.fetchCandidates({point:e,coordinateHelper:r,distance:k,types:b},i)),$=(await Promise.all(g)).flat();return ve(e,$),$}_createSource(e){if(e.type!=="scene-layer-3d")return;const t=new f({layerSource:new fe({layer:e.layer}),view:this.view});this._snappingSources.push(t)}_removeSource(e){const t=this._snappingSources.findIndex(i=>i.layerSource.layer===e.layer);t!==-1&&this._snappingSources.removeAt(t).destroy()}};s([o({constructOnly:!0})],w.prototype,"view",void 0),s([o()],w.prototype,"updating",null),s([o()],w.prototype,"options",void 0),s([o()],w.prototype,"_snappingSources",void 0),w=s([h("esri.views.interactive.snapping.SceneSnappingEngine")],w);const G=new Map;function pt(e){G.has(e)||G.set(e,{referenceCount:0,snappingManager:ht(e)});const t=G.get(e);t.referenceCount++;const i=Se(()=>ct(e,t));return{snappingManager:t.snappingManager,...i}}function ct(e,t){t.referenceCount--,t.referenceCount>0||be(()=>{t.referenceCount===0&&(t.snappingManager.destroy(),G.delete(e))})}function ht(e){return new we({view:e,snappingEnginesFactory:(t,i)=>[new w({view:e,options:i})]})}let D=class extends Z{constructor(e){super(e),this.stagedDimension=null,this._dimensionManipulators=new Map,this._dimensionHandles=new $e,this._snappingPipeline=new Ye,this._snappingManagerResult=pt(e.view),this.own(this._snappingManagerResult)}initialize(){this._snappingOperation=new Ze({view:this.view}),this.own([this._dimensionHandles,x(()=>this._snappingOperation.stagedPoint,e=>{_(this.stagedDimension)&&(this.stagedDimension.endPoint=Pe(e,t=>L(t,new C)))},De)])}destroy(){this._snappingOperation=Y(this._snappingOperation)}get updating(){return this.updatingHandles.updating||this._snappingManager.updating}get _snappingManager(){return this._snappingManagerResult.snappingManager}addDimension(e,t){if(this._dimensionManipulators.has(e))return;const i=this._createPointManipulator(e,{isStart:!0}),n=this._createPointManipulator(e,{isStart:!1}),a={startManipulator:i,endManipulator:n};this._setupDimensionToManipulatorsSync(e,a),this._dimensionManipulators.set(e,a),t.add(i),t.add(n)}removeDimension(e,t){const i=this._dimensionManipulators.get(e);if(d(i))return;this._dimensionHandles.remove(e);const{startManipulator:n,endManipulator:a}=i;this._dimensionManipulators.delete(e),t.remove(n),t.remove(a)}getManipulatorsForDimension(e){return this._dimensionManipulators.get(e)}onDeactivate(){this._snappingManager.doneSnapping()}onUnstagedClick({mapPoint:e,pointerType:t}){const i=this._snappingContext(t),n=L(this._snappingManager.update(e,i),new C),a=new st({startPoint:n,endPoint:null});return this.stagedDimension=a,this._snappingManager.doneSnapping(),a}onStagedClick({mapPoint:e,pointerType:t}){if(d(this.stagedDimension))return;const i=this._snappingContext(t),n=L(this._snappingManager.update(e,i),new C);this.stagedDimension.endPoint=n,this.stagedDimension=null,this._snappingManager.doneSnapping()}onPointerMove({mapPoint:e,pointerType:t}){const i=this._snappingContext(t);this.updatingHandles.addPromise(Ce(this._snappingOperation.snap(e,this._snappingManager,i)))}_setupDimensionToManipulatorsSync(e,t){const{startManipulator:i,endManipulator:n}=t;this._dimensionHandles.add([x(()=>({startPoint:e.startPoint,endPoint:e.endPoint,stagedDimension:this.stagedDimension}),({startPoint:a,endPoint:r,stagedDimension:l})=>{_(a)?(i.available=d(l)||l===e,i.location=a):i.available=!1,_(r)?(n.available=d(l),n.location=r):n.available=!1},ae)],e)}_createPointManipulator(e,t){const{isStart:i}=t,n=i?"startPoint":"endPoint",a=Me(this.view,ne.toUnitRGB(E.pointManipulators.color),E.pointManipulators.opacity);a.available=!1,a.radius=E.pointManipulators.radius;const r=Ue(a,(l,m,y,k)=>{const b=Ae(l);m.next(b).next(Ge(this.view)).next(this._snappingPipeline.createSnapDragEventPipelineStep({snappingContext:this._snappingContext(k),snappingManager:this._snappingManager,cancel:y,updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next(g=>{const $=L(g.mapEnd,new C);e[n]=$}),y.next(b).next(We(e,[n]))});return this._dimensionHandles.add(r,e),a}_snappingContext(e){return new Xe({elevationInfo:{mode:"absolute-height",offset:0},pointer:e,editGeometryOperations:new Ne(new je("point",Fe(!0,!1,this.view.spatialReference))),visualizer:new Ie})}};s([o({constructOnly:!0,nonNullable:!0})],D.prototype,"view",void 0),s([o({readOnly:!0})],D.prototype,"updating",null),s([o()],D.prototype,"stagedDimension",void 0),D=s([h("esri.views.3d.analysis.Dimensioning.LengthDimensionSubTool")],D);var O;(function(e){e.Ready="ready",e.Creating="creating",e.Created="created"})(O||(O={}));let p=class extends qe{constructor(e){super(e),this.preferManipulatorCursor=!0,this.analysisViewData=null}initialize(){this._intersector=Te(this.view.state.viewingMode),this._intersector.options.store=Oe.MIN,this._lengthDimensionSubTool=new D({view:this.view}),this.own(S(this._lengthDimensionSubTool));for(const e of this.analysis.dimensions.items)this._addDimension(e);this.own(this.analysis.dimensions.on("change",e=>{for(const t of e.added)this._addDimension(t);for(const t of e.removed)this._removeDimension(t)})),this.own(x(()=>this.state,e=>{e===O.Created&&this.finishToolCreation()},ae))}get state(){return this.analysis.dimensions.some(e=>e.type==="length")?_(this._activeSubTool)?O.Creating:O.Created:O.Ready}get updating(){return this._lengthDimensionSubTool.updating}get cursor(){return this.active?"crosshair":null}getManipulatorsForDimension(e){return this._lengthDimensionSubTool.getManipulatorsForDimension(e)}onInputEvent(e){switch(e.type){case"immediate-click":this._clickHandler(e);break;case"immediate-double-click":this._doubleClickHandler(e);break;case"pointer-move":this._pointerMoveHandler(e)}}onActivate(){this._activeSubTool=this._lengthDimensionSubTool}onDeactivate(){_(this._activeSubTool)&&(this._activeSubTool.onDeactivate(),_(this._activeSubTool.stagedDimension)&&(this.analysis.dimensions.remove(this._activeSubTool.stagedDimension),this._activeSubTool.stagedDimension=null),this._activeSubTool=null)}_clickHandler(e){if(d(this._activeSubTool))return;const t=this._intersectScreen(e);if(!d(t)){if(d(this._activeSubTool.stagedDimension)){const i=this._activeSubTool.onUnstagedClick({mapPoint:t,pointerType:e.pointerType});this.analysis.dimensions.add(i)}else this._activeSubTool.onStagedClick({mapPoint:t,pointerType:e.pointerType});e.stopPropagation()}}_doubleClickHandler(e){this.view.activeTool=null,e.stopPropagation()}_pointerMoveHandler(e){if(d(this._activeSubTool)||this.hasFocusedManipulators)return;const t=this._intersectScreen(e);d(t)||this._activeSubTool.onPointerMove({mapPoint:t,pointerType:e.pointerType})}_intersectScreen(e){const t=xe(e);this.view.sceneIntersectionHelper.intersectToolIntersectorScreen(t,this._intersector);const i=this._intersector.results.min,n=M.get();return i.getIntersectionPoint(n)?this.view.renderCoordsHelper.fromRenderCoords(n,this.view.spatialReference):null}_addDimension(e){this._lengthDimensionSubTool.addDimension(e,this.manipulators)}_removeDimension(e){this._lengthDimensionSubTool.removeDimension(e,this.manipulators)}};s([o({constructOnly:!0})],p.prototype,"view",void 0),s([o({constructOnly:!0})],p.prototype,"analysis",void 0),s([o({readOnly:!0})],p.prototype,"state",null),s([o({readOnly:!0})],p.prototype,"updating",null),s([o({readOnly:!0})],p.prototype,"cursor",null),s([o({readOnly:!0})],p.prototype,"preferManipulatorCursor",void 0),s([o({constructOnly:!0})],p.prototype,"analysisViewData",void 0),s([o()],p.prototype,"_activeSubTool",void 0),s([o()],p.prototype,"_lengthDimensionSubTool",void 0),p=s([h("esri.views.3d.analysis.Dimensioning.DimensioningTool")],p);let z=class extends V{constructor(e){super(e),this._directSegment=new R,this._dimensionSegment=new R,this._offsetAxis=se(),this._startOffsetSegment=new R(this._directSegment.startRenderSpace,this._dimensionSegment.startRenderSpace),this._endOffsetSegment=new R(this._directSegment.endRenderSpace,this._dimensionSegment.endRenderSpace),this._labelSegment=new R,this._hasValidGeometry=!1;const t={view:e.view,attached:!0,width:1,color:Ve(1,.5,0,1),renderOccluded:ke.OccludeAndTransparent},i={...t,stipplePattern:He(5)};this._dimensionVisualElement=new F(t),this._startOffsetVisualElement=new F(i),this._endOffsetVisualElement=new F(i),this._label=new it({view:e.view,attached:!0,distance:0,fontSize:E.labels.fontSize})}initialize(){this.own([S(this._dimensionVisualElement),S(this._startOffsetVisualElement),S(this._endOffsetVisualElement),S(this._label)]);const{computation:e,view:t}=this,{dimension:i}=e;this.own([x(()=>({startPoint:i.startPoint,endPoint:i.endPoint,offset:i.offset,axis:i.axis,heading:i.heading}),n=>{this._updateGeometry(n),this._updateLines(),this._updateLabelGeometry(t.state.camera)},U),x(()=>e.length,n=>this._updateLabelContent(n),U),x(()=>t.state.camera,n=>this._updateLabelGeometry(n),U)])}get testInfo(){return{dimensionVisualElement:this._dimensionVisualElement,label:this._label}}_updateGeometry({startPoint:e,endPoint:t,offset:i,axis:n}){const{renderCoordsHelper:a}=this.view,r=this._directSegment;if(d(e)||d(t)||!a.toRenderCoords(e,r.startRenderSpace)||!a.toRenderCoords(t,r.endRenderSpace))return void(this._hasValidGeometry=!1);const{startRenderSpace:l,endRenderSpace:m}=r,y=r.eval(.5,M.get()),k=a.worldUpAtPosition(y,M.get()),b=a.worldBasisAtPosition(y,Re.X,M.get()),g=this._offsetAxis;ut(g,l,m,k,n,b);const $=i/a.unitInMeters,[j,re]=mt(l,m,g,$),J=this._dimensionSegment;N(J.startRenderSpace,r.startRenderSpace,g,j),N(J.endRenderSpace,r.endRenderSpace,g,re),this._hasValidGeometry=!0}_updateLines(){if(!this._hasValidGeometry)return this._dimensionVisualElement.visible=!1,this._startOffsetVisualElement.visible=!1,void(this._endOffsetVisualElement.visible=!1);this._dimensionVisualElement.setGeometryFromSegment(this._dimensionSegment),this._startOffsetVisualElement.setGeometryFromSegment(this._startOffsetSegment),this._endOffsetVisualElement.setGeometryFromSegment(this._endOffsetSegment),this._dimensionVisualElement.visible=!0,this._startOffsetVisualElement.visible=!0,this._endOffsetVisualElement.visible=!0}_updateLabelContent(e){if(d(e)||!this._hasValidGeometry)return this._label.text="",void(this._label.visible=!1);const{value:t}=tt(e,"meters");this._label.text=`${ze(t,{minimumFractionDigits:2,maximumFractionDigits:2})} m`,this._label.visible=!0}_updateLabelGeometry(e){if(!this._hasValidGeometry)return void(this._label.visible=!1);const{offset:t}=this.computation.dimension,i=e.computeRenderPixelSizeAt(this._dimensionSegment.eval(.5,M.get())),n=(Math.sign(t)>=0?1:-1)*E.labels.offset*i;gt(this._labelSegment,this._dimensionSegment,this._offsetAxis,n),this._label.geometry={type:"segment",sampleLocation:"center",segment:this._labelSegment,callout:!1}}};function ut(e,t,i,n,a,r){switch(a){case"horizontal":return B(e,n);case"vertical":return T(t,n)<T(i,n)?I(e,i,t):I(e,t,i),W(e,e,n),ee(e,te)?B(e,r):(W(e,e,n),ie(e,e),e);case"direct":return T(t,r)>T(i,r)?I(e,i,t):I(e,t,i),W(e,e,n),ee(e,te)?B(e,r):(ie(e,e),e)}}function mt(e,t,i,n=0){const a=T(t,i),r=T(e,i),l=Math.abs(a-r)+n;return a>r?[l,n]:[n,l]}function gt(e,t,i,n){N(e.startRenderSpace,t.startRenderSpace,i,n),N(e.endRenderSpace,t.endRenderSpace,i,n)}s([o({constructOnly:!0,nonNullable:!0})],z.prototype,"computation",void 0),s([o({constructOnly:!0,nonNullable:!0})],z.prototype,"view",void 0),z=s([h("esri.views.3d.analysis.Dimensioning.LengthDimensionVisualization")],z);let H=class extends V{constructor(e){super(e),this._dimensionVisualizations=new Map}initialize(){for(const e of this.computations)this._addComputation(e);this.own(this.computations.on("change",({added:e,removed:t})=>{for(const i of t)this._removeComputation(i);for(const i of e)this._addComputation(i)}))}destroy(){this._dimensionVisualizations.forEach(e=>{e.destroy()}),this._dimensionVisualizations.clear()}get testInfo(){return{visualizations:Array.from(this._dimensionVisualizations.values())}}_addComputation(e){this._dimensionVisualizations.has(e)||this._dimensionVisualizations.set(e,new z({computation:e,view:this.view}))}_removeComputation(e){const t=this._dimensionVisualizations.get(e);d(t)||(t.destroy(),this._dimensionVisualizations.delete(e))}};s([o({constructOnly:!0,nonNullable:!0})],H.prototype,"view",void 0),s([o({constructOnly:!0,nonNullable:!0})],H.prototype,"computations",void 0),H=s([h("esri.views.3d.analysis.Dimensioning.DimensioningVisualization")],H);let A=class extends V{constructor(e){super(e),this.dimension=null}};s([o({constructOnly:!0,nonNullable:!0})],A.prototype,"dimension",void 0),A=s([h("esri.views.3d.analysis.LengthDimensionResult")],A);const _t=A;let P=class extends V{constructor(e){super(e)}initialize(){this._set("result",new _t({dimension:this.dimension}))}get length(){const{startPoint:e,endPoint:t,axis:i}=this.dimension;if(d(e)||d(t))return null;const n=Je(e,t);return d(n)?null:n[i]}};s([o({constructOnly:!0,nonNullable:!0})],P.prototype,"dimension",void 0),s([o({constructOnly:!0,nonNullable:!0})],P.prototype,"result",void 0),s([o()],P.prototype,"length",null),P=s([h("esri.views.3d.analysis.LengthDimensionComputation")],P);let c=class extends Le(V){constructor(e){super(e),this.type="dimensioning-view-3d",this.tool=null,this._computations=new oe,this._dimensionsToResults=new Map,this._placementTask=null}initialize(){this.own([Qe(this,p),Ee(()=>this.analysis.dimensions,"change",({added:e,removed:t})=>{for(const i of t)this._removeDimension(i);for(const i of e)this._addDimension(i)},{onListenerAdd:e=>{for(const t of e)this._addDimension(t)},onListenerRemove:e=>{for(const t of e)this._removeDimension(t)}})]),this._analysisVisualization=new H({view:this.view,computations:this._computations})}destroy(){this._placementTask=X(this._placementTask),this._analysisVisualization=Y(this._analysisVisualization),this._computations.drain(e=>e.destroy()),Ke(this)}get results(){return this.analysis.dimensions.map(e=>this._dimensionsToResults.get(e))}get testInfo(){return{visualization:this._analysisVisualization}}async createLengthDimensions(e){return this._placementTask=X(this._placementTask),this._placementTask=et(this,p,e),this._placementTask.promise}_addDimension(e){const t=this._dimensionsToResults;if(t.has(e))return;const i=this._computations,n=new P({dimension:e});i.add(n),t.set(e,n.result)}_removeDimension(e){const t=this._computations,i=this._dimensionsToResults,n=t.findIndex(r=>r.dimension===e),a=t.removeAt(n);i.delete(e),Y(a)}};s([o({readOnly:!0})],c.prototype,"type",void 0),s([o({constructOnly:!0,nonNullable:!0})],c.prototype,"analysis",void 0),s([o()],c.prototype,"tool",void 0),s([o({readOnly:!0})],c.prototype,"results",null),s([o()],c.prototype,"_analysisVisualization",void 0),s([o()],c.prototype,"_computations",void 0),s([o()],c.prototype,"_dimensionsToResults",void 0),s([o()],c.prototype,"_placementTask",void 0),c=s([h("esri.views.3d.analysis.DimensioningAnalysisView3D")],c);const Et=c;export{Et as default};
