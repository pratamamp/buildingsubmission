import{aY as A,l as p,tn as Me,to as ot,tp as at,at as V,qD as Ce,lD as ee,aX as rt,i4 as lt,i6 as pt,lA as ct,lB as ht,tq as dt,tr as ut,r7 as Re,r1 as X,fO as gt,fN as mt,ts as je,bH as Be,ml as vt,v as yt,rO as ft,iB as Ne,w as _,tt as _t,ft as xt,tu as wt,dh as $t,a6 as we,tv as Tt,z as M,i as bt,R as Ot,b5 as H,e as r,g as l,n as x,y as Qe,po as Ie,pp as $e,mc as Vt,ij as te,an as ae,pq as h,I as W,Q as N,ey as re,sP as St,tw as Mt,oh as Ct,es as Rt,tx as Xe,ty as It,k as Lt,ly as Te,lz as Le,iz as Dt,oi as Pt,tz as kt,dq as zt,C as Gt,tA as Ye,tB as Je,bE as Et,dk as Wt,ne as Ft,al as Ut,oE as be,ok as Ht,h as Zt,dp as De,gF as Ke,nF as At}from"./index.586dfff9.js";import{simplify as qt,distance as jt,geodesicArea as Bt,geodesicLength as et}from"./geometryEngine.e1b3d258.js";import{c as Nt,p as ie}from"./InteractiveToolBase.16af9491.js";import{a as Y,o as C}from"./quantityUtils.d975d2fd.js";import{r as Qt}from"./dehydratedFeatureComparison.913808b9.js";import{x as Xt,S as Yt,g as Jt,p as Kt}from"./EditGeometryOperations.cdeaf6b2.js";import{e as Pe}from"./SnappingContext.43626b3c.js";import{a as ei,f as ti,y as ke,Z as le,x as ii,d as ni,h as si}from"./euclideanLengthMeasurementUtils.900ecdd8.js";import{x as ze,F as oi,S as ai,k as ri,z as li,U as tt,q as pi}from"./quantityFormatUtils.365d5212.js";import{j as ci,h as hi,d as it}from"./euclideanAreaMeasurementUtils.1cd60fe3.js";function Q(e,t,i=null){return p(i)?[e,t,i]:[e,t]}function m(e,t,i=null){return p(i)?{x:e,y:t,z:i}:{x:e,y:t}}class nt{constructor(t){this.spatialReference=t}mapToLocalMultiple(t){return X(t.map(i=>this.mapToLocal(i)))}get doUnnormalization(){return!1}}class di extends nt{constructor(t,i,n=null){super(i),this.defaultZ=n,this.transform=Me(),this.transformInv=Me(),this.transform=ot(t),at(this.transformInv,this.transform)}makeMapPoint(t,i){return Q(t,i,this.defaultZ)}mapToLocal(t){return m(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return Q(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this.defaultZ)}}class ui extends nt{constructor(t,i){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=V(),this.tangentFrameUpWS=V(),this.tangentFrameRightWS=V(),this.tangentFrameForwardWS=V(),this.localFrameRightWS=V(),this.localFrameUpWS=V(),this.worldToLocalTransform=Ce(),this.localToWorldTransform=Ce(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=i,this.defaultZ=i.hasZ?i.z:null;const n=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,ee.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,ee.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,ee.Z,this.tangentFrameForwardWS);const o=V();rt(o,this.tangentFrameForwardWS,lt(n,this.tangentFrameForwardWS)),pt(this.localFrameRightWS,n,o),ct(this.localFrameRightWS,this.localFrameRightWS),ht(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),dt(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),ut(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return this.view.viewingMode==="global"}makeMapPoint(t,i){return Q(t,i,this.defaultZ)}mapToLocal(t){const i=V();this.view.renderCoordsHelper.toRenderCoords(new A({x:t[0],y:t[1],spatialReference:this.spatialReference}),i),Re(i,i,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference);return p(n)?m(n.x/this.scale,n.y/this.scale):null}localToMap(t){const i=V();this.view.renderCoordsHelper.toRenderCoords(new A({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),i),Re(i,i,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(i,this.view.spatialReference);return p(n)?Q(n.x,n.y,this.defaultZ):null}}function Ge(e,t){if(e.type==="2d")return new di(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if(e.type==="3d"){const i=t.length>2?new A({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new A({x:t[0],y:t[1],spatialReference:e.spatialReference});return new ui(e,i)}return null}function Ee(e,t){const i=new A({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(i.z=e[2]),i}function gi(e,t){return new gt({points:e,spatialReference:t})}function We(e,t,i){const n=new mt({paths:e,spatialReference:t});return i&&je(n),n}function U(e,t,i,n=!0){const o=Be(e);o.forEach(a=>{const d=a[0],c=a[a.length-1];vt(d,c)&&a.length!==1||a.push(a[0])});let s=new yt({rings:o,spatialReference:t});return s.rings.forEach(a=>{ft(a,!1,!1)||a.reverse()}),i&&je(s),n&&s.isSelfIntersecting&&Ne(t)&&(s=qt(s)),s}function Fe(e,t,i){const n=t.mapToLocalMultiple(e),o=[],s={x:n[0].x,y:n[0].y},a={x:n[1].x,y:n[1].y},d=Math.round(a.x-s.x),c=Math.round(a.y-s.y),u=Math.max(Math.abs(d),Math.abs(c));if(i){const g={x:s.x+u,y:s.y+u},b={x:s.x-u,y:s.y-u};o.push(m(g.x,b.y),m(b.x,b.y),m(b.x,g.y),m(g.x,g.y))}else{const g={x:d>0?s.x+u:s.x-u,y:c>0?s.y+u:s.y-u};o.push(m(s.x,s.y),m(g.x,s.y),m(g.x,g.y),m(s.x,g.y))}return U([X(o.map(g=>t.localToMap(g)))],t.spatialReference,t.doUnnormalization,!0)}function mi(e,t,i){let n=t.mapToLocalMultiple(e);if(n.length===1){const c=n[0];n=[m(c.x-48,c.y+48),m(c.x+48,c.y-48),m(c.x+48,c.y-48),m(c.x-48,c.y+48)]}const o=[],s={x:n[0].x,y:n[0].y},a={x:n[1].x,y:n[1].y};if(i){const d=Math.round(a.x-s.x),c=Math.round(a.y-s.y);o.push(m(s.x-d,s.y-c),m(a.x,s.y-c),m(a.x,a.y),m(s.x-d,a.y))}else o.push(m(s.x,s.y),m(a.x,s.y),m(a.x,a.y),m(s.x,a.y));return U([X(o.map(d=>t.localToMap(d)))],t.spatialReference,t.doUnnormalization,!0)}function Ue(e,t,i,n){const o=t.mapToLocalMultiple(e);let s=null,a=null;if(i)s=o[0],a=o[1];else{const $=o[0],I=o[1],P=Math.round(I.x-$.x),k=Math.round(I.y-$.y),z=Math.max(Math.abs(P),Math.abs(k));s=m(P>0?$.x+z/2:$.x-z/2,k>0?$.y+z/2:$.y-z/2),a=m(Math.abs(P)>Math.abs(k)?s.x-z/2:s.x,Math.abs(P)>Math.abs(k)?s.y:s.y-z/2)}const d=t.localToMap(s),c=t.localToMap(a);if(_(d)||_(c))return null;t.doUnnormalization&&_t([[d,c]],t.spatialReference);const u=Ee(d,t.spatialReference),g=Ee(c,t.spatialReference),b=xt(t.spatialReference);let O=0;if(Ne(t.spatialReference))O=b*jt(u,g,null);else{const $=s.x-a.x,I=s.y-a.y;O=b*Math.sqrt($*$+I*I)*(n||1)}const S=new wt({center:u,radius:O,radiusUnit:"meters",spatialReference:t.spatialReference});return U(S.rings,S.spatialReference,!1)}function vi(e,t,i){const n=t.mapToLocalMultiple(e),o=n[0],s=n[1],a=Math.round(s.x-o.x),d=Math.round(s.y-o.y),c=m(i?o.x:o.x+a/2,i?o.y:o.y+d/2),u=i?a:a/2,g=i?d:d/2,b=60,O=[],S=2*Math.PI/b;for(let $=0;$<b;$++){const I=Math.cos($*S),P=Math.sin($*S),k=m(u*I+c.x,g*P+c.y);O.push(k)}return O.push(O[0]),U([X(O.map($=>t.localToMap($)))],t.spatialReference,t.doUnnormalization,!1)}let T=class extends $t(we.EventedMixin(Nt)){constructor(e){super(e),this._graphic=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.mode=null,this.snappingManager=null,this.snapToScene=!1}initialize(){this.internalGraphicsLayer=new Tt({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",e=>this.onVertexAdd(e)),this.drawOperation.on("vertex-remove",e=>this.onVertexRemove(e)),this.drawOperation.on("vertex-update",e=>this.onVertexUpdate(e)),this.drawOperation.on("cursor-update",e=>this.onCursorUpdate(e)),this.drawOperation.on("complete",e=>this.onComplete(e))]),this.finishToolCreation()}destroy(){this.drawOperation=M(this.drawOperation),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=M(this.internalGraphicsLayer),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(e){this._set("centered",e),this._updateGraphic()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set forceUniformSize(e){this._set("forceUniformSize",e),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(e){this._set("graphicSymbol",e),p(this._graphic)&&(this._graphic.symbol=e)}get updating(){var e,t;return(t=(e=this.drawOperation)==null?void 0:e.updating)!=null?t:!1}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}_createGraphic(e){this._graphic=new bt({...this.graphicProperties,geometry:e,symbol:this.graphicSymbol}),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add(Ot(()=>{p(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=M(this._graphic))}),ne)}_destroyAllVisualisations(){this.handles.remove(R.outline),this.handles.remove(R.regularVertices),this.handles.remove(R.activeVertex),this.handles.remove(ne)}_getCreateOperationGeometry(e={operationComplete:!1}){if(this.drawOperation==null||this.drawOperation.numVertices===0)return null;const t=this.drawOperation.stagedVertex,i=this.drawOperation.committedVertices,n=i.slice();p(t)&&n.push(this.drawOperation.coordinateHelper.pointToArray(t));const o=p(t)?this.drawOperation.coordinateHelper.pointToArray(t):i.splice(-1)[0],s={regularVertices:null,activeVertex:null,full:null,outline:null},a=n.length,d=this.view.spatialReference,c=this.view.type==="3d"&&this.view.viewingMode==="global";switch(this.geometryType){case"point":s.regularVertices=i,s.activeVertex=o,s.full=this.drawOperation.coordinateHelper.arrayToPoint(n[0]);break;case"multipoint":s.regularVertices=i,s.activeVertex=o,a>0&&(s.full=gi(n,d));break;case"polyline":s.regularVertices=i,s.activeVertex=o,a>0&&(s.full=We([n],d,c));break;case"polygon":s.regularVertices=i,s.activeVertex=o,a>0&&(s.full=U([n],d,c,!0));break;case"circle":if(a>0){const u=Ge(this.view,n[0]);if(a===1&&e.operationComplete){const g=n[0],b=u.makeMapPoint(g[0]+He*this.view.resolution,g[1]);s.full=Ue([g,b],u,!0)}else a===2&&(s.full=this.forceUniformSize?Ue(n,u,this.centered):vi(n,u,this.centered))}break;case"rectangle":if(a>0){const u=Ge(this.view,n[0]);if(a===1&&e.operationComplete){const g=n[0],b=u.makeMapPoint(g[0]+He*this.view.resolution,g[1]);s.full=Fe([g,b],u,!0)}else a===2&&(s.full=this.forceUniformSize?Fe(n,u,this.centered):mi(n,u,this.centered))}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":a>1&&(s.outline=We([n],d,c));break;case"circle":case"rectangle":p(s.full)&&s.full.type==="polygon"&&(s.outline=U(s.full.rings,d,c))}return s}initializeGraphic(e){return null}onComplete(e){this._updateGraphic();let t=null;if(this.drawOperation.isCompleted){const i=this._getCreateOperationGeometry({operationComplete:!0});p(i)&&(_(this._graphic)?this._createGraphic(i.full):this._graphic.geometry=i.full,t=H(this._graphic).clone())}this.emit("complete",{graphic:t,...e})}onCursorUpdate(e){this._updateGraphic(),this.emit("cursor-update",e)}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}onVertexAdd(e){this._updateGraphic(),this.emit("vertex-add",e)}onVertexRemove(e){this._updateGraphic(),this.emit("vertex-remove",e)}onVertexUpdate(e){this._updateGraphic(),this.emit("vertex-update",e)}_updateGraphic(){const e=this._getCreateOperationGeometry();_(e)?this._destroyAllVisualisations():(p(e.outline)?this.handles.add(this.onOutlineChanged(e.outline),R.outline):this.handles.remove(R.outline),p(e.regularVertices)?this.handles.add(this.onRegularVerticesChanged(e.regularVertices),R.regularVertices):this.handles.remove(R.regularVertices),p(e.activeVertex)?this.handles.add(this.onActiveVertexChanged(e.activeVertex),R.activeVertex):this.handles.remove(R.activeVertex),p(e.full)?_(this._graphic)?this._createGraphic(e.full):this._graphic.geometry=e.full:this.handles.remove(ne))}};r([l({value:!0})],T.prototype,"centered",null),r([l({nonNullable:!0})],T.prototype,"defaultZ",void 0),r([l()],T.prototype,"drawOperation",void 0),r([l({value:!0})],T.prototype,"enabled",null),r([l({value:!0})],T.prototype,"forceUniformSize",null),r([l({constructOnly:!0})],T.prototype,"geometryType",void 0),r([l()],T.prototype,"graphic",null),r([l({constructOnly:!0})],T.prototype,"graphicProperties",void 0),r([l()],T.prototype,"graphicSymbol",null),r([l({constructOnly:!0})],T.prototype,"hasZ",void 0),r([l({constructOnly:!0})],T.prototype,"mode",void 0),r([l()],T.prototype,"snappingManager",void 0),r([l()],T.prototype,"snapToScene",void 0),r([l({readOnly:!0})],T.prototype,"type",void 0),r([l({readOnly:!0})],T.prototype,"updating",null),r([l({constructOnly:!0,nonNullable:!0})],T.prototype,"view",void 0),T=r([x("esri.views.draw.DrawGraphicTool")],T);const ne="create-operation-graphic",R={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function cn(e){switch(e){case"point":case"polyline":case"polygon":case"multipoint":return e;case"circle":case"rectangle":return"segment";default:return null}}const He=48,st="click";class yi{constructor({grabbableForEvent:t}){this.events=new we,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=t}intersectionDistance(t,i){return 0}attach(){}detach(){}}let F=class extends Qe{constructor(e){super(e)}};r([l()],F.prototype,"tooltipOptions",void 0),F=r([x("esri.views.interactive.tooltip.SketchTooltipInfo")],F);let Z=class extends F{constructor(e){super(e),this.type="draw-point"}};r([l()],Z.prototype,"type",void 0),r([l()],Z.prototype,"elevation",void 0),Z=r([x("esri.views.interactive.tooltip.DrawPointTooltipInfo")],Z);let G=class extends F{constructor(e){super(e),this.type="draw-polyline"}};r([l()],G.prototype,"type",void 0),r([l()],G.prototype,"elevation",void 0),r([l()],G.prototype,"totalLength",void 0),G=r([x("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],G);let E=class extends F{constructor(e){super(e),this.type="draw-polygon"}};r([l()],E.prototype,"type",void 0),r([l()],E.prototype,"elevation",void 0),r([l()],E.prototype,"area",void 0),E=r([x("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],E);const J="esri-tooltip",y=`${J}-content`;let w=class extends $e{constructor(){super(...arguments),this._messagesUnits=null,this._messagesTooltip=null}get _units(){const e=Vt(this.tooltip.view);return{length:e,verticalLength:e,area:e}}_formatScale(e){return te(e,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(e){return te(e,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(e,t,i){return ze(this._messagesUnits,e,ae(t,this._units.length),i)}_formatRelativeLength(e){return oi(this._messagesUnits,e,this._units.length)}_formatVerticalLength(e){return ai(this._messagesUnits,e,this._units.verticalLength)}_formatRelativeVerticalLength(e){return ri(this._messagesUnits,e,this._units.verticalLength)}_formatTotalLength(e){return ze(this._messagesUnits,e,this._units.length)}_formatArea(e){return li(this._messagesUnits,e,this._units.area)}_formatPercentage(e){return te(e.value,{style:"percent"})}};r([l()],w.prototype,"info",void 0),r([l()],w.prototype,"tooltip",void 0),r([l()],w.prototype,"_units",null),r([Ie("esri/core/t9n/Units"),l()],w.prototype,"_messagesUnits",void 0),r([Ie("esri/views/interactive/tooltip/t9n/Tooltip"),l()],w.prototype,"_messagesTooltip",void 0),w=r([x("esri.views.interactive.tooltip.content.TooltipContent")],w);const se=`${J}-field`,oe={base:se,title:`${se}__title`,value:`${se}__value`};let v=class extends $e{render(){return h("div",{class:oe.base},h("div",{class:oe.title},this.title),h("div",{class:oe.value},this.value))}};r([l()],v.prototype,"title",void 0),r([l()],v.prototype,"value",void 0),v=r([x("esri.views.interactive.tooltip.support.TooltipField")],v);const fi={base:`${y} ${`${y}--draw-point`}`};let pe=class extends w{render(){var i;const{elevation:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return h("div",{class:fi.base},h(v,{title:t==null?void 0:t.elevation,value:this._formatVerticalLength(e)}))}};pe=r([x("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],pe);const _i={base:`${y} ${`${y}--draw-polygon`}`};let ce=class extends w{render(){var n;const{area:e,elevation:t}=this.info,i=(n=this._messagesTooltip)==null?void 0:n.sketch;return h("div",{class:_i.base},h(v,{title:i==null?void 0:i.elevation,value:this._formatVerticalLength(t)}),h(v,{title:i==null?void 0:i.area,value:this._formatArea(e)}))}};ce=r([x("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],ce);const xi={base:`${y} ${`${y}--draw-polyline`}`};let he=class extends w{render(){var n;const{elevation:e,totalLength:t}=this.info,i=(n=this._messagesTooltip)==null?void 0:n.sketch;return h("div",{class:xi.base},h(v,{title:i==null?void 0:i.elevation,value:this._formatVerticalLength(e)}),h(v,{title:i==null?void 0:i.totalLength,value:this._formatLength(t)}))}};he=r([x("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],he);const wi={base:`${y} ${`${y}--extent-rotate`}`};let de=class extends w{render(){var i;const{angle:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return h("div",{class:wi.base},h(v,{title:t==null?void 0:t.rotation,value:this._formatRelativeOrientation(e)}))}};de=r([x("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],de);const $i={base:`${J}-value-by-value`};let D=class extends $e{constructor(){super(...arguments),this.divider="\xD7"}render(){return h("div",{class:$i.base},h("span",null,this.left),h("span",null,this.divider),h("span",null,this.right))}};r([l()],D.prototype,"left",void 0),r([l()],D.prototype,"divider",void 0),r([l()],D.prototype,"right",void 0),D=r([x("esri.views.interactive.tooltip.support.ValueByValue")],D);const Ti={base:`${y} ${`${y}--extent-scale`}`};let ue=class extends w{render(){var s;const{xScale:e,yScale:t,xSize:i,ySize:n}=this.info,o=(s=this._messagesTooltip)==null?void 0:s.sketch;return h("div",{class:Ti.base},h(v,{title:o==null?void 0:o.size,value:h(D,{left:this._formatLength(i),right:this._formatLength(n)})}),h(v,{title:o==null?void 0:o.scale,value:h(D,{left:this._formatScale(e),right:this._formatScale(t)})}))}};ue=r([x("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],ue);const bi={base:`${y} ${`${y}--reshape-edge-offset`}`};let ge=class extends w{render(){var i;const{distance:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return h("div",{class:bi.base},h(v,{title:t==null?void 0:t.distance,value:this._formatRelativeLength(e)}))}};ge=r([x("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],ge);const Oi={base:`${y} ${`${y}--reshape-move-graphic`}`};let me=class extends w{render(){var i;const{distance:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return h("div",{class:Oi.base},h(v,{title:t==null?void 0:t.distance,value:this._formatLength(e)}))}};me=r([x("esri.views.interactive.tooltip.content.TooltipContentReshapeMoveGraphic")],me);const Vi={base:`${y} ${`${y}--transform-absolute`}`};let ve=class extends w{render(){var u;const{orientation:e,orientationEnabled:t,orientationPrecision:i,rotationType:n,size:o,sizeEnabled:s,sizeUnit:a,sizePrecision:d}=this.info,c=(u=this._messagesTooltip)==null?void 0:u.sketch;return h("div",{class:Vi.base},t&&h(v,{title:c==null?void 0:c.orientation,value:tt(e,n,i)}),s&&h(v,{title:c==null?void 0:c.size,value:this._formatLength(o,a,d)}))}};ve=r([x("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],ve);const Si={base:`${y} ${`${y}--transform-rotate`}`};let ye=class extends w{render(){var a;const{rotation:e,rotationPrecision:t,orientation:i,orientationPrecision:n,rotationType:o}=this.info,s=(a=this._messagesTooltip)==null?void 0:a.sketch;return h("div",{class:Si.base},h(v,{title:s==null?void 0:s.rotation,value:pi(e,o,t)}),h(v,{title:s==null?void 0:s.orientation,value:tt(i,o,n)}))}};ye=r([x("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],ye);const Mi={base:`${y} ${`${y}--transform-scale`}`};let fe=class extends w{render(){var s;const{scale:e,size:t,sizePrecision:i,sizeUnit:n}=this.info,o=(s=this._messagesTooltip)==null?void 0:s.sketch;return h("div",{class:Mi.base},h(v,{title:o==null?void 0:o.scale,value:this._formatPercentage(e)}),h(v,{title:o==null?void 0:o.size,value:this._formatLength(t,n,i)}))}};fe=r([x("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],fe);const Ci={base:`${y} ${`${y}--translate-vertex`}`};let _e=class extends w{render(){var s;const{area:e,distance:t,elevation:i,totalLength:n}=this.info,o=(s=this._messagesTooltip)==null?void 0:s.sketch;return h("div",{class:Ci.base},h(v,{title:o==null?void 0:o.distance,value:this._formatLength(t)}),p(i)&&h(v,{title:o==null?void 0:o.elevation,value:this._formatVerticalLength(i)}),p(e)&&h(v,{title:o==null?void 0:o.area,value:this._formatArea(e)}),p(n)&&h(v,{title:o==null?void 0:o.totalLength,value:this._formatLength(n)}))}};_e=r([x("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],_e);const Ri={base:`${y} ${`${y}--extent-move-z`}`};let xe=class extends w{render(){var i;const{distance:e}=this.info,t=(i=this._messagesTooltip)==null?void 0:i.sketch;return h("div",{class:Ri.base},h(v,{title:t==null?void 0:t.distance,value:this._formatRelativeVerticalLength(e)}))}};xe=r([x("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],xe);function Ii(e,t){if(_(t))return null;const i=document.createElement("div");switch(t.type){case"draw-point":return new pe({tooltip:e,info:t,container:i});case"draw-polygon":return new ce({tooltip:e,info:t,container:i});case"draw-polyline":return new he({tooltip:e,info:t,container:i});case"extent-rotate":return new de({tooltip:e,info:t,container:i});case"extent-scale":return new ue({tooltip:e,info:t,container:i});case"reshape-edge-offset":return new ge({tooltip:e,info:t,container:i});case"transform-absolute":return new ve({tooltip:e,info:t,container:i});case"transform-rotate":return new ye({tooltip:e,info:t,container:i});case"transform-scale":return new fe({tooltip:e,info:t,container:i});case"translate-graphic":return new me({tooltip:e,info:t,container:i});case"translate-vertex":return new _e({tooltip:e,info:t,container:i});case"translate-z":return new xe({tooltip:e,info:t,container:i})}}const Li={base:`${J}`};let L=class extends Qe{constructor(e){super(e),this.info=null,this._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(Li.base),t})(),this._contentWidget=null}initialize(){const e=this._contentContainer;this.own([W(()=>{var t;return(t=this.view.overlay)==null?void 0:t.surface},t=>{e.remove(),re(t,i=>i.appendChild(e))},N),W(()=>this.info,(t,i)=>{p(this._contentWidget)&&p(t)&&p(i)&&t.type===i.type?this._contentWidget.info=t:(this._contentWidget=M(this._contentWidget),re(Ii(this,t),n=>{this._contentWidget=n,e.appendChild(n.container)}))},N),W(()=>{var t;return{container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:(t=this.view.inputManager)==null?void 0:t.latestPointerLocation}},Di,N)])}destroy(){this._contentWidget=M(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get test(){return{contentContainer:this._contentContainer}}};function Di({container:e,contentWidget:t,screenPoint:i}){const{style:n}=e;if(p(i)&&p(t)){n.display="block";const o=St(e),s=`translate(${Math.round(i.x)+Ze[0]*(o?-1:1)}px, ${Math.round(i.y)+Ze[1]}px)`;n.transform=o?`translate(-100%, 0) ${s}`:s}else n.display="none"}r([l({nonNullable:!0})],L.prototype,"view",void 0),r([l()],L.prototype,"info",void 0),r([l()],L.prototype,"_contentContainer",void 0),r([l()],L.prototype,"_contentWidget",void 0),L=r([x("esri.views.interactive.tooltip.Tooltip")],L);const Ze=[20,20];function Oe(e,t,i,n,...o){return Mt(e)&&Ct(e)?t.apply(void 0,o):Rt(e)?i.apply(void 0,o):n.apply(void 0,o)}function Pi(e){const{spatialReference:t}=e;return Oe(t,ki,zi,Gi,e)}function ki(e){return Y(Math.abs(Xe([e],"square-meters")[0]),"square-meters")}function zi(e){try{return Y(Math.abs(Bt(e,"square-meters")),"square-meters")}catch{return null}}function Gi(e){const t=[];return It(e,t)?Y(Math.abs(Xe([{type:"polygon",rings:t,spatialReference:Lt.WGS84}],"square-meters")[0]),"square-meters"):null}function Ei(e,t,i=it()){if(t){const n=Pi(e);return p(n)?n:ci(e,i)}return hi(e,i)}function Wi(e){const{spatialReference:t}=e;return Oe(t,Ai,qi,ji,e)}function Fi(e,t){if(!Dt(e.spatialReference,t.spatialReference))return null;const{spatialReference:i}=e;return q[0]=e.x,q[1]=e.y,q[2]=e.hasZ?e.z:0,j[0]=t.x,j[1]=t.y,j[2]=t.hasZ?t.z:0,Ve(q,j,i)}function Ve(e,t,i){return Oe(i,Ui,Hi,Zi,e,t,i)}function Ui(e,t,i){return C(Te(Se,e,t,i).distance,"meters")}function Hi(e,t,i){return C(et(Bi(e,t,i),"meters"),"meters")}function Zi(e,t,i){return Le(e,i,Ae)&&Le(t,i,qe)?C(Te(Se,Ae,qe).distance,"meters"):null}function Ai(e){return C(Pt([e],"meters")[0],"meters")}function qi(e){return C(et(e,"meters"),"meters")}function ji(e){const t=[];if(!kt(e,t))return null;let i=0;for(const n of t){let o=0;for(let s=1;s<n.length;++s)o+=Te(Se,n[s-1],n[s]).distance;i+=o}return C(i,"meters")}function Bi(e,t,i){return{type:"polyline",spatialReference:i,paths:[[[...e],[...t]]]}}const Se={distance:null},q=V(),j=V(),Ae=V(),qe=V();function Ni(e,t){return K(ti,Wi,ei,t,e)}function Qi(e,t,i,n){return K(ii,Ve,le,n,e,t,i)}function hn(e,t,i){return K(ke,Fi,ke,i,e,t)}function dn(e,t,i,n){return K(le,Ve,le,n,e,t,i)}function K(e,t,i,n,...o){if(n==="on-the-ground"){const s=t.apply(void 0,o);return p(s)?s:i.apply(void 0,o)}return e.apply(void 0,o)}function Xi(e,t){var u,g,b;const i=O=>Ni(O,t),n=(O,S,$)=>Qi(O,S,$,t),o=i(e),s=(b=(g=e.paths[0])==null?void 0:g[((u=e.paths[0])==null?void 0:u.length)-1])!=null?b:null,{hasZ:a,spatialReference:d}=e,c=s?zt(s[0],s[1],a?s[2]:0):null;return O=>{if(_(O)||_(o)||_(c))return o;B[0]=O.x,B[1]=O.y,B[2]=a?O.z:0;const S=n(c,B,d);return _(S)?o:C(o.value+S.value,o.unit)}}function Yi(e,t){const i=it(),n=o=>Ei(o,t,i);return o=>{if(_(o)||e.rings.length<1||e.rings[0].length<2)return n(e);const s=e.clone();return s.rings[0].push([o.x,o.y]),n(s)}}const B=V();let f=class extends we.EventedMixin(Gt){constructor(e){super(e),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new ni,this._tooltip=null,this._tooltipContext={calculateElevation:null,calculateTotalLength:null,calculateArea:null},this.isDraped=!0,this.labelOptions=new Ye,this.tooltipOptions=new Je,this.snapToSceneEnabled=null,_(e.elevationInfo)&&(this.elevationInfo={mode:e.hasZ?"absolute-height":"on-the-ground",offset:0})}initialize(){const{geometryType:e,view:t}=this,{spatialReference:i}=t,n="viewingMode"in t.state?t.state.viewingMode:Et.Local,o=e==="segment"||e==="multipoint"?"polyline":e;this.coordinateHelper=Xt(this.hasZ,this.hasM,i),this._editGeometryOperations=new Yt(new Jt(o,this.coordinateHelper)),this._snappingOperation=new si({view:t}),this.handles.add(W(()=>this.stagedVertex,(a,d)=>{p(this._tooltip)&&(p(d)!==p(a)?this._tooltip.info=this._getTooltipInfo():this._updateTooltipInfo()),_(a)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(a)}],operation:"apply",type:"vertex-update"})},{sync:!0,equals:(a,d)=>Ht(a,d,Qt)})),this._activeComponent=new Kt(i,n),this._editGeometryOperations.data.components.push(this._activeComponent);const s=this.segmentLabels;p(s)&&(s.context={view:t,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([W(()=>this.labelOptions.enabled,a=>{s.visible=a},N),this.on("cursor-update",()=>{const a=this.stagedVertex;s.stagedVertex=p(a)?this.coordinateHelper.pointToVector(a):null})])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],a=>{const d=a.vertices.map(u=>({componentIndex:0,vertexIndex:u.index,coordinates:this.coordinateHelper.vectorToArray(u.pos)})),c=d.map(u=>u.coordinates);switch(a.type){case"vertex-add":this.emit(a.type,{...a,added:c,vertices:d});break;case"vertex-update":this.emit(a.type,{...a,updated:c,vertices:d});break;case"vertex-remove":this.emit(a.type,{...a,removed:c,vertices:d})}})),this._manipulator=new yi({grabbableForEvent:a=>this.drawingMode!=="click"||a.pointerType==="touch"&&this._snappingEnabled&&this._pointerDownStates.size===1}),this.manipulators.add(this._manipulator),this._manipulator.grabbable=e!=="point",this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",a=>this._onImmediateClick(a)),this._manipulator.events.on("immediate-double-click",a=>this._onImmediateDoubleClick(a)),W(()=>this.tooltipOptions.enabled,a=>{this._tooltip=a?new L({view:t,info:this._getTooltipInfo()}):M(this._tooltip)},Zt),this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],()=>re(this._tooltip,a=>{a.info=this._getTooltipInfo()}))])}destroy(){M(this.segmentLabels),M(this._snappingOperation),this._tooltip=M(this._tooltip),this._editGeometryOperations=M(this._editGeometryOperations)}get _snappingEnabled(){return p(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get _defaultElevation(){return C(this.defaultZ,"meters")}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map(e=>this.coordinateHelper.vectorToArray(e.pos))}set drawingMode(e){this._set("drawingMode",e!=null?e:st)}get interactive(){return this._manipulator.interactive}set interactive(e){this._manipulator.interactive=e}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return p(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(e){this._snappingOperation.stagedPoint=Be(e)}get updating(){return this.updatingHandles.updating}get vertices(){const e=this.committedVertices;return p(this.stagedVertex)&&e.push(this.coordinateHelper.pointToArray(this.stagedVertex)),e}get stagedOrLastVertex(){if(p(this.stagedVertex))return this.stagedVertex;const e=this._activeComponent.getLastVertex();return _(e)?null:this._editGeometryOperations.data.coordinateHelper.vectorToDehydratedPoint(e.pos)}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),p(this.stagedVertex)){const{stagedVertex:e}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(e))}}complete(e){const t=e&&e.aborted||!1;this._snappingOperation.abort(),p(this.snappingManager)&&this.snappingManager.doneSnapping(),this.geometryType==="segment"||this.geometryType==="point"?this.commitStagedVertex():this.stagedVertex=null;const i=this.geometryType==="multipoint"&&this.numVertices===0||this.geometryType==="polyline"&&this.numVertices<2||this.geometryType==="polygon"&&this.numVertices<3;this._createOperationCompleted=!i,(this.isCompleted||t)&&this.emit("complete",{vertices:this.vertices.map((n,o)=>({componentIndex:0,vertexIndex:o,coordinates:n})),aborted:t,type:"complete"})}onInputEvent(e){switch(e.type){case"pointer-down":this._pointerDownStates.add(e.pointerId);break;case"pointer-up":this._pointerDownStates.delete(e.pointerId)}switch(e.type){case"pointer-move":return this._onPointerMove(e);case"hold":return this._onHold(e)}}redo(){this._editGeometryOperations.redo()}undo(){p(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(e){const t=this._activeComponent;if(this.geometryType==="polygon"&&t.vertices.length>2){if(this._vertexWithinPointerDistance(t.vertices[0].pos,e))return 0;if(this._vertexWithinPointerDistance(t.vertices[t.vertices.length-1].pos,e))return t.vertices.length-1}return null}_createManipulatorDragPipeline(e){switch(H(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(e);case"freehand":return this._createManipulatorDragPipelineFreehand(e);case"hybrid":return this._createManipulatorDragPipelineHybrid(e)}}_createManipulatorDragPipelineClick(e){return ie(e,(t,i,n,o)=>{const s=o==="touch"&&this._snappingEnabled;!this.isCompleted&&s&&(i.next(this._screenToMapDragEventStep()).next(a=>(a.action==="start"&&(this.stagedVertex=a.mapStart,(this.geometryType==="segment"||s&&this.numVertices===0)&&this.commitStagedVertex()),a)).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>s,cancel:n,snappingManager:this.snappingManager,snappingContext:new Pe({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:o,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next(a=>(s&&(this.stagedVertex=a.mapEnd,a.action==="end"&&this.commitStagedVertex()),a)).next(a=>(a.action==="end"&&(this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()),a)),n.next(()=>{s&&p(this.snappingManager)&&this.snappingManager.doneSnapping()}))})}_createManipulatorDragPipelineFreehand(e){return ie(e,(t,i)=>{this.isCompleted||i.next(this._screenToMapDragEventStep()).next(n=>(n.action==="start"&&(_(this.stagedVertex)&&(this.stagedVertex=n.mapStart),this.geometryType==="segment"&&this.commitStagedVertex()),n)).next(n=>{switch(n.action){case"start":case"update":this.stagedVertex=n.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.complete()}return n})})}_createManipulatorDragPipelineHybrid(e){return ie(e,(t,i)=>{this.isCompleted||i.next(this._screenToMapDragEventStep()).next(n=>(n.action==="start"&&(_(this.stagedVertex)&&(this.stagedVertex=n.mapStart),this.commitStagedVertex()),n)).next(n=>{switch(n.action){case"start":case"update":this.stagedVertex=n.mapEnd,this.geometryType!=="polygon"&&this.geometryType!=="polyline"||this.commitStagedVertex();break;case"end":this.geometryType!=="segment"&&this.geometryType!=="point"||this.complete()}return n})})}_getDrawSurface(){if(_(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let e=this.defaultZ,t=!1;p(this.elevationInfo)&&this.elevationInfo.mode==="absolute-height"&&(t=!0),p(this.snapToSceneEnabled)&&(t=this.snapToSceneEnabled),p(this.elevationInfo)&&this.elevationInfo.mode==="on-the-ground"&&(t=!1);const i=this._activeComponent.vertices.length;return(this.geometryType==="segment"||this.geometryType==="polygon")&&i>0&&(e=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),t=!1),t?this.drawSurface:(this.elevationDrawSurface.defaultZ=e,this.elevationDrawSurface)}_mapToScreen(e){return this._getDrawSurface().mapToScreen(e)}_onHold(e){this._snappingOperation.abort(),this.drawingMode==="click"&&e.pointerType==="touch"&&this._snappingEnabled&&(this.stagedVertex=e.mapPoint),e.stopPropagation()}_onImmediateClick(e){if(e.pointerType==="mouse"&&e.button===2||this._manipulator.dragging)return;const t=this._activeComponent,i=this._closeOnClickVertexIndex(e.screenPoint);if(p(i))return e.stopPropagation(),void this.complete();const n=this._screenToMap(e.screenPoint);if(p(n))switch(this.drawingMode){case"freehand":this.geometryType==="point"&&(p(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(n)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),p(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(n)),(this.geometryType==="point"||this.geometryType==="segment"&&t.vertices.length===2||this.geometryType==="segment"&&this.drawingMode==="hybrid"&&t.vertices.length===1)&&this.complete()}e.stopPropagation()}_onImmediateDoubleClick(e){this._manipulator.dragging||this.geometryType==="point"||(this.complete(),e.stopPropagation())}_onPointerMove(e){const t=Wt(e.x,e.y);if(this._manipulator.dragging||this._pointerDownStates.has(e.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void this._snappingOperation.abort();e.stopPropagation();const i=this._closeOnClickVertexIndex(t);if(p(i))return this._closeOnVertex(i),void this._snappingOperation.abort();const n=this._screenToMap(t);if(this._manipulator.cursor=p(n)?"crosshair":null,_(n))return void this._snappingOperation.abort();if(_(this.snappingManager))return this.stagedVertex=n,void this._snappingOperation.abort();const o=this.snappingManager,s=new Pe({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:e.pointerType,visualizer:this.snappingVisualizer});this.updatingHandles.addPromise(Ft(this._snappingOperation.snap(n,o,s)))}_closeOnVertex(e){this.stagedVertex=null;const t={componentIndex:0,vertexIndex:e,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[e].pos)};this.emit("cursor-update",{updated:null,vertices:[t],operation:"apply",type:"vertex-update"})}_screenToMap(e){return this._getDrawSurface().screenToMap(e)}_screenToMapDragEventStep(){let e=null;return t=>{if(t.action==="start"&&(e=this._screenToMap(t.screenStart)),_(e))return null;const i=this._screenToMap(t.screenEnd);return p(i)?{...t,mapStart:e,mapEnd:i}:null}}_vertexWithinPointerDistance(e,t){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(e));return!!p(n)&&Ji(n,t,25)}_calculateVertexTooltipElevation(e){const{tooltipOptions:t,view:i}=this;if(_(e)||i.type==="2d")return this._defaultElevation;const n=this.elevationInfo,o=t.elevation.mode,{spatialReference:s}=e,a=Ut(s),d=be(i,e,n,{mode:o,offset:0});return C(d*a,"meters")}_getTooltipInfo(){const{tooltipOptions:e,stagedOrLastVertex:t}=this;if(_(t))return null;this._tooltipContext.calculateElevation=n=>this._calculateVertexTooltipElevation(n);const i=this._elevationTooltipDetail(t);switch(this.geometryType){case"point":return new Z({tooltipOptions:e,elevation:i});case"polyline":return this._tooltipContext.calculateTotalLength=Xi(this._editGeometryOperations.data.geometry,this.isDraped?"on-the-ground":"absolute-height"),new G({tooltipOptions:e,elevation:i,totalLength:this._totalLengthTooltipDetail(t)});case"polygon":return this._tooltipContext.calculateArea=Yi(this._editGeometryOperations.data.geometry,this.isDraped),new E({tooltipOptions:e,elevation:i,area:this._areaTooltipDetail(t)});default:return null}}_elevationTooltipDetail(e){return{mode:this.elevationInfo.mode,...H(this._tooltipContext.calculateElevation)(e)}}_totalLengthTooltipDetail(e){return{...ae(H(this._tooltipContext.calculateTotalLength)(e),C(0,"meters"))}}_areaTooltipDetail(e){return{...ae(H(this._tooltipContext.calculateArea)(e),Y(0,"square-meters"))}}_updateTooltipInfo(){const e=this._tooltip;if(_(e))return;const{stagedOrLastVertex:t}=this,i=this._elevationTooltipDetail(t);switch(this.geometryType){case"point":e.info.elevation=i;break;case"polyline":{const n=e.info;n.elevation=i,n.totalLength=this._totalLengthTooltipDetail(t);break}case"polygon":{const n=e.info;n.elevation=i,n.area=this._areaTooltipDetail(t);break}}}get test(){return{tooltip:this._tooltip}}};function Ji(e,t,i){const n=e.x-t.x,o=e.y-t.y;return n*n+o*o<=i}r([l()],f.prototype,"_defaultElevation",null),r([l()],f.prototype,"defaultZ",void 0),r([l()],f.prototype,"isDraped",void 0),r([l({value:st})],f.prototype,"drawingMode",null),r([l({constructOnly:!0})],f.prototype,"elevationDrawSurface",void 0),r([l({constructOnly:!0})],f.prototype,"elevationInfo",void 0),r([l({constructOnly:!0,type:Ye})],f.prototype,"labelOptions",void 0),r([l({constructOnly:!0,type:Je})],f.prototype,"tooltipOptions",void 0),r([l({constructOnly:!0})],f.prototype,"geometryType",void 0),r([l({constructOnly:!0})],f.prototype,"hasM",void 0),r([l({constructOnly:!0})],f.prototype,"hasZ",void 0),r([l({constructOnly:!0})],f.prototype,"manipulators",void 0),r([l({constructOnly:!0})],f.prototype,"drawSurface",void 0),r([l({constructOnly:!0})],f.prototype,"segmentLabels",void 0),r([l({constructOnly:!0})],f.prototype,"snappingManager",void 0),r([l({constructOnly:!0})],f.prototype,"snappingVisualizer",void 0),r([l()],f.prototype,"snapToSceneEnabled",void 0),r([l()],f.prototype,"_snappingOperation",void 0),r([l()],f.prototype,"stagedVertex",null),r([l()],f.prototype,"updating",null),r([l({constructOnly:!0})],f.prototype,"view",void 0),f=r([x("esri.views.draw.DrawOperation")],f);class un{constructor(t,i,n,o=null){this.elevationInfo=t,this.defaultZ=i,this.view=n,this.excludeGraphics=o}screenToMap(t){if(p(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(De(t.x,t.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const i=this.view.sceneIntersectionHelper.intersectElevationFromScreen(De(t.x,t.y),this.elevationInfo,0,this.excludeGraphics);return p(i)&&(i.z=void 0),i}mapToScreen(t){const i=Ke(t.x,t.y,be(this.view,t,this.elevationInfo),t.spatialReference);return this.view.toScreen(i)}}class gn{constructor(t,i,n=[]){this.view=t,this.elevationInfo=i,this.exclude=n}screenToMap(t){const i=this.view.toMap(t,{exclude:this.exclude});return p(i)&&(i.z=At(i,this.view,this.elevationInfo)),i}mapToScreen(t){let i=t;return p(this.elevationInfo)&&(i=Ke(t.x,t.y,be(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(i)}}class mn{constructor(t){this.view=t,this.screenToMap=i=>t.toMap(i),this.mapToScreen=i=>t.toScreen(i)}}export{f as F,cn as G,T as _,Qi as a,Ei as b,mn as c,hn as d,F as e,Ni as f,dn as g,Ve as l,L as m,gn as n,un as r};
