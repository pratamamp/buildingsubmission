import{gp as S,A as B,g4 as d,g9 as $,g5 as m,a6 as x,hD as z,W as j,g0 as A,hE as w}from"./index.52935b46.js";import{s as C,c as g}from"./vectorStacks.a7af424f.js";function D(t){return t?{origin:S(t.origin),vector:S(t.vector)}:{origin:B(),vector:B()}}function F(t,r){const n=I.get();return n.origin=t,n.vector=r,n}function L(t,r=D()){return G(t.origin,t.vector,r)}function G(t,r,n=D()){return d(n.origin,t),d(n.vector,r),n}function N(t,r,n=D()){return d(n.origin,t),$(n.vector,r,t),n}function O(t,r){const n=$(g.get(),r,t.origin),c=m(t.vector,n),a=m(t.vector,t.vector),i=j(c/a,0,1),f=$(g.get(),x(g.get(),t.vector,i),n);return m(f,f)}function Q(t,r,n){return H(t,r,0,1,n)}function R(t,r,n){return A(n,t.origin,x(n,t.vector,r))}function H(t,r,n,c,a){const{vector:i,origin:f}=t,u=$(g.get(),r,f),h=m(i,u)/z(i);return x(a,i,j(h,n,c)),A(a,a,t.origin)}function T(t,r){if(W(t,F(r.origin,r.direction),!1,k)){const{tA:n,pB:c,distance2:a}=k;if(n>=0&&n<=1)return a;if(n<0)return w(t.origin,c);if(n>1)return w(A(g.get(),t.origin,t.vector),c)}return null}function U(t,r,n){return!!W(t,r,!0,k)&&(d(n,k.pA),!0)}function W(t,r,n,c){const i=t.origin,f=A(g.get(),i,t.vector),u=r.origin,h=A(g.get(),u,r.vector),s=g.get(),e=g.get();if(s[0]=i[0]-u[0],s[1]=i[1]-u[1],s[2]=i[2]-u[2],e[0]=h[0]-u[0],e[1]=h[1]-u[1],e[2]=h[2]-u[2],Math.abs(e[0])<1e-6&&Math.abs(e[1])<1e-6&&Math.abs(e[2])<1e-6)return!1;const o=g.get();if(o[0]=f[0]-i[0],o[1]=f[1]-i[1],o[2]=f[2]-i[2],Math.abs(o[0])<1e-6&&Math.abs(o[1])<1e-6&&Math.abs(o[2])<1e-6)return!1;const E=s[0]*e[0]+s[1]*e[1]+s[2]*e[2],M=e[0]*o[0]+e[1]*o[1]+e[2]*o[2],y=s[0]*o[0]+s[1]*o[1]+s[2]*o[2],q=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],P=(o[0]*o[0]+o[1]*o[1]+o[2]*o[2])*q-M*M;if(Math.abs(P)<1e-6)return!1;let v=(E*M-y*q)/P,p=(E+M*v)/q;n&&(v=j(v,0,1),p=j(p,0,1));const b=g.get(),l=g.get();return b[0]=i[0]+v*o[0],b[1]=i[1]+v*o[1],b[2]=i[2]+v*o[2],l[0]=u[0]+p*e[0],l[1]=u[1]+p*e[1],l[2]=u[2]+p*e[2],c.tA=v,c.tB=p,c.pA=b,c.pB=l,c.distance2=w(b,l),!0}const k={tA:0,tB:0,pA:B(),pB:B(),distance2:0},I=new C(()=>({origin:null,vector:null}));export{H as A,T as B,O as b,Q as d,L as h,R as j,U as k,N as l,G as m,D as v};
