import{e as r,g as p,jJ as v,n as g,s as l,w as E,P as x,aY as c,l as b}from"./index.586dfff9.js";import{s as F}from"./popupUtils.df63e0e6.js";const N=m=>{let e=class extends m{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(t,n){const{layer:o}=this;if(!t)throw new l("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:o});const{popupEnabled:u}=o,a=F(o,n);if(!u||E(a))throw new l("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:a});const w=await a.getRequiredFields(),s=new x;s.timeExtent=this.timeExtent,s.geometry=t,s.outFields=w,s.outSpatialReference=t.spatialReference;const i=this.view.resolution,h=this.view.type==="2d"?new c(i,i,this.view.spatialReference):new c(.5*i,.5*i,this.view.spatialReference),{returnTopmostRaster:y,showNoDataRecords:d}=a.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},R={returnDomainValues:!0,returnTopmostRaster:y,pixelSize:h,showNoDataRecords:d,signal:b(n)?n.signal:null};return o.queryVisibleRasters(s,R).then(f=>f)}canResume(){var t;return!!super.canResume()&&!((t=this.timeExtent)!=null&&t.isEmpty)}};return r([p()],e.prototype,"layer",void 0),r([p()],e.prototype,"suspended",void 0),r([p(v)],e.prototype,"timeExtent",void 0),r([p()],e.prototype,"view",void 0),e=r([g("esri.views.layers.ImageryLayerView")],e),e};export{N as m};
