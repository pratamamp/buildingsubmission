(function(){const Tt=document.createElement("link").relList;if(Tt&&Tt.supports&&Tt.supports("modulepreload"))return;for(const Ft of document.querySelectorAll('link[rel="modulepreload"]'))Pt(Ft);new MutationObserver(Ft=>{for(const Dt of Ft)if(Dt.type==="childList")for(const Nt of Dt.addedNodes)Nt.tagName==="LINK"&&Nt.rel==="modulepreload"&&Pt(Nt)}).observe(document,{childList:!0,subtree:!0});function Mt(Ft){const Dt={};return Ft.integrity&&(Dt.integrity=Ft.integrity),Ft.referrerpolicy&&(Dt.referrerPolicy=Ft.referrerpolicy),Ft.crossorigin==="use-credentials"?Dt.credentials="include":Ft.crossorigin==="anonymous"?Dt.credentials="omit":Dt.credentials="same-origin",Dt}function Pt(Ft){if(Ft.ep)return;Ft.ep=!0;const Dt=Mt(Ft);fetch(Ft.href,Dt)}})();function getDefaultExportFromCjs(_t){return _t&&_t.__esModule&&Object.prototype.hasOwnProperty.call(_t,"default")?_t.default:_t}var react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2J=Symbol.for("react.element"),n$30=Symbol.for("react.portal"),p$3J=Symbol.for("react.fragment"),q$s=Symbol.for("react.strict_mode"),r$1Q=Symbol.for("react.profiler"),t$2f=Symbol.for("react.provider"),u$2k=Symbol.for("react.context"),v$1b=Symbol.for("react.forward_ref"),w$1b=Symbol.for("react.suspense"),x$W=Symbol.for("react.memo"),y$1U=Symbol.for("react.lazy"),z$C=Symbol.iterator;function A$I(_t){return _t===null||typeof _t!="object"?null:(_t=z$C&&_t[z$C]||_t["@@iterator"],typeof _t=="function"?_t:null)}var B$v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$y=Object.assign,D$F={};function E$O(_t,Tt,Mt){this.props=_t,this.context=Tt,this.refs=D$F,this.updater=Mt||B$v}E$O.prototype.isReactComponent={};E$O.prototype.setState=function(_t,Tt){if(typeof _t!="object"&&typeof _t!="function"&&_t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_t,Tt,"setState")};E$O.prototype.forceUpdate=function(_t){this.updater.enqueueForceUpdate(this,_t,"forceUpdate")};function F$A(){}F$A.prototype=E$O.prototype;function G$s(_t,Tt,Mt){this.props=_t,this.context=Tt,this.refs=D$F,this.updater=Mt||B$v}var H$l=G$s.prototype=new F$A;H$l.constructor=G$s;C$y(H$l,E$O.prototype);H$l.isPureReactComponent=!0;var I$H=Array.isArray,J$k=Object.prototype.hasOwnProperty,K$h={current:null},L$A={key:!0,ref:!0,__self:!0,__source:!0};function M$S(_t,Tt,Mt){var Pt,Ft={},Dt=null,Nt=null;if(Tt!=null)for(Pt in Tt.ref!==void 0&&(Nt=Tt.ref),Tt.key!==void 0&&(Dt=""+Tt.key),Tt)J$k.call(Tt,Pt)&&!L$A.hasOwnProperty(Pt)&&(Ft[Pt]=Tt[Pt]);var Vt=arguments.length-2;if(Vt===1)Ft.children=Mt;else if(1<Vt){for(var zt=Array(Vt),Xt=0;Xt<Vt;Xt++)zt[Xt]=arguments[Xt+2];Ft.children=zt}if(_t&&_t.defaultProps)for(Pt in Vt=_t.defaultProps,Vt)Ft[Pt]===void 0&&(Ft[Pt]=Vt[Pt]);return{$$typeof:l$2J,type:_t,key:Dt,ref:Nt,props:Ft,_owner:K$h.current}}function N$y(_t,Tt){return{$$typeof:l$2J,type:_t.type,key:Tt,ref:_t.ref,props:_t.props,_owner:_t._owner}}function O$C(_t){return typeof _t=="object"&&_t!==null&&_t.$$typeof===l$2J}function escape(_t){var Tt={"=":"=0",":":"=2"};return"$"+_t.replace(/[=:]/g,function(Mt){return Tt[Mt]})}var P$y=/\/+/g;function Q$g(_t,Tt){return typeof _t=="object"&&_t!==null&&_t.key!=null?escape(""+_t.key):Tt.toString(36)}function R$A(_t,Tt,Mt,Pt,Ft){var Dt=typeof _t;(Dt==="undefined"||Dt==="boolean")&&(_t=null);var Nt=!1;if(_t===null)Nt=!0;else switch(Dt){case"string":case"number":Nt=!0;break;case"object":switch(_t.$$typeof){case l$2J:case n$30:Nt=!0}}if(Nt)return Nt=_t,Ft=Ft(Nt),_t=Pt===""?"."+Q$g(Nt,0):Pt,I$H(Ft)?(Mt="",_t!=null&&(Mt=_t.replace(P$y,"$&/")+"/"),R$A(Ft,Tt,Mt,"",function(Xt){return Xt})):Ft!=null&&(O$C(Ft)&&(Ft=N$y(Ft,Mt+(!Ft.key||Nt&&Nt.key===Ft.key?"":(""+Ft.key).replace(P$y,"$&/")+"/")+_t)),Tt.push(Ft)),1;if(Nt=0,Pt=Pt===""?".":Pt+":",I$H(_t))for(var Vt=0;Vt<_t.length;Vt++){Dt=_t[Vt];var zt=Pt+Q$g(Dt,Vt);Nt+=R$A(Dt,Tt,Mt,zt,Ft)}else if(zt=A$I(_t),typeof zt=="function")for(_t=zt.call(_t),Vt=0;!(Dt=_t.next()).done;)Dt=Dt.value,zt=Pt+Q$g(Dt,Vt++),Nt+=R$A(Dt,Tt,Mt,zt,Ft);else if(Dt==="object")throw Tt=String(_t),Error("Objects are not valid as a React child (found: "+(Tt==="[object Object]"?"object with keys {"+Object.keys(_t).join(", ")+"}":Tt)+"). If you meant to render a collection of children, use an array instead.");return Nt}function S$T(_t,Tt,Mt){if(_t==null)return _t;var Pt=[],Ft=0;return R$A(_t,Pt,"","",function(Dt){return Tt.call(Mt,Dt,Ft++)}),Pt}function T$F(_t){if(_t._status===-1){var Tt=_t._result;Tt=Tt(),Tt.then(function(Mt){(_t._status===0||_t._status===-1)&&(_t._status=1,_t._result=Mt)},function(Mt){(_t._status===0||_t._status===-1)&&(_t._status=2,_t._result=Mt)}),_t._status===-1&&(_t._status=0,_t._result=Tt)}if(_t._status===1)return _t._result.default;throw _t._result}var U$z={current:null},V$s={transition:null},W$e={ReactCurrentDispatcher:U$z,ReactCurrentBatchConfig:V$s,ReactCurrentOwner:K$h};react_production_min.Children={map:S$T,forEach:function(_t,Tt,Mt){S$T(_t,function(){Tt.apply(this,arguments)},Mt)},count:function(_t){var Tt=0;return S$T(_t,function(){Tt++}),Tt},toArray:function(_t){return S$T(_t,function(Tt){return Tt})||[]},only:function(_t){if(!O$C(_t))throw Error("React.Children.only expected to receive a single React element child.");return _t}};react_production_min.Component=E$O;react_production_min.Fragment=p$3J;react_production_min.Profiler=r$1Q;react_production_min.PureComponent=G$s;react_production_min.StrictMode=q$s;react_production_min.Suspense=w$1b;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$e;react_production_min.cloneElement=function(_t,Tt,Mt){if(_t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_t+".");var Pt=C$y({},_t.props),Ft=_t.key,Dt=_t.ref,Nt=_t._owner;if(Tt!=null){if(Tt.ref!==void 0&&(Dt=Tt.ref,Nt=K$h.current),Tt.key!==void 0&&(Ft=""+Tt.key),_t.type&&_t.type.defaultProps)var Vt=_t.type.defaultProps;for(zt in Tt)J$k.call(Tt,zt)&&!L$A.hasOwnProperty(zt)&&(Pt[zt]=Tt[zt]===void 0&&Vt!==void 0?Vt[zt]:Tt[zt])}var zt=arguments.length-2;if(zt===1)Pt.children=Mt;else if(1<zt){Vt=Array(zt);for(var Xt=0;Xt<zt;Xt++)Vt[Xt]=arguments[Xt+2];Pt.children=Vt}return{$$typeof:l$2J,type:_t.type,key:Ft,ref:Dt,props:Pt,_owner:Nt}};react_production_min.createContext=function(_t){return _t={$$typeof:u$2k,_currentValue:_t,_currentValue2:_t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_t.Provider={$$typeof:t$2f,_context:_t},_t.Consumer=_t};react_production_min.createElement=M$S;react_production_min.createFactory=function(_t){var Tt=M$S.bind(null,_t);return Tt.type=_t,Tt};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_t){return{$$typeof:v$1b,render:_t}};react_production_min.isValidElement=O$C;react_production_min.lazy=function(_t){return{$$typeof:y$1U,_payload:{_status:-1,_result:_t},_init:T$F}};react_production_min.memo=function(_t,Tt){return{$$typeof:x$W,type:_t,compare:Tt===void 0?null:Tt}};react_production_min.startTransition=function(_t){var Tt=V$s.transition;V$s.transition={};try{_t()}finally{V$s.transition=Tt}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(_t,Tt){return U$z.current.useCallback(_t,Tt)};react_production_min.useContext=function(_t){return U$z.current.useContext(_t)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_t){return U$z.current.useDeferredValue(_t)};react_production_min.useEffect=function(_t,Tt){return U$z.current.useEffect(_t,Tt)};react_production_min.useId=function(){return U$z.current.useId()};react_production_min.useImperativeHandle=function(_t,Tt,Mt){return U$z.current.useImperativeHandle(_t,Tt,Mt)};react_production_min.useInsertionEffect=function(_t,Tt){return U$z.current.useInsertionEffect(_t,Tt)};react_production_min.useLayoutEffect=function(_t,Tt){return U$z.current.useLayoutEffect(_t,Tt)};react_production_min.useMemo=function(_t,Tt){return U$z.current.useMemo(_t,Tt)};react_production_min.useReducer=function(_t,Tt,Mt){return U$z.current.useReducer(_t,Tt,Mt)};react_production_min.useRef=function(_t){return U$z.current.useRef(_t)};react_production_min.useState=function(_t){return U$z.current.useState(_t)};react_production_min.useSyncExternalStore=function(_t,Tt,Mt){return U$z.current.useSyncExternalStore(_t,Tt,Mt)};react_production_min.useTransition=function(){return U$z.current.useTransition()};react_production_min.version="18.2.0";(function(_t){_t.exports=react_production_min})(react);const React=getDefaultExportFromCjs(react.exports);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_t){function Tt(yr,Er){var Cr=yr.length;yr.push(Er);e:for(;0<Cr;){var Dr=Cr-1>>>1,jr=yr[Dr];if(0<Ft(jr,Er))yr[Dr]=Er,yr[Cr]=jr,Cr=Dr;else break e}}function Mt(yr){return yr.length===0?null:yr[0]}function Pt(yr){if(yr.length===0)return null;var Er=yr[0],Cr=yr.pop();if(Cr!==Er){yr[0]=Cr;e:for(var Dr=0,jr=yr.length,Hr=jr>>>1;Dr<Hr;){var zr=2*(Dr+1)-1,Qr=yr[zr],Xr=zr+1,Br=yr[Xr];if(0>Ft(Qr,Cr))Xr<jr&&0>Ft(Br,Qr)?(yr[Dr]=Br,yr[Xr]=Cr,Dr=Xr):(yr[Dr]=Qr,yr[zr]=Cr,Dr=zr);else if(Xr<jr&&0>Ft(Br,Cr))yr[Dr]=Br,yr[Xr]=Cr,Dr=Xr;else break e}}return Er}function Ft(yr,Er){var Cr=yr.sortIndex-Er.sortIndex;return Cr!==0?Cr:yr.id-Er.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Dt=performance;_t.unstable_now=function(){return Dt.now()}}else{var Nt=Date,Vt=Nt.now();_t.unstable_now=function(){return Nt.now()-Vt}}var zt=[],Xt=[],Ht=1,Wt=null,Qt=3,Zt=!1,Kt=!1,er=!1,Yt=typeof setTimeout=="function"?setTimeout:null,rr=typeof clearTimeout=="function"?clearTimeout:null,ir=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function nr(yr){for(var Er=Mt(Xt);Er!==null;){if(Er.callback===null)Pt(Xt);else if(Er.startTime<=yr)Pt(Xt),Er.sortIndex=Er.expirationTime,Tt(zt,Er);else break;Er=Mt(Xt)}}function ar(yr){if(er=!1,nr(yr),!Kt)if(Mt(zt)!==null)Kt=!0,Ar(or);else{var Er=Mt(Xt);Er!==null&&xr(ar,Er.startTime-yr)}}function or(yr,Er){Kt=!1,er&&(er=!1,rr(hr),hr=-1),Zt=!0;var Cr=Qt;try{for(nr(Er),Wt=Mt(zt);Wt!==null&&(!(Wt.expirationTime>Er)||yr&&!mr());){var Dr=Wt.callback;if(typeof Dr=="function"){Wt.callback=null,Qt=Wt.priorityLevel;var jr=Dr(Wt.expirationTime<=Er);Er=_t.unstable_now(),typeof jr=="function"?Wt.callback=jr:Wt===Mt(zt)&&Pt(zt),nr(Er)}else Pt(zt);Wt=Mt(zt)}if(Wt!==null)var Hr=!0;else{var zr=Mt(Xt);zr!==null&&xr(ar,zr.startTime-Er),Hr=!1}return Hr}finally{Wt=null,Qt=Cr,Zt=!1}}var ur=!1,dr=null,hr=-1,gr=5,pr=-1;function mr(){return!(_t.unstable_now()-pr<gr)}function wr(){if(dr!==null){var yr=_t.unstable_now();pr=yr;var Er=!0;try{Er=dr(!0,yr)}finally{Er?br():(ur=!1,dr=null)}}else ur=!1}var br;if(typeof ir=="function")br=function(){ir(wr)};else if(typeof MessageChannel<"u"){var _r=new MessageChannel,Mr=_r.port2;_r.port1.onmessage=wr,br=function(){Mr.postMessage(null)}}else br=function(){Yt(wr,0)};function Ar(yr){dr=yr,ur||(ur=!0,br())}function xr(yr,Er){hr=Yt(function(){yr(_t.unstable_now())},Er)}_t.unstable_IdlePriority=5,_t.unstable_ImmediatePriority=1,_t.unstable_LowPriority=4,_t.unstable_NormalPriority=3,_t.unstable_Profiling=null,_t.unstable_UserBlockingPriority=2,_t.unstable_cancelCallback=function(yr){yr.callback=null},_t.unstable_continueExecution=function(){Kt||Zt||(Kt=!0,Ar(or))},_t.unstable_forceFrameRate=function(yr){0>yr||125<yr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):gr=0<yr?Math.floor(1e3/yr):5},_t.unstable_getCurrentPriorityLevel=function(){return Qt},_t.unstable_getFirstCallbackNode=function(){return Mt(zt)},_t.unstable_next=function(yr){switch(Qt){case 1:case 2:case 3:var Er=3;break;default:Er=Qt}var Cr=Qt;Qt=Er;try{return yr()}finally{Qt=Cr}},_t.unstable_pauseExecution=function(){},_t.unstable_requestPaint=function(){},_t.unstable_runWithPriority=function(yr,Er){switch(yr){case 1:case 2:case 3:case 4:case 5:break;default:yr=3}var Cr=Qt;Qt=yr;try{return Er()}finally{Qt=Cr}},_t.unstable_scheduleCallback=function(yr,Er,Cr){var Dr=_t.unstable_now();switch(typeof Cr=="object"&&Cr!==null?(Cr=Cr.delay,Cr=typeof Cr=="number"&&0<Cr?Dr+Cr:Dr):Cr=Dr,yr){case 1:var jr=-1;break;case 2:jr=250;break;case 5:jr=1073741823;break;case 4:jr=1e4;break;default:jr=5e3}return jr=Cr+jr,yr={id:Ht++,callback:Er,priorityLevel:yr,startTime:Cr,expirationTime:jr,sortIndex:-1},Cr>Dr?(yr.sortIndex=Cr,Tt(Xt,yr),Mt(zt)===null&&yr===Mt(Xt)&&(er?(rr(hr),hr=-1):er=!0,xr(ar,Cr-Dr))):(yr.sortIndex=jr,Tt(zt,yr),Kt||Zt||(Kt=!0,Ar(or))),yr},_t.unstable_shouldYield=mr,_t.unstable_wrapCallback=function(yr){var Er=Qt;return function(){var Cr=Qt;Qt=Er;try{return yr.apply(this,arguments)}finally{Qt=Cr}}}})(scheduler_production_min);(function(_t){_t.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react.exports,ca=scheduler.exports;function p$3I(_t){for(var Tt="https://reactjs.org/docs/error-decoder.html?invariant="+_t,Mt=1;Mt<arguments.length;Mt++)Tt+="&args[]="+encodeURIComponent(arguments[Mt]);return"Minified React error #"+_t+"; visit "+Tt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_t,Tt){ha(_t,Tt),ha(_t+"Capture",Tt)}function ha(_t,Tt){for(ea[_t]=Tt,_t=0;_t<Tt.length;_t++)da.add(Tt[_t])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_t){return ja.call(ma,_t)?!0:ja.call(la,_t)?!1:ka.test(_t)?ma[_t]=!0:(la[_t]=!0,!1)}function pa(_t,Tt,Mt,Pt){if(Mt!==null&&Mt.type===0)return!1;switch(typeof Tt){case"function":case"symbol":return!0;case"boolean":return Pt?!1:Mt!==null?!Mt.acceptsBooleans:(_t=_t.toLowerCase().slice(0,5),_t!=="data-"&&_t!=="aria-");default:return!1}}function qa(_t,Tt,Mt,Pt){if(Tt===null||typeof Tt>"u"||pa(_t,Tt,Mt,Pt))return!0;if(Pt)return!1;if(Mt!==null)switch(Mt.type){case 3:return!Tt;case 4:return Tt===!1;case 5:return isNaN(Tt);case 6:return isNaN(Tt)||1>Tt}return!1}function v$1a(_t,Tt,Mt,Pt,Ft,Dt,Nt){this.acceptsBooleans=Tt===2||Tt===3||Tt===4,this.attributeName=Pt,this.attributeNamespace=Ft,this.mustUseProperty=Mt,this.propertyName=_t,this.type=Tt,this.sanitizeURL=Dt,this.removeEmptyString=Nt}var z$B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_t){z$B[_t]=new v$1a(_t,0,!1,_t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_t){var Tt=_t[0];z$B[Tt]=new v$1a(Tt,1,!1,_t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_t){z$B[_t]=new v$1a(_t,2,!1,_t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_t){z$B[_t]=new v$1a(_t,2,!1,_t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_t){z$B[_t]=new v$1a(_t,3,!1,_t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_t){z$B[_t]=new v$1a(_t,3,!0,_t,null,!1,!1)});["capture","download"].forEach(function(_t){z$B[_t]=new v$1a(_t,4,!1,_t,null,!1,!1)});["cols","rows","size","span"].forEach(function(_t){z$B[_t]=new v$1a(_t,6,!1,_t,null,!1,!1)});["rowSpan","start"].forEach(function(_t){z$B[_t]=new v$1a(_t,5,!1,_t.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_t){return _t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_t){var Tt=_t.replace(ra,sa);z$B[Tt]=new v$1a(Tt,1,!1,_t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_t){var Tt=_t.replace(ra,sa);z$B[Tt]=new v$1a(Tt,1,!1,_t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_t){var Tt=_t.replace(ra,sa);z$B[Tt]=new v$1a(Tt,1,!1,_t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_t){z$B[_t]=new v$1a(_t,1,!1,_t.toLowerCase(),null,!1,!1)});z$B.xlinkHref=new v$1a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_t){z$B[_t]=new v$1a(_t,1,!1,_t.toLowerCase(),null,!0,!0)});function ta(_t,Tt,Mt,Pt){var Ft=z$B.hasOwnProperty(Tt)?z$B[Tt]:null;(Ft!==null?Ft.type!==0:Pt||!(2<Tt.length)||Tt[0]!=="o"&&Tt[0]!=="O"||Tt[1]!=="n"&&Tt[1]!=="N")&&(qa(Tt,Mt,Ft,Pt)&&(Mt=null),Pt||Ft===null?oa(Tt)&&(Mt===null?_t.removeAttribute(Tt):_t.setAttribute(Tt,""+Mt)):Ft.mustUseProperty?_t[Ft.propertyName]=Mt===null?Ft.type===3?!1:"":Mt:(Tt=Ft.attributeName,Pt=Ft.attributeNamespace,Mt===null?_t.removeAttribute(Tt):(Ft=Ft.type,Mt=Ft===3||Ft===4&&Mt===!0?"":""+Mt,Pt?_t.setAttributeNS(Pt,Tt,Mt):_t.setAttribute(Tt,Mt))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_t){return _t===null||typeof _t!="object"?null:(_t=Ja&&_t[Ja]||_t["@@iterator"],typeof _t=="function"?_t:null)}var A$H=Object.assign,La;function Ma(_t){if(La===void 0)try{throw Error()}catch(Mt){var Tt=Mt.stack.trim().match(/\n( *(at )?)/);La=Tt&&Tt[1]||""}return`
`+La+_t}var Na=!1;function Oa(_t,Tt){if(!_t||Na)return"";Na=!0;var Mt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(Tt)if(Tt=function(){throw Error()},Object.defineProperty(Tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Tt,[])}catch(Xt){var Pt=Xt}Reflect.construct(_t,[],Tt)}else{try{Tt.call()}catch(Xt){Pt=Xt}_t.call(Tt.prototype)}else{try{throw Error()}catch(Xt){Pt=Xt}_t()}}catch(Xt){if(Xt&&Pt&&typeof Xt.stack=="string"){for(var Ft=Xt.stack.split(`
`),Dt=Pt.stack.split(`
`),Nt=Ft.length-1,Vt=Dt.length-1;1<=Nt&&0<=Vt&&Ft[Nt]!==Dt[Vt];)Vt--;for(;1<=Nt&&0<=Vt;Nt--,Vt--)if(Ft[Nt]!==Dt[Vt]){if(Nt!==1||Vt!==1)do if(Nt--,Vt--,0>Vt||Ft[Nt]!==Dt[Vt]){var zt=`
`+Ft[Nt].replace(" at new "," at ");return _t.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",_t.displayName)),zt}while(1<=Nt&&0<=Vt);break}}}finally{Na=!1,Error.prepareStackTrace=Mt}return(_t=_t?_t.displayName||_t.name:"")?Ma(_t):""}function Pa(_t){switch(_t.tag){case 5:return Ma(_t.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _t=Oa(_t.type,!1),_t;case 11:return _t=Oa(_t.type.render,!1),_t;case 1:return _t=Oa(_t.type,!0),_t;default:return""}}function Qa(_t){if(_t==null)return null;if(typeof _t=="function")return _t.displayName||_t.name||null;if(typeof _t=="string")return _t;switch(_t){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _t=="object")switch(_t.$$typeof){case Ca:return(_t.displayName||"Context")+".Consumer";case Ba:return(_t._context.displayName||"Context")+".Provider";case Da:var Tt=_t.render;return _t=_t.displayName,_t||(_t=Tt.displayName||Tt.name||"",_t=_t!==""?"ForwardRef("+_t+")":"ForwardRef"),_t;case Ga:return Tt=_t.displayName||null,Tt!==null?Tt:Qa(_t.type)||"Memo";case Ha:Tt=_t._payload,_t=_t._init;try{return Qa(_t(Tt))}catch{}}return null}function Ra(_t){var Tt=_t.type;switch(_t.tag){case 24:return"Cache";case 9:return(Tt.displayName||"Context")+".Consumer";case 10:return(Tt._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _t=Tt.render,_t=_t.displayName||_t.name||"",Tt.displayName||(_t!==""?"ForwardRef("+_t+")":"ForwardRef");case 7:return"Fragment";case 5:return Tt;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(Tt);case 8:return Tt===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof Tt=="function")return Tt.displayName||Tt.name||null;if(typeof Tt=="string")return Tt}return null}function Sa(_t){switch(typeof _t){case"boolean":case"number":case"string":case"undefined":return _t;case"object":return _t;default:return""}}function Ta(_t){var Tt=_t.type;return(_t=_t.nodeName)&&_t.toLowerCase()==="input"&&(Tt==="checkbox"||Tt==="radio")}function Ua(_t){var Tt=Ta(_t)?"checked":"value",Mt=Object.getOwnPropertyDescriptor(_t.constructor.prototype,Tt),Pt=""+_t[Tt];if(!_t.hasOwnProperty(Tt)&&typeof Mt<"u"&&typeof Mt.get=="function"&&typeof Mt.set=="function"){var Ft=Mt.get,Dt=Mt.set;return Object.defineProperty(_t,Tt,{configurable:!0,get:function(){return Ft.call(this)},set:function(Nt){Pt=""+Nt,Dt.call(this,Nt)}}),Object.defineProperty(_t,Tt,{enumerable:Mt.enumerable}),{getValue:function(){return Pt},setValue:function(Nt){Pt=""+Nt},stopTracking:function(){_t._valueTracker=null,delete _t[Tt]}}}}function Va(_t){_t._valueTracker||(_t._valueTracker=Ua(_t))}function Wa(_t){if(!_t)return!1;var Tt=_t._valueTracker;if(!Tt)return!0;var Mt=Tt.getValue(),Pt="";return _t&&(Pt=Ta(_t)?_t.checked?"true":"false":_t.value),_t=Pt,_t!==Mt?(Tt.setValue(_t),!0):!1}function Xa(_t){if(_t=_t||(typeof document<"u"?document:void 0),typeof _t>"u")return null;try{return _t.activeElement||_t.body}catch{return _t.body}}function Ya(_t,Tt){var Mt=Tt.checked;return A$H({},Tt,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Mt!=null?Mt:_t._wrapperState.initialChecked})}function Za(_t,Tt){var Mt=Tt.defaultValue==null?"":Tt.defaultValue,Pt=Tt.checked!=null?Tt.checked:Tt.defaultChecked;Mt=Sa(Tt.value!=null?Tt.value:Mt),_t._wrapperState={initialChecked:Pt,initialValue:Mt,controlled:Tt.type==="checkbox"||Tt.type==="radio"?Tt.checked!=null:Tt.value!=null}}function ab(_t,Tt){Tt=Tt.checked,Tt!=null&&ta(_t,"checked",Tt,!1)}function bb(_t,Tt){ab(_t,Tt);var Mt=Sa(Tt.value),Pt=Tt.type;if(Mt!=null)Pt==="number"?(Mt===0&&_t.value===""||_t.value!=Mt)&&(_t.value=""+Mt):_t.value!==""+Mt&&(_t.value=""+Mt);else if(Pt==="submit"||Pt==="reset"){_t.removeAttribute("value");return}Tt.hasOwnProperty("value")?cb(_t,Tt.type,Mt):Tt.hasOwnProperty("defaultValue")&&cb(_t,Tt.type,Sa(Tt.defaultValue)),Tt.checked==null&&Tt.defaultChecked!=null&&(_t.defaultChecked=!!Tt.defaultChecked)}function db(_t,Tt,Mt){if(Tt.hasOwnProperty("value")||Tt.hasOwnProperty("defaultValue")){var Pt=Tt.type;if(!(Pt!=="submit"&&Pt!=="reset"||Tt.value!==void 0&&Tt.value!==null))return;Tt=""+_t._wrapperState.initialValue,Mt||Tt===_t.value||(_t.value=Tt),_t.defaultValue=Tt}Mt=_t.name,Mt!==""&&(_t.name=""),_t.defaultChecked=!!_t._wrapperState.initialChecked,Mt!==""&&(_t.name=Mt)}function cb(_t,Tt,Mt){(Tt!=="number"||Xa(_t.ownerDocument)!==_t)&&(Mt==null?_t.defaultValue=""+_t._wrapperState.initialValue:_t.defaultValue!==""+Mt&&(_t.defaultValue=""+Mt))}var eb=Array.isArray;function fb(_t,Tt,Mt,Pt){if(_t=_t.options,Tt){Tt={};for(var Ft=0;Ft<Mt.length;Ft++)Tt["$"+Mt[Ft]]=!0;for(Mt=0;Mt<_t.length;Mt++)Ft=Tt.hasOwnProperty("$"+_t[Mt].value),_t[Mt].selected!==Ft&&(_t[Mt].selected=Ft),Ft&&Pt&&(_t[Mt].defaultSelected=!0)}else{for(Mt=""+Sa(Mt),Tt=null,Ft=0;Ft<_t.length;Ft++){if(_t[Ft].value===Mt){_t[Ft].selected=!0,Pt&&(_t[Ft].defaultSelected=!0);return}Tt!==null||_t[Ft].disabled||(Tt=_t[Ft])}Tt!==null&&(Tt.selected=!0)}}function gb(_t,Tt){if(Tt.dangerouslySetInnerHTML!=null)throw Error(p$3I(91));return A$H({},Tt,{value:void 0,defaultValue:void 0,children:""+_t._wrapperState.initialValue})}function hb(_t,Tt){var Mt=Tt.value;if(Mt==null){if(Mt=Tt.children,Tt=Tt.defaultValue,Mt!=null){if(Tt!=null)throw Error(p$3I(92));if(eb(Mt)){if(1<Mt.length)throw Error(p$3I(93));Mt=Mt[0]}Tt=Mt}Tt==null&&(Tt=""),Mt=Tt}_t._wrapperState={initialValue:Sa(Mt)}}function ib(_t,Tt){var Mt=Sa(Tt.value),Pt=Sa(Tt.defaultValue);Mt!=null&&(Mt=""+Mt,Mt!==_t.value&&(_t.value=Mt),Tt.defaultValue==null&&_t.defaultValue!==Mt&&(_t.defaultValue=Mt)),Pt!=null&&(_t.defaultValue=""+Pt)}function jb(_t){var Tt=_t.textContent;Tt===_t._wrapperState.initialValue&&Tt!==""&&Tt!==null&&(_t.value=Tt)}function kb(_t){switch(_t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_t,Tt){return _t==null||_t==="http://www.w3.org/1999/xhtml"?kb(Tt):_t==="http://www.w3.org/2000/svg"&&Tt==="foreignObject"?"http://www.w3.org/1999/xhtml":_t}var mb,nb=function(_t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(Tt,Mt,Pt,Ft){MSApp.execUnsafeLocalFunction(function(){return _t(Tt,Mt,Pt,Ft)})}:_t}(function(_t,Tt){if(_t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _t)_t.innerHTML=Tt;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+Tt.valueOf().toString()+"</svg>",Tt=mb.firstChild;_t.firstChild;)_t.removeChild(_t.firstChild);for(;Tt.firstChild;)_t.appendChild(Tt.firstChild)}});function ob(_t,Tt){if(Tt){var Mt=_t.firstChild;if(Mt&&Mt===_t.lastChild&&Mt.nodeType===3){Mt.nodeValue=Tt;return}}_t.textContent=Tt}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_t){qb.forEach(function(Tt){Tt=Tt+_t.charAt(0).toUpperCase()+_t.substring(1),pb[Tt]=pb[_t]})});function rb(_t,Tt,Mt){return Tt==null||typeof Tt=="boolean"||Tt===""?"":Mt||typeof Tt!="number"||Tt===0||pb.hasOwnProperty(_t)&&pb[_t]?(""+Tt).trim():Tt+"px"}function sb(_t,Tt){_t=_t.style;for(var Mt in Tt)if(Tt.hasOwnProperty(Mt)){var Pt=Mt.indexOf("--")===0,Ft=rb(Mt,Tt[Mt],Pt);Mt==="float"&&(Mt="cssFloat"),Pt?_t.setProperty(Mt,Ft):_t[Mt]=Ft}}var tb=A$H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_t,Tt){if(Tt){if(tb[_t]&&(Tt.children!=null||Tt.dangerouslySetInnerHTML!=null))throw Error(p$3I(137,_t));if(Tt.dangerouslySetInnerHTML!=null){if(Tt.children!=null)throw Error(p$3I(60));if(typeof Tt.dangerouslySetInnerHTML!="object"||!("__html"in Tt.dangerouslySetInnerHTML))throw Error(p$3I(61))}if(Tt.style!=null&&typeof Tt.style!="object")throw Error(p$3I(62))}}function vb(_t,Tt){if(_t.indexOf("-")===-1)return typeof Tt.is=="string";switch(_t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_t){return _t=_t.target||_t.srcElement||window,_t.correspondingUseElement&&(_t=_t.correspondingUseElement),_t.nodeType===3?_t.parentNode:_t}var yb=null,zb=null,Ab=null;function Bb(_t){if(_t=Cb(_t)){if(typeof yb!="function")throw Error(p$3I(280));var Tt=_t.stateNode;Tt&&(Tt=Db(Tt),yb(_t.stateNode,_t.type,Tt))}}function Eb(_t){zb?Ab?Ab.push(_t):Ab=[_t]:zb=_t}function Fb(){if(zb){var _t=zb,Tt=Ab;if(Ab=zb=null,Bb(_t),Tt)for(_t=0;_t<Tt.length;_t++)Bb(Tt[_t])}}function Gb(_t,Tt){return _t(Tt)}function Hb(){}var Ib=!1;function Jb(_t,Tt,Mt){if(Ib)return _t(Tt,Mt);Ib=!0;try{return Gb(_t,Tt,Mt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_t,Tt){var Mt=_t.stateNode;if(Mt===null)return null;var Pt=Db(Mt);if(Pt===null)return null;Mt=Pt[Tt];e:switch(Tt){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Pt=!Pt.disabled)||(_t=_t.type,Pt=!(_t==="button"||_t==="input"||_t==="select"||_t==="textarea")),_t=!Pt;break e;default:_t=!1}if(_t)return null;if(Mt&&typeof Mt!="function")throw Error(p$3I(231,Tt,typeof Mt));return Mt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt){var Xt=Array.prototype.slice.call(arguments,3);try{Tt.apply(Mt,Xt)}catch(Ht){this.onError(Ht)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_t){Ob=!0,Pb=_t}};function Tb(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt){if(Tb.apply(this,arguments),Ob){if(Ob){var Xt=Pb;Ob=!1,Pb=null}else throw Error(p$3I(198));Qb||(Qb=!0,Rb=Xt)}}function Vb(_t){var Tt=_t,Mt=_t;if(_t.alternate)for(;Tt.return;)Tt=Tt.return;else{_t=Tt;do Tt=_t,(Tt.flags&4098)!==0&&(Mt=Tt.return),_t=Tt.return;while(_t)}return Tt.tag===3?Mt:null}function Wb(_t){if(_t.tag===13){var Tt=_t.memoizedState;if(Tt===null&&(_t=_t.alternate,_t!==null&&(Tt=_t.memoizedState)),Tt!==null)return Tt.dehydrated}return null}function Xb(_t){if(Vb(_t)!==_t)throw Error(p$3I(188))}function Yb(_t){var Tt=_t.alternate;if(!Tt){if(Tt=Vb(_t),Tt===null)throw Error(p$3I(188));return Tt!==_t?null:_t}for(var Mt=_t,Pt=Tt;;){var Ft=Mt.return;if(Ft===null)break;var Dt=Ft.alternate;if(Dt===null){if(Pt=Ft.return,Pt!==null){Mt=Pt;continue}break}if(Ft.child===Dt.child){for(Dt=Ft.child;Dt;){if(Dt===Mt)return Xb(Ft),_t;if(Dt===Pt)return Xb(Ft),Tt;Dt=Dt.sibling}throw Error(p$3I(188))}if(Mt.return!==Pt.return)Mt=Ft,Pt=Dt;else{for(var Nt=!1,Vt=Ft.child;Vt;){if(Vt===Mt){Nt=!0,Mt=Ft,Pt=Dt;break}if(Vt===Pt){Nt=!0,Pt=Ft,Mt=Dt;break}Vt=Vt.sibling}if(!Nt){for(Vt=Dt.child;Vt;){if(Vt===Mt){Nt=!0,Mt=Dt,Pt=Ft;break}if(Vt===Pt){Nt=!0,Pt=Dt,Mt=Ft;break}Vt=Vt.sibling}if(!Nt)throw Error(p$3I(189))}}if(Mt.alternate!==Pt)throw Error(p$3I(190))}if(Mt.tag!==3)throw Error(p$3I(188));return Mt.stateNode.current===Mt?_t:Tt}function Zb(_t){return _t=Yb(_t),_t!==null?$b(_t):null}function $b(_t){if(_t.tag===5||_t.tag===6)return _t;for(_t=_t.child;_t!==null;){var Tt=$b(_t);if(Tt!==null)return Tt;_t=_t.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$u=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_t){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_t,void 0,(_t.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_t){return _t>>>=0,_t===0?32:31-(pc(_t)/qc|0)|0}var rc=64,sc=4194304;function tc(_t){switch(_t&-_t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _t}}function uc(_t,Tt){var Mt=_t.pendingLanes;if(Mt===0)return 0;var Pt=0,Ft=_t.suspendedLanes,Dt=_t.pingedLanes,Nt=Mt&268435455;if(Nt!==0){var Vt=Nt&~Ft;Vt!==0?Pt=tc(Vt):(Dt&=Nt,Dt!==0&&(Pt=tc(Dt)))}else Nt=Mt&~Ft,Nt!==0?Pt=tc(Nt):Dt!==0&&(Pt=tc(Dt));if(Pt===0)return 0;if(Tt!==0&&Tt!==Pt&&(Tt&Ft)===0&&(Ft=Pt&-Pt,Dt=Tt&-Tt,Ft>=Dt||Ft===16&&(Dt&4194240)!==0))return Tt;if((Pt&4)!==0&&(Pt|=Mt&16),Tt=_t.entangledLanes,Tt!==0)for(_t=_t.entanglements,Tt&=Pt;0<Tt;)Mt=31-oc(Tt),Ft=1<<Mt,Pt|=_t[Mt],Tt&=~Ft;return Pt}function vc(_t,Tt){switch(_t){case 1:case 2:case 4:return Tt+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Tt+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_t,Tt){for(var Mt=_t.suspendedLanes,Pt=_t.pingedLanes,Ft=_t.expirationTimes,Dt=_t.pendingLanes;0<Dt;){var Nt=31-oc(Dt),Vt=1<<Nt,zt=Ft[Nt];zt===-1?((Vt&Mt)===0||(Vt&Pt)!==0)&&(Ft[Nt]=vc(Vt,Tt)):zt<=Tt&&(_t.expiredLanes|=Vt),Dt&=~Vt}}function xc(_t){return _t=_t.pendingLanes&-1073741825,_t!==0?_t:_t&1073741824?1073741824:0}function yc(){var _t=rc;return rc<<=1,(rc&4194240)===0&&(rc=64),_t}function zc(_t){for(var Tt=[],Mt=0;31>Mt;Mt++)Tt.push(_t);return Tt}function Ac(_t,Tt,Mt){_t.pendingLanes|=Tt,Tt!==536870912&&(_t.suspendedLanes=0,_t.pingedLanes=0),_t=_t.eventTimes,Tt=31-oc(Tt),_t[Tt]=Mt}function Bc(_t,Tt){var Mt=_t.pendingLanes&~Tt;_t.pendingLanes=Tt,_t.suspendedLanes=0,_t.pingedLanes=0,_t.expiredLanes&=Tt,_t.mutableReadLanes&=Tt,_t.entangledLanes&=Tt,Tt=_t.entanglements;var Pt=_t.eventTimes;for(_t=_t.expirationTimes;0<Mt;){var Ft=31-oc(Mt),Dt=1<<Ft;Tt[Ft]=0,Pt[Ft]=-1,_t[Ft]=-1,Mt&=~Dt}}function Cc(_t,Tt){var Mt=_t.entangledLanes|=Tt;for(_t=_t.entanglements;Mt;){var Pt=31-oc(Mt),Ft=1<<Pt;Ft&Tt|_t[Pt]&Tt&&(_t[Pt]|=Tt),Mt&=~Ft}}var C$x=0;function Dc(_t){return _t&=-_t,1<_t?4<_t?(_t&268435455)!==0?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_t,Tt){switch(_t){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(Tt.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(Tt.pointerId)}}function Tc(_t,Tt,Mt,Pt,Ft,Dt){return _t===null||_t.nativeEvent!==Dt?(_t={blockedOn:Tt,domEventName:Mt,eventSystemFlags:Pt,nativeEvent:Dt,targetContainers:[Ft]},Tt!==null&&(Tt=Cb(Tt),Tt!==null&&Fc(Tt)),_t):(_t.eventSystemFlags|=Pt,Tt=_t.targetContainers,Ft!==null&&Tt.indexOf(Ft)===-1&&Tt.push(Ft),_t)}function Uc(_t,Tt,Mt,Pt,Ft){switch(Tt){case"focusin":return Lc=Tc(Lc,_t,Tt,Mt,Pt,Ft),!0;case"dragenter":return Mc=Tc(Mc,_t,Tt,Mt,Pt,Ft),!0;case"mouseover":return Nc=Tc(Nc,_t,Tt,Mt,Pt,Ft),!0;case"pointerover":var Dt=Ft.pointerId;return Oc.set(Dt,Tc(Oc.get(Dt)||null,_t,Tt,Mt,Pt,Ft)),!0;case"gotpointercapture":return Dt=Ft.pointerId,Pc.set(Dt,Tc(Pc.get(Dt)||null,_t,Tt,Mt,Pt,Ft)),!0}return!1}function Vc(_t){var Tt=Wc(_t.target);if(Tt!==null){var Mt=Vb(Tt);if(Mt!==null){if(Tt=Mt.tag,Tt===13){if(Tt=Wb(Mt),Tt!==null){_t.blockedOn=Tt,Ic(_t.priority,function(){Gc(Mt)});return}}else if(Tt===3&&Mt.stateNode.current.memoizedState.isDehydrated){_t.blockedOn=Mt.tag===3?Mt.stateNode.containerInfo:null;return}}}_t.blockedOn=null}function Xc(_t){if(_t.blockedOn!==null)return!1;for(var Tt=_t.targetContainers;0<Tt.length;){var Mt=Yc(_t.domEventName,_t.eventSystemFlags,Tt[0],_t.nativeEvent);if(Mt===null){Mt=_t.nativeEvent;var Pt=new Mt.constructor(Mt.type,Mt);wb=Pt,Mt.target.dispatchEvent(Pt),wb=null}else return Tt=Cb(Mt),Tt!==null&&Fc(Tt),_t.blockedOn=Mt,!1;Tt.shift()}return!0}function Zc(_t,Tt,Mt){Xc(_t)&&Mt.delete(Tt)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_t,Tt){_t.blockedOn===Tt&&(_t.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_t){function Tt(Ft){return ad(Ft,_t)}if(0<Kc.length){ad(Kc[0],_t);for(var Mt=1;Mt<Kc.length;Mt++){var Pt=Kc[Mt];Pt.blockedOn===_t&&(Pt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_t),Mc!==null&&ad(Mc,_t),Nc!==null&&ad(Nc,_t),Oc.forEach(Tt),Pc.forEach(Tt),Mt=0;Mt<Qc.length;Mt++)Pt=Qc[Mt],Pt.blockedOn===_t&&(Pt.blockedOn=null);for(;0<Qc.length&&(Mt=Qc[0],Mt.blockedOn===null);)Vc(Mt),Mt.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_t,Tt,Mt,Pt){var Ft=C$x,Dt=cd.transition;cd.transition=null;try{C$x=1,fd(_t,Tt,Mt,Pt)}finally{C$x=Ft,cd.transition=Dt}}function gd(_t,Tt,Mt,Pt){var Ft=C$x,Dt=cd.transition;cd.transition=null;try{C$x=4,fd(_t,Tt,Mt,Pt)}finally{C$x=Ft,cd.transition=Dt}}function fd(_t,Tt,Mt,Pt){if(dd){var Ft=Yc(_t,Tt,Mt,Pt);if(Ft===null)hd(_t,Tt,Pt,id,Mt),Sc(_t,Pt);else if(Uc(Ft,_t,Tt,Mt,Pt))Pt.stopPropagation();else if(Sc(_t,Pt),Tt&4&&-1<Rc.indexOf(_t)){for(;Ft!==null;){var Dt=Cb(Ft);if(Dt!==null&&Ec(Dt),Dt=Yc(_t,Tt,Mt,Pt),Dt===null&&hd(_t,Tt,Pt,id,Mt),Dt===Ft)break;Ft=Dt}Ft!==null&&Pt.stopPropagation()}else hd(_t,Tt,Pt,null,Mt)}}var id=null;function Yc(_t,Tt,Mt,Pt){if(id=null,_t=xb(Pt),_t=Wc(_t),_t!==null)if(Tt=Vb(_t),Tt===null)_t=null;else if(Mt=Tt.tag,Mt===13){if(_t=Wb(Tt),_t!==null)return _t;_t=null}else if(Mt===3){if(Tt.stateNode.current.memoizedState.isDehydrated)return Tt.tag===3?Tt.stateNode.containerInfo:null;_t=null}else Tt!==_t&&(_t=null);return id=_t,null}function jd(_t){switch(_t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _t,Tt=ld,Mt=Tt.length,Pt,Ft="value"in kd?kd.value:kd.textContent,Dt=Ft.length;for(_t=0;_t<Mt&&Tt[_t]===Ft[_t];_t++);var Nt=Mt-_t;for(Pt=1;Pt<=Nt&&Tt[Mt-Pt]===Ft[Dt-Pt];Pt++);return md=Ft.slice(_t,1<Pt?1-Pt:void 0)}function od(_t){var Tt=_t.keyCode;return"charCode"in _t?(_t=_t.charCode,_t===0&&Tt===13&&(_t=13)):_t=Tt,_t===10&&(_t=13),32<=_t||_t===13?_t:0}function pd(){return!0}function qd(){return!1}function rd(_t){function Tt(Mt,Pt,Ft,Dt,Nt){this._reactName=Mt,this._targetInst=Ft,this.type=Pt,this.nativeEvent=Dt,this.target=Nt,this.currentTarget=null;for(var Vt in _t)_t.hasOwnProperty(Vt)&&(Mt=_t[Vt],this[Vt]=Mt?Mt(Dt):Dt[Vt]);return this.isDefaultPrevented=(Dt.defaultPrevented!=null?Dt.defaultPrevented:Dt.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$H(Tt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Mt=this.nativeEvent;Mt&&(Mt.preventDefault?Mt.preventDefault():typeof Mt.returnValue!="unknown"&&(Mt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var Mt=this.nativeEvent;Mt&&(Mt.stopPropagation?Mt.stopPropagation():typeof Mt.cancelBubble!="unknown"&&(Mt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),Tt}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_t){return _t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$H({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$H({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_t){return _t.relatedTarget===void 0?_t.fromElement===_t.srcElement?_t.toElement:_t.fromElement:_t.relatedTarget},movementX:function(_t){return"movementX"in _t?_t.movementX:(_t!==yd&&(yd&&_t.type==="mousemove"?(wd=_t.screenX-yd.screenX,xd=_t.screenY-yd.screenY):xd=wd=0,yd=_t),wd)},movementY:function(_t){return"movementY"in _t?_t.movementY:xd}}),Bd=rd(Ad),Cd=A$H({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$H({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$H({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$H({},sd,{clipboardData:function(_t){return"clipboardData"in _t?_t.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$H({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_t){var Tt=this.nativeEvent;return Tt.getModifierState?Tt.getModifierState(_t):(_t=Od[_t])?!!Tt[_t]:!1}function zd(){return Pd}var Qd=A$H({},ud,{key:function(_t){if(_t.key){var Tt=Md[_t.key]||_t.key;if(Tt!=="Unidentified")return Tt}return _t.type==="keypress"?(_t=od(_t),_t===13?"Enter":String.fromCharCode(_t)):_t.type==="keydown"||_t.type==="keyup"?Nd[_t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_t){return _t.type==="keypress"?od(_t):0},keyCode:function(_t){return _t.type==="keydown"||_t.type==="keyup"?_t.keyCode:0},which:function(_t){return _t.type==="keypress"?od(_t):_t.type==="keydown"||_t.type==="keyup"?_t.keyCode:0}}),Rd=rd(Qd),Sd=A$H({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$H({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$H({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$H({},Ad,{deltaX:function(_t){return"deltaX"in _t?_t.deltaX:"wheelDeltaX"in _t?-_t.wheelDeltaX:0},deltaY:function(_t){return"deltaY"in _t?_t.deltaY:"wheelDeltaY"in _t?-_t.wheelDeltaY:"wheelDelta"in _t?-_t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$7=ia&&"CompositionEvent"in window,be$3=null;ia&&"documentMode"in document&&(be$3=document.documentMode);var ce$7=ia&&"TextEvent"in window&&!be$3,de$5=ia&&(!ae$7||be$3&&8<be$3&&11>=be$3),ee$8=String.fromCharCode(32),fe$7=!1;function ge$4(_t,Tt){switch(_t){case"keyup":return $d.indexOf(Tt.keyCode)!==-1;case"keydown":return Tt.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$4(_t){return _t=_t.detail,typeof _t=="object"&&"data"in _t?_t.data:null}var ie$7=!1;function je$3(_t,Tt){switch(_t){case"compositionend":return he$4(Tt);case"keypress":return Tt.which!==32?null:(fe$7=!0,ee$8);case"textInput":return _t=Tt.data,_t===ee$8&&fe$7?null:_t;default:return null}}function ke$3(_t,Tt){if(ie$7)return _t==="compositionend"||!ae$7&&ge$4(_t,Tt)?(_t=nd(),md=ld=kd=null,ie$7=!1,_t):null;switch(_t){case"paste":return null;case"keypress":if(!(Tt.ctrlKey||Tt.altKey||Tt.metaKey)||Tt.ctrlKey&&Tt.altKey){if(Tt.char&&1<Tt.char.length)return Tt.char;if(Tt.which)return String.fromCharCode(Tt.which)}return null;case"compositionend":return de$5&&Tt.locale!=="ko"?null:Tt.data;default:return null}}var le$5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$7(_t){var Tt=_t&&_t.nodeName&&_t.nodeName.toLowerCase();return Tt==="input"?!!le$5[_t.type]:Tt==="textarea"}function ne$7(_t,Tt,Mt,Pt){Eb(Pt),Tt=oe$7(Tt,"onChange"),0<Tt.length&&(Mt=new td("onChange","change",null,Mt,Pt),_t.push({event:Mt,listeners:Tt}))}var pe$4=null,qe$1=null;function re$8(_t){se$7(_t,0)}function te$8(_t){var Tt=ue$7(_t);if(Wa(Tt))return _t}function ve$2(_t,Tt){if(_t==="change")return Tt}var we$3=!1;if(ia){var xe$2;if(ia){var ye$4="oninput"in document;if(!ye$4){var ze$1=document.createElement("div");ze$1.setAttribute("oninput","return;"),ye$4=typeof ze$1.oninput=="function"}xe$2=ye$4}else xe$2=!1;we$3=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$2(){pe$4&&(pe$4.detachEvent("onpropertychange",Be$2),qe$1=pe$4=null)}function Be$2(_t){if(_t.propertyName==="value"&&te$8(qe$1)){var Tt=[];ne$7(Tt,qe$1,_t,xb(_t)),Jb(re$8,Tt)}}function Ce$1(_t,Tt,Mt){_t==="focusin"?(Ae$2(),pe$4=Tt,qe$1=Mt,pe$4.attachEvent("onpropertychange",Be$2)):_t==="focusout"&&Ae$2()}function De$1(_t){if(_t==="selectionchange"||_t==="keyup"||_t==="keydown")return te$8(qe$1)}function Ee$1(_t,Tt){if(_t==="click")return te$8(Tt)}function Fe$2(_t,Tt){if(_t==="input"||_t==="change")return te$8(Tt)}function Ge$2(_t,Tt){return _t===Tt&&(_t!==0||1/_t===1/Tt)||_t!==_t&&Tt!==Tt}var He$2=typeof Object.is=="function"?Object.is:Ge$2;function Ie$2(_t,Tt){if(He$2(_t,Tt))return!0;if(typeof _t!="object"||_t===null||typeof Tt!="object"||Tt===null)return!1;var Mt=Object.keys(_t),Pt=Object.keys(Tt);if(Mt.length!==Pt.length)return!1;for(Pt=0;Pt<Mt.length;Pt++){var Ft=Mt[Pt];if(!ja.call(Tt,Ft)||!He$2(_t[Ft],Tt[Ft]))return!1}return!0}function Je$1(_t){for(;_t&&_t.firstChild;)_t=_t.firstChild;return _t}function Ke$2(_t,Tt){var Mt=Je$1(_t);_t=0;for(var Pt;Mt;){if(Mt.nodeType===3){if(Pt=_t+Mt.textContent.length,_t<=Tt&&Pt>=Tt)return{node:Mt,offset:Tt-_t};_t=Pt}e:{for(;Mt;){if(Mt.nextSibling){Mt=Mt.nextSibling;break e}Mt=Mt.parentNode}Mt=void 0}Mt=Je$1(Mt)}}function Le$1(_t,Tt){return _t&&Tt?_t===Tt?!0:_t&&_t.nodeType===3?!1:Tt&&Tt.nodeType===3?Le$1(_t,Tt.parentNode):"contains"in _t?_t.contains(Tt):_t.compareDocumentPosition?!!(_t.compareDocumentPosition(Tt)&16):!1:!1}function Me$2(){for(var _t=window,Tt=Xa();Tt instanceof _t.HTMLIFrameElement;){try{var Mt=typeof Tt.contentWindow.location.href=="string"}catch{Mt=!1}if(Mt)_t=Tt.contentWindow;else break;Tt=Xa(_t.document)}return Tt}function Ne$3(_t){var Tt=_t&&_t.nodeName&&_t.nodeName.toLowerCase();return Tt&&(Tt==="input"&&(_t.type==="text"||_t.type==="search"||_t.type==="tel"||_t.type==="url"||_t.type==="password")||Tt==="textarea"||_t.contentEditable==="true")}function Oe$1(_t){var Tt=Me$2(),Mt=_t.focusedElem,Pt=_t.selectionRange;if(Tt!==Mt&&Mt&&Mt.ownerDocument&&Le$1(Mt.ownerDocument.documentElement,Mt)){if(Pt!==null&&Ne$3(Mt)){if(Tt=Pt.start,_t=Pt.end,_t===void 0&&(_t=Tt),"selectionStart"in Mt)Mt.selectionStart=Tt,Mt.selectionEnd=Math.min(_t,Mt.value.length);else if(_t=(Tt=Mt.ownerDocument||document)&&Tt.defaultView||window,_t.getSelection){_t=_t.getSelection();var Ft=Mt.textContent.length,Dt=Math.min(Pt.start,Ft);Pt=Pt.end===void 0?Dt:Math.min(Pt.end,Ft),!_t.extend&&Dt>Pt&&(Ft=Pt,Pt=Dt,Dt=Ft),Ft=Ke$2(Mt,Dt);var Nt=Ke$2(Mt,Pt);Ft&&Nt&&(_t.rangeCount!==1||_t.anchorNode!==Ft.node||_t.anchorOffset!==Ft.offset||_t.focusNode!==Nt.node||_t.focusOffset!==Nt.offset)&&(Tt=Tt.createRange(),Tt.setStart(Ft.node,Ft.offset),_t.removeAllRanges(),Dt>Pt?(_t.addRange(Tt),_t.extend(Nt.node,Nt.offset)):(Tt.setEnd(Nt.node,Nt.offset),_t.addRange(Tt)))}}for(Tt=[],_t=Mt;_t=_t.parentNode;)_t.nodeType===1&&Tt.push({element:_t,left:_t.scrollLeft,top:_t.scrollTop});for(typeof Mt.focus=="function"&&Mt.focus(),Mt=0;Mt<Tt.length;Mt++)_t=Tt[Mt],_t.element.scrollLeft=_t.left,_t.element.scrollTop=_t.top}}var Pe$1=ia&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$1=null,Se$3=null,Te$3=!1;function Ue$2(_t,Tt,Mt){var Pt=Mt.window===Mt?Mt.document:Mt.nodeType===9?Mt:Mt.ownerDocument;Te$3||Qe$1==null||Qe$1!==Xa(Pt)||(Pt=Qe$1,"selectionStart"in Pt&&Ne$3(Pt)?Pt={start:Pt.selectionStart,end:Pt.selectionEnd}:(Pt=(Pt.ownerDocument&&Pt.ownerDocument.defaultView||window).getSelection(),Pt={anchorNode:Pt.anchorNode,anchorOffset:Pt.anchorOffset,focusNode:Pt.focusNode,focusOffset:Pt.focusOffset}),Se$3&&Ie$2(Se$3,Pt)||(Se$3=Pt,Pt=oe$7(Re$1,"onSelect"),0<Pt.length&&(Tt=new td("onSelect","select",null,Tt,Mt),_t.push({event:Tt,listeners:Pt}),Tt.target=Qe$1)))}function Ve$2(_t,Tt){var Mt={};return Mt[_t.toLowerCase()]=Tt.toLowerCase(),Mt["Webkit"+_t]="webkit"+Tt,Mt["Moz"+_t]="moz"+Tt,Mt}var We$2={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We$2.animationend.animation,delete We$2.animationiteration.animation,delete We$2.animationstart.animation),"TransitionEvent"in window||delete We$2.transitionend.transition);function Ze$1(_t){if(Xe[_t])return Xe[_t];if(!We$2[_t])return _t;var Tt=We$2[_t],Mt;for(Mt in Tt)if(Tt.hasOwnProperty(Mt)&&Mt in Ye)return Xe[_t]=Tt[Mt];return _t}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_t,Tt){df.set(_t,Tt),fa(Tt,[_t])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_t,Tt,Mt){var Pt=_t.type||"unknown-event";_t.currentTarget=Mt,Ub(Pt,Tt,void 0,_t),_t.currentTarget=null}function se$7(_t,Tt){Tt=(Tt&4)!==0;for(var Mt=0;Mt<_t.length;Mt++){var Pt=_t[Mt],Ft=Pt.event;Pt=Pt.listeners;e:{var Dt=void 0;if(Tt)for(var Nt=Pt.length-1;0<=Nt;Nt--){var Vt=Pt[Nt],zt=Vt.instance,Xt=Vt.currentTarget;if(Vt=Vt.listener,zt!==Dt&&Ft.isPropagationStopped())break e;nf(Ft,Vt,Xt),Dt=zt}else for(Nt=0;Nt<Pt.length;Nt++){if(Vt=Pt[Nt],zt=Vt.instance,Xt=Vt.currentTarget,Vt=Vt.listener,zt!==Dt&&Ft.isPropagationStopped())break e;nf(Ft,Vt,Xt),Dt=zt}}}if(Qb)throw _t=Rb,Qb=!1,Rb=null,_t}function D$E(_t,Tt){var Mt=Tt[of];Mt===void 0&&(Mt=Tt[of]=new Set);var Pt=_t+"__bubble";Mt.has(Pt)||(pf(Tt,_t,2,!1),Mt.add(Pt))}function qf(_t,Tt,Mt){var Pt=0;Tt&&(Pt|=4),pf(Mt,_t,Pt,Tt)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_t){if(!_t[rf]){_t[rf]=!0,da.forEach(function(Mt){Mt!=="selectionchange"&&(mf.has(Mt)||qf(Mt,!1,_t),qf(Mt,!0,_t))});var Tt=_t.nodeType===9?_t:_t.ownerDocument;Tt===null||Tt[rf]||(Tt[rf]=!0,qf("selectionchange",!1,Tt))}}function pf(_t,Tt,Mt,Pt){switch(jd(Tt)){case 1:var Ft=ed;break;case 4:Ft=gd;break;default:Ft=fd}Mt=Ft.bind(null,Tt,Mt,_t),Ft=void 0,!Lb||Tt!=="touchstart"&&Tt!=="touchmove"&&Tt!=="wheel"||(Ft=!0),Pt?Ft!==void 0?_t.addEventListener(Tt,Mt,{capture:!0,passive:Ft}):_t.addEventListener(Tt,Mt,!0):Ft!==void 0?_t.addEventListener(Tt,Mt,{passive:Ft}):_t.addEventListener(Tt,Mt,!1)}function hd(_t,Tt,Mt,Pt,Ft){var Dt=Pt;if((Tt&1)===0&&(Tt&2)===0&&Pt!==null)e:for(;;){if(Pt===null)return;var Nt=Pt.tag;if(Nt===3||Nt===4){var Vt=Pt.stateNode.containerInfo;if(Vt===Ft||Vt.nodeType===8&&Vt.parentNode===Ft)break;if(Nt===4)for(Nt=Pt.return;Nt!==null;){var zt=Nt.tag;if((zt===3||zt===4)&&(zt=Nt.stateNode.containerInfo,zt===Ft||zt.nodeType===8&&zt.parentNode===Ft))return;Nt=Nt.return}for(;Vt!==null;){if(Nt=Wc(Vt),Nt===null)return;if(zt=Nt.tag,zt===5||zt===6){Pt=Dt=Nt;continue e}Vt=Vt.parentNode}}Pt=Pt.return}Jb(function(){var Xt=Dt,Ht=xb(Mt),Wt=[];e:{var Qt=df.get(_t);if(Qt!==void 0){var Zt=td,Kt=_t;switch(_t){case"keypress":if(od(Mt)===0)break e;case"keydown":case"keyup":Zt=Rd;break;case"focusin":Kt="focus",Zt=Fd;break;case"focusout":Kt="blur",Zt=Fd;break;case"beforeblur":case"afterblur":Zt=Fd;break;case"click":if(Mt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Zt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Zt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Zt=Vd;break;case $e$1:case af:case bf:Zt=Hd;break;case cf:Zt=Xd;break;case"scroll":Zt=vd;break;case"wheel":Zt=Zd;break;case"copy":case"cut":case"paste":Zt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Zt=Td}var er=(Tt&4)!==0,Yt=!er&&_t==="scroll",rr=er?Qt!==null?Qt+"Capture":null:Qt;er=[];for(var ir=Xt,nr;ir!==null;){nr=ir;var ar=nr.stateNode;if(nr.tag===5&&ar!==null&&(nr=ar,rr!==null&&(ar=Kb(ir,rr),ar!=null&&er.push(tf(ir,ar,nr)))),Yt)break;ir=ir.return}0<er.length&&(Qt=new Zt(Qt,Kt,null,Mt,Ht),Wt.push({event:Qt,listeners:er}))}}if((Tt&7)===0){e:{if(Qt=_t==="mouseover"||_t==="pointerover",Zt=_t==="mouseout"||_t==="pointerout",Qt&&Mt!==wb&&(Kt=Mt.relatedTarget||Mt.fromElement)&&(Wc(Kt)||Kt[uf]))break e;if((Zt||Qt)&&(Qt=Ht.window===Ht?Ht:(Qt=Ht.ownerDocument)?Qt.defaultView||Qt.parentWindow:window,Zt?(Kt=Mt.relatedTarget||Mt.toElement,Zt=Xt,Kt=Kt?Wc(Kt):null,Kt!==null&&(Yt=Vb(Kt),Kt!==Yt||Kt.tag!==5&&Kt.tag!==6)&&(Kt=null)):(Zt=null,Kt=Xt),Zt!==Kt)){if(er=Bd,ar="onMouseLeave",rr="onMouseEnter",ir="mouse",(_t==="pointerout"||_t==="pointerover")&&(er=Td,ar="onPointerLeave",rr="onPointerEnter",ir="pointer"),Yt=Zt==null?Qt:ue$7(Zt),nr=Kt==null?Qt:ue$7(Kt),Qt=new er(ar,ir+"leave",Zt,Mt,Ht),Qt.target=Yt,Qt.relatedTarget=nr,ar=null,Wc(Ht)===Xt&&(er=new er(rr,ir+"enter",Kt,Mt,Ht),er.target=nr,er.relatedTarget=Yt,ar=er),Yt=ar,Zt&&Kt)t:{for(er=Zt,rr=Kt,ir=0,nr=er;nr;nr=vf(nr))ir++;for(nr=0,ar=rr;ar;ar=vf(ar))nr++;for(;0<ir-nr;)er=vf(er),ir--;for(;0<nr-ir;)rr=vf(rr),nr--;for(;ir--;){if(er===rr||rr!==null&&er===rr.alternate)break t;er=vf(er),rr=vf(rr)}er=null}else er=null;Zt!==null&&wf(Wt,Qt,Zt,er,!1),Kt!==null&&Yt!==null&&wf(Wt,Yt,Kt,er,!0)}}e:{if(Qt=Xt?ue$7(Xt):window,Zt=Qt.nodeName&&Qt.nodeName.toLowerCase(),Zt==="select"||Zt==="input"&&Qt.type==="file")var or=ve$2;else if(me$7(Qt))if(we$3)or=Fe$2;else{or=De$1;var ur=Ce$1}else(Zt=Qt.nodeName)&&Zt.toLowerCase()==="input"&&(Qt.type==="checkbox"||Qt.type==="radio")&&(or=Ee$1);if(or&&(or=or(_t,Xt))){ne$7(Wt,or,Mt,Ht);break e}ur&&ur(_t,Qt,Xt),_t==="focusout"&&(ur=Qt._wrapperState)&&ur.controlled&&Qt.type==="number"&&cb(Qt,"number",Qt.value)}switch(ur=Xt?ue$7(Xt):window,_t){case"focusin":(me$7(ur)||ur.contentEditable==="true")&&(Qe$1=ur,Re$1=Xt,Se$3=null);break;case"focusout":Se$3=Re$1=Qe$1=null;break;case"mousedown":Te$3=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$3=!1,Ue$2(Wt,Mt,Ht);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$2(Wt,Mt,Ht)}var dr;if(ae$7)e:{switch(_t){case"compositionstart":var hr="onCompositionStart";break e;case"compositionend":hr="onCompositionEnd";break e;case"compositionupdate":hr="onCompositionUpdate";break e}hr=void 0}else ie$7?ge$4(_t,Mt)&&(hr="onCompositionEnd"):_t==="keydown"&&Mt.keyCode===229&&(hr="onCompositionStart");hr&&(de$5&&Mt.locale!=="ko"&&(ie$7||hr!=="onCompositionStart"?hr==="onCompositionEnd"&&ie$7&&(dr=nd()):(kd=Ht,ld="value"in kd?kd.value:kd.textContent,ie$7=!0)),ur=oe$7(Xt,hr),0<ur.length&&(hr=new Ld(hr,_t,null,Mt,Ht),Wt.push({event:hr,listeners:ur}),dr?hr.data=dr:(dr=he$4(Mt),dr!==null&&(hr.data=dr)))),(dr=ce$7?je$3(_t,Mt):ke$3(_t,Mt))&&(Xt=oe$7(Xt,"onBeforeInput"),0<Xt.length&&(Ht=new Ld("onBeforeInput","beforeinput",null,Mt,Ht),Wt.push({event:Ht,listeners:Xt}),Ht.data=dr))}se$7(Wt,Tt)})}function tf(_t,Tt,Mt){return{instance:_t,listener:Tt,currentTarget:Mt}}function oe$7(_t,Tt){for(var Mt=Tt+"Capture",Pt=[];_t!==null;){var Ft=_t,Dt=Ft.stateNode;Ft.tag===5&&Dt!==null&&(Ft=Dt,Dt=Kb(_t,Mt),Dt!=null&&Pt.unshift(tf(_t,Dt,Ft)),Dt=Kb(_t,Tt),Dt!=null&&Pt.push(tf(_t,Dt,Ft))),_t=_t.return}return Pt}function vf(_t){if(_t===null)return null;do _t=_t.return;while(_t&&_t.tag!==5);return _t||null}function wf(_t,Tt,Mt,Pt,Ft){for(var Dt=Tt._reactName,Nt=[];Mt!==null&&Mt!==Pt;){var Vt=Mt,zt=Vt.alternate,Xt=Vt.stateNode;if(zt!==null&&zt===Pt)break;Vt.tag===5&&Xt!==null&&(Vt=Xt,Ft?(zt=Kb(Mt,Dt),zt!=null&&Nt.unshift(tf(Mt,zt,Vt))):Ft||(zt=Kb(Mt,Dt),zt!=null&&Nt.push(tf(Mt,zt,Vt)))),Mt=Mt.return}Nt.length!==0&&_t.push({event:Tt,listeners:Nt})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_t){return(typeof _t=="string"?_t:""+_t).replace(xf,`
`).replace(yf,"")}function Af(_t,Tt,Mt){if(Tt=zf(Tt),zf(_t)!==Tt&&Mt)throw Error(p$3I(425))}function Bf(){}var Cf=null,Df=null;function Ef(_t,Tt){return _t==="textarea"||_t==="noscript"||typeof Tt.children=="string"||typeof Tt.children=="number"||typeof Tt.dangerouslySetInnerHTML=="object"&&Tt.dangerouslySetInnerHTML!==null&&Tt.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_t){return Hf.resolve(null).then(_t).catch(If)}:Ff;function If(_t){setTimeout(function(){throw _t})}function Kf(_t,Tt){var Mt=Tt,Pt=0;do{var Ft=Mt.nextSibling;if(_t.removeChild(Mt),Ft&&Ft.nodeType===8)if(Mt=Ft.data,Mt==="/$"){if(Pt===0){_t.removeChild(Ft),bd(Tt);return}Pt--}else Mt!=="$"&&Mt!=="$?"&&Mt!=="$!"||Pt++;Mt=Ft}while(Mt);bd(Tt)}function Lf(_t){for(;_t!=null;_t=_t.nextSibling){var Tt=_t.nodeType;if(Tt===1||Tt===3)break;if(Tt===8){if(Tt=_t.data,Tt==="$"||Tt==="$!"||Tt==="$?")break;if(Tt==="/$")return null}}return _t}function Mf(_t){_t=_t.previousSibling;for(var Tt=0;_t;){if(_t.nodeType===8){var Mt=_t.data;if(Mt==="$"||Mt==="$!"||Mt==="$?"){if(Tt===0)return _t;Tt--}else Mt==="/$"&&Tt++}_t=_t.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_t){var Tt=_t[Of];if(Tt)return Tt;for(var Mt=_t.parentNode;Mt;){if(Tt=Mt[uf]||Mt[Of]){if(Mt=Tt.alternate,Tt.child!==null||Mt!==null&&Mt.child!==null)for(_t=Mf(_t);_t!==null;){if(Mt=_t[Of])return Mt;_t=Mf(_t)}return Tt}_t=Mt,Mt=_t.parentNode}return null}function Cb(_t){return _t=_t[Of]||_t[uf],!_t||_t.tag!==5&&_t.tag!==6&&_t.tag!==13&&_t.tag!==3?null:_t}function ue$7(_t){if(_t.tag===5||_t.tag===6)return _t.stateNode;throw Error(p$3I(33))}function Db(_t){return _t[Pf]||null}var Sf=[],Tf=-1;function Uf(_t){return{current:_t}}function E$N(_t){0>Tf||(_t.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$r(_t,Tt){Tf++,Sf[Tf]=_t.current,_t.current=Tt}var Vf={},H$k=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_t,Tt){var Mt=_t.type.contextTypes;if(!Mt)return Vf;var Pt=_t.stateNode;if(Pt&&Pt.__reactInternalMemoizedUnmaskedChildContext===Tt)return Pt.__reactInternalMemoizedMaskedChildContext;var Ft={},Dt;for(Dt in Mt)Ft[Dt]=Tt[Dt];return Pt&&(_t=_t.stateNode,_t.__reactInternalMemoizedUnmaskedChildContext=Tt,_t.__reactInternalMemoizedMaskedChildContext=Ft),Ft}function Zf(_t){return _t=_t.childContextTypes,_t!=null}function $f(){E$N(Wf),E$N(H$k)}function ag(_t,Tt,Mt){if(H$k.current!==Vf)throw Error(p$3I(168));G$r(H$k,Tt),G$r(Wf,Mt)}function bg(_t,Tt,Mt){var Pt=_t.stateNode;if(Tt=Tt.childContextTypes,typeof Pt.getChildContext!="function")return Mt;Pt=Pt.getChildContext();for(var Ft in Pt)if(!(Ft in Tt))throw Error(p$3I(108,Ra(_t)||"Unknown",Ft));return A$H({},Mt,Pt)}function cg(_t){return _t=(_t=_t.stateNode)&&_t.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$k.current,G$r(H$k,_t),G$r(Wf,Wf.current),!0}function dg(_t,Tt,Mt){var Pt=_t.stateNode;if(!Pt)throw Error(p$3I(169));Mt?(_t=bg(_t,Tt,Xf),Pt.__reactInternalMemoizedMergedChildContext=_t,E$N(Wf),E$N(H$k),G$r(H$k,_t)):E$N(Wf),G$r(Wf,Mt)}var eg=null,fg=!1,gg=!1;function hg(_t){eg===null?eg=[_t]:eg.push(_t)}function ig(_t){fg=!0,hg(_t)}function jg(){if(!gg&&eg!==null){gg=!0;var _t=0,Tt=C$x;try{var Mt=eg;for(C$x=1;_t<Mt.length;_t++){var Pt=Mt[_t];do Pt=Pt(!0);while(Pt!==null)}eg=null,fg=!1}catch(Ft){throw eg!==null&&(eg=eg.slice(_t+1)),ac(fc,jg),Ft}finally{C$x=Tt,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_t,Tt){kg[lg++]=ng,kg[lg++]=mg,mg=_t,ng=Tt}function ug(_t,Tt,Mt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_t;var Pt=rg;_t=sg;var Ft=32-oc(Pt)-1;Pt&=~(1<<Ft),Mt+=1;var Dt=32-oc(Tt)+Ft;if(30<Dt){var Nt=Ft-Ft%5;Dt=(Pt&(1<<Nt)-1).toString(32),Pt>>=Nt,Ft-=Nt,rg=1<<32-oc(Tt)+Ft|Mt<<Ft|Pt,sg=Dt+_t}else rg=1<<Dt|Mt<<Ft|Pt,sg=_t}function vg(_t){_t.return!==null&&(tg(_t,1),ug(_t,1,0))}function wg(_t){for(;_t===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_t===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$G=!1,zg=null;function Ag(_t,Tt){var Mt=Bg(5,null,null,0);Mt.elementType="DELETED",Mt.stateNode=Tt,Mt.return=_t,Tt=_t.deletions,Tt===null?(_t.deletions=[Mt],_t.flags|=16):Tt.push(Mt)}function Cg(_t,Tt){switch(_t.tag){case 5:var Mt=_t.type;return Tt=Tt.nodeType!==1||Mt.toLowerCase()!==Tt.nodeName.toLowerCase()?null:Tt,Tt!==null?(_t.stateNode=Tt,xg=_t,yg=Lf(Tt.firstChild),!0):!1;case 6:return Tt=_t.pendingProps===""||Tt.nodeType!==3?null:Tt,Tt!==null?(_t.stateNode=Tt,xg=_t,yg=null,!0):!1;case 13:return Tt=Tt.nodeType!==8?null:Tt,Tt!==null?(Mt=qg!==null?{id:rg,overflow:sg}:null,_t.memoizedState={dehydrated:Tt,treeContext:Mt,retryLane:1073741824},Mt=Bg(18,null,null,0),Mt.stateNode=Tt,Mt.return=_t,_t.child=Mt,xg=_t,yg=null,!0):!1;default:return!1}}function Dg(_t){return(_t.mode&1)!==0&&(_t.flags&128)===0}function Eg(_t){if(I$G){var Tt=yg;if(Tt){var Mt=Tt;if(!Cg(_t,Tt)){if(Dg(_t))throw Error(p$3I(418));Tt=Lf(Mt.nextSibling);var Pt=xg;Tt&&Cg(_t,Tt)?Ag(Pt,Mt):(_t.flags=_t.flags&-4097|2,I$G=!1,xg=_t)}}else{if(Dg(_t))throw Error(p$3I(418));_t.flags=_t.flags&-4097|2,I$G=!1,xg=_t}}}function Fg(_t){for(_t=_t.return;_t!==null&&_t.tag!==5&&_t.tag!==3&&_t.tag!==13;)_t=_t.return;xg=_t}function Gg(_t){if(_t!==xg)return!1;if(!I$G)return Fg(_t),I$G=!0,!1;var Tt;if((Tt=_t.tag!==3)&&!(Tt=_t.tag!==5)&&(Tt=_t.type,Tt=Tt!=="head"&&Tt!=="body"&&!Ef(_t.type,_t.memoizedProps)),Tt&&(Tt=yg)){if(Dg(_t))throw Hg(),Error(p$3I(418));for(;Tt;)Ag(_t,Tt),Tt=Lf(Tt.nextSibling)}if(Fg(_t),_t.tag===13){if(_t=_t.memoizedState,_t=_t!==null?_t.dehydrated:null,!_t)throw Error(p$3I(317));e:{for(_t=_t.nextSibling,Tt=0;_t;){if(_t.nodeType===8){var Mt=_t.data;if(Mt==="/$"){if(Tt===0){yg=Lf(_t.nextSibling);break e}Tt--}else Mt!=="$"&&Mt!=="$!"&&Mt!=="$?"||Tt++}_t=_t.nextSibling}yg=null}}else yg=xg?Lf(_t.stateNode.nextSibling):null;return!0}function Hg(){for(var _t=yg;_t;)_t=Lf(_t.nextSibling)}function Ig(){yg=xg=null,I$G=!1}function Jg(_t){zg===null?zg=[_t]:zg.push(_t)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_t,Tt){if(_t&&_t.defaultProps){Tt=A$H({},Tt),_t=_t.defaultProps;for(var Mt in _t)Tt[Mt]===void 0&&(Tt[Mt]=_t[Mt]);return Tt}return Tt}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(_t){var Tt=Mg.current;E$N(Mg),_t._currentValue=Tt}function Sg(_t,Tt,Mt){for(;_t!==null;){var Pt=_t.alternate;if((_t.childLanes&Tt)!==Tt?(_t.childLanes|=Tt,Pt!==null&&(Pt.childLanes|=Tt)):Pt!==null&&(Pt.childLanes&Tt)!==Tt&&(Pt.childLanes|=Tt),_t===Mt)break;_t=_t.return}}function Tg(_t,Tt){Ng=_t,Pg=Og=null,_t=_t.dependencies,_t!==null&&_t.firstContext!==null&&((_t.lanes&Tt)!==0&&(Ug=!0),_t.firstContext=null)}function Vg(_t){var Tt=_t._currentValue;if(Pg!==_t)if(_t={context:_t,memoizedValue:Tt,next:null},Og===null){if(Ng===null)throw Error(p$3I(308));Og=_t,Ng.dependencies={lanes:0,firstContext:_t}}else Og=Og.next=_t;return Tt}var Wg=null;function Xg(_t){Wg===null?Wg=[_t]:Wg.push(_t)}function Yg(_t,Tt,Mt,Pt){var Ft=Tt.interleaved;return Ft===null?(Mt.next=Mt,Xg(Tt)):(Mt.next=Ft.next,Ft.next=Mt),Tt.interleaved=Mt,Zg(_t,Pt)}function Zg(_t,Tt){_t.lanes|=Tt;var Mt=_t.alternate;for(Mt!==null&&(Mt.lanes|=Tt),Mt=_t,_t=_t.return;_t!==null;)_t.childLanes|=Tt,Mt=_t.alternate,Mt!==null&&(Mt.childLanes|=Tt),Mt=_t,_t=_t.return;return Mt.tag===3?Mt.stateNode:null}var $g=!1;function ah(_t){_t.updateQueue={baseState:_t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(_t,Tt){_t=_t.updateQueue,Tt.updateQueue===_t&&(Tt.updateQueue={baseState:_t.baseState,firstBaseUpdate:_t.firstBaseUpdate,lastBaseUpdate:_t.lastBaseUpdate,shared:_t.shared,effects:_t.effects})}function ch(_t,Tt){return{eventTime:_t,lane:Tt,tag:0,payload:null,callback:null,next:null}}function dh(_t,Tt,Mt){var Pt=_t.updateQueue;if(Pt===null)return null;if(Pt=Pt.shared,(K$g&2)!==0){var Ft=Pt.pending;return Ft===null?Tt.next=Tt:(Tt.next=Ft.next,Ft.next=Tt),Pt.pending=Tt,Zg(_t,Mt)}return Ft=Pt.interleaved,Ft===null?(Tt.next=Tt,Xg(Pt)):(Tt.next=Ft.next,Ft.next=Tt),Pt.interleaved=Tt,Zg(_t,Mt)}function eh(_t,Tt,Mt){if(Tt=Tt.updateQueue,Tt!==null&&(Tt=Tt.shared,(Mt&4194240)!==0)){var Pt=Tt.lanes;Pt&=_t.pendingLanes,Mt|=Pt,Tt.lanes=Mt,Cc(_t,Mt)}}function fh(_t,Tt){var Mt=_t.updateQueue,Pt=_t.alternate;if(Pt!==null&&(Pt=Pt.updateQueue,Mt===Pt)){var Ft=null,Dt=null;if(Mt=Mt.firstBaseUpdate,Mt!==null){do{var Nt={eventTime:Mt.eventTime,lane:Mt.lane,tag:Mt.tag,payload:Mt.payload,callback:Mt.callback,next:null};Dt===null?Ft=Dt=Nt:Dt=Dt.next=Nt,Mt=Mt.next}while(Mt!==null);Dt===null?Ft=Dt=Tt:Dt=Dt.next=Tt}else Ft=Dt=Tt;Mt={baseState:Pt.baseState,firstBaseUpdate:Ft,lastBaseUpdate:Dt,shared:Pt.shared,effects:Pt.effects},_t.updateQueue=Mt;return}_t=Mt.lastBaseUpdate,_t===null?Mt.firstBaseUpdate=Tt:_t.next=Tt,Mt.lastBaseUpdate=Tt}function gh(_t,Tt,Mt,Pt){var Ft=_t.updateQueue;$g=!1;var Dt=Ft.firstBaseUpdate,Nt=Ft.lastBaseUpdate,Vt=Ft.shared.pending;if(Vt!==null){Ft.shared.pending=null;var zt=Vt,Xt=zt.next;zt.next=null,Nt===null?Dt=Xt:Nt.next=Xt,Nt=zt;var Ht=_t.alternate;Ht!==null&&(Ht=Ht.updateQueue,Vt=Ht.lastBaseUpdate,Vt!==Nt&&(Vt===null?Ht.firstBaseUpdate=Xt:Vt.next=Xt,Ht.lastBaseUpdate=zt))}if(Dt!==null){var Wt=Ft.baseState;Nt=0,Ht=Xt=zt=null,Vt=Dt;do{var Qt=Vt.lane,Zt=Vt.eventTime;if((Pt&Qt)===Qt){Ht!==null&&(Ht=Ht.next={eventTime:Zt,lane:0,tag:Vt.tag,payload:Vt.payload,callback:Vt.callback,next:null});e:{var Kt=_t,er=Vt;switch(Qt=Tt,Zt=Mt,er.tag){case 1:if(Kt=er.payload,typeof Kt=="function"){Wt=Kt.call(Zt,Wt,Qt);break e}Wt=Kt;break e;case 3:Kt.flags=Kt.flags&-65537|128;case 0:if(Kt=er.payload,Qt=typeof Kt=="function"?Kt.call(Zt,Wt,Qt):Kt,Qt==null)break e;Wt=A$H({},Wt,Qt);break e;case 2:$g=!0}}Vt.callback!==null&&Vt.lane!==0&&(_t.flags|=64,Qt=Ft.effects,Qt===null?Ft.effects=[Vt]:Qt.push(Vt))}else Zt={eventTime:Zt,lane:Qt,tag:Vt.tag,payload:Vt.payload,callback:Vt.callback,next:null},Ht===null?(Xt=Ht=Zt,zt=Wt):Ht=Ht.next=Zt,Nt|=Qt;if(Vt=Vt.next,Vt===null){if(Vt=Ft.shared.pending,Vt===null)break;Qt=Vt,Vt=Qt.next,Qt.next=null,Ft.lastBaseUpdate=Qt,Ft.shared.pending=null}}while(1);if(Ht===null&&(zt=Wt),Ft.baseState=zt,Ft.firstBaseUpdate=Xt,Ft.lastBaseUpdate=Ht,Tt=Ft.shared.interleaved,Tt!==null){Ft=Tt;do Nt|=Ft.lane,Ft=Ft.next;while(Ft!==Tt)}else Dt===null&&(Ft.shared.lanes=0);hh|=Nt,_t.lanes=Nt,_t.memoizedState=Wt}}function ih(_t,Tt,Mt){if(_t=Tt.effects,Tt.effects=null,_t!==null)for(Tt=0;Tt<_t.length;Tt++){var Pt=_t[Tt],Ft=Pt.callback;if(Ft!==null){if(Pt.callback=null,Pt=Mt,typeof Ft!="function")throw Error(p$3I(191,Ft));Ft.call(Pt)}}}var jh=new aa.Component().refs;function kh(_t,Tt,Mt,Pt){Tt=_t.memoizedState,Mt=Mt(Pt,Tt),Mt=Mt==null?Tt:A$H({},Tt,Mt),_t.memoizedState=Mt,_t.lanes===0&&(_t.updateQueue.baseState=Mt)}var nh={isMounted:function(_t){return(_t=_t._reactInternals)?Vb(_t)===_t:!1},enqueueSetState:function(_t,Tt,Mt){_t=_t._reactInternals;var Pt=L$z(),Ft=lh(_t),Dt=ch(Pt,Ft);Dt.payload=Tt,Mt!=null&&(Dt.callback=Mt),Tt=dh(_t,Dt,Ft),Tt!==null&&(mh(Tt,_t,Ft,Pt),eh(Tt,_t,Ft))},enqueueReplaceState:function(_t,Tt,Mt){_t=_t._reactInternals;var Pt=L$z(),Ft=lh(_t),Dt=ch(Pt,Ft);Dt.tag=1,Dt.payload=Tt,Mt!=null&&(Dt.callback=Mt),Tt=dh(_t,Dt,Ft),Tt!==null&&(mh(Tt,_t,Ft,Pt),eh(Tt,_t,Ft))},enqueueForceUpdate:function(_t,Tt){_t=_t._reactInternals;var Mt=L$z(),Pt=lh(_t),Ft=ch(Mt,Pt);Ft.tag=2,Tt!=null&&(Ft.callback=Tt),Tt=dh(_t,Ft,Pt),Tt!==null&&(mh(Tt,_t,Pt,Mt),eh(Tt,_t,Pt))}};function oh(_t,Tt,Mt,Pt,Ft,Dt,Nt){return _t=_t.stateNode,typeof _t.shouldComponentUpdate=="function"?_t.shouldComponentUpdate(Pt,Dt,Nt):Tt.prototype&&Tt.prototype.isPureReactComponent?!Ie$2(Mt,Pt)||!Ie$2(Ft,Dt):!0}function ph(_t,Tt,Mt){var Pt=!1,Ft=Vf,Dt=Tt.contextType;return typeof Dt=="object"&&Dt!==null?Dt=Vg(Dt):(Ft=Zf(Tt)?Xf:H$k.current,Pt=Tt.contextTypes,Dt=(Pt=Pt!=null)?Yf(_t,Ft):Vf),Tt=new Tt(Mt,Dt),_t.memoizedState=Tt.state!==null&&Tt.state!==void 0?Tt.state:null,Tt.updater=nh,_t.stateNode=Tt,Tt._reactInternals=_t,Pt&&(_t=_t.stateNode,_t.__reactInternalMemoizedUnmaskedChildContext=Ft,_t.__reactInternalMemoizedMaskedChildContext=Dt),Tt}function qh(_t,Tt,Mt,Pt){_t=Tt.state,typeof Tt.componentWillReceiveProps=="function"&&Tt.componentWillReceiveProps(Mt,Pt),typeof Tt.UNSAFE_componentWillReceiveProps=="function"&&Tt.UNSAFE_componentWillReceiveProps(Mt,Pt),Tt.state!==_t&&nh.enqueueReplaceState(Tt,Tt.state,null)}function rh(_t,Tt,Mt,Pt){var Ft=_t.stateNode;Ft.props=Mt,Ft.state=_t.memoizedState,Ft.refs=jh,ah(_t);var Dt=Tt.contextType;typeof Dt=="object"&&Dt!==null?Ft.context=Vg(Dt):(Dt=Zf(Tt)?Xf:H$k.current,Ft.context=Yf(_t,Dt)),Ft.state=_t.memoizedState,Dt=Tt.getDerivedStateFromProps,typeof Dt=="function"&&(kh(_t,Tt,Dt,Mt),Ft.state=_t.memoizedState),typeof Tt.getDerivedStateFromProps=="function"||typeof Ft.getSnapshotBeforeUpdate=="function"||typeof Ft.UNSAFE_componentWillMount!="function"&&typeof Ft.componentWillMount!="function"||(Tt=Ft.state,typeof Ft.componentWillMount=="function"&&Ft.componentWillMount(),typeof Ft.UNSAFE_componentWillMount=="function"&&Ft.UNSAFE_componentWillMount(),Tt!==Ft.state&&nh.enqueueReplaceState(Ft,Ft.state,null),gh(_t,Mt,Ft,Pt),Ft.state=_t.memoizedState),typeof Ft.componentDidMount=="function"&&(_t.flags|=4194308)}function sh(_t,Tt,Mt){if(_t=Mt.ref,_t!==null&&typeof _t!="function"&&typeof _t!="object"){if(Mt._owner){if(Mt=Mt._owner,Mt){if(Mt.tag!==1)throw Error(p$3I(309));var Pt=Mt.stateNode}if(!Pt)throw Error(p$3I(147,_t));var Ft=Pt,Dt=""+_t;return Tt!==null&&Tt.ref!==null&&typeof Tt.ref=="function"&&Tt.ref._stringRef===Dt?Tt.ref:(Tt=function(Nt){var Vt=Ft.refs;Vt===jh&&(Vt=Ft.refs={}),Nt===null?delete Vt[Dt]:Vt[Dt]=Nt},Tt._stringRef=Dt,Tt)}if(typeof _t!="string")throw Error(p$3I(284));if(!Mt._owner)throw Error(p$3I(290,_t))}return _t}function th(_t,Tt){throw _t=Object.prototype.toString.call(Tt),Error(p$3I(31,_t==="[object Object]"?"object with keys {"+Object.keys(Tt).join(", ")+"}":_t))}function uh(_t){var Tt=_t._init;return Tt(_t._payload)}function vh(_t){function Tt(rr,ir){if(_t){var nr=rr.deletions;nr===null?(rr.deletions=[ir],rr.flags|=16):nr.push(ir)}}function Mt(rr,ir){if(!_t)return null;for(;ir!==null;)Tt(rr,ir),ir=ir.sibling;return null}function Pt(rr,ir){for(rr=new Map;ir!==null;)ir.key!==null?rr.set(ir.key,ir):rr.set(ir.index,ir),ir=ir.sibling;return rr}function Ft(rr,ir){return rr=wh(rr,ir),rr.index=0,rr.sibling=null,rr}function Dt(rr,ir,nr){return rr.index=nr,_t?(nr=rr.alternate,nr!==null?(nr=nr.index,nr<ir?(rr.flags|=2,ir):nr):(rr.flags|=2,ir)):(rr.flags|=1048576,ir)}function Nt(rr){return _t&&rr.alternate===null&&(rr.flags|=2),rr}function Vt(rr,ir,nr,ar){return ir===null||ir.tag!==6?(ir=xh(nr,rr.mode,ar),ir.return=rr,ir):(ir=Ft(ir,nr),ir.return=rr,ir)}function zt(rr,ir,nr,ar){var or=nr.type;return or===ya?Ht(rr,ir,nr.props.children,ar,nr.key):ir!==null&&(ir.elementType===or||typeof or=="object"&&or!==null&&or.$$typeof===Ha&&uh(or)===ir.type)?(ar=Ft(ir,nr.props),ar.ref=sh(rr,ir,nr),ar.return=rr,ar):(ar=yh(nr.type,nr.key,nr.props,null,rr.mode,ar),ar.ref=sh(rr,ir,nr),ar.return=rr,ar)}function Xt(rr,ir,nr,ar){return ir===null||ir.tag!==4||ir.stateNode.containerInfo!==nr.containerInfo||ir.stateNode.implementation!==nr.implementation?(ir=zh(nr,rr.mode,ar),ir.return=rr,ir):(ir=Ft(ir,nr.children||[]),ir.return=rr,ir)}function Ht(rr,ir,nr,ar,or){return ir===null||ir.tag!==7?(ir=Ah(nr,rr.mode,ar,or),ir.return=rr,ir):(ir=Ft(ir,nr),ir.return=rr,ir)}function Wt(rr,ir,nr){if(typeof ir=="string"&&ir!==""||typeof ir=="number")return ir=xh(""+ir,rr.mode,nr),ir.return=rr,ir;if(typeof ir=="object"&&ir!==null){switch(ir.$$typeof){case va:return nr=yh(ir.type,ir.key,ir.props,null,rr.mode,nr),nr.ref=sh(rr,null,ir),nr.return=rr,nr;case wa:return ir=zh(ir,rr.mode,nr),ir.return=rr,ir;case Ha:var ar=ir._init;return Wt(rr,ar(ir._payload),nr)}if(eb(ir)||Ka(ir))return ir=Ah(ir,rr.mode,nr,null),ir.return=rr,ir;th(rr,ir)}return null}function Qt(rr,ir,nr,ar){var or=ir!==null?ir.key:null;if(typeof nr=="string"&&nr!==""||typeof nr=="number")return or!==null?null:Vt(rr,ir,""+nr,ar);if(typeof nr=="object"&&nr!==null){switch(nr.$$typeof){case va:return nr.key===or?zt(rr,ir,nr,ar):null;case wa:return nr.key===or?Xt(rr,ir,nr,ar):null;case Ha:return or=nr._init,Qt(rr,ir,or(nr._payload),ar)}if(eb(nr)||Ka(nr))return or!==null?null:Ht(rr,ir,nr,ar,null);th(rr,nr)}return null}function Zt(rr,ir,nr,ar,or){if(typeof ar=="string"&&ar!==""||typeof ar=="number")return rr=rr.get(nr)||null,Vt(ir,rr,""+ar,or);if(typeof ar=="object"&&ar!==null){switch(ar.$$typeof){case va:return rr=rr.get(ar.key===null?nr:ar.key)||null,zt(ir,rr,ar,or);case wa:return rr=rr.get(ar.key===null?nr:ar.key)||null,Xt(ir,rr,ar,or);case Ha:var ur=ar._init;return Zt(rr,ir,nr,ur(ar._payload),or)}if(eb(ar)||Ka(ar))return rr=rr.get(nr)||null,Ht(ir,rr,ar,or,null);th(ir,ar)}return null}function Kt(rr,ir,nr,ar){for(var or=null,ur=null,dr=ir,hr=ir=0,gr=null;dr!==null&&hr<nr.length;hr++){dr.index>hr?(gr=dr,dr=null):gr=dr.sibling;var pr=Qt(rr,dr,nr[hr],ar);if(pr===null){dr===null&&(dr=gr);break}_t&&dr&&pr.alternate===null&&Tt(rr,dr),ir=Dt(pr,ir,hr),ur===null?or=pr:ur.sibling=pr,ur=pr,dr=gr}if(hr===nr.length)return Mt(rr,dr),I$G&&tg(rr,hr),or;if(dr===null){for(;hr<nr.length;hr++)dr=Wt(rr,nr[hr],ar),dr!==null&&(ir=Dt(dr,ir,hr),ur===null?or=dr:ur.sibling=dr,ur=dr);return I$G&&tg(rr,hr),or}for(dr=Pt(rr,dr);hr<nr.length;hr++)gr=Zt(dr,rr,hr,nr[hr],ar),gr!==null&&(_t&&gr.alternate!==null&&dr.delete(gr.key===null?hr:gr.key),ir=Dt(gr,ir,hr),ur===null?or=gr:ur.sibling=gr,ur=gr);return _t&&dr.forEach(function(mr){return Tt(rr,mr)}),I$G&&tg(rr,hr),or}function er(rr,ir,nr,ar){var or=Ka(nr);if(typeof or!="function")throw Error(p$3I(150));if(nr=or.call(nr),nr==null)throw Error(p$3I(151));for(var ur=or=null,dr=ir,hr=ir=0,gr=null,pr=nr.next();dr!==null&&!pr.done;hr++,pr=nr.next()){dr.index>hr?(gr=dr,dr=null):gr=dr.sibling;var mr=Qt(rr,dr,pr.value,ar);if(mr===null){dr===null&&(dr=gr);break}_t&&dr&&mr.alternate===null&&Tt(rr,dr),ir=Dt(mr,ir,hr),ur===null?or=mr:ur.sibling=mr,ur=mr,dr=gr}if(pr.done)return Mt(rr,dr),I$G&&tg(rr,hr),or;if(dr===null){for(;!pr.done;hr++,pr=nr.next())pr=Wt(rr,pr.value,ar),pr!==null&&(ir=Dt(pr,ir,hr),ur===null?or=pr:ur.sibling=pr,ur=pr);return I$G&&tg(rr,hr),or}for(dr=Pt(rr,dr);!pr.done;hr++,pr=nr.next())pr=Zt(dr,rr,hr,pr.value,ar),pr!==null&&(_t&&pr.alternate!==null&&dr.delete(pr.key===null?hr:pr.key),ir=Dt(pr,ir,hr),ur===null?or=pr:ur.sibling=pr,ur=pr);return _t&&dr.forEach(function(wr){return Tt(rr,wr)}),I$G&&tg(rr,hr),or}function Yt(rr,ir,nr,ar){if(typeof nr=="object"&&nr!==null&&nr.type===ya&&nr.key===null&&(nr=nr.props.children),typeof nr=="object"&&nr!==null){switch(nr.$$typeof){case va:e:{for(var or=nr.key,ur=ir;ur!==null;){if(ur.key===or){if(or=nr.type,or===ya){if(ur.tag===7){Mt(rr,ur.sibling),ir=Ft(ur,nr.props.children),ir.return=rr,rr=ir;break e}}else if(ur.elementType===or||typeof or=="object"&&or!==null&&or.$$typeof===Ha&&uh(or)===ur.type){Mt(rr,ur.sibling),ir=Ft(ur,nr.props),ir.ref=sh(rr,ur,nr),ir.return=rr,rr=ir;break e}Mt(rr,ur);break}else Tt(rr,ur);ur=ur.sibling}nr.type===ya?(ir=Ah(nr.props.children,rr.mode,ar,nr.key),ir.return=rr,rr=ir):(ar=yh(nr.type,nr.key,nr.props,null,rr.mode,ar),ar.ref=sh(rr,ir,nr),ar.return=rr,rr=ar)}return Nt(rr);case wa:e:{for(ur=nr.key;ir!==null;){if(ir.key===ur)if(ir.tag===4&&ir.stateNode.containerInfo===nr.containerInfo&&ir.stateNode.implementation===nr.implementation){Mt(rr,ir.sibling),ir=Ft(ir,nr.children||[]),ir.return=rr,rr=ir;break e}else{Mt(rr,ir);break}else Tt(rr,ir);ir=ir.sibling}ir=zh(nr,rr.mode,ar),ir.return=rr,rr=ir}return Nt(rr);case Ha:return ur=nr._init,Yt(rr,ir,ur(nr._payload),ar)}if(eb(nr))return Kt(rr,ir,nr,ar);if(Ka(nr))return er(rr,ir,nr,ar);th(rr,nr)}return typeof nr=="string"&&nr!==""||typeof nr=="number"?(nr=""+nr,ir!==null&&ir.tag===6?(Mt(rr,ir.sibling),ir=Ft(ir,nr),ir.return=rr,rr=ir):(Mt(rr,ir),ir=xh(nr,rr.mode,ar),ir.return=rr,rr=ir),Nt(rr)):Mt(rr,ir)}return Yt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(_t){if(_t===Dh)throw Error(p$3I(174));return _t}function Ih(_t,Tt){switch(G$r(Gh,Tt),G$r(Fh,_t),G$r(Eh,Dh),_t=Tt.nodeType,_t){case 9:case 11:Tt=(Tt=Tt.documentElement)?Tt.namespaceURI:lb(null,"");break;default:_t=_t===8?Tt.parentNode:Tt,Tt=_t.namespaceURI||null,_t=_t.tagName,Tt=lb(Tt,_t)}E$N(Eh),G$r(Eh,Tt)}function Jh(){E$N(Eh),E$N(Fh),E$N(Gh)}function Kh(_t){Hh(Gh.current);var Tt=Hh(Eh.current),Mt=lb(Tt,_t.type);Tt!==Mt&&(G$r(Fh,_t),G$r(Eh,Mt))}function Lh(_t){Fh.current===_t&&(E$N(Eh),E$N(Fh))}var M$R=Uf(0);function Mh(_t){for(var Tt=_t;Tt!==null;){if(Tt.tag===13){var Mt=Tt.memoizedState;if(Mt!==null&&(Mt=Mt.dehydrated,Mt===null||Mt.data==="$?"||Mt.data==="$!"))return Tt}else if(Tt.tag===19&&Tt.memoizedProps.revealOrder!==void 0){if((Tt.flags&128)!==0)return Tt}else if(Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===_t)break;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===_t)return null;Tt=Tt.return}Tt.sibling.return=Tt.return,Tt=Tt.sibling}return null}var Nh=[];function Oh(){for(var _t=0;_t<Nh.length;_t++)Nh[_t]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N$x=null,O$B=null,P$x=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$f(){throw Error(p$3I(321))}function Wh(_t,Tt){if(Tt===null)return!1;for(var Mt=0;Mt<Tt.length&&Mt<_t.length;Mt++)if(!He$2(_t[Mt],Tt[Mt]))return!1;return!0}function Xh(_t,Tt,Mt,Pt,Ft,Dt){if(Rh=Dt,N$x=Tt,Tt.memoizedState=null,Tt.updateQueue=null,Tt.lanes=0,Ph.current=_t===null||_t.memoizedState===null?Yh:Zh,_t=Mt(Pt,Ft),Th){Dt=0;do{if(Th=!1,Uh=0,25<=Dt)throw Error(p$3I(301));Dt+=1,P$x=O$B=null,Tt.updateQueue=null,Ph.current=$h,_t=Mt(Pt,Ft)}while(Th)}if(Ph.current=ai,Tt=O$B!==null&&O$B.next!==null,Rh=0,P$x=O$B=N$x=null,Sh=!1,Tt)throw Error(p$3I(300));return _t}function bi(){var _t=Uh!==0;return Uh=0,_t}function ci(){var _t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$x===null?N$x.memoizedState=P$x=_t:P$x=P$x.next=_t,P$x}function di(){if(O$B===null){var _t=N$x.alternate;_t=_t!==null?_t.memoizedState:null}else _t=O$B.next;var Tt=P$x===null?N$x.memoizedState:P$x.next;if(Tt!==null)P$x=Tt,O$B=_t;else{if(_t===null)throw Error(p$3I(310));O$B=_t,_t={memoizedState:O$B.memoizedState,baseState:O$B.baseState,baseQueue:O$B.baseQueue,queue:O$B.queue,next:null},P$x===null?N$x.memoizedState=P$x=_t:P$x=P$x.next=_t}return P$x}function ei(_t,Tt){return typeof Tt=="function"?Tt(_t):Tt}function fi(_t){var Tt=di(),Mt=Tt.queue;if(Mt===null)throw Error(p$3I(311));Mt.lastRenderedReducer=_t;var Pt=O$B,Ft=Pt.baseQueue,Dt=Mt.pending;if(Dt!==null){if(Ft!==null){var Nt=Ft.next;Ft.next=Dt.next,Dt.next=Nt}Pt.baseQueue=Ft=Dt,Mt.pending=null}if(Ft!==null){Dt=Ft.next,Pt=Pt.baseState;var Vt=Nt=null,zt=null,Xt=Dt;do{var Ht=Xt.lane;if((Rh&Ht)===Ht)zt!==null&&(zt=zt.next={lane:0,action:Xt.action,hasEagerState:Xt.hasEagerState,eagerState:Xt.eagerState,next:null}),Pt=Xt.hasEagerState?Xt.eagerState:_t(Pt,Xt.action);else{var Wt={lane:Ht,action:Xt.action,hasEagerState:Xt.hasEagerState,eagerState:Xt.eagerState,next:null};zt===null?(Vt=zt=Wt,Nt=Pt):zt=zt.next=Wt,N$x.lanes|=Ht,hh|=Ht}Xt=Xt.next}while(Xt!==null&&Xt!==Dt);zt===null?Nt=Pt:zt.next=Vt,He$2(Pt,Tt.memoizedState)||(Ug=!0),Tt.memoizedState=Pt,Tt.baseState=Nt,Tt.baseQueue=zt,Mt.lastRenderedState=Pt}if(_t=Mt.interleaved,_t!==null){Ft=_t;do Dt=Ft.lane,N$x.lanes|=Dt,hh|=Dt,Ft=Ft.next;while(Ft!==_t)}else Ft===null&&(Mt.lanes=0);return[Tt.memoizedState,Mt.dispatch]}function gi(_t){var Tt=di(),Mt=Tt.queue;if(Mt===null)throw Error(p$3I(311));Mt.lastRenderedReducer=_t;var Pt=Mt.dispatch,Ft=Mt.pending,Dt=Tt.memoizedState;if(Ft!==null){Mt.pending=null;var Nt=Ft=Ft.next;do Dt=_t(Dt,Nt.action),Nt=Nt.next;while(Nt!==Ft);He$2(Dt,Tt.memoizedState)||(Ug=!0),Tt.memoizedState=Dt,Tt.baseQueue===null&&(Tt.baseState=Dt),Mt.lastRenderedState=Dt}return[Dt,Pt]}function hi(){}function ii(_t,Tt){var Mt=N$x,Pt=di(),Ft=Tt(),Dt=!He$2(Pt.memoizedState,Ft);if(Dt&&(Pt.memoizedState=Ft,Ug=!0),Pt=Pt.queue,ji(ki.bind(null,Mt,Pt,_t),[_t]),Pt.getSnapshot!==Tt||Dt||P$x!==null&&P$x.memoizedState.tag&1){if(Mt.flags|=2048,li(9,mi.bind(null,Mt,Pt,Ft,Tt),void 0,null),R$z===null)throw Error(p$3I(349));(Rh&30)!==0||ni(Mt,Tt,Ft)}return Ft}function ni(_t,Tt,Mt){_t.flags|=16384,_t={getSnapshot:Tt,value:Mt},Tt=N$x.updateQueue,Tt===null?(Tt={lastEffect:null,stores:null},N$x.updateQueue=Tt,Tt.stores=[_t]):(Mt=Tt.stores,Mt===null?Tt.stores=[_t]:Mt.push(_t))}function mi(_t,Tt,Mt,Pt){Tt.value=Mt,Tt.getSnapshot=Pt,oi(Tt)&&pi(_t)}function ki(_t,Tt,Mt){return Mt(function(){oi(Tt)&&pi(_t)})}function oi(_t){var Tt=_t.getSnapshot;_t=_t.value;try{var Mt=Tt();return!He$2(_t,Mt)}catch{return!0}}function pi(_t){var Tt=Zg(_t,1);Tt!==null&&mh(Tt,_t,1,-1)}function qi(_t){var Tt=ci();return typeof _t=="function"&&(_t=_t()),Tt.memoizedState=Tt.baseState=_t,_t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:_t},Tt.queue=_t,_t=_t.dispatch=ri.bind(null,N$x,_t),[Tt.memoizedState,_t]}function li(_t,Tt,Mt,Pt){return _t={tag:_t,create:Tt,destroy:Mt,deps:Pt,next:null},Tt=N$x.updateQueue,Tt===null?(Tt={lastEffect:null,stores:null},N$x.updateQueue=Tt,Tt.lastEffect=_t.next=_t):(Mt=Tt.lastEffect,Mt===null?Tt.lastEffect=_t.next=_t:(Pt=Mt.next,Mt.next=_t,_t.next=Pt,Tt.lastEffect=_t)),_t}function si(){return di().memoizedState}function ti(_t,Tt,Mt,Pt){var Ft=ci();N$x.flags|=_t,Ft.memoizedState=li(1|Tt,Mt,void 0,Pt===void 0?null:Pt)}function ui(_t,Tt,Mt,Pt){var Ft=di();Pt=Pt===void 0?null:Pt;var Dt=void 0;if(O$B!==null){var Nt=O$B.memoizedState;if(Dt=Nt.destroy,Pt!==null&&Wh(Pt,Nt.deps)){Ft.memoizedState=li(Tt,Mt,Dt,Pt);return}}N$x.flags|=_t,Ft.memoizedState=li(1|Tt,Mt,Dt,Pt)}function vi(_t,Tt){return ti(8390656,8,_t,Tt)}function ji(_t,Tt){return ui(2048,8,_t,Tt)}function wi(_t,Tt){return ui(4,2,_t,Tt)}function xi(_t,Tt){return ui(4,4,_t,Tt)}function yi(_t,Tt){if(typeof Tt=="function")return _t=_t(),Tt(_t),function(){Tt(null)};if(Tt!=null)return _t=_t(),Tt.current=_t,function(){Tt.current=null}}function zi(_t,Tt,Mt){return Mt=Mt!=null?Mt.concat([_t]):null,ui(4,4,yi.bind(null,Tt,_t),Mt)}function Ai(){}function Bi(_t,Tt){var Mt=di();Tt=Tt===void 0?null:Tt;var Pt=Mt.memoizedState;return Pt!==null&&Tt!==null&&Wh(Tt,Pt[1])?Pt[0]:(Mt.memoizedState=[_t,Tt],_t)}function Ci(_t,Tt){var Mt=di();Tt=Tt===void 0?null:Tt;var Pt=Mt.memoizedState;return Pt!==null&&Tt!==null&&Wh(Tt,Pt[1])?Pt[0]:(_t=_t(),Mt.memoizedState=[_t,Tt],_t)}function Di(_t,Tt,Mt){return(Rh&21)===0?(_t.baseState&&(_t.baseState=!1,Ug=!0),_t.memoizedState=Mt):(He$2(Mt,Tt)||(Mt=yc(),N$x.lanes|=Mt,hh|=Mt,_t.baseState=!0),Tt)}function Ei(_t,Tt){var Mt=C$x;C$x=Mt!==0&&4>Mt?Mt:4,_t(!0);var Pt=Qh.transition;Qh.transition={};try{_t(!1),Tt()}finally{C$x=Mt,Qh.transition=Pt}}function Fi(){return di().memoizedState}function Gi(_t,Tt,Mt){var Pt=lh(_t);if(Mt={lane:Pt,action:Mt,hasEagerState:!1,eagerState:null,next:null},Hi(_t))Ii(Tt,Mt);else if(Mt=Yg(_t,Tt,Mt,Pt),Mt!==null){var Ft=L$z();mh(Mt,_t,Pt,Ft),Ji(Mt,Tt,Pt)}}function ri(_t,Tt,Mt){var Pt=lh(_t),Ft={lane:Pt,action:Mt,hasEagerState:!1,eagerState:null,next:null};if(Hi(_t))Ii(Tt,Ft);else{var Dt=_t.alternate;if(_t.lanes===0&&(Dt===null||Dt.lanes===0)&&(Dt=Tt.lastRenderedReducer,Dt!==null))try{var Nt=Tt.lastRenderedState,Vt=Dt(Nt,Mt);if(Ft.hasEagerState=!0,Ft.eagerState=Vt,He$2(Vt,Nt)){var zt=Tt.interleaved;zt===null?(Ft.next=Ft,Xg(Tt)):(Ft.next=zt.next,zt.next=Ft),Tt.interleaved=Ft;return}}catch{}finally{}Mt=Yg(_t,Tt,Ft,Pt),Mt!==null&&(Ft=L$z(),mh(Mt,_t,Pt,Ft),Ji(Mt,Tt,Pt))}}function Hi(_t){var Tt=_t.alternate;return _t===N$x||Tt!==null&&Tt===N$x}function Ii(_t,Tt){Th=Sh=!0;var Mt=_t.pending;Mt===null?Tt.next=Tt:(Tt.next=Mt.next,Mt.next=Tt),_t.pending=Tt}function Ji(_t,Tt,Mt){if((Mt&4194240)!==0){var Pt=Tt.lanes;Pt&=_t.pendingLanes,Mt|=Pt,Tt.lanes=Mt,Cc(_t,Mt)}}var ai={readContext:Vg,useCallback:Q$f,useContext:Q$f,useEffect:Q$f,useImperativeHandle:Q$f,useInsertionEffect:Q$f,useLayoutEffect:Q$f,useMemo:Q$f,useReducer:Q$f,useRef:Q$f,useState:Q$f,useDebugValue:Q$f,useDeferredValue:Q$f,useTransition:Q$f,useMutableSource:Q$f,useSyncExternalStore:Q$f,useId:Q$f,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(_t,Tt){return ci().memoizedState=[_t,Tt===void 0?null:Tt],_t},useContext:Vg,useEffect:vi,useImperativeHandle:function(_t,Tt,Mt){return Mt=Mt!=null?Mt.concat([_t]):null,ti(4194308,4,yi.bind(null,Tt,_t),Mt)},useLayoutEffect:function(_t,Tt){return ti(4194308,4,_t,Tt)},useInsertionEffect:function(_t,Tt){return ti(4,2,_t,Tt)},useMemo:function(_t,Tt){var Mt=ci();return Tt=Tt===void 0?null:Tt,_t=_t(),Mt.memoizedState=[_t,Tt],_t},useReducer:function(_t,Tt,Mt){var Pt=ci();return Tt=Mt!==void 0?Mt(Tt):Tt,Pt.memoizedState=Pt.baseState=Tt,_t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_t,lastRenderedState:Tt},Pt.queue=_t,_t=_t.dispatch=Gi.bind(null,N$x,_t),[Pt.memoizedState,_t]},useRef:function(_t){var Tt=ci();return _t={current:_t},Tt.memoizedState=_t},useState:qi,useDebugValue:Ai,useDeferredValue:function(_t){return ci().memoizedState=_t},useTransition:function(){var _t=qi(!1),Tt=_t[0];return _t=Ei.bind(null,_t[1]),ci().memoizedState=_t,[Tt,_t]},useMutableSource:function(){},useSyncExternalStore:function(_t,Tt,Mt){var Pt=N$x,Ft=ci();if(I$G){if(Mt===void 0)throw Error(p$3I(407));Mt=Mt()}else{if(Mt=Tt(),R$z===null)throw Error(p$3I(349));(Rh&30)!==0||ni(Pt,Tt,Mt)}Ft.memoizedState=Mt;var Dt={value:Mt,getSnapshot:Tt};return Ft.queue=Dt,vi(ki.bind(null,Pt,Dt,_t),[_t]),Pt.flags|=2048,li(9,mi.bind(null,Pt,Dt,Mt,Tt),void 0,null),Mt},useId:function(){var _t=ci(),Tt=R$z.identifierPrefix;if(I$G){var Mt=sg,Pt=rg;Mt=(Pt&~(1<<32-oc(Pt)-1)).toString(32)+Mt,Tt=":"+Tt+"R"+Mt,Mt=Uh++,0<Mt&&(Tt+="H"+Mt.toString(32)),Tt+=":"}else Mt=Vh++,Tt=":"+Tt+"r"+Mt.toString(32)+":";return _t.memoizedState=Tt},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(_t){var Tt=di();return Di(Tt,O$B.memoizedState,_t)},useTransition:function(){var _t=fi(ei)[0],Tt=di().memoizedState;return[_t,Tt]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(_t){var Tt=di();return O$B===null?Tt.memoizedState=_t:Di(Tt,O$B.memoizedState,_t)},useTransition:function(){var _t=gi(ei)[0],Tt=di().memoizedState;return[_t,Tt]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(_t,Tt){try{var Mt="",Pt=Tt;do Mt+=Pa(Pt),Pt=Pt.return;while(Pt);var Ft=Mt}catch(Dt){Ft=`
Error generating stack: `+Dt.message+`
`+Dt.stack}return{value:_t,source:Tt,stack:Ft,digest:null}}function Li(_t,Tt,Mt){return{value:_t,source:null,stack:Mt!=null?Mt:null,digest:Tt!=null?Tt:null}}function Mi(_t,Tt){try{console.error(Tt.value)}catch(Mt){setTimeout(function(){throw Mt})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(_t,Tt,Mt){Mt=ch(-1,Mt),Mt.tag=3,Mt.payload={element:null};var Pt=Tt.value;return Mt.callback=function(){Pi||(Pi=!0,Qi=Pt),Mi(_t,Tt)},Mt}function Ri(_t,Tt,Mt){Mt=ch(-1,Mt),Mt.tag=3;var Pt=_t.type.getDerivedStateFromError;if(typeof Pt=="function"){var Ft=Tt.value;Mt.payload=function(){return Pt(Ft)},Mt.callback=function(){Mi(_t,Tt)}}var Dt=_t.stateNode;return Dt!==null&&typeof Dt.componentDidCatch=="function"&&(Mt.callback=function(){Mi(_t,Tt),typeof Pt!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var Nt=Tt.stack;this.componentDidCatch(Tt.value,{componentStack:Nt!==null?Nt:""})}),Mt}function Ti(_t,Tt,Mt){var Pt=_t.pingCache;if(Pt===null){Pt=_t.pingCache=new Ni;var Ft=new Set;Pt.set(Tt,Ft)}else Ft=Pt.get(Tt),Ft===void 0&&(Ft=new Set,Pt.set(Tt,Ft));Ft.has(Mt)||(Ft.add(Mt),_t=Ui.bind(null,_t,Tt,Mt),Tt.then(_t,_t))}function Vi(_t){do{var Tt;if((Tt=_t.tag===13)&&(Tt=_t.memoizedState,Tt=Tt!==null?Tt.dehydrated!==null:!0),Tt)return _t;_t=_t.return}while(_t!==null);return null}function Wi(_t,Tt,Mt,Pt,Ft){return(_t.mode&1)===0?(_t===Tt?_t.flags|=65536:(_t.flags|=128,Mt.flags|=131072,Mt.flags&=-52805,Mt.tag===1&&(Mt.alternate===null?Mt.tag=17:(Tt=ch(-1,1),Tt.tag=2,dh(Mt,Tt,1))),Mt.lanes|=1),_t):(_t.flags|=65536,_t.lanes=Ft,_t)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(_t,Tt,Mt,Pt){Tt.child=_t===null?Ch(Tt,null,Mt,Pt):Bh(Tt,_t.child,Mt,Pt)}function Zi(_t,Tt,Mt,Pt,Ft){Mt=Mt.render;var Dt=Tt.ref;return Tg(Tt,Ft),Pt=Xh(_t,Tt,Mt,Pt,Dt,Ft),Mt=bi(),_t!==null&&!Ug?(Tt.updateQueue=_t.updateQueue,Tt.flags&=-2053,_t.lanes&=~Ft,$i(_t,Tt,Ft)):(I$G&&Mt&&vg(Tt),Tt.flags|=1,Yi(_t,Tt,Pt,Ft),Tt.child)}function aj(_t,Tt,Mt,Pt,Ft){if(_t===null){var Dt=Mt.type;return typeof Dt=="function"&&!bj(Dt)&&Dt.defaultProps===void 0&&Mt.compare===null&&Mt.defaultProps===void 0?(Tt.tag=15,Tt.type=Dt,cj(_t,Tt,Dt,Pt,Ft)):(_t=yh(Mt.type,null,Pt,Tt,Tt.mode,Ft),_t.ref=Tt.ref,_t.return=Tt,Tt.child=_t)}if(Dt=_t.child,(_t.lanes&Ft)===0){var Nt=Dt.memoizedProps;if(Mt=Mt.compare,Mt=Mt!==null?Mt:Ie$2,Mt(Nt,Pt)&&_t.ref===Tt.ref)return $i(_t,Tt,Ft)}return Tt.flags|=1,_t=wh(Dt,Pt),_t.ref=Tt.ref,_t.return=Tt,Tt.child=_t}function cj(_t,Tt,Mt,Pt,Ft){if(_t!==null){var Dt=_t.memoizedProps;if(Ie$2(Dt,Pt)&&_t.ref===Tt.ref)if(Ug=!1,Tt.pendingProps=Pt=Dt,(_t.lanes&Ft)!==0)(_t.flags&131072)!==0&&(Ug=!0);else return Tt.lanes=_t.lanes,$i(_t,Tt,Ft)}return dj(_t,Tt,Mt,Pt,Ft)}function ej(_t,Tt,Mt){var Pt=Tt.pendingProps,Ft=Pt.children,Dt=_t!==null?_t.memoizedState:null;if(Pt.mode==="hidden")if((Tt.mode&1)===0)Tt.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$r(fj,gj),gj|=Mt;else{if((Mt&1073741824)===0)return _t=Dt!==null?Dt.baseLanes|Mt:Mt,Tt.lanes=Tt.childLanes=1073741824,Tt.memoizedState={baseLanes:_t,cachePool:null,transitions:null},Tt.updateQueue=null,G$r(fj,gj),gj|=_t,null;Tt.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt=Dt!==null?Dt.baseLanes:Mt,G$r(fj,gj),gj|=Pt}else Dt!==null?(Pt=Dt.baseLanes|Mt,Tt.memoizedState=null):Pt=Mt,G$r(fj,gj),gj|=Pt;return Yi(_t,Tt,Ft,Mt),Tt.child}function hj(_t,Tt){var Mt=Tt.ref;(_t===null&&Mt!==null||_t!==null&&_t.ref!==Mt)&&(Tt.flags|=512,Tt.flags|=2097152)}function dj(_t,Tt,Mt,Pt,Ft){var Dt=Zf(Mt)?Xf:H$k.current;return Dt=Yf(Tt,Dt),Tg(Tt,Ft),Mt=Xh(_t,Tt,Mt,Pt,Dt,Ft),Pt=bi(),_t!==null&&!Ug?(Tt.updateQueue=_t.updateQueue,Tt.flags&=-2053,_t.lanes&=~Ft,$i(_t,Tt,Ft)):(I$G&&Pt&&vg(Tt),Tt.flags|=1,Yi(_t,Tt,Mt,Ft),Tt.child)}function ij(_t,Tt,Mt,Pt,Ft){if(Zf(Mt)){var Dt=!0;cg(Tt)}else Dt=!1;if(Tg(Tt,Ft),Tt.stateNode===null)jj(_t,Tt),ph(Tt,Mt,Pt),rh(Tt,Mt,Pt,Ft),Pt=!0;else if(_t===null){var Nt=Tt.stateNode,Vt=Tt.memoizedProps;Nt.props=Vt;var zt=Nt.context,Xt=Mt.contextType;typeof Xt=="object"&&Xt!==null?Xt=Vg(Xt):(Xt=Zf(Mt)?Xf:H$k.current,Xt=Yf(Tt,Xt));var Ht=Mt.getDerivedStateFromProps,Wt=typeof Ht=="function"||typeof Nt.getSnapshotBeforeUpdate=="function";Wt||typeof Nt.UNSAFE_componentWillReceiveProps!="function"&&typeof Nt.componentWillReceiveProps!="function"||(Vt!==Pt||zt!==Xt)&&qh(Tt,Nt,Pt,Xt),$g=!1;var Qt=Tt.memoizedState;Nt.state=Qt,gh(Tt,Pt,Nt,Ft),zt=Tt.memoizedState,Vt!==Pt||Qt!==zt||Wf.current||$g?(typeof Ht=="function"&&(kh(Tt,Mt,Ht,Pt),zt=Tt.memoizedState),(Vt=$g||oh(Tt,Mt,Vt,Pt,Qt,zt,Xt))?(Wt||typeof Nt.UNSAFE_componentWillMount!="function"&&typeof Nt.componentWillMount!="function"||(typeof Nt.componentWillMount=="function"&&Nt.componentWillMount(),typeof Nt.UNSAFE_componentWillMount=="function"&&Nt.UNSAFE_componentWillMount()),typeof Nt.componentDidMount=="function"&&(Tt.flags|=4194308)):(typeof Nt.componentDidMount=="function"&&(Tt.flags|=4194308),Tt.memoizedProps=Pt,Tt.memoizedState=zt),Nt.props=Pt,Nt.state=zt,Nt.context=Xt,Pt=Vt):(typeof Nt.componentDidMount=="function"&&(Tt.flags|=4194308),Pt=!1)}else{Nt=Tt.stateNode,bh(_t,Tt),Vt=Tt.memoizedProps,Xt=Tt.type===Tt.elementType?Vt:Lg(Tt.type,Vt),Nt.props=Xt,Wt=Tt.pendingProps,Qt=Nt.context,zt=Mt.contextType,typeof zt=="object"&&zt!==null?zt=Vg(zt):(zt=Zf(Mt)?Xf:H$k.current,zt=Yf(Tt,zt));var Zt=Mt.getDerivedStateFromProps;(Ht=typeof Zt=="function"||typeof Nt.getSnapshotBeforeUpdate=="function")||typeof Nt.UNSAFE_componentWillReceiveProps!="function"&&typeof Nt.componentWillReceiveProps!="function"||(Vt!==Wt||Qt!==zt)&&qh(Tt,Nt,Pt,zt),$g=!1,Qt=Tt.memoizedState,Nt.state=Qt,gh(Tt,Pt,Nt,Ft);var Kt=Tt.memoizedState;Vt!==Wt||Qt!==Kt||Wf.current||$g?(typeof Zt=="function"&&(kh(Tt,Mt,Zt,Pt),Kt=Tt.memoizedState),(Xt=$g||oh(Tt,Mt,Xt,Pt,Qt,Kt,zt)||!1)?(Ht||typeof Nt.UNSAFE_componentWillUpdate!="function"&&typeof Nt.componentWillUpdate!="function"||(typeof Nt.componentWillUpdate=="function"&&Nt.componentWillUpdate(Pt,Kt,zt),typeof Nt.UNSAFE_componentWillUpdate=="function"&&Nt.UNSAFE_componentWillUpdate(Pt,Kt,zt)),typeof Nt.componentDidUpdate=="function"&&(Tt.flags|=4),typeof Nt.getSnapshotBeforeUpdate=="function"&&(Tt.flags|=1024)):(typeof Nt.componentDidUpdate!="function"||Vt===_t.memoizedProps&&Qt===_t.memoizedState||(Tt.flags|=4),typeof Nt.getSnapshotBeforeUpdate!="function"||Vt===_t.memoizedProps&&Qt===_t.memoizedState||(Tt.flags|=1024),Tt.memoizedProps=Pt,Tt.memoizedState=Kt),Nt.props=Pt,Nt.state=Kt,Nt.context=zt,Pt=Xt):(typeof Nt.componentDidUpdate!="function"||Vt===_t.memoizedProps&&Qt===_t.memoizedState||(Tt.flags|=4),typeof Nt.getSnapshotBeforeUpdate!="function"||Vt===_t.memoizedProps&&Qt===_t.memoizedState||(Tt.flags|=1024),Pt=!1)}return kj(_t,Tt,Mt,Pt,Dt,Ft)}function kj(_t,Tt,Mt,Pt,Ft,Dt){hj(_t,Tt);var Nt=(Tt.flags&128)!==0;if(!Pt&&!Nt)return Ft&&dg(Tt,Mt,!1),$i(_t,Tt,Dt);Pt=Tt.stateNode,Xi.current=Tt;var Vt=Nt&&typeof Mt.getDerivedStateFromError!="function"?null:Pt.render();return Tt.flags|=1,_t!==null&&Nt?(Tt.child=Bh(Tt,_t.child,null,Dt),Tt.child=Bh(Tt,null,Vt,Dt)):Yi(_t,Tt,Vt,Dt),Tt.memoizedState=Pt.state,Ft&&dg(Tt,Mt,!0),Tt.child}function lj(_t){var Tt=_t.stateNode;Tt.pendingContext?ag(_t,Tt.pendingContext,Tt.pendingContext!==Tt.context):Tt.context&&ag(_t,Tt.context,!1),Ih(_t,Tt.containerInfo)}function mj(_t,Tt,Mt,Pt,Ft){return Ig(),Jg(Ft),Tt.flags|=256,Yi(_t,Tt,Mt,Pt),Tt.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(_t){return{baseLanes:_t,cachePool:null,transitions:null}}function pj(_t,Tt,Mt){var Pt=Tt.pendingProps,Ft=M$R.current,Dt=!1,Nt=(Tt.flags&128)!==0,Vt;if((Vt=Nt)||(Vt=_t!==null&&_t.memoizedState===null?!1:(Ft&2)!==0),Vt?(Dt=!0,Tt.flags&=-129):(_t===null||_t.memoizedState!==null)&&(Ft|=1),G$r(M$R,Ft&1),_t===null)return Eg(Tt),_t=Tt.memoizedState,_t!==null&&(_t=_t.dehydrated,_t!==null)?((Tt.mode&1)===0?Tt.lanes=1:_t.data==="$!"?Tt.lanes=8:Tt.lanes=1073741824,null):(Nt=Pt.children,_t=Pt.fallback,Dt?(Pt=Tt.mode,Dt=Tt.child,Nt={mode:"hidden",children:Nt},(Pt&1)===0&&Dt!==null?(Dt.childLanes=0,Dt.pendingProps=Nt):Dt=qj(Nt,Pt,0,null),_t=Ah(_t,Pt,Mt,null),Dt.return=Tt,_t.return=Tt,Dt.sibling=_t,Tt.child=Dt,Tt.child.memoizedState=oj(Mt),Tt.memoizedState=nj,_t):rj(Tt,Nt));if(Ft=_t.memoizedState,Ft!==null&&(Vt=Ft.dehydrated,Vt!==null))return sj(_t,Tt,Nt,Pt,Vt,Ft,Mt);if(Dt){Dt=Pt.fallback,Nt=Tt.mode,Ft=_t.child,Vt=Ft.sibling;var zt={mode:"hidden",children:Pt.children};return(Nt&1)===0&&Tt.child!==Ft?(Pt=Tt.child,Pt.childLanes=0,Pt.pendingProps=zt,Tt.deletions=null):(Pt=wh(Ft,zt),Pt.subtreeFlags=Ft.subtreeFlags&14680064),Vt!==null?Dt=wh(Vt,Dt):(Dt=Ah(Dt,Nt,Mt,null),Dt.flags|=2),Dt.return=Tt,Pt.return=Tt,Pt.sibling=Dt,Tt.child=Pt,Pt=Dt,Dt=Tt.child,Nt=_t.child.memoizedState,Nt=Nt===null?oj(Mt):{baseLanes:Nt.baseLanes|Mt,cachePool:null,transitions:Nt.transitions},Dt.memoizedState=Nt,Dt.childLanes=_t.childLanes&~Mt,Tt.memoizedState=nj,Pt}return Dt=_t.child,_t=Dt.sibling,Pt=wh(Dt,{mode:"visible",children:Pt.children}),(Tt.mode&1)===0&&(Pt.lanes=Mt),Pt.return=Tt,Pt.sibling=null,_t!==null&&(Mt=Tt.deletions,Mt===null?(Tt.deletions=[_t],Tt.flags|=16):Mt.push(_t)),Tt.child=Pt,Tt.memoizedState=null,Pt}function rj(_t,Tt){return Tt=qj({mode:"visible",children:Tt},_t.mode,0,null),Tt.return=_t,_t.child=Tt}function tj(_t,Tt,Mt,Pt){return Pt!==null&&Jg(Pt),Bh(Tt,_t.child,null,Mt),_t=rj(Tt,Tt.pendingProps.children),_t.flags|=2,Tt.memoizedState=null,_t}function sj(_t,Tt,Mt,Pt,Ft,Dt,Nt){if(Mt)return Tt.flags&256?(Tt.flags&=-257,Pt=Li(Error(p$3I(422))),tj(_t,Tt,Nt,Pt)):Tt.memoizedState!==null?(Tt.child=_t.child,Tt.flags|=128,null):(Dt=Pt.fallback,Ft=Tt.mode,Pt=qj({mode:"visible",children:Pt.children},Ft,0,null),Dt=Ah(Dt,Ft,Nt,null),Dt.flags|=2,Pt.return=Tt,Dt.return=Tt,Pt.sibling=Dt,Tt.child=Pt,(Tt.mode&1)!==0&&Bh(Tt,_t.child,null,Nt),Tt.child.memoizedState=oj(Nt),Tt.memoizedState=nj,Dt);if((Tt.mode&1)===0)return tj(_t,Tt,Nt,null);if(Ft.data==="$!"){if(Pt=Ft.nextSibling&&Ft.nextSibling.dataset,Pt)var Vt=Pt.dgst;return Pt=Vt,Dt=Error(p$3I(419)),Pt=Li(Dt,Pt,void 0),tj(_t,Tt,Nt,Pt)}if(Vt=(Nt&_t.childLanes)!==0,Ug||Vt){if(Pt=R$z,Pt!==null){switch(Nt&-Nt){case 4:Ft=2;break;case 16:Ft=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Ft=32;break;case 536870912:Ft=268435456;break;default:Ft=0}Ft=(Ft&(Pt.suspendedLanes|Nt))!==0?0:Ft,Ft!==0&&Ft!==Dt.retryLane&&(Dt.retryLane=Ft,Zg(_t,Ft),mh(Pt,_t,Ft,-1))}return uj(),Pt=Li(Error(p$3I(421))),tj(_t,Tt,Nt,Pt)}return Ft.data==="$?"?(Tt.flags|=128,Tt.child=_t.child,Tt=vj.bind(null,_t),Ft._reactRetry=Tt,null):(_t=Dt.treeContext,yg=Lf(Ft.nextSibling),xg=Tt,I$G=!0,zg=null,_t!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_t.id,sg=_t.overflow,qg=Tt),Tt=rj(Tt,Pt.children),Tt.flags|=4096,Tt)}function wj(_t,Tt,Mt){_t.lanes|=Tt;var Pt=_t.alternate;Pt!==null&&(Pt.lanes|=Tt),Sg(_t.return,Tt,Mt)}function xj(_t,Tt,Mt,Pt,Ft){var Dt=_t.memoizedState;Dt===null?_t.memoizedState={isBackwards:Tt,rendering:null,renderingStartTime:0,last:Pt,tail:Mt,tailMode:Ft}:(Dt.isBackwards=Tt,Dt.rendering=null,Dt.renderingStartTime=0,Dt.last=Pt,Dt.tail=Mt,Dt.tailMode=Ft)}function yj(_t,Tt,Mt){var Pt=Tt.pendingProps,Ft=Pt.revealOrder,Dt=Pt.tail;if(Yi(_t,Tt,Pt.children,Mt),Pt=M$R.current,(Pt&2)!==0)Pt=Pt&1|2,Tt.flags|=128;else{if(_t!==null&&(_t.flags&128)!==0)e:for(_t=Tt.child;_t!==null;){if(_t.tag===13)_t.memoizedState!==null&&wj(_t,Mt,Tt);else if(_t.tag===19)wj(_t,Mt,Tt);else if(_t.child!==null){_t.child.return=_t,_t=_t.child;continue}if(_t===Tt)break e;for(;_t.sibling===null;){if(_t.return===null||_t.return===Tt)break e;_t=_t.return}_t.sibling.return=_t.return,_t=_t.sibling}Pt&=1}if(G$r(M$R,Pt),(Tt.mode&1)===0)Tt.memoizedState=null;else switch(Ft){case"forwards":for(Mt=Tt.child,Ft=null;Mt!==null;)_t=Mt.alternate,_t!==null&&Mh(_t)===null&&(Ft=Mt),Mt=Mt.sibling;Mt=Ft,Mt===null?(Ft=Tt.child,Tt.child=null):(Ft=Mt.sibling,Mt.sibling=null),xj(Tt,!1,Ft,Mt,Dt);break;case"backwards":for(Mt=null,Ft=Tt.child,Tt.child=null;Ft!==null;){if(_t=Ft.alternate,_t!==null&&Mh(_t)===null){Tt.child=Ft;break}_t=Ft.sibling,Ft.sibling=Mt,Mt=Ft,Ft=_t}xj(Tt,!0,Mt,null,Dt);break;case"together":xj(Tt,!1,null,null,void 0);break;default:Tt.memoizedState=null}return Tt.child}function jj(_t,Tt){(Tt.mode&1)===0&&_t!==null&&(_t.alternate=null,Tt.alternate=null,Tt.flags|=2)}function $i(_t,Tt,Mt){if(_t!==null&&(Tt.dependencies=_t.dependencies),hh|=Tt.lanes,(Mt&Tt.childLanes)===0)return null;if(_t!==null&&Tt.child!==_t.child)throw Error(p$3I(153));if(Tt.child!==null){for(_t=Tt.child,Mt=wh(_t,_t.pendingProps),Tt.child=Mt,Mt.return=Tt;_t.sibling!==null;)_t=_t.sibling,Mt=Mt.sibling=wh(_t,_t.pendingProps),Mt.return=Tt;Mt.sibling=null}return Tt.child}function zj(_t,Tt,Mt){switch(Tt.tag){case 3:lj(Tt),Ig();break;case 5:Kh(Tt);break;case 1:Zf(Tt.type)&&cg(Tt);break;case 4:Ih(Tt,Tt.stateNode.containerInfo);break;case 10:var Pt=Tt.type._context,Ft=Tt.memoizedProps.value;G$r(Mg,Pt._currentValue),Pt._currentValue=Ft;break;case 13:if(Pt=Tt.memoizedState,Pt!==null)return Pt.dehydrated!==null?(G$r(M$R,M$R.current&1),Tt.flags|=128,null):(Mt&Tt.child.childLanes)!==0?pj(_t,Tt,Mt):(G$r(M$R,M$R.current&1),_t=$i(_t,Tt,Mt),_t!==null?_t.sibling:null);G$r(M$R,M$R.current&1);break;case 19:if(Pt=(Mt&Tt.childLanes)!==0,(_t.flags&128)!==0){if(Pt)return yj(_t,Tt,Mt);Tt.flags|=128}if(Ft=Tt.memoizedState,Ft!==null&&(Ft.rendering=null,Ft.tail=null,Ft.lastEffect=null),G$r(M$R,M$R.current),Pt)break;return null;case 22:case 23:return Tt.lanes=0,ej(_t,Tt,Mt)}return $i(_t,Tt,Mt)}var Aj,Bj,Cj,Dj;Aj=function(_t,Tt){for(var Mt=Tt.child;Mt!==null;){if(Mt.tag===5||Mt.tag===6)_t.appendChild(Mt.stateNode);else if(Mt.tag!==4&&Mt.child!==null){Mt.child.return=Mt,Mt=Mt.child;continue}if(Mt===Tt)break;for(;Mt.sibling===null;){if(Mt.return===null||Mt.return===Tt)return;Mt=Mt.return}Mt.sibling.return=Mt.return,Mt=Mt.sibling}};Bj=function(){};Cj=function(_t,Tt,Mt,Pt){var Ft=_t.memoizedProps;if(Ft!==Pt){_t=Tt.stateNode,Hh(Eh.current);var Dt=null;switch(Mt){case"input":Ft=Ya(_t,Ft),Pt=Ya(_t,Pt),Dt=[];break;case"select":Ft=A$H({},Ft,{value:void 0}),Pt=A$H({},Pt,{value:void 0}),Dt=[];break;case"textarea":Ft=gb(_t,Ft),Pt=gb(_t,Pt),Dt=[];break;default:typeof Ft.onClick!="function"&&typeof Pt.onClick=="function"&&(_t.onclick=Bf)}ub(Mt,Pt);var Nt;Mt=null;for(Xt in Ft)if(!Pt.hasOwnProperty(Xt)&&Ft.hasOwnProperty(Xt)&&Ft[Xt]!=null)if(Xt==="style"){var Vt=Ft[Xt];for(Nt in Vt)Vt.hasOwnProperty(Nt)&&(Mt||(Mt={}),Mt[Nt]="")}else Xt!=="dangerouslySetInnerHTML"&&Xt!=="children"&&Xt!=="suppressContentEditableWarning"&&Xt!=="suppressHydrationWarning"&&Xt!=="autoFocus"&&(ea.hasOwnProperty(Xt)?Dt||(Dt=[]):(Dt=Dt||[]).push(Xt,null));for(Xt in Pt){var zt=Pt[Xt];if(Vt=Ft!=null?Ft[Xt]:void 0,Pt.hasOwnProperty(Xt)&&zt!==Vt&&(zt!=null||Vt!=null))if(Xt==="style")if(Vt){for(Nt in Vt)!Vt.hasOwnProperty(Nt)||zt&&zt.hasOwnProperty(Nt)||(Mt||(Mt={}),Mt[Nt]="");for(Nt in zt)zt.hasOwnProperty(Nt)&&Vt[Nt]!==zt[Nt]&&(Mt||(Mt={}),Mt[Nt]=zt[Nt])}else Mt||(Dt||(Dt=[]),Dt.push(Xt,Mt)),Mt=zt;else Xt==="dangerouslySetInnerHTML"?(zt=zt?zt.__html:void 0,Vt=Vt?Vt.__html:void 0,zt!=null&&Vt!==zt&&(Dt=Dt||[]).push(Xt,zt)):Xt==="children"?typeof zt!="string"&&typeof zt!="number"||(Dt=Dt||[]).push(Xt,""+zt):Xt!=="suppressContentEditableWarning"&&Xt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(Xt)?(zt!=null&&Xt==="onScroll"&&D$E("scroll",_t),Dt||Vt===zt||(Dt=[])):(Dt=Dt||[]).push(Xt,zt))}Mt&&(Dt=Dt||[]).push("style",Mt);var Xt=Dt;(Tt.updateQueue=Xt)&&(Tt.flags|=4)}};Dj=function(_t,Tt,Mt,Pt){Mt!==Pt&&(Tt.flags|=4)};function Ej(_t,Tt){if(!I$G)switch(_t.tailMode){case"hidden":Tt=_t.tail;for(var Mt=null;Tt!==null;)Tt.alternate!==null&&(Mt=Tt),Tt=Tt.sibling;Mt===null?_t.tail=null:Mt.sibling=null;break;case"collapsed":Mt=_t.tail;for(var Pt=null;Mt!==null;)Mt.alternate!==null&&(Pt=Mt),Mt=Mt.sibling;Pt===null?Tt||_t.tail===null?_t.tail=null:_t.tail.sibling=null:Pt.sibling=null}}function S$S(_t){var Tt=_t.alternate!==null&&_t.alternate.child===_t.child,Mt=0,Pt=0;if(Tt)for(var Ft=_t.child;Ft!==null;)Mt|=Ft.lanes|Ft.childLanes,Pt|=Ft.subtreeFlags&14680064,Pt|=Ft.flags&14680064,Ft.return=_t,Ft=Ft.sibling;else for(Ft=_t.child;Ft!==null;)Mt|=Ft.lanes|Ft.childLanes,Pt|=Ft.subtreeFlags,Pt|=Ft.flags,Ft.return=_t,Ft=Ft.sibling;return _t.subtreeFlags|=Pt,_t.childLanes=Mt,Tt}function Fj(_t,Tt,Mt){var Pt=Tt.pendingProps;switch(wg(Tt),Tt.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$S(Tt),null;case 1:return Zf(Tt.type)&&$f(),S$S(Tt),null;case 3:return Pt=Tt.stateNode,Jh(),E$N(Wf),E$N(H$k),Oh(),Pt.pendingContext&&(Pt.context=Pt.pendingContext,Pt.pendingContext=null),(_t===null||_t.child===null)&&(Gg(Tt)?Tt.flags|=4:_t===null||_t.memoizedState.isDehydrated&&(Tt.flags&256)===0||(Tt.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(_t,Tt),S$S(Tt),null;case 5:Lh(Tt);var Ft=Hh(Gh.current);if(Mt=Tt.type,_t!==null&&Tt.stateNode!=null)Cj(_t,Tt,Mt,Pt,Ft),_t.ref!==Tt.ref&&(Tt.flags|=512,Tt.flags|=2097152);else{if(!Pt){if(Tt.stateNode===null)throw Error(p$3I(166));return S$S(Tt),null}if(_t=Hh(Eh.current),Gg(Tt)){Pt=Tt.stateNode,Mt=Tt.type;var Dt=Tt.memoizedProps;switch(Pt[Of]=Tt,Pt[Pf]=Dt,_t=(Tt.mode&1)!==0,Mt){case"dialog":D$E("cancel",Pt),D$E("close",Pt);break;case"iframe":case"object":case"embed":D$E("load",Pt);break;case"video":case"audio":for(Ft=0;Ft<lf.length;Ft++)D$E(lf[Ft],Pt);break;case"source":D$E("error",Pt);break;case"img":case"image":case"link":D$E("error",Pt),D$E("load",Pt);break;case"details":D$E("toggle",Pt);break;case"input":Za(Pt,Dt),D$E("invalid",Pt);break;case"select":Pt._wrapperState={wasMultiple:!!Dt.multiple},D$E("invalid",Pt);break;case"textarea":hb(Pt,Dt),D$E("invalid",Pt)}ub(Mt,Dt),Ft=null;for(var Nt in Dt)if(Dt.hasOwnProperty(Nt)){var Vt=Dt[Nt];Nt==="children"?typeof Vt=="string"?Pt.textContent!==Vt&&(Dt.suppressHydrationWarning!==!0&&Af(Pt.textContent,Vt,_t),Ft=["children",Vt]):typeof Vt=="number"&&Pt.textContent!==""+Vt&&(Dt.suppressHydrationWarning!==!0&&Af(Pt.textContent,Vt,_t),Ft=["children",""+Vt]):ea.hasOwnProperty(Nt)&&Vt!=null&&Nt==="onScroll"&&D$E("scroll",Pt)}switch(Mt){case"input":Va(Pt),db(Pt,Dt,!0);break;case"textarea":Va(Pt),jb(Pt);break;case"select":case"option":break;default:typeof Dt.onClick=="function"&&(Pt.onclick=Bf)}Pt=Ft,Tt.updateQueue=Pt,Pt!==null&&(Tt.flags|=4)}else{Nt=Ft.nodeType===9?Ft:Ft.ownerDocument,_t==="http://www.w3.org/1999/xhtml"&&(_t=kb(Mt)),_t==="http://www.w3.org/1999/xhtml"?Mt==="script"?(_t=Nt.createElement("div"),_t.innerHTML="<script><\/script>",_t=_t.removeChild(_t.firstChild)):typeof Pt.is=="string"?_t=Nt.createElement(Mt,{is:Pt.is}):(_t=Nt.createElement(Mt),Mt==="select"&&(Nt=_t,Pt.multiple?Nt.multiple=!0:Pt.size&&(Nt.size=Pt.size))):_t=Nt.createElementNS(_t,Mt),_t[Of]=Tt,_t[Pf]=Pt,Aj(_t,Tt,!1,!1),Tt.stateNode=_t;e:{switch(Nt=vb(Mt,Pt),Mt){case"dialog":D$E("cancel",_t),D$E("close",_t),Ft=Pt;break;case"iframe":case"object":case"embed":D$E("load",_t),Ft=Pt;break;case"video":case"audio":for(Ft=0;Ft<lf.length;Ft++)D$E(lf[Ft],_t);Ft=Pt;break;case"source":D$E("error",_t),Ft=Pt;break;case"img":case"image":case"link":D$E("error",_t),D$E("load",_t),Ft=Pt;break;case"details":D$E("toggle",_t),Ft=Pt;break;case"input":Za(_t,Pt),Ft=Ya(_t,Pt),D$E("invalid",_t);break;case"option":Ft=Pt;break;case"select":_t._wrapperState={wasMultiple:!!Pt.multiple},Ft=A$H({},Pt,{value:void 0}),D$E("invalid",_t);break;case"textarea":hb(_t,Pt),Ft=gb(_t,Pt),D$E("invalid",_t);break;default:Ft=Pt}ub(Mt,Ft),Vt=Ft;for(Dt in Vt)if(Vt.hasOwnProperty(Dt)){var zt=Vt[Dt];Dt==="style"?sb(_t,zt):Dt==="dangerouslySetInnerHTML"?(zt=zt?zt.__html:void 0,zt!=null&&nb(_t,zt)):Dt==="children"?typeof zt=="string"?(Mt!=="textarea"||zt!=="")&&ob(_t,zt):typeof zt=="number"&&ob(_t,""+zt):Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&Dt!=="autoFocus"&&(ea.hasOwnProperty(Dt)?zt!=null&&Dt==="onScroll"&&D$E("scroll",_t):zt!=null&&ta(_t,Dt,zt,Nt))}switch(Mt){case"input":Va(_t),db(_t,Pt,!1);break;case"textarea":Va(_t),jb(_t);break;case"option":Pt.value!=null&&_t.setAttribute("value",""+Sa(Pt.value));break;case"select":_t.multiple=!!Pt.multiple,Dt=Pt.value,Dt!=null?fb(_t,!!Pt.multiple,Dt,!1):Pt.defaultValue!=null&&fb(_t,!!Pt.multiple,Pt.defaultValue,!0);break;default:typeof Ft.onClick=="function"&&(_t.onclick=Bf)}switch(Mt){case"button":case"input":case"select":case"textarea":Pt=!!Pt.autoFocus;break e;case"img":Pt=!0;break e;default:Pt=!1}}Pt&&(Tt.flags|=4)}Tt.ref!==null&&(Tt.flags|=512,Tt.flags|=2097152)}return S$S(Tt),null;case 6:if(_t&&Tt.stateNode!=null)Dj(_t,Tt,_t.memoizedProps,Pt);else{if(typeof Pt!="string"&&Tt.stateNode===null)throw Error(p$3I(166));if(Mt=Hh(Gh.current),Hh(Eh.current),Gg(Tt)){if(Pt=Tt.stateNode,Mt=Tt.memoizedProps,Pt[Of]=Tt,(Dt=Pt.nodeValue!==Mt)&&(_t=xg,_t!==null))switch(_t.tag){case 3:Af(Pt.nodeValue,Mt,(_t.mode&1)!==0);break;case 5:_t.memoizedProps.suppressHydrationWarning!==!0&&Af(Pt.nodeValue,Mt,(_t.mode&1)!==0)}Dt&&(Tt.flags|=4)}else Pt=(Mt.nodeType===9?Mt:Mt.ownerDocument).createTextNode(Pt),Pt[Of]=Tt,Tt.stateNode=Pt}return S$S(Tt),null;case 13:if(E$N(M$R),Pt=Tt.memoizedState,_t===null||_t.memoizedState!==null&&_t.memoizedState.dehydrated!==null){if(I$G&&yg!==null&&(Tt.mode&1)!==0&&(Tt.flags&128)===0)Hg(),Ig(),Tt.flags|=98560,Dt=!1;else if(Dt=Gg(Tt),Pt!==null&&Pt.dehydrated!==null){if(_t===null){if(!Dt)throw Error(p$3I(318));if(Dt=Tt.memoizedState,Dt=Dt!==null?Dt.dehydrated:null,!Dt)throw Error(p$3I(317));Dt[Of]=Tt}else Ig(),(Tt.flags&128)===0&&(Tt.memoizedState=null),Tt.flags|=4;S$S(Tt),Dt=!1}else zg!==null&&(Gj(zg),zg=null),Dt=!0;if(!Dt)return Tt.flags&65536?Tt:null}return(Tt.flags&128)!==0?(Tt.lanes=Mt,Tt):(Pt=Pt!==null,Pt!==(_t!==null&&_t.memoizedState!==null)&&Pt&&(Tt.child.flags|=8192,(Tt.mode&1)!==0&&(_t===null||(M$R.current&1)!==0?T$E===0&&(T$E=3):uj())),Tt.updateQueue!==null&&(Tt.flags|=4),S$S(Tt),null);case 4:return Jh(),Bj(_t,Tt),_t===null&&sf(Tt.stateNode.containerInfo),S$S(Tt),null;case 10:return Rg(Tt.type._context),S$S(Tt),null;case 17:return Zf(Tt.type)&&$f(),S$S(Tt),null;case 19:if(E$N(M$R),Dt=Tt.memoizedState,Dt===null)return S$S(Tt),null;if(Pt=(Tt.flags&128)!==0,Nt=Dt.rendering,Nt===null)if(Pt)Ej(Dt,!1);else{if(T$E!==0||_t!==null&&(_t.flags&128)!==0)for(_t=Tt.child;_t!==null;){if(Nt=Mh(_t),Nt!==null){for(Tt.flags|=128,Ej(Dt,!1),Pt=Nt.updateQueue,Pt!==null&&(Tt.updateQueue=Pt,Tt.flags|=4),Tt.subtreeFlags=0,Pt=Mt,Mt=Tt.child;Mt!==null;)Dt=Mt,_t=Pt,Dt.flags&=14680066,Nt=Dt.alternate,Nt===null?(Dt.childLanes=0,Dt.lanes=_t,Dt.child=null,Dt.subtreeFlags=0,Dt.memoizedProps=null,Dt.memoizedState=null,Dt.updateQueue=null,Dt.dependencies=null,Dt.stateNode=null):(Dt.childLanes=Nt.childLanes,Dt.lanes=Nt.lanes,Dt.child=Nt.child,Dt.subtreeFlags=0,Dt.deletions=null,Dt.memoizedProps=Nt.memoizedProps,Dt.memoizedState=Nt.memoizedState,Dt.updateQueue=Nt.updateQueue,Dt.type=Nt.type,_t=Nt.dependencies,Dt.dependencies=_t===null?null:{lanes:_t.lanes,firstContext:_t.firstContext}),Mt=Mt.sibling;return G$r(M$R,M$R.current&1|2),Tt.child}_t=_t.sibling}Dt.tail!==null&&B$u()>Hj&&(Tt.flags|=128,Pt=!0,Ej(Dt,!1),Tt.lanes=4194304)}else{if(!Pt)if(_t=Mh(Nt),_t!==null){if(Tt.flags|=128,Pt=!0,Mt=_t.updateQueue,Mt!==null&&(Tt.updateQueue=Mt,Tt.flags|=4),Ej(Dt,!0),Dt.tail===null&&Dt.tailMode==="hidden"&&!Nt.alternate&&!I$G)return S$S(Tt),null}else 2*B$u()-Dt.renderingStartTime>Hj&&Mt!==1073741824&&(Tt.flags|=128,Pt=!0,Ej(Dt,!1),Tt.lanes=4194304);Dt.isBackwards?(Nt.sibling=Tt.child,Tt.child=Nt):(Mt=Dt.last,Mt!==null?Mt.sibling=Nt:Tt.child=Nt,Dt.last=Nt)}return Dt.tail!==null?(Tt=Dt.tail,Dt.rendering=Tt,Dt.tail=Tt.sibling,Dt.renderingStartTime=B$u(),Tt.sibling=null,Mt=M$R.current,G$r(M$R,Pt?Mt&1|2:Mt&1),Tt):(S$S(Tt),null);case 22:case 23:return Ij(),Pt=Tt.memoizedState!==null,_t!==null&&_t.memoizedState!==null!==Pt&&(Tt.flags|=8192),Pt&&(Tt.mode&1)!==0?(gj&1073741824)!==0&&(S$S(Tt),Tt.subtreeFlags&6&&(Tt.flags|=8192)):S$S(Tt),null;case 24:return null;case 25:return null}throw Error(p$3I(156,Tt.tag))}function Jj(_t,Tt){switch(wg(Tt),Tt.tag){case 1:return Zf(Tt.type)&&$f(),_t=Tt.flags,_t&65536?(Tt.flags=_t&-65537|128,Tt):null;case 3:return Jh(),E$N(Wf),E$N(H$k),Oh(),_t=Tt.flags,(_t&65536)!==0&&(_t&128)===0?(Tt.flags=_t&-65537|128,Tt):null;case 5:return Lh(Tt),null;case 13:if(E$N(M$R),_t=Tt.memoizedState,_t!==null&&_t.dehydrated!==null){if(Tt.alternate===null)throw Error(p$3I(340));Ig()}return _t=Tt.flags,_t&65536?(Tt.flags=_t&-65537|128,Tt):null;case 19:return E$N(M$R),null;case 4:return Jh(),null;case 10:return Rg(Tt.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$y=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$r=null;function Mj(_t,Tt){var Mt=_t.ref;if(Mt!==null)if(typeof Mt=="function")try{Mt(null)}catch(Pt){W$d(_t,Tt,Pt)}else Mt.current=null}function Nj(_t,Tt,Mt){try{Mt()}catch(Pt){W$d(_t,Tt,Pt)}}var Oj=!1;function Pj(_t,Tt){if(Cf=dd,_t=Me$2(),Ne$3(_t)){if("selectionStart"in _t)var Mt={start:_t.selectionStart,end:_t.selectionEnd};else e:{Mt=(Mt=_t.ownerDocument)&&Mt.defaultView||window;var Pt=Mt.getSelection&&Mt.getSelection();if(Pt&&Pt.rangeCount!==0){Mt=Pt.anchorNode;var Ft=Pt.anchorOffset,Dt=Pt.focusNode;Pt=Pt.focusOffset;try{Mt.nodeType,Dt.nodeType}catch{Mt=null;break e}var Nt=0,Vt=-1,zt=-1,Xt=0,Ht=0,Wt=_t,Qt=null;t:for(;;){for(var Zt;Wt!==Mt||Ft!==0&&Wt.nodeType!==3||(Vt=Nt+Ft),Wt!==Dt||Pt!==0&&Wt.nodeType!==3||(zt=Nt+Pt),Wt.nodeType===3&&(Nt+=Wt.nodeValue.length),(Zt=Wt.firstChild)!==null;)Qt=Wt,Wt=Zt;for(;;){if(Wt===_t)break t;if(Qt===Mt&&++Xt===Ft&&(Vt=Nt),Qt===Dt&&++Ht===Pt&&(zt=Nt),(Zt=Wt.nextSibling)!==null)break;Wt=Qt,Qt=Wt.parentNode}Wt=Zt}Mt=Vt===-1||zt===-1?null:{start:Vt,end:zt}}else Mt=null}Mt=Mt||{start:0,end:0}}else Mt=null;for(Df={focusedElem:_t,selectionRange:Mt},dd=!1,V$r=Tt;V$r!==null;)if(Tt=V$r,_t=Tt.child,(Tt.subtreeFlags&1028)!==0&&_t!==null)_t.return=Tt,V$r=_t;else for(;V$r!==null;){Tt=V$r;try{var Kt=Tt.alternate;if((Tt.flags&1024)!==0)switch(Tt.tag){case 0:case 11:case 15:break;case 1:if(Kt!==null){var er=Kt.memoizedProps,Yt=Kt.memoizedState,rr=Tt.stateNode,ir=rr.getSnapshotBeforeUpdate(Tt.elementType===Tt.type?er:Lg(Tt.type,er),Yt);rr.__reactInternalSnapshotBeforeUpdate=ir}break;case 3:var nr=Tt.stateNode.containerInfo;nr.nodeType===1?nr.textContent="":nr.nodeType===9&&nr.documentElement&&nr.removeChild(nr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3I(163))}}catch(ar){W$d(Tt,Tt.return,ar)}if(_t=Tt.sibling,_t!==null){_t.return=Tt.return,V$r=_t;break}V$r=Tt.return}return Kt=Oj,Oj=!1,Kt}function Qj(_t,Tt,Mt){var Pt=Tt.updateQueue;if(Pt=Pt!==null?Pt.lastEffect:null,Pt!==null){var Ft=Pt=Pt.next;do{if((Ft.tag&_t)===_t){var Dt=Ft.destroy;Ft.destroy=void 0,Dt!==void 0&&Nj(Tt,Mt,Dt)}Ft=Ft.next}while(Ft!==Pt)}}function Rj(_t,Tt){if(Tt=Tt.updateQueue,Tt=Tt!==null?Tt.lastEffect:null,Tt!==null){var Mt=Tt=Tt.next;do{if((Mt.tag&_t)===_t){var Pt=Mt.create;Mt.destroy=Pt()}Mt=Mt.next}while(Mt!==Tt)}}function Sj(_t){var Tt=_t.ref;if(Tt!==null){var Mt=_t.stateNode;switch(_t.tag){case 5:_t=Mt;break;default:_t=Mt}typeof Tt=="function"?Tt(_t):Tt.current=_t}}function Tj(_t){var Tt=_t.alternate;Tt!==null&&(_t.alternate=null,Tj(Tt)),_t.child=null,_t.deletions=null,_t.sibling=null,_t.tag===5&&(Tt=_t.stateNode,Tt!==null&&(delete Tt[Of],delete Tt[Pf],delete Tt[of],delete Tt[Qf],delete Tt[Rf])),_t.stateNode=null,_t.return=null,_t.dependencies=null,_t.memoizedProps=null,_t.memoizedState=null,_t.pendingProps=null,_t.stateNode=null,_t.updateQueue=null}function Uj(_t){return _t.tag===5||_t.tag===3||_t.tag===4}function Vj(_t){e:for(;;){for(;_t.sibling===null;){if(_t.return===null||Uj(_t.return))return null;_t=_t.return}for(_t.sibling.return=_t.return,_t=_t.sibling;_t.tag!==5&&_t.tag!==6&&_t.tag!==18;){if(_t.flags&2||_t.child===null||_t.tag===4)continue e;_t.child.return=_t,_t=_t.child}if(!(_t.flags&2))return _t.stateNode}}function Wj(_t,Tt,Mt){var Pt=_t.tag;if(Pt===5||Pt===6)_t=_t.stateNode,Tt?Mt.nodeType===8?Mt.parentNode.insertBefore(_t,Tt):Mt.insertBefore(_t,Tt):(Mt.nodeType===8?(Tt=Mt.parentNode,Tt.insertBefore(_t,Mt)):(Tt=Mt,Tt.appendChild(_t)),Mt=Mt._reactRootContainer,Mt!=null||Tt.onclick!==null||(Tt.onclick=Bf));else if(Pt!==4&&(_t=_t.child,_t!==null))for(Wj(_t,Tt,Mt),_t=_t.sibling;_t!==null;)Wj(_t,Tt,Mt),_t=_t.sibling}function Xj(_t,Tt,Mt){var Pt=_t.tag;if(Pt===5||Pt===6)_t=_t.stateNode,Tt?Mt.insertBefore(_t,Tt):Mt.appendChild(_t);else if(Pt!==4&&(_t=_t.child,_t!==null))for(Xj(_t,Tt,Mt),_t=_t.sibling;_t!==null;)Xj(_t,Tt,Mt),_t=_t.sibling}var X$d=null,Yj=!1;function Zj(_t,Tt,Mt){for(Mt=Mt.child;Mt!==null;)ak(_t,Tt,Mt),Mt=Mt.sibling}function ak(_t,Tt,Mt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,Mt)}catch{}switch(Mt.tag){case 5:U$y||Mj(Mt,Tt);case 6:var Pt=X$d,Ft=Yj;X$d=null,Zj(_t,Tt,Mt),X$d=Pt,Yj=Ft,X$d!==null&&(Yj?(_t=X$d,Mt=Mt.stateNode,_t.nodeType===8?_t.parentNode.removeChild(Mt):_t.removeChild(Mt)):X$d.removeChild(Mt.stateNode));break;case 18:X$d!==null&&(Yj?(_t=X$d,Mt=Mt.stateNode,_t.nodeType===8?Kf(_t.parentNode,Mt):_t.nodeType===1&&Kf(_t,Mt),bd(_t)):Kf(X$d,Mt.stateNode));break;case 4:Pt=X$d,Ft=Yj,X$d=Mt.stateNode.containerInfo,Yj=!0,Zj(_t,Tt,Mt),X$d=Pt,Yj=Ft;break;case 0:case 11:case 14:case 15:if(!U$y&&(Pt=Mt.updateQueue,Pt!==null&&(Pt=Pt.lastEffect,Pt!==null))){Ft=Pt=Pt.next;do{var Dt=Ft,Nt=Dt.destroy;Dt=Dt.tag,Nt!==void 0&&((Dt&2)!==0||(Dt&4)!==0)&&Nj(Mt,Tt,Nt),Ft=Ft.next}while(Ft!==Pt)}Zj(_t,Tt,Mt);break;case 1:if(!U$y&&(Mj(Mt,Tt),Pt=Mt.stateNode,typeof Pt.componentWillUnmount=="function"))try{Pt.props=Mt.memoizedProps,Pt.state=Mt.memoizedState,Pt.componentWillUnmount()}catch(Vt){W$d(Mt,Tt,Vt)}Zj(_t,Tt,Mt);break;case 21:Zj(_t,Tt,Mt);break;case 22:Mt.mode&1?(U$y=(Pt=U$y)||Mt.memoizedState!==null,Zj(_t,Tt,Mt),U$y=Pt):Zj(_t,Tt,Mt);break;default:Zj(_t,Tt,Mt)}}function bk(_t){var Tt=_t.updateQueue;if(Tt!==null){_t.updateQueue=null;var Mt=_t.stateNode;Mt===null&&(Mt=_t.stateNode=new Lj),Tt.forEach(function(Pt){var Ft=ck.bind(null,_t,Pt);Mt.has(Pt)||(Mt.add(Pt),Pt.then(Ft,Ft))})}}function dk(_t,Tt){var Mt=Tt.deletions;if(Mt!==null)for(var Pt=0;Pt<Mt.length;Pt++){var Ft=Mt[Pt];try{var Dt=_t,Nt=Tt,Vt=Nt;e:for(;Vt!==null;){switch(Vt.tag){case 5:X$d=Vt.stateNode,Yj=!1;break e;case 3:X$d=Vt.stateNode.containerInfo,Yj=!0;break e;case 4:X$d=Vt.stateNode.containerInfo,Yj=!0;break e}Vt=Vt.return}if(X$d===null)throw Error(p$3I(160));ak(Dt,Nt,Ft),X$d=null,Yj=!1;var zt=Ft.alternate;zt!==null&&(zt.return=null),Ft.return=null}catch(Xt){W$d(Ft,Tt,Xt)}}if(Tt.subtreeFlags&12854)for(Tt=Tt.child;Tt!==null;)ek(Tt,_t),Tt=Tt.sibling}function ek(_t,Tt){var Mt=_t.alternate,Pt=_t.flags;switch(_t.tag){case 0:case 11:case 14:case 15:if(dk(Tt,_t),fk(_t),Pt&4){try{Qj(3,_t,_t.return),Rj(3,_t)}catch(er){W$d(_t,_t.return,er)}try{Qj(5,_t,_t.return)}catch(er){W$d(_t,_t.return,er)}}break;case 1:dk(Tt,_t),fk(_t),Pt&512&&Mt!==null&&Mj(Mt,Mt.return);break;case 5:if(dk(Tt,_t),fk(_t),Pt&512&&Mt!==null&&Mj(Mt,Mt.return),_t.flags&32){var Ft=_t.stateNode;try{ob(Ft,"")}catch(er){W$d(_t,_t.return,er)}}if(Pt&4&&(Ft=_t.stateNode,Ft!=null)){var Dt=_t.memoizedProps,Nt=Mt!==null?Mt.memoizedProps:Dt,Vt=_t.type,zt=_t.updateQueue;if(_t.updateQueue=null,zt!==null)try{Vt==="input"&&Dt.type==="radio"&&Dt.name!=null&&ab(Ft,Dt),vb(Vt,Nt);var Xt=vb(Vt,Dt);for(Nt=0;Nt<zt.length;Nt+=2){var Ht=zt[Nt],Wt=zt[Nt+1];Ht==="style"?sb(Ft,Wt):Ht==="dangerouslySetInnerHTML"?nb(Ft,Wt):Ht==="children"?ob(Ft,Wt):ta(Ft,Ht,Wt,Xt)}switch(Vt){case"input":bb(Ft,Dt);break;case"textarea":ib(Ft,Dt);break;case"select":var Qt=Ft._wrapperState.wasMultiple;Ft._wrapperState.wasMultiple=!!Dt.multiple;var Zt=Dt.value;Zt!=null?fb(Ft,!!Dt.multiple,Zt,!1):Qt!==!!Dt.multiple&&(Dt.defaultValue!=null?fb(Ft,!!Dt.multiple,Dt.defaultValue,!0):fb(Ft,!!Dt.multiple,Dt.multiple?[]:"",!1))}Ft[Pf]=Dt}catch(er){W$d(_t,_t.return,er)}}break;case 6:if(dk(Tt,_t),fk(_t),Pt&4){if(_t.stateNode===null)throw Error(p$3I(162));Ft=_t.stateNode,Dt=_t.memoizedProps;try{Ft.nodeValue=Dt}catch(er){W$d(_t,_t.return,er)}}break;case 3:if(dk(Tt,_t),fk(_t),Pt&4&&Mt!==null&&Mt.memoizedState.isDehydrated)try{bd(Tt.containerInfo)}catch(er){W$d(_t,_t.return,er)}break;case 4:dk(Tt,_t),fk(_t);break;case 13:dk(Tt,_t),fk(_t),Ft=_t.child,Ft.flags&8192&&(Dt=Ft.memoizedState!==null,Ft.stateNode.isHidden=Dt,!Dt||Ft.alternate!==null&&Ft.alternate.memoizedState!==null||(gk=B$u())),Pt&4&&bk(_t);break;case 22:if(Ht=Mt!==null&&Mt.memoizedState!==null,_t.mode&1?(U$y=(Xt=U$y)||Ht,dk(Tt,_t),U$y=Xt):dk(Tt,_t),fk(_t),Pt&8192){if(Xt=_t.memoizedState!==null,(_t.stateNode.isHidden=Xt)&&!Ht&&(_t.mode&1)!==0)for(V$r=_t,Ht=_t.child;Ht!==null;){for(Wt=V$r=Ht;V$r!==null;){switch(Qt=V$r,Zt=Qt.child,Qt.tag){case 0:case 11:case 14:case 15:Qj(4,Qt,Qt.return);break;case 1:Mj(Qt,Qt.return);var Kt=Qt.stateNode;if(typeof Kt.componentWillUnmount=="function"){Pt=Qt,Mt=Qt.return;try{Tt=Pt,Kt.props=Tt.memoizedProps,Kt.state=Tt.memoizedState,Kt.componentWillUnmount()}catch(er){W$d(Pt,Mt,er)}}break;case 5:Mj(Qt,Qt.return);break;case 22:if(Qt.memoizedState!==null){hk(Wt);continue}}Zt!==null?(Zt.return=Qt,V$r=Zt):hk(Wt)}Ht=Ht.sibling}e:for(Ht=null,Wt=_t;;){if(Wt.tag===5){if(Ht===null){Ht=Wt;try{Ft=Wt.stateNode,Xt?(Dt=Ft.style,typeof Dt.setProperty=="function"?Dt.setProperty("display","none","important"):Dt.display="none"):(Vt=Wt.stateNode,zt=Wt.memoizedProps.style,Nt=zt!=null&&zt.hasOwnProperty("display")?zt.display:null,Vt.style.display=rb("display",Nt))}catch(er){W$d(_t,_t.return,er)}}}else if(Wt.tag===6){if(Ht===null)try{Wt.stateNode.nodeValue=Xt?"":Wt.memoizedProps}catch(er){W$d(_t,_t.return,er)}}else if((Wt.tag!==22&&Wt.tag!==23||Wt.memoizedState===null||Wt===_t)&&Wt.child!==null){Wt.child.return=Wt,Wt=Wt.child;continue}if(Wt===_t)break e;for(;Wt.sibling===null;){if(Wt.return===null||Wt.return===_t)break e;Ht===Wt&&(Ht=null),Wt=Wt.return}Ht===Wt&&(Ht=null),Wt.sibling.return=Wt.return,Wt=Wt.sibling}}break;case 19:dk(Tt,_t),fk(_t),Pt&4&&bk(_t);break;case 21:break;default:dk(Tt,_t),fk(_t)}}function fk(_t){var Tt=_t.flags;if(Tt&2){try{e:{for(var Mt=_t.return;Mt!==null;){if(Uj(Mt)){var Pt=Mt;break e}Mt=Mt.return}throw Error(p$3I(160))}switch(Pt.tag){case 5:var Ft=Pt.stateNode;Pt.flags&32&&(ob(Ft,""),Pt.flags&=-33);var Dt=Vj(_t);Xj(_t,Dt,Ft);break;case 3:case 4:var Nt=Pt.stateNode.containerInfo,Vt=Vj(_t);Wj(_t,Vt,Nt);break;default:throw Error(p$3I(161))}}catch(zt){W$d(_t,_t.return,zt)}_t.flags&=-3}Tt&4096&&(_t.flags&=-4097)}function ik(_t,Tt,Mt){V$r=_t,jk(_t)}function jk(_t,Tt,Mt){for(var Pt=(_t.mode&1)!==0;V$r!==null;){var Ft=V$r,Dt=Ft.child;if(Ft.tag===22&&Pt){var Nt=Ft.memoizedState!==null||Kj;if(!Nt){var Vt=Ft.alternate,zt=Vt!==null&&Vt.memoizedState!==null||U$y;Vt=Kj;var Xt=U$y;if(Kj=Nt,(U$y=zt)&&!Xt)for(V$r=Ft;V$r!==null;)Nt=V$r,zt=Nt.child,Nt.tag===22&&Nt.memoizedState!==null?kk(Ft):zt!==null?(zt.return=Nt,V$r=zt):kk(Ft);for(;Dt!==null;)V$r=Dt,jk(Dt),Dt=Dt.sibling;V$r=Ft,Kj=Vt,U$y=Xt}lk(_t)}else(Ft.subtreeFlags&8772)!==0&&Dt!==null?(Dt.return=Ft,V$r=Dt):lk(_t)}}function lk(_t){for(;V$r!==null;){var Tt=V$r;if((Tt.flags&8772)!==0){var Mt=Tt.alternate;try{if((Tt.flags&8772)!==0)switch(Tt.tag){case 0:case 11:case 15:U$y||Rj(5,Tt);break;case 1:var Pt=Tt.stateNode;if(Tt.flags&4&&!U$y)if(Mt===null)Pt.componentDidMount();else{var Ft=Tt.elementType===Tt.type?Mt.memoizedProps:Lg(Tt.type,Mt.memoizedProps);Pt.componentDidUpdate(Ft,Mt.memoizedState,Pt.__reactInternalSnapshotBeforeUpdate)}var Dt=Tt.updateQueue;Dt!==null&&ih(Tt,Dt,Pt);break;case 3:var Nt=Tt.updateQueue;if(Nt!==null){if(Mt=null,Tt.child!==null)switch(Tt.child.tag){case 5:Mt=Tt.child.stateNode;break;case 1:Mt=Tt.child.stateNode}ih(Tt,Nt,Mt)}break;case 5:var Vt=Tt.stateNode;if(Mt===null&&Tt.flags&4){Mt=Vt;var zt=Tt.memoizedProps;switch(Tt.type){case"button":case"input":case"select":case"textarea":zt.autoFocus&&Mt.focus();break;case"img":zt.src&&(Mt.src=zt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(Tt.memoizedState===null){var Xt=Tt.alternate;if(Xt!==null){var Ht=Xt.memoizedState;if(Ht!==null){var Wt=Ht.dehydrated;Wt!==null&&bd(Wt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3I(163))}U$y||Tt.flags&512&&Sj(Tt)}catch(Qt){W$d(Tt,Tt.return,Qt)}}if(Tt===_t){V$r=null;break}if(Mt=Tt.sibling,Mt!==null){Mt.return=Tt.return,V$r=Mt;break}V$r=Tt.return}}function hk(_t){for(;V$r!==null;){var Tt=V$r;if(Tt===_t){V$r=null;break}var Mt=Tt.sibling;if(Mt!==null){Mt.return=Tt.return,V$r=Mt;break}V$r=Tt.return}}function kk(_t){for(;V$r!==null;){var Tt=V$r;try{switch(Tt.tag){case 0:case 11:case 15:var Mt=Tt.return;try{Rj(4,Tt)}catch(zt){W$d(Tt,Mt,zt)}break;case 1:var Pt=Tt.stateNode;if(typeof Pt.componentDidMount=="function"){var Ft=Tt.return;try{Pt.componentDidMount()}catch(zt){W$d(Tt,Ft,zt)}}var Dt=Tt.return;try{Sj(Tt)}catch(zt){W$d(Tt,Dt,zt)}break;case 5:var Nt=Tt.return;try{Sj(Tt)}catch(zt){W$d(Tt,Nt,zt)}}}catch(zt){W$d(Tt,Tt.return,zt)}if(Tt===_t){V$r=null;break}var Vt=Tt.sibling;if(Vt!==null){Vt.return=Tt.return,V$r=Vt;break}V$r=Tt.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K$g=0,R$z=null,Y$e=null,Z$d=0,gj=0,fj=Uf(0),T$E=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$z(){return(K$g&6)!==0?B$u():Bk!==-1?Bk:Bk=B$u()}function lh(_t){return(_t.mode&1)===0?1:(K$g&2)!==0&&Z$d!==0?Z$d&-Z$d:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(_t=C$x,_t!==0||(_t=window.event,_t=_t===void 0?16:jd(_t.type)),_t)}function mh(_t,Tt,Mt,Pt){if(50<zk)throw zk=0,Ak=null,Error(p$3I(185));Ac(_t,Mt,Pt),((K$g&2)===0||_t!==R$z)&&(_t===R$z&&((K$g&2)===0&&(rk|=Mt),T$E===4&&Dk(_t,Z$d)),Ek(_t,Pt),Mt===1&&K$g===0&&(Tt.mode&1)===0&&(Hj=B$u()+500,fg&&jg()))}function Ek(_t,Tt){var Mt=_t.callbackNode;wc(_t,Tt);var Pt=uc(_t,_t===R$z?Z$d:0);if(Pt===0)Mt!==null&&bc(Mt),_t.callbackNode=null,_t.callbackPriority=0;else if(Tt=Pt&-Pt,_t.callbackPriority!==Tt){if(Mt!=null&&bc(Mt),Tt===1)_t.tag===0?ig(Fk.bind(null,_t)):hg(Fk.bind(null,_t)),Jf(function(){(K$g&6)===0&&jg()}),Mt=null;else{switch(Dc(Pt)){case 1:Mt=fc;break;case 4:Mt=gc;break;case 16:Mt=hc;break;case 536870912:Mt=jc;break;default:Mt=hc}Mt=Gk(Mt,Hk.bind(null,_t))}_t.callbackPriority=Tt,_t.callbackNode=Mt}}function Hk(_t,Tt){if(Bk=-1,Ck=0,(K$g&6)!==0)throw Error(p$3I(327));var Mt=_t.callbackNode;if(Ik()&&_t.callbackNode!==Mt)return null;var Pt=uc(_t,_t===R$z?Z$d:0);if(Pt===0)return null;if((Pt&30)!==0||(Pt&_t.expiredLanes)!==0||Tt)Tt=Jk(_t,Pt);else{Tt=Pt;var Ft=K$g;K$g|=2;var Dt=Kk();(R$z!==_t||Z$d!==Tt)&&(vk=null,Hj=B$u()+500,Lk(_t,Tt));do try{Mk();break}catch(Vt){Nk(_t,Vt)}while(1);Qg(),nk.current=Dt,K$g=Ft,Y$e!==null?Tt=0:(R$z=null,Z$d=0,Tt=T$E)}if(Tt!==0){if(Tt===2&&(Ft=xc(_t),Ft!==0&&(Pt=Ft,Tt=Ok(_t,Ft))),Tt===1)throw Mt=qk,Lk(_t,0),Dk(_t,Pt),Ek(_t,B$u()),Mt;if(Tt===6)Dk(_t,Pt);else{if(Ft=_t.current.alternate,(Pt&30)===0&&!Pk(Ft)&&(Tt=Jk(_t,Pt),Tt===2&&(Dt=xc(_t),Dt!==0&&(Pt=Dt,Tt=Ok(_t,Dt))),Tt===1))throw Mt=qk,Lk(_t,0),Dk(_t,Pt),Ek(_t,B$u()),Mt;switch(_t.finishedWork=Ft,_t.finishedLanes=Pt,Tt){case 0:case 1:throw Error(p$3I(345));case 2:Qk(_t,uk,vk);break;case 3:if(Dk(_t,Pt),(Pt&130023424)===Pt&&(Tt=gk+500-B$u(),10<Tt)){if(uc(_t,0)!==0)break;if(Ft=_t.suspendedLanes,(Ft&Pt)!==Pt){L$z(),_t.pingedLanes|=_t.suspendedLanes&Ft;break}_t.timeoutHandle=Ff(Qk.bind(null,_t,uk,vk),Tt);break}Qk(_t,uk,vk);break;case 4:if(Dk(_t,Pt),(Pt&4194240)===Pt)break;for(Tt=_t.eventTimes,Ft=-1;0<Pt;){var Nt=31-oc(Pt);Dt=1<<Nt,Nt=Tt[Nt],Nt>Ft&&(Ft=Nt),Pt&=~Dt}if(Pt=Ft,Pt=B$u()-Pt,Pt=(120>Pt?120:480>Pt?480:1080>Pt?1080:1920>Pt?1920:3e3>Pt?3e3:4320>Pt?4320:1960*mk(Pt/1960))-Pt,10<Pt){_t.timeoutHandle=Ff(Qk.bind(null,_t,uk,vk),Pt);break}Qk(_t,uk,vk);break;case 5:Qk(_t,uk,vk);break;default:throw Error(p$3I(329))}}}return Ek(_t,B$u()),_t.callbackNode===Mt?Hk.bind(null,_t):null}function Ok(_t,Tt){var Mt=tk;return _t.current.memoizedState.isDehydrated&&(Lk(_t,Tt).flags|=256),_t=Jk(_t,Tt),_t!==2&&(Tt=uk,uk=Mt,Tt!==null&&Gj(Tt)),_t}function Gj(_t){uk===null?uk=_t:uk.push.apply(uk,_t)}function Pk(_t){for(var Tt=_t;;){if(Tt.flags&16384){var Mt=Tt.updateQueue;if(Mt!==null&&(Mt=Mt.stores,Mt!==null))for(var Pt=0;Pt<Mt.length;Pt++){var Ft=Mt[Pt],Dt=Ft.getSnapshot;Ft=Ft.value;try{if(!He$2(Dt(),Ft))return!1}catch{return!1}}}if(Mt=Tt.child,Tt.subtreeFlags&16384&&Mt!==null)Mt.return=Tt,Tt=Mt;else{if(Tt===_t)break;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===_t)return!0;Tt=Tt.return}Tt.sibling.return=Tt.return,Tt=Tt.sibling}}return!0}function Dk(_t,Tt){for(Tt&=~sk,Tt&=~rk,_t.suspendedLanes|=Tt,_t.pingedLanes&=~Tt,_t=_t.expirationTimes;0<Tt;){var Mt=31-oc(Tt),Pt=1<<Mt;_t[Mt]=-1,Tt&=~Pt}}function Fk(_t){if((K$g&6)!==0)throw Error(p$3I(327));Ik();var Tt=uc(_t,0);if((Tt&1)===0)return Ek(_t,B$u()),null;var Mt=Jk(_t,Tt);if(_t.tag!==0&&Mt===2){var Pt=xc(_t);Pt!==0&&(Tt=Pt,Mt=Ok(_t,Pt))}if(Mt===1)throw Mt=qk,Lk(_t,0),Dk(_t,Tt),Ek(_t,B$u()),Mt;if(Mt===6)throw Error(p$3I(345));return _t.finishedWork=_t.current.alternate,_t.finishedLanes=Tt,Qk(_t,uk,vk),Ek(_t,B$u()),null}function Rk(_t,Tt){var Mt=K$g;K$g|=1;try{return _t(Tt)}finally{K$g=Mt,K$g===0&&(Hj=B$u()+500,fg&&jg())}}function Sk(_t){xk!==null&&xk.tag===0&&(K$g&6)===0&&Ik();var Tt=K$g;K$g|=1;var Mt=pk.transition,Pt=C$x;try{if(pk.transition=null,C$x=1,_t)return _t()}finally{C$x=Pt,pk.transition=Mt,K$g=Tt,(K$g&6)===0&&jg()}}function Ij(){gj=fj.current,E$N(fj)}function Lk(_t,Tt){_t.finishedWork=null,_t.finishedLanes=0;var Mt=_t.timeoutHandle;if(Mt!==-1&&(_t.timeoutHandle=-1,Gf(Mt)),Y$e!==null)for(Mt=Y$e.return;Mt!==null;){var Pt=Mt;switch(wg(Pt),Pt.tag){case 1:Pt=Pt.type.childContextTypes,Pt!=null&&$f();break;case 3:Jh(),E$N(Wf),E$N(H$k),Oh();break;case 5:Lh(Pt);break;case 4:Jh();break;case 13:E$N(M$R);break;case 19:E$N(M$R);break;case 10:Rg(Pt.type._context);break;case 22:case 23:Ij()}Mt=Mt.return}if(R$z=_t,Y$e=_t=wh(_t.current,null),Z$d=gj=Tt,T$E=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(Tt=0;Tt<Wg.length;Tt++)if(Mt=Wg[Tt],Pt=Mt.interleaved,Pt!==null){Mt.interleaved=null;var Ft=Pt.next,Dt=Mt.pending;if(Dt!==null){var Nt=Dt.next;Dt.next=Ft,Pt.next=Nt}Mt.pending=Pt}Wg=null}return _t}function Nk(_t,Tt){do{var Mt=Y$e;try{if(Qg(),Ph.current=ai,Sh){for(var Pt=N$x.memoizedState;Pt!==null;){var Ft=Pt.queue;Ft!==null&&(Ft.pending=null),Pt=Pt.next}Sh=!1}if(Rh=0,P$x=O$B=N$x=null,Th=!1,Uh=0,ok.current=null,Mt===null||Mt.return===null){T$E=1,qk=Tt,Y$e=null;break}e:{var Dt=_t,Nt=Mt.return,Vt=Mt,zt=Tt;if(Tt=Z$d,Vt.flags|=32768,zt!==null&&typeof zt=="object"&&typeof zt.then=="function"){var Xt=zt,Ht=Vt,Wt=Ht.tag;if((Ht.mode&1)===0&&(Wt===0||Wt===11||Wt===15)){var Qt=Ht.alternate;Qt?(Ht.updateQueue=Qt.updateQueue,Ht.memoizedState=Qt.memoizedState,Ht.lanes=Qt.lanes):(Ht.updateQueue=null,Ht.memoizedState=null)}var Zt=Vi(Nt);if(Zt!==null){Zt.flags&=-257,Wi(Zt,Nt,Vt,Dt,Tt),Zt.mode&1&&Ti(Dt,Xt,Tt),Tt=Zt,zt=Xt;var Kt=Tt.updateQueue;if(Kt===null){var er=new Set;er.add(zt),Tt.updateQueue=er}else Kt.add(zt);break e}else{if((Tt&1)===0){Ti(Dt,Xt,Tt),uj();break e}zt=Error(p$3I(426))}}else if(I$G&&Vt.mode&1){var Yt=Vi(Nt);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),Wi(Yt,Nt,Vt,Dt,Tt),Jg(Ki(zt,Vt));break e}}Dt=zt=Ki(zt,Vt),T$E!==4&&(T$E=2),tk===null?tk=[Dt]:tk.push(Dt),Dt=Nt;do{switch(Dt.tag){case 3:Dt.flags|=65536,Tt&=-Tt,Dt.lanes|=Tt;var rr=Oi(Dt,zt,Tt);fh(Dt,rr);break e;case 1:Vt=zt;var ir=Dt.type,nr=Dt.stateNode;if((Dt.flags&128)===0&&(typeof ir.getDerivedStateFromError=="function"||nr!==null&&typeof nr.componentDidCatch=="function"&&(Si===null||!Si.has(nr)))){Dt.flags|=65536,Tt&=-Tt,Dt.lanes|=Tt;var ar=Ri(Dt,Vt,Tt);fh(Dt,ar);break e}}Dt=Dt.return}while(Dt!==null)}Tk(Mt)}catch(or){Tt=or,Y$e===Mt&&Mt!==null&&(Y$e=Mt=Mt.return);continue}break}while(1)}function Kk(){var _t=nk.current;return nk.current=ai,_t===null?ai:_t}function uj(){(T$E===0||T$E===3||T$E===2)&&(T$E=4),R$z===null||(hh&268435455)===0&&(rk&268435455)===0||Dk(R$z,Z$d)}function Jk(_t,Tt){var Mt=K$g;K$g|=2;var Pt=Kk();(R$z!==_t||Z$d!==Tt)&&(vk=null,Lk(_t,Tt));do try{Uk();break}catch(Ft){Nk(_t,Ft)}while(1);if(Qg(),K$g=Mt,nk.current=Pt,Y$e!==null)throw Error(p$3I(261));return R$z=null,Z$d=0,T$E}function Uk(){for(;Y$e!==null;)Vk(Y$e)}function Mk(){for(;Y$e!==null&&!cc();)Vk(Y$e)}function Vk(_t){var Tt=Wk(_t.alternate,_t,gj);_t.memoizedProps=_t.pendingProps,Tt===null?Tk(_t):Y$e=Tt,ok.current=null}function Tk(_t){var Tt=_t;do{var Mt=Tt.alternate;if(_t=Tt.return,(Tt.flags&32768)===0){if(Mt=Fj(Mt,Tt,gj),Mt!==null){Y$e=Mt;return}}else{if(Mt=Jj(Mt,Tt),Mt!==null){Mt.flags&=32767,Y$e=Mt;return}if(_t!==null)_t.flags|=32768,_t.subtreeFlags=0,_t.deletions=null;else{T$E=6,Y$e=null;return}}if(Tt=Tt.sibling,Tt!==null){Y$e=Tt;return}Y$e=Tt=_t}while(Tt!==null);T$E===0&&(T$E=5)}function Qk(_t,Tt,Mt){var Pt=C$x,Ft=pk.transition;try{pk.transition=null,C$x=1,Xk(_t,Tt,Mt,Pt)}finally{pk.transition=Ft,C$x=Pt}return null}function Xk(_t,Tt,Mt,Pt){do Ik();while(xk!==null);if((K$g&6)!==0)throw Error(p$3I(327));Mt=_t.finishedWork;var Ft=_t.finishedLanes;if(Mt===null)return null;if(_t.finishedWork=null,_t.finishedLanes=0,Mt===_t.current)throw Error(p$3I(177));_t.callbackNode=null,_t.callbackPriority=0;var Dt=Mt.lanes|Mt.childLanes;if(Bc(_t,Dt),_t===R$z&&(Y$e=R$z=null,Z$d=0),(Mt.subtreeFlags&2064)===0&&(Mt.flags&2064)===0||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),Dt=(Mt.flags&15990)!==0,(Mt.subtreeFlags&15990)!==0||Dt){Dt=pk.transition,pk.transition=null;var Nt=C$x;C$x=1;var Vt=K$g;K$g|=4,ok.current=null,Pj(_t,Mt),ek(Mt,_t),Oe$1(Df),dd=!!Cf,Df=Cf=null,_t.current=Mt,ik(Mt),dc(),K$g=Vt,C$x=Nt,pk.transition=Dt}else _t.current=Mt;if(wk&&(wk=!1,xk=_t,yk=Ft),Dt=_t.pendingLanes,Dt===0&&(Si=null),mc(Mt.stateNode),Ek(_t,B$u()),Tt!==null)for(Pt=_t.onRecoverableError,Mt=0;Mt<Tt.length;Mt++)Ft=Tt[Mt],Pt(Ft.value,{componentStack:Ft.stack,digest:Ft.digest});if(Pi)throw Pi=!1,_t=Qi,Qi=null,_t;return(yk&1)!==0&&_t.tag!==0&&Ik(),Dt=_t.pendingLanes,(Dt&1)!==0?_t===Ak?zk++:(zk=0,Ak=_t):zk=0,jg(),null}function Ik(){if(xk!==null){var _t=Dc(yk),Tt=pk.transition,Mt=C$x;try{if(pk.transition=null,C$x=16>_t?16:_t,xk===null)var Pt=!1;else{if(_t=xk,xk=null,yk=0,(K$g&6)!==0)throw Error(p$3I(331));var Ft=K$g;for(K$g|=4,V$r=_t.current;V$r!==null;){var Dt=V$r,Nt=Dt.child;if((V$r.flags&16)!==0){var Vt=Dt.deletions;if(Vt!==null){for(var zt=0;zt<Vt.length;zt++){var Xt=Vt[zt];for(V$r=Xt;V$r!==null;){var Ht=V$r;switch(Ht.tag){case 0:case 11:case 15:Qj(8,Ht,Dt)}var Wt=Ht.child;if(Wt!==null)Wt.return=Ht,V$r=Wt;else for(;V$r!==null;){Ht=V$r;var Qt=Ht.sibling,Zt=Ht.return;if(Tj(Ht),Ht===Xt){V$r=null;break}if(Qt!==null){Qt.return=Zt,V$r=Qt;break}V$r=Zt}}}var Kt=Dt.alternate;if(Kt!==null){var er=Kt.child;if(er!==null){Kt.child=null;do{var Yt=er.sibling;er.sibling=null,er=Yt}while(er!==null)}}V$r=Dt}}if((Dt.subtreeFlags&2064)!==0&&Nt!==null)Nt.return=Dt,V$r=Nt;else e:for(;V$r!==null;){if(Dt=V$r,(Dt.flags&2048)!==0)switch(Dt.tag){case 0:case 11:case 15:Qj(9,Dt,Dt.return)}var rr=Dt.sibling;if(rr!==null){rr.return=Dt.return,V$r=rr;break e}V$r=Dt.return}}var ir=_t.current;for(V$r=ir;V$r!==null;){Nt=V$r;var nr=Nt.child;if((Nt.subtreeFlags&2064)!==0&&nr!==null)nr.return=Nt,V$r=nr;else e:for(Nt=ir;V$r!==null;){if(Vt=V$r,(Vt.flags&2048)!==0)try{switch(Vt.tag){case 0:case 11:case 15:Rj(9,Vt)}}catch(or){W$d(Vt,Vt.return,or)}if(Vt===Nt){V$r=null;break e}var ar=Vt.sibling;if(ar!==null){ar.return=Vt.return,V$r=ar;break e}V$r=Vt.return}}if(K$g=Ft,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_t)}catch{}Pt=!0}return Pt}finally{C$x=Mt,pk.transition=Tt}}return!1}function Yk(_t,Tt,Mt){Tt=Ki(Mt,Tt),Tt=Oi(_t,Tt,1),_t=dh(_t,Tt,1),Tt=L$z(),_t!==null&&(Ac(_t,1,Tt),Ek(_t,Tt))}function W$d(_t,Tt,Mt){if(_t.tag===3)Yk(_t,_t,Mt);else for(;Tt!==null;){if(Tt.tag===3){Yk(Tt,_t,Mt);break}else if(Tt.tag===1){var Pt=Tt.stateNode;if(typeof Tt.type.getDerivedStateFromError=="function"||typeof Pt.componentDidCatch=="function"&&(Si===null||!Si.has(Pt))){_t=Ki(Mt,_t),_t=Ri(Tt,_t,1),Tt=dh(Tt,_t,1),_t=L$z(),Tt!==null&&(Ac(Tt,1,_t),Ek(Tt,_t));break}}Tt=Tt.return}}function Ui(_t,Tt,Mt){var Pt=_t.pingCache;Pt!==null&&Pt.delete(Tt),Tt=L$z(),_t.pingedLanes|=_t.suspendedLanes&Mt,R$z===_t&&(Z$d&Mt)===Mt&&(T$E===4||T$E===3&&(Z$d&130023424)===Z$d&&500>B$u()-gk?Lk(_t,0):sk|=Mt),Ek(_t,Tt)}function Zk(_t,Tt){Tt===0&&((_t.mode&1)===0?Tt=1:(Tt=sc,sc<<=1,(sc&130023424)===0&&(sc=4194304)));var Mt=L$z();_t=Zg(_t,Tt),_t!==null&&(Ac(_t,Tt,Mt),Ek(_t,Mt))}function vj(_t){var Tt=_t.memoizedState,Mt=0;Tt!==null&&(Mt=Tt.retryLane),Zk(_t,Mt)}function ck(_t,Tt){var Mt=0;switch(_t.tag){case 13:var Pt=_t.stateNode,Ft=_t.memoizedState;Ft!==null&&(Mt=Ft.retryLane);break;case 19:Pt=_t.stateNode;break;default:throw Error(p$3I(314))}Pt!==null&&Pt.delete(Tt),Zk(_t,Mt)}var Wk;Wk=function(_t,Tt,Mt){if(_t!==null)if(_t.memoizedProps!==Tt.pendingProps||Wf.current)Ug=!0;else{if((_t.lanes&Mt)===0&&(Tt.flags&128)===0)return Ug=!1,zj(_t,Tt,Mt);Ug=(_t.flags&131072)!==0}else Ug=!1,I$G&&(Tt.flags&1048576)!==0&&ug(Tt,ng,Tt.index);switch(Tt.lanes=0,Tt.tag){case 2:var Pt=Tt.type;jj(_t,Tt),_t=Tt.pendingProps;var Ft=Yf(Tt,H$k.current);Tg(Tt,Mt),Ft=Xh(null,Tt,Pt,_t,Ft,Mt);var Dt=bi();return Tt.flags|=1,typeof Ft=="object"&&Ft!==null&&typeof Ft.render=="function"&&Ft.$$typeof===void 0?(Tt.tag=1,Tt.memoizedState=null,Tt.updateQueue=null,Zf(Pt)?(Dt=!0,cg(Tt)):Dt=!1,Tt.memoizedState=Ft.state!==null&&Ft.state!==void 0?Ft.state:null,ah(Tt),Ft.updater=nh,Tt.stateNode=Ft,Ft._reactInternals=Tt,rh(Tt,Pt,_t,Mt),Tt=kj(null,Tt,Pt,!0,Dt,Mt)):(Tt.tag=0,I$G&&Dt&&vg(Tt),Yi(null,Tt,Ft,Mt),Tt=Tt.child),Tt;case 16:Pt=Tt.elementType;e:{switch(jj(_t,Tt),_t=Tt.pendingProps,Ft=Pt._init,Pt=Ft(Pt._payload),Tt.type=Pt,Ft=Tt.tag=$k(Pt),_t=Lg(Pt,_t),Ft){case 0:Tt=dj(null,Tt,Pt,_t,Mt);break e;case 1:Tt=ij(null,Tt,Pt,_t,Mt);break e;case 11:Tt=Zi(null,Tt,Pt,_t,Mt);break e;case 14:Tt=aj(null,Tt,Pt,Lg(Pt.type,_t),Mt);break e}throw Error(p$3I(306,Pt,""))}return Tt;case 0:return Pt=Tt.type,Ft=Tt.pendingProps,Ft=Tt.elementType===Pt?Ft:Lg(Pt,Ft),dj(_t,Tt,Pt,Ft,Mt);case 1:return Pt=Tt.type,Ft=Tt.pendingProps,Ft=Tt.elementType===Pt?Ft:Lg(Pt,Ft),ij(_t,Tt,Pt,Ft,Mt);case 3:e:{if(lj(Tt),_t===null)throw Error(p$3I(387));Pt=Tt.pendingProps,Dt=Tt.memoizedState,Ft=Dt.element,bh(_t,Tt),gh(Tt,Pt,null,Mt);var Nt=Tt.memoizedState;if(Pt=Nt.element,Dt.isDehydrated)if(Dt={element:Pt,isDehydrated:!1,cache:Nt.cache,pendingSuspenseBoundaries:Nt.pendingSuspenseBoundaries,transitions:Nt.transitions},Tt.updateQueue.baseState=Dt,Tt.memoizedState=Dt,Tt.flags&256){Ft=Ki(Error(p$3I(423)),Tt),Tt=mj(_t,Tt,Pt,Mt,Ft);break e}else if(Pt!==Ft){Ft=Ki(Error(p$3I(424)),Tt),Tt=mj(_t,Tt,Pt,Mt,Ft);break e}else for(yg=Lf(Tt.stateNode.containerInfo.firstChild),xg=Tt,I$G=!0,zg=null,Mt=Ch(Tt,null,Pt,Mt),Tt.child=Mt;Mt;)Mt.flags=Mt.flags&-3|4096,Mt=Mt.sibling;else{if(Ig(),Pt===Ft){Tt=$i(_t,Tt,Mt);break e}Yi(_t,Tt,Pt,Mt)}Tt=Tt.child}return Tt;case 5:return Kh(Tt),_t===null&&Eg(Tt),Pt=Tt.type,Ft=Tt.pendingProps,Dt=_t!==null?_t.memoizedProps:null,Nt=Ft.children,Ef(Pt,Ft)?Nt=null:Dt!==null&&Ef(Pt,Dt)&&(Tt.flags|=32),hj(_t,Tt),Yi(_t,Tt,Nt,Mt),Tt.child;case 6:return _t===null&&Eg(Tt),null;case 13:return pj(_t,Tt,Mt);case 4:return Ih(Tt,Tt.stateNode.containerInfo),Pt=Tt.pendingProps,_t===null?Tt.child=Bh(Tt,null,Pt,Mt):Yi(_t,Tt,Pt,Mt),Tt.child;case 11:return Pt=Tt.type,Ft=Tt.pendingProps,Ft=Tt.elementType===Pt?Ft:Lg(Pt,Ft),Zi(_t,Tt,Pt,Ft,Mt);case 7:return Yi(_t,Tt,Tt.pendingProps,Mt),Tt.child;case 8:return Yi(_t,Tt,Tt.pendingProps.children,Mt),Tt.child;case 12:return Yi(_t,Tt,Tt.pendingProps.children,Mt),Tt.child;case 10:e:{if(Pt=Tt.type._context,Ft=Tt.pendingProps,Dt=Tt.memoizedProps,Nt=Ft.value,G$r(Mg,Pt._currentValue),Pt._currentValue=Nt,Dt!==null)if(He$2(Dt.value,Nt)){if(Dt.children===Ft.children&&!Wf.current){Tt=$i(_t,Tt,Mt);break e}}else for(Dt=Tt.child,Dt!==null&&(Dt.return=Tt);Dt!==null;){var Vt=Dt.dependencies;if(Vt!==null){Nt=Dt.child;for(var zt=Vt.firstContext;zt!==null;){if(zt.context===Pt){if(Dt.tag===1){zt=ch(-1,Mt&-Mt),zt.tag=2;var Xt=Dt.updateQueue;if(Xt!==null){Xt=Xt.shared;var Ht=Xt.pending;Ht===null?zt.next=zt:(zt.next=Ht.next,Ht.next=zt),Xt.pending=zt}}Dt.lanes|=Mt,zt=Dt.alternate,zt!==null&&(zt.lanes|=Mt),Sg(Dt.return,Mt,Tt),Vt.lanes|=Mt;break}zt=zt.next}}else if(Dt.tag===10)Nt=Dt.type===Tt.type?null:Dt.child;else if(Dt.tag===18){if(Nt=Dt.return,Nt===null)throw Error(p$3I(341));Nt.lanes|=Mt,Vt=Nt.alternate,Vt!==null&&(Vt.lanes|=Mt),Sg(Nt,Mt,Tt),Nt=Dt.sibling}else Nt=Dt.child;if(Nt!==null)Nt.return=Dt;else for(Nt=Dt;Nt!==null;){if(Nt===Tt){Nt=null;break}if(Dt=Nt.sibling,Dt!==null){Dt.return=Nt.return,Nt=Dt;break}Nt=Nt.return}Dt=Nt}Yi(_t,Tt,Ft.children,Mt),Tt=Tt.child}return Tt;case 9:return Ft=Tt.type,Pt=Tt.pendingProps.children,Tg(Tt,Mt),Ft=Vg(Ft),Pt=Pt(Ft),Tt.flags|=1,Yi(_t,Tt,Pt,Mt),Tt.child;case 14:return Pt=Tt.type,Ft=Lg(Pt,Tt.pendingProps),Ft=Lg(Pt.type,Ft),aj(_t,Tt,Pt,Ft,Mt);case 15:return cj(_t,Tt,Tt.type,Tt.pendingProps,Mt);case 17:return Pt=Tt.type,Ft=Tt.pendingProps,Ft=Tt.elementType===Pt?Ft:Lg(Pt,Ft),jj(_t,Tt),Tt.tag=1,Zf(Pt)?(_t=!0,cg(Tt)):_t=!1,Tg(Tt,Mt),ph(Tt,Pt,Ft),rh(Tt,Pt,Ft,Mt),kj(null,Tt,Pt,!0,_t,Mt);case 19:return yj(_t,Tt,Mt);case 22:return ej(_t,Tt,Mt)}throw Error(p$3I(156,Tt.tag))};function Gk(_t,Tt){return ac(_t,Tt)}function al(_t,Tt,Mt,Pt){this.tag=_t,this.key=Mt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=Tt,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Pt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_t,Tt,Mt,Pt){return new al(_t,Tt,Mt,Pt)}function bj(_t){return _t=_t.prototype,!(!_t||!_t.isReactComponent)}function $k(_t){if(typeof _t=="function")return bj(_t)?1:0;if(_t!=null){if(_t=_t.$$typeof,_t===Da)return 11;if(_t===Ga)return 14}return 2}function wh(_t,Tt){var Mt=_t.alternate;return Mt===null?(Mt=Bg(_t.tag,Tt,_t.key,_t.mode),Mt.elementType=_t.elementType,Mt.type=_t.type,Mt.stateNode=_t.stateNode,Mt.alternate=_t,_t.alternate=Mt):(Mt.pendingProps=Tt,Mt.type=_t.type,Mt.flags=0,Mt.subtreeFlags=0,Mt.deletions=null),Mt.flags=_t.flags&14680064,Mt.childLanes=_t.childLanes,Mt.lanes=_t.lanes,Mt.child=_t.child,Mt.memoizedProps=_t.memoizedProps,Mt.memoizedState=_t.memoizedState,Mt.updateQueue=_t.updateQueue,Tt=_t.dependencies,Mt.dependencies=Tt===null?null:{lanes:Tt.lanes,firstContext:Tt.firstContext},Mt.sibling=_t.sibling,Mt.index=_t.index,Mt.ref=_t.ref,Mt}function yh(_t,Tt,Mt,Pt,Ft,Dt){var Nt=2;if(Pt=_t,typeof _t=="function")bj(_t)&&(Nt=1);else if(typeof _t=="string")Nt=5;else e:switch(_t){case ya:return Ah(Mt.children,Ft,Dt,Tt);case za:Nt=8,Ft|=8;break;case Aa:return _t=Bg(12,Mt,Tt,Ft|2),_t.elementType=Aa,_t.lanes=Dt,_t;case Ea:return _t=Bg(13,Mt,Tt,Ft),_t.elementType=Ea,_t.lanes=Dt,_t;case Fa:return _t=Bg(19,Mt,Tt,Ft),_t.elementType=Fa,_t.lanes=Dt,_t;case Ia:return qj(Mt,Ft,Dt,Tt);default:if(typeof _t=="object"&&_t!==null)switch(_t.$$typeof){case Ba:Nt=10;break e;case Ca:Nt=9;break e;case Da:Nt=11;break e;case Ga:Nt=14;break e;case Ha:Nt=16,Pt=null;break e}throw Error(p$3I(130,_t==null?_t:typeof _t,""))}return Tt=Bg(Nt,Mt,Tt,Ft),Tt.elementType=_t,Tt.type=Pt,Tt.lanes=Dt,Tt}function Ah(_t,Tt,Mt,Pt){return _t=Bg(7,_t,Pt,Tt),_t.lanes=Mt,_t}function qj(_t,Tt,Mt,Pt){return _t=Bg(22,_t,Pt,Tt),_t.elementType=Ia,_t.lanes=Mt,_t.stateNode={isHidden:!1},_t}function xh(_t,Tt,Mt){return _t=Bg(6,_t,null,Tt),_t.lanes=Mt,_t}function zh(_t,Tt,Mt){return Tt=Bg(4,_t.children!==null?_t.children:[],_t.key,Tt),Tt.lanes=Mt,Tt.stateNode={containerInfo:_t.containerInfo,pendingChildren:null,implementation:_t.implementation},Tt}function bl(_t,Tt,Mt,Pt,Ft){this.tag=Tt,this.containerInfo=_t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=Pt,this.onRecoverableError=Ft,this.mutableSourceEagerHydrationData=null}function cl(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt){return _t=new bl(_t,Tt,Mt,Vt,zt),Tt===1?(Tt=1,Dt===!0&&(Tt|=8)):Tt=0,Dt=Bg(3,null,null,Tt),_t.current=Dt,Dt.stateNode=_t,Dt.memoizedState={element:Pt,isDehydrated:Mt,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(Dt),_t}function dl(_t,Tt,Mt){var Pt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:Pt==null?null:""+Pt,children:_t,containerInfo:Tt,implementation:Mt}}function el(_t){if(!_t)return Vf;_t=_t._reactInternals;e:{if(Vb(_t)!==_t||_t.tag!==1)throw Error(p$3I(170));var Tt=_t;do{switch(Tt.tag){case 3:Tt=Tt.stateNode.context;break e;case 1:if(Zf(Tt.type)){Tt=Tt.stateNode.__reactInternalMemoizedMergedChildContext;break e}}Tt=Tt.return}while(Tt!==null);throw Error(p$3I(171))}if(_t.tag===1){var Mt=_t.type;if(Zf(Mt))return bg(_t,Mt,Tt)}return Tt}function fl(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt){return _t=cl(Mt,Pt,!0,_t,Ft,Dt,Nt,Vt,zt),_t.context=el(null),Mt=_t.current,Pt=L$z(),Ft=lh(Mt),Dt=ch(Pt,Ft),Dt.callback=Tt!=null?Tt:null,dh(Mt,Dt,Ft),_t.current.lanes=Ft,Ac(_t,Ft,Pt),Ek(_t,Pt),_t}function gl(_t,Tt,Mt,Pt){var Ft=Tt.current,Dt=L$z(),Nt=lh(Ft);return Mt=el(Mt),Tt.context===null?Tt.context=Mt:Tt.pendingContext=Mt,Tt=ch(Dt,Nt),Tt.payload={element:_t},Pt=Pt===void 0?null:Pt,Pt!==null&&(Tt.callback=Pt),_t=dh(Ft,Tt,Nt),_t!==null&&(mh(_t,Ft,Nt,Dt),eh(_t,Ft,Nt)),Nt}function hl(_t){if(_t=_t.current,!_t.child)return null;switch(_t.child.tag){case 5:return _t.child.stateNode;default:return _t.child.stateNode}}function il(_t,Tt){if(_t=_t.memoizedState,_t!==null&&_t.dehydrated!==null){var Mt=_t.retryLane;_t.retryLane=Mt!==0&&Mt<Tt?Mt:Tt}}function jl(_t,Tt){il(_t,Tt),(_t=_t.alternate)&&il(_t,Tt)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(_t){console.error(_t)};function ml(_t){this._internalRoot=_t}nl.prototype.render=ml.prototype.render=function(_t){var Tt=this._internalRoot;if(Tt===null)throw Error(p$3I(409));gl(_t,Tt,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var _t=this._internalRoot;if(_t!==null){this._internalRoot=null;var Tt=_t.containerInfo;Sk(function(){gl(null,_t,null,null)}),Tt[uf]=null}};function nl(_t){this._internalRoot=_t}nl.prototype.unstable_scheduleHydration=function(_t){if(_t){var Tt=Hc();_t={blockedOn:null,target:_t,priority:Tt};for(var Mt=0;Mt<Qc.length&&Tt!==0&&Tt<Qc[Mt].priority;Mt++);Qc.splice(Mt,0,_t),Mt===0&&Vc(_t)}};function ol(_t){return!(!_t||_t.nodeType!==1&&_t.nodeType!==9&&_t.nodeType!==11)}function pl(_t){return!(!_t||_t.nodeType!==1&&_t.nodeType!==9&&_t.nodeType!==11&&(_t.nodeType!==8||_t.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(_t,Tt,Mt,Pt,Ft){if(Ft){if(typeof Pt=="function"){var Dt=Pt;Pt=function(){var Xt=hl(Nt);Dt.call(Xt)}}var Nt=fl(Tt,Pt,_t,0,null,!1,!1,"",ql);return _t._reactRootContainer=Nt,_t[uf]=Nt.current,sf(_t.nodeType===8?_t.parentNode:_t),Sk(),Nt}for(;Ft=_t.lastChild;)_t.removeChild(Ft);if(typeof Pt=="function"){var Vt=Pt;Pt=function(){var Xt=hl(zt);Vt.call(Xt)}}var zt=cl(_t,0,!1,null,null,!1,!1,"",ql);return _t._reactRootContainer=zt,_t[uf]=zt.current,sf(_t.nodeType===8?_t.parentNode:_t),Sk(function(){gl(Tt,zt,Mt,Pt)}),zt}function sl(_t,Tt,Mt,Pt,Ft){var Dt=Mt._reactRootContainer;if(Dt){var Nt=Dt;if(typeof Ft=="function"){var Vt=Ft;Ft=function(){var zt=hl(Nt);Vt.call(zt)}}gl(Tt,Nt,_t,Ft)}else Nt=rl(Mt,Tt,_t,Ft,Pt);return hl(Nt)}Ec=function(_t){switch(_t.tag){case 3:var Tt=_t.stateNode;if(Tt.current.memoizedState.isDehydrated){var Mt=tc(Tt.pendingLanes);Mt!==0&&(Cc(Tt,Mt|1),Ek(Tt,B$u()),(K$g&6)===0&&(Hj=B$u()+500,jg()))}break;case 13:Sk(function(){var Pt=Zg(_t,1);if(Pt!==null){var Ft=L$z();mh(Pt,_t,1,Ft)}}),jl(_t,1)}};Fc=function(_t){if(_t.tag===13){var Tt=Zg(_t,134217728);if(Tt!==null){var Mt=L$z();mh(Tt,_t,134217728,Mt)}jl(_t,134217728)}};Gc=function(_t){if(_t.tag===13){var Tt=lh(_t),Mt=Zg(_t,Tt);if(Mt!==null){var Pt=L$z();mh(Mt,_t,Tt,Pt)}jl(_t,Tt)}};Hc=function(){return C$x};Ic=function(_t,Tt){var Mt=C$x;try{return C$x=_t,Tt()}finally{C$x=Mt}};yb=function(_t,Tt,Mt){switch(Tt){case"input":if(bb(_t,Mt),Tt=Mt.name,Mt.type==="radio"&&Tt!=null){for(Mt=_t;Mt.parentNode;)Mt=Mt.parentNode;for(Mt=Mt.querySelectorAll("input[name="+JSON.stringify(""+Tt)+'][type="radio"]'),Tt=0;Tt<Mt.length;Tt++){var Pt=Mt[Tt];if(Pt!==_t&&Pt.form===_t.form){var Ft=Db(Pt);if(!Ft)throw Error(p$3I(90));Wa(Pt),bb(Pt,Ft)}}}break;case"textarea":ib(_t,Mt);break;case"select":Tt=Mt.value,Tt!=null&&fb(_t,!!Mt.multiple,Tt,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue$7,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_t){return _t=Zb(_t),_t===null?null:_t.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(_t,Tt){var Mt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(Tt))throw Error(p$3I(200));return dl(_t,Tt,null,Mt)};reactDom_production_min.createRoot=function(_t,Tt){if(!ol(_t))throw Error(p$3I(299));var Mt=!1,Pt="",Ft=ll;return Tt!=null&&(Tt.unstable_strictMode===!0&&(Mt=!0),Tt.identifierPrefix!==void 0&&(Pt=Tt.identifierPrefix),Tt.onRecoverableError!==void 0&&(Ft=Tt.onRecoverableError)),Tt=cl(_t,1,!1,null,null,Mt,!1,Pt,Ft),_t[uf]=Tt.current,sf(_t.nodeType===8?_t.parentNode:_t),new ml(Tt)};reactDom_production_min.findDOMNode=function(_t){if(_t==null)return null;if(_t.nodeType===1)return _t;var Tt=_t._reactInternals;if(Tt===void 0)throw typeof _t.render=="function"?Error(p$3I(188)):(_t=Object.keys(_t).join(","),Error(p$3I(268,_t)));return _t=Zb(Tt),_t=_t===null?null:_t.stateNode,_t};reactDom_production_min.flushSync=function(_t){return Sk(_t)};reactDom_production_min.hydrate=function(_t,Tt,Mt){if(!pl(Tt))throw Error(p$3I(200));return sl(null,_t,Tt,!0,Mt)};reactDom_production_min.hydrateRoot=function(_t,Tt,Mt){if(!ol(_t))throw Error(p$3I(405));var Pt=Mt!=null&&Mt.hydratedSources||null,Ft=!1,Dt="",Nt=ll;if(Mt!=null&&(Mt.unstable_strictMode===!0&&(Ft=!0),Mt.identifierPrefix!==void 0&&(Dt=Mt.identifierPrefix),Mt.onRecoverableError!==void 0&&(Nt=Mt.onRecoverableError)),Tt=fl(Tt,null,_t,1,Mt!=null?Mt:null,Ft,!1,Dt,Nt),_t[uf]=Tt.current,sf(_t),Pt)for(_t=0;_t<Pt.length;_t++)Mt=Pt[_t],Ft=Mt._getVersion,Ft=Ft(Mt._source),Tt.mutableSourceEagerHydrationData==null?Tt.mutableSourceEagerHydrationData=[Mt,Ft]:Tt.mutableSourceEagerHydrationData.push(Mt,Ft);return new nl(Tt)};reactDom_production_min.render=function(_t,Tt,Mt){if(!pl(Tt))throw Error(p$3I(200));return sl(null,_t,Tt,!1,Mt)};reactDom_production_min.unmountComponentAtNode=function(_t){if(!pl(_t))throw Error(p$3I(40));return _t._reactRootContainer?(Sk(function(){sl(null,null,_t,!1,function(){_t._reactRootContainer=null,_t[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_t,Tt,Mt,Pt){if(!pl(Mt))throw Error(p$3I(200));if(_t==null||_t._reactInternals===void 0)throw Error(p$3I(38));return sl(_t,Tt,Mt,!1,Pt)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function(_t){function Tt(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Tt)}catch(Mt){console.error(Mt)}}Tt(),_t.exports=reactDom_production_min})(reactDom);var m$2i=reactDom.exports;client.createRoot=m$2i.createRoot,client.hydrateRoot=m$2i.hydrateRoot;function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_t){for(var Tt=1;Tt<arguments.length;Tt++){var Mt=arguments[Tt];for(var Pt in Mt)Object.prototype.hasOwnProperty.call(Mt,Pt)&&(_t[Pt]=Mt[Pt])}return _t},_extends$1.apply(this,arguments)}var Action;(function(_t){_t.Pop="POP",_t.Push="PUSH",_t.Replace="REPLACE"})(Action||(Action={}));var readOnly=function(_t){return _t},BeforeUnloadEventType="beforeunload",PopStateEventType="popstate";function createBrowserHistory(_t){_t===void 0&&(_t={});var Tt=_t,Mt=Tt.window,Pt=Mt===void 0?document.defaultView:Mt,Ft=Pt.history;function Dt(){var dr=Pt.location,hr=dr.pathname,gr=dr.search,pr=dr.hash,mr=Ft.state||{};return[mr.idx,readOnly({pathname:hr,search:gr,hash:pr,state:mr.usr||null,key:mr.key||"default"})]}var Nt=null;function Vt(){if(Nt)Zt.call(Nt),Nt=null;else{var dr=Action.Pop,hr=Dt(),gr=hr[0],pr=hr[1];if(Zt.length){if(gr!=null){var mr=Ht-gr;mr&&(Nt={action:dr,location:pr,retry:function(){or(mr*-1)}},or(mr))}}else ir(dr)}}Pt.addEventListener(PopStateEventType,Vt);var zt=Action.Pop,Xt=Dt(),Ht=Xt[0],Wt=Xt[1],Qt=createEvents(),Zt=createEvents();Ht==null&&(Ht=0,Ft.replaceState(_extends$1({},Ft.state,{idx:Ht}),""));function Kt(dr){return typeof dr=="string"?dr:createPath(dr)}function er(dr,hr){return hr===void 0&&(hr=null),readOnly(_extends$1({pathname:Wt.pathname,hash:"",search:""},typeof dr=="string"?parsePath(dr):dr,{state:hr,key:createKey()}))}function Yt(dr,hr){return[{usr:dr.state,key:dr.key,idx:hr},Kt(dr)]}function rr(dr,hr,gr){return!Zt.length||(Zt.call({action:dr,location:hr,retry:gr}),!1)}function ir(dr){zt=dr;var hr=Dt();Ht=hr[0],Wt=hr[1],Qt.call({action:zt,location:Wt})}function nr(dr,hr){var gr=Action.Push,pr=er(dr,hr);function mr(){nr(dr,hr)}if(rr(gr,pr,mr)){var wr=Yt(pr,Ht+1),br=wr[0],_r=wr[1];try{Ft.pushState(br,"",_r)}catch{Pt.location.assign(_r)}ir(gr)}}function ar(dr,hr){var gr=Action.Replace,pr=er(dr,hr);function mr(){ar(dr,hr)}if(rr(gr,pr,mr)){var wr=Yt(pr,Ht),br=wr[0],_r=wr[1];Ft.replaceState(br,"",_r),ir(gr)}}function or(dr){Ft.go(dr)}var ur={get action(){return zt},get location(){return Wt},createHref:Kt,push:nr,replace:ar,go:or,back:function(){or(-1)},forward:function(){or(1)},listen:function(hr){return Qt.push(hr)},block:function(hr){var gr=Zt.push(hr);return Zt.length===1&&Pt.addEventListener(BeforeUnloadEventType,promptBeforeUnload),function(){gr(),Zt.length||Pt.removeEventListener(BeforeUnloadEventType,promptBeforeUnload)}}};return ur}function promptBeforeUnload(_t){_t.preventDefault(),_t.returnValue=""}function createEvents(){var _t=[];return{get length(){return _t.length},push:function(Mt){return _t.push(Mt),function(){_t=_t.filter(function(Pt){return Pt!==Mt})}},call:function(Mt){_t.forEach(function(Pt){return Pt&&Pt(Mt)})}}}function createKey(){return Math.random().toString(36).substr(2,8)}function createPath(_t){var Tt=_t.pathname,Mt=Tt===void 0?"/":Tt,Pt=_t.search,Ft=Pt===void 0?"":Pt,Dt=_t.hash,Nt=Dt===void 0?"":Dt;return Ft&&Ft!=="?"&&(Mt+=Ft.charAt(0)==="?"?Ft:"?"+Ft),Nt&&Nt!=="#"&&(Mt+=Nt.charAt(0)==="#"?Nt:"#"+Nt),Mt}function parsePath(_t){var Tt={};if(_t){var Mt=_t.indexOf("#");Mt>=0&&(Tt.hash=_t.substr(Mt),_t=_t.substr(0,Mt));var Pt=_t.indexOf("?");Pt>=0&&(Tt.search=_t.substr(Pt),_t=_t.substr(0,Pt)),_t&&(Tt.pathname=_t)}return Tt}/**
 * React Router v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const NavigationContext=react.exports.createContext(null),LocationContext=react.exports.createContext(null),RouteContext=react.exports.createContext({outlet:null,matches:[]});function invariant(_t,Tt){if(!_t)throw new Error(Tt)}function matchRoutes(_t,Tt,Mt){Mt===void 0&&(Mt="/");let Pt=typeof Tt=="string"?parsePath(Tt):Tt,Ft=stripBasename(Pt.pathname||"/",Mt);if(Ft==null)return null;let Dt=flattenRoutes(_t);rankRouteBranches(Dt);let Nt=null;for(let Vt=0;Nt==null&&Vt<Dt.length;++Vt)Nt=matchRouteBranch(Dt[Vt],Ft);return Nt}function flattenRoutes(_t,Tt,Mt,Pt){return Tt===void 0&&(Tt=[]),Mt===void 0&&(Mt=[]),Pt===void 0&&(Pt=""),_t.forEach((Ft,Dt)=>{let Nt={relativePath:Ft.path||"",caseSensitive:Ft.caseSensitive===!0,childrenIndex:Dt,route:Ft};Nt.relativePath.startsWith("/")&&(Nt.relativePath.startsWith(Pt)||invariant(!1),Nt.relativePath=Nt.relativePath.slice(Pt.length));let Vt=joinPaths([Pt,Nt.relativePath]),zt=Mt.concat(Nt);Ft.children&&Ft.children.length>0&&(Ft.index===!0&&invariant(!1),flattenRoutes(Ft.children,Tt,zt,Vt)),!(Ft.path==null&&!Ft.index)&&Tt.push({path:Vt,score:computeScore(Vt,Ft.index),routesMeta:zt})}),Tt}function rankRouteBranches(_t){_t.sort((Tt,Mt)=>Tt.score!==Mt.score?Mt.score-Tt.score:compareIndexes(Tt.routesMeta.map(Pt=>Pt.childrenIndex),Mt.routesMeta.map(Pt=>Pt.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_t=>_t==="*";function computeScore(_t,Tt){let Mt=_t.split("/"),Pt=Mt.length;return Mt.some(isSplat)&&(Pt+=splatPenalty),Tt&&(Pt+=indexRouteValue),Mt.filter(Ft=>!isSplat(Ft)).reduce((Ft,Dt)=>Ft+(paramRe.test(Dt)?dynamicSegmentValue:Dt===""?emptySegmentValue:staticSegmentValue),Pt)}function compareIndexes(_t,Tt){return _t.length===Tt.length&&_t.slice(0,-1).every((Pt,Ft)=>Pt===Tt[Ft])?_t[_t.length-1]-Tt[Tt.length-1]:0}function matchRouteBranch(_t,Tt){let{routesMeta:Mt}=_t,Pt={},Ft="/",Dt=[];for(let Nt=0;Nt<Mt.length;++Nt){let Vt=Mt[Nt],zt=Nt===Mt.length-1,Xt=Ft==="/"?Tt:Tt.slice(Ft.length)||"/",Ht=matchPath({path:Vt.relativePath,caseSensitive:Vt.caseSensitive,end:zt},Xt);if(!Ht)return null;Object.assign(Pt,Ht.params);let Wt=Vt.route;Dt.push({params:Pt,pathname:joinPaths([Ft,Ht.pathname]),pathnameBase:normalizePathname(joinPaths([Ft,Ht.pathnameBase])),route:Wt}),Ht.pathnameBase!=="/"&&(Ft=joinPaths([Ft,Ht.pathnameBase]))}return Dt}function matchPath(_t,Tt){typeof _t=="string"&&(_t={path:_t,caseSensitive:!1,end:!0});let[Mt,Pt]=compilePath(_t.path,_t.caseSensitive,_t.end),Ft=Tt.match(Mt);if(!Ft)return null;let Dt=Ft[0],Nt=Dt.replace(/(.)\/+$/,"$1"),Vt=Ft.slice(1);return{params:Pt.reduce((Xt,Ht,Wt)=>{if(Ht==="*"){let Qt=Vt[Wt]||"";Nt=Dt.slice(0,Dt.length-Qt.length).replace(/(.)\/+$/,"$1")}return Xt[Ht]=safelyDecodeURIComponent(Vt[Wt]||""),Xt},{}),pathname:Dt,pathnameBase:Nt,pattern:_t}}function compilePath(_t,Tt,Mt){Tt===void 0&&(Tt=!1),Mt===void 0&&(Mt=!0);let Pt=[],Ft="^"+_t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(Nt,Vt)=>(Pt.push(Vt),"([^\\/]+)"));return _t.endsWith("*")?(Pt.push("*"),Ft+=_t==="*"||_t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):Ft+=Mt?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)",[new RegExp(Ft,Tt?void 0:"i"),Pt]}function safelyDecodeURIComponent(_t,Tt){try{return decodeURIComponent(_t)}catch{return _t}}function resolvePath(_t,Tt){Tt===void 0&&(Tt="/");let{pathname:Mt,search:Pt="",hash:Ft=""}=typeof _t=="string"?parsePath(_t):_t;return{pathname:Mt?Mt.startsWith("/")?Mt:resolvePathname(Mt,Tt):Tt,search:normalizeSearch(Pt),hash:normalizeHash(Ft)}}function resolvePathname(_t,Tt){let Mt=Tt.replace(/\/+$/,"").split("/");return _t.split("/").forEach(Ft=>{Ft===".."?Mt.length>1&&Mt.pop():Ft!=="."&&Mt.push(Ft)}),Mt.length>1?Mt.join("/"):"/"}function resolveTo(_t,Tt,Mt){let Pt=typeof _t=="string"?parsePath(_t):_t,Ft=_t===""||Pt.pathname===""?"/":Pt.pathname,Dt;if(Ft==null)Dt=Mt;else{let Vt=Tt.length-1;if(Ft.startsWith("..")){let zt=Ft.split("/");for(;zt[0]==="..";)zt.shift(),Vt-=1;Pt.pathname=zt.join("/")}Dt=Vt>=0?Tt[Vt]:"/"}let Nt=resolvePath(Pt,Dt);return Ft&&Ft!=="/"&&Ft.endsWith("/")&&!Nt.pathname.endsWith("/")&&(Nt.pathname+="/"),Nt}function getToPathname(_t){return _t===""||_t.pathname===""?"/":typeof _t=="string"?parsePath(_t).pathname:_t.pathname}function stripBasename(_t,Tt){if(Tt==="/")return _t;if(!_t.toLowerCase().startsWith(Tt.toLowerCase()))return null;let Mt=_t.charAt(Tt.length);return Mt&&Mt!=="/"?null:_t.slice(Tt.length)||"/"}const joinPaths=_t=>_t.join("/").replace(/\/\/+/g,"/"),normalizePathname=_t=>_t.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_t=>!_t||_t==="?"?"":_t.startsWith("?")?_t:"?"+_t,normalizeHash=_t=>!_t||_t==="#"?"":_t.startsWith("#")?_t:"#"+_t;function useHref(_t){useInRouterContext()||invariant(!1);let{basename:Tt,navigator:Mt}=react.exports.useContext(NavigationContext),{hash:Pt,pathname:Ft,search:Dt}=useResolvedPath(_t),Nt=Ft;if(Tt!=="/"){let Vt=getToPathname(_t),zt=Vt!=null&&Vt.endsWith("/");Nt=Ft==="/"?Tt+(zt?"/":""):joinPaths([Tt,Ft])}return Mt.createHref({pathname:Nt,search:Dt,hash:Pt})}function useInRouterContext(){return react.exports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant(!1),react.exports.useContext(LocationContext).location}function useNavigate(){useInRouterContext()||invariant(!1);let{basename:_t,navigator:Tt}=react.exports.useContext(NavigationContext),{matches:Mt}=react.exports.useContext(RouteContext),{pathname:Pt}=useLocation(),Ft=JSON.stringify(Mt.map(Vt=>Vt.pathnameBase)),Dt=react.exports.useRef(!1);return react.exports.useEffect(()=>{Dt.current=!0}),react.exports.useCallback(function(Vt,zt){if(zt===void 0&&(zt={}),!Dt.current)return;if(typeof Vt=="number"){Tt.go(Vt);return}let Xt=resolveTo(Vt,JSON.parse(Ft),Pt);_t!=="/"&&(Xt.pathname=joinPaths([_t,Xt.pathname])),(zt.replace?Tt.replace:Tt.push)(Xt,zt.state)},[_t,Tt,Ft,Pt])}const OutletContext=react.exports.createContext(null);function useOutlet(_t){let Tt=react.exports.useContext(RouteContext).outlet;return Tt&&react.exports.createElement(OutletContext.Provider,{value:_t},Tt)}function useParams(){let{matches:_t}=react.exports.useContext(RouteContext),Tt=_t[_t.length-1];return Tt?Tt.params:{}}function useResolvedPath(_t){let{matches:Tt}=react.exports.useContext(RouteContext),{pathname:Mt}=useLocation(),Pt=JSON.stringify(Tt.map(Ft=>Ft.pathnameBase));return react.exports.useMemo(()=>resolveTo(_t,JSON.parse(Pt),Mt),[_t,Pt,Mt])}function useRoutes(_t,Tt){useInRouterContext()||invariant(!1);let{matches:Mt}=react.exports.useContext(RouteContext),Pt=Mt[Mt.length-1],Ft=Pt?Pt.params:{};Pt&&Pt.pathname;let Dt=Pt?Pt.pathnameBase:"/";Pt&&Pt.route;let Nt=useLocation(),Vt;if(Tt){var zt;let Qt=typeof Tt=="string"?parsePath(Tt):Tt;Dt==="/"||((zt=Qt.pathname)==null?void 0:zt.startsWith(Dt))||invariant(!1),Vt=Qt}else Vt=Nt;let Xt=Vt.pathname||"/",Ht=Dt==="/"?Xt:Xt.slice(Dt.length)||"/",Wt=matchRoutes(_t,{pathname:Ht});return _renderMatches(Wt&&Wt.map(Qt=>Object.assign({},Qt,{params:Object.assign({},Ft,Qt.params),pathname:joinPaths([Dt,Qt.pathname]),pathnameBase:Qt.pathnameBase==="/"?Dt:joinPaths([Dt,Qt.pathnameBase])})),Mt)}function _renderMatches(_t,Tt){return Tt===void 0&&(Tt=[]),_t==null?null:_t.reduceRight((Mt,Pt,Ft)=>react.exports.createElement(RouteContext.Provider,{children:Pt.route.element!==void 0?Pt.route.element:Mt,value:{outlet:Mt,matches:Tt.concat(_t.slice(0,Ft+1))}}),null)}function Outlet(_t){return useOutlet(_t.context)}function Route(_t){invariant(!1)}function Router(_t){let{basename:Tt="/",children:Mt=null,location:Pt,navigationType:Ft=Action.Pop,navigator:Dt,static:Nt=!1}=_t;useInRouterContext()&&invariant(!1);let Vt=normalizePathname(Tt),zt=react.exports.useMemo(()=>({basename:Vt,navigator:Dt,static:Nt}),[Vt,Dt,Nt]);typeof Pt=="string"&&(Pt=parsePath(Pt));let{pathname:Xt="/",search:Ht="",hash:Wt="",state:Qt=null,key:Zt="default"}=Pt,Kt=react.exports.useMemo(()=>{let er=stripBasename(Xt,Vt);return er==null?null:{pathname:er,search:Ht,hash:Wt,state:Qt,key:Zt}},[Vt,Xt,Ht,Wt,Qt,Zt]);return Kt==null?null:react.exports.createElement(NavigationContext.Provider,{value:zt},react.exports.createElement(LocationContext.Provider,{children:Mt,value:{location:Kt,navigationType:Ft}}))}function Routes(_t){let{children:Tt,location:Mt}=_t;return useRoutes(createRoutesFromChildren(Tt),Mt)}function createRoutesFromChildren(_t){let Tt=[];return react.exports.Children.forEach(_t,Mt=>{if(!react.exports.isValidElement(Mt))return;if(Mt.type===react.exports.Fragment){Tt.push.apply(Tt,createRoutesFromChildren(Mt.props.children));return}Mt.type!==Route&&invariant(!1);let Pt={caseSensitive:Mt.props.caseSensitive,element:Mt.props.element,index:Mt.props.index,path:Mt.props.path};Mt.props.children&&(Pt.children=createRoutesFromChildren(Mt.props.children)),Tt.push(Pt)}),Tt}/**
 * React Router DOM v6.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign||function(_t){for(var Tt=1;Tt<arguments.length;Tt++){var Mt=arguments[Tt];for(var Pt in Mt)Object.prototype.hasOwnProperty.call(Mt,Pt)&&(_t[Pt]=Mt[Pt])}return _t},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(_t,Tt){if(_t==null)return{};var Mt={},Pt=Object.keys(_t),Ft,Dt;for(Dt=0;Dt<Pt.length;Dt++)Ft=Pt[Dt],!(Tt.indexOf(Ft)>=0)&&(Mt[Ft]=_t[Ft]);return Mt}const _excluded=["onClick","reloadDocument","replace","state","target","to"];function BrowserRouter(_t){let{basename:Tt,children:Mt,window:Pt}=_t,Ft=react.exports.useRef();Ft.current==null&&(Ft.current=createBrowserHistory({window:Pt}));let Dt=Ft.current,[Nt,Vt]=react.exports.useState({action:Dt.action,location:Dt.location});return react.exports.useLayoutEffect(()=>Dt.listen(Vt),[Dt]),react.exports.createElement(Router,{basename:Tt,children:Mt,location:Nt.location,navigationType:Nt.action,navigator:Dt})}function isModifiedEvent(_t){return!!(_t.metaKey||_t.altKey||_t.ctrlKey||_t.shiftKey)}const Link=react.exports.forwardRef(function(Tt,Mt){let{onClick:Pt,reloadDocument:Ft,replace:Dt=!1,state:Nt,target:Vt,to:zt}=Tt,Xt=_objectWithoutPropertiesLoose(Tt,_excluded),Ht=useHref(zt),Wt=useLinkClickHandler(zt,{replace:Dt,state:Nt,target:Vt});function Qt(Zt){Pt&&Pt(Zt),!Zt.defaultPrevented&&!Ft&&Wt(Zt)}return react.exports.createElement("a",_extends({},Xt,{href:Ht,onClick:Qt,ref:Mt,target:Vt}))});function useLinkClickHandler(_t,Tt){let{target:Mt,replace:Pt,state:Ft}=Tt===void 0?{}:Tt,Dt=useNavigate(),Nt=useLocation(),Vt=useResolvedPath(_t);return react.exports.useCallback(zt=>{if(zt.button===0&&(!Mt||Mt==="_self")&&!isModifiedEvent(zt)){zt.preventDefault();let Xt=!!Pt||createPath(Nt)===createPath(Vt);Dt(_t,{replace:Xt,state:Ft})}},[Nt,Dt,Vt,Pt,Ft,Mt,_t])}const logo="/logodki.svg",bgImage$1="/bg-sketch.png";var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1R=react.exports,k$G=Symbol.for("react.element"),l$2I=Symbol.for("react.fragment"),m$2h=Object.prototype.hasOwnProperty,n$2$=f$1R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3H={key:!0,ref:!0,__self:!0,__source:!0};function q$r(_t,Tt,Mt){var Pt,Ft={},Dt=null,Nt=null;Mt!==void 0&&(Dt=""+Mt),Tt.key!==void 0&&(Dt=""+Tt.key),Tt.ref!==void 0&&(Nt=Tt.ref);for(Pt in Tt)m$2h.call(Tt,Pt)&&!p$3H.hasOwnProperty(Pt)&&(Ft[Pt]=Tt[Pt]);if(_t&&_t.defaultProps)for(Pt in Tt=_t.defaultProps,Tt)Ft[Pt]===void 0&&(Ft[Pt]=Tt[Pt]);return{$$typeof:k$G,type:_t,key:Dt,ref:Nt,props:Ft,_owner:n$2$.current}}reactJsxRuntime_production_min.Fragment=l$2I;reactJsxRuntime_production_min.jsx=q$r;reactJsxRuntime_production_min.jsxs=q$r;(function(_t){_t.exports=reactJsxRuntime_production_min})(jsxRuntime);const Fragment$1=jsxRuntime.exports.Fragment,jsx=jsxRuntime.exports.jsx,jsxs=jsxRuntime.exports.jsxs;var __assign$1=globalThis&&globalThis.__assign||function(){return __assign$1=Object.assign||function(_t){for(var Tt,Mt=1,Pt=arguments.length;Mt<Pt;Mt++){Tt=arguments[Mt];for(var Ft in Tt)Object.prototype.hasOwnProperty.call(Tt,Ft)&&(_t[Ft]=Tt[Ft])}return _t},__assign$1.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(_t,Tt){var Mt={};for(var Pt in _t)Object.prototype.hasOwnProperty.call(_t,Pt)&&Tt.indexOf(Pt)<0&&(Mt[Pt]=_t[Pt]);if(_t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ft=0,Pt=Object.getOwnPropertySymbols(_t);Ft<Pt.length;Ft++)Tt.indexOf(Pt[Ft])<0&&Object.prototype.propertyIsEnumerable.call(_t,Pt[Ft])&&(Mt[Pt[Ft]]=_t[Pt[Ft]]);return Mt};function Tree2Element(_t){return _t&&_t.map(function(Tt,Mt){return React.createElement(Tt.tag,__assign$1({key:Mt},Tt.attr),Tree2Element(Tt.child))})}function GenIcon(_t){return function(Tt){return jsx(IconBase,{...__assign$1({attr:__assign$1({},_t.attr)},Tt),children:Tree2Element(_t.child)})}}function IconBase(_t){var Tt=function(Mt){var Pt=_t.attr,Ft=_t.size,Dt=_t.title,Nt=__rest(_t,["attr","size","title"]),Vt=Ft||Mt.size||"1em",zt;return Mt.className&&(zt=Mt.className),_t.className&&(zt=(zt?zt+" ":"")+_t.className),jsxs("svg",{...__assign$1({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},Mt.attr,Pt,Nt,{className:zt,style:__assign$1(__assign$1({color:_t.color||Mt.color},Mt.style),_t.style),height:Vt,width:Vt,xmlns:"http://www.w3.org/2000/svg"}),children:[Dt&&jsx("title",{children:Dt}),_t.children]})};return IconContext!==void 0?jsx(IconContext.Consumer,{children:function(Mt){return Tt(Mt)}}):Tt(DefaultContext)}function BsCheckLg(_t){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M13.485 1.431a1.473 1.473 0 0 1 2.104 2.062l-7.84 9.801a1.473 1.473 0 0 1-2.12.04L.431 8.138a1.473 1.473 0 0 1 2.084-2.083l4.111 4.112 6.82-8.69a.486.486 0 0 1 .04-.045z"}}]})(_t)}function BsFileEarmarkText(_t){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5z"}},{tag:"path",attr:{d:"M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"}}]})(_t)}function SubmitLayout(){const _t=useParams();return react.exports.useEffect(()=>{console.log(_t.id)},[_t]),jsxs("div",{className:"",children:[jsx("div",{className:"p-3 bg-[#3A5170] flex justify-between items-center",children:jsxs("div",{className:"flex space-x-10",children:[jsx("div",{className:"w-8 h-8",children:jsx("img",{src:logo,alt:"logo dki",className:"object-contain"})}),jsxs("ul",{className:"flex text-gray-200 space-x-5 font-opensans text-sm items-center",children:[jsx("li",{children:jsx(Link,{to:"/",children:"Beranda"})}),jsx("li",{children:jsx(Link,{to:"/submission",children:"Submit Izin"})}),jsx("li",{children:jsx(Link,{to:"#",children:"Tata Cara"})}),jsx("li",{children:jsx(Link,{to:"#",children:"Kontak Kami"})})]})]})}),jsx("div",{className:"border-b-2 h-24 w-full",children:jsxs("ol",{className:"flex items-center space-x-5 justify-center h-full font-poppins text-sm",children:[jsxs("li",{className:"flex items-center space-x-2 stepper-active",children:[jsx("div",{children:jsx(BsCheckLg,{className:"w-3 h-3 text-gray-200"})}),jsx("p",{className:"text-gray-500",children:"Form Pengajuan Izin"})]}),jsxs("li",{className:"flex items-center space-x-2 stepper",children:[jsx("div",{children:"2"}),jsx("p",{className:"text-gray-500",children:"Pilih Persil"})]}),jsxs("li",{className:"flex items-center space-x-2 stepper",children:[jsx("div",{children:"3"}),jsx("p",{className:"text-gray-500",children:"Upload GPA 3D"})]}),jsxs("li",{className:"flex items-center space-x-2 stepper",children:[jsx("div",{children:"4"}),jsx("p",{className:"text-gray-500",children:"Pemeriksaan GPA"})]})]})}),jsx("div",{className:"-z-40 absolute left-0 right-0 w-full bg-gray-100 h-[calc(100vh_-_9.5rem)] overflow-clip",children:jsx("img",{src:bgImage$1,alt:"background",className:" bg-cover bg-center"})}),jsx(Outlet,{})]})}const bgImage="/home-bg.jpeg";function Home(){return jsxs(Fragment$1,{children:[jsx("section",{className:"absolute top-0 left-0 right-0 -z-10 w-full max-h-screen overflow-clip",children:jsx("img",{src:bgImage,alt:"background city",className:"bg-cover bg-center scale-150 w-full h-full"})}),jsx("div",{className:"flex justify-between items-center py-8 px-3",children:jsxs("div",{className:"flex items-center space-x-6",children:[jsx("div",{className:"h-8 w-8",children:jsx("img",{src:logo,alt:"logo dki",className:" object-contain"})}),jsxs("ul",{className:"flex space-x-4 items-center font-poppins text-white",children:[jsx("li",{className:" border-b-2 pb-2",children:jsx(Link,{to:"/",children:"Beranda"})}),jsx("li",{className:"pb-2",children:jsx(Link,{to:"/submission",children:"Submit Izin"})}),jsx("li",{className:"pb-2",children:jsx(Link,{to:"#",children:"Tata Cara"})}),jsx("li",{className:"pb-2",children:jsx(Link,{to:"#",children:"Kontak kami"})})]})]})}),jsx("div",{className:"flex justify-center items-center h-[calc(100vh_-_7rem)]",children:jsx("h2",{className:" font-bold font-poppins text-7xl w-2/3 text-center text-white",children:"Persetujuan Bangunan Gedung"})}),jsx("div",{className:"bg-gradient-to-b from-[#3883ed] to-white/0 inset-0 -z-10 h-1/4"})]})}const main="";let e$2e;function a$32(_t){return typeof e$2e[_t]=="function"?e$2e[_t]=e$2e[_t](globalThis):e$2e[_t]}var Ul,Xl,Hl,Wl;e$2e=((Ul=globalThis.dojoConfig)==null?void 0:Ul.has)||((Xl=globalThis.esriConfig)==null?void 0:Xl.has)?{...(Hl=globalThis.dojoConfig)==null?void 0:Hl.has,...(Wl=globalThis.esriConfig)==null?void 0:Wl.has}:{},a$32.add=(_t,Tt,Mt,Pt)=>((Pt||e$2e[_t]===void 0)&&(e$2e[_t]=Tt),Mt&&a$32(_t)),a$32.cache=e$2e,a$32.add("esri-deprecation-warnings",!0),(()=>{var Tt;a$32.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const _t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(a$32.add("host-browser",_t),a$32.add("host-node",typeof globalThis.process=="object"&&((Tt=globalThis.process.versions)==null?void 0:Tt.node)&&globalThis.process.versions.v8),a$32.add("dom",_t),a$32("host-browser")){const Mt=navigator,Pt=Mt.userAgent,Ft=Mt.appVersion,Dt=parseFloat(Ft);if(a$32.add("wp",parseFloat(Pt.split("Windows Phone")[1])||void 0),a$32.add("msapp",parseFloat(Pt.split("MSAppHost/")[1])||void 0),a$32.add("khtml",Ft.includes("Konqueror")?Dt:void 0),a$32.add("edge",parseFloat(Pt.split("Edge/")[1])||void 0),a$32.add("opr",parseFloat(Pt.split("OPR/")[1])||void 0),a$32.add("webkit",!a$32("wp")&&!a$32("edge")&&parseFloat(Pt.split("WebKit/")[1])||void 0),a$32.add("chrome",!a$32("edge")&&!a$32("opr")&&parseFloat(Pt.split("Chrome/")[1])||void 0),a$32.add("android",!a$32("wp")&&parseFloat(Pt.split("Android ")[1])||void 0),a$32.add("safari",!Ft.includes("Safari")||a$32("wp")||a$32("chrome")||a$32("android")||a$32("edge")||a$32("opr")?void 0:parseFloat(Ft.split("Version/")[1])),a$32.add("mac",Ft.includes("Macintosh")),!a$32("wp")&&Pt.match(/(iPhone|iPod|iPad)/)){const Nt=RegExp.$1.replace(/P/,"p"),Vt=Pt.match(/OS ([\d_]+)/)?RegExp.$1:"1",zt=parseFloat(Vt.replace(/_/,".").replace(/_/g,""));a$32.add(Nt,zt),a$32.add("ios",zt)}a$32.add("trident",parseFloat(Ft.split("Trident/")[1])||void 0),a$32("webkit")||(!Pt.includes("Gecko")||a$32("wp")||a$32("khtml")||a$32("trident")||a$32("edge")||a$32.add("mozilla",Dt),a$32("mozilla")&&a$32.add("ff",parseFloat(Pt.split("Firefox/")[1]||Pt.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const _t=navigator.userAgent,Tt=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(_t),Mt=/iPhone/i.test(_t);Tt&&a$32.add("esri-mobile",Tt),Mt&&a$32.add("esri-iPhone",Mt),a$32.add("esri-geolocation",!!navigator.geolocation)}a$32.add("esri-canvas-svg-support",!a$32("trident")),a$32.add("esri-wasm","WebAssembly"in globalThis),a$32.add("esri-shared-array-buffer",()=>{const _t="SharedArrayBuffer"in globalThis,Tt=globalThis.crossOriginIsolated===!1;return _t&&!Tt}),a$32.add("wasm-simd",()=>{const _t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(_t))}),a$32.add("esri-atomics","Atomics"in globalThis),a$32.add("esri-workers","Worker"in globalThis),a$32.add("web-feat:cache","caches"in globalThis),a$32.add("esri-workers-arraybuffer-transfer",!a$32("safari")||Number(a$32("safari"))>=12),a$32.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),a$32.add("featurelayer-simplify-payload-size-factors",[1,1,4]),a$32.add("featurelayer-snapshot-enabled",!0),a$32.add("featurelayer-snapshot-point-min-threshold",8e4),a$32.add("featurelayer-snapshot-point-max-threshold",4e5),a$32.add("featurelayer-snapshot-point-coverage",.1),a$32.add("featurelayer-advanced-symbols",!1),a$32.add("featurelayer-pbf",!0),a$32.add("featurelayer-pbf-statistics",!1),a$32.add("feature-layers-workers",!0),a$32.add("feature-polyline-generalization-factor",1),a$32.add("mapview-transitions-duration",200),a$32.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),a$32.add("mapserver-pbf-enabled",!1),a$32.add("mapimagelayer-popup-identify-max-tolerance",20),a$32.add("heatmap-allow-raster-fallback",!0),a$32.add("heatmap-force-raster",!1),a$32("host-webworker")||a$32("host-browser")&&(a$32.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),a$32.add("esri-image-decode",()=>{if("decode"in new Image){const _t=new Image;return _t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void _t.decode().then(()=>{a$32.add("esri-image-decode",!0,!0,!0)}).catch(()=>{a$32.add("esri-image-decode",!1,!0,!0)})}return!1}),a$32.add("esri-url-encodes-apostrophe",()=>{const _t=window.document.createElement("a");return _t.href="?'",_t.href.includes("?%27")}))})();const n$2_=null;function r$1P(_t){return _t!=null}function t$2e(_t){return _t==null}function o$2f(_t,Tt){return r$1P(_t)?Tt(_t):n$2_}function e$2d(_t){return _t}function f$1Q(_t,Tt){if(t$2e(_t))throw new Error(Tt);return _t}function c$3r(_t,Tt){return r$1P(_t)?_t:typeof Tt=="function"?Tt():Tt}function i$2W(_t,Tt){return r$1P(_t)?_t:Tt}function l$2H(_t){return r$1P(_t)&&_t.destroy(),null}function s$2r(_t){return r$1P(_t)&&_t.dispose(),null}function a$31(_t){return r$1P(_t)&&_t.remove(),null}function h$1R(_t){return r$1P(_t)&&_t.abort(),null}function p$3G(_t){return r$1P(_t)&&_t.release(),null}function w$1a(_t,Tt,Mt){return r$1P(_t)&&r$1P(Tt)?r$1P(Mt)?Mt(_t,Tt):_t.equals(Tt):_t===Tt}function y$1T(_t){return null}function v$19(_t,Tt){const Mt=new Array;for(const Pt of _t)Mt.push(E$M(Pt,null,Tt));return Mt}function A$G(_t,Tt){for(const Mt of _t)o$2f(Mt,Tt)}function E$M(_t,Tt,Mt){return r$1P(_t)?Mt(_t):Tt}function g$1q(_t){return _t.filter(Tt=>r$1P(Tt))}function m$2g(_t,...Tt){let Mt=_t;for(let Pt=0;Pt<Tt.length&&Mt;++Pt)Mt=Mt[Tt[Pt]];return Mt}function q$q(_t){return _t}class t$2d{constructor(Tt=1){this._seed=Tt}set seed(Tt){this._seed=Tt==null?Math.random()*t$2d._m:Tt}getInt(){return this._seed=(t$2d._a*this._seed+t$2d._c)%t$2d._m,this._seed}getFloat(){return this.getInt()/(t$2d._m-1)}getIntRange(Tt,Mt){return Math.round(this.getFloatRange(Tt,Mt))}getFloatRange(Tt,Mt){const Pt=Mt-Tt;return Tt+this.getInt()/t$2d._m*Pt}}t$2d._m=2147483647,t$2d._a=48271,t$2d._c=0;function u$2j(_t,Tt){return Tt?_t.filter((Mt,Pt,Ft)=>Ft.findIndex(Tt.bind(null,Mt))===Pt):_t.filter((Mt,Pt,Ft)=>Ft.indexOf(Mt)===Pt)}function i$2V(_t,Tt,Mt){if(t$2e(_t)&&t$2e(Tt))return!0;if(t$2e(_t)||t$2e(Tt)||_t.length!==Tt.length)return!1;if(Mt){for(let Pt=0;Pt<_t.length;Pt++)if(!Mt(_t[Pt],Tt[Pt]))return!1}else for(let Pt=0;Pt<_t.length;Pt++)if(_t[Pt]!==Tt[Pt])return!1;return!0}function c$3q(_t,Tt){let Mt=_t.length!==Tt.length;_t.length=Tt.length;for(let Pt=0;Pt<Tt.length;++Pt)_t[Pt]!==Tt[Pt]&&(_t[Pt]=Tt[Pt],Mt=!0);return Mt}function s$2q(_t,Tt,Mt){let Pt,Ft;return Mt?(Pt=Tt.filter(Dt=>!_t.some(Nt=>Mt(Nt,Dt))),Ft=_t.filter(Dt=>!Tt.some(Nt=>Mt(Nt,Dt)))):(Pt=Tt.filter(Dt=>!_t.includes(Dt)),Ft=_t.filter(Dt=>!Tt.includes(Dt))),{added:Pt,removed:Ft}}function a$30(_t){return _t&&typeof _t.length=="number"}const g$1p=!!Array.prototype.fill;function m$2f(_t,Tt){if(g$1p)return new Array(_t).fill(Tt);const Mt=new Array(_t);for(let Pt=0;Pt<_t;Pt++)Mt[Pt]=Tt;return Mt}function p$3F(_t,Tt){Tt===void 0&&(Tt=_t,_t=0);const Mt=new Array(Tt-_t);for(let Pt=_t;Pt<Tt;Pt++)Mt[Pt-_t]=Pt;return Mt}class y$1S{constructor(){this.last=0}}const b$1g=new y$1S;function v$18(_t,Tt,Mt,Pt){Pt=Pt||b$1g;const Ft=Math.max(0,Pt.last-10);for(let Nt=Ft;Nt<Mt;++Nt)if(_t[Nt]===Tt)return Pt.last=Nt,Nt;const Dt=Math.min(Ft,Mt);for(let Nt=0;Nt<Dt;++Nt)if(_t[Nt]===Tt)return Pt.last=Nt,Nt;return-1}function A$F(_t,Tt,Mt,Pt){const Ft=Mt==null?_t.length:Mt,Dt=v$18(_t,Tt,Ft,Pt);if(Dt!==-1)return _t[Dt]=_t[Ft-1],Mt==null&&_t.pop(),Tt}const j$19=new Set;function z$A(_t,Tt,Mt=_t.length,Pt=Tt.length,Ft,Dt){if(Pt===0||Mt===0)return Mt;j$19.clear();for(let Vt=0;Vt<Pt;++Vt)j$19.add(Tt[Vt]);Ft=Ft||b$1g;const Nt=Math.max(0,Ft.last-10);for(let Vt=Nt;Vt<Mt;++Vt)if(j$19.has(_t[Vt])&&(Dt&&Dt.push(_t[Vt]),j$19.delete(_t[Vt]),_t[Vt]=_t[Mt-1],--Mt,--Vt,j$19.size===0||Mt===0))return j$19.clear(),Mt;for(let Vt=0;Vt<Nt;++Vt)if(j$19.has(_t[Vt])&&(Dt&&Dt.push(_t[Vt]),j$19.delete(_t[Vt]),_t[Vt]=_t[Mt-1],--Mt,--Vt,j$19.size===0||Mt===0))return j$19.clear(),Mt;return j$19.clear(),Mt}new t$2d;function F$z(_t,Tt){const Mt=_t.indexOf(Tt);return Mt!==-1?(_t.splice(Mt,1),Tt):null}function n$2Z(_t,Tt){if(_t.forEach)_t.forEach(Tt);else for(let Mt=0;Mt<_t.length;Mt++)Tt(_t[Mt],Mt,_t)}function t$2c(_t,Tt,Mt){if(_t.slice)return _t.slice(Tt,Mt);Tt===void 0?Tt=0:(Tt<0&&(Tt+=_t.length),Tt=Math.min(_t.length,Math.max(0,Tt))),Mt===void 0?Mt=_t.length:(Mt<0&&(Mt+=_t.length),Mt=Math.min(_t.length,Math.max(0,Mt)));const Pt=Math.max(0,Mt-Tt),Ft=new _t.constructor(Pt);for(let Dt=0;Dt<Pt;Dt++)Ft[Dt]=_t[Tt+Dt];return Ft}function o$2e(_t){return _t instanceof ArrayBuffer||_t&&_t.constructor&&_t.constructor.name==="ArrayBuffer"}function c$3p(_t){return _t instanceof Int8Array||_t&&_t.constructor&&_t.constructor.name==="Int8Array"}function e$2c(_t){return _t instanceof Uint8Array||_t&&_t.constructor&&_t.constructor.name==="Uint8Array"}function a$2$(_t){return _t instanceof Uint8ClampedArray||_t&&_t.constructor&&_t.constructor.name==="Uint8ClampedArray"}function u$2i(_t){return _t instanceof Int16Array||_t&&_t.constructor&&_t.constructor.name==="Int16Array"}function i$2U(_t){return _t instanceof Uint16Array||_t&&_t.constructor&&_t.constructor.name==="Uint16Array"}function f$1P(_t){return _t instanceof Int32Array||_t&&_t.constructor&&_t.constructor.name==="Int32Array"}function s$2p(_t){return _t instanceof Uint32Array||_t&&_t.constructor&&_t.constructor.name==="Uint32Array"}function y$1R(_t){return _t instanceof Float32Array||_t&&_t.constructor&&_t.constructor.name==="Float32Array"}function A$E(_t){return _t instanceof Float64Array||_t&&_t.constructor&&_t.constructor.name==="Float64Array"}function l$2G(_t){const Tt=new Array(_t.length);for(let Mt=0;Mt<_t.length;Mt++)Tt[Mt]=_t[Mt];return Tt}function y$1Q(_t,Tt){let Mt;if(Tt)for(Mt in _t)_t.hasOwnProperty(Mt)&&(_t[Mt]===void 0?delete _t[Mt]:_t[Mt]instanceof Object&&y$1Q(_t[Mt],!0));else for(Mt in _t)_t.hasOwnProperty(Mt)&&_t[Mt]===void 0&&delete _t[Mt];return _t}function m$2e(_t){if(!_t||typeof _t!="object"||typeof _t=="function")return _t;const Tt=w$19(_t);if(r$1P(Tt))return Tt;if(g$1o(_t))return _t.clone();if(j$18(_t))return _t.map(m$2e);if(O$A(_t))return _t.clone();const Mt={};for(const Pt of Object.getOwnPropertyNames(_t))Mt[Pt]=m$2e(_t[Pt]);return Mt}function b$1f(_t){if(!_t||typeof _t!="object"||typeof _t=="function")return _t;const Tt=w$19(_t);if(r$1P(Tt))return Tt;if(j$18(_t)){let Mt=!0;const Pt=_t.map(Ft=>{const Dt=b$1f(Ft);return Ft!=null&&Dt==null&&(Mt=!1),Dt});return Mt?Pt:null}if(g$1o(_t))return _t.clone();if(!O$A(_t)){const Mt=new(Object.getPrototypeOf(_t)).constructor;for(const Pt of Object.getOwnPropertyNames(_t)){const Ft=_t[Pt],Dt=b$1f(Ft);if(Ft!=null&&Dt==null)return null;Mt[Pt]=Dt}return Mt}return null}function g$1o(_t){return typeof _t.clone=="function"}function j$18(_t){return typeof _t.map=="function"&&typeof _t.forEach=="function"}function O$A(_t){return typeof _t.notifyChange=="function"&&typeof _t.watch=="function"}function h$1Q(_t){if(Object.prototype.toString.call(_t)!=="[object Object]")return!1;const Tt=Object.getPrototypeOf(_t);return Tt===null||Tt===Object.prototype}function w$19(_t){if(c$3p(_t)||e$2c(_t)||a$2$(_t)||u$2i(_t)||i$2U(_t)||f$1P(_t)||s$2p(_t)||y$1R(_t)||A$E(_t))return t$2c(_t);if(_t instanceof Date)return new Date(_t.getTime());if(_t instanceof ArrayBuffer)return _t.slice(0,_t.byteLength);if(_t instanceof Map){const Tt=new Map;return _t.forEach((Mt,Pt)=>{Tt.set(Pt,m$2e(Mt))}),Tt}if(_t instanceof Set){const Tt=new Set;return _t.forEach(Mt=>{Tt.add(m$2e(Mt))}),Tt}return null}function d$2b(_t,Tt){return _t===Tt||typeof _t=="number"&&isNaN(_t)&&typeof Tt=="number"&&isNaN(Tt)||typeof(_t||{}).getTime=="function"&&typeof(Tt||{}).getTime=="function"&&_t.getTime()===Tt.getTime()||!1}function N$w(_t,Tt){return _t===Tt||(_t==null||typeof _t=="string"?_t===Tt:typeof _t=="number"?_t===Tt||typeof Tt=="number"&&isNaN(_t)&&isNaN(Tt):_t instanceof Date?Tt instanceof Date&&_t.getTime()===Tt.getTime():Array.isArray(_t)?Array.isArray(Tt)&&i$2V(_t,Tt):_t instanceof Set?Tt instanceof Set&&T$D(_t,Tt):_t instanceof Map?Tt instanceof Map&&A$D(_t,Tt):!!h$1Q(_t)&&h$1Q(Tt)&&P$w(_t,Tt))}function P$w(_t,Tt){if(_t===null||Tt===null)return!1;const Mt=Object.keys(_t);if(Tt===null||Object.keys(Tt).length!==Mt.length)return!1;for(const Pt of Mt)if(_t[Pt]!==Tt[Pt]||!Object.prototype.hasOwnProperty.call(Tt,Pt))return!1;return!0}function T$D(_t,Tt){if(_t.size!==Tt.size)return!1;for(const Mt of _t)if(!Tt.has(Mt))return!1;return!0}function A$D(_t,Tt){if(_t.size!==Tt.size)return!1;for(const[Mt,Pt]of _t){const Ft=Tt.get(Mt);if(Ft!==Pt||Ft===void 0&&!Tt.has(Mt))return!1}return!0}function n$2Y(_t,Tt,Mt=!1){return i$2T(_t,Tt,Mt)}function t$2b(_t,Tt){if(Tt!=null)return Tt[_t]||e$2b(_t.split("."),!1,Tt)}function o$2d(_t,Tt,Mt){const Pt=_t.split("."),Ft=Pt.pop(),Dt=e$2b(Pt,!0,Mt);Dt&&Ft&&(Dt[Ft]=Tt)}function e$2b(_t,Tt,Mt){let Pt=Mt;for(const Ft of _t){if(Pt==null)return;if(!(Ft in Pt)){if(!Tt)return;Pt[Ft]={}}Pt=Pt[Ft]}return Pt}function i$2T(_t,Tt,Mt){return Tt?Object.keys(Tt).reduce((Pt,Ft)=>{let Dt=Pt[Ft],Nt=Tt[Ft];return Dt===Nt?Pt:Dt===void 0?(Pt[Ft]=m$2e(Nt),Pt):(Array.isArray(Nt)||Array.isArray(Pt)?(Dt=Dt?Array.isArray(Dt)?Pt[Ft]=Dt.concat():Pt[Ft]=[Dt]:Pt[Ft]=[],Nt&&(Array.isArray(Nt)||(Nt=[Nt]),Mt?Nt.forEach(Vt=>{Dt.includes(Vt)||Dt.push(Vt)}):Pt[Ft]=Nt.concat())):Nt&&typeof Nt=="object"?Pt[Ft]=i$2T(Dt,Nt,Mt):Pt.hasOwnProperty(Ft)&&!Tt.hasOwnProperty(Ft)||(Pt[Ft]=Nt),Pt)},_t||{}):_t}var Ql;const r$1O={apiKey:void 0,applicationUrl:(Ql=globalThis.location)==null?void 0:Ql.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(n$2Y(r$1O,globalThis.esriConfig,!0),delete r$1O.has),!r$1O.assetsPath){const _t="4.24.7";r$1O.assetsPath=`https://js.arcgis.com/${_t.slice(0,-2)}/@arcgis/core/assets`}r$1O.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(r$1O,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),r$1O.request.corsEnabledServers=[],r$1O.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};function e$2a(_t,Tt,Mt,Pt){var Ft,Dt=arguments.length,Nt=Dt<3?Tt:Pt===null?Pt=Object.getOwnPropertyDescriptor(Tt,Mt):Pt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Nt=Reflect.decorate(_t,Tt,Mt,Pt);else for(var Vt=_t.length-1;Vt>=0;Vt--)(Ft=_t[Vt])&&(Nt=(Dt<3?Ft(Nt):Dt>3?Ft(Tt,Mt,Nt):Ft(Tt,Mt))||Nt);return Dt>3&&Nt&&Object.defineProperty(Tt,Mt,Nt),Nt}const scriptRel="modulepreload",assetsURL=function(_t){return"/"+_t},seen={},__vitePreload=function(Tt,Mt,Pt){return!Mt||Mt.length===0?Tt():Promise.all(Mt.map(Ft=>{if(Ft=assetsURL(Ft),Ft in seen)return;seen[Ft]=!0;const Dt=Ft.endsWith(".css"),Nt=Dt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Ft}"]${Nt}`))return;const Vt=document.createElement("link");if(Vt.rel=Dt?"stylesheet":scriptRel,Dt||(Vt.as="script",Vt.crossOrigin=""),Vt.href=Ft,document.head.appendChild(Vt),Dt)return new Promise((zt,Xt)=>{Vt.addEventListener("load",zt),Vt.addEventListener("error",()=>Xt(new Error(`Unable to preload CSS for ${Ft}`)))})})).then(()=>Tt())};function t$2a(_t){return _t&&_t.release&&typeof _t.release=="function"}function i$2S(_t){return _t&&_t.acquire&&typeof _t.acquire=="function"}class e$29{constructor(Tt,Mt,Pt,Ft=1,Dt=0){if(this.ctor=Tt,this.acquireFunction=Mt,this.releaseFunction=Pt,this.allocationSize=Ft,this._pool=new Array(Dt),this._initialSize=Dt,this.ctor)for(let Nt=0;Nt<Dt;Nt++)this._pool[Nt]=new this.ctor;this.allocationSize=Math.max(Ft,1)}destroy(){this.prune(0)}acquire(...Tt){let Mt;if(e$29.test.disabled)Mt=new this.ctor;else{if(this._pool.length===0){const Pt=this.allocationSize;for(let Ft=0;Ft<Pt;Ft++)this._pool[Ft]=new this.ctor}Mt=this._pool.pop()}return this.acquireFunction?this.acquireFunction(Mt,...Tt):i$2S(Mt)&&Mt.acquire(...Tt),Mt}release(Tt){Tt&&!e$29.test.disabled&&(this.releaseFunction?this.releaseFunction(Tt):t$2a(Tt)&&Tt.release(),this._pool.push(Tt))}prune(Tt=this._initialSize){if(!(Tt>=this._pool.length)){for(let Mt=Tt;Mt<this._pool.length;++Mt){const Pt=this._pool[Mt];this._dispose(Pt)}this._pool.length=Tt}}_dispose(Tt){Tt.dispose&&typeof Tt.dispose=="function"&&Tt.dispose()}}e$29.test={disabled:!1};function r$1N(_t){_t.length=0}class t$29{constructor(Tt=50,Mt=50){this._pool=new e$29(Array,void 0,r$1N,Mt,Tt)}acquire(){return this._pool.acquire()}release(Tt){this._pool.release(Tt)}prune(){this._pool.prune(0)}static acquire(){return o$2c.acquire()}static release(Tt){return o$2c.release(Tt)}static prune(){o$2c.prune()}}const o$2c=new t$29(100);function n$2X(_t){const Tt=[];return function*(){yield*Tt;for(const Mt of _t)Tt.push(Mt),yield Mt}}function o$2b(_t,Tt){for(const Mt of _t)if(Mt!=null&&Tt(Mt))return Mt}function t$28(_t){return _t!=null&&typeof _t[Symbol.iterator]=="function"}function r$1M(_t){return n$2W(()=>_t.forEach(Tt=>r$1P(Tt)&&Tt.remove()))}function n$2W(_t){return{remove:()=>{_t&&(_t(),_t=void 0)}}}function o$2a(_t){return n$2W(()=>{const Tt=_t();r$1P(Tt)&&Tt.remove()})}function t$27(_t){return n$2W(r$1P(_t)?()=>_t.destroy():void 0)}function e$28(_t){return _t?_t.__accessor__?_t.__accessor__:_t.propertyInvalidated?_t:null:null}function i$2R(_t,Tt){return _t!=null&&_t.metadatas&&_t.metadatas[Tt]!=null}function o$29(_t,Tt,Mt){return Mt?l$2F(_t,Tt,{policy:Mt,path:""}):l$2F(_t,Tt,null)}function l$2F(_t,Tt,Mt){return Tt?Object.keys(Tt).reduce((Pt,Ft)=>{let Dt=null,Nt="merge";if(Mt&&(Dt=Mt.path?`${Mt.path}.${Ft}`:Ft,Nt=Mt.policy(Dt)),Nt==="replace")return Pt[Ft]=Tt[Ft],Pt;if(Pt[Ft]===void 0)return Pt[Ft]=m$2e(Tt[Ft]),Pt;let Vt=Pt[Ft],zt=Tt[Ft];if(Vt===zt)return Pt;if(Array.isArray(zt)||Array.isArray(Pt))Vt=Vt?Array.isArray(Vt)?Pt[Ft]=Vt.concat():Pt[Ft]=[Vt]:Pt[Ft]=[],zt&&(Array.isArray(zt)||(zt=[zt]),zt.forEach(Xt=>{Vt.includes(Xt)||Vt.push(Xt)}));else if(zt&&typeof zt=="object")if(Mt){const Xt=Mt.path;Mt.path=Dt,Pt[Ft]=l$2F(Vt,zt,Mt),Mt.path=Xt}else Pt[Ft]=l$2F(Vt,zt,null);else Pt.hasOwnProperty(Ft)&&!Tt.hasOwnProperty(Ft)||(Pt[Ft]=zt);return Pt},_t||{}):_t}function s$2o(_t){return Array.isArray(_t)?_t:_t.split(".")}function c$3o(_t){return _t.includes(",")?_t.split(",").map(Tt=>Tt.trim()):[_t.trim()]}function f$1O(_t){if(Array.isArray(_t)){const Tt=[];for(const Mt of _t)Tt.push(...c$3o(Mt));return Tt}return c$3o(_t)}function y$1P(_t,Tt,Mt,Pt){const Ft=f$1O(Tt);if(Ft.length!==1){const Dt=Ft.map(Nt=>Pt(_t,Nt,Mt));return r$1M(Dt)}return Pt(_t,Ft[0],Mt)}function h$1P(_t){let Tt=!1;return()=>{Tt||(Tt=!0,_t())}}function e$27(_t,Tt){const Mt=_t[_t.length-1]==="?"?_t.slice(0,-1):_t;if(Tt.getItemAt!=null||Array.isArray(Tt)){const Ft=parseInt(Mt,10);if(!isNaN(Ft))return Array.isArray(Tt)?Tt[Ft]:Tt.getItemAt(Ft)}const Pt=e$28(Tt);return i$2R(Pt,Mt)?Pt.get(Mt):Tt[Mt]}function i$2Q(_t,Tt,Mt){if(_t==null)return _t;const Pt=e$27(Tt[Mt],_t);return!Pt&&Mt<Tt.length-1?void 0:Mt===Tt.length-1?Pt:i$2Q(Pt,Tt,Mt+1)}function u$2h(_t,Tt,Mt=0){return typeof Tt!="string"||Tt.includes(".")?i$2Q(_t,s$2o(Tt),Mt):e$27(Tt,_t)}function o$28(_t,Tt){return u$2h(_t,Tt)}function s$2n(_t,Tt){return u$2h(Tt,_t)!==void 0}var I$F;(function(_t){_t[_t.INITIALIZING=0]="INITIALIZING",_t[_t.CONSTRUCTING=1]="CONSTRUCTING",_t[_t.CONSTRUCTED=2]="CONSTRUCTED"})(I$F||(I$F={}));class o$27{constructor(Tt){this.autoDestroy=!1,this.properties=Tt}}function n$2V(_t){let Tt=_t.constructor.__accessorMetadata__;const Mt=Object.prototype.hasOwnProperty.call(_t.constructor,"__accessorMetadata__");if(Tt){if(!Mt){const Pt=Object.create(Tt.properties),Ft=Tt.autoDestroy;for(const Dt in Pt)Pt[Dt]=m$2e(Pt[Dt]);Tt=new o$27(Pt),Tt.autoDestroy=Ft,Object.defineProperty(_t.constructor,"__accessorMetadata__",{value:Tt,enumerable:!1,configurable:!0,writable:!0})}}else Tt=new o$27({}),Object.defineProperty(_t.constructor,"__accessorMetadata__",{value:Tt,enumerable:!1,configurable:!0,writable:!0});return _t.constructor.__accessorMetadata__}function c$3n(_t){return n$2V(_t).properties}function s$2m(_t,Tt){const Mt=c$3n(_t);let Pt=Mt[Tt];return Pt||(Pt=Mt[Tt]={}),Pt}function i$2P(_t,Tt){return o$29(_t,Tt,_$E)}const p$3E=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function _$E(_t){return p$3E.test(_t)?"replace":"merge"}const e$26=/\{([^\}]+)\}/g;function n$2U(_t){return _t==null?"":_t}function r$1L(_t,Tt){return _t.replace(e$26,typeof Tt=="object"?(Mt,Pt)=>n$2U(t$2b(Pt,Tt)):(Mt,Pt)=>n$2U(Tt(Pt)))}function o$26(_t,Tt){return _t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,Mt=>Tt&&Tt.includes(Mt)?Mt:`\\${Mt}`)}function c$3m(_t){let Tt=0;for(let Mt=0;Mt<_t.length;Mt++)Tt=(Tt<<5)-Tt+_t.charCodeAt(Mt),Tt|=0;return Tt}function u$2g(_t){return new DOMParser().parseFromString(_t||"","text/html").body.innerText||""}const o$25={info:0,warn:1,error:2,none:3};class s$2l{constructor(Tt){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},Tt.level!=null&&(this.level=Tt.level),Tt.writer!=null&&(this.writer=Tt.writer),this._module=Tt.module,s$2l._loggers[this.module]=this;const Mt=this.module.lastIndexOf(".");Mt!==-1&&(this._parent=s$2l.getLogger(this.module.slice(0,Mt)))}get module(){return this._module}get parent(){return this._parent}error(...Tt){this._log("error","always",...Tt)}warn(...Tt){this._log("warn","always",...Tt)}info(...Tt){this._log("info","always",...Tt)}errorOnce(...Tt){this._log("error","once",...Tt)}warnOnce(...Tt){this._log("warn","once",...Tt)}infoOnce(...Tt){this._log("info","once",...Tt)}errorOncePerTick(...Tt){this._log("error","oncePerTick",...Tt)}warnOncePerTick(...Tt){this._log("warn","oncePerTick",...Tt)}infoOncePerTick(...Tt){this._log("info","oncePerTick",...Tt)}get test(){const Tt=this;return{loggedMessages:Tt._loggedMessages,clearLoggedWarnings:()=>Tt._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(Tt={}){const Mt=s$2l._loggers;return s$2l._loggers=Tt,Mt},set throttlingDisabled(Tt){s$2l._throttlingDisabled=Tt}}}static getLogger(Tt){let Mt=s$2l._loggers[Tt];return Mt||(Mt=new s$2l({module:Tt})),Mt}_log(Tt,Mt,...Pt){if(!!this._matchLevel(Tt)){if(Mt!=="always"&&!s$2l._throttlingDisabled){const Ft=this._argsToKey(Pt),Dt=this._loggedMessages[Tt].get(Ft);if(Mt==="once"&&Dt!=null||Mt==="oncePerTick"&&Dt&&Dt>=s$2l._tickCounter)return;this._loggedMessages[Tt].set(Ft,s$2l._tickCounter),s$2l._scheduleTickCounterIncrement()}for(const Ft of r$1O.log.interceptors)if(Ft(Tt,this.module,...Pt))return;this._inheritedWriter()(Tt,this.module,...Pt)}}_parentWithMember(Tt,Mt){let Pt=this;for(;r$1P(Pt);){const Ft=Pt[Tt];if(r$1P(Ft))return Ft;Pt=Pt.parent}return Mt}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(Tt,Mt,...Pt){console[Tt](`[${Mt}]`,...Pt)}_matchLevel(Tt){const Mt=r$1O.log.level?r$1O.log.level:"warn";return o$25[this._parentWithMember("level",Mt)]<=o$25[Tt]}_argsToKey(...Tt){const Mt=(Pt,Ft)=>typeof Ft!="object"||Array.isArray(Ft)?Ft:"[Object]";return c$3m(JSON.stringify(Tt,Mt))}static _scheduleTickCounterIncrement(){s$2l._tickCounterScheduled||(s$2l._tickCounterScheduled=!0,Promise.resolve().then(()=>{s$2l._tickCounter++,s$2l._tickCounterScheduled=!1}))}}s$2l._loggers={},s$2l._tickCounter=0,s$2l._tickCounterScheduled=!1,s$2l._throttlingDisabled=!1;var r$1K;(function(_t){_t[_t.DEFAULTS=0]="DEFAULTS",_t[_t.COMPUTED=1]="COMPUTED",_t[_t.SERVICE=2]="SERVICE",_t[_t.PORTAL_ITEM=3]="PORTAL_ITEM",_t[_t.WEB_SCENE=4]="WEB_SCENE",_t[_t.WEB_MAP=5]="WEB_MAP",_t[_t.USER=6]="USER"})(r$1K||(r$1K={}));const E$L=r$1K.USER+1;function t$26(_t){switch(_t){case"defaults":return r$1K.DEFAULTS;case"service":return r$1K.SERVICE;case"portal-item":return r$1K.PORTAL_ITEM;case"web-scene":return r$1K.WEB_SCENE;case"web-map":return r$1K.WEB_MAP;case"user":return r$1K.USER}}function n$2T(_t){switch(_t){case r$1K.DEFAULTS:return"defaults";case r$1K.SERVICE:return"service";case r$1K.PORTAL_ITEM:return"portal-item";case r$1K.WEB_SCENE:return"web-scene";case r$1K.WEB_MAP:return"web-map";case r$1K.USER:return"user"}return void 0}function c$3l(_t){return n$2T(_t)}var i$2O;(function(_t){_t[_t.Dirty=1]="Dirty",_t[_t.Overriden=2]="Overriden",_t[_t.Computing=4]="Computing",_t[_t.NonNullable=8]="NonNullable",_t[_t.HasDefaultValue=16]="HasDefaultValue",_t[_t.DepTrackingInitialized=32]="DepTrackingInitialized",_t[_t.AutoTracked=64]="AutoTracked",_t[_t.ExplicitlyTracking=128]="ExplicitlyTracking"})(i$2O||(i$2O={}));let o$24,i$2N=[];const c$3k=s$2l.getLogger("esri.core.Accessor");function l$2E(_t){o$24!==void 0&&o$24.onObservableAccessed(_t)}let a$2_=!1,f$1N=!1;function g$1n(_t,Tt,Mt){if(a$2_)return p$3D(_t,Tt,Mt);d$2a(_t);const Pt=Tt.call(Mt);return m$2d(),Pt}function u$2f(_t,Tt){return g$1n(void 0,_t,Tt)}function p$3D(_t,Tt,Mt){const Pt=a$2_;a$2_=!0,d$2a(_t);let Ft=null;try{Ft=Tt.call(Mt)}catch(Dt){f$1N&&c$3k.error(Dt)}return m$2d(),a$2_=Pt,Ft}function d$2a(_t){o$24=_t,i$2N.push(_t)}function m$2d(){const _t=i$2N.pop();o$24=i$2N.length>0?i$2N[i$2N.length-1]:void 0,_t!==void 0&&_t.onTrackingEnd()}function y$1O(_t,Tt){if(Tt.flags&i$2O.DepTrackingInitialized)return;const Mt=f$1N;f$1N=!1,Tt.flags&i$2O.AutoTracked?p$3D(Tt,Tt.metadata.get,_t):h$1O(_t,Tt),f$1N=Mt}const A$C=[];function h$1O(_t,Tt){Tt.flags&i$2O.ExplicitlyTracking||(Tt.flags|=i$2O.ExplicitlyTracking,p$3D(Tt,()=>{const Mt=Tt.metadata.dependsOn||A$C;for(const Pt of Mt)if(typeof Pt!="string"||Pt.includes(".")){const Ft=s$2o(Pt);for(let Dt=0,Nt=_t;Dt<Ft.length&&Nt!=null&&typeof Nt=="object";++Dt)Nt=k$F(Nt,Ft[Dt],Dt!==Ft.length-1)}else k$F(_t,Pt,!1)}),Tt.flags&=~i$2O.ExplicitlyTracking)}function k$F(_t,Tt,Mt){var Dt;const Pt=Tt[Tt.length-1]==="?"?Tt.slice(0,-1):Tt;if(_t.getItemAt!=null||Array.isArray(_t)){const Nt=parseInt(Pt,10);if(!isNaN(Nt))return Array.isArray(_t)?_t[Nt]:_t.getItemAt(Nt)}const Ft=(Dt=e$28(_t))==null?void 0:Dt.properties.get(Pt);return Ft&&(l$2E(Ft),y$1O(_t,Ft)),Mt?_t[Pt]:void 0}class s$2k{constructor(Tt,Mt){this._observers=Tt,this._observer=Mt}remove(){F$z(this._observers,this._observer)}}class l$2D{constructor(Tt,Mt,Pt){this.properties=Tt,this.propertyName=Mt,this.metadata=Pt,this._observers=null,this._accessed=null,this._handles=null,this.flags=i$2O.Dirty|(Pt.nonNullable?i$2O.NonNullable:0)|(Pt.hasOwnProperty("value")?i$2O.HasDefaultValue:0)|(Pt.get===void 0?i$2O.DepTrackingInitialized:0)|(Pt.dependsOn===void 0?i$2O.AutoTracked:0)}destroy(){if(this.flags&i$2O.Dirty&&this._observers){const Tt=this._observers.slice();for(const Mt of Tt)Mt.onCommitted()}this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){l$2E(this);const Tt=this.properties.store,Mt=this.propertyName,Pt=this.flags,Ft=Tt.get(Mt);if(Pt&i$2O.Computing||~Pt&i$2O.Dirty&&Tt.has(Mt))return Ft;this.flags|=i$2O.Computing;const Dt=this.properties.host;let Nt;Pt&i$2O.AutoTracked?Nt=g$1n(this,this.metadata.get,Dt):(h$1O(Dt,this),Nt=this.metadata.get.call(Dt)),Tt.set(Mt,Nt,r$1K.COMPUTED);const Vt=Tt.get(Mt);return Vt===Ft?this.flags&=~i$2O.Dirty:u$2f(this.commit,this),this.flags&=~i$2O.Computing,Vt}onObservableAccessed(Tt){Tt!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(Tt)||this._accessed.push(Tt))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=i$2O.DepTrackingInitialized;const Tt=this._accessed;if(Tt===null)return;let Mt=this._handles;Mt===null&&(Mt=this._handles=[]);for(let Pt=0;Pt<Tt.length;++Pt)Mt.push(Tt[Pt].observe(this));Tt.length=0}observe(Tt){return this._observers===null&&(this._observers=[]),this._observers.includes(Tt)||this._observers.push(Tt),new s$2k(this._observers,Tt)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){~this.flags&i$2O.Overriden&&(this.flags|=i$2O.Dirty);const Tt=this._observers;if(Tt!==null)for(let Mt=0;Mt<Tt.length;++Mt)Tt[Mt].onInvalidated()}commit(){this.flags&=~i$2O.Dirty,this.onCommitted()}onCommitted(){if(this._observers===null)return;const Tt=this._observers.slice();for(let Mt=0;Mt<Tt.length;++Mt)Tt[Mt].onCommitted()}_clearObservationHandles(){const Tt=this._handles;if(Tt!==null){for(let Mt=0;Mt<Tt.length;++Mt)Tt[Mt].remove();Tt.length=0}}}class t$25{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(Tt){const Mt=new t$25;return this._values.forEach((Pt,Ft)=>{Tt&&Tt.has(Ft)||Mt.set(Ft,m$2e(Pt))}),Mt}get(Tt){return this._values.get(Tt)}originOf(){return r$1K.USER}keys(){return[...this._values.keys()]}set(Tt,Mt){this._values.set(Tt,Mt)}delete(Tt){this._values.delete(Tt)}has(Tt){return this._values.has(Tt)}forEach(Tt){this._values.forEach(Tt)}}function g$1m(_t,Tt,Mt){return _t!==void 0}function d$29(_t,Tt,Mt,Pt){return _t!==void 0&&(!(Mt==null&&_t.flags&i$2O.NonNullable)||(Pt.lifecycle,I$F.INITIALIZING,!1))}function m$2c(_t){return _t&&typeof _t.destroy=="function"}s$2l.getLogger("esri.core.accessorSupport.Properties");class v$17{constructor(Tt){this.host=Tt,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=I$F.INITIALIZING,this.store=new t$25,this._origin=r$1K.USER;const Mt=this.host.constructor.__accessorMetadata__,Pt=Mt.properties;for(const Ft in Pt){const Dt=new l$2D(this,Ft,Pt[Ft]);this.properties.set(Ft,Dt)}this.metadatas=Pt,this._autoDestroy=Mt.autoDestroy}initialize(){this.lifecycle=I$F.CONSTRUCTING}constructed(){this.lifecycle=I$F.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[Tt,Mt]of this.properties){const Pt=this.internalGet(Tt);Pt&&m$2c(Pt)&&(Pt.destroy(),~Mt.flags&i$2O.NonNullable&&this._internalSet(Mt,null)),Mt.destroy()}else for(const[Tt,Mt]of this.properties)Mt.destroy()}get initialized(){return this.lifecycle!==I$F.INITIALIZING}get(Tt){const Mt=this.properties.get(Tt);if(Mt.metadata.get)return Mt.getComputed();l$2E(Mt);const Pt=this.store;return Pt.has(Tt)?Pt.get(Tt):Mt.metadata.value}originOf(Tt){const Mt=this.store.originOf(Tt);if(Mt===void 0){const Pt=this.properties.get(Tt);if(Pt!==void 0&&Pt.flags&i$2O.HasDefaultValue)return"defaults"}return n$2T(Mt)}has(Tt){return!!this.properties.has(Tt)&&this.store.has(Tt)}keys(){return[...this.properties.keys()]}internalGet(Tt){const Mt=this.properties.get(Tt);if(g$1m(Mt))return this.store.has(Tt)?this.store.get(Tt):Mt.metadata.value}internalSet(Tt,Mt){const Pt=this.properties.get(Tt);g$1m(Pt)&&this._internalSet(Pt,Mt)}getDependsInfo(Tt,Mt,Pt){const Ft=this.properties.get(Mt);if(!g$1m(Ft))return"";const Dt=new Set,Nt=g$1n({onObservableAccessed:zt=>Dt.add(zt),onTrackingEnd:()=>{}},()=>{var zt;return(zt=Ft.metadata.get)==null?void 0:zt.call(Tt)});let Vt=`${Pt}${Tt.declaredClass.split(".").pop()}.${Mt}: ${Nt}
`;if(Dt.size===0)return Vt;Pt+="  ";for(const zt of Dt){if(!(zt instanceof l$2D))continue;const Xt=zt.properties.host,Ht=zt.propertyName,Wt=e$28(Xt);Vt+=Wt?Wt.getDependsInfo(Xt,Ht,Pt):`${Pt}${Ht}: undefined
`}return Vt}setAtOrigin(Tt,Mt,Pt){const Ft=this.properties.get(Tt);if(g$1m(Ft))return this._setAtOrigin(Ft,Mt,Pt)}isOverridden(Tt){const Mt=this.properties.get(Tt);return Mt!==void 0&&!!(Mt.flags&i$2O.Overriden)}clearOverride(Tt){const Mt=this.properties.get(Tt);Mt!==void 0&&Mt.flags&i$2O.Overriden&&(Mt.flags&=~i$2O.Overriden,Mt.notifyChange())}override(Tt,Mt){const Pt=this.properties.get(Tt);if(!d$29(Pt,Tt,Mt,this))return;const Ft=Pt.metadata.cast;if(Ft){const Dt=this._cast(Ft,Mt),{valid:Nt,value:Vt}=Dt;if(I$E.release(Dt),!Nt)return;Mt=Vt}Pt.flags|=i$2O.Overriden,this._internalSet(Pt,Mt)}set(Tt,Mt){const Pt=this.properties.get(Tt);if(!d$29(Pt,Tt,Mt,this))return;const Ft=Pt.metadata.cast;if(Ft){const Nt=this._cast(Ft,Mt),{valid:Vt,value:zt}=Nt;if(I$E.release(Nt),!Vt)return;Mt=zt}const Dt=Pt.metadata.set;Dt?Dt.call(this.host,Mt):this._internalSet(Pt,Mt)}setDefaultOrigin(Tt){this._origin=t$26(Tt)}getDefaultOrigin(){return n$2T(this._origin)}notifyChange(Tt){const Mt=this.properties.get(Tt);Mt!==void 0&&Mt.notifyChange()}invalidate(Tt){const Mt=this.properties.get(Tt);Mt!==void 0&&Mt.invalidate()}commit(Tt){const Mt=this.properties.get(Tt);Mt!==void 0&&Mt.commit()}_internalSet(Tt,Mt){const Pt=this.lifecycle!==I$F.INITIALIZING?this._origin:r$1K.DEFAULTS;this._setAtOrigin(Tt,Mt,Pt)}_setAtOrigin(Tt,Mt,Pt){const Ft=this.store,Dt=Tt.propertyName;Ft.has(Dt,Pt)&&d$2b(Mt,Ft.get(Dt))&&~Tt.flags&i$2O.Overriden&&Pt===Ft.originOf(Dt)||(Tt.invalidate(),Ft.set(Dt,Mt,Pt),Tt.commit(),y$1O(this.host,Tt))}_cast(Tt,Mt){const Pt=I$E.acquire();return Pt.valid=!0,Pt.value=Mt,Tt&&(Pt.value=Tt.call(this.host,Mt,Pt)),Pt}}class y$1N{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const I$E=new e$29(y$1N);function e$25(_t,Tt){return _t.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(Mt,Pt)=>{if(Pt==="")return"$";const Ft=t$2b(Pt,Tt),Dt=Ft==null?"":Ft;if(Dt===void 0)throw new Error(`could not find key "${Pt}" in template`);return Dt.toString()})}class s$2j{constructor(Tt,Mt,Pt){this.name=Tt,this.details=Pt,this.message=void 0,this instanceof s$2j&&(this.message=Mt&&e$25(Mt,Pt)||"")}toString(){return"["+this.name+"]: "+this.message}}class s$2i extends s$2j{constructor(Tt,Mt,Pt){if(super(Tt,Mt,Pt),!(this instanceof s$2i))return new s$2i(Tt,Mt,Pt)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(Tt,Mt)=>{if(Mt&&typeof Mt=="object"&&typeof Mt.toJSON=="function")return Mt;try{return m$2e(Mt)}catch{return"[object]"}}))}}catch(Tt){throw s$2l.getLogger("esri.core.Error").error(Tt),Tt}return{name:this.name,message:this.message,details:this.details}}static fromJSON(Tt){return new s$2i(Tt.name,Tt.message,Tt.details)}}s$2i.prototype.type="error";function n$2S(_t,Tt,Mt){if(_t&&Tt)if(typeof Tt=="object")for(const Pt of Object.getOwnPropertyNames(Tt))n$2S(_t,Pt,Tt[Pt]);else{if(Tt.includes(".")){const Ft=Tt.split("."),Dt=Ft.splice(Ft.length-1,1)[0];return void n$2S(o$28(_t,Ft),Dt,Mt)}const Pt=_t.__accessor__;Pt!=null&&s$2h(Tt,Pt),_t[Tt]=Mt}}function s$2h(_t,Tt){if(a$32("esri-unknown-property-errors")&&!i$2M(_t,Tt))throw new s$2i("set:unknown-property",c$3j(_t,Tt))}function i$2M(_t,Tt){return Tt.metadatas[_t]!=null}function c$3j(_t,Tt){return"setting unknown property '"+_t+"' on instance of "+Tt.host.declaredClass}s$2l.getLogger("esri.core.accessorSupport.set");class t$24 extends e$29{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=y$1T(this._set)}acquire(...Tt){const Mt=super.acquire(...Tt);return this._set.delete(Mt),Mt}release(Tt){Tt&&!this._set.has(Tt)&&(super.release(Tt),this._set.add(Tt))}_dispose(Tt){this._set.delete(Tt),super._dispose(Tt)}}const o$23=[];function t$23(_t){o$23.push(_t),o$23.length===1&&queueMicrotask(()=>{const Tt=o$23.slice();o$23.length=0;for(const Mt of Tt)Mt()})}const t$22=29;class e$24{constructor(Tt,Mt=t$22){this.name=Tt,this._counter=0,this._items=new Array(Mt)}record(Tt){this._items[++this._counter%this._items.length]=Tt}get median(){return this._items.slice().sort((Tt,Mt)=>Tt-Mt)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((Tt,Mt)=>Tt+Mt,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var o$22;(function(_t){const Tt=(Dt,Nt,Vt,zt)=>{let Xt=Nt,Ht=Nt;const Wt=Vt>>>1,Qt=Dt[Xt-1];for(;Ht<=Wt;){Ht=Xt<<1,Ht<Vt&&zt(Dt[Ht-1],Dt[Ht])<0&&++Ht;const Zt=Dt[Ht-1];if(zt(Zt,Qt)<=0)break;Dt[Xt-1]=Zt,Xt=Ht}Dt[Xt-1]=Qt},Mt=(Dt,Nt)=>Dt<Nt?-1:Dt>Nt?1:0;function Pt(Dt,Nt,Vt,zt){Nt===void 0&&(Nt=0),Vt===void 0&&(Vt=Dt.length),zt===void 0&&(zt=Mt);for(let Ht=Vt>>>1;Ht>Nt;Ht--)Tt(Dt,Ht,Vt,zt);const Xt=Nt+1;for(let Ht=Vt-1;Ht>Nt;Ht--){const Wt=Dt[Nt];Dt[Nt]=Dt[Ht],Dt[Ht]=Wt,Tt(Dt,Xt,Ht,zt)}}function*Ft(Dt,Nt,Vt,zt){Nt===void 0&&(Nt=0),Vt===void 0&&(Vt=Dt.length),zt===void 0&&(zt=Mt);for(let Ht=Vt>>>1;Ht>Nt;Ht--)Tt(Dt,Ht,Vt,zt),yield;const Xt=Nt+1;for(let Ht=Vt-1;Ht>Nt;Ht--){const Wt=Dt[Nt];Dt[Nt]=Dt[Ht],Dt[Ht]=Wt,Tt(Dt,Xt,Ht,zt),yield}}_t.sort=Pt,_t.iterableSort=Ft})(o$22||(o$22={}));const t$21=o$22,e$23=1.5,l$2C=1.1;class n$2R{constructor(Tt){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new y$1S,Tt&&(Tt.initialSize&&(this.data=new Array(Tt.initialSize)),Tt.allocator&&(this._allocator=Tt.allocator),Tt.deallocator!==void 0&&(this._deallocator=Tt.deallocator),Tt.shrink&&(this._shrink=()=>r$1J(this)))}toArray(){return this.data.slice(0,this.length)}filter(Tt){const Mt=new Array;for(let Pt=0;Pt<this._length;Pt++){const Ft=this.data[Pt];Tt(Ft)&&Mt.push(Ft)}return Mt}getItemAt(Tt){if(!(Tt<0||Tt>=this._length))return this.data[Tt]}includes(Tt,Mt){const Pt=this.data.indexOf(Tt,Mt);return Pt!==-1&&Pt<this.length}get length(){return this._length}set length(Tt){if(Tt>this._length){if(this._allocator){for(;this._length<Tt;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=Tt}else{if(this._deallocator)for(let Mt=Tt;Mt<this._length;++Mt)this.data[Mt]=this._deallocator(this.data[Mt]);this._length=Tt,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(Tt){this.data[this._length++]=Tt}pushArray(Tt,Mt=Tt.length){for(let Pt=0;Pt<Mt;Pt++)this.data[this._length++]=Tt[Pt]}fill(Tt,Mt){for(let Pt=0;Pt<Mt;Pt++)this.data[this._length++]=Tt}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const Tt=this.data[this._length];return++this._length,Tt}unshift(Tt){this.data.unshift(Tt),this._length++,r$1J(this)}pop(){if(this.length===0)return;const Tt=this.data[this.length-1];return this.length=this.length-1,this._shrink(),Tt}remove(Tt){const Mt=v$18(this.data,Tt,this.length,this._hint);if(Mt!==-1)return this.data.splice(Mt,1),this.length=this.length-1,Tt}removeUnordered(Tt){const Mt=A$F(this.data,Tt,this.length,this._hint);return Mt!==void 0&&(this.length=this.length-1),this._shrink(),Mt}removeUnorderedIndex(Tt){if(!(Tt>=this.length||Tt<0))return this.swapElements(Tt,this.length-1),this.pop()}removeUnorderedMany(Tt,Mt=Tt.length,Pt){this.length=z$A(this.data,Tt,this.length,Mt,this._hint,Pt),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(Tt,Mt){Tt>=this.length||Mt>=this.length||Tt===Mt||([this.data[Tt],this.data[Mt]]=[this.data[Mt],this.data[Tt]])}sort(Tt){t$21.sort(this.data,0,this.length,Tt)}iterableSort(Tt){return t$21.iterableSort(this.data,0,this.length,Tt)}some(Tt,Mt){for(let Pt=0;Pt<this.length;++Pt)if(Tt.call(Mt,this.data[Pt],Pt,this.data))return!0;return!1}filterInPlace(Tt,Mt){let Pt=0;for(let Ft=0;Ft<this._length;++Ft){const Dt=this.data[Ft];Tt.call(Mt,Dt,Ft,this.data)&&(this.data[Ft]=this.data[Pt],this.data[Pt]=Dt,Pt++)}if(this._deallocator)for(let Ft=Pt;Ft<this._length;Ft++)this.data[Ft]=this._deallocator(this.data[Ft]);return this._length=Pt,this._shrink(),this}forAll(Tt,Mt){const Pt=this.length,Ft=this.data;for(let Dt=0;Dt<Pt;++Dt)Tt.call(Mt,Ft[Dt],Dt,Ft)}forEach(Tt,Mt){for(let Pt=0;Pt<this.length;++Pt)Tt.call(Mt,this.data[Pt],Pt,this.data)}map(Tt,Mt){const Pt=new Array(this.length);for(let Ft=0;Ft<this.length;++Ft)Pt[Ft]=Tt.call(Mt,this.data[Ft],Ft,this.data);return Pt}reduce(Tt,Mt){let Pt=Mt;for(let Ft=0;Ft<this.length;++Ft)Pt=Tt(Pt,this.data[Ft],Ft,this.data);return Pt}has(Tt){const Mt=this.length,Pt=this.data;for(let Ft=0;Ft<Mt;++Ft)if(Pt[Ft]===Tt)return!0;return!1}}function r$1J(_t){_t.data.length>e$23*_t.length&&(_t.data.length=Math.floor(_t.length*l$2C))}function e$22(_t){return{setTimeout:(Tt,Mt)=>{const Pt=_t.setTimeout(Tt,Mt);return{remove:()=>_t.clearTimeout(Pt)}}}}const t$20=e$22(globalThis),e$21=new Set;function i$2L(_t,Tt,Mt=!1){Mt&&e$21.has(Tt)||(Mt&&e$21.add(Tt),_t.warn(`\u{1F6D1} DEPRECATED - ${Tt}`))}function r$1I(_t,Tt,Mt={}){if(a$32("esri-deprecation-warnings")){const{moduleName:Pt}=Mt;s$2g(_t,`Property: ${(Pt?Pt+"::":"")+Tt}`,Mt)}}function s$2g(_t,Tt,Mt={}){if(a$32("esri-deprecation-warnings")){const{replacement:Pt,version:Ft,see:Dt,warnOnce:Nt}=Mt;let Vt=Tt;Pt&&(Vt+=`
	\u{1F6E0}\uFE0F Replacement: ${Pt}`),Ft&&(Vt+=`
	\u2699\uFE0F Version: ${Ft}`),Dt&&(Vt+=`
	\u{1F517} See ${Dt} for more details.`),i$2L(_t,Vt,Nt)}}function e$20(_t){return _t&&(typeof _t.on=="function"||typeof _t.addEventListener=="function")}function r$1H(_t,Tt,Mt){if(!e$20(_t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in _t)return _t.on(Tt,Mt);if(Array.isArray(Tt)){const Pt=Tt.slice();for(const Ft of Pt)_t.addEventListener(Ft,Mt);return{remove(){for(const Ft of Pt)_t.removeEventListener(Ft,Mt)}}}return _t.addEventListener(Tt,Mt),{remove(){_t.removeEventListener(Tt,Mt)}}}function t$1$(_t,Tt,Mt){if(!e$20(_t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in _t)return _t.once(Tt,Mt);const Pt=r$1H(_t,Tt,Ft=>{Pt.remove(),Mt.call(_t,Ft)});return{remove(){Pt.remove()}}}const o$21={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function i$2K({key:_t}){return o$21[_t]||_t}function m$2b(_t="Aborted"){return new s$2i("AbortError",_t)}function f$1M(_t,Tt="Aborted"){if(p$3C(_t))throw m$2b(Tt)}function h$1N(_t){return r$1P(_t)?"aborted"in _t?_t:_t.signal:_t}function p$3C(_t){const Tt=h$1N(_t);return r$1P(Tt)&&Tt.aborted}function w$18(_t){if(g$1l(_t))throw _t}function b$1e(_t){if(!g$1l(_t))throw _t}function v$16(_t,Tt){const Mt=h$1N(_t);if(!t$2e(Mt)){if(!Mt.aborted)return t$1$(Mt,"abort",()=>Tt());Tt()}}function d$28(_t,Tt){const Mt=h$1N(_t);if(!t$2e(Mt))return f$1M(Mt),t$1$(Mt,"abort",()=>Tt(m$2b()))}function y$1M(_t,Tt){const Mt=h$1N(Tt);return t$2e(Mt)?_t:new Promise((Pt,Ft)=>{let Dt=v$16(Tt,()=>Ft(m$2b()));const Nt=()=>Dt=a$31(Dt);_t.then(Nt,Nt),_t.then(Pt,Ft)})}function g$1l(_t){return _t&&_t.name==="AbortError"}async function j$17(_t){try{return await _t}catch(Tt){if(!g$1l(Tt))throw Tt}}function T$C(){let _t=null;const Tt=new Promise((Mt,Pt)=>{_t={promise:void 0,resolve:Mt,reject:Pt}});return _t.promise=Tt,_t}async function E$K(_t){if(!_t)return;if(typeof _t.forEach!="function"){const Mt=Object.keys(_t),Pt=Mt.map(Nt=>_t[Nt]),Ft=await E$K(Pt),Dt={};return Mt.map((Nt,Vt)=>Dt[Nt]=Ft[Vt]),Dt}const Tt=_t;return new Promise(Mt=>{const Pt=[];let Ft=Tt.length;Ft===0&&Mt(Pt),Tt.forEach(Dt=>{const Nt={promise:Dt||Promise.resolve(Dt)};Pt.push(Nt),Nt.promise.then(Vt=>{Nt.value=Vt}).catch(Vt=>{Nt.error=Vt}).then(()=>{--Ft,Ft===0&&Mt(Pt)})})})}async function C$w(_t){return(await E$K(_t)).filter(Tt=>!!Tt.value).map(Tt=>Tt.value)}function L$y(_t,Tt,Mt){const Pt=new AbortController;return v$16(Mt,()=>Pt.abort()),new Promise((Ft,Dt)=>{let Nt=setTimeout(()=>{Nt=0,Ft(Tt)},_t);v$16(Pt,()=>{Nt&&(clearTimeout(Nt),Dt(m$2b()))})})}function k$E(_t){return _t&&typeof _t.then=="function"}function $$j(_t){return k$E(_t)?_t:Promise.resolve(_t)}function x$V(_t,Tt=-1){let Mt,Pt,Ft,Dt,Nt=null;const Vt=(...zt)=>{if(Mt){Pt=zt,Dt&&Dt.reject(m$2b()),Dt=T$C();const Qt=Dt.promise;if(Nt){const Zt=Nt;Nt=null,Zt.abort()}return Qt}if(Ft=Dt||T$C(),Dt=null,Tt>0){const Qt=new AbortController;Mt=$$j(_t(...zt,Qt.signal));const Zt=Mt;L$y(Tt).then(()=>{Mt===Zt&&(Dt?Qt.abort():Nt=Qt)})}else Mt=1,Mt=$$j(_t(...zt));const Xt=()=>{const Qt=Pt;Pt=Ft=Mt=Nt=null,Qt!=null&&Vt(...Qt)},Ht=Mt,Wt=Ft;return Ht.then(Xt,Xt),Ht.then(Wt.resolve,Wt.reject),Wt.promise};return Vt}function D$D(){let _t,Tt;const Mt=new Promise((Ft,Dt)=>{_t=Ft,Tt=Dt}),Pt=Ft=>{_t(Ft)};return Pt.resolve=Ft=>_t(Ft),Pt.reject=Ft=>Tt(Ft),Pt.timeout=(Ft,Dt)=>t$20.setTimeout(()=>Pt.reject(Dt),Ft),Pt.promise=Mt,Pt}function O$z(_t,Tt){let Mt,Pt=new AbortController;const Ft=_t(Pt.signal);let Dt={promise:Ft,finished:!1,abort:()=>{Pt&&(Pt.abort(),Pt=null)}};const Nt=()=>{Dt&&(Dt.finished=!0,Dt=null),r$1P(Mt)&&(Mt.remove(),Mt=null),Pt=null};return Ft.then(Nt,Nt),Mt=v$16(Tt,()=>{r$1P(Dt)&&Dt.abort()}),Dt}async function q$p(_t){await Promise.resolve(),f$1M(_t)}function n$2Q(_t){return _t}function t$1_(_t){return _t}function u$2e(_t){return .001*_t}class c$3i{constructor(Tt){this.phases=Tt,this.paused=!1,this.ticks=-1,this.removed=!1}}class m$2a{constructor(Tt){this.callback=Tt,this.isActive=!0}remove(){this.isActive=!1}}let l$2B=0;const u$2d={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},f$1L=["prepare","preRender","render","postRender","update","finish"],h$1M=[],d$27=new n$2R;class w$17{constructor(Tt){this._task=Tt}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const k$D={frameTasks:d$27,willDispatch:!1,clearFrameTasks:j$16,dispatch:b$1d,executeFrameTasks:D$C};function v$15(_t){const Tt=new m$2a(_t);return h$1M.push(Tt),k$D.willDispatch||(k$D.willDispatch=!0,t$23(b$1d)),Tt}function A$B(_t){const Tt=new c$3i(_t);return d$27.push(Tt),T$B==null&&(l$2B=performance.now(),T$B=requestAnimationFrame(x$U)),new w$17(Tt)}let T$B=null;function j$16(_t=!1){d$27.forAll(Tt=>{Tt.removed=!0}),_t&&_$D()}function x$U(){const _t=performance.now();T$B=null,T$B=d$27.length>0?requestAnimationFrame(x$U):null,k$D.executeFrameTasks(_t)}function D$C(_t){const Tt=_t-l$2B;l$2B=_t;const Mt=1e3/60,Pt=Math.max(0,Tt-Mt);for(let Ft=0;Ft<f$1L.length;Ft++){const Dt=performance.now(),Nt=f$1L[Ft];d$27.forAll(Vt=>{var zt;Vt.paused||Vt.removed||(Ft===0&&Vt.ticks++,Vt.phases[Nt]&&(u$2d.time=_t,u$2d.deltaTime=Vt.ticks===0?0:Tt,u$2d.elapsedFrameTime=performance.now()-_t,u$2d.frameDuration=Mt-Pt,(zt=Vt.phases[Nt])==null||zt.call(Vt,u$2d)))}),R$y[Ft].record(performance.now()-Dt)}_$D(),q$o.record(performance.now()-_t)}const g$1k=new n$2R;function _$D(){d$27.forAll(_t=>{_t.removed&&g$1k.push(_t)}),d$27.removeUnorderedMany(g$1k.data,g$1k.length),g$1k.clear()}function b$1d(){for(;h$1M.length;){const _t=h$1M.shift();_t.isActive&&_t.callback()}k$D.willDispatch=!1}function y$1L(_t=1,Tt){const Mt=D$D(),Pt=()=>{p$3C(Tt)?Mt.reject(m$2b()):_t===0?Mt():(--_t,t$23(()=>Pt()))};return Pt(),Mt.promise}const R$y=f$1L.map(_t=>new e$24(_t)),q$o=new e$24("total");function n$2P(_t,Tt){for(const Mt of _t.entries())if(Tt(Mt[0]))return!0;return!1}let t$1Z=0;function e$1$(){return++t$1Z}class s$2f{constructor(Tt){this._notify=Tt,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const Tt=this._invalidCount;if(Tt===1)return this._invalidCount=0,void this._notify();this._invalidCount=Tt>0?Tt-1:0}onObservableAccessed(Tt){this._accessed.includes(Tt)||this._accessed.push(Tt)}onTrackingEnd(){const Tt=this._handles,Mt=this._accessed;for(let Pt=0;Pt<Mt.length;++Pt)Tt.push(Mt[Pt].observe(this));Mt.length=0}clear(){const Tt=this._handles;for(let Mt=0;Mt<Tt.length;++Mt)Tt[Mt].remove();Tt.length=0}}let r$1G=!1;const e$1_=[];function o$20(_t,Tt){let Mt=new s$2f(Dt),Pt=null,Ft=!1;function Dt(){if(!Mt||Ft)return;if(r$1G)return void i$2J(Dt);const Vt=Pt;Mt.clear(),r$1G=!0,Ft=!0,Pt=g$1n(Mt,_t),Ft=!1,r$1G=!1,Tt(Pt,Vt),c$3h()}function Nt(){Mt&&(Mt.destroy(),Mt=null,Pt=null)}return Ft=!0,Pt=g$1n(Mt,_t),Ft=!1,{remove:Nt}}function u$2c(_t,Tt){let Mt=new s$2f(Ft),Pt=null;function Ft(){Tt(Pt,Nt)}function Dt(){Mt&&(Mt.destroy(),Mt=null),Pt=null}function Nt(){return Mt?(Mt.clear(),Pt=g$1n(Mt,_t),Pt):null}return Nt(),{remove:Dt}}function l$2A(_t){let Tt=new s$2f(Pt),Mt=!1;function Pt(){Tt&&!Mt&&(r$1G?i$2J(Pt):(Tt.clear(),r$1G=!0,Mt=!0,g$1n(Tt,_t),Mt=!1,r$1G=!1,c$3h()))}function Ft(){Tt&&(Tt.destroy(),Tt=null)}return Mt=!0,g$1n(Tt,_t),Mt=!1,{remove:Ft}}function i$2J(_t){e$1_.includes(_t)||e$1_.unshift(_t)}function c$3h(){for(;e$1_.length;)e$1_.pop()()}var h$1L;(function(_t){_t[_t.Untracked=0]="Untracked",_t[_t.Tracked=1]="Tracked"})(h$1L||(h$1L={}));class f$1K{constructor(){this.uid=e$1$(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(Tt,Mt,Pt,Ft,Dt){return this.pool.acquire(h$1L.Untracked,Tt,Mt,Pt,Ft,Dt,d$2b)}static acquireTracked(Tt,Mt,Pt,Ft){return this.pool.acquire(h$1L.Tracked,Tt,Mt,Pt,null,null,Ft)}notify(Tt,Mt){this.type===h$1L.Untracked?this.callback.call(this.target,Tt,Mt,this.path,this.target):this.callback.call(null,Tt,Mt)}acquire(Tt,Mt,Pt,Ft,Dt,Nt,Vt){this.uid=e$1$(),this.removed=!1,this.type=Tt,this.oldValue=Mt,this.callback=Pt,this.getValue=Ft,this.target=Dt,this.path=Nt,this.equals=Vt}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=e$1$(),this.removed=!0}}f$1K.pool=new t$24(f$1K);const m$29=new t$29,p$3B=new Set;let v$14;function g$1j(_t){p$3B.delete(_t),p$3B.add(_t),v$14||(v$14=v$15(j$15))}function k$C(_t){if(_t.removed)return;const Tt=_t.oldValue,Mt=_t.getValue();_t.equals(Tt,Mt)||(_t.oldValue=Mt,_t.notify(Mt,Tt))}function q$n(_t){for(const Tt of p$3B.values())Tt.target===_t&&(Tt.removed=!0)}function j$15(){let _t=10;for(;v$14&&_t--;){v$14=null;const Tt=y$1K(),Mt=m$29.acquire();for(const Pt of Tt){const Ft=Pt.uid;k$C(Pt),Ft===Pt.uid&&Pt.removed&&Mt.push(Pt)}for(const Pt of p$3B)Pt.removed&&(Mt.push(Pt),p$3B.delete(Pt));for(const Pt of Mt)f$1K.pool.release(Pt);m$29.release(Mt),m$29.release(Tt),V$q.forEach(Pt=>Pt())}}function y$1K(){const _t=m$29.acquire();_t.length=p$3B.size;let Tt=0;for(const Mt of p$3B)_t[Tt]=Mt,++Tt;return p$3B.clear(),_t}const V$q=new Set;function U$x(_t){return V$q.add(_t),{remove(){V$q.delete(_t)}}}function b$1c(_t,Tt,Mt){let Pt=y$1P(_t,Tt,Mt,(Ft,Dt,Nt)=>{let Vt,zt,Xt=u$2c(()=>u$2h(Ft,Dt),(Ht,Wt)=>{Ft.__accessor__.destroyed||Vt&&Vt.uid!==zt?Pt.remove():(Vt||(Vt=f$1K.acquireUntracked(Ht,Nt,Wt,Ft,Dt),zt=Vt.uid),g$1j(Vt))});return{remove:h$1P(()=>{Xt.remove(),Vt&&(Vt.uid!==zt||Vt.removed||(Vt.removed=!0,g$1j(Vt)),Vt=null),Pt=Xt=null})}});return Pt}function T$A(_t,Tt,Mt){const Pt=y$1P(_t,Tt,Mt,(Ft,Dt,Nt)=>{let Vt=!1;return o$20(()=>u$2h(Ft,Dt),(zt,Xt)=>{Ft.__accessor__.destroyed?Pt.remove():Vt||(Vt=!0,d$2b(Xt,zt)||Nt.call(Ft,zt,Xt,Dt,Ft),Vt=!1)})});return Pt}function w$16(_t,Tt,Mt,Pt=!1){return!_t.__accessor__||_t.__accessor__.destroyed?{remove(){}}:Pt?T$A(_t,Tt,Mt):b$1c(_t,Tt,Mt)}function S$R(_t,Tt,Mt){let Pt,Ft,Dt=u$2c(_t,(Nt,Vt)=>{Pt&&Pt.uid!==Ft?Dt.remove():(Pt||(Pt=f$1K.acquireTracked(Nt,Tt,Vt,Mt),Ft=Pt.uid),g$1j(Pt))});return{remove:h$1P(()=>{Dt.remove(),Pt&&(Pt.uid!==Ft||Pt.removed||(Pt.removed=!0,g$1j(Pt)),Pt=null),Dt=null})}}function A$A(_t,Tt,Mt){let Pt=!1;return o$20(_t,(Ft,Dt)=>{Pt||(Pt=!0,Mt(Dt,Ft)||Tt(Ft,Dt),Pt=!1)})}function P$v(_t,Tt,Mt=!1,Pt=N$w){return Mt?A$A(_t,Tt,Pt):S$R(_t,Tt,Pt)}function x$T(_t){return n$2P(p$3B,Tt=>Tt.oldValue===_t)}function n$2O(_t,Tt){for(const[Mt,Pt]of _t)if(Tt(Pt,Mt))return!0;return!1}function t$1Y(_t,Tt){for(const[Mt,Pt]of _t)if(Tt(Pt,Mt))return Pt;return null}function r$1F(_t,Tt,Mt){const Pt=_t.get(Tt);if(Pt!==void 0)return Pt;const Ft=Mt();return _t.set(Tt,Ft),Ft}const r$1E=s$2l.getLogger("esri.core.Accessor");function t$1X(_t){return _t==null?_t:new Date(_t)}function o$1$(_t){return _t==null?_t:!!_t}function u$2b(_t){return _t==null?_t:_t.toString()}function a$2Z(_t){return _t==null?_t:(_t=parseFloat(_t),isNaN(_t)?0:_t)}function s$2e(_t){return _t==null?_t:Math.round(parseFloat(_t))}function i$2I(_t){return _t&&_t.constructor&&_t.constructor.__accessorMetadata__!==void 0}function l$2z(_t,Tt){return Tt!=null&&_t&&!(Tt instanceof _t)}function c$3g(_t){return _t&&"isCollection"in _t}function f$1J(_t){return _t&&_t.Type?typeof _t.Type=="function"?_t.Type:_t.Type.base:null}function p$3A(_t,Tt){if(!Tt||!Tt.constructor||!c$3g(Tt.constructor))return y$1J(_t,Tt)?Tt:new _t(Tt);const Mt=f$1J(_t.prototype.itemType),Pt=f$1J(Tt.constructor.prototype.itemType);return Mt?Pt?Mt===Pt?Tt:Mt.prototype.isPrototypeOf(Pt.prototype)?new _t(Tt):(y$1J(_t,Tt),Tt):new _t(Tt):Tt}function y$1J(_t,Tt){return!!i$2I(Tt)&&(r$1E.error("Accessor#set","Assigning an instance of '"+(Tt.declaredClass||"unknown")+"' which is not a subclass of '"+g$1i(_t)+"'"),!0)}function v$13(_t,Tt){return Tt==null?Tt:c$3g(_t)?p$3A(_t,Tt):l$2z(_t,Tt)?y$1J(_t,Tt)?Tt:new _t(Tt):Tt}function g$1i(_t){return _t&&_t.prototype&&_t.prototype.declaredClass||"unknown"}const d$26=new WeakMap;function h$1K(_t){switch(_t){case Number:return a$2Z;case S$Q:return s$2e;case Boolean:return o$1$;case String:return u$2b;case Date:return t$1X;default:return r$1F(d$26,_t,()=>v$13.bind(null,_t))}}function b$1b(_t,Tt){const Mt=h$1K(_t);return arguments.length===1?Mt:Mt(Tt)}function m$28(_t,Tt,Mt){return arguments.length===1?m$28.bind(null,_t):Tt&&(Array.isArray(Tt)?Tt.map(Pt=>_t(Pt,Mt)):[_t(Tt,Mt)])}function w$15(_t,Tt){return arguments.length===1?m$28(b$1b.bind(null,_t)):m$28(b$1b.bind(null,_t),Tt)}function A$z(_t,Tt,Mt){return Tt!==0&&Array.isArray(Mt)?Mt.map(Pt=>A$z(_t,Tt-1,Pt)):_t(Mt)}function $$i(_t,Tt,Mt){if(arguments.length===2)return $$i.bind(null,_t,Tt);if(!Mt)return Mt;let Pt=Tt,Ft=Mt=A$z(_t,Tt,Mt);for(;Pt>0&&Array.isArray(Ft);)Pt--,Ft=Ft[0];if(Ft!==void 0)for(let Dt=0;Dt<Pt;Dt++)Mt=[Mt];return Mt}function j$14(_t,Tt,Mt){return arguments.length===2?$$i(b$1b.bind(null,_t),Tt):$$i(b$1b.bind(null,_t),Tt,Mt)}function k$B(_t){return!!Array.isArray(_t)&&!_t.some(Tt=>{const Mt=typeof Tt;return!(Mt==="string"||Mt==="number"||Mt==="function"&&_t.length>1)})}function M$Q(_t,Tt){if(arguments.length===2)return M$Q(_t).call(null,Tt);const Mt=new Set,Pt=_t.filter(Vt=>typeof Vt!="function"),Ft=_t.filter(Vt=>typeof Vt=="function");for(const Vt of _t)typeof Vt!="string"&&typeof Vt!="number"||Mt.add(Vt);let Dt=null,Nt=null;return(Vt,zt)=>{if(Vt==null)return Vt;const Xt=typeof Vt,Ht=Xt==="string"||Xt==="number";return Ht&&(Mt.has(Vt)||Ft.some(Wt=>Xt==="string"&&Wt===String||Xt==="number"&&Wt===Number))||Xt==="object"&&Ft.some(Wt=>!l$2z(Vt,Wt))?Vt:(Ht&&Pt.length?(Dt||(Dt=Pt.map(Wt=>typeof Wt=="string"?`'${Wt}'`:`${Wt}`).join(", ")),r$1E.error("Accessor#set",`'${Vt}' is not a valid value for this property, only the following values are valid: ${Dt}`)):typeof Vt=="object"&&Ft.length?(Nt||(Nt=Ft.map(Wt=>g$1i(Wt)).join(", ")),r$1E.error("Accessor#set",`'${Vt}' is not a valid value for this property, value must be one of ${Nt}`)):r$1E.error("Accessor#set",`'${Vt}' is not a valid value for this property`),zt&&(zt.valid=!1),null)}}function N$v(_t,Tt){if(arguments.length===2)return N$v(_t).call(null,Tt);const Mt={},Pt=[],Ft=[];for(const zt in _t.typeMap){const Xt=_t.typeMap[zt];Mt[zt]=b$1b(Xt),Pt.push(g$1i(Xt)),Ft.push(zt)}const Dt=()=>`'${Pt.join("', '")}'`,Nt=()=>`'${Ft.join("', '")}'`,Vt=typeof _t.key=="string"?zt=>zt[_t.key]:_t.key;return zt=>{if(_t.base&&!l$2z(_t.base,zt)||zt==null)return zt;const Xt=Vt(zt)||_t.defaultKeyValue,Ht=Mt[Xt];if(!Ht)return r$1E.error("Accessor#set",`Invalid property value, value needs to be one of ${Dt()}, or a plain object that can autocast (having .type = ${Nt()})`),null;if(!l$2z(_t.typeMap[Xt],zt))return zt;if(typeof _t.key=="string"&&!i$2I(zt)){const Wt={};for(const Qt in zt)Qt!==_t.key&&(Wt[Qt]=zt[Qt]);return Ht(Wt)}return Ht(zt)}}class S$Q{}const T$z={native:_t=>({type:"native",value:_t}),array:_t=>({type:"array",value:_t}),oneOf:_t=>({type:"one-of",values:_t})};function _$C(_t){if(!_t||!("type"in _t))return!1;switch(_t.type){case"native":case"array":case"one-of":return!0}return!1}function B$t(_t){switch(_t.type){case"native":return b$1b(_t.value);case"array":return m$28(B$t(_t.value));case"one-of":return C$v(_t);default:return null}}function C$v(_t){let Tt=null;return(Mt,Pt)=>F$y(Mt,_t)?Mt:(Tt==null&&(Tt=D$B(_t)),r$1E.error("Accessor#set",`Invalid property value, value needs to be of type ${Tt}`),Pt&&(Pt.valid=!1),null)}function D$B(_t){switch(_t.type){case"native":switch(_t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case S$Q:return"integer";case Date:return"date";default:return g$1i(_t.value)}case"array":return`array of ${D$B(_t.value)}`;case"one-of":{const Tt=_t.values.map(Mt=>D$B(Mt));return`one of ${Tt.slice(0,Tt.length-1)} or ${Tt[Tt.length-1]}`}}return"unknown"}function F$y(_t,Tt){if(_t==null)return!0;switch(Tt.type){case"native":switch(Tt.value){case Number:case S$Q:return typeof _t=="number";case Boolean:return typeof _t=="boolean";case String:return typeof _t=="string"}return _t instanceof Tt.value;case"array":return!!Array.isArray(_t)&&!_t.some(Mt=>!F$y(Mt,Tt.value));case"one-of":return Tt.values.some(Mt=>F$y(_t,Mt))}}function d$25(_t={}){return(Tt,Mt)=>{if(Tt===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${Tt.name}.${Mt}. Accessor does not support static properties.`);const Pt=Object.getOwnPropertyDescriptor(Tt,Mt),Ft=s$2m(Tt,Mt);Pt&&(Pt.get||Pt.set?(Ft.get=Pt.get||Ft.get,Ft.set=Pt.set||Ft.set):"value"in Pt&&("value"in _t&&s$2l.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${Mt}" on "${Tt.constructor.name}" already defined in the metadata`,_t),Ft.value=_t.value=Pt.value)),_t.readOnly!=null&&(Ft.readOnly=_t.readOnly);const Dt=_t.aliasOf;if(Dt){const zt=typeof Dt=="string"?Dt:Dt.source,Xt=typeof Dt=="string"?null:Dt.overridable===!0;let Ht;Ft.dependsOn=[zt],Ft.get=function(){let Wt=o$28(this,zt);if(typeof Wt=="function"){Ht||(Ht=zt.split(".").slice(0,-1).join("."));const Qt=o$28(this,Ht);Qt&&(Wt=Wt.bind(Qt))}return Wt},Ft.readOnly||(Ft.set=Xt?function(Wt){Wt!==void 0?this._override(Mt,Wt):this._clearOverride(Mt)}:function(Wt){n$2S(this,zt,Wt)})}const Nt=_t.type,Vt=_t.types;Ft.cast||(Nt?Ft.cast=h$1J(Nt):Vt&&(Array.isArray(Vt)?Ft.cast=m$28(N$v(Vt[0])):Ft.cast=N$v(Vt))),_t.range&&(Ft.cast=v$12(Ft.cast,_t.range)),i$2P(Ft,_t)}}function y$1I(_t,Tt,Mt){const Pt=s$2m(_t,Mt);Pt.json||(Pt.json={});let Ft=Pt.json;return Tt!==void 0&&(Ft.origins||(Ft.origins={}),Ft.origins[Tt]||(Ft.origins[Tt]={}),Ft=Ft.origins[Tt]),Ft}function h$1J(_t){let Tt=0,Mt=_t;if(_$C(_t))return B$t(_t);for(;Array.isArray(Mt)&&Mt.length===1&&typeof Mt[0]!="string"&&typeof Mt[0]!="number";)Mt=Mt[0],Tt++;const Pt=Mt;if(k$B(Pt))return Tt===0?M$Q(Pt):$$i(M$Q(Pt),Tt);if(Tt===1)return w$15(Pt);if(Tt>1)return j$14(Pt,Tt);const Ft=_t;return Ft.from?Ft.from:b$1b(Ft)}function v$12(_t,Tt){return Mt=>{let Pt=+_t(Mt);return Tt.step!=null&&(Pt=Math.round(Pt/Tt.step)*Tt.step),Tt.min!=null&&(Pt=Math.max(Tt.min,Pt)),Tt.max!=null&&(Pt=Math.min(Tt.max,Pt)),Pt}}function n$2N(_t){if(_t.json&&_t.json.origins){const Tt=_t.json.origins,Mt={"web-document":["web-scene","web-map"]};for(const Pt in Mt)if(Tt[Pt]){const Ft=Tt[Pt];Mt[Pt].forEach(Dt=>{Tt[Dt]=Ft}),delete Tt[Pt]}}}class t$1W extends s$2j{constructor(Tt,Mt,Pt){if(super(Tt,Mt,Pt),!(this instanceof t$1W))return new t$1W(Tt,Mt,Pt)}}t$1W.prototype.type="warning";function e$1Z(_t){return!!_t&&_t.prototype&&_t.prototype.declaredClass&&_t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const i$2H=s$2l.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function p$3z(_t,Tt,Mt){var Pt,Ft;_t&&(!Mt&&!Tt.read||((Pt=Tt.read)==null?void 0:Pt.reader)||((Ft=Tt.read)==null?void 0:Ft.enabled)===!1||l$2y(_t)&&o$2d("read.reader",s$2d(_t),Tt))}function s$2d(_t){var Mt,Pt,Ft;const Tt=(Mt=_t.ndimArray)!=null?Mt:0;if(Tt>1)return c$3f(_t);if(Tt===1)return a$2Y(_t);if("type"in _t&&d$24(_t.type)){const Dt=(Ft=(Pt=_t.type.prototype)==null?void 0:Pt.itemType)==null?void 0:Ft.Type,Nt=a$2Y(typeof Dt=="function"?{type:Dt}:{types:Dt});return(Vt,zt,Xt)=>{const Ht=Nt(Vt,zt,Xt);return Ht&&new _t.type(Ht)}}return u$2a(_t)}function u$2a(_t){return"type"in _t?y$1H(_t.type):g$1h(_t.types)}function y$1H(_t){return _t.prototype.read?(Tt,Mt,Pt)=>{if(Tt==null)return Tt;const Ft=typeof Tt;if(Ft!=="object")return void i$2H.error(`Expected JSON value of type 'object' to deserialize type '${_t.prototype.declaredClass}', but got '${Ft}'`);const Dt=new _t;return Dt.read(Tt,Pt),Dt}:_t.fromJSON}function f$1I(_t,Tt,Mt,Pt){return Pt!==0&&Array.isArray(Tt)?Tt.map(Ft=>f$1I(_t,Ft,Mt,Pt-1)):_t(Tt,void 0,Mt)}function c$3f(_t){var Ft;const Tt=u$2a(_t),Mt=f$1I.bind(null,Tt),Pt=(Ft=_t.ndimArray)!=null?Ft:0;return(Dt,Nt,Vt)=>{if(Dt==null)return Dt;Dt=Mt(Dt,Vt,Pt);let zt=Pt,Xt=Dt;for(;zt>0&&Array.isArray(Xt);)zt--,Xt=Xt[0];if(Xt!==void 0)for(let Ht=0;Ht<zt;Ht++)Dt=[Dt];return Dt}}function a$2Y(_t){const Tt=u$2a(_t);return(Mt,Pt,Ft)=>{if(Mt==null)return Mt;if(Array.isArray(Mt)){const Nt=[];for(const Vt of Mt){const zt=Tt(Vt,void 0,Ft);zt!==void 0&&Nt.push(zt)}return Nt}const Dt=Tt(Mt,void 0,Ft);return Dt!==void 0?[Dt]:void 0}}function d$24(_t){if(!e$1Z(_t))return!1;const Tt=_t.prototype.itemType;return!(!Tt||!Tt.Type)&&(typeof Tt.Type=="function"?m$27(Tt.Type):j$13(Tt.Type))}function l$2y(_t){return"types"in _t?j$13(_t.types):m$27(_t.type)}function m$27(_t){return!Array.isArray(_t)&&!!_t&&_t.prototype&&("read"in _t.prototype||"fromJSON"in _t||d$24(_t))}function j$13(_t){for(const Tt in _t.typeMap)if(!m$27(_t.typeMap[Tt]))return!1;return!0}function g$1h(_t){var Pt;let Tt=null;const Mt=(Pt=_t.errorContext)!=null?Pt:"type";return(Ft,Dt,Nt)=>{if(Ft==null)return Ft;const Vt=typeof Ft;if(Vt!=="object")return void i$2H.error(`Expected JSON value of type 'object' to deserialize, but got '${Vt}'`);Tt||(Tt=v$11(_t));const zt=_t.key;if(typeof zt!="string")return;const Xt=Ft[zt],Ht=Xt?Tt[Xt]:_t.defaultKeyValue?_t.typeMap[_t.defaultKeyValue]:void 0;if(!Ht){const Qt=`Type '${Xt||"unknown"}' is not supported`;return Nt&&Nt.messages&&Ft&&Nt.messages.push(new t$1W(`${Mt}:unsupported`,Qt,{definition:Ft,context:Nt})),void i$2H.error(Qt)}const Wt=new Ht;return Wt.read(Ft,Nt),Wt}}function v$11(_t){var Mt,Pt;const Tt={};for(const Ft in _t.typeMap){const Dt=_t.typeMap[Ft],Nt=n$2V(Dt.prototype);if(typeof _t.key=="function")continue;const Vt=Nt.properties[_t.key];if(!Vt)continue;((Mt=Vt.json)==null?void 0:Mt.type)&&Array.isArray(Vt.json.type)&&Vt.json.type.length===1&&typeof Vt.json.type[0]=="string"&&(Tt[Vt.json.type[0]]=Dt);const zt=(Pt=Vt.json)==null?void 0:Pt.write;if(!zt||!zt.writer){Tt[Ft]=Dt;continue}const Xt=zt.target,Ht=typeof Xt=="string"?Xt:_t.key,Wt={};zt.writer(Ft,Wt,Ht),Wt[Ht]&&(Tt[Wt[Ht]]=Dt)}return Tt}function e$1Y(_t){if(_t.json||(_t.json={}),o$1_(_t.json),n$2M(_t.json),r$1D(_t.json),_t.json.origins)for(const Tt in _t.json.origins)o$1_(_t.json.origins[Tt]),n$2M(_t.json.origins[Tt]),r$1D(_t.json.origins[Tt]);return!0}function r$1D(_t){_t.name&&(_t.read&&typeof _t.read=="object"?_t.read.source===void 0&&(_t.read.source=_t.name):_t.read={source:_t.name},_t.write&&typeof _t.write=="object"?_t.write.target===void 0&&(_t.write.target=_t.name):_t.write={target:_t.name})}function o$1_(_t){typeof _t.read=="boolean"?_t.read={enabled:_t.read}:typeof _t.read=="function"?_t.read={enabled:!0,reader:_t.read}:_t.read&&typeof _t.read=="object"&&_t.read.enabled===void 0&&(_t.read.enabled=!0)}function n$2M(_t){typeof _t.write=="boolean"?_t.write={enabled:_t.write}:typeof _t.write=="function"?_t.write={enabled:!0,writer:_t.write}:_t.write&&typeof _t.write=="object"&&_t.write.enabled===void 0&&(_t.write.enabled=!0)}const i$2G=s$2l.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function o$1Z(_t,Tt){var Pt;if(!Tt.write||Tt.write.writer||Tt.write.enabled===!1&&!Tt.write.overridePolicy)return;const Mt=(Pt=_t==null?void 0:_t.ndimArray)!=null?Pt:0;_t&&(Mt===1||"type"in _t&&e$1Z(_t.type))?Tt.write.writer=c$3e:Mt>1?Tt.write.writer=w$14(Mt):Tt.types?Array.isArray(Tt.types)?Tt.write.writer=f$1H(Tt.types[0]):Tt.write.writer=s$2c(Tt.types):Tt.write.writer=p$3y}function s$2c(_t){return(Tt,Mt,Pt,Ft)=>Tt?u$29(Tt,_t,Ft)?p$3y(Tt,Mt,Pt,Ft):void 0:p$3y(Tt,Mt,Pt,Ft)}function u$29(_t,Tt,Mt){var Pt,Ft;for(const Dt in Tt.typeMap)if(_t instanceof Tt.typeMap[Dt])return!0;if(Mt!=null&&Mt.messages){const Dt=(Pt=Tt.errorContext)!=null?Pt:"type",Nt=`Values of type '${(Ft=typeof Tt.key!="function"?_t[Tt.key]:_t.declaredClass)!=null?Ft:"Unknown"}' cannot be written`;Mt&&Mt.messages&&_t&&Mt.messages.push(new s$2i(`${Dt}:unsupported`,Nt,{definition:_t,context:Mt})),i$2G.error(Nt)}return!1}function f$1H(_t){return(Tt,Mt,Pt,Ft)=>!Tt||!Array.isArray(Tt)?p$3y(Tt,Mt,Pt,Ft):p$3y(Tt.filter(Dt=>u$29(Dt,_t,Ft)),Mt,Pt,Ft)}function p$3y(_t,Tt,Mt,Pt){o$2d(Mt,y$1G(_t,Pt),Tt)}function y$1G(_t,Tt){return _t&&typeof _t.write=="function"?_t.write({},Tt):_t&&typeof _t.toJSON=="function"?_t.toJSON():typeof _t=="number"?a$2X(_t):_t}function a$2X(_t){return _t===-1/0?-Number.MAX_VALUE:_t===1/0?Number.MAX_VALUE:isNaN(_t)?null:_t}function c$3e(_t,Tt,Mt,Pt){let Ft;_t===null?Ft=null:_t&&typeof _t.map=="function"?(Ft=_t.map(Dt=>y$1G(Dt,Pt)),typeof Ft.toArray=="function"&&(Ft=Ft.toArray())):Ft=[y$1G(_t,Pt)],o$2d(Mt,Ft,Tt)}function l$2x(_t,Tt,Mt){return Mt!==0&&Array.isArray(_t)?_t.map(Pt=>l$2x(Pt,Tt,Mt-1)):y$1G(_t,Tt)}function w$14(_t){return(Tt,Mt,Pt,Ft)=>{let Dt;if(Tt===null)Dt=null;else{Dt=l$2x(Tt,Ft,_t);let Nt=_t,Vt=Dt;for(;Nt>0&&Array.isArray(Vt);)Nt--,Vt=Vt[0];if(Vt!==void 0)for(let zt=0;zt<Nt;zt++)Dt=[Dt]}o$2d(Pt,Dt,Mt)}}function o$1Y(_t,Tt){return a$2W(_t,"read",Tt)}function s$2b(_t,Tt){return a$2W(_t,"write",Tt)}function a$2W(_t,Tt,Mt){let Pt=_t&&_t.json;if(_t&&_t.json&&_t.json.origins&&Mt){const Ft=_t.json.origins[Mt.origin];Ft&&(Tt==="any"||Tt in Ft)&&(Pt=Ft)}return Pt}function p$3x(_t){const Tt=y$1F(_t);if(_t.json.origins)for(const Mt in _t.json.origins){const Pt=_t.json.origins[Mt],Ft=Pt.types?f$1G(Pt):Tt;p$3z(Ft,Pt,!1),Pt.types&&!Pt.write&&_t.json.write&&_t.json.write.enabled&&(Pt.write={..._t.json.write}),o$1Z(Ft,Pt)}p$3z(Tt,_t.json,!0),o$1Z(Tt,_t.json)}function y$1F(_t){return _t.json.types?u$28(_t.json):_t.type?j$12(_t):u$28(_t)}function f$1G(_t){return _t.type?j$12(_t):u$28(_t)}function j$12(_t){if(!_t.type)return;let Tt=0,Mt=_t.type;for(;Array.isArray(Mt)&&!k$B(Mt);)Mt=Mt[0],Tt++;return{type:Mt,ndimArray:Tt}}function u$28(_t){if(!_t.types)return;let Tt=0,Mt=_t.types;for(;Array.isArray(Mt);)Mt=Mt[0],Tt++;return{types:Mt,ndimArray:Tt}}function c$3d(_t){e$1Y(_t)&&(n$2N(_t),p$3x(_t))}const s$2a=new Set,i$2F=new Set;function n$2L(_t){return Tt=>{Tt.prototype.declaredClass=_t,c$3c(Tt);const Mt=[],Pt=[];let Ft=Tt.prototype;for(;Ft;)Ft.hasOwnProperty("initialize")&&!s$2a.has(Ft.initialize)&&(s$2a.add(Ft.initialize),Mt.push(Ft.initialize)),Ft.hasOwnProperty("destroy")&&!i$2F.has(Ft.destroy)&&(i$2F.add(Ft.destroy),Pt.push(Ft.destroy)),Ft=Object.getPrototypeOf(Ft);s$2a.clear(),i$2F.clear();class Dt extends Tt{constructor(...Vt){if(super(...Vt),this.constructor===Dt&&typeof this.postscript=="function"){if(Mt.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let zt=Mt.length-1;zt>=0;zt--)Mt[zt].call(this)}}),Pt.length){let zt=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!zt){zt=!0;for(let Xt=0;Xt<Pt.length;Xt++)Pt[Xt].call(this)}}})}this.postscript(...Vt)}}}return Dt.__accessorMetadata__=n$2V(Tt.prototype),Dt.prototype.declaredClass=_t,Dt}}function a$2V(_t,Tt){return Tt.get==null?function(){const Mt=this.__accessor__.properties.get(_t);if(Mt===void 0)return;l$2E(Mt);const Pt=this.__accessor__.store;return Pt.has(_t)?Pt.get(_t):Mt.metadata.value}:function(){const Mt=this.__accessor__.properties.get(_t);if(Mt!==void 0)return Mt.getComputed()}}function c$3c(_t){const Tt=_t.prototype,Mt=n$2V(Tt).properties,Pt={};for(const Ft of Object.getOwnPropertyNames(Mt)){const Dt=Mt[Ft];c$3d(Dt),Pt[Ft]={enumerable:!0,configurable:!0,get:a$2V(Ft,Dt),set(Nt){const Vt=this.__accessor__;if(Vt!==void 0){if(!Object.isFrozen(this)){if(Vt.initialized&&Dt.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${Ft}' of ${this.declaredClass}`);if(Vt.lifecycle===I$F.CONSTRUCTED&&Dt.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${Ft}' of ${this.declaredClass}`);Vt.set(Ft,Nt)}}else Object.defineProperty(this,Ft,{enumerable:!0,configurable:!0,writable:!0,value:Nt})}}}Object.defineProperties(_t.prototype,Pt)}var p$3w;function l$2w(_t){var Tt;if(_t==null)return{value:_t};if(Array.isArray(_t))return{type:[_t[0]],value:null};switch(typeof _t){case"object":return((Tt=_t.constructor)==null?void 0:Tt.__accessorMetadata__)||_t instanceof Date?{type:_t.constructor,value:_t}:_t;case"boolean":return{type:Boolean,value:_t};case"string":return{type:String,value:_t};case"number":return{type:Number,value:_t};case"function":return{type:_t,value:null};default:return}}const d$23=Symbol("Accessor-Handles");class y$1E{constructor(...Tt){if(this[p$3w]=null,this.constructor===y$1E)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new v$17(this)}),Tt.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,Tt))}static createSubclass(Tt={}){if(Array.isArray(Tt))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:Mt,declaredClass:Pt,constructor:Ft}=Tt;delete Tt.declaredClass,delete Tt.properties,delete Tt.constructor;const Dt=this;class Nt extends Dt{constructor(...zt){super(...zt),this.inherited=null,Ft&&Ft.apply(this,zt)}}n$2V(Nt.prototype);for(const Vt in Tt){const zt=Tt[Vt];Nt.prototype[Vt]=typeof zt=="function"?function(...Xt){const Ht=this.inherited;let Wt;this.inherited=function(...Qt){if(Dt.prototype[Vt])return Dt.prototype[Vt].apply(this,Qt)};try{Wt=zt.apply(this,Xt)}catch(Qt){throw this.inherited=Ht,Qt}return this.inherited=Ht,Wt}:Tt[Vt]}for(const Vt in Mt){const zt=l$2w(Mt[Vt]);d$25(zt)(Nt.prototype,Vt)}return n$2L(Pt)(Nt)}postscript(Tt){const Mt=this.__accessor__,Pt=Mt.ctorArgs||Tt;Mt.initialize(),Pt&&(this.set(Pt),Mt.ctorArgs=null),Mt.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(o$2f(this[d$23],Tt=>{Tt.forEach(Mt=>Mt.remove())}),this[d$23]=null,q$n(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===I$F.CONSTRUCTED||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(Tt){this.get(Tt)}get(Tt){return o$28(this,Tt)}hasOwnProperty(Tt){return this.__accessor__?this.__accessor__.has(Tt):Object.prototype.hasOwnProperty.call(this,Tt)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(Tt,Mt){return n$2S(this,Tt,Mt),this}watch(Tt,Mt,Pt){return w$16(this,Tt,Mt,Pt)}own(Tt){let Mt=this[d$23];if(t$2e(Mt)&&(Mt=this[d$23]=new Set),t$28(Tt))for(const Pt of Tt)Mt.add(Pt);else Mt.add(Tt)}_clearOverride(Tt){return this.__accessor__.clearOverride(Tt)}_override(Tt,Mt){return this.__accessor__.override(Tt,Mt)}_isOverridden(Tt){return this.__accessor__.isOverridden(Tt)}notifyChange(Tt){this.__accessor__.notifyChange(Tt)}_get(Tt){return this.__accessor__.internalGet(Tt)}_set(Tt,Mt){return this.__accessor__.internalSet(Tt,Mt),this}}p$3w=d$23;class i$2E{constructor(){this._emitter=new i$2E.EventEmitter(this)}emit(Tt,Mt){return this._emitter.emit(Tt,Mt)}on(Tt,Mt){return this._emitter.on(Tt,Mt)}once(Tt,Mt){return this._emitter.once(Tt,Mt)}hasEventListener(Tt){return this._emitter.hasEventListener(Tt)}}(function(_t){class Tt{constructor(Ft=null){this.target=Ft,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(Ft,Dt){const Nt=this._listenersMap&&this._listenersMap.get(Ft);if(!Nt)return!1;const Vt=this.target||this;return[...Nt].forEach(zt=>{zt.call(Vt,Dt)}),Nt.length>0}on(Ft,Dt){if(Array.isArray(Ft)){const Vt=Ft.map(zt=>this.on(zt,Dt));return r$1M(Vt)}if(Ft.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const Nt=this._listenersMap.get(Ft)||[];return Nt.push(Dt),this._listenersMap.set(Ft,Nt),{remove:()=>{const Vt=this._listenersMap&&this._listenersMap.get(Ft)||[],zt=Vt.indexOf(Dt);zt>=0&&Vt.splice(zt,1)}}}once(Ft,Dt){const Nt=this.on(Ft,Vt=>{Nt.remove(),Dt.call(null,Vt)});return Nt}hasEventListener(Ft){const Dt=this._listenersMap&&this._listenersMap.get(Ft);return Dt!=null&&Dt.length>0}}_t.EventEmitter=Tt,_t.EventedMixin=Pt=>{let Ft=class extends Pt{constructor(){super(...arguments),this._emitter=new Tt}destroy(){this._emitter.clear()}emit(Dt,Nt){return this._emitter.emit(Dt,Nt)}on(Dt,Nt){return this._emitter.on(Dt,Nt)}once(Dt,Nt){return this._emitter.once(Dt,Nt)}hasEventListener(Dt){return this._emitter.hasEventListener(Dt)}};return Ft=e$2a([n$2L("esri.core.Evented")],Ft),Ft};let Mt=class extends y$1E{constructor(){super(...arguments),this._emitter=new i$2E.EventEmitter(this)}destroy(){this._emitter.clear()}emit(Pt,Ft){return this._emitter.emit(Pt,Ft)}on(Pt,Ft){return this._emitter.on(Pt,Ft)}once(Pt,Ft){return this._emitter.once(Pt,Ft)}hasEventListener(Pt){return this._emitter.hasEventListener(Pt)}};Mt=e$2a([n$2L("esri.core.Evented")],Mt),_t.EventedAccessor=Mt})(i$2E||(i$2E={}));const n$2K=i$2E;var E$J;(function(_t){_t[_t.ADD=1]="ADD",_t[_t.REMOVE=2]="REMOVE",_t[_t.MOVE=4]="MOVE"})(E$J||(E$J={}));function n$2J(_t){return(Tt,Mt)=>{Tt[Mt]=_t}}class e$1X{constructor(){this._observers=[]}observe(Tt){return this._observers.includes(Tt)||this._observers.push(Tt),new s$2k(this._observers,Tt)}notify(){const Tt=this._observers.slice();for(let Mt=0;Mt<Tt.length;++Mt){const Pt=Tt[Mt];Pt.onInvalidated(),Pt.onCommitted()}}}var g$1g;class p$3v{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(Tt){this.defaultPrevented=!1,this.item=Tt}}const b$1a=new e$29(p$3v,void 0,_t=>{_t.item=null,_t.target=null,_t.defaultPrevented=!1,_t.cancellable=!1}),d$22=()=>{};function v$10(_t){return _t?_t instanceof V$p?_t.toArray():_t.length?Array.prototype.slice.apply(_t):[]:[]}function E$I(_t){if(_t&&_t.length)return _t[0]}function y$1D(_t,Tt,Mt,Pt){const Ft=Math.min(_t.length-Mt,Tt.length-Pt);let Dt=0;for(;Dt<Ft&&_t[Mt+Dt]===Tt[Pt+Dt];)Dt++;return Dt}function C$u(_t,Tt,Mt,Pt){Tt&&Tt.forEach((Ft,Dt,Nt)=>{_t.push(Ft),C$u(_t,Mt.call(Pt,Ft,Dt,Nt),Mt,Pt)})}const A$y=new Set,O$y=new Set,M$P=new Set,D$A=new Map;let x$S=0,V$p=g$1g=class extends n$2K.EventedAccessor{constructor(_t){super(_t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new e$1X,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:x$S++})}static isCollection(_t){return _t!=null&&_t instanceof g$1g}normalizeCtorArgs(_t){return _t?Array.isArray(_t)||_t instanceof g$1g?{items:_t}:_t:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return l$2E(this._observable),this._items}set items(_t){this._emitBeforeChanges(E$J.ADD)||(this._splice(0,this.length,v$10(_t)),this._emitAfterChanges(E$J.ADD))}hasEventListener(_t){return _t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(_t)}on(_t,Tt){if(_t==="change"){const Mt=this._chgListeners,Pt={removed:!1,callback:Tt};return Mt.push(Pt),this._notifications&&this._notifications.push({listeners:Mt.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=d$22,Pt.removed=!0,Mt.splice(Mt.indexOf(Pt),1)}}}return this._emitter.on(_t,Tt)}once(_t,Tt){const Mt=this.on(_t,Tt);return{remove(){Mt.remove()}}}add(_t,Tt){if(l$2E(this._observable),this._emitBeforeChanges(E$J.ADD))return this;const Mt=this.getNextIndex(Tt!=null?Tt:null);return this._splice(Mt,0,[_t]),this._emitAfterChanges(E$J.ADD),this}addMany(_t,Tt=this._items.length){if(l$2E(this._observable),!_t||!_t.length)return this;if(this._emitBeforeChanges(E$J.ADD))return this;const Mt=this.getNextIndex(Tt);return this._splice(Mt,0,v$10(_t)),this._emitAfterChanges(E$J.ADD),this}at(_t){if(l$2E(this._observable),(_t=Math.trunc(_t)||0)<0&&(_t+=this.length),!(_t<0||_t>=this.length))return this._items[_t]}removeAll(){if(l$2E(this._observable),!this.length||this._emitBeforeChanges(E$J.REMOVE))return[];const _t=this._splice(0,this.length)||[];return this._emitAfterChanges(E$J.REMOVE),_t}clone(){return l$2E(this._observable),this._createNewInstance({items:this._items.map(m$2e)})}concat(..._t){l$2E(this._observable);const Tt=_t.map(v$10);return this._createNewInstance({items:this._items.concat(...Tt)})}drain(_t,Tt){if(l$2E(this._observable),!this.length||this._emitBeforeChanges(E$J.REMOVE))return;const Mt=this._splice(0,this.length),Pt=Mt.length;for(let Ft=0;Ft<Pt;Ft++)_t.call(Tt,Mt[Ft],Ft,Mt);this._emitAfterChanges(E$J.REMOVE)}every(_t,Tt){return l$2E(this._observable),this._items.every(_t,Tt)}filter(_t,Tt){let Mt;return l$2E(this._observable),Mt=arguments.length===2?this._items.filter(_t,Tt):this._items.filter(_t),this._createNewInstance({items:Mt})}find(_t,Tt){return l$2E(this._observable),this._items.find(_t,Tt)}findIndex(_t,Tt){return l$2E(this._observable),this._items.findIndex(_t,Tt)}flatten(_t,Tt){l$2E(this._observable);const Mt=[];return C$u(Mt,this,_t,Tt),new g$1g(Mt)}forEach(_t,Tt){return l$2E(this._observable),this._items.forEach(_t,Tt)}getItemAt(_t){return l$2E(this._observable),this._items[_t]}getNextIndex(_t){l$2E(this._observable);const Tt=this.length;return(_t=_t==null?Tt:_t)<0?_t=0:_t>Tt&&(_t=Tt),_t}includes(_t,Tt=0){return l$2E(this._observable),this._items.includes(_t,Tt)}indexOf(_t,Tt=0){return l$2E(this._observable),this._items.indexOf(_t,Tt)}join(_t=","){return l$2E(this._observable),this._items.join(_t)}lastIndexOf(_t,Tt=this.length-1){return l$2E(this._observable),this._items.lastIndexOf(_t,Tt)}map(_t,Tt){l$2E(this._observable);const Mt=this._items.map(_t,Tt);return new g$1g({items:Mt})}reorder(_t,Tt=this.length-1){l$2E(this._observable);const Mt=this.indexOf(_t);if(Mt!==-1){if(Tt<0?Tt=0:Tt>=this.length&&(Tt=this.length-1),Mt!==Tt){if(this._emitBeforeChanges(E$J.MOVE))return _t;this._splice(Mt,1),this._splice(Tt,0,[_t]),this._emitAfterChanges(E$J.MOVE)}return _t}}pop(){if(l$2E(this._observable),!this.length||this._emitBeforeChanges(E$J.REMOVE))return;const _t=E$I(this._splice(this.length-1,1));return this._emitAfterChanges(E$J.REMOVE),_t}push(..._t){return l$2E(this._observable),this._emitBeforeChanges(E$J.ADD)||(this._splice(this.length,0,_t),this._emitAfterChanges(E$J.ADD)),this.length}reduce(_t,Tt){l$2E(this._observable);const Mt=this._items;return arguments.length===2?Mt.reduce(_t,Tt):Mt.reduce(_t)}reduceRight(_t,Tt){l$2E(this._observable);const Mt=this._items;return arguments.length===2?Mt.reduceRight(_t,Tt):Mt.reduceRight(_t)}remove(_t){return l$2E(this._observable),this.removeAt(this.indexOf(_t))}removeAt(_t){if(l$2E(this._observable),_t<0||_t>=this.length||this._emitBeforeChanges(E$J.REMOVE))return;const Tt=E$I(this._splice(_t,1));return this._emitAfterChanges(E$J.REMOVE),Tt}removeMany(_t){if(l$2E(this._observable),!_t||!_t.length||this._emitBeforeChanges(E$J.REMOVE))return[];const Tt=_t instanceof g$1g?_t.toArray():_t,Mt=this._items,Pt=[],Ft=Tt.length;for(let Dt=0;Dt<Ft;Dt++){const Nt=Tt[Dt],Vt=Mt.indexOf(Nt);if(Vt>-1){const zt=1+y$1D(Tt,Mt,Dt+1,Vt+1),Xt=this._splice(Vt,zt);Xt&&Xt.length>0&&Pt.push.apply(Pt,Xt),Dt+=zt-1}}return this._emitAfterChanges(E$J.REMOVE),Pt}reverse(){if(l$2E(this._observable),this._emitBeforeChanges(E$J.MOVE))return this;const _t=this._splice(0,this.length);return _t&&(_t.reverse(),this._splice(0,0,_t)),this._emitAfterChanges(E$J.MOVE),this}shift(){if(l$2E(this._observable),!this.length||this._emitBeforeChanges(E$J.REMOVE))return;const _t=E$I(this._splice(0,1));return this._emitAfterChanges(E$J.REMOVE),_t}slice(_t=0,Tt=this.length){return l$2E(this._observable),this._createNewInstance({items:this._items.slice(_t,Tt)})}some(_t,Tt){return l$2E(this._observable),this._items.some(_t,Tt)}sort(_t){if(l$2E(this._observable),!this.length||this._emitBeforeChanges(E$J.MOVE))return this;const Tt=this._splice(0,this.length);return arguments.length?Tt.sort(_t):Tt.sort(),this._splice(0,0,Tt),this._emitAfterChanges(E$J.MOVE),this}splice(_t,Tt,...Mt){l$2E(this._observable);const Pt=(Tt?E$J.REMOVE:0)|(Mt.length?E$J.ADD:0);if(this._emitBeforeChanges(Pt))return[];const Ft=this._splice(_t,Tt,Mt)||[];return this._emitAfterChanges(Pt),Ft}toArray(){return l$2E(this._observable),this._items.slice()}toJSON(){return l$2E(this._observable),this.toArray()}toLocaleString(){return l$2E(this._observable),this._items.toLocaleString()}toString(){return l$2E(this._observable),this._items.toString()}unshift(..._t){return l$2E(this._observable),!_t.length||this._emitBeforeChanges(E$J.ADD)||(this._splice(0,0,_t),this._emitAfterChanges(E$J.ADD)),this.length}_createNewInstance(_t){return new this.constructor(_t)}_splice(_t,Tt,Mt){const Pt=this._items,Ft=this.itemType;let Dt,Nt;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=v$15(()=>this._dispatchChange())),Tt){if(Nt=Pt.splice(_t,Tt),this.hasEventListener("before-remove")){const Vt=b$1a.acquire();Vt.target=this,Vt.cancellable=!0;for(let zt=0,Xt=Nt.length;zt<Xt;zt++)Dt=Nt[zt],Vt.reset(Dt),this.emit("before-remove",Vt),Vt.defaultPrevented&&(Nt.splice(zt,1),Pt.splice(_t,0,Dt),_t+=1,zt-=1,Xt-=1);b$1a.release(Vt)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const Vt=b$1a.acquire();Vt.target=this,Vt.cancellable=!1;const zt=Nt.length;for(let Xt=0;Xt<zt;Xt++)Vt.reset(Nt[Xt]),this.emit("after-remove",Vt);b$1a.release(Vt)}}if(Mt&&Mt.length){if(Ft){const Ht=[];for(const Wt of Mt){const Qt=Ft.ensureType(Wt);Qt==null&&Wt!=null||Ht.push(Qt)}Mt=Ht}const Vt=this.hasEventListener("before-add"),zt=this.hasEventListener("after-add"),Xt=_t===this.length;if(Vt||zt){const Ht=b$1a.acquire();Ht.target=this,Ht.cancellable=!0;const Wt=b$1a.acquire();Wt.target=this,Wt.cancellable=!1;for(const Qt of Mt)Vt?(Ht.reset(Qt),this.emit("before-add",Ht),Ht.defaultPrevented||(Xt?Pt.push(Qt):Pt.splice(_t++,0,Qt),this._set("length",Pt.length),zt&&(Wt.reset(Qt),this.emit("after-add",Wt)))):(Xt?Pt.push(Qt):Pt.splice(_t++,0,Qt),this._set("length",Pt.length),Wt.reset(Qt),this.emit("after-add",Wt));b$1a.release(Wt),b$1a.release(Ht)}else{if(Xt)for(const Ht of Mt)Pt.push(Ht);else Pt.splice(_t,0,...Mt);this._set("length",Pt.length)}}return(Mt&&Mt.length||Nt&&Nt.length)&&this._notifyChangeEvent(Mt,Nt),Nt}_emitBeforeChanges(_t){let Tt=!1;if(this.hasEventListener("before-changes")){const Mt=b$1a.acquire();Mt.target=this,Mt.cancellable=!0,Mt.type=_t,this.emit("before-changes",Mt),Tt=Mt.defaultPrevented,b$1a.release(Mt)}return Tt}_emitAfterChanges(_t){if(this.hasEventListener("after-changes")){const Tt=b$1a.acquire();Tt.target=this,Tt.cancellable=!1,Tt.type=_t,this.emit("after-changes",Tt),b$1a.release(Tt)}this._observable.notify()}_notifyChangeEvent(_t,Tt){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:_t,removed:Tt})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const _t=this._notifications;this._notifications=null;for(const Tt of _t){const Mt=Tt.changes;A$y.clear(),O$y.clear(),M$P.clear();for(const{added:zt,removed:Xt}of Mt){if(zt)if(M$P.size===0&&O$y.size===0)for(const Ht of zt)A$y.add(Ht);else for(const Ht of zt)O$y.has(Ht)?(M$P.add(Ht),O$y.delete(Ht)):M$P.has(Ht)||A$y.add(Ht);if(Xt)if(M$P.size===0&&A$y.size===0)for(const Ht of Xt)O$y.add(Ht);else for(const Ht of Xt)A$y.has(Ht)?A$y.delete(Ht):(M$P.delete(Ht),O$y.add(Ht))}const Pt=t$29.acquire();A$y.forEach(zt=>{Pt.push(zt)});const Ft=t$29.acquire();O$y.forEach(zt=>{Ft.push(zt)});const Dt=this._items,Nt=Tt.items,Vt=t$29.acquire();if(M$P.forEach(zt=>{Nt.indexOf(zt)!==Dt.indexOf(zt)&&Vt.push(zt)}),Tt.listeners&&(Pt.length||Ft.length||Vt.length)){const zt={target:this,added:Pt,removed:Ft,moved:Vt},Xt=Tt.listeners.length;for(let Ht=0;Ht<Xt;Ht++){const Wt=Tt.listeners[Ht];Wt.removed||Wt.callback.call(this,zt)}}t$29.release(Pt),t$29.release(Ft),t$29.release(Vt)}A$y.clear(),O$y.clear(),M$P.clear()}};V$p.ofType=_t=>{if(!_t)return g$1g;if(D$A.has(_t))return D$A.get(_t);let Tt=null;if(typeof _t=="function")Tt=_t.prototype.declaredClass;else if(_t.base)Tt=_t.base.prototype.declaredClass;else for(const Pt in _t.typeMap){const Ft=_t.typeMap[Pt].prototype.declaredClass;Tt?Tt+=` | ${Ft}`:Tt=Ft}let Mt=class extends g$1g{};return e$2a([n$2J({Type:_t,ensureType:typeof _t=="function"?b$1b(_t):N$v(_t)})],Mt.prototype,"itemType",void 0),Mt=e$2a([n$2L(`esri.core.Collection<${Tt}>`)],Mt),D$A.set(_t,Mt),Mt},e$2a([d$25()],V$p.prototype,"length",void 0),e$2a([d$25()],V$p.prototype,"items",null),V$p=g$1g=e$2a([n$2L("esri.core.Collection")],V$p);const j$11=V$p;function n$2I(_t,Tt,Mt=j$11){return Tt||(Tt=new Mt),Tt===_t||(Tt.removeAll(),e$1W(_t)?Tt.addMany(_t):_t&&Tt.add(_t)),Tt}function t$1V(_t){return _t}function e$1W(_t){return _t&&(Array.isArray(_t)||"items"in _t&&Array.isArray(_t.items))}class s$29{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(Tt){const Mt=new s$29;return this._values.forEach((Pt,Ft)=>{Tt&&Tt.has(Ft)||Mt.set(Ft,m$2e(Pt.value),Pt.origin)}),Mt}get(Tt,Mt){Mt=this._normalizeOrigin(Mt);const Pt=this._values.get(Tt);return Mt==null||(Pt==null?void 0:Pt.origin)===Mt?Pt==null?void 0:Pt.value:void 0}originOf(Tt){var Mt,Pt;return(Pt=(Mt=this._values.get(Tt))==null?void 0:Mt.origin)!=null?Pt:r$1K.USER}keys(Tt){Tt=this._normalizeOrigin(Tt);const Mt=[...this._values.keys()];return Tt==null?Mt:Mt.filter(Pt=>{var Ft;return((Ft=this._values.get(Pt))==null?void 0:Ft.origin)===Tt})}set(Tt,Mt,Pt){if((Pt=this._normalizeOrigin(Pt))===r$1K.DEFAULTS){const Ft=this._values.get(Tt);if(Ft&&Ft.origin!=null&&Ft.origin>Pt)return}this._values.set(Tt,new t$1U(Mt,Pt))}delete(Tt,Mt){var Pt;(Mt=this._normalizeOrigin(Mt))!=null&&((Pt=this._values.get(Tt))==null?void 0:Pt.origin)!==Mt||this._values.delete(Tt)}has(Tt,Mt){var Pt;return(Mt=this._normalizeOrigin(Mt))!=null?((Pt=this._values.get(Tt))==null?void 0:Pt.origin)===Mt:this._values.has(Tt)}forEach(Tt){this._values.forEach(({value:Mt},Pt)=>Tt(Mt,Pt))}_normalizeOrigin(Tt){if(Tt!=null)return Tt===r$1K.DEFAULTS?Tt:r$1K.USER}}class t$1U{constructor(Tt,Mt){this.value=Tt,this.origin=Mt}}function e$1V(_t,Tt,Mt){Tt.keys().forEach(Ft=>{Mt.set(Ft,Tt.get(Ft),r$1K.DEFAULTS)});const Pt=_t.metadatas;Object.keys(Pt).forEach(Ft=>{_t.internalGet(Ft)&&Mt.set(Ft,_t.internalGet(Ft),r$1K.DEFAULTS)})}function s$28(_t,Tt,Mt){if(!_t||!_t.read||_t.read.enabled===!1||!_t.read.source)return!1;const Pt=_t.read.source;if(typeof Pt=="string"){if(Pt===Tt||Pt.includes(".")&&Pt.indexOf(Tt)===0&&s$2n(Pt,Mt))return!0}else for(const Ft of Pt)if(Ft===Tt||Ft.includes(".")&&Ft.indexOf(Tt)===0&&s$2n(Ft,Mt))return!0;return!1}function i$2D(_t){return _t&&(!_t.read||_t.read.enabled!==!1&&!_t.read.source)}function a$2U(_t,Tt,Mt,Pt,Ft){let Dt=o$1Y(Tt[Mt],Ft);i$2D(Dt)&&(_t[Mt]=!0);for(const Nt of Object.getOwnPropertyNames(Tt))Dt=o$1Y(Tt[Nt],Ft),s$28(Dt,Mt,Pt)&&(_t[Nt]=!0)}function f$1F(_t,Tt,Mt,Pt){const Ft=Mt.metadatas,Dt=a$2W(Ft[Tt],"any",Pt),Nt=Dt&&Dt.default;if(Nt===void 0)return;const Vt=typeof Nt=="function"?Nt.call(_t,Tt,Pt):Nt;Vt!==void 0&&Mt.set(Tt,Vt)}const c$3b={origin:"service"};function u$27(_t,Tt,Mt=c$3b){if(!Tt||typeof Tt!="object")return;const Pt=e$28(_t),Ft=Pt.metadatas,Dt={};for(const Nt of Object.getOwnPropertyNames(Tt))a$2U(Dt,Ft,Nt,Tt,Mt);Pt.setDefaultOrigin(Mt.origin);for(const Nt of Object.getOwnPropertyNames(Dt)){const Vt=o$1Y(Ft[Nt],Mt).read,zt=Vt&&Vt.source;let Xt;Xt=zt&&typeof zt=="string"?u$2h(Tt,zt):Tt[Nt],Vt&&Vt.reader&&(Xt=Vt.reader.call(_t,Xt,Tt,Mt)),Xt!==void 0&&Pt.set(Nt,Xt)}if(!Mt||!Mt.ignoreDefaults){Pt.setDefaultOrigin("defaults");for(const Nt of Object.getOwnPropertyNames(Ft))Dt[Nt]||f$1F(_t,Nt,Pt,Mt)}Pt.setDefaultOrigin("user")}function d$21(_t,Tt,Mt,Pt=c$3b){var Dt;const Ft={...Pt,messages:[]};Mt(Ft),(Dt=Ft.messages)==null||Dt.forEach(Nt=>{Nt.type!=="warning"||_t.loaded?Pt&&Pt.messages&&Pt.messages.push(Nt):_t.loadWarnings.push(Nt)})}const a$2T=s$2l.getLogger("esri.core.accessorSupport.write");function f$1E(_t,Tt,Mt,Pt,Ft){var Nt,Vt;const Dt={};return(Vt=(Nt=Tt.write)==null?void 0:Nt.writer)==null||Vt.call(_t,Pt,Dt,Mt,Ft),Dt}function p$3u(_t,Tt,Mt,Pt,Ft,Dt){if(!Pt||!Pt.write)return!1;const Nt=_t.get(Mt);if(!Ft&&Pt.write.overridePolicy){const Vt=Pt.write.overridePolicy.call(_t,Nt,Mt,Dt);Vt!==void 0&&(Ft=Vt)}if(Ft||(Ft=Pt.write),!Ft||Ft.enabled===!1)return!1;if((Nt===null&&!Ft.allowNull&&!Ft.writerEnsuresNonNull||Nt===void 0)&&Ft.isRequired){const Vt=new s$2i("web-document-write:property-required",`Missing value for required property '${Mt}' on '${_t.declaredClass}'`,{propertyName:Mt,target:_t});return Vt&&Dt&&Dt.messages?Dt.messages.push(Vt):Vt&&!Dt&&a$2T.error(Vt.name,Vt.message),!1}return!(Nt===void 0||Nt===null&&!Ft.allowNull&&!Ft.writerEnsuresNonNull||(!Tt.store.multipleOriginsSupported||Tt.store.originOf(Mt)===r$1K.DEFAULTS)&&c$3a(_t,Mt,Dt,Pt,Nt)||!Ft.ignoreOrigin&&Dt&&Dt.origin&&Tt.store.multipleOriginsSupported&&Tt.store.originOf(Mt)<t$26(Dt.origin))}function c$3a(_t,Tt,Mt,Pt,Ft){const Dt=Pt.default;if(Dt===void 0)return!1;if(Pt.defaultEquals!=null)return Pt.defaultEquals(Ft);if(typeof Dt=="function"){if(Array.isArray(Ft)){const Nt=Dt.call(_t,Tt,Mt);return i$2V(Nt,Ft)}return!1}return Dt===Ft}function g$1f(_t,Tt,Mt,Pt){const Ft=e$28(_t),Dt=Ft.metadatas,Nt=s$2b(Dt[Tt],Pt);return!!Nt&&p$3u(_t,Ft,Tt,Nt,Mt,Pt)}function d$20(_t,Tt,Mt){var Dt,Nt;if(_t&&typeof _t.toJSON=="function"&&(!_t.toJSON.isDefaultToJSON||!_t.write))return o$29(Tt,_t.toJSON(Mt));const Pt=e$28(_t),Ft=Pt.metadatas;for(const Vt in Ft){const zt=s$2b(Ft[Vt],Mt);if(!p$3u(_t,Pt,Vt,zt,void 0,Mt))continue;const Xt=_t.get(Vt),Ht=f$1E(_t,zt,zt.write&&typeof zt.write.target=="string"?zt.write.target:Vt,Xt,Mt);Object.keys(Ht).length>0&&(Tt=o$29(Tt,Ht),(Nt=(Dt=Mt==null?void 0:Mt.resources)==null?void 0:Dt.pendingOperations)!=null&&Nt.length&&Promise.all(Mt.resources.pendingOperations).then(()=>o$29(Tt,Ht)),Mt&&Mt.writtenProperties&&Mt.writtenProperties.push({target:_t,propName:Vt,oldOrigin:c$3l(Pt.store.originOf(Vt)),newOrigin:Mt.origin}))}return Tt}const u$26=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt);const Pt=e$28(this),Ft=Pt.store,Dt=new s$29;Pt.store=Dt,e$1V(Pt,Ft,Dt)}read(Mt,Pt){u$27(this,Mt,Pt)}write(Mt={},Pt){return d$20(this,Mt,Pt)}toJSON(Mt){return this.write({},Mt)}static fromJSON(Mt,Pt){return n$2H.call(this,Mt,Pt)}};return Tt=e$2a([n$2L("esri.core.JSONSupport")],Tt),Tt.prototype.toJSON.isDefaultToJSON=!0,Tt};function n$2H(_t,Tt){if(!_t)return null;if(_t.declaredClass)throw new Error("JSON object is already hydrated");const Mt=new this;return Mt.read(_t,Tt),Mt}let l$2v=class extends u$26(y$1E){};l$2v=e$2a([n$2L("esri.core.JSONSupport")],l$2v);var h$1I;(function(_t){_t[_t.PENDING=0]="PENDING",_t[_t.RESOLVED=1]="RESOLVED",_t[_t.REJECTED=2]="REJECTED"})(h$1I||(h$1I={}));class n$2G{constructor(Tt){this.instance=Tt,this._resolver=T$C(),this._status=h$1I.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=h$1I.RESOLVED,this._cleanUp()},()=>{this._status=h$1I.REJECTED,this._cleanUp()})}addResolvingPromise(Tt){this._resolvingPromises.push(Tt),this._tryResolve()}isResolved(){return this._status===h$1I.RESOLVED}isRejected(){return this._status===h$1I.REJECTED}isFulfilled(){return this._status!==h$1I.PENDING}abort(){this._resolver.reject(m$2b())}when(Tt,Mt){return this._resolver.promise.then(Tt,Mt)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const Tt=T$C(),Mt=[...this._resolvingPromises,Tt.promise],Pt=this._allPromise=Promise.all(Mt);Pt.then(()=>{this.isFulfilled()||this._allPromise!==Pt||this._resolver.resolve(this.instance)},Ft=>{this.isFulfilled()||this._allPromise!==Pt||g$1l(Ft)||this._resolver.reject(Ft)}),Tt.resolve()}}const m$26=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt),this._promiseProps=new n$2G(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(Mt,Pt){return new Promise((Ft,Dt)=>{this._promiseProps.when(Ft,Dt)}).then(Mt,Pt)}catch(Mt){return this.when(null,Mt)}addResolvingPromise(Mt){Mt&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in Mt?Mt.when():Mt)}};return Tt=e$2a([n$2L("esri.core.Promise")],Tt),Tt};let _$B=class extends m$26(y$1E){};_$B=e$2a([n$2L("esri.core.Promise")],_$B);const i$2C="not-loaded",d$1$="loading",c$39="failed",h$1H="loaded",u$25=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(Pt=>{const Ft=this.load.bind(this);this.load=Dt=>{const Nt=new Promise((Vt,zt)=>{const Xt=d$28(Dt,zt);this.destroyed&&zt(new s$2i("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(Vt,zt).finally(()=>{Xt&&Xt.remove()})});if(this.loadStatus===i$2C){this._set("loadStatus",d$1$);const Vt=this._loadController=new AbortController;Ft({signal:Vt.signal}),v$16(Vt.signal,()=>{this._promiseProps.abort()})}return Pt(),Nt}})),this.when(()=>{this._set("loadStatus",h$1H),this._loadController=null},Pt=>{this._set("loadStatus",c$39),this._set("loadError",Pt),this._loadController=null})}get loaded(){return this.loadStatus===h$1H}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var Mt;return this.isFulfilled()||(this._set("loadError",new s$2i("load:cancelled","Cancelled")),(Mt=this._loadController)==null||Mt.abort()),this}};return e$2a([d$25({readOnly:!0})],Tt.prototype,"loaded",null),e$2a([d$25({readOnly:!0})],Tt.prototype,"loadError",void 0),e$2a([d$25({clonable:!1})],Tt.prototype,"loadStatus",void 0),e$2a([d$25({type:[t$1W],readOnly:!0})],Tt.prototype,"loadWarnings",null),Tt=e$2a([n$2L("esri.core.Loadable")],Tt),Tt};let p$3t=class extends u$25(_$B){};p$3t=e$2a([n$2L("esri.core.Loadable")],p$3t),function(_t){function Tt(Mt){return!(!Mt||!Mt.load)}_t.LoadableMixin=u$25,_t.isLoadable=Tt}(p$3t||(p$3t={}));const m$25=p$3t;function n$2F(_t,Tt,Mt){return E$K(_t.map((Pt,Ft)=>Tt.apply(Mt,[Pt,Ft])))}async function e$1U(_t,Tt,Mt){return(await E$K(_t.map((Pt,Ft)=>Tt.apply(Mt,[Pt,Ft])))).map(Pt=>Pt.value)}async function a$2S(_t){if(t$2e(_t))return{ok:!1,error:new Error("no promise provided")};try{return{ok:!0,value:await _t}}catch(Tt){return{ok:!1,error:Tt}}}async function u$24(_t){try{return{ok:!0,value:await _t}}catch(Tt){return w$18(Tt),{ok:!1,error:Tt}}}async function n$2E(_t,Tt){return await _t.load(),i$2B(_t,Tt)}async function i$2B(_t,Tt){const Mt=[],Pt=(...Dt)=>{for(const Nt of Dt)t$2e(Nt)||(Array.isArray(Nt)?Pt(...Nt):j$11.isCollection(Nt)?Nt.forEach(Vt=>Pt(Vt)):m$25.isLoadable(Nt)&&Mt.push(Nt))};Tt(Pt);let Ft=null;if(await e$1U(Mt,async Dt=>{(await a$2S(s$27(Dt)?Dt.loadAll():Dt.load())).ok!==!1||Ft||(Ft=Dt)}),Ft)throw Ft.loadError;return _t}function s$27(_t){return"loadAll"in _t&&typeof _t.loadAll=="function"}const s$26=s$2l.getLogger("esri.core.urlUtils"),u$23=r$1O.request,c$38="esri/config: esriConfig.request.proxyUrl is not set.",l$2u=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,f$1D=/^\s*http:/i,a$2R=/^\s*https:/i,h$1G=/^\s*file:/i,p$3s=/:\d+$/,d$1_=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,g$1e=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),m$24=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class y$1C{constructor(Tt=""){this.uri=Tt,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let Mt=this.uri.match(g$1e);this.scheme=Mt[2]||(Mt[1]?"":null),this.authority=Mt[4]||(Mt[3]?"":null),this.path=Mt[5],this.query=Mt[7]||(Mt[6]?"":null),this.fragment=Mt[9]||(Mt[8]?"":null),this.authority!=null&&(Mt=this.authority.match(m$24),this.user=Mt[3]||null,this.password=Mt[4]||null,this.host=Mt[6]||Mt[7],this.port=Mt[9]||null)}toString(){return this.uri}}const $$h={},x$R=new y$1C(r$1O.applicationUrl);let w$13=x$R;const O$x=q$m();let U$w=O$x;const b$19=()=>w$13,C$t=()=>U$w;function q$m(){const _t=w$13.path,Tt=_t.substring(0,_t.lastIndexOf(_t.split("/")[_t.split("/").length-1]));return`${`${w$13.scheme}://${w$13.host}${w$13.port!=null?`:${w$13.port}`:""}`}${Tt}`}function j$10(_t){const Tt={path:null,query:null},Mt=new y$1C(_t),Pt=_t.indexOf("?");return Mt.query===null?Tt.path=_t:(Tt.path=_t.substring(0,Pt),Tt.query=v$$(Mt.query)),Mt.fragment&&(Tt.hash=Mt.fragment,Mt.query===null&&(Tt.path=Tt.path.substring(0,Tt.path.length-(Mt.fragment.length+1)))),Tt}function v$$(_t){const Tt=_t.split("&"),Mt={};for(const Pt of Tt){if(!Pt)continue;const Ft=Pt.indexOf("=");let Dt,Nt;Ft<0?(Dt=decodeURIComponent(Pt),Nt=""):(Dt=decodeURIComponent(Pt.slice(0,Ft)),Nt=decodeURIComponent(Pt.slice(Ft+1)));let Vt=Mt[Dt];typeof Vt=="string"&&(Vt=Mt[Dt]=[Vt]),Array.isArray(Vt)?Vt.push(Nt):Mt[Dt]=Nt}return Mt}function L$x(_t){return _t&&typeof _t=="object"&&"toJSON"in _t&&typeof _t.toJSON=="function"}function I$D(_t,Tt){return _t?Tt&&typeof Tt=="function"?Object.keys(_t).map(Mt=>encodeURIComponent(Mt)+"="+encodeURIComponent(Tt(Mt,_t[Mt]))).join("&"):Object.keys(_t).map(Mt=>{const Pt=_t[Mt];if(Pt==null)return"";const Ft=encodeURIComponent(Mt)+"=",Dt=Tt&&Tt[Mt];return Dt?Ft+encodeURIComponent(Dt(Pt)):Array.isArray(Pt)?Pt.map(Nt=>L$x(Nt)?Ft+encodeURIComponent(JSON.stringify(Nt)):Ft+encodeURIComponent(Nt)).join("&"):L$x(Pt)?Ft+encodeURIComponent(JSON.stringify(Pt)):Ft+encodeURIComponent(Pt)}).filter(Mt=>Mt).join("&"):""}function A$x(_t=!1){let Tt,Mt=u$23.proxyUrl;if(typeof _t=="string"){Tt=ht$1(_t);const Pt=J$j(_t);Pt&&(Mt=Pt.proxyUrl)}else Tt=!!_t;if(!Mt)throw s$26.warn(c$38),new s$2i("urlutils:proxy-not-set",c$38);return Tt&&$t()&&(Mt=mt$1(Mt)),j$10(Mt)}function S$P(_t){const Tt=J$j(_t);let Mt,Pt;if(Tt){const Ft=P$u(Tt.proxyUrl);Mt=Ft.path,Pt=Ft.query?v$$(Ft.query):null}if(Mt){const Ft=j$10(_t);_t=Mt+"?"+Ft.path;const Dt=I$D({...Pt,...Ft.query});Dt&&(_t=`${_t}?${Dt}`)}return _t}const B$s={path:"",query:""};function P$u(_t){const Tt=_t.indexOf("?");return Tt!==-1?(B$s.path=_t.slice(0,Tt),B$s.query=_t.slice(Tt+1)):(B$s.path=_t,B$s.query=null),B$s}function k$A(_t){return _t=(_t=xt$1(_t=bt$1(_t=P$u(_t).path),!0)).toLowerCase()}function E$H(_t){const Tt={proxyUrl:_t.proxyUrl,urlPrefix:k$A(_t.urlPrefix)},Mt=u$23.proxyRules,Pt=Tt.urlPrefix;let Ft=Mt.length;for(let Dt=0;Dt<Mt.length;Dt++){const Nt=Mt[Dt].urlPrefix;if(Pt.indexOf(Nt)===0){if(Pt.length===Nt.length)return-1;Ft=Dt;break}Nt.indexOf(Pt)===0&&(Ft=Dt+1)}return Mt.splice(Ft,0,Tt),Ft}function J$j(_t){const Tt=u$23.proxyRules,Mt=k$A(_t);for(let Pt=0;Pt<Tt.length;Pt++)if(Mt.indexOf(Tt[Pt].urlPrefix)===0)return Tt[Pt]}function N$u(_t,Tt){return _t=T$y(_t),Tt=T$y(Tt),xt$1(_t)===xt$1(Tt)}function T$y(_t){const Tt=(_t=F$x(_t)).indexOf("/sharing");return Tt>0?_t.substring(0,Tt):_t.replace(/\/+$/,"")}function W$c(_t){const Tt=Pt=>Pt==null||Pt instanceof RegExp&&Pt.test(_t)||typeof Pt=="string"&&_t.startsWith(Pt),Mt=u$23.interceptors;if(Mt){for(const Pt of Mt)if(Array.isArray(Pt.urls)){if(Pt.urls.some(Tt))return Pt}else if(Tt(Pt.urls))return Pt}return null}function z$z(_t,Tt,Mt=!1){const Pt=Lt(_t),Ft=Lt(Tt);return!(!Mt&&Pt.scheme!==Ft.scheme)&&Pt.host!=null&&Ft.host!=null&&Pt.host.toLowerCase()===Ft.host.toLowerCase()&&Pt.port===Ft.port}function D$z(_t){if(typeof _t=="string"){if(!K$f(_t))return!0;_t=Lt(_t)}if(z$z(_t,w$13))return!0;const Tt=u$23.trustedServers||[];for(let Mt=0;Mt<Tt.length;Mt++){const Pt=M$O(Tt[Mt]);for(let Ft=0;Ft<Pt.length;Ft++)if(z$z(_t,Pt[Ft]))return!0}return!1}function M$O(_t){return $$h[_t]||(at$1(_t)||ft$1(_t)?$$h[_t]=[new y$1C(Q$e(_t))]:$$h[_t]=[new y$1C(`http://${_t}`),new y$1C(`https://${_t}`)]),$$h[_t]}function Q$e(_t,Tt=U$w,Mt){return ft$1(_t)?Mt&&Mt.preserveProtocolRelative?_t:w$13.scheme==="http"&&w$13.authority===H$j(_t).slice(2)?`http:${_t}`:`https:${_t}`:at$1(_t)?_t:G$q(_t[0]==="/"?wt$1(Tt):Tt,_t)}function _$A(_t,Tt=U$w,Mt){if(!K$f(_t))return _t;const Pt=F$x(_t),Ft=Pt.toLowerCase(),Dt=F$x(Tt).toLowerCase().replace(/\/+$/,""),Nt=Mt?F$x(Mt).toLowerCase().replace(/\/+$/,""):null;if(Nt&&Dt.indexOf(Nt)!==0)return _t;const Vt=(Wt,Qt,Zt)=>(Zt=Wt.indexOf(Qt,Zt))===-1?Wt.length:Zt;let zt=Vt(Ft,"/",Ft.indexOf("//")+2),Xt=-1;for(;Ft.slice(0,zt+1)===Dt.slice(0,zt)+"/"&&(Xt=zt+1,zt!==Ft.length);)zt=Vt(Ft,"/",zt+1);if(Xt===-1||Nt&&Xt<Nt.length)return _t;_t=Pt.slice(Xt);const Ht=Dt.slice(Xt-1).replace(/[^/]+/g,"").length;if(Ht>0)for(let Wt=0;Wt<Ht;Wt++)_t=`../${_t}`;else _t=`./${_t}`;return _t}function F$x(_t){return _t=jt$1(_t=Rt$1(_t=qt(_t=Q$e(_t=_t.trim()))))}function G$q(..._t){const Tt=_t.filter(r$1P);if(!Tt||!Tt.length)return;const Mt=[];if(K$f(Tt[0])){const Ft=Tt[0],Dt=Ft.indexOf("//");Dt!==-1&&(Mt.push(Ft.slice(0,Dt+1)),dt$1(Tt[0])&&(Mt[0]+="/"),Tt[0]=Ft.slice(Dt+2))}else Tt[0][0]==="/"&&Mt.push("");const Pt=Tt.reduce((Ft,Dt)=>Dt?Ft.concat(Dt.split("/")):Ft,[]);for(let Ft=0;Ft<Pt.length;Ft++){const Dt=Pt[Ft];Dt===".."&&Mt.length>0&&Mt[Mt.length-1]!==".."?Mt.pop():(!Dt&&Ft===Pt.length-1||Dt&&(Dt!=="."||Mt.length===0))&&Mt.push(Dt)}return Mt.join("/")}function H$j(_t,Tt=!1){if(V$o(_t)||X$c(_t))return null;let Mt=_t.indexOf("://");if(Mt===-1&&ft$1(_t))Mt=2;else{if(Mt===-1)return null;Mt+=3}const Pt=_t.indexOf("/",Mt);return Pt!==-1&&(_t=_t.slice(0,Pt)),Tt&&(_t=xt$1(_t,!0)),_t}function K$f(_t){return ft$1(_t)||at$1(_t)}function V$o(_t){return _t!=null&&_t.slice(0,5)==="blob:"}function X$c(_t){return _t.slice(0,5)==="data:"}function Y$d(_t){const Tt=nt$1(_t);if(!Tt||!Tt.isBase64)return null;const Mt=atob(Tt.data),Pt=new Uint8Array(Mt.length);for(let Ft=0;Ft<Mt.length;Ft++)Pt[Ft]=Mt.charCodeAt(Ft);return Pt.buffer}function Z$c(_t){return btoa(String.fromCharCode.apply(null,_t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const tt$1=/^data:(.*?)(;base64)?,(.*)$/;function nt$1(_t){const Tt=_t.match(tt$1);if(!Tt)return null;const[,Mt,Pt,Ft]=Tt;return{mediaType:Mt,isBase64:!!Pt,data:Ft}}function et$1(_t){return _t.isBase64?`data:${_t.mediaType};base64,${_t.data}`:`data:${_t.mediaType},${_t.data}`}function it$1(_t,Tt){ut$1(_t,Tt)||lt$1(_t,Tt)}function ut$1(_t,Tt){if(!_t)return!1;const Mt=document.createElement("a");if(!("download"in Mt))return!1;const Pt=URL.createObjectURL(_t);return Mt.download=Tt,Mt.href=Pt,Mt.style.display="none",document.body.appendChild(Mt),Mt.click(),document.body.removeChild(Mt),URL.revokeObjectURL(Pt),!0}function lt$1(_t,Tt){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(_t,Tt)}function ft$1(_t){return _t!=null&&_t!==void 0&&_t[0]==="/"&&_t[1]==="/"}function at$1(_t){return l$2u.test(_t)}function ht$1(_t){return a$2R.test(_t)||w$13.scheme==="https"&&ft$1(_t)}function pt$1(_t){return f$1D.test(_t)||w$13.scheme==="http"&&ft$1(_t)}function dt$1(_t){return h$1G.test(_t)}function mt$1(_t){return ft$1(_t)?`https:${_t}`:_t.replace(f$1D,"https:")}function yt$1(){return w$13.scheme==="http"}function $t(){return w$13.scheme==="https"}function xt$1(_t,Tt=!1){return ft$1(_t)?_t.slice(2):(_t=_t.replace(l$2u,""),Tt&&_t.length>1&&_t[0]==="/"&&_t[1]==="/"&&(_t=_t.slice(2)),_t)}function wt$1(_t){const Tt=_t.indexOf("//"),Mt=_t.indexOf("/",Tt+2);return Mt===-1?_t:_t.slice(0,Mt)}function Ot(_t){let Tt=0;if(K$f(_t)){const Pt=_t.indexOf("//");Pt!==-1&&(Tt=Pt+2)}const Mt=_t.lastIndexOf("/");return Mt<Tt?_t:_t.slice(0,Mt+1)}function Ut(_t,Tt){if(!_t)return"";const Mt=j$10(_t).path.replace(/\/+$/,""),Pt=Mt.substring(Mt.lastIndexOf("/")+1);if(!(Tt!=null&&Tt.length))return Pt;const Ft=new RegExp(`.(${Tt.join("|")})$`,"ig");return Pt.replace(Ft,"")}function bt$1(_t){return _t&&_t[_t.length-1]==="/"?_t:`${_t}/`}function Ct(_t){return _t.replace(/\/+$/,"")}function qt(_t){if(/^https?:\/\//i.test(_t)){const Tt=P$u(_t);_t=(_t=Tt.path.replace(/\/{2,}/g,"/")).replace("/","//"),Tt.query&&(_t+=`?${Tt.query}`)}return _t}function Rt$1(_t){return _t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function jt$1(_t){const Tt=u$23.httpsDomains;if(!pt$1(_t))return _t;const Mt=_t.indexOf("/",7);let Pt;if(Pt=Mt===-1?_t:_t.slice(0,Mt),Pt=Pt.toLowerCase().slice(7),p$3s.test(Pt)){if(!Pt.endsWith(":80"))return _t;Pt=Pt.slice(0,-3),_t=_t.replace(":80","")}return yt$1()&&Pt===w$13.authority&&!d$1_.test(_t)||($t()&&Pt===w$13.authority||Tt&&Tt.some(Ft=>Pt===Ft||Pt.endsWith(`.${Ft}`))||$t()&&!J$j(_t))&&(_t=mt$1(_t)),_t}function vt(_t,Tt,Mt){if(!(Tt&&Mt&&_t&&K$f(_t)))return _t;const Pt=_t.indexOf("//"),Ft=_t.indexOf("/",Pt+2),Dt=_t.indexOf(":",Pt+2),Nt=Math.min(Ft<0?_t.length:Ft,Dt<0?_t.length:Dt);return _t.slice(Pt+2,Nt).toLowerCase()!==Tt.toLowerCase()?_t:`${_t.slice(0,Pt+2)}${Mt}${_t.slice(Nt)}`}function Lt(_t){return typeof _t=="string"?new y$1C(Q$e(_t)):(_t.scheme||(_t.scheme=w$13.scheme),_t)}function It(_t){return Jt.test(_t)}function At$1(_t,Tt){const Mt=j$10(_t),Pt=Object.keys(Mt.query||{});return Pt.length>0&&Tt&&Tt.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${Pt.join(", ")}.`),Mt.path}function St$1(_t,Tt,Mt){const Pt=j$10(_t),Ft=Pt.query||{};return Ft[Tt]=String(Mt),`${Pt.path}?${I$D(Ft)}`}function Bt(_t,Tt){const Mt=j$10(_t),Pt=Mt.query||{};for(const Dt in Tt)Pt[Dt]=Tt[Dt];const Ft=I$D(Pt);return Ft?`${Mt.path}?${Ft}`:Mt.path}function kt$1(_t){if(t$2e(_t))return null;const Tt=_t.match(Et);return Tt?Tt[1]:null}const Et=/.*?\.([^\/]*)$/,Jt=/(^data:image\/svg|\.svg$)/i;function r$1C(_t,Tt,Mt){let Pt,Ft;return Tt===void 0?(Ft=_t,Pt=[void 0]):typeof Tt!="string"?(Ft=_t,Pt=[void 0],Mt=Tt):(Ft=Tt,Pt=Array.isArray(_t)?_t:[_t]),(Dt,Nt)=>{const Vt=Dt.constructor.prototype;for(const zt of Pt){const Xt=y$1I(Dt,zt,Ft);Xt.write&&typeof Xt.write=="object"||(Xt.write={}),Mt&&(Xt.write.target=Mt),Xt.write.writer=Vt[Nt]}}}var S$O;(function(_t){_t[_t.CGCS2000=4490]="CGCS2000",_t[_t.GCSMARS2000=104971]="GCSMARS2000",_t[_t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",_t[_t.GCSMOON2000=104903]="GCSMOON2000"})(S$O||(S$O={}));let o$1X;const r$1B={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(o$1X=2e3;o$1X<=2045;o$1X++)r$1B[o$1X]=0;for(o$1X=2056;o$1X<=2065;o$1X++)r$1B[o$1X]=0;for(o$1X=2067;o$1X<=2135;o$1X++)r$1B[o$1X]=0;for(o$1X=2137;o$1X<=2154;o$1X++)r$1B[o$1X]=0;for(o$1X=2161;o$1X<=2170;o$1X++)r$1B[o$1X]=0;for(o$1X=2172;o$1X<=2193;o$1X++)r$1B[o$1X]=0;for(o$1X=2195;o$1X<=2198;o$1X++)r$1B[o$1X]=0;for(o$1X=2200;o$1X<=2203;o$1X++)r$1B[o$1X]=0;for(o$1X=2205;o$1X<=2217;o$1X++)r$1B[o$1X]=0;for(o$1X=2222;o$1X<=2224;o$1X++)r$1B[o$1X]=1;for(o$1X=2225;o$1X<=2250;o$1X++)r$1B[o$1X]=2;for(o$1X=2251;o$1X<=2253;o$1X++)r$1B[o$1X]=1;for(o$1X=2257;o$1X<=2264;o$1X++)r$1B[o$1X]=2;for(o$1X=2274;o$1X<=2279;o$1X++)r$1B[o$1X]=2;for(o$1X=2280;o$1X<=2282;o$1X++)r$1B[o$1X]=1;for(o$1X=2283;o$1X<=2289;o$1X++)r$1B[o$1X]=2;for(o$1X=2290;o$1X<=2292;o$1X++)r$1B[o$1X]=0;for(o$1X=2308;o$1X<=2313;o$1X++)r$1B[o$1X]=0;for(o$1X=2315;o$1X<=2491;o$1X++)r$1B[o$1X]=0;for(o$1X=2494;o$1X<=2866;o$1X++)r$1B[o$1X]=0;for(o$1X=2867;o$1X<=2869;o$1X++)r$1B[o$1X]=1;for(o$1X=2870;o$1X<=2888;o$1X++)r$1B[o$1X]=2;for(o$1X=2891;o$1X<=2895;o$1X++)r$1B[o$1X]=2;for(o$1X=2896;o$1X<=2898;o$1X++)r$1B[o$1X]=1;for(o$1X=2902;o$1X<=2908;o$1X++)r$1B[o$1X]=2;for(o$1X=2915;o$1X<=2920;o$1X++)r$1B[o$1X]=2;for(o$1X=2921;o$1X<=2923;o$1X++)r$1B[o$1X]=1;for(o$1X=2924;o$1X<=2930;o$1X++)r$1B[o$1X]=2;for(o$1X=2931;o$1X<=2962;o$1X++)r$1B[o$1X]=0;for(o$1X=2964;o$1X<=2968;o$1X++)r$1B[o$1X]=2;for(o$1X=2969;o$1X<=2973;o$1X++)r$1B[o$1X]=0;for(o$1X=2975;o$1X<=2991;o$1X++)r$1B[o$1X]=0;for(o$1X=2995;o$1X<=3051;o$1X++)r$1B[o$1X]=0;for(o$1X=3054;o$1X<=3079;o$1X++)r$1B[o$1X]=0;for(o$1X=3081;o$1X<=3088;o$1X++)r$1B[o$1X]=0;for(o$1X=3092;o$1X<=3101;o$1X++)r$1B[o$1X]=0;for(o$1X=3106;o$1X<=3138;o$1X++)r$1B[o$1X]=0;for(o$1X=3146;o$1X<=3151;o$1X++)r$1B[o$1X]=0;for(o$1X=3153;o$1X<=3166;o$1X++)r$1B[o$1X]=0;for(o$1X=3168;o$1X<=3172;o$1X++)r$1B[o$1X]=0;for(o$1X=3174;o$1X<=3203;o$1X++)r$1B[o$1X]=0;for(o$1X=3294;o$1X<=3358;o$1X++)r$1B[o$1X]=0;for(o$1X=3367;o$1X<=3403;o$1X++)r$1B[o$1X]=0;for(o$1X=3408;o$1X<=3416;o$1X++)r$1B[o$1X]=0;for(o$1X=3417;o$1X<=3438;o$1X++)r$1B[o$1X]=2;for(o$1X=3441;o$1X<=3446;o$1X++)r$1B[o$1X]=2;for(o$1X=3447;o$1X<=3450;o$1X++)r$1B[o$1X]=0;for(o$1X=3451;o$1X<=3459;o$1X++)r$1B[o$1X]=2;for(o$1X=3460;o$1X<=3478;o$1X++)r$1B[o$1X]=0;for(o$1X=3554;o$1X<=3559;o$1X++)r$1B[o$1X]=0;for(o$1X=3560;o$1X<=3570;o$1X++)r$1B[o$1X]=2;for(o$1X=3571;o$1X<=3581;o$1X++)r$1B[o$1X]=0;for(o$1X=3594;o$1X<=3597;o$1X++)r$1B[o$1X]=0;for(o$1X=3601;o$1X<=3604;o$1X++)r$1B[o$1X]=0;for(o$1X=3637;o$1X<=3639;o$1X++)r$1B[o$1X]=0;for(o$1X=3665;o$1X<=3667;o$1X++)r$1B[o$1X]=0;for(o$1X=3693;o$1X<=3695;o$1X++)r$1B[o$1X]=0;for(o$1X=3701;o$1X<=3727;o$1X++)r$1B[o$1X]=0;for(o$1X=3728;o$1X<=3739;o$1X++)r$1B[o$1X]=2;for(o$1X=3740;o$1X<=3751;o$1X++)r$1B[o$1X]=0;for(o$1X=3753;o$1X<=3760;o$1X++)r$1B[o$1X]=2;for(o$1X=3761;o$1X<=3773;o$1X++)r$1B[o$1X]=0;for(o$1X=3775;o$1X<=3777;o$1X++)r$1B[o$1X]=0;for(o$1X=3779;o$1X<=3781;o$1X++)r$1B[o$1X]=0;for(o$1X=3783;o$1X<=3785;o$1X++)r$1B[o$1X]=0;for(o$1X=3788;o$1X<=3791;o$1X++)r$1B[o$1X]=0;for(o$1X=3797;o$1X<=3802;o$1X++)r$1B[o$1X]=0;for(o$1X=3814;o$1X<=3816;o$1X++)r$1B[o$1X]=0;for(o$1X=3825;o$1X<=3829;o$1X++)r$1B[o$1X]=0;for(o$1X=3832;o$1X<=3841;o$1X++)r$1B[o$1X]=0;for(o$1X=3844;o$1X<=3852;o$1X++)r$1B[o$1X]=0;for(o$1X=3873;o$1X<=3885;o$1X++)r$1B[o$1X]=0;for(o$1X=3890;o$1X<=3893;o$1X++)r$1B[o$1X]=0;for(o$1X=3907;o$1X<=3912;o$1X++)r$1B[o$1X]=0;for(o$1X=3942;o$1X<=3950;o$1X++)r$1B[o$1X]=0;for(o$1X=3968;o$1X<=3970;o$1X++)r$1B[o$1X]=0;for(o$1X=3973;o$1X<=3976;o$1X++)r$1B[o$1X]=0;for(o$1X=3986;o$1X<=3989;o$1X++)r$1B[o$1X]=0;for(o$1X=3994;o$1X<=3997;o$1X++)r$1B[o$1X]=0;for(o$1X=4048;o$1X<=4051;o$1X++)r$1B[o$1X]=0;for(o$1X=4056;o$1X<=4063;o$1X++)r$1B[o$1X]=0;for(o$1X=4093;o$1X<=4096;o$1X++)r$1B[o$1X]=0;for(o$1X=4390;o$1X<=4398;o$1X++)r$1B[o$1X]=0;for(o$1X=4399;o$1X<=4413;o$1X++)r$1B[o$1X]=2;for(o$1X=4418;o$1X<=4433;o$1X++)r$1B[o$1X]=2;for(o$1X=4455;o$1X<=4457;o$1X++)r$1B[o$1X]=2;for(o$1X=4484;o$1X<=4489;o$1X++)r$1B[o$1X]=0;for(o$1X=4491;o$1X<=4554;o$1X++)r$1B[o$1X]=0;for(o$1X=4568;o$1X<=4589;o$1X++)r$1B[o$1X]=0;for(o$1X=4652;o$1X<=4656;o$1X++)r$1B[o$1X]=0;for(o$1X=4766;o$1X<=4800;o$1X++)r$1B[o$1X]=0;for(o$1X=5014;o$1X<=5016;o$1X++)r$1B[o$1X]=0;for(o$1X=5069;o$1X<=5072;o$1X++)r$1B[o$1X]=0;for(o$1X=5105;o$1X<=5130;o$1X++)r$1B[o$1X]=0;for(o$1X=5173;o$1X<=5188;o$1X++)r$1B[o$1X]=0;for(o$1X=5253;o$1X<=5259;o$1X++)r$1B[o$1X]=0;for(o$1X=5269;o$1X<=5275;o$1X++)r$1B[o$1X]=0;for(o$1X=5292;o$1X<=5311;o$1X++)r$1B[o$1X]=0;for(o$1X=5329;o$1X<=5331;o$1X++)r$1B[o$1X]=0;for(o$1X=5343;o$1X<=5349;o$1X++)r$1B[o$1X]=0;for(o$1X=5355;o$1X<=5357;o$1X++)r$1B[o$1X]=0;for(o$1X=5387;o$1X<=5389;o$1X++)r$1B[o$1X]=0;for(o$1X=5459;o$1X<=5463;o$1X++)r$1B[o$1X]=0;for(o$1X=5479;o$1X<=5482;o$1X++)r$1B[o$1X]=0;for(o$1X=5518;o$1X<=5520;o$1X++)r$1B[o$1X]=0;for(o$1X=5530;o$1X<=5539;o$1X++)r$1B[o$1X]=0;for(o$1X=5550;o$1X<=5552;o$1X++)r$1B[o$1X]=0;for(o$1X=5562;o$1X<=5583;o$1X++)r$1B[o$1X]=0;for(o$1X=5623;o$1X<=5625;o$1X++)r$1B[o$1X]=2;for(o$1X=5631;o$1X<=5639;o$1X++)r$1B[o$1X]=0;for(o$1X=5649;o$1X<=5653;o$1X++)r$1B[o$1X]=0;for(o$1X=5663;o$1X<=5680;o$1X++)r$1B[o$1X]=0;for(o$1X=5682;o$1X<=5685;o$1X++)r$1B[o$1X]=0;for(o$1X=5875;o$1X<=5877;o$1X++)r$1B[o$1X]=0;for(o$1X=5896;o$1X<=5899;o$1X++)r$1B[o$1X]=0;for(o$1X=5921;o$1X<=5940;o$1X++)r$1B[o$1X]=0;for(o$1X=6050;o$1X<=6125;o$1X++)r$1B[o$1X]=0;for(o$1X=6244;o$1X<=6275;o$1X++)r$1B[o$1X]=0;for(o$1X=6328;o$1X<=6348;o$1X++)r$1B[o$1X]=0;for(o$1X=6350;o$1X<=6356;o$1X++)r$1B[o$1X]=0;for(o$1X=6366;o$1X<=6372;o$1X++)r$1B[o$1X]=0;for(o$1X=6381;o$1X<=6387;o$1X++)r$1B[o$1X]=0;for(o$1X=6393;o$1X<=6404;o$1X++)r$1B[o$1X]=0;for(o$1X=6480;o$1X<=6483;o$1X++)r$1B[o$1X]=0;for(o$1X=6511;o$1X<=6514;o$1X++)r$1B[o$1X]=0;for(o$1X=6579;o$1X<=6581;o$1X++)r$1B[o$1X]=0;for(o$1X=6619;o$1X<=6624;o$1X++)r$1B[o$1X]=0;for(o$1X=6625;o$1X<=6627;o$1X++)r$1B[o$1X]=2;for(o$1X=6628;o$1X<=6632;o$1X++)r$1B[o$1X]=0;for(o$1X=6634;o$1X<=6637;o$1X++)r$1B[o$1X]=0;for(o$1X=6669;o$1X<=6692;o$1X++)r$1B[o$1X]=0;for(o$1X=6707;o$1X<=6709;o$1X++)r$1B[o$1X]=0;for(o$1X=6720;o$1X<=6723;o$1X++)r$1B[o$1X]=0;for(o$1X=6732;o$1X<=6738;o$1X++)r$1B[o$1X]=0;for(o$1X=6931;o$1X<=6933;o$1X++)r$1B[o$1X]=0;for(o$1X=6956;o$1X<=6959;o$1X++)r$1B[o$1X]=0;for(o$1X=7005;o$1X<=7007;o$1X++)r$1B[o$1X]=0;for(o$1X=7057;o$1X<=7070;o$1X++)r$1B[o$1X]=2;for(o$1X=7074;o$1X<=7082;o$1X++)r$1B[o$1X]=0;for(o$1X=7109;o$1X<=7118;o$1X++)r$1B[o$1X]=0;for(o$1X=7119;o$1X<=7127;o$1X++)r$1B[o$1X]=1;for(o$1X=7374;o$1X<=7376;o$1X++)r$1B[o$1X]=0;for(o$1X=7528;o$1X<=7586;o$1X++)r$1B[o$1X]=0;for(o$1X=7587;o$1X<=7645;o$1X++)r$1B[o$1X]=2;for(o$1X=7692;o$1X<=7696;o$1X++)r$1B[o$1X]=0;for(o$1X=7755;o$1X<=7787;o$1X++)r$1B[o$1X]=0;for(o$1X=7791;o$1X<=7795;o$1X++)r$1B[o$1X]=0;for(o$1X=7799;o$1X<=7801;o$1X++)r$1B[o$1X]=0;for(o$1X=7803;o$1X<=7805;o$1X++)r$1B[o$1X]=0;for(o$1X=7825;o$1X<=7831;o$1X++)r$1B[o$1X]=0;for(o$1X=7845;o$1X<=7859;o$1X++)r$1B[o$1X]=0;for(o$1X=8013;o$1X<=8032;o$1X++)r$1B[o$1X]=0;for(o$1X=8065;o$1X<=8068;o$1X++)r$1B[o$1X]=1;for(o$1X=8518;o$1X<=8529;o$1X++)r$1B[o$1X]=2;for(o$1X=8533;o$1X<=8536;o$1X++)r$1B[o$1X]=2;for(o$1X=8538;o$1X<=8540;o$1X++)r$1B[o$1X]=2;for(o$1X=8677;o$1X<=8679;o$1X++)r$1B[o$1X]=0;for(o$1X=8836;o$1X<=8840;o$1X++)r$1B[o$1X]=0;for(o$1X=8857;o$1X<=8859;o$1X++)r$1B[o$1X]=0;for(o$1X=8908;o$1X<=8910;o$1X++)r$1B[o$1X]=0;for(o$1X=9154;o$1X<=9159;o$1X++)r$1B[o$1X]=0;for(o$1X=9205;o$1X<=9218;o$1X++)r$1B[o$1X]=0;for(o$1X=9271;o$1X<=9273;o$1X++)r$1B[o$1X]=0;for(o$1X=9295;o$1X<=9297;o$1X++)r$1B[o$1X]=0;for(o$1X=9356;o$1X<=9360;o$1X++)r$1B[o$1X]=0;for(o$1X=9404;o$1X<=9407;o$1X++)r$1B[o$1X]=0;for(o$1X=9476;o$1X<=9482;o$1X++)r$1B[o$1X]=0;for(o$1X=9487;o$1X<=9494;o$1X++)r$1B[o$1X]=0;for(o$1X=9697;o$1X<=9699;o$1X++)r$1B[o$1X]=0;for(o$1X=20002;o$1X<=20032;o$1X++)r$1B[o$1X]=0;for(o$1X=20062;o$1X<=20092;o$1X++)r$1B[o$1X]=0;for(o$1X=20135;o$1X<=20138;o$1X++)r$1B[o$1X]=0;for(o$1X=20248;o$1X<=20258;o$1X++)r$1B[o$1X]=0;for(o$1X=20348;o$1X<=20358;o$1X++)r$1B[o$1X]=0;for(o$1X=20436;o$1X<=20440;o$1X++)r$1B[o$1X]=0;for(o$1X=20822;o$1X<=20824;o$1X++)r$1B[o$1X]=0;for(o$1X=20904;o$1X<=20932;o$1X++)r$1B[o$1X]=0;for(o$1X=20934;o$1X<=20936;o$1X++)r$1B[o$1X]=0;for(o$1X=21004;o$1X<=21032;o$1X++)r$1B[o$1X]=0;for(o$1X=21035;o$1X<=21037;o$1X++)r$1B[o$1X]=0;for(o$1X=21095;o$1X<=21097;o$1X++)r$1B[o$1X]=0;for(o$1X=21148;o$1X<=21150;o$1X++)r$1B[o$1X]=0;for(o$1X=21207;o$1X<=21264;o$1X++)r$1B[o$1X]=0;for(o$1X=21307;o$1X<=21364;o$1X++)r$1B[o$1X]=0;for(o$1X=21413;o$1X<=21423;o$1X++)r$1B[o$1X]=0;for(o$1X=21453;o$1X<=21463;o$1X++)r$1B[o$1X]=0;for(o$1X=21473;o$1X<=21483;o$1X++)r$1B[o$1X]=0;for(o$1X=21780;o$1X<=21782;o$1X++)r$1B[o$1X]=0;for(o$1X=21891;o$1X<=21894;o$1X++)r$1B[o$1X]=0;for(o$1X=21896;o$1X<=21899;o$1X++)r$1B[o$1X]=0;for(o$1X=22171;o$1X<=22177;o$1X++)r$1B[o$1X]=0;for(o$1X=22181;o$1X<=22187;o$1X++)r$1B[o$1X]=0;for(o$1X=22191;o$1X<=22197;o$1X++)r$1B[o$1X]=0;for(o$1X=22234;o$1X<=22236;o$1X++)r$1B[o$1X]=0;for(o$1X=22521;o$1X<=22525;o$1X++)r$1B[o$1X]=0;for(o$1X=22991;o$1X<=22994;o$1X++)r$1B[o$1X]=0;for(o$1X=23028;o$1X<=23038;o$1X++)r$1B[o$1X]=0;for(o$1X=23830;o$1X<=23853;o$1X++)r$1B[o$1X]=0;for(o$1X=23866;o$1X<=23872;o$1X++)r$1B[o$1X]=0;for(o$1X=23877;o$1X<=23884;o$1X++)r$1B[o$1X]=0;for(o$1X=23886;o$1X<=23894;o$1X++)r$1B[o$1X]=0;for(o$1X=23946;o$1X<=23948;o$1X++)r$1B[o$1X]=0;for(o$1X=24311;o$1X<=24313;o$1X++)r$1B[o$1X]=0;for(o$1X=24342;o$1X<=24347;o$1X++)r$1B[o$1X]=0;for(o$1X=24370;o$1X<=24374;o$1X++)r$1B[o$1X]=10;for(o$1X=24375;o$1X<=24381;o$1X++)r$1B[o$1X]=0;for(o$1X=24718;o$1X<=24721;o$1X++)r$1B[o$1X]=0;for(o$1X=24817;o$1X<=24821;o$1X++)r$1B[o$1X]=0;for(o$1X=24877;o$1X<=24882;o$1X++)r$1B[o$1X]=0;for(o$1X=24891;o$1X<=24893;o$1X++)r$1B[o$1X]=0;for(o$1X=25391;o$1X<=25395;o$1X++)r$1B[o$1X]=0;for(o$1X=25828;o$1X<=25838;o$1X++)r$1B[o$1X]=0;for(o$1X=26191;o$1X<=26195;o$1X++)r$1B[o$1X]=0;for(o$1X=26391;o$1X<=26393;o$1X++)r$1B[o$1X]=0;for(o$1X=26701;o$1X<=26722;o$1X++)r$1B[o$1X]=0;for(o$1X=26729;o$1X<=26799;o$1X++)r$1B[o$1X]=2;for(o$1X=26801;o$1X<=26803;o$1X++)r$1B[o$1X]=2;for(o$1X=26811;o$1X<=26813;o$1X++)r$1B[o$1X]=2;for(o$1X=26847;o$1X<=26870;o$1X++)r$1B[o$1X]=2;for(o$1X=26891;o$1X<=26899;o$1X++)r$1B[o$1X]=0;for(o$1X=26901;o$1X<=26923;o$1X++)r$1B[o$1X]=0;for(o$1X=26929;o$1X<=26946;o$1X++)r$1B[o$1X]=0;for(o$1X=26948;o$1X<=26998;o$1X++)r$1B[o$1X]=0;for(o$1X=27037;o$1X<=27040;o$1X++)r$1B[o$1X]=0;for(o$1X=27205;o$1X<=27232;o$1X++)r$1B[o$1X]=0;for(o$1X=27258;o$1X<=27260;o$1X++)r$1B[o$1X]=0;for(o$1X=27391;o$1X<=27398;o$1X++)r$1B[o$1X]=0;for(o$1X=27561;o$1X<=27564;o$1X++)r$1B[o$1X]=0;for(o$1X=27571;o$1X<=27574;o$1X++)r$1B[o$1X]=0;for(o$1X=27581;o$1X<=27584;o$1X++)r$1B[o$1X]=0;for(o$1X=27591;o$1X<=27594;o$1X++)r$1B[o$1X]=0;for(o$1X=28191;o$1X<=28193;o$1X++)r$1B[o$1X]=0;for(o$1X=28348;o$1X<=28358;o$1X++)r$1B[o$1X]=0;for(o$1X=28402;o$1X<=28432;o$1X++)r$1B[o$1X]=0;for(o$1X=28462;o$1X<=28492;o$1X++)r$1B[o$1X]=0;for(o$1X=29118;o$1X<=29122;o$1X++)r$1B[o$1X]=0;for(o$1X=29168;o$1X<=29172;o$1X++)r$1B[o$1X]=0;for(o$1X=29177;o$1X<=29185;o$1X++)r$1B[o$1X]=0;for(o$1X=29187;o$1X<=29195;o$1X++)r$1B[o$1X]=0;for(o$1X=29900;o$1X<=29903;o$1X++)r$1B[o$1X]=0;for(o$1X=30161;o$1X<=30179;o$1X++)r$1B[o$1X]=0;for(o$1X=30491;o$1X<=30494;o$1X++)r$1B[o$1X]=0;for(o$1X=30729;o$1X<=30732;o$1X++)r$1B[o$1X]=0;for(o$1X=31251;o$1X<=31259;o$1X++)r$1B[o$1X]=0;for(o$1X=31265;o$1X<=31268;o$1X++)r$1B[o$1X]=0;for(o$1X=31275;o$1X<=31279;o$1X++)r$1B[o$1X]=0;for(o$1X=31281;o$1X<=31297;o$1X++)r$1B[o$1X]=0;for(o$1X=31461;o$1X<=31469;o$1X++)r$1B[o$1X]=0;for(o$1X=31491;o$1X<=31495;o$1X++)r$1B[o$1X]=0;for(o$1X=31917;o$1X<=31922;o$1X++)r$1B[o$1X]=0;for(o$1X=31965;o$1X<=32e3;o$1X++)r$1B[o$1X]=0;for(o$1X=32001;o$1X<=32003;o$1X++)r$1B[o$1X]=2;for(o$1X=32005;o$1X<=32031;o$1X++)r$1B[o$1X]=2;for(o$1X=32033;o$1X<=32060;o$1X++)r$1B[o$1X]=2;for(o$1X=32064;o$1X<=32067;o$1X++)r$1B[o$1X]=2;for(o$1X=32074;o$1X<=32077;o$1X++)r$1B[o$1X]=2;for(o$1X=32081;o$1X<=32086;o$1X++)r$1B[o$1X]=0;for(o$1X=32107;o$1X<=32130;o$1X++)r$1B[o$1X]=0;for(o$1X=32133;o$1X<=32158;o$1X++)r$1B[o$1X]=0;for(o$1X=32164;o$1X<=32167;o$1X++)r$1B[o$1X]=2;for(o$1X=32180;o$1X<=32199;o$1X++)r$1B[o$1X]=0;for(o$1X=32201;o$1X<=32260;o$1X++)r$1B[o$1X]=0;for(o$1X=32301;o$1X<=32360;o$1X++)r$1B[o$1X]=0;for(o$1X=32601;o$1X<=32662;o$1X++)r$1B[o$1X]=0;for(o$1X=32664;o$1X<=32667;o$1X++)r$1B[o$1X]=2;for(o$1X=32701;o$1X<=32761;o$1X++)r$1B[o$1X]=0;for(o$1X=53001;o$1X<=53004;o$1X++)r$1B[o$1X]=0;for(o$1X=53008;o$1X<=53019;o$1X++)r$1B[o$1X]=0;for(o$1X=53021;o$1X<=53032;o$1X++)r$1B[o$1X]=0;for(o$1X=53034;o$1X<=53037;o$1X++)r$1B[o$1X]=0;for(o$1X=53042;o$1X<=53046;o$1X++)r$1B[o$1X]=0;for(o$1X=53074;o$1X<=53080;o$1X++)r$1B[o$1X]=0;for(o$1X=54001;o$1X<=54004;o$1X++)r$1B[o$1X]=0;for(o$1X=54008;o$1X<=54019;o$1X++)r$1B[o$1X]=0;for(o$1X=54021;o$1X<=54032;o$1X++)r$1B[o$1X]=0;for(o$1X=54034;o$1X<=54037;o$1X++)r$1B[o$1X]=0;for(o$1X=54042;o$1X<=54046;o$1X++)r$1B[o$1X]=0;for(o$1X=54048;o$1X<=54053;o$1X++)r$1B[o$1X]=0;for(o$1X=54074;o$1X<=54080;o$1X++)r$1B[o$1X]=0;for(o$1X=54098;o$1X<=54101;o$1X++)r$1B[o$1X]=0;for(o$1X=102001;o$1X<=102040;o$1X++)r$1B[o$1X]=0;for(o$1X=102042;o$1X<=102063;o$1X++)r$1B[o$1X]=0;for(o$1X=102065;o$1X<=102067;o$1X++)r$1B[o$1X]=0;for(o$1X=102070;o$1X<=102117;o$1X++)r$1B[o$1X]=0;for(o$1X=102122;o$1X<=102216;o$1X++)r$1B[o$1X]=0;for(o$1X=102221;o$1X<=102377;o$1X++)r$1B[o$1X]=0;for(o$1X=102382;o$1X<=102388;o$1X++)r$1B[o$1X]=0;for(o$1X=102389;o$1X<=102398;o$1X++)r$1B[o$1X]=2;for(o$1X=102399;o$1X<=102444;o$1X++)r$1B[o$1X]=0;for(o$1X=102445;o$1X<=102447;o$1X++)r$1B[o$1X]=2;for(o$1X=102448;o$1X<=102458;o$1X++)r$1B[o$1X]=0;for(o$1X=102459;o$1X<=102468;o$1X++)r$1B[o$1X]=2;for(o$1X=102469;o$1X<=102499;o$1X++)r$1B[o$1X]=0;for(o$1X=102500;o$1X<=102519;o$1X++)r$1B[o$1X]=1;for(o$1X=102520;o$1X<=102524;o$1X++)r$1B[o$1X]=0;for(o$1X=102525;o$1X<=102529;o$1X++)r$1B[o$1X]=2;for(o$1X=102530;o$1X<=102588;o$1X++)r$1B[o$1X]=0;for(o$1X=102590;o$1X<=102598;o$1X++)r$1B[o$1X]=0;for(o$1X=102601;o$1X<=102603;o$1X++)r$1B[o$1X]=0;for(o$1X=102605;o$1X<=102628;o$1X++)r$1B[o$1X]=0;for(o$1X=102629;o$1X<=102646;o$1X++)r$1B[o$1X]=2;for(o$1X=102648;o$1X<=102700;o$1X++)r$1B[o$1X]=2;for(o$1X=102701;o$1X<=102703;o$1X++)r$1B[o$1X]=0;for(o$1X=102707;o$1X<=102730;o$1X++)r$1B[o$1X]=2;for(o$1X=102733;o$1X<=102758;o$1X++)r$1B[o$1X]=2;for(o$1X=102767;o$1X<=102900;o$1X++)r$1B[o$1X]=0;for(o$1X=102901;o$1X<=102933;o$1X++)r$1B[o$1X]=2;for(o$1X=102934;o$1X<=102950;o$1X++)r$1B[o$1X]=13;for(o$1X=102951;o$1X<=102955;o$1X++)r$1B[o$1X]=0;for(o$1X=102961;o$1X<=102963;o$1X++)r$1B[o$1X]=0;for(o$1X=102965;o$1X<=102969;o$1X++)r$1B[o$1X]=0;for(o$1X=102971;o$1X<=102973;o$1X++)r$1B[o$1X]=0;for(o$1X=102975;o$1X<=102989;o$1X++)r$1B[o$1X]=0;for(o$1X=102990;o$1X<=102992;o$1X++)r$1B[o$1X]=1;for(o$1X=102997;o$1X<=103002;o$1X++)r$1B[o$1X]=0;for(o$1X=103003;o$1X<=103008;o$1X++)r$1B[o$1X]=2;for(o$1X=103009;o$1X<=103011;o$1X++)r$1B[o$1X]=0;for(o$1X=103012;o$1X<=103014;o$1X++)r$1B[o$1X]=2;for(o$1X=103019;o$1X<=103021;o$1X++)r$1B[o$1X]=0;for(o$1X=103022;o$1X<=103024;o$1X++)r$1B[o$1X]=2;for(o$1X=103029;o$1X<=103031;o$1X++)r$1B[o$1X]=0;for(o$1X=103032;o$1X<=103034;o$1X++)r$1B[o$1X]=2;for(o$1X=103065;o$1X<=103068;o$1X++)r$1B[o$1X]=0;for(o$1X=103074;o$1X<=103076;o$1X++)r$1B[o$1X]=0;for(o$1X=103077;o$1X<=103079;o$1X++)r$1B[o$1X]=1;for(o$1X=103080;o$1X<=103082;o$1X++)r$1B[o$1X]=0;for(o$1X=103083;o$1X<=103085;o$1X++)r$1B[o$1X]=2;for(o$1X=103090;o$1X<=103093;o$1X++)r$1B[o$1X]=0;for(o$1X=103097;o$1X<=103099;o$1X++)r$1B[o$1X]=0;for(o$1X=103100;o$1X<=103102;o$1X++)r$1B[o$1X]=2;for(o$1X=103107;o$1X<=103109;o$1X++)r$1B[o$1X]=0;for(o$1X=103110;o$1X<=103112;o$1X++)r$1B[o$1X]=2;for(o$1X=103113;o$1X<=103116;o$1X++)r$1B[o$1X]=0;for(o$1X=103117;o$1X<=103120;o$1X++)r$1B[o$1X]=2;for(o$1X=103153;o$1X<=103157;o$1X++)r$1B[o$1X]=0;for(o$1X=103158;o$1X<=103162;o$1X++)r$1B[o$1X]=2;for(o$1X=103163;o$1X<=103165;o$1X++)r$1B[o$1X]=0;for(o$1X=103166;o$1X<=103168;o$1X++)r$1B[o$1X]=1;for(o$1X=103169;o$1X<=103171;o$1X++)r$1B[o$1X]=2;for(o$1X=103186;o$1X<=103188;o$1X++)r$1B[o$1X]=0;for(o$1X=103189;o$1X<=103191;o$1X++)r$1B[o$1X]=2;for(o$1X=103192;o$1X<=103195;o$1X++)r$1B[o$1X]=0;for(o$1X=103196;o$1X<=103199;o$1X++)r$1B[o$1X]=2;for(o$1X=103200;o$1X<=103224;o$1X++)r$1B[o$1X]=0;for(o$1X=103225;o$1X<=103227;o$1X++)r$1B[o$1X]=1;for(o$1X=103232;o$1X<=103237;o$1X++)r$1B[o$1X]=0;for(o$1X=103238;o$1X<=103243;o$1X++)r$1B[o$1X]=2;for(o$1X=103244;o$1X<=103246;o$1X++)r$1B[o$1X]=0;for(o$1X=103247;o$1X<=103249;o$1X++)r$1B[o$1X]=2;for(o$1X=103254;o$1X<=103256;o$1X++)r$1B[o$1X]=0;for(o$1X=103257;o$1X<=103259;o$1X++)r$1B[o$1X]=2;for(o$1X=103264;o$1X<=103266;o$1X++)r$1B[o$1X]=0;for(o$1X=103267;o$1X<=103269;o$1X++)r$1B[o$1X]=2;for(o$1X=103300;o$1X<=103375;o$1X++)r$1B[o$1X]=0;for(o$1X=103381;o$1X<=103383;o$1X++)r$1B[o$1X]=0;for(o$1X=103384;o$1X<=103386;o$1X++)r$1B[o$1X]=1;for(o$1X=103387;o$1X<=103389;o$1X++)r$1B[o$1X]=0;for(o$1X=103390;o$1X<=103392;o$1X++)r$1B[o$1X]=2;for(o$1X=103397;o$1X<=103399;o$1X++)r$1B[o$1X]=0;for(o$1X=103400;o$1X<=103471;o$1X++)r$1B[o$1X]=2;for(o$1X=103476;o$1X<=103478;o$1X++)r$1B[o$1X]=0;for(o$1X=103479;o$1X<=103481;o$1X++)r$1B[o$1X]=2;for(o$1X=103486;o$1X<=103488;o$1X++)r$1B[o$1X]=0;for(o$1X=103489;o$1X<=103491;o$1X++)r$1B[o$1X]=2;for(o$1X=103492;o$1X<=103495;o$1X++)r$1B[o$1X]=0;for(o$1X=103496;o$1X<=103499;o$1X++)r$1B[o$1X]=2;for(o$1X=103528;o$1X<=103543;o$1X++)r$1B[o$1X]=0;for(o$1X=103544;o$1X<=103548;o$1X++)r$1B[o$1X]=2;for(o$1X=103549;o$1X<=103551;o$1X++)r$1B[o$1X]=0;for(o$1X=103552;o$1X<=103554;o$1X++)r$1B[o$1X]=1;for(o$1X=103555;o$1X<=103557;o$1X++)r$1B[o$1X]=2;for(o$1X=103558;o$1X<=103560;o$1X++)r$1B[o$1X]=0;for(o$1X=103571;o$1X<=103573;o$1X++)r$1B[o$1X]=0;for(o$1X=103574;o$1X<=103576;o$1X++)r$1B[o$1X]=2;for(o$1X=103577;o$1X<=103580;o$1X++)r$1B[o$1X]=0;for(o$1X=103581;o$1X<=103583;o$1X++)r$1B[o$1X]=2;for(o$1X=103595;o$1X<=103694;o$1X++)r$1B[o$1X]=0;for(o$1X=103696;o$1X<=103699;o$1X++)r$1B[o$1X]=0;for(o$1X=103700;o$1X<=103793;o$1X++)r$1B[o$1X]=2;for(o$1X=103794;o$1X<=103887;o$1X++)r$1B[o$1X]=0;for(o$1X=103900;o$1X<=103971;o$1X++)r$1B[o$1X]=2;const t$1T={102113:!0,102100:!0,3857:!0,3785:!0},_$z={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},l$2t='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',M$N=[-20037508342788905e-9,20037508342788905e-9],S$N=[-20037508342787e-6,20037508342787e-6],d$1Z={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:M$N,origin:S$N,dx:1e-5},102100:{wkTemplate:l$2t,valid:M$N,origin:S$N,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:M$N,origin:S$N,dx:1e-5},3857:{wkTemplate:l$2t,valid:M$N,origin:S$N,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function E$G(_t,Tt){return!t$2e(_t)&&!t$2e(Tt)&&(_t===Tt||(_t.wkid!=null||Tt.wkid!=null?_t.wkid===Tt.wkid||k$z(_t)&&k$z(Tt)||Tt.latestWkid!=null&&_t.wkid===Tt.latestWkid||_t.latestWkid!=null&&Tt.wkid===_t.latestWkid:!(!_t.wkt||!Tt.wkt)&&_t.wkt.toUpperCase()===Tt.wkt.toUpperCase()))}function R$x(_t){return I$C(_t)&&_t.wkid&&d$1Z[_t.wkid]||null}function o$1W(_t){return!!I$C(_t)&&(_t.wkid?r$1B[_t.wkid]==null:!!_t.wkt&&!!/^\s*GEOGCS/i.test(_t.wkt))}function A$w(_t){return!(P$t(_t)||s$25(_t))}function G$p(_t){return I$C(_t)&&_t.wkid===4326}function u$22(_t){return I$C(_t)&&_t.wkid===S$O.CGCS2000}function k$z(_t){return I$C(_t)&&_t.wkid!=null&&t$1T[_t.wkid]===!0}function T$x(_t){return I$C(_t)&&_t.wkid===32662}function w$12(_t){return _t===S$O.GCSMARS2000||_t===S$O.GCSMARS2000_SPHERE}function P$t(_t){return I$C(_t)&&_t.wkid!=null&&w$12(_t.wkid)}function C$s(_t){return _t===S$O.GCSMOON2000}function s$25(_t){return I$C(_t)&&_t.wkid!=null&&C$s(_t.wkid)}function p$3r(_t){return I$C(_t)&&_t.wkid!=null&&_$z[_t.wkid]===!0}function I$C(_t){return r$1P(_t)&&(_t.wkid!=null&&_t.wkid>=2e3||_t.wkt!=null)}const c$37={wkid:4326,wkt:r$1L(d$1Z[4326].wkTemplate,{Central_Meridian:"0.0"})},D$y={wkid:102100,latestWkid:3857},O$w={wkid:32662};var y$1B;let S$M=y$1B=class extends l$2v{constructor(_t){super(_t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(_t){if(!_t)return null;if(_t.wkid){if(_t.wkid===102100)return y$1B.WebMercator;if(_t.wkid===4326)return y$1B.WGS84}const Tt=new y$1B;return Tt.read(_t),Tt}normalizeCtorArgs(_t){return _t&&typeof _t=="object"?_t:{[typeof _t=="string"?"wkt":"wkid"]:_t}}get isWGS84(){return G$p(this)}get isWebMercator(){return k$z(this)}get isGeographic(){return o$1W(this)}get isWrappable(){return p$3r(this)}writeWkt(_t,Tt){this.wkid||(Tt.wkt=_t)}clone(){if(this===y$1B.WGS84)return y$1B.WGS84;if(this===y$1B.WebMercator)return y$1B.WebMercator;const _t=new y$1B;return this.wkid!=null?(_t.wkid=this.wkid,this.latestWkid!=null&&(_t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(_t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(_t.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(_t.wkt=this.wkt),this.imageCoordinateSystem&&(_t.imageCoordinateSystem=m$2e(this.imageCoordinateSystem)),_t}equals(_t){if(_t==null)return!1;if(this.imageCoordinateSystem||_t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||_t.imageCoordinateSystem==null)return!1;const{id:Tt,referenceServiceName:Mt}=_t.imageCoordinateSystem,{geodataXform:Pt}=_t.imageCoordinateSystem,Ft=this.imageCoordinateSystem;return Tt==null||Pt?JSON.stringify(Ft)===JSON.stringify(_t.imageCoordinateSystem):Mt?Ft.id===Tt&&Ft.referenceServiceName===Mt:Ft.id===Tt}return E$G(this,_t)}toJSON(_t){return this.write(void 0,_t)}};S$M.GCS_NAD_1927=null,S$M.WGS84=null,S$M.WebMercator=null,S$M.PlateCarree=null,e$2a([d$25({readOnly:!0})],S$M.prototype,"isWGS84",null),e$2a([d$25({readOnly:!0})],S$M.prototype,"isWebMercator",null),e$2a([d$25({readOnly:!0})],S$M.prototype,"isGeographic",null),e$2a([d$25({readOnly:!0})],S$M.prototype,"isWrappable",null),e$2a([d$25({type:S$Q,json:{write:!0}})],S$M.prototype,"latestWkid",void 0),e$2a([d$25({type:S$Q,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],S$M.prototype,"wkid",void 0),e$2a([d$25({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],S$M.prototype,"wkt",void 0),e$2a([r$1C("wkt"),r$1C("web-scene","wkt")],S$M.prototype,"writeWkt",null),e$2a([d$25({type:S$Q,json:{write:!0}})],S$M.prototype,"vcsWkid",void 0),e$2a([d$25({type:S$Q,json:{write:!0}})],S$M.prototype,"latestVcsWkid",void 0),e$2a([d$25()],S$M.prototype,"imageCoordinateSystem",void 0),S$M=y$1B=e$2a([n$2L("esri.geometry.SpatialReference")],S$M),S$M.prototype.toJSON.isDefaultToJSON=!0,S$M.GCS_NAD_1927=new S$M({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),S$M.WGS84=new S$M(c$37),S$M.WebMercator=new S$M(D$y),S$M.PlateCarree=new S$M(O$w),Object.freeze&&(Object.freeze(S$M.GCS_NAD_1927),Object.freeze(S$M.WGS84),Object.freeze(S$M.WebMercator));const k$y=S$M,d$1Y="20220708",f$1C="7fd01dbc0e83d753fcf101c8ff2a8d215430252d",s$24="4.24",a$2Q={async request(_t,Tt){var Vt;const{default:Mt}=await __vitePreload(()=>Promise.resolve().then(()=>request),void 0),Pt=_t.options,Ft=Pt.responseType;Pt.signal=Tt==null?void 0:Tt.signal,Pt.responseType=Ft==="native"||Ft==="native-request-init"?"native-request-init":["blob","json","text"].includes(Ft)&&((Vt=W$c(_t.url))==null?void 0:Vt.after)?Ft:"array-buffer";const Dt=await Mt(_t.url,Pt),Nt={data:Dt.data,ssl:Dt.ssl};switch(Dt.requestOptions.responseType){case"native-request-init":return delete Nt.data.signal,Nt;case"blob":Nt.data=await Nt.data.arrayBuffer();break;case"json":Nt.data=new TextEncoder().encode(JSON.stringify(Nt.data)).buffer;break;case"text":Nt.data=new TextEncoder().encode(Nt.data).buffer}return{result:Nt,transferList:[Nt.data]}}};let n$2D;function o$1V(_t){n$2D=_t}function i$2A(_t){const Tt=n$2D&&n$2D.findCredential(_t);return Tt&&Tt.token?St$1(_t,"token",Tt.token):_t}a$32("host-webworker")||(a$32("edge")||a$32("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const t$1S=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function r$1A(_t){const Tt=H$j(_t,!0);return Tt&&Tt.endsWith(".arcgis.com")&&!t$1S.includes(Tt)&&!_t.endsWith("/sharing/rest/generateToken")}function a$2P(_t,Tt,Mt=!1,Pt){return new Promise((Ft,Dt)=>{if(p$3C(Pt))return void Dt(m$23());let Nt=()=>{Xt(),Dt(new Error(`Unable to load ${Tt}`))},Vt=()=>{const Ht=_t;Xt(),Ft(Ht)},zt=()=>{if(!_t)return;const Ht=_t;Xt(),Ht.src="",Dt(m$23())};const Xt=()=>{a$32("esri-image-decode")||(_t.removeEventListener("error",Nt),_t.removeEventListener("load",Vt)),Nt=null,Vt=null,_t=null,r$1P(Pt)&&Pt.removeEventListener("abort",zt),zt=null,Mt&&URL.revokeObjectURL(Tt)};r$1P(Pt)&&Pt.addEventListener("abort",zt),a$32("esri-image-decode")?_t.decode().then(Vt,Nt):(_t.addEventListener("error",Nt),_t.addEventListener("load",Vt))})}function m$23(){try{return new DOMException("Aborted","AbortError")}catch{const _t=new Error;return _t.name="AbortError",_t}}function u$21(_t){r$1O.request.crossOriginNoCorsDomains||(r$1O.request.crossOriginNoCorsDomains={});const Tt=r$1O.request.crossOriginNoCorsDomains;for(let Mt of _t)Mt=Mt.toLowerCase(),/^https?:\/\//.test(Mt)?Tt[H$j(Mt)]=0:(Tt[H$j("http://"+Mt)]=0,Tt[H$j("https://"+Mt)]=0)}function d$1X(_t){const Tt=r$1O.request.crossOriginNoCorsDomains;if(Tt){let Mt=H$j(_t);if(Mt)return Mt=Mt.toLowerCase(),!z$z(Mt,b$19())&&Tt[Mt]<Date.now()-36e5}return!1}async function f$1B(_t){var Pt;const Tt=r$1O.request.crossOriginNoCorsDomains;Tt&&(Tt[H$j(_t).toLowerCase()]=Date.now());const Mt=j$10(_t);_t=Mt.path,((Pt=Mt.query)==null?void 0:Pt.f)==="json"&&(_t+="?f=json");try{await fetch(_t,{mode:"no-cors",credentials:"include"})}catch{}}async function U$v(_t,Tt){var Xt;const Mt=X$c(_t),Pt=V$o(_t);Pt||Mt||(_t=F$x(_t));const Ft={url:_t,requestOptions:{...Tt}};let Dt=W$c(_t);if(Dt){const Ht=await G$o(Dt,Ft);if(Ht!=null)return{data:Ht,getHeader:M$M,requestOptions:Ft.requestOptions,url:Ft.url};Dt.after||Dt.error||(Dt=null)}if(_t=Ft.url,(Tt=Ft.requestOptions).responseType==="image"){if(a$32("host-webworker")||a$32("host-node"))throw N$t("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),Ft)}else if(Mt)throw N$t("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+Tt.responseType),Ft);if(Tt.method==="head"){if(Tt.body)throw N$t("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),Ft);if(Mt||Pt)throw N$t("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),Ft)}if(await B$r(),j$$)return j$$.execute(_t,Tt);const Nt=new AbortController;v$16(Tt,()=>Nt.abort());const Vt={controller:Nt,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:Dt,params:Ft,redoRequest:!1,useIdentity:P$s.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},zt=await Q$d(Vt);return(Xt=Dt==null?void 0:Dt.after)==null||Xt.call(Dt,zt),zt}let j$$;const P$s=r$1O.request,D$x="FormData"in globalThis,_$y=[499,498,403,401],F$w=["COM_0056","COM_0057","SB_0008"],I$B=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],M$M=()=>null,R$w=Symbol();function H$i(_t){const Tt=H$j(_t);Tt&&!U$v._corsServers.includes(Tt)&&U$v._corsServers.push(Tt)}function A$v(_t){const Tt=H$j(_t);return!Tt||Tt.endsWith(".arcgis.com")||U$v._corsServers.includes(Tt)||D$z(Tt)}function N$t(_t,Tt,Mt,Pt){let Ft="Error";const Dt={url:Mt.url,requestOptions:Mt.requestOptions,getHeader:M$M,ssl:!1};if(Tt instanceof s$2i)return Tt.details?(Tt.details=m$2e(Tt.details),Tt.details.url=Mt.url,Tt.details.requestOptions=Mt.requestOptions):Tt.details=Dt,Tt;if(Tt){const Nt=Pt&&(Xt=>Pt.headers.get(Xt)),Vt=Pt&&Pt.status,zt=Tt.message;zt&&(Ft=zt),Nt&&(Dt.getHeader=Nt),Dt.httpStatus=(Tt.httpCode!=null?Tt.httpCode:Tt.code)||Vt||0,Dt.subCode=Tt.subcode,Dt.messageCode=Tt.messageCode,typeof Tt.details=="string"?Dt.messages=[Tt.details]:Dt.messages=Tt.details,Dt.raw=R$w in Tt?Tt[R$w]:Tt}return g$1l(Tt)?m$2b():new s$2i(_t,Ft,Dt)}async function B$r(){a$32("host-webworker")?j$$||(j$$=await __vitePreload(()=>import("./request.8d278eed.js"),[])):U$v._abortableFetch||(U$v._abortableFetch=globalThis.fetch.bind(globalThis))}async function $$g(){n$2D||await __vitePreload(()=>import("./IdentityManager.ce03d42d.js"),[])}async function z$y(_t){var Vt;const Tt=_t.params.url,Mt=_t.params.requestOptions,Pt=_t.controller.signal,Ft=Mt.body;let Dt=null,Nt=null;if(D$x&&"HTMLFormElement"in globalThis&&(Ft instanceof FormData?Dt=Ft:Ft instanceof HTMLFormElement&&(Dt=new FormData(Ft))),typeof Ft=="string"&&(Nt=Ft),_t.fetchOptions={cache:Mt.cacheBust&&!U$v._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:Mt.headers||{},method:Mt.method==="head"?"HEAD":"GET",mode:"cors",priority:P$s.priority,redirect:"follow",signal:Pt},(Dt||Nt)&&(_t.fetchOptions.body=Dt||Nt),Mt.authMode==="anonymous"&&(_t.useIdentity=!1),_t.hasToken=!!(/token=/i.test(Tt)||((Vt=Mt.query)==null?void 0:Vt.token)||(Dt==null?void 0:Dt.get("token"))),!_t.hasToken&&r$1O.apiKey&&r$1A(Tt)&&(Mt.query||(Mt.query={}),Mt.query.token=r$1O.apiKey,_t.hasToken=!0),_t.useIdentity&&!_t.hasToken&&!_t.credentialToken&&!K$e(Tt)&&!p$3C(Pt)){let zt;Mt.authMode==="immediate"?(await $$g(),zt=await n$2D.getCredential(Tt,{signal:Pt}),_t.credential=zt):Mt.authMode==="no-prompt"?(await $$g(),zt=await n$2D.getCredential(Tt,{prompt:!1,signal:Pt}).catch(()=>{}),_t.credential=zt):n$2D&&(zt=n$2D.findCredential(Tt)),zt&&(_t.credentialToken=zt.token,_t.useSSL=!!zt.ssl)}}function K$e(_t){return I$B.some(Tt=>Tt.test(_t))}async function W$b(_t){let Tt=_t.params.url;const Mt=_t.params.requestOptions,Pt=_t.fetchOptions,Ft=V$o(Tt)||X$c(Tt),Dt=Mt.responseType||"json",Nt=Ft?0:Mt.timeout!=null?Mt.timeout:P$s.timeout;let Vt=!1;if(!Ft){_t.useSSL&&(Tt=mt$1(Tt)),Mt.cacheBust&&Pt.cache==="default"&&(Tt=St$1(Tt,"request.preventCache",Date.now()));let Qt={...Mt.query};_t.credentialToken&&(Qt.token=_t.credentialToken);let Zt=I$D(Qt);a$32("esri-url-encodes-apostrophe")&&(Zt=Zt.replace(/'/g,"%27"));const Kt=Tt.length+1+Zt.length;let er;Vt=Mt.method==="delete"||Mt.method==="post"||Mt.method==="put"||!!Mt.body||Kt>P$s.maxUrlLength;const Yt=Mt.useProxy||!!J$j(Tt);if(Yt){const rr=A$x(Tt);er=rr.path,!Vt&&er.length+1+Kt>P$s.maxUrlLength&&(Vt=!0),rr.query&&(Qt={...rr.query,...Qt})}if(Pt.method==="HEAD"&&(Vt||Yt)){if(Vt)throw Kt>P$s.maxUrlLength?N$t("request:invalid-parameters",new Error("URL exceeds maximum length"),_t.params):N$t("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),_t.params);if(Yt)throw N$t("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),_t.params)}if(Vt?(Pt.method=Mt.method==="delete"?"DELETE":Mt.method==="put"?"PUT":"POST",Mt.body?Tt=Bt(Tt,Qt):(Pt.body=I$D(Qt),Pt.headers["Content-Type"]="application/x-www-form-urlencoded")):Tt=Bt(Tt,Qt),Yt&&(_t.useProxy=!0,Tt=`${er}?${Tt}`),Qt.token&&D$x&&Pt.body instanceof FormData&&!/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(Tt)&&Pt.body.set("token",Qt.token),Mt.hasOwnProperty("withCredentials"))_t.withCredentials=Mt.withCredentials;else if(!z$z(Tt,b$19())){if(D$z(Tt))_t.withCredentials=!0;else if(n$2D){const rr=n$2D.findServerInfo(Tt);rr&&rr.webTierAuth&&(_t.withCredentials=!0)}}_t.withCredentials&&(Pt.credentials="include",d$1X(Tt)&&await f$1B(Vt?Bt(Tt,Qt):Tt))}let zt,Xt,Ht=0,Wt=!1;Nt>0&&(Ht=setTimeout(()=>{Wt=!0,_t.controller.abort()},Nt));try{if(Mt.responseType==="native-request-init")Xt=Pt,Xt.url=Tt;else if(Mt.responseType!=="image"||Pt.cache!=="default"||Pt.method!=="GET"||Vt||J$i(Mt.headers)||!Ft&&!_t.useProxy&&P$s.proxyUrl&&!A$v(Tt)){if(zt=await U$v._abortableFetch(Tt,Pt),_t.useProxy||H$i(Tt),Mt.responseType==="native")Xt=zt;else if(Pt.method!=="HEAD")if(zt.ok){switch(Dt){case"array-buffer":Xt=await zt.arrayBuffer();break;case"blob":case"image":Xt=await zt.blob();break;default:Xt=await zt.text()}if(Ht&&(clearTimeout(Ht),Ht=0),Dt==="json"||Dt==="xml"||Dt==="document")if(Xt)switch(Dt){case"json":Xt=JSON.parse(Xt);break;case"xml":Xt=X$b(Xt,"application/xml");break;case"document":Xt=X$b(Xt,"text/html")}else Xt=null;if(Xt){if(Dt==="array-buffer"||Dt==="blob"){const Qt=zt.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(Qt)&&Xt[Dt==="blob"?"size":"byteLength"]<=750)try{const Zt=await new Response(Xt).json();Zt.error&&(Xt=Zt)}catch{}}Dt==="image"&&Xt instanceof Blob&&(Xt=await Y$c(URL.createObjectURL(Xt),_t,!0))}}else Xt=await zt.text()}else Xt=await Y$c(Tt,_t)}catch(Qt){if(Qt.name==="AbortError")throw Wt?new Error("Timeout exceeded"):m$2b("Request canceled");if(!(!zt&&Qt instanceof TypeError&&P$s.proxyUrl)||Mt.body||Mt.method==="delete"||Mt.method==="head"||Mt.method==="post"||Mt.method==="put"||_t.useProxy||A$v(Tt))throw Qt;_t.redoRequest=!0,E$H({proxyUrl:P$s.proxyUrl,urlPrefix:H$j(Tt)})}finally{Ht&&clearTimeout(Ht)}return[zt,Xt]}async function G$o(_t,Tt){if(_t.responseData!=null)return _t.responseData;if(_t.headers&&(Tt.requestOptions.headers={...Tt.requestOptions.headers,..._t.headers}),_t.query&&(Tt.requestOptions.query={...Tt.requestOptions.query,..._t.query}),_t.before){let Mt,Pt;try{Pt=await _t.before(Tt)}catch(Ft){Mt=N$t("request:interceptor",Ft,Tt)}if((Pt instanceof Error||Pt instanceof s$2i)&&(Mt=N$t("request:interceptor",Pt,Tt)),Mt)throw _t.error&&_t.error(Mt),Mt;return Pt}}function J$i(_t){if(_t){for(const Tt of Object.getOwnPropertyNames(_t))if(_t[Tt])return!0}return!1}function X$b(_t,Tt){let Mt;try{Mt=new DOMParser().parseFromString(_t,Tt)}catch{}if(!Mt||Mt.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return Mt}async function Q$d(_t){var Dt;let Tt,Mt;await z$y(_t);try{do[Tt,Mt]=await W$b(_t);while(!await V$n(_t,Tt,Mt))}catch(Nt){const Vt=N$t("request:server",Nt,_t.params,Tt);throw Vt.details.ssl=_t.useSSL,_t.interceptor&&_t.interceptor.error&&_t.interceptor.error(Vt),Vt}const Pt=_t.params.url;if(Mt&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(Pt)){if(!_t.hasToken&&!_t.credentialToken&&((Dt=Mt.user)==null?void 0:Dt.username)&&!D$z(Pt)){const Nt=H$j(Pt,!0);Nt&&P$s.trustedServers.push(Nt)}Array.isArray(Mt.authorizedCrossOriginNoCorsDomains)&&u$21(Mt.authorizedCrossOriginNoCorsDomains)}const Ft=_t.credential;if(Ft&&n$2D){const Nt=n$2D.findServerInfo(Ft.server);let Vt=Nt&&Nt.owningSystemUrl;if(Vt){Vt=Vt.replace(/\/?$/,"/sharing");const zt=n$2D.findCredential(Vt,Ft.userId);zt&&n$2D._getIdenticalSvcIdx(Vt,zt)===-1&&zt.resources.unshift(Vt)}}return{data:Mt,getHeader:Tt?Nt=>Tt.headers.get(Nt):M$M,requestOptions:_t.params.requestOptions,ssl:_t.useSSL,url:_t.params.url}}async function V$n(_t,Tt,Mt){if(_t.redoRequest)return _t.redoRequest=!1,!1;const Pt=_t.params.requestOptions;if(!Tt||Pt.responseType==="native"||Pt.responseType==="native-request-init")return!0;let Ft,Dt,Nt,Vt;if(!Tt.ok)throw Ft=new Error(`Unable to load ${Tt.url} status: ${Tt.status}`),Ft[R$w]=Mt,Ft;Mt!=null&&Mt.error&&(Ft=Mt.error),Ft&&(Dt=Number(Ft.code),Nt=Ft.hasOwnProperty("subcode")?Number(Ft.subcode):null,Vt=Ft.messageCode,Vt=Vt&&Vt.toUpperCase());const zt=Pt.authMode;if(Dt===403&&(Nt===4||Ft.message&&Ft.message.toLowerCase().includes("ssl")&&!Ft.message.toLowerCase().includes("permission"))){if(!_t.useSSL)return _t.useSSL=!0,!1}else if(!_t.hasToken&&_t.useIdentity&&(zt!=="no-prompt"||Dt===498)&&_$y.includes(Dt)&&!K$e(_t.params.url)&&(Dt!==403||!F$w.includes(Vt)&&(Nt==null||Nt===2&&_t.credentialToken))){await $$g();try{const Xt=await n$2D.getCredential(_t.params.url,{error:N$t("request:server",Ft,_t.params),prompt:zt!=="no-prompt",signal:_t.controller.signal,token:_t.credentialToken});return _t.credential=Xt,_t.credentialToken=Xt.token,_t.useSSL=_t.useSSL||Xt.ssl,!1}catch(Xt){if(zt==="no-prompt")return _t.credential=null,_t.credentialToken=null,!1;Ft=Xt}}if(Ft)throw Ft;return!0}function Y$c(_t,Tt,Mt=!1){const Pt=Tt.controller.signal,Ft=new Image;return Tt.withCredentials?Ft.crossOrigin="use-credentials":Ft.crossOrigin="anonymous",Ft.alt="",Ft.fetchPriority=P$s.priority,Ft.src=_t,a$2P(Ft,_t,Mt,Pt)}U$v._abortableFetch=null,U$v._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const request=Object.freeze(Object.defineProperty({__proto__:null,default:U$v},Symbol.toStringTag,{value:"Module"}));function o$1U(_t,Tt,Mt){let Pt,Ft;return Tt===void 0||Array.isArray(Tt)?(Ft=_t,Mt=Tt,Pt=[void 0]):(Ft=Tt,Pt=Array.isArray(_t)?_t:[_t]),(Dt,Nt)=>{const Vt=Dt.constructor.prototype;Pt.forEach(zt=>{const Xt=y$1I(Dt,zt,Ft);Xt.read&&typeof Xt.read=="object"||(Xt.read={}),Xt.read.reader=Vt[Nt],Mt&&(Xt.read.source=(Xt.read.source||[]).concat(Mt))})}}let c$36=class extends l$2v{constructor(..._t){super(..._t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=k$y.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(_t,Tt){if(_t instanceof k$y)return _t;if(_t!=null){const Mt=new k$y;return Mt.read(_t,Tt),Mt}return _t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(_t){return this.cache[_t]}setCacheValue(_t,Tt){this.cache[_t]=Tt}};e$2a([d$25()],c$36.prototype,"type",void 0),e$2a([d$25({readOnly:!0})],c$36.prototype,"cache",null),e$2a([d$25({readOnly:!0})],c$36.prototype,"extent",null),e$2a([d$25({type:Boolean,json:{write:{overridePolicy:_t=>({enabled:_t})}}})],c$36.prototype,"hasM",void 0),e$2a([d$25({type:Boolean,json:{write:{overridePolicy:_t=>({enabled:_t})}}})],c$36.prototype,"hasZ",void 0),e$2a([d$25({type:k$y,json:{write:!0}})],c$36.prototype,"spatialReference",void 0),e$2a([o$1U("spatialReference")],c$36.prototype,"readSpatialReference",null),c$36=e$2a([n$2L("esri.geometry.Geometry")],c$36);const p$3q=c$36,r$1z=Object.prototype.toString;function o$1T(_t){const Tt="__accessorMetadata__"in _t?b$1b(_t):_t;return function(...Mt){if(Mt.push(Tt),typeof Mt[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return e$1T.apply(this,Mt)}}function e$1T(_t,Tt,Mt,Pt){s$2m(_t,Tt).cast=Pt}function i$2z(_t){return(Tt,Mt)=>{s$2m(Tt,_t).cast=Tt[Mt]}}function s$23(..._t){if(_t.length!==3||typeof _t[1]!="string")return _t.length===1&&r$1z.call(_t[0])==="[object Function]"?o$1T(_t[0]):_t.length===1&&typeof _t[0]=="string"?i$2z(_t[0]):void 0}function n$2C(_t,Tt,Mt,Pt){var Ft;return _t.x=_t.x+Tt,_t.y=_t.y+Mt,Pt!=null&&(_t.z=((Ft=_t.z)!=null?Ft:0)+Pt),_t}function t$1R(_t,Tt){const Mt=_t.x-Tt.x,Pt=_t.y-Tt.y,Ft=_t.hasZ&&Tt.hasZ?_t.z-Tt.z:0;return Math.sqrt(Mt*Mt+Pt*Pt+Ft*Ft)}class i$2y{constructor(Tt,Mt,Pt,Ft){this.semiMajorAxis=Tt,this.flattening=Mt,this.outerAtmosphereRimWidth=Pt;const Dt=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*Dt,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=Ft||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const s$22=new i$2y(6378137,1/298.257223563,3e5,.006694379990137799),t$1Q=new i$2y(3396190,1/169.8944472236118,23e4),e$1S=new i$2y(1737400,0,0),o$1S=57.29577951308232,u$20=.017453292519943;function l$2s(_t){return _t*o$1S}function p$3p(_t){return _t*u$20}function c$35(_t){return Math.PI/2-2*Math.atan(Math.exp(-_t/s$22.radius))}function h$1F(_t){return _t.wkid!=null||_t.wkt!=null}const m$22=[0,0];function x$Q(_t,Tt,Mt,Pt,Ft){const Dt=_t,Nt=Ft;if(Nt.spatialReference=Mt,"x"in Dt&&"x"in Nt)[Nt.x,Nt.y]=Tt(Dt.x,Dt.y,m$22,Pt);else if("xmin"in Dt&&"xmin"in Nt)[Nt.xmin,Nt.ymin]=Tt(Dt.xmin,Dt.ymin,m$22,Pt),[Nt.xmax,Nt.ymax]=Tt(Dt.xmax,Dt.ymax,m$22,Pt);else if("paths"in Dt&&"paths"in Nt||"rings"in Dt&&"rings"in Nt){const Vt="paths"in Dt?Dt.paths:Dt.rings,zt=[];let Xt;for(let Ht=0;Ht<Vt.length;Ht++){const Wt=Vt[Ht];Xt=[],zt.push(Xt);for(let Qt=0;Qt<Wt.length;Qt++)Xt.push(Tt(Wt[Qt][0],Wt[Qt][1],[0,0],Pt)),Wt[Qt].length>2&&Xt[Qt].push(Wt[Qt][2]),Wt[Qt].length>3&&Xt[Qt].push(Wt[Qt][3])}"paths"in Nt?Nt.paths=zt:Nt.rings=zt}else if("points"in Dt&&"points"in Nt){const Vt=Dt.points,zt=[];for(let Xt=0;Xt<Vt.length;Xt++)zt[Xt]=Tt(Vt[Xt][0],Vt[Xt][1],[0,0],Pt),Vt[Xt].length>2&&zt[Xt].push(Vt[Xt][2]),Vt[Xt].length>3&&zt[Xt].push(Vt[Xt][3]);Nt.points=zt}return Ft}function g$1d(_t,Tt){const Mt=_t&&(h$1F(_t)?_t:_t.spatialReference),Pt=Tt&&(h$1F(Tt)?Tt:Tt.spatialReference);return!(_t&&"type"in _t&&_t.type==="mesh"||Tt&&"type"in Tt&&Tt.type==="mesh"||!Mt||!Pt)&&(!!E$G(Pt,Mt)||k$z(Pt)&&G$p(Mt)||k$z(Mt)&&G$p(Pt))}function M$L(_t,Tt){if(t$2e(_t))return null;const Mt=_t.spatialReference,Pt=Tt&&(h$1F(Tt)?Tt:Tt.spatialReference);return g$1d(Mt,Pt)?E$G(Mt,Pt)?m$2e(_t):k$z(Pt)?x$Q(_t,y$1A,k$y.WebMercator,!1,m$2e(_t)):G$p(Pt)?x$Q(_t,d$1W,k$y.WGS84,!1,m$2e(_t)):null:null}function y$1A(_t,Tt,Mt=[0,0]){Tt>89.99999?Tt=89.99999:Tt<-89.99999&&(Tt=-89.99999);const Pt=p$3p(Tt);return Mt[0]=p$3p(_t)*s$22.radius,Mt[1]=s$22.halfSemiMajorAxis*Math.log((1+Math.sin(Pt))/(1-Math.sin(Pt))),Mt}function d$1W(_t,Tt,Mt=[0,0],Pt=!1){const Ft=l$2s(_t/s$22.radius);return Mt[0]=Pt?Ft:Ft-360*Math.floor((Ft+180)/360),Mt[1]=l$2s(Math.PI/2-2*Math.atan(Math.exp(-Tt/s$22.radius))),Mt}function R$v(_t,Tt=!1,Mt=m$2e(_t)){return x$Q(_t,y$1A,k$y.WebMercator,Tt,Mt)}function j$_(_t,Tt=!1,Mt=m$2e(_t)){return x$Q(_t,d$1W,k$y.WGS84,Tt,Mt)}var f$1A;const g$1c=[0,0];function x$P(_t){return _t&&(_t.declaredClass==="esri.geometry.SpatialReference"||_t.wkid!=null)}const w$11=s$2l.getLogger("esri.geometry.Point");let b$18=f$1A=class extends p$3q{constructor(..._t){super(..._t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(_t,Tt){Tt._set("x",_t._get("x")),Tt._set("y",_t._get("y")),Tt._set("z",_t._get("z")),Tt._set("m",_t._get("m"));const Mt=_t._get("spatialReference");Tt._set("spatialReference",Object.isFrozen(Mt)?Mt:Mt.clone())}normalizeCtorArgs(_t,Tt,Mt,Pt,Ft){let Dt;if(Array.isArray(_t))Dt=_t,Ft=Tt,_t=Dt[0],Tt=Dt[1],Mt=Dt[2],Pt=Dt[3];else if(_t&&typeof _t=="object"){if(Dt=_t,_t=Dt.x!=null?Dt.x:Dt.longitude,Tt=Dt.y!=null?Dt.y:Dt.latitude,Mt=Dt.z,Pt=Dt.m,(Ft=Dt.spatialReference)&&Ft.declaredClass!=="esri.geometry.SpatialReference"&&(Ft=new k$y(Ft)),Dt.longitude!=null||Dt.latitude!=null){if(Dt.longitude==null)w$11.warn(".longitude=","Latitude was defined without longitude");else if(Dt.latitude==null)w$11.warn(".latitude=","Longitude was defined without latitude");else if(!Dt.declaredClass&&Ft&&Ft.isWebMercator){const Vt=y$1A(Dt.longitude,Dt.latitude,g$1c);_t=Vt[0],Tt=Vt[1]}}}else x$P(Mt)?(Ft=Mt,Mt=null):x$P(Pt)&&(Ft=Pt,Pt=null);const Nt={x:_t,y:Tt};return Nt.x==null&&Nt.y!=null?w$11.warn(".y=","Y coordinate was defined without an X coordinate"):Nt.y==null&&Nt.x!=null&&w$11.warn(".x=","X coordinate was defined without a Y coordinate"),Ft!=null&&(Nt.spatialReference=Ft),Mt!=null&&(Nt.z=Mt),Pt!=null&&(Nt.m=Pt),Nt}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(_t){_t!==(this._get("m")!==void 0)&&(this._set("m",_t?0:void 0),this._set("hasM",_t))}get hasZ(){return this.z!==void 0}set hasZ(_t){_t!==(this._get("z")!==void 0)&&(this._set("z",_t?0:void 0),this._set("hasZ",_t))}get latitude(){const{spatialReference:_t,x:Tt,y:Mt}=this;if(_t){if(_t.isWebMercator)return d$1W(Tt,Mt,g$1c)[1];if(_t.isGeographic)return Mt}return null}set latitude(_t){const{spatialReference:Tt,x:Mt}=this;Tt&&(Tt.isWebMercator?this._set("y",y$1A(Mt,_t,g$1c)[1]):Tt.isGeographic&&this._set("y",_t),this._set("latitude",_t))}get longitude(){const{x:_t,y:Tt,spatialReference:Mt}=this;if(Mt){if(Mt.isWebMercator)return d$1W(_t,Tt,g$1c)[0];if(Mt.isGeographic)return _t}return null}set longitude(_t){const{y:Tt,spatialReference:Mt}=this;Mt&&(Mt.isWebMercator?this._set("x",y$1A(_t,Tt,g$1c)[0]):Mt.isGeographic&&this._set("x",_t),this._set("longitude",_t))}writeX(_t,Tt,Mt){Tt[Mt]=isNaN(_t)?"NaN":_t}readX(_t){return typeof _t=="string"?NaN:_t}clone(){const _t=new f$1A;return _t.x=this.x,_t.y=this.y,_t.z=this.z,_t.m=this.m,_t.spatialReference=this.spatialReference,_t}copy(_t){return f$1A.copy(_t,this),this}equals(_t){if(t$2e(_t))return!1;const{x:Tt,y:Mt,z:Pt,m:Ft,spatialReference:Dt}=this,{z:Nt,m:Vt}=_t;let{x:zt,y:Xt,spatialReference:Ht}=_t;if(!Dt.equals(Ht))if(Dt.isWebMercator&&Ht.isWGS84)[zt,Xt]=y$1A(zt,Xt),Ht=Dt;else{if(!Dt.isWGS84||!Ht.isWebMercator)return!1;[zt,Xt]=d$1W(zt,Xt),Ht=Dt}return Tt===zt&&Mt===Xt&&Pt===Nt&&Ft===Vt&&Dt.wkid===Ht.wkid}offset(_t,Tt,Mt){return n$2C(this,_t,Tt,Mt)}normalize(){if(!this.spatialReference)return this;const _t=R$x(this.spatialReference);if(!_t)return this;let Tt=this.x;const[Mt,Pt]=_t.valid,Ft=2*Pt;let Dt;return Tt>Pt?(Dt=Math.ceil(Math.abs(Tt-Pt)/Ft),Tt-=Dt*Ft):Tt<Mt&&(Dt=Math.ceil(Math.abs(Tt-Mt)/Ft),Tt+=Dt*Ft),this._set("x",Tt),this}distance(_t){return t$1R(this,_t)}toArray(){const _t=this.hasZ,Tt=this.hasM;return _t&&Tt?[this.x,this.y,this.z,this.m]:_t?[this.x,this.y,this.z]:Tt?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(_t){return this.write({},_t)}};e$2a([d$25({readOnly:!0})],b$18.prototype,"cache",null),e$2a([d$25({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],b$18.prototype,"hasM",null),e$2a([d$25({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],b$18.prototype,"hasZ",null),e$2a([d$25({type:Number})],b$18.prototype,"latitude",null),e$2a([d$25({type:Number})],b$18.prototype,"longitude",null),e$2a([d$25({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),s$23(_t=>isNaN(_t)?_t:a$2Z(_t))],b$18.prototype,"x",void 0),e$2a([r$1C("x")],b$18.prototype,"writeX",null),e$2a([o$1U("x")],b$18.prototype,"readX",null),e$2a([d$25({type:Number,json:{write:!0}})],b$18.prototype,"y",void 0),e$2a([d$25({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],b$18.prototype,"z",void 0),e$2a([d$25({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],b$18.prototype,"m",void 0),b$18=f$1A=e$2a([n$2L("esri.geometry.Point")],b$18),b$18.prototype.toJSON.isDefaultToJSON=!0;const j$Z=b$18,t$1P=[0,0];function r$1y(_t,Tt){return!!r$1P(Tt)&&f$1z(_t,Tt.x,Tt.y,Tt.z)}function i$2x(_t,Tt){if(!Tt.points||Tt.points.length)return!1;for(const Mt of Tt.points)if(!u$1$(_t,Mt))return!1;return!0}function o$1R(_t,Tt){const{xmin:Mt,ymin:Pt,zmin:Ft,xmax:Dt,ymax:Nt,zmax:Vt}=Tt;return _t.hasZ&&Tt.hasZ?f$1z(_t,Mt,Pt,Ft)&&f$1z(_t,Mt,Nt,Ft)&&f$1z(_t,Dt,Nt,Ft)&&f$1z(_t,Dt,Pt,Ft)&&f$1z(_t,Mt,Pt,Vt)&&f$1z(_t,Mt,Nt,Vt)&&f$1z(_t,Dt,Nt,Vt)&&f$1z(_t,Dt,Pt,Vt):f$1z(_t,Mt,Pt)&&f$1z(_t,Mt,Nt)&&f$1z(_t,Dt,Nt)&&f$1z(_t,Dt,Pt)}function u$1$(_t,Tt){return f$1z(_t,Tt[0],Tt[1])}function e$1R(_t,Tt){return f$1z(_t,Tt[0],Tt[1],Tt[2])}function f$1z(_t,Tt,Mt,Pt){return Tt>=_t.xmin&&Tt<=_t.xmax&&Mt>=_t.ymin&&Mt<=_t.ymax&&(Pt==null||!_t.hasZ||Pt>=_t.zmin&&Pt<=_t.zmax)}function c$34(_t,Tt){return t$1P[1]=Tt.y,t$1P[0]=Tt.x,m$21(_t,t$1P)}function m$21(_t,Tt){return s$21(_t.rings,Tt)}function s$21(_t,Tt){if(!_t)return!1;if(x$O(_t))return a$2O(!1,_t,Tt);let Mt=!1;for(let Pt=0,Ft=_t.length;Pt<Ft;Pt++)Mt=a$2O(Mt,_t[Pt],Tt);return Mt}function x$O(_t){return!Array.isArray(_t[0][0])}function a$2O(_t,Tt,Mt){const[Pt,Ft]=Mt;let Dt=_t,Nt=0;for(let Vt=0,zt=Tt.length;Vt<zt;Vt++){Nt++,Nt===zt&&(Nt=0);const[Xt,Ht]=Tt[Vt],[Wt,Qt]=Tt[Nt];(Ht<Ft&&Qt>=Ft||Qt<Ft&&Ht>=Ft)&&Xt+(Ft-Ht)/(Qt-Ht)*(Wt-Xt)<Pt&&(Dt=!Dt)}return Dt}function i$2w(_t,Tt){return r$1y(_t,Tt)}function o$1Q(_t,Tt){const Mt=_t.hasZ&&Tt.hasZ;let Pt,Ft,Dt;if(_t.xmin<=Tt.xmin){if(Pt=Tt.xmin,_t.xmax<Pt)return!1}else if(Pt=_t.xmin,Tt.xmax<Pt)return!1;if(_t.ymin<=Tt.ymin){if(Ft=Tt.ymin,_t.ymax<Ft)return!1}else if(Ft=_t.ymin,Tt.ymax<Ft)return!1;if(Mt&&Tt.hasZ){if(_t.zmin<=Tt.zmin){if(Dt=Tt.zmin,_t.zmax<Dt)return!1}else if(Dt=_t.zmin,Tt.zmax<Dt)return!1}return!0}function f$1y(_t,Tt){const{points:Mt,hasZ:Pt}=Tt,Ft=Pt?e$1R:u$1$;for(const Dt of Mt)if(Ft(_t,Dt))return!0;return!1}const s$20=[0,0],u$1_=[0,0],c$33=[0,0],m$20=[0,0],l$2r=[s$20,u$1_,c$33,m$20],a$2N=[[c$33,s$20],[s$20,u$1_],[u$1_,m$20],[m$20,c$33]];function x$N(_t,Tt){return y$1z(_t,Tt.rings)}function y$1z(_t,Tt){s$20[0]=_t.xmin,s$20[1]=_t.ymax,u$1_[0]=_t.xmax,u$1_[1]=_t.ymax,c$33[0]=_t.xmin,c$33[1]=_t.ymin,m$20[0]=_t.xmax,m$20[1]=_t.ymin;for(const Mt of l$2r)if(s$21(Tt,Mt))return!0;for(const Mt of Tt){if(!Mt.length)continue;let Pt=Mt[0];if(u$1$(_t,Pt))return!0;for(let Ft=1;Ft<Mt.length;Ft++){const Dt=Mt[Ft];if(u$1$(_t,Dt)||z$x(Pt,Dt,a$2N))return!0;Pt=Dt}}return!1}function h$1E(_t,Tt){s$20[0]=_t.xmin,s$20[1]=_t.ymax,u$1_[0]=_t.xmax,u$1_[1]=_t.ymax,c$33[0]=_t.xmin,c$33[1]=_t.ymin,m$20[0]=_t.xmax,m$20[1]=_t.ymin;const Mt=Tt.paths;for(const Pt of Mt){if(!Mt.length)continue;let Ft=Pt[0];if(u$1$(_t,Ft))return!0;for(let Dt=1;Dt<Pt.length;Dt++){const Nt=Pt[Dt];if(u$1$(_t,Nt)||z$x(Ft,Nt,a$2N))return!0;Ft=Nt}}return!1}const g$1b=[0,0];function p$3o(_t){for(let Tt=0;Tt<_t.length;Tt++){const Mt=_t[Tt];for(let Ft=0;Ft<Mt.length-1;Ft++){const Dt=Mt[Ft],Nt=Mt[Ft+1];for(let Vt=Tt+1;Vt<_t.length;Vt++)for(let zt=0;zt<_t[Vt].length-1;zt++){const Xt=_t[Vt][zt],Ht=_t[Vt][zt+1];if(G$n(Dt,Nt,Xt,Ht,g$1b)&&!(g$1b[0]===Dt[0]&&g$1b[1]===Dt[1]||g$1b[0]===Xt[0]&&g$1b[1]===Xt[1]||g$1b[0]===Nt[0]&&g$1b[1]===Nt[1]||g$1b[0]===Ht[0]&&g$1b[1]===Ht[1]))return!0}}const Pt=Mt.length;if(!(Pt<=4))for(let Ft=0;Ft<Pt-3;Ft++){let Dt=Pt-1;Ft===0&&(Dt=Pt-2);const Nt=Mt[Ft],Vt=Mt[Ft+1];for(let zt=Ft+2;zt<Dt;zt++){const Xt=Mt[zt],Ht=Mt[zt+1];if(G$n(Nt,Vt,Xt,Ht,g$1b)&&!(g$1b[0]===Nt[0]&&g$1b[1]===Nt[1]||g$1b[0]===Xt[0]&&g$1b[1]===Xt[1]||g$1b[0]===Vt[0]&&g$1b[1]===Vt[1]||g$1b[0]===Ht[0]&&g$1b[1]===Ht[1]))return!0}}}return!1}function z$x(_t,Tt,Mt){for(let Pt=0;Pt<Mt.length;Pt++)if(G$n(_t,Tt,Mt[Pt][0],Mt[Pt][1]))return!0;return!1}function G$n(_t,Tt,Mt,Pt,Ft){const[Dt,Nt]=_t,[Vt,zt]=Tt,[Xt,Ht]=Mt,[Wt,Qt]=Pt,Zt=Wt-Xt,Kt=Dt-Xt,er=Vt-Dt,Yt=Qt-Ht,rr=Nt-Ht,ir=zt-Nt,nr=Yt*er-Zt*ir;if(nr===0)return!1;const ar=(Zt*rr-Yt*Kt)/nr,or=(er*rr-ir*Kt)/nr;return ar>=0&&ar<=1&&or>=0&&or<=1&&(Ft&&(Ft[0]=Dt+ar*(Vt-Dt),Ft[1]=Nt+ar*(zt-Nt)),!0)}function Z$b(_t){switch(_t){case"esriGeometryEnvelope":case"extent":return o$1Q;case"esriGeometryMultipoint":case"multipoint":return f$1y;case"esriGeometryPoint":case"point":return i$2w;case"esriGeometryPolygon":case"polygon":return x$N;case"esriGeometryPolyline":case"polyline":return h$1E}}var u$1Z;function f$1x(_t){return _t&&(_t.declaredClass==="esri.geometry.SpatialReference"||_t.wkid!=null)}function d$1V(_t,Tt,Mt){return Tt==null?Mt:Mt==null?Tt:_t(Tt,Mt)}let z$w=u$1Z=class extends p$3q{constructor(..._t){super(..._t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(_t,Tt,Mt,Pt,Ft){return f$1x(_t)?{spatialReference:_t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof _t=="object"?(_t.spatialReference=_t.spatialReference==null?k$y.WGS84:_t.spatialReference,_t):{xmin:_t,ymin:Tt,xmax:Mt,ymax:Pt,spatialReference:Ft==null?k$y.WGS84:Ft}}static fromBounds(_t,Tt){return new u$1Z({xmin:_t[0],ymin:_t[1],xmax:_t[2],ymax:_t[3],spatialReference:Tt})}static fromPoint(_t){return new u$1Z({xmin:_t.x,ymin:_t.y,zmin:_t.z,xmax:_t.x,ymax:_t.y,zmax:_t.z,spatialReference:_t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const _t=new j$Z({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(_t.z=.5*(this.zmin+this.zmax)),this.hasM&&(_t.m=.5*(this.mmin+this.mmax)),_t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(_t){const Tt=this.center;return _t.z!=null&&this.hasZ?this.offset(_t.x-Tt.x,_t.y-Tt.y,_t.z-Tt.z):this.offset(_t.x-Tt.x,_t.y-Tt.y)}clone(){const _t=new u$1Z;return _t.xmin=this.xmin,_t.ymin=this.ymin,_t.xmax=this.xmax,_t.ymax=this.ymax,_t.spatialReference=this.spatialReference,this.zmin!=null&&(_t.zmin=this.zmin,_t.zmax=this.zmax),this.mmin!=null&&(_t.mmin=this.mmin,_t.mmax=this.mmax),_t}contains(_t){if(!_t)return!1;const Tt=this.spatialReference,Mt=_t.spatialReference;return Tt&&Mt&&!Tt.equals(Mt)&&g$1d(Tt,Mt)&&(_t=Tt.isWebMercator?R$v(_t):j$_(_t,!0)),_t.type==="point"?r$1y(this,_t):_t.type==="extent"&&o$1R(this,_t)}equals(_t){if(this===_t)return!0;if(t$2e(_t))return!1;const Tt=this.spatialReference,Mt=_t.spatialReference;return Tt&&Mt&&!Tt.equals(Mt)&&g$1d(Tt,Mt)&&(_t=Tt.isWebMercator?R$v(_t):j$_(_t,!0)),this.xmin===_t.xmin&&this.ymin===_t.ymin&&this.zmin===_t.zmin&&this.mmin===_t.mmin&&this.xmax===_t.xmax&&this.ymax===_t.ymax&&this.zmax===_t.zmax&&this.mmax===_t.mmax}expand(_t){const Tt=.5*(1-_t),Mt=this.width*Tt,Pt=this.height*Tt;if(this.xmin+=Mt,this.ymin+=Pt,this.xmax-=Mt,this.ymax-=Pt,this.hasZ){const Ft=(this.zmax-this.zmin)*Tt;this.zmin+=Ft,this.zmax-=Ft}if(this.hasM){const Ft=(this.mmax-this.mmin)*Tt;this.mmin+=Ft,this.mmax-=Ft}return this}intersects(_t){if(t$2e(_t))return!1;_t.type==="mesh"&&(_t=_t.extent);const Tt=this.spatialReference,Mt=_t.spatialReference;return Tt&&Mt&&!Tt.equals(Mt)&&g$1d(Tt,Mt)&&(_t=Tt.isWebMercator?R$v(_t):j$_(_t,!0)),Z$b(_t.type)(this,_t)}normalize(){const _t=this._normalize(!1,!0);return Array.isArray(_t)?_t:[_t]}offset(_t,Tt,Mt){return this.xmin+=_t,this.ymin+=Tt,this.xmax+=_t,this.ymax+=Tt,Mt!=null&&(this.zmin+=Mt,this.zmax+=Mt),this}shiftCentralMeridian(){return this._normalize(!0)}union(_t){return this===_t||(this.xmin=Math.min(this.xmin,_t.xmin),this.ymin=Math.min(this.ymin,_t.ymin),this.xmax=Math.max(this.xmax,_t.xmax),this.ymax=Math.max(this.ymax,_t.ymax),(this.hasZ||_t.hasZ)&&(this.zmin=d$1V(Math.min,this.zmin,_t.zmin),this.zmax=d$1V(Math.max,this.zmax,_t.zmax)),(this.hasM||_t.hasM)&&(this.mmin=d$1V(Math.min,this.mmin,_t.mmin),this.mmax=d$1V(Math.max,this.mmax,_t.mmax))),this}intersection(_t){return this===_t?this:t$2e(_t)||!this.intersects(_t)?null:(this.xmin=Math.max(this.xmin,_t.xmin),this.ymin=Math.max(this.ymin,_t.ymin),this.xmax=Math.min(this.xmax,_t.xmax),this.ymax=Math.min(this.ymax,_t.ymax),(this.hasZ||_t.hasZ)&&(this.zmin=d$1V(Math.max,this.zmin,_t.zmin),this.zmax=d$1V(Math.min,this.zmax,_t.zmax)),(this.hasM||_t.hasM)&&(this.mmin=d$1V(Math.max,this.mmin,_t.mmin),this.mmax=d$1V(Math.min,this.mmax,_t.mmax)),this)}toJSON(_t){return this.write({},_t)}_shiftCM(_t=R$x(this.spatialReference)){if(!_t||!this.spatialReference)return this;const Tt=this.spatialReference,Mt=this._getCM(_t);if(Mt){const Pt=Tt.isWebMercator?j$_(Mt):Mt;this.xmin-=Mt.x,this.xmax-=Mt.x,Tt.isWebMercator||(Pt.x=this._normalizeX(Pt.x,_t).x),this.spatialReference=new k$y(r$1L(Tt.isWGS84?_t.altTemplate:_t.wkTemplate,{Central_Meridian:Pt.x}))}return this}_getCM(_t){let Tt=null;const[Mt,Pt]=_t.valid,Ft=this.xmin,Dt=this.xmax;return Ft>=Mt&&Ft<=Pt&&Dt>=Mt&&Dt<=Pt||(Tt=this.center),Tt}_normalize(_t,Tt,Mt){const Pt=this.spatialReference;if(!Pt)return this;if(!(Mt=Mt||R$x(Pt)))return this;const Ft=this._getParts(Mt).map(Vt=>Vt.extent);if(Ft.length<2)return Ft[0]||this;if(Ft.length>2)return _t?this._shiftCM(Mt):this.set({xmin:Mt.valid[0],xmax:Mt.valid[1]});if(_t)return this._shiftCM(Mt);if(Tt)return Ft;let Dt=!0,Nt=!0;return Ft.forEach(Vt=>{Vt.hasZ||(Dt=!1),Vt.hasM||(Nt=!1)}),{rings:Ft.map(Vt=>{const zt=[[Vt.xmin,Vt.ymin],[Vt.xmin,Vt.ymax],[Vt.xmax,Vt.ymax],[Vt.xmax,Vt.ymin],[Vt.xmin,Vt.ymin]];if(Dt){const Xt=(Vt.zmax-Vt.zmin)/2;for(let Ht=0;Ht<zt.length;Ht++)zt[Ht].push(Xt)}if(Nt){const Xt=(Vt.mmax-Vt.mmin)/2;for(let Ht=0;Ht<zt.length;Ht++)zt[Ht].push(Xt)}return zt}),hasZ:Dt,hasM:Nt,spatialReference:Pt}}_getParts(_t){let Tt=this.cache._parts;if(!Tt){Tt=[];const{ymin:Ft,ymax:Dt,spatialReference:Nt}=this,Vt=this.width,zt=this.xmin,Xt=this.xmax;let Ht;_t=_t||R$x(Nt);const[Wt,Qt]=_t.valid;Ht=this._normalizeX(this.xmin,_t);const Zt=Ht.x,Kt=Ht.frameId;Ht=this._normalizeX(this.xmax,_t);const er=Ht.x,Yt=Ht.frameId,rr=Zt===er&&Vt>0;if(Vt>2*Qt){const ir=new u$1Z(zt<Xt?Zt:er,Ft,Qt,Dt,Nt),nr=new u$1Z(Wt,Ft,zt<Xt?er:Zt,Dt,Nt),ar=new u$1Z(0,Ft,Qt,Dt,Nt),or=new u$1Z(Wt,Ft,0,Dt,Nt),ur=[],dr=[];ir.contains(ar)&&ur.push(Kt),ir.contains(or)&&dr.push(Kt),nr.contains(ar)&&ur.push(Yt),nr.contains(or)&&dr.push(Yt);for(let hr=Kt+1;hr<Yt;hr++)ur.push(hr),dr.push(hr);Tt.push({extent:ir,frameIds:[Kt]},{extent:nr,frameIds:[Yt]},{extent:ar,frameIds:ur},{extent:or,frameIds:dr})}else Zt>er||rr?Tt.push({extent:new u$1Z(Zt,Ft,Qt,Dt,Nt),frameIds:[Kt]},{extent:new u$1Z(Wt,Ft,er,Dt,Nt),frameIds:[Yt]}):Tt.push({extent:new u$1Z(Zt,Ft,er,Dt,Nt),frameIds:[Kt]});this.cache._parts=Tt}const Mt=this.hasZ,Pt=this.hasM;if(Mt||Pt){const Ft={};Mt&&(Ft.zmin=this.zmin,Ft.zmax=this.zmax),Pt&&(Ft.mmin=this.mmin,Ft.mmax=this.mmax);for(let Dt=0;Dt<Tt.length;Dt++)Tt[Dt].extent.set(Ft)}return Tt}_normalizeX(_t,Tt){const[Mt,Pt]=Tt.valid,Ft=2*Pt;let Dt,Nt=0;return _t>Pt?(Dt=Math.ceil(Math.abs(_t-Pt)/Ft),_t-=Dt*Ft,Nt=Dt):_t<Mt&&(Dt=Math.ceil(Math.abs(_t-Mt)/Ft),_t+=Dt*Ft,Nt=-Dt),{x:_t,frameId:Nt}}};e$2a([d$25({readOnly:!0})],z$w.prototype,"cache",null),e$2a([d$25({readOnly:!0})],z$w.prototype,"center",null),e$2a([d$25({readOnly:!0})],z$w.prototype,"extent",null),e$2a([d$25({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],z$w.prototype,"hasM",null),e$2a([d$25({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],z$w.prototype,"hasZ",null),e$2a([d$25({readOnly:!0})],z$w.prototype,"height",null),e$2a([d$25({readOnly:!0})],z$w.prototype,"width",null),e$2a([d$25({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],z$w.prototype,"xmin",void 0),e$2a([d$25({type:Number,json:{write:!0}})],z$w.prototype,"ymin",void 0),e$2a([d$25({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],z$w.prototype,"mmin",void 0),e$2a([d$25({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],z$w.prototype,"zmin",void 0),e$2a([d$25({type:Number,json:{write:!0}})],z$w.prototype,"xmax",void 0),e$2a([d$25({type:Number,json:{write:!0}})],z$w.prototype,"ymax",void 0),e$2a([d$25({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],z$w.prototype,"mmax",void 0),e$2a([d$25({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],z$w.prototype,"zmax",void 0),z$w=u$1Z=e$2a([n$2L("esri.geometry.Extent")],z$w),z$w.prototype.toJSON.isDefaultToJSON=!0;const M$K=z$w;let o$1P;var Zl,Jl,Kl;const e$1Q=(Kl=(Zl=globalThis.esriConfig)==null?void 0:Zl.locale)!=null?Kl:(Jl=globalThis.dojoConfig)==null?void 0:Jl.locale;function t$1O(){var _t,Tt;return(Tt=e$1Q!=null?e$1Q:(_t=globalThis.navigator)==null?void 0:_t.language)!=null?Tt:"en"}function l$2q(){return o$1P===void 0&&(o$1P=t$1O()),o$1P}const u$1Y=[];function s$1$(_t){return u$1Y.push(_t),{remove(){u$1Y.splice(u$1Y.indexOf(_t),1)}}}const f$1w=[];function g$1a(_t){return f$1w.push(_t),{remove(){u$1Y.splice(f$1w.indexOf(_t),1)}}}function h$1D(){const _t=t$1O();o$1P!==_t&&(o$1P=_t,[...f$1w].forEach(Tt=>{Tt.call(null,_t)}),[...u$1Y].forEach(Tt=>{Tt.call(null,_t)}))}var Yl;(Yl=globalThis.addEventListener)==null||Yl.call(globalThis,"languagechange",h$1D);class s$1_{constructor(Tt,Mt={ignoreUnknown:!1,useNumericKeys:!1}){this.jsonToAPI=Tt,this.options=Mt,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this._invertMap(Tt),this.apiValues=this._getKeysSorted(this.apiToJSON),this.jsonValues=this._getKeysSorted(this.jsonToAPI),this.read=Pt=>this.fromJSON(Pt),this.write=(Pt,Ft,Dt)=>{const Nt=this.toJSON(Pt);Nt!==void 0&&o$2d(Dt,Nt,Ft)},this.write.isJSONMapWriter=!0}toJSON(Tt){if(this.apiToJSON.hasOwnProperty(Tt)){const Mt=this.apiToJSON[Tt];return this.options.useNumericKeys?+Mt:Mt}return this.options.ignoreUnknown?void 0:Tt}fromJSON(Tt){return this.jsonToAPI.hasOwnProperty(Tt)?this.jsonToAPI[Tt]:this.options.ignoreUnknown?void 0:Tt}_invertMap(Tt){const Mt={};for(const Pt in Tt)Mt[Tt[Pt]]=Pt;return Mt}_getKeysSorted(Tt){const Mt=[];for(const Pt in Tt)Mt.push(Pt);return Mt.sort(),Mt}}function o$1O(){return function(_t,Tt){return new s$1_(_t,{ignoreUnknown:!0,...Tt})}}var u$1X;const m$1$=new s$1_({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let c$32=u$1X=class extends y$1E{constructor(_t){super(_t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(_t){_t!=="asc"&&_t!=="desc"||this._set("sortOrder",_t)}clone(){return new u$1X({categories:this.categories?m$2e(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(_t,Tt){let Mt,Pt;if(this.categories&&(Mt=this.categories.map(Nt=>Array.isArray(Nt)?JSON.stringify(Nt):Nt)),this.extent){const Nt=M$L(this.extent,k$y.WGS84);r$1P(Nt)&&(Pt=`${Nt.xmin},${Nt.ymin},${Nt.xmax},${Nt.ymax}`)}let Ft=this.query;!this.disableExtraQuery&&_t.extraQuery&&(Ft="("+Ft+")"+_t.extraQuery);const Dt={categories:Mt,bbox:Pt,q:Ft,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(Dt.sortField=this.sortField.split(",").map(Nt=>m$1$.toJSON(Nt.trim())).join(","),Dt.sortOrder=this.sortOrder),{query:{...Tt,...Dt}}}};e$2a([d$25()],c$32.prototype,"categories",void 0),e$2a([d$25()],c$32.prototype,"disableExtraQuery",void 0),e$2a([d$25({type:M$K})],c$32.prototype,"extent",void 0),e$2a([d$25()],c$32.prototype,"filter",void 0),e$2a([d$25()],c$32.prototype,"num",void 0),e$2a([d$25()],c$32.prototype,"query",void 0),e$2a([d$25()],c$32.prototype,"sortField",void 0),e$2a([d$25()],c$32.prototype,"sortOrder",null),e$2a([d$25()],c$32.prototype,"start",void 0),c$32=u$1X=e$2a([n$2L("esri.portal.PortalQueryParams")],c$32);const d$1U=c$32;let e$1P=class extends y$1E{constructor(_t){super(_t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};e$2a([d$25()],e$1P.prototype,"nextQueryParams",void 0),e$2a([d$25()],e$1P.prototype,"queryParams",void 0),e$2a([d$25()],e$1P.prototype,"results",void 0),e$2a([d$25()],e$1P.prototype,"total",void 0),e$1P=e$2a([n$2L("esri.portal.PortalQueryResult")],e$1P);const p$3n=e$1P;let p$3m=class extends l$2v{constructor(_t){super(_t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const _t=this.get("portal.restUrl");return _t?`${_t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new s$2i("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};e$2a([d$25({type:Date})],p$3m.prototype,"created",void 0),e$2a([d$25()],p$3m.prototype,"id",void 0),e$2a([d$25()],p$3m.prototype,"portal",void 0),e$2a([d$25()],p$3m.prototype,"title",void 0),e$2a([d$25({readOnly:!0})],p$3m.prototype,"url",null),e$2a([d$25()],p$3m.prototype,"username",void 0),p$3m=e$2a([n$2L("esri.portal.PortalFolder")],p$3m);const l$2p=p$3m;let l$2o=class extends l$2v{constructor(_t){super(_t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const _t=this.url,Tt=this.thumbnail;return _t&&Tt?this.portal._normalizeUrl(`${_t}/info/${Tt}?f=json`):null}get url(){const _t=this.get("portal.restUrl");return _t?_t+"/community/groups/"+this.id:null}fetchCategorySchema(_t){return this.portal._request(this.url+"/categorySchema",_t).then(Tt=>{const Mt=Tt.categorySchema||[];return Mt.some(Pt=>Pt.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",_t):Mt})}fetchMembers(_t){return this.portal._request(this.url+"/users",_t)}getThumbnailUrl(_t){let Tt=this.thumbnailUrl;return Tt&&_t&&(Tt+=`&w=${_t}`),Tt}toJSON(){throw new s$2i("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(_t,Tt){let Mt=b$1b(d$1U,_t);return parseFloat(this.portal.currentVersion)>5?(Mt=Mt||new d$1U,this.portal._queryPortal(`/content/groups/${this.id}/search`,Mt,"PortalItem",Tt)):(Mt=Mt?Mt.clone():new d$1U,Mt.query="group:"+this.id+(Mt.query?" "+Mt.query:""),this.portal.queryItems(Mt,Tt))}_fetchCategorySchemaSet(_t,Tt){return this.portal._fetchSelf(this.portal.authMode,!0,Tt).then(Mt=>{const Pt=Mt.contentCategorySetsGroupQuery;if(Pt){const Ft=new d$1U;return Ft.disableExtraQuery=!0,Ft.num=1,Ft.query=Pt,this.portal.queryGroups(Ft,Tt)}throw new s$2i("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(Mt=>{if(Mt.total){const Pt=Mt.results[0],Ft=new d$1U;return Ft.num=1,Ft.query=`typekeywords:"${_t}"`,Pt.queryItems(Ft,Tt)}throw new s$2i("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(Mt=>Mt.total?Mt.results[0].fetchData("json",Tt).then(Pt=>{const Ft=Pt&&Pt.categorySchema;return Ft&&Ft.length?Ft:[]}):[])}};e$2a([d$25()],l$2o.prototype,"access",void 0),e$2a([d$25({type:Date})],l$2o.prototype,"created",void 0),e$2a([d$25()],l$2o.prototype,"description",void 0),e$2a([d$25()],l$2o.prototype,"id",void 0),e$2a([d$25()],l$2o.prototype,"isInvitationOnly",void 0),e$2a([d$25({type:Date})],l$2o.prototype,"modified",void 0),e$2a([d$25()],l$2o.prototype,"owner",void 0),e$2a([d$25()],l$2o.prototype,"portal",void 0),e$2a([d$25()],l$2o.prototype,"snippet",void 0),e$2a([d$25()],l$2o.prototype,"sortField",void 0),e$2a([d$25()],l$2o.prototype,"sortOrder",void 0),e$2a([d$25()],l$2o.prototype,"tags",void 0),e$2a([d$25()],l$2o.prototype,"thumbnail",void 0),e$2a([d$25({readOnly:!0})],l$2o.prototype,"thumbnailUrl",null),e$2a([d$25()],l$2o.prototype,"title",void 0),e$2a([d$25({readOnly:!0})],l$2o.prototype,"url",null),l$2o=e$2a([n$2L("esri.portal.PortalGroup")],l$2o);const p$3l=l$2o,PortalGroup=Object.freeze(Object.defineProperty({__proto__:null,default:p$3l},Symbol.toStringTag,{value:"Module"}));var i$2v;let u$1W=i$2v=class extends l$2v{constructor(..._t){super(..._t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const _t=this.url,Tt=this.thumbnail;return _t&&Tt?this.portal._normalizeUrl(`${_t}/info/${Tt}?f=json`):null}get userContentUrl(){const _t=this.get("portal.restUrl");return _t?`${_t}/content/users/${this.username}`:null}get url(){const _t=this.get("portal.restUrl");return _t?`${_t}/community/users/${this.username}`:null}addItem(_t){const Tt=_t&&_t.item,Mt=_t&&_t.data,Pt=_t&&_t.folder,Ft={method:"post"};Tt&&(Ft.query=Tt.createPostQuery(),Mt!=null&&(typeof Mt=="string"?Ft.query.text=Mt:typeof Mt=="object"&&(Ft.query.text=JSON.stringify(Mt))));let Dt=this.userContentUrl;return Pt&&(Dt+="/"+(typeof Pt=="string"?Pt:Pt.id)),this.portal._request(Dt+"/addItem",Ft).then(Nt=>(Tt.id=Nt.id,Tt.portal=this.portal,Tt.loaded?Tt.reload():Tt.load()))}deleteItem(_t){let Tt=this.userContentUrl;return _t.ownerFolder&&(Tt+="/"+_t.ownerFolder),this.portal._request(Tt+`/items/${_t.id}/delete`,{method:"post"}).then(()=>{_t.id=null,_t.portal=null})}deleteItems(_t){const Tt=this.userContentUrl+"/deleteItems",Mt=_t.map(Pt=>Pt.id);if(Mt.length){const Pt={method:"post",query:{items:Mt.join(",")}};return this.portal._request(Tt,Pt).then(()=>{_t.forEach(Ft=>{Ft.id=null,Ft.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const _t={query:{num:1}};return this.portal._request(this.userContentUrl,_t).then(Tt=>{let Mt;return Mt=Tt&&Tt.folders?Tt.folders.map(Pt=>{const Ft=l$2p.fromJSON(Pt);return Ft.portal=this.portal,Ft}):[],Mt})}fetchGroups(){return this.portal._request(this.url).then(_t=>{let Tt;return Tt=_t&&_t.groups?_t.groups.map(Mt=>{const Pt=p$3l.fromJSON(Mt);return Pt.portal=this.portal,Pt}):[],Tt})}fetchItems(_t){_t||(_t={});let Tt,Mt=this.userContentUrl;return _t.folder&&(Mt+="/"+_t.folder.id),__vitePreload(()=>Promise.resolve().then(()=>PortalItem),void 0).then(({default:Pt})=>{Tt=Pt;const Ft={folders:!1,num:_t.num||10,start:_t.start||1,sortField:_t.sortField||"created",sortOrder:_t.sortOrder||"asc"};return this.portal._request(Mt,{query:Ft})}).then(Pt=>{let Ft;return Pt&&Pt.items?(Ft=Pt.items.map(Dt=>{const Nt=Tt.fromJSON(Dt);return Nt.portal=this.portal,Nt}),Promise.all(Ft.map(Dt=>Dt.load())).catch(Dt=>Dt).then(()=>({items:Ft,nextStart:Pt.nextStart,total:Pt.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(_t=>_t.tags)}getThumbnailUrl(_t){let Tt=this.thumbnailUrl;return Tt&&_t&&(Tt+=`&w=${_t}`),Tt}queryFavorites(_t){return this.favGroupId?(this._favGroup||(this._favGroup=new p$3l({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(_t)):Promise.reject(new s$2i("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new s$2i("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(_t){if(!_t)return null;if(_t.declaredClass)throw new Error("JSON object is already hydrated");const Tt=new i$2v;return Tt.sourceJSON=_t,Tt.read(_t),Tt}};e$2a([d$25()],u$1W.prototype,"access",void 0),e$2a([d$25({type:Date})],u$1W.prototype,"created",void 0),e$2a([d$25()],u$1W.prototype,"culture",void 0),e$2a([d$25()],u$1W.prototype,"description",void 0),e$2a([d$25()],u$1W.prototype,"email",void 0),e$2a([d$25()],u$1W.prototype,"favGroupId",void 0),e$2a([d$25()],u$1W.prototype,"fullName",void 0),e$2a([d$25({type:Date})],u$1W.prototype,"modified",void 0),e$2a([d$25()],u$1W.prototype,"orgId",void 0),e$2a([d$25()],u$1W.prototype,"portal",void 0),e$2a([d$25()],u$1W.prototype,"preferredView",void 0),e$2a([d$25()],u$1W.prototype,"privileges",void 0),e$2a([d$25()],u$1W.prototype,"region",void 0),e$2a([d$25()],u$1W.prototype,"role",void 0),e$2a([d$25()],u$1W.prototype,"roleId",void 0),e$2a([d$25()],u$1W.prototype,"sourceJSON",void 0),e$2a([d$25()],u$1W.prototype,"thumbnail",void 0),e$2a([d$25({readOnly:!0})],u$1W.prototype,"thumbnailUrl",null),e$2a([d$25()],u$1W.prototype,"units",void 0),e$2a([d$25({readOnly:!0})],u$1W.prototype,"userContentUrl",null),e$2a([d$25({readOnly:!0})],u$1W.prototype,"url",null),e$2a([d$25()],u$1W.prototype,"username",void 0),e$2a([d$25()],u$1W.prototype,"userType",void 0),u$1W=i$2v=e$2a([n$2L("esri.portal.PortalUser")],u$1W);const p$3k=u$1W,PortalUser=Object.freeze(Object.defineProperty({__proto__:null,default:p$3k},Symbol.toStringTag,{value:"Module"}));var G$m;let O$v;const U$u={PortalGroup:()=>__vitePreload(()=>Promise.resolve().then(()=>PortalGroup),void 0),PortalItem:()=>__vitePreload(()=>Promise.resolve().then(()=>PortalItem),void 0),PortalUser:()=>__vitePreload(()=>Promise.resolve().then(()=>PortalUser),void 0)};let j$Y=G$m=class extends u$26(m$25){constructor(_t){super(_t),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=r$1O.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(_t){return typeof _t=="string"?{url:_t}:_t}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(_t){if(_t)for(const Tt of _t)r$1O.request.trustedServers.includes(Tt)||r$1O.request.trustedServers.push(Tt);return _t}readDefaultBasemap(_t){return this._readBasemap(_t)}readDefaultDevBasemap(_t){return this._readBasemap(_t)}readDefaultVectorBasemap(_t){return this._readBasemap(_t)}get extraQuery(){const _t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!_t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let _t=this.url;if(_t){const Tt=_t.indexOf("/sharing");_t=Tt>0?_t.substring(0,Tt):this.url.replace(/\/+$/,""),_t+="/sharing/rest"}return _t}get thumbnailUrl(){const _t=this.restUrl,Tt=this.thumbnail;return _t&&Tt?this._normalizeSSL(_t+"/portals/self/resources/"+Tt):null}readUrlKey(_t){return _t&&_t.toLowerCase()}readUser(_t){let Tt=null;return _t&&(Tt=p$3k.fromJSON(_t),Tt.portal=this),Tt}load(_t){const Tt=__vitePreload(()=>Promise.resolve().then(()=>Basemap),void 0).then(({default:Mt})=>{f$1M(_t),O$v=Mt}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,_t)).then(Mt=>{if(n$2D){const Pt=n$2D;this.credential=Pt.findCredential(this.restUrl),this.credential||this.authMode!==G$m.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=Pt.on("credential-create",()=>{Pt.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=Mt,this.read(Mt)});return this.addResolvingPromise(Tt),Promise.resolve(this)}async createElevationLayers(){await this.load();const _t=this._getHelperService("defaultElevationLayers"),Tt=(await __vitePreload(()=>import("./ElevationLayer.34339741.js"),["assets/ElevationLayer.34339741.js","assets/ArcGISCachedService.61d2d389.js","assets/TilemapCache.ae39b849.js","assets/WorkerHandle.a8d6acef.js"])).default;return _t?_t.map(Mt=>new Tt({id:Mt.id,url:Mt.url})):[]}fetchBasemaps(_t,Tt){const Mt=new d$1U;return Mt.query=_t||(r$1O.apiKey&&r$1A(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),Mt.disableExtraQuery=!0,this.queryGroups(Mt,Tt).then(Pt=>{if(Mt.num=100,Mt.query='type:"Web Map" -type:"Web Application"',Pt.total){const Ft=Pt.results[0];return Mt.sortField=Ft.sortField||"name",Mt.sortOrder=Ft.sortOrder||"desc",Ft.queryItems(Mt,Tt)}return null}).then(Pt=>{let Ft;return Ft=Pt&&Pt.total?Pt.results.filter(Dt=>Dt.type==="Web Map").map(Dt=>new O$v({portalItem:Dt})):[],Ft})}fetchCategorySchema(_t){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",_t).then(Tt=>Tt.categorySchema):p$3C(_t)?Promise.reject(m$2b()):Promise.resolve([])}fetchFeaturedGroups(_t){const Tt=this.featuredGroups,Mt=new d$1U;if(Mt.num=100,Mt.sortField="title",Tt&&Tt.length){const Pt=[];for(const Ft of Tt)Pt.push(`(title:"${Ft.title}" AND owner:${Ft.owner})`);return Mt.query=Pt.join(" OR "),this.queryGroups(Mt,_t).then(Ft=>Ft.results)}return p$3C(_t)?Promise.reject(m$2b()):Promise.resolve([])}fetchRegions(_t){var Mt;const Tt=((Mt=this.user)==null?void 0:Mt.culture)||this.culture||l$2q();return this._request(this.restUrl+"/portals/regions",{..._t,query:{culture:Tt}})}fetchSettings(_t){var Mt;const Tt=((Mt=this.user)==null?void 0:Mt.culture)||this.culture||l$2q();return this._request(this.restUrl+"/portals/self/settings",{..._t,query:{culture:Tt}})}static getDefault(){return G$m._default&&!G$m._default.destroyed||(G$m._default=new G$m),G$m._default}queryGroups(_t,Tt){return this._queryPortal("/community/groups",_t,"PortalGroup",Tt)}queryItems(_t,Tt){return this._queryPortal("/search",_t,"PortalItem",Tt)}queryUsers(_t,Tt){return _t.sortField||(_t.sortField="username"),this._queryPortal("/community/users",_t,"PortalUser",Tt)}toJSON(){throw new s$2i("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(_t){if(!_t)return null;if(_t.declaredClass)throw new Error("JSON object is already hydrated");return new G$m({sourceJSON:_t})}_getHelperService(_t){const Tt=this.helperServices&&this.helperServices[_t];if(!Tt)throw new s$2i("portal:service-not-found",`The \`helperServices\` do not include an entry named "${_t}"`);return Tt}_getHelperServiceUrl(_t){const Tt=this._getHelperService(_t);if(!Tt.url)throw new s$2i("portal:service-url-not-found",`The \`helperServices\` entry "${_t}" does not include a \`url\` value`);return Tt.url}_fetchSelf(_t=this.authMode,Tt=!1,Mt){const Pt=this.restUrl+"/portals/self",Ft={authMode:_t,query:{culture:l$2q().toLowerCase()},...Mt};return Ft.authMode==="auto"&&(Ft.authMode="no-prompt"),Tt&&(Ft.query.default=!0),this._request(Pt,Ft)}_queryPortal(_t,Tt,Mt,Pt){const Ft=b$1b(d$1U,Tt),Dt=Nt=>this._request(this.restUrl+_t,{...Ft.toRequestOptions(this),...Pt}).then(Vt=>{const zt=Ft.clone();return zt.start=Vt.nextStart,new p$3n({nextQueryParams:zt,queryParams:Ft,total:Vt.total,results:G$m._resultsToTypedArray(Nt,{portal:this},Vt,Pt)})}).then(Vt=>Promise.all(Vt.results.map(zt=>typeof zt.when=="function"?zt.when():Vt)).then(()=>Vt,zt=>(w$18(zt),Vt)));return Mt&&U$u[Mt]?U$u[Mt]().then(({default:Nt})=>(f$1M(Pt),Dt(Nt))):Dt()}_signIn(){if(this.authMode===G$m.AUTH_MODE_ANONYMOUS)return Promise.reject(new s$2i("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const _t=Tt=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(Tt||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=Tt,this._fetchSelf("immediate"))):this.user&&this.credential===Tt?null:(this.credential=Tt,this._fetchSelf("immediate"))).then(Mt=>{Mt&&(this.sourceJSON=Mt,this.read(Mt))});return n$2D?n$2D.getCredential(this.restUrl).then(Tt=>_t(Tt)):_t(this.credential)}_normalizeSSL(_t){return _t.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(_t){const Tt=this.credential&&this.credential.token;return this._normalizeSSL(Tt?_t+(_t.includes("?")?"&":"?")+"token="+Tt:_t)}_requestToTypedArray(_t,Tt,Mt){return this._request(_t,Tt).then(Pt=>{const Ft=G$m._resultsToTypedArray(Mt,{portal:this},Pt);return Promise.all(Ft.map(Dt=>typeof Dt.when=="function"?Dt.when():Pt)).then(()=>Ft,()=>Ft)})}_readBasemap(_t){if(_t){const Tt=O$v.fromJSON(_t);return Tt.portalItem={portal:this},Tt}return null}_request(_t,Tt={}){const Mt={f:"json",...Tt.query},{authMode:Pt=this.authMode===G$m.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:Ft=null,cacheBust:Dt=!1,method:Nt="auto",responseType:Vt="json",signal:zt}=Tt,Xt={authMode:Pt,body:Ft,cacheBust:Dt,method:Nt,query:Mt,responseType:Vt,timeout:0,signal:zt};return U$v(this._normalizeSSL(_t),Xt).then(Ht=>Ht.data)}static _resultsToTypedArray(_t,Tt,Mt,Pt){let Ft;if(Mt){const Dt=r$1P(Pt)?Pt.signal:null;Ft=Mt.listings||Mt.notifications||Mt.userInvitations||Mt.tags||Mt.items||Mt.groups||Mt.comments||Mt.provisions||Mt.results||Mt.relatedItems||Mt,(_t||Tt)&&(Ft=Ft.map(Nt=>{const Vt=Object.assign(_t?_t.fromJSON(Nt):Nt,Tt);return typeof Vt.load=="function"&&Vt.load(Dt),Vt}))}else Ft=[];return Ft}};j$Y.AUTH_MODE_ANONYMOUS="anonymous",j$Y.AUTH_MODE_AUTO="auto",j$Y.AUTH_MODE_IMMEDIATE="immediate",e$2a([d$25()],j$Y.prototype,"access",void 0),e$2a([d$25()],j$Y.prototype,"allSSL",void 0),e$2a([d$25()],j$Y.prototype,"authMode",void 0),e$2a([d$25()],j$Y.prototype,"authorizedCrossOriginDomains",void 0),e$2a([o$1U("authorizedCrossOriginDomains")],j$Y.prototype,"readAuthorizedCrossOriginDomains",null),e$2a([d$25()],j$Y.prototype,"basemapGalleryGroupQuery",void 0),e$2a([d$25()],j$Y.prototype,"bingKey",void 0),e$2a([d$25()],j$Y.prototype,"canListApps",void 0),e$2a([d$25()],j$Y.prototype,"canListData",void 0),e$2a([d$25()],j$Y.prototype,"canListPreProvisionedItems",void 0),e$2a([d$25()],j$Y.prototype,"canProvisionDirectPurchase",void 0),e$2a([d$25()],j$Y.prototype,"canSearchPublic",void 0),e$2a([d$25()],j$Y.prototype,"canShareBingPublic",void 0),e$2a([d$25()],j$Y.prototype,"canSharePublic",void 0),e$2a([d$25()],j$Y.prototype,"canSignInArcGIS",void 0),e$2a([d$25()],j$Y.prototype,"canSignInIDP",void 0),e$2a([d$25()],j$Y.prototype,"colorSetsGroupQuery",void 0),e$2a([d$25()],j$Y.prototype,"commentsEnabled",void 0),e$2a([d$25({type:Date})],j$Y.prototype,"created",void 0),e$2a([d$25()],j$Y.prototype,"credential",void 0),e$2a([d$25()],j$Y.prototype,"culture",void 0),e$2a([d$25()],j$Y.prototype,"currentVersion",void 0),e$2a([d$25()],j$Y.prototype,"customBaseUrl",void 0),e$2a([d$25()],j$Y.prototype,"defaultBasemap",void 0),e$2a([o$1U("defaultBasemap")],j$Y.prototype,"readDefaultBasemap",null),e$2a([d$25()],j$Y.prototype,"defaultDevBasemap",void 0),e$2a([o$1U("defaultDevBasemap")],j$Y.prototype,"readDefaultDevBasemap",null),e$2a([d$25({type:M$K})],j$Y.prototype,"defaultExtent",void 0),e$2a([d$25()],j$Y.prototype,"defaultVectorBasemap",void 0),e$2a([o$1U("defaultVectorBasemap")],j$Y.prototype,"readDefaultVectorBasemap",null),e$2a([d$25()],j$Y.prototype,"description",void 0),e$2a([d$25()],j$Y.prototype,"devBasemapGalleryGroupQuery",void 0),e$2a([d$25()],j$Y.prototype,"eueiEnabled",void 0),e$2a([d$25({readOnly:!0})],j$Y.prototype,"extraQuery",null),e$2a([d$25()],j$Y.prototype,"featuredGroups",void 0),e$2a([d$25()],j$Y.prototype,"featuredItemsGroupQuery",void 0),e$2a([d$25()],j$Y.prototype,"galleryTemplatesGroupQuery",void 0),e$2a([d$25()],j$Y.prototype,"livingAtlasGroupQuery",void 0),e$2a([d$25()],j$Y.prototype,"hasCategorySchema",void 0),e$2a([d$25()],j$Y.prototype,"helpBase",void 0),e$2a([d$25()],j$Y.prototype,"helperServices",void 0),e$2a([d$25()],j$Y.prototype,"helpMap",void 0),e$2a([d$25()],j$Y.prototype,"homePageFeaturedContent",void 0),e$2a([d$25()],j$Y.prototype,"homePageFeaturedContentCount",void 0),e$2a([d$25()],j$Y.prototype,"httpPort",void 0),e$2a([d$25()],j$Y.prototype,"httpsPort",void 0),e$2a([d$25()],j$Y.prototype,"id",void 0),e$2a([d$25()],j$Y.prototype,"ipCntryCode",void 0),e$2a([d$25({readOnly:!0})],j$Y.prototype,"isOrganization",null),e$2a([d$25()],j$Y.prototype,"isPortal",void 0),e$2a([d$25()],j$Y.prototype,"isReadOnly",void 0),e$2a([d$25()],j$Y.prototype,"layerTemplatesGroupQuery",void 0),e$2a([d$25()],j$Y.prototype,"maxTokenExpirationMinutes",void 0),e$2a([d$25({type:Date})],j$Y.prototype,"modified",void 0),e$2a([d$25()],j$Y.prototype,"name",void 0),e$2a([d$25()],j$Y.prototype,"portalHostname",void 0),e$2a([d$25()],j$Y.prototype,"portalMode",void 0),e$2a([d$25()],j$Y.prototype,"portalProperties",void 0),e$2a([d$25()],j$Y.prototype,"region",void 0),e$2a([d$25({readOnly:!0})],j$Y.prototype,"restUrl",null),e$2a([d$25()],j$Y.prototype,"rotatorPanels",void 0),e$2a([d$25()],j$Y.prototype,"showHomePageDescription",void 0),e$2a([d$25()],j$Y.prototype,"sourceJSON",void 0),e$2a([d$25()],j$Y.prototype,"staticImagesUrl",void 0),e$2a([d$25({json:{name:"2DStylesGroupQuery"}})],j$Y.prototype,"stylesGroupQuery2d",void 0),e$2a([d$25({json:{name:"stylesGroupQuery"}})],j$Y.prototype,"stylesGroupQuery3d",void 0),e$2a([d$25()],j$Y.prototype,"supportsHostedServices",void 0),e$2a([d$25()],j$Y.prototype,"symbolSetsGroupQuery",void 0),e$2a([d$25()],j$Y.prototype,"templatesGroupQuery",void 0),e$2a([d$25()],j$Y.prototype,"thumbnail",void 0),e$2a([d$25({readOnly:!0})],j$Y.prototype,"thumbnailUrl",null),e$2a([d$25()],j$Y.prototype,"units",void 0),e$2a([d$25()],j$Y.prototype,"url",void 0),e$2a([d$25()],j$Y.prototype,"urlKey",void 0),e$2a([o$1U("urlKey")],j$Y.prototype,"readUrlKey",null),e$2a([d$25()],j$Y.prototype,"user",void 0),e$2a([o$1U("user")],j$Y.prototype,"readUser",null),e$2a([d$25()],j$Y.prototype,"useStandardizedQuery",void 0),e$2a([d$25()],j$Y.prototype,"useVectorBasemaps",void 0),e$2a([d$25()],j$Y.prototype,"vectorBasemapGalleryGroupQuery",void 0),j$Y=G$m=e$2a([n$2L("esri.portal.Portal")],j$Y);const B$q=j$Y,i$2u=s$2l.getLogger("esri.assets");function a$2M(_t){if(!r$1O.assetsPath)throw i$2u.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new s$2i("assets:path-not-set","config.assetsPath is not set");return G$q(r$1O.assetsPath,_t)}const h$1C=s$2l.getLogger("esri.portal.PortalItemResource");let n$2B=class extends y$1E{constructor(_t){super(_t),this.portalItem=null}normalizeCtorArgs(_t){return _t&&_t.portalItem&&_t.path?{..._t,path:this._normalizePath(_t.path,_t.portalItem)}:_t}set path(_t){r$1P(_t)&&K$f(_t)?h$1C.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",_t)}_castPath(_t){return this._normalizePath(_t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(_t="json",Tt){const Mt=this.url;if(t$2e(Mt))throw new s$2i("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(Mt,{responseType:_t,query:{token:this.portalItem.apiKey},signal:m$2g(Tt,"signal")})}async update(_t,Tt){return(await __vitePreload(()=>import("./resourceUtils.2925d6cb.js"),[])).addOrUpdateResource(this,"update",_t,Tt)}hasPath(){return r$1P(this.path)}_normalizePath(_t,Tt){return t$2e(_t)?_t:(_t=_t.replace(/^\/+/,""),r$1P(Tt)&&K$f(_t)&&(_t=_$A(_t,Tt.itemUrl)),_t.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};e$2a([d$25()],n$2B.prototype,"portalItem",void 0),e$2a([d$25({type:String,value:null})],n$2B.prototype,"path",null),e$2a([s$23("path")],n$2B.prototype,"_castPath",null),e$2a([d$25({type:String,readOnly:!0})],n$2B.prototype,"url",null),e$2a([d$25({type:String,readOnly:!0})],n$2B.prototype,"itemRelativeUrl",null),n$2B=e$2a([n$2L("esri.portal.PortalItemResource")],n$2B);const y$1y=n$2B;let e$1O=class extends y$1E{constructor(_t){super(_t),this.created=null,this.rating=null}};e$2a([d$25()],e$1O.prototype,"created",void 0),e$2a([d$25()],e$1O.prototype,"rating",void 0),e$1O=e$2a([n$2L("esri.portal.PortalRating")],e$1O);const c$31=e$1O;var w$10;let f$1v=w$10=class extends u$26(m$25){constructor(_t){super(_t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(_t){return v$13(w$10,_t)}destroy(){this.portal=null}get displayName(){const _t=this.type,Tt=this.typeKeywords||[];let Mt=_t;return _t==="Feature Service"||_t==="Feature Collection"?Mt=Tt.includes("Table")?"Table":Tt.includes("Route Layer")?"Route Layer":Tt.includes("Markup")?"Markup":"Feature Layer":_t==="Image Service"?Mt=Tt.includes("Elevation 3D Layer")?"Elevation Layer":Tt.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":_t==="Scene Service"?Mt="Scene Layer":_t==="Video Service"?Mt="Video Layer":_t==="Scene Package"?Mt="Scene Layer Package":_t==="Stream Service"?Mt="Feature Layer":_t==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?Mt=Tt.includes("Web Tool")?"Tool":"Geoprocessing Service":_t==="Geocoding Service"?Mt="Locator":_t==="Geoenrichment Service"?Mt="GeoEnrichment Service":_t==="Microsoft Powerpoint"?Mt="Microsoft PowerPoint":_t==="GeoJson"?Mt="GeoJSON":_t==="Globe Service"?Mt="Globe Layer":_t==="Vector Tile Service"?Mt="Tile Layer":_t==="netCDF"?Mt="NetCDF":_t==="Map Service"?Mt=Tt.includes("Spatiotemporal")||!Tt.includes("Hosted Service")&&!Tt.includes("Tiled")||Tt.includes("Relational")?"Map Image Layer":"Tile Layer":_t&&_t.toLowerCase().includes("add in")?Mt=_t.replace(/(add in)/gi,"Add-In"):_t==="datastore catalog service"?Mt="Big Data File Share":_t==="Compact Tile Package"?Mt="Tile Package (tpkx)":_t==="OGCFeatureServer"?Mt="OGC Feature Layer":_t==="web mapping application"&&Tt.includes("configurableApp")&&(Mt="Instant App"),Mt}readExtent(_t){return _t&&_t.length?new M$K(_t[0][0],_t[0][1],_t[1][0],_t[1][1]):null}get iconUrl(){const _t=this.type&&this.type.toLowerCase()||"",Tt=this.typeKeywords||[],Mt="esri/images/portal/",Pt="16";let Ft,Dt=!1,Nt=!1,Vt=!1,zt=!1,Xt=!1,Ht=!1;return _t.indexOf("service")>0||_t==="feature collection"||_t==="kml"||_t==="wms"||_t==="wmts"||_t==="wfs"?(Dt=Tt.includes("Hosted Service"),_t==="feature service"||_t==="feature collection"||_t==="kml"||_t==="wfs"?(Nt=Tt.includes("Table"),Vt=Tt.includes("Route Layer"),zt=Tt.includes("Markup"),Xt=Tt.includes("Spatiotemporal"),Ht=Tt.includes("UtilityNetwork"),Ft=Xt&&Nt?"spatiotemporaltable":Nt?"table":Vt?"routelayer":zt?"markup":Xt?"spatiotemporal":Dt?"featureshosted":Ht?"utilitynetwork":"features"):Ft=_t==="map service"||_t==="wms"||_t==="wmts"?Dt||Tt.includes("Tiled")||_t==="wmts"?"maptiles":"mapimages":_t==="scene service"?Tt.includes("Line")?"sceneweblayerline":Tt.includes("3DObject")?"sceneweblayermultipatch":Tt.includes("Point")?"sceneweblayerpoint":Tt.includes("IntegratedMesh")?"sceneweblayermesh":Tt.includes("PointCloud")?"sceneweblayerpointcloud":Tt.includes("Polygon")?"sceneweblayerpolygon":Tt.includes("Building")?"sceneweblayerbuilding":Tt.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":_t==="image service"?Tt.includes("Elevation 3D Layer")?"elevationlayer":Tt.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":_t==="stream service"?"streamlayer":_t==="video service"?"mediaservice":_t==="vector tile service"?"vectortile":_t==="datastore catalog service"?"datastorecollection":_t==="geocoding service"?"geocodeservice":_t==="geoprocessing service"?Tt.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":_t==="geodata service"?"geodataservice":"layers"):Ft=_t==="web map"||_t==="cityengine web scene"?"maps":_t==="web scene"?Tt.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":_t==="web mapping application"&&Tt.includes("configurableApp")?"instantapps":_t==="web mapping application"||_t==="mobile application"||_t==="application"||_t==="operation view"||_t==="desktop application"?"apps":_t==="map document"||_t==="map package"||_t==="published map"||_t==="scene document"||_t==="globe document"||_t==="basemap package"||_t==="mobile basemap package"||_t==="mobile map package"||_t==="project package"||_t==="project template"||_t==="pro map"||_t==="layout"||_t==="layer"&&Tt.includes("ArcGIS Pro")||_t==="explorer map"&&Tt.indexOf("Explorer Document")?"mapsgray":_t==="service definition"||_t==="csv"||_t==="shapefile"||_t==="cad drawing"||_t==="geojson"||_t==="360 vr experience"||_t==="netcdf"||_t==="administrative report"?"datafiles":_t==="explorer add in"||_t==="desktop add in"||_t==="windows viewer add in"||_t==="windows viewer configuration"?"appsgray":_t==="arcgis pro add in"||_t==="arcgis pro configuration"?"addindesktop":_t==="rule package"||_t==="file geodatabase"||_t==="sqlite geodatabase"||_t==="csv collection"||_t==="kml collection"||_t==="windows mobile package"||_t==="map template"||_t==="desktop application template"||_t==="gml"||_t==="arcpad package"||_t==="code sample"||_t==="form"||_t==="document link"||_t==="earth configuration"||_t==="operations dashboard add in"||_t==="rules package"||_t==="image"||_t==="workflow manager package"||_t==="explorer map"&&Tt.includes("Explorer Mapping Application")||Tt.includes("Document")?"datafilesgray":_t==="network analysis service"||_t==="geoprocessing service"||_t==="geodata service"||_t==="geometry service"||_t==="geoprocessing package"||_t==="locator package"||_t==="geoprocessing sample"||_t==="workflow manager service"?"toolsgray":_t==="layer"||_t==="layer package"||_t==="explorer layer"?"layersgray":_t==="scene package"?"scenepackage":_t==="mobile scene package"?"mobilescenepackage":_t==="tile package"||_t==="compact tile package"?"tilepackage":_t==="task file"?"taskfile":_t==="report template"?"report-template":_t==="statistical data collection"?"statisticaldatacollection":_t==="insights workbook"?"workbook":_t==="insights model"?"insightsmodel":_t==="insights page"?"insightspage":_t==="insights theme"?"insightstheme":_t==="hub initiative"?"hubinitiative":_t==="hubpage"?"hubpage":_t==="hub event"?"hubevent":_t==="hub site application"?"hubsite":_t==="hub project"?"hubproject":_t==="relational database connection"?"relationaldatabaseconnection":_t==="big data file share"?"datastorecollection":_t==="image collection"?"imagecollection":_t==="style"?"style":_t==="desktop style"?"desktopstyle":_t==="dashboard"?"dashboard":_t==="raster function template"?"rasterprocessingtemplate":_t==="vector tile package"?"vectortilepackage":_t==="ortho mapping project"?"orthomappingproject":_t==="ortho mapping template"?"orthomappingtemplate":_t==="solution"?"solutions":_t==="geopackage"?"geopackage":_t==="deep learning package"?"deeplearningpackage":_t==="real time analytic"?"realtimeanalytics":_t==="big data analytic"?"bigdataanalytics":_t==="feed"?"feed":_t==="excalibur imagery project"?"excaliburimageryproject":_t==="notebook"?"notebook":_t==="storymap"?"storymap":_t==="survey123 add in"?"survey123addin":_t==="mission"?"mission":_t==="mission report"?"missionreport":_t==="quickcapture project"?"quickcaptureproject":_t==="pro report"?"proreport":_t==="urban model"?"urbanmodel":_t==="web experience"?"experiencebuilder":_t==="web experience template"?"webexperiencetemplate":_t==="experience builder widget"?"experiencebuilderwidget":_t==="experience builder widget package"?"experiencebuilderwidgetpackage":_t==="workflow"?"workflow":_t==="insights script"?"insightsscript":_t==="kernel gateway connection"?"kernelgatewayconnection":_t==="hub initiative template"?"hubinitiativetemplate":_t==="storymap theme"?"storymaptheme":_t==="knowledge graph"?"knowledgegraph":_t==="native application"?"nativeapp":_t==="native application installer"?"nativeappinstaller":_t==="link chart"?"linkchart":_t==="investigation"?"investigation":_t==="ogcfeatureserver"?"features":_t==="pro project"?"proproject":_t==="insights workbook package"?"insightsworkbookpackage":_t==="apache parquet"?"apacheparquet":_t==="notebook code snippets"?"notebookcodesnippets":_t==="suitability model"?"suitabilitymodel":_t==="esri classifier definition"?"classifierdefinition":_t==="esri classification schema"?"classificationschema":_t==="insights data engineering workbook"?"dataengineeringworkbook":_t==="insights data engineering model"?"dataengineeringmodel":_t==="deep learning studio project"?"deeplearningproject":"maps",Ft?a$2M(Mt+Ft+Pt+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].includes(this.type)}get itemUrl(){const _t=this.get("portal.restUrl");return _t&&this.id?`${_t}/content/items/${this.id}`:null}get thumbnailUrl(){const _t=this.itemUrl,Tt=this.thumbnail;return _t&&Tt?this.portal._normalizeUrl(`${_t}/info/${Tt}?f=json`):null}get userItemUrl(){const _t=this.get("portal.restUrl");if(!_t)return null;const Tt=this.owner||this.get("portal.user.username");return Tt?`${_t}/content/users/${this.ownerFolder?`${Tt}/${this.ownerFolder}`:Tt}/items/${this.id}`:null}load(_t){this.portal||(this.portal=B$q.getDefault());const Tt=this.portal.load(_t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:r$1P(_t)?_t.signal:null,query:{token:this.apiKey}}):{}).then(Mt=>{this.sourceJSON=Mt,this.read(Mt)});return this.addResolvingPromise(Tt),Promise.resolve(this)}addRating(_t){const Tt={method:"post",query:{}};return _t instanceof c$31&&(_t=_t.rating),isNaN(_t)||typeof _t!="number"||(Tt.query.rating=_t),this.portal._request(this.itemUrl+"/addRating",Tt).then(()=>new c$31({rating:_t,created:new Date}))}clone(){const _t={access:this.access,accessInformation:this.accessInformation,applicationProxies:m$2e(this.applicationProxies),avgRating:this.avgRating,categories:m$2e(this.categories),created:m$2e(this.created),culture:this.culture,description:this.description,extent:m$2e(this.extent),groupCategories:m$2e(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:m$2e(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:m$2e(this.screenshots),size:this.size,snippet:this.snippet,spatialReference:this.spatialReference,tags:m$2e(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:m$2e(this.typeKeywords),url:this.url};return this.loaded&&(_t.loadStatus="loaded"),new w$10({sourceJSON:this.sourceJSON}).set(_t)}createPostQuery(){const _t=this.toJSON();for(const Mt of["tags","typeKeywords","categories"])_t[Mt]&&(_t[Mt]=_t[Mt].join(", "));const{extent:Tt}=_t;return Tt&&(_t.extent=JSON.stringify(Tt)),_t}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(_t="json",Tt){return this.portal._request(this.itemUrl+"/data",{responseType:_t,...Tt,query:{token:this.apiKey}})}fetchRating(_t){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},..._t}).then(Tt=>Tt.rating!=null?(Tt.created=new Date(Tt.created),new c$31(Tt)):null)}fetchRelatedItems(_t,Tt){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{..._t,token:this.apiKey},...Tt},w$10)}getThumbnailUrl(_t){let Tt=this.thumbnailUrl;return Tt&&_t&&(Tt+=`&w=${_t}`),Tt}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(_t=>(this.sourceJSON=_t,this.read(_t),this))}update(_t){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const Tt=_t&&_t.data,Mt={method:"post"};Mt.query=this.createPostQuery();for(const Pt in Mt.query)Mt.query[Pt]===null&&(Mt.query[Pt]="");return Mt.query.clearEmptyFields=!0,Tt!=null&&(typeof Tt=="string"?Mt.query.text=Tt:typeof Tt=="object"&&(Mt.query.text=JSON.stringify(Tt))),this.portal._request(`${this.userItemUrl}/update`,Mt).then(()=>this.reload())}):Promise.reject(new s$2i("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(_t){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const Tt=_t.thumbnail,Mt=_t.filename,Pt={method:"post"};if(typeof Tt=="string")X$c(Tt)?Pt.query={data:Tt}:Pt.query={url:Q$e(Tt)},r$1P(Mt)&&(Pt.query.filename=Mt);else{const Ft=new FormData;r$1P(Mt)?Ft.append("file",Tt,Mt):Ft.append("file",Tt),Pt.body=Ft}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,Pt).then(()=>this.reload())}):Promise.reject(new s$2i("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(_t={},Tt){return(await __vitePreload(()=>import("./resourceUtils.2925d6cb.js"),[])).fetchResources(this,_t,Tt)}async addResource(_t,Tt,Mt){const Pt=await __vitePreload(()=>import("./resourceUtils.2925d6cb.js"),[]);return _t.portalItem=this,Pt.addOrUpdateResource(_t,"add",Tt,Mt)}async removeResource(_t,Tt){const Mt=await __vitePreload(()=>import("./resourceUtils.2925d6cb.js"),[]);if(_t.portalItem&&_t.portalItem.itemUrl!==this.itemUrl)throw new s$2i("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return Mt.removeResource(this,_t,Tt)}async removeAllResources(_t){return(await __vitePreload(()=>import("./resourceUtils.2925d6cb.js"),[])).removeAllResources(this,_t)}resourceFromPath(_t){return new y$1y({portalItem:this,path:_t})}toJSON(){const _t=this.extent,Tt={accessInformation:this.accessInformation,categories:m$2e(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:_t&&[[_t.xmin,_t.ymin],[_t.xmax,_t.ymax]],id:this.id,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,spatialReference:this.spatialReference,tags:m$2e(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:m$2e(this.typeKeywords),url:this.url};return y$1Q(Tt)}static fromJSON(_t){if(!_t)return null;if(_t.declaredClass)throw new Error("JSON object is already hydrated");return new w$10({sourceJSON:_t})}_getPostQuery(){const _t=this.toJSON();for(const Tt in _t)Tt==="tags"&&_t[Tt]!==null&&(_t[Tt]=_t[Tt].join(", ")),Tt==="typeKeywords"&&_t[Tt]!==null&&(_t[Tt]=_t[Tt].join(", ")),Tt==="extent"&&_t[Tt]&&(_t[Tt]=JSON.stringify(_t[Tt]));return _t}};e$2a([d$25({type:["private","shared","org","public"]})],f$1v.prototype,"access",void 0),e$2a([d$25()],f$1v.prototype,"accessInformation",void 0),e$2a([d$25({type:String})],f$1v.prototype,"apiKey",void 0),e$2a([d$25({json:{read:{source:"appProxies"}}})],f$1v.prototype,"applicationProxies",void 0),e$2a([d$25()],f$1v.prototype,"avgRating",void 0),e$2a([d$25()],f$1v.prototype,"categories",void 0),e$2a([d$25({type:Date})],f$1v.prototype,"created",void 0),e$2a([d$25()],f$1v.prototype,"culture",void 0),e$2a([d$25()],f$1v.prototype,"description",void 0),e$2a([d$25({readOnly:!0})],f$1v.prototype,"displayName",null),e$2a([d$25({type:M$K})],f$1v.prototype,"extent",void 0),e$2a([o$1U("extent")],f$1v.prototype,"readExtent",null),e$2a([d$25()],f$1v.prototype,"groupCategories",void 0),e$2a([d$25({readOnly:!0})],f$1v.prototype,"iconUrl",null),e$2a([d$25()],f$1v.prototype,"id",void 0),e$2a([d$25({readOnly:!0})],f$1v.prototype,"isLayer",null),e$2a([d$25()],f$1v.prototype,"itemControl",void 0),e$2a([d$25({readOnly:!0})],f$1v.prototype,"itemUrl",null),e$2a([d$25()],f$1v.prototype,"licenseInfo",void 0),e$2a([d$25({type:Date})],f$1v.prototype,"modified",void 0),e$2a([d$25()],f$1v.prototype,"name",void 0),e$2a([d$25()],f$1v.prototype,"numComments",void 0),e$2a([d$25()],f$1v.prototype,"numRatings",void 0),e$2a([d$25()],f$1v.prototype,"numViews",void 0),e$2a([d$25()],f$1v.prototype,"owner",void 0),e$2a([d$25()],f$1v.prototype,"ownerFolder",void 0),e$2a([d$25({type:B$q})],f$1v.prototype,"portal",void 0),e$2a([d$25()],f$1v.prototype,"screenshots",void 0),e$2a([d$25()],f$1v.prototype,"size",void 0),e$2a([d$25()],f$1v.prototype,"snippet",void 0),e$2a([d$25()],f$1v.prototype,"sourceJSON",void 0),e$2a([d$25({type:String})],f$1v.prototype,"spatialReference",void 0),e$2a([d$25()],f$1v.prototype,"tags",void 0),e$2a([d$25()],f$1v.prototype,"thumbnail",void 0),e$2a([d$25({readOnly:!0})],f$1v.prototype,"thumbnailUrl",null),e$2a([d$25()],f$1v.prototype,"title",void 0),e$2a([d$25()],f$1v.prototype,"type",void 0),e$2a([d$25()],f$1v.prototype,"typeKeywords",void 0),e$2a([d$25({type:String,json:{read(_t,Tt){var Pt;if(Tt.type!=="KML")return _t;const Mt=(Pt=this.portal)==null?void 0:Pt.restUrl;return _t||(_t=Mt&&this.id?`${Mt}/content/items/${this.id}/data`:null),_t}}})],f$1v.prototype,"url",void 0),e$2a([d$25({readOnly:!0})],f$1v.prototype,"userItemUrl",null),f$1v=w$10=e$2a([n$2L("esri.portal.PortalItem")],f$1v);const b$17=f$1v,PortalItem=Object.freeze(Object.defineProperty({__proto__:null,default:b$17},Symbol.toStringTag,{value:"Module"})),r$1x=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,o$1N={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function i$2t(_t){var Tt;return(Tt=o$1N[_t])!=null?Tt:!1}const a$2L=[],c$30=new Map;function d$1T(_t){for(const Tt of c$30.keys())m$1_(_t.pattern,Tt)&&c$30.delete(Tt)}function l$2n(_t){return a$2L.includes(_t)||(d$1T(_t),a$2L.unshift(_t)),{remove(){const Tt=a$2L.indexOf(_t);Tt>-1&&(a$2L.splice(Tt,1),d$1T(_t))}}}async function h$1B(_t){const Tt=l$2q();c$30.has(_t)||c$30.set(_t,f$1u(_t,Tt));const Mt=c$30.get(_t);return await _$x.add(Mt),Mt}function u$1V(_t){if(!r$1x.test(_t))return null;const[,Tt,Mt]=r$1x.exec(_t),Pt=Tt+(Mt?"-"+Mt.toUpperCase():"");return i$2t(Pt)?Pt:i$2t(Tt)?Tt:null}async function f$1u(_t,Tt){const Mt=[];for(const Pt of a$2L)if(m$1_(Pt.pattern,_t))try{return await Pt.fetchMessageBundle(_t,Tt)}catch(Ft){Mt.push(Ft)}throw Mt.length?new s$2i("intl:message-bundle-error",`Errors occurred while loading "${_t}"`,{errors:Mt}):new s$2i("intl:no-message-bundle-loader",`No loader found for message bundle "${_t}"`)}function m$1_(_t,Tt){return typeof _t=="string"?Tt.startsWith(_t):_t.test(Tt)}g$1a(()=>{c$30.clear()});const _$x=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(_t){return this._increase(),_t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=T$C())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function a$2K(_t){if(!_t)return;const Tt=_t.includes("-vector")?_t.slice(0,_t.indexOf("-vector")):_t,Mt=await h$1B("esri/t9n/basemaps");return Mt[_t]||Mt[Tt]}const s$1Z={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return a$2M("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return a$2M("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return a$2M("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return a$2M("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return a$2M("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return a$2M("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return a$2M("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return a$2M("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return a$2M("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return a$2M("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return a$2M("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}};function a$2J(_t){var Tt;return(_t==null?void 0:_t.type)==="feature"&&!_t.url&&((Tt=_t.source)==null?void 0:Tt.type)==="memory"}function l$2m(_t){var Tt;return(_t==null?void 0:_t.type)==="feature"&&((Tt=_t.source)==null?void 0:Tt.type)==="feature-layer"}const l$2l=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),a$2I=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","route","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function p$3j(_t){return _t.layerContainerType==="basemap"?l$2l:_t.layerContainerType==="operational-layers"?a$2I:null}function c$2$(_t,Tt){if(Tt.restrictedWebMapWriting){const Mt=p$3j(Tt);return!r$1P(Mt)||Mt.has(_t.type)&&!a$2J(_t)}return!0}function u$1U(_t,Tt){if(a$2J(_t)){const Mt=t$2b("featureCollection.layers",Tt),Pt=Mt&&Mt[0]&&Mt[0].layerDefinition;Pt&&d$1S(_t,Pt)}else _t.type==="stream"?d$1S(_t,Tt.layerDefinition=Tt.layerDefinition||{}):_t.type!=="group"&&d$1S(_t,Tt)}function d$1S(_t,Tt){"maxScale"in _t&&(Tt.maxScale=a$2X(_t.maxScale)),"minScale"in _t&&(Tt.minScale=a$2X(_t.minScale))}function f$1t(_t,Tt){if(u$1U(_t,Tt),"blendMode"in _t&&(Tt.blendMode=_t.blendMode,Tt.blendMode==="normal"&&delete Tt.blendMode),Tt.opacity=a$2X(_t.opacity),Tt.title=_t.title||"Layer",Tt.visibility=_t.visible,"legendEnabled"in _t&&_t.type!=="wmts")if(a$2J(_t)){const Mt=Tt.featureCollection;Mt&&(Mt.showLegend=_t.legendEnabled)}else Tt.showLegend=_t.legendEnabled}function y$1x(_t,Tt,Mt){if(!("write"in _t)||!_t.write)return Mt&&Mt.messages&&Mt.messages.push(new s$2i("layer:unsupported",`Layers (${_t.title}, ${_t.id}) of type '${_t.declaredClass}' cannot be persisted`,{layer:_t})),null;if(c$2$(_t,Mt)){const Pt={};return _t.write(Pt,Mt)?Pt:null}return r$1P(Tt)&&f$1t(_t,Tt=m$2e(Tt)),Tt}var v$_;let S$L=0;const _$w=s$2l.getLogger("esri.Basemap");let U$t=v$_=class extends u$26(m$25){constructor(_t){super(_t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+S$L++,this.baseLayers=new j$11,this.referenceLayers=new j$11;const Tt=Pt=>{Pt.parent&&Pt.parent!==this&&"remove"in Pt.parent&&Pt.parent.remove(Pt),Pt.parent=this,Pt.type==="elevation"&&_$w.error(`Layer '${Pt.title}, id:${Pt.id}' of type '${Pt.type}' is not supported as a basemap layer and will therefore be ignored.`)},Mt=Pt=>{Pt.parent=null};this.baseLayers.on("after-add",Pt=>Tt(Pt.item)),this.referenceLayers.on("after-add",Pt=>Tt(Pt.item)),this.baseLayers.on("after-remove",Pt=>Mt(Pt.item)),this.referenceLayers.on("after-remove",Pt=>Mt(Pt.item))}initialize(){this.when().catch(_t=>{_$w.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,_t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var Mt;const _t=this.baseLayers.removeAll();for(const Pt of _t)Pt.destroy();const Tt=this.referenceLayers.removeAll();for(const Pt of Tt)Pt.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(Mt=this.portalItem)==null||Mt.destroy(),this.portalItem=null}normalizeCtorArgs(_t){return _t&&"resourceInfo"in _t&&(this._set("resourceInfo",_t.resourceInfo),delete(_t={..._t}).resourceInfo),_t}set baseLayers(_t){this._set("baseLayers",n$2I(_t,this._get("baseLayers")))}_writeBaseLayers(_t,Tt,Mt){const Pt=[];_t&&(Mt={...Mt,layerContainerType:"basemap"},this.baseLayers.forEach(Ft=>{const Dt=y$1x(Ft,Mt.webmap?Mt.webmap.getLayerJSONFromResourceInfo(Ft):null,Mt);r$1P(Dt)&&Pt.push(Dt)}),this.referenceLayers.forEach(Ft=>{const Dt=y$1x(Ft,Mt.webmap?Mt.webmap.getLayerJSONFromResourceInfo(Ft):null,Mt);r$1P(Dt)&&(Dt.isReference=!0,Pt.push(Dt))})),Tt.baseMapLayers=Pt}set referenceLayers(_t){this._set("referenceLayers",n$2I(_t,this._get("referenceLayers")))}writeTitle(_t,Tt){Tt.title=_t||"Basemap"}load(_t){return this.addResolvingPromise(this._loadFromSource(_t)),Promise.resolve(this)}loadAll(){return n$2E(this,_t=>{_t(this.baseLayers,this.referenceLayers)})}clone(){const _t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(_t.loadStatus="loaded"),new v$_({resourceInfo:this.resourceInfo}).set(_t)}read(_t,Tt){this.resourceInfo||this._set("resourceInfo",{data:_t,context:Tt}),super.read(_t,Tt)}write(_t,Tt){return _t=_t||{},Tt&&Tt.origin||(Tt={origin:"web-map",...Tt}),super.write(_t,Tt),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(_t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(Mt=>{const Pt=m$2e(Mt);return Pt.url&&ft$1(Pt.url)&&(Pt.url=`https:${Pt.url}`),Pt.templateUrl&&ft$1(Pt.templateUrl)&&(Pt.templateUrl=`https:${Pt.templateUrl}`),Pt})),_t}async _loadFromSource(_t){const{resourceInfo:Tt,portalItem:Mt}=this;f$1M(_t);const Pt=[];if(Tt){const Ft=Tt.context?Tt.context.url:null;if(Pt.push(this._loadLayersFromJSON(Tt.data,Ft,_t)),Tt.data.id&&!Tt.data.title){const Dt=Tt.data.id;Pt.push(a$2K(Dt).then(Nt=>{Nt&&this.read({title:Nt},Tt.context)}))}}else Mt&&Pt.push(this._loadFromItem(Mt,_t));await Promise.all(Pt)}async _loadLayersFromJSON(_t,Tt,Mt){const Pt=this.resourceInfo&&this.resourceInfo.context,Ft=this.portalItem&&this.portalItem.portal||Pt&&Pt.portal||null,Dt=Pt&&Pt.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:Nt}=await __vitePreload(()=>import("./layersCreator.3c55583c.js"),["assets/layersCreator.3c55583c.js","assets/lazyLayerLoader.c995b154.js","assets/portalLayers.f7a5c179.js","assets/layersLoader.e91b56e4.js","assets/jsonContext.2a8214cb.js","assets/portalItemUtils.8cfa2e15.js"]),Vt=[];if(f$1M(Mt),_t.baseMapLayers&&Array.isArray(_t.baseMapLayers)){const zt={context:{origin:Dt,url:Tt,portal:Ft,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},Xt=Nt(this.baseLayers,_t.baseMapLayers.filter(Wt=>!Wt.isReference),zt);Vt.push(Xt);const Ht=Nt(this.referenceLayers,_t.baseMapLayers.filter(Wt=>Wt.isReference),zt);Vt.push(Ht)}await E$K(Vt)}async _loadFromItem(_t,Tt){const Mt=await _t.load(Tt),Pt=await Mt.fetchData("json",Tt),Ft=j$10(_t.itemUrl);return this._set("resourceInfo",{data:Pt.baseMap,context:{origin:"web-map",portal:_t.portal||B$q.getDefault(),url:Ft}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:Pt.spatialReference},this.resourceInfo.context),this.read({title:_t.title,thumbnailUrl:_t.thumbnailUrl},{origin:"portal-item",portal:_t.portal||B$q.getDefault(),url:Ft}),this._loadLayersFromJSON(this.resourceInfo.data,Ft,Tt)}static fromId(_t){const Tt=s$1Z[_t];if(Tt){if(Tt.deprecated){let Mt=null;_t==="dark-gray"?Mt="dark-gray-vector":_t==="gray"?Mt="gray-vector":_t==="streets"?Mt="streets-vector":_t==="topo"&&(Mt="topo-vector"),s$2g(_$w,`The ${_t} basemap has entered mature support and is no longer being updated.`,{replacement:Mt,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return v$_.fromJSON(Tt)}return null}};e$2a([d$25({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(_t,Tt,Mt,Pt){this._writeBaseLayers(_t,Tt,Pt)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:j$11}},writer(_t,Tt,Mt,Pt){this._writeBaseLayers(_t,Tt,Pt)}}}}}})],U$t.prototype,"baseLayers",null),e$2a([d$25({type:String,json:{origins:{"web-scene":{write:!0}}}})],U$t.prototype,"id",void 0),e$2a([d$25({type:b$17})],U$t.prototype,"portalItem",void 0),e$2a([d$25()],U$t.prototype,"referenceLayers",null),e$2a([d$25({readOnly:!0})],U$t.prototype,"resourceInfo",void 0),e$2a([d$25({type:k$y})],U$t.prototype,"spatialReference",void 0),e$2a([d$25()],U$t.prototype,"thumbnailUrl",void 0),e$2a([d$25({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],U$t.prototype,"title",void 0),e$2a([r$1C("title")],U$t.prototype,"writeTitle",null),U$t=v$_=e$2a([n$2L("esri.Basemap")],U$t);const x$M=U$t,Basemap=Object.freeze(Object.defineProperty({__proto__:null,default:x$M},Symbol.toStringTag,{value:"Module"})),e$1N={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function r$1w(_t){return e$1N[_t]||e$1N[_t.toLowerCase()]}function l$2k(_t){var Tt;return(Tt=e$1N[_t])!=null?Tt:e$1N[_t.toLowerCase()]}function a$2H(_t){return[...l$2k(_t)]}function n$2A(_t,Tt,Mt){Mt<0&&++Mt,Mt>1&&--Mt;const Pt=6*Mt;return Pt<1?_t+(Tt-_t)*Pt:2*Mt<1?Tt:3*Mt<2?_t+(Tt-_t)*(2/3-Mt)*6:_t}function o$1M(_t,Tt,Mt,Pt=1){const Ft=(_t%360+360)%360/360,Dt=Mt<=.5?Mt*(Tt+1):Mt+Tt-Mt*Tt,Nt=2*Mt-Dt;return[Math.round(255*n$2A(Nt,Dt,Ft+1/3)),Math.round(255*n$2A(Nt,Dt,Ft)),Math.round(255*n$2A(Nt,Dt,Ft-1/3)),Pt]}function i$2s(_t){const Tt=_t.length>5,Mt=Tt?8:4,Pt=(1<<Mt)-1,Ft=Tt?1:17,Dt=Tt?_t.length===9:_t.length===5;let Nt=Number("0x"+_t.substr(1));if(isNaN(Nt))return null;const Vt=[0,0,0,1];let zt;return Dt&&(zt=Nt&Pt,Nt>>=Mt,Vt[3]=Ft*zt/255),zt=Nt&Pt,Nt>>=Mt,Vt[2]=Ft*zt,zt=Nt&Pt,Nt>>=Mt,Vt[1]=Ft*zt,zt=Nt&Pt,Nt>>=Mt,Vt[0]=Ft*zt,Vt}function n$2z(){return[0,0,0]}function t$1N(_t){return[_t[0],_t[1],_t[2]]}function r$1v(_t,Tt,Mt){return[_t,Tt,Mt]}function e$1M(_t){const Tt=n$2z(),Mt=Math.min(3,_t.length);for(let Pt=0;Pt<Mt;++Pt)Tt[Pt]=_t[Pt];return Tt}function u$1T(_t,Tt){return new Float64Array(_t,Tt,3)}function o$1L(){return n$2z()}function a$2G(){return r$1v(1,1,1)}function s$1Y(){return r$1v(1,0,0)}function c$2_(){return r$1v(0,1,0)}function i$2r(){return r$1v(0,0,1)}const f$1s=o$1L(),l$2j=a$2G(),_$v=s$1Y(),O$u=c$2_(),b$16=i$2r();Object.freeze(Object.defineProperty({__proto__:null,create:n$2z,clone:t$1N,fromValues:r$1v,fromArray:e$1M,createView:u$1T,zeros:o$1L,ones:a$2G,unitX:s$1Y,unitY:c$2_,unitZ:i$2r,ZEROS:f$1s,ONES:l$2j,UNIT_X:_$v,UNIT_Y:O$u,UNIT_Z:b$16},Symbol.toStringTag,{value:"Module"}));const t$1M=1e-6,a$2F=Math.random,e$1L=Math.PI/180,n$2y=180/Math.PI;function o$1K(_t){return _t*e$1L}function r$1u(_t){return _t*n$2y}function s$1X(_t,Tt){return Math.abs(_t-Tt)<=t$1M*Math.max(1,Math.abs(_t),Math.abs(Tt))}Object.freeze(Object.defineProperty({__proto__:null,EPSILON:t$1M,RANDOM:a$2F,toRadian:o$1K,toDegree:r$1u,equals:s$1X},Symbol.toStringTag,{value:"Module"}));function s$1W(_t){const Tt=_t[0],Mt=_t[1],Pt=_t[2];return Math.sqrt(Tt*Tt+Mt*Mt+Pt*Pt)}function r$1t(_t,Tt){return _t[0]=Tt[0],_t[1]=Tt[1],_t[2]=Tt[2],_t}function o$1J(_t,Tt,Mt,Pt){return _t[0]=Tt,_t[1]=Mt,_t[2]=Pt,_t}function u$1S(_t,Tt,Mt){return _t[0]=Tt[0]+Mt[0],_t[1]=Tt[1]+Mt[1],_t[2]=Tt[2]+Mt[2],_t}function e$1K(_t,Tt,Mt){return _t[0]=Tt[0]-Mt[0],_t[1]=Tt[1]-Mt[1],_t[2]=Tt[2]-Mt[2],_t}function c$2Z(_t,Tt,Mt){return _t[0]=Tt[0]*Mt[0],_t[1]=Tt[1]*Mt[1],_t[2]=Tt[2]*Mt[2],_t}function i$2q(_t,Tt,Mt){return _t[0]=Tt[0]/Mt[0],_t[1]=Tt[1]/Mt[1],_t[2]=Tt[2]/Mt[2],_t}function h$1A(_t,Tt){return _t[0]=Math.ceil(Tt[0]),_t[1]=Math.ceil(Tt[1]),_t[2]=Math.ceil(Tt[2]),_t}function M$J(_t,Tt){return _t[0]=Math.floor(Tt[0]),_t[1]=Math.floor(Tt[1]),_t[2]=Math.floor(Tt[2]),_t}function f$1r(_t,Tt){return _t[0]=Math.abs(Tt[0]),_t[1]=Math.abs(Tt[1]),_t[2]=Math.abs(Tt[2]),_t}function l$2i(_t,Tt){return _t[0]=Math.sign(Tt[0]),_t[1]=Math.sign(Tt[1]),_t[2]=Math.sign(Tt[2]),_t}function m$1Z(_t,Tt,Mt){return _t[0]=Math.min(Tt[0],Mt[0]),_t[1]=Math.min(Tt[1],Mt[1]),_t[2]=Math.min(Tt[2],Mt[2]),_t}function d$1R(_t,Tt,Mt){return _t[0]=Math.max(Tt[0],Mt[0]),_t[1]=Math.max(Tt[1],Mt[1]),_t[2]=Math.max(Tt[2],Mt[2]),_t}function b$15(_t,Tt){return _t[0]=Math.round(Tt[0]),_t[1]=Math.round(Tt[1]),_t[2]=Math.round(Tt[2]),_t}function q$l(_t,Tt,Mt){return _t[0]=Tt[0]*Mt,_t[1]=Tt[1]*Mt,_t[2]=Tt[2]*Mt,_t}function g$19(_t,Tt,Mt,Pt){return _t[0]=Tt[0]+Mt[0]*Pt,_t[1]=Tt[1]+Mt[1]*Pt,_t[2]=Tt[2]+Mt[2]*Pt,_t}function x$L(_t,Tt){const Mt=Tt[0]-_t[0],Pt=Tt[1]-_t[1],Ft=Tt[2]-_t[2];return Math.sqrt(Mt*Mt+Pt*Pt+Ft*Ft)}function p$3i(_t,Tt){const Mt=Tt[0]-_t[0],Pt=Tt[1]-_t[1],Ft=Tt[2]-_t[2];return Mt*Mt+Pt*Pt+Ft*Ft}function v$Z(_t){const Tt=_t[0],Mt=_t[1],Pt=_t[2];return Tt*Tt+Mt*Mt+Pt*Pt}function j$X(_t,Tt){return _t[0]=-Tt[0],_t[1]=-Tt[1],_t[2]=-Tt[2],_t}function y$1w(_t,Tt){return _t[0]=1/Tt[0],_t[1]=1/Tt[1],_t[2]=1/Tt[2],_t}function z$v(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2];let Dt=Mt*Mt+Pt*Pt+Ft*Ft;return Dt>0&&(Dt=1/Math.sqrt(Dt),_t[0]=Tt[0]*Dt,_t[1]=Tt[1]*Dt,_t[2]=Tt[2]*Dt),_t}function P$r(_t,Tt){return _t[0]*Tt[0]+_t[1]*Tt[1]+_t[2]*Tt[2]}function _$u(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Mt[0],Vt=Mt[1],zt=Mt[2];return _t[0]=Ft*zt-Dt*Vt,_t[1]=Dt*Nt-Pt*zt,_t[2]=Pt*Vt-Ft*Nt,_t}function A$u(_t,Tt,Mt,Pt){const Ft=Tt[0],Dt=Tt[1],Nt=Tt[2];return _t[0]=Ft+Pt*(Mt[0]-Ft),_t[1]=Dt+Pt*(Mt[1]-Dt),_t[2]=Nt+Pt*(Mt[2]-Nt),_t}function D$w(_t,Tt,Mt,Pt,Ft,Dt){const Nt=Dt*Dt,Vt=Nt*(2*Dt-3)+1,zt=Nt*(Dt-2)+Dt,Xt=Nt*(Dt-1),Ht=Nt*(3-2*Dt);return _t[0]=Tt[0]*Vt+Mt[0]*zt+Pt[0]*Xt+Ft[0]*Ht,_t[1]=Tt[1]*Vt+Mt[1]*zt+Pt[1]*Xt+Ft[1]*Ht,_t[2]=Tt[2]*Vt+Mt[2]*zt+Pt[2]*Xt+Ft[2]*Ht,_t}function E$F(_t,Tt,Mt,Pt,Ft,Dt){const Nt=1-Dt,Vt=Nt*Nt,zt=Dt*Dt,Xt=Vt*Nt,Ht=3*Dt*Vt,Wt=3*zt*Nt,Qt=zt*Dt;return _t[0]=Tt[0]*Xt+Mt[0]*Ht+Pt[0]*Wt+Ft[0]*Qt,_t[1]=Tt[1]*Xt+Mt[1]*Ht+Pt[1]*Wt+Ft[1]*Qt,_t[2]=Tt[2]*Xt+Mt[2]*Ht+Pt[2]*Wt+Ft[2]*Qt,_t}function I$A(_t,Tt){Tt=Tt||1;const Mt=2*a$2F()*Math.PI,Pt=2*a$2F()-1,Ft=Math.sqrt(1-Pt*Pt)*Tt;return _t[0]=Math.cos(Mt)*Ft,_t[1]=Math.sin(Mt)*Ft,_t[2]=Pt*Tt,_t}function L$w(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2];return _t[0]=Mt[0]*Pt+Mt[4]*Ft+Mt[8]*Dt+Mt[12],_t[1]=Mt[1]*Pt+Mt[5]*Ft+Mt[9]*Dt+Mt[13],_t[2]=Mt[2]*Pt+Mt[6]*Ft+Mt[10]*Dt+Mt[14],_t}function O$t(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2];return _t[0]=Pt*Mt[0]+Ft*Mt[3]+Dt*Mt[6],_t[1]=Pt*Mt[1]+Ft*Mt[4]+Dt*Mt[7],_t[2]=Pt*Mt[2]+Ft*Mt[5]+Dt*Mt[8],_t}function S$K(_t,Tt,Mt){const Pt=Mt[0],Ft=Mt[1],Dt=Mt[2],Nt=Mt[3],Vt=Tt[0],zt=Tt[1],Xt=Tt[2];let Ht=Ft*Xt-Dt*zt,Wt=Dt*Vt-Pt*Xt,Qt=Pt*zt-Ft*Vt,Zt=Ft*Qt-Dt*Wt,Kt=Dt*Ht-Pt*Qt,er=Pt*Wt-Ft*Ht;const Yt=2*Nt;return Ht*=Yt,Wt*=Yt,Qt*=Yt,Zt*=2,Kt*=2,er*=2,_t[0]=Vt+Ht+Zt,_t[1]=zt+Wt+Kt,_t[2]=Xt+Qt+er,_t}function Q$c(_t,Tt,Mt,Pt){const Ft=[],Dt=[];return Ft[0]=Tt[0]-Mt[0],Ft[1]=Tt[1]-Mt[1],Ft[2]=Tt[2]-Mt[2],Dt[0]=Ft[0],Dt[1]=Ft[1]*Math.cos(Pt)-Ft[2]*Math.sin(Pt),Dt[2]=Ft[1]*Math.sin(Pt)+Ft[2]*Math.cos(Pt),_t[0]=Dt[0]+Mt[0],_t[1]=Dt[1]+Mt[1],_t[2]=Dt[2]+Mt[2],_t}function R$u(_t,Tt,Mt,Pt){const Ft=[],Dt=[];return Ft[0]=Tt[0]-Mt[0],Ft[1]=Tt[1]-Mt[1],Ft[2]=Tt[2]-Mt[2],Dt[0]=Ft[2]*Math.sin(Pt)+Ft[0]*Math.cos(Pt),Dt[1]=Ft[1],Dt[2]=Ft[2]*Math.cos(Pt)-Ft[0]*Math.sin(Pt),_t[0]=Dt[0]+Mt[0],_t[1]=Dt[1]+Mt[1],_t[2]=Dt[2]+Mt[2],_t}function T$w(_t,Tt,Mt,Pt){const Ft=[],Dt=[];return Ft[0]=Tt[0]-Mt[0],Ft[1]=Tt[1]-Mt[1],Ft[2]=Tt[2]-Mt[2],Dt[0]=Ft[0]*Math.cos(Pt)-Ft[1]*Math.sin(Pt),Dt[1]=Ft[0]*Math.sin(Pt)+Ft[1]*Math.cos(Pt),Dt[2]=Ft[2],_t[0]=Dt[0]+Mt[0],_t[1]=Dt[1]+Mt[1],_t[2]=Dt[2]+Mt[2],_t}function k$x(_t,Tt){r$1t(w$$,_t),r$1t(B$p,Tt),z$v(w$$,w$$),z$v(B$p,B$p);const Mt=P$r(w$$,B$p);return Mt>1?0:Mt<-1?Math.PI:Math.acos(Mt)}const w$$=n$2z(),B$p=n$2z();function C$r(_t){return"vec3("+_t[0]+", "+_t[1]+", "+_t[2]+")"}function F$v(_t,Tt){return _t[0]===Tt[0]&&_t[1]===Tt[1]&&_t[2]===Tt[2]}function G$l(_t,Tt){if(_t===Tt)return!0;const Mt=_t[0],Pt=_t[1],Ft=_t[2],Dt=Tt[0],Nt=Tt[1],Vt=Tt[2];return Math.abs(Mt-Dt)<=t$1M*Math.max(1,Math.abs(Mt),Math.abs(Dt))&&Math.abs(Pt-Nt)<=t$1M*Math.max(1,Math.abs(Pt),Math.abs(Nt))&&Math.abs(Ft-Vt)<=t$1M*Math.max(1,Math.abs(Ft),Math.abs(Vt))}function H$h(_t,Tt,Mt){const Pt=Mt[0]-Tt[0],Ft=Mt[1]-Tt[1],Dt=Mt[2]-Tt[2];let Nt=Pt*Pt+Ft*Ft+Dt*Dt;return Nt>0?(Nt=1/Math.sqrt(Nt),_t[0]=Pt*Nt,_t[1]=Ft*Nt,_t[2]=Dt*Nt,_t):(_t[0]=0,_t[1]=0,_t[2]=0,_t)}const J$h=e$1K,K$d=c$2Z,N$s=i$2q,U$s=x$L,X$a=p$3i,Y$b=s$1W,Z$a=v$Z;Object.freeze(Object.defineProperty({__proto__:null,length:s$1W,copy:r$1t,set:o$1J,add:u$1S,subtract:e$1K,multiply:c$2Z,divide:i$2q,ceil:h$1A,floor:M$J,abs:f$1r,sign:l$2i,min:m$1Z,max:d$1R,round:b$15,scale:q$l,scaleAndAdd:g$19,distance:x$L,squaredDistance:p$3i,squaredLength:v$Z,negate:j$X,inverse:y$1w,normalize:z$v,dot:P$r,cross:_$u,lerp:A$u,hermite:D$w,bezier:E$F,random:I$A,transformMat4:L$w,transformMat3:O$t,transformQuat:S$K,rotateX:Q$c,rotateY:R$u,rotateZ:T$w,angle:k$x,str:C$r,exactEquals:F$v,equals:G$l,direction:H$h,sub:J$h,mul:K$d,div:N$s,dist:U$s,sqrDist:X$a,len:Y$b,sqrLen:Z$a},Symbol.toStringTag,{value:"Module"}));function a$2E(_t,Tt){return _t[0]=Tt[0],_t[1]=Tt[1],_t[2]=Tt[2],_t[3]=Tt[3],_t}function r$1s(_t,Tt,Mt,Pt,Ft){return _t[0]=Tt,_t[1]=Mt,_t[2]=Pt,_t[3]=Ft,_t}function s$1V(_t,Tt,Mt){return _t[0]=Tt[0]+Mt[0],_t[1]=Tt[1]+Mt[1],_t[2]=Tt[2]+Mt[2],_t[3]=Tt[3]+Mt[3],_t}function o$1I(_t,Tt,Mt){return _t[0]=Tt[0]-Mt[0],_t[1]=Tt[1]-Mt[1],_t[2]=Tt[2]-Mt[2],_t[3]=Tt[3]-Mt[3],_t}function u$1R(_t,Tt,Mt){return _t[0]=Tt[0]*Mt[0],_t[1]=Tt[1]*Mt[1],_t[2]=Tt[2]*Mt[2],_t[3]=Tt[3]*Mt[3],_t}function e$1J(_t,Tt,Mt){return _t[0]=Tt[0]/Mt[0],_t[1]=Tt[1]/Mt[1],_t[2]=Tt[2]/Mt[2],_t[3]=Tt[3]/Mt[3],_t}function c$2Y(_t,Tt){return _t[0]=Math.ceil(Tt[0]),_t[1]=Math.ceil(Tt[1]),_t[2]=Math.ceil(Tt[2]),_t[3]=Math.ceil(Tt[3]),_t}function i$2p(_t,Tt){return _t[0]=Math.floor(Tt[0]),_t[1]=Math.floor(Tt[1]),_t[2]=Math.floor(Tt[2]),_t[3]=Math.floor(Tt[3]),_t}function h$1z(_t,Tt,Mt){return _t[0]=Math.min(Tt[0],Mt[0]),_t[1]=Math.min(Tt[1],Mt[1]),_t[2]=Math.min(Tt[2],Mt[2]),_t[3]=Math.min(Tt[3],Mt[3]),_t}function M$I(_t,Tt,Mt){return _t[0]=Math.max(Tt[0],Mt[0]),_t[1]=Math.max(Tt[1],Mt[1]),_t[2]=Math.max(Tt[2],Mt[2]),_t[3]=Math.max(Tt[3],Mt[3]),_t}function f$1q(_t,Tt){return _t[0]=Math.round(Tt[0]),_t[1]=Math.round(Tt[1]),_t[2]=Math.round(Tt[2]),_t[3]=Math.round(Tt[3]),_t}function l$2h(_t,Tt,Mt){return _t[0]=Tt[0]*Mt,_t[1]=Tt[1]*Mt,_t[2]=Tt[2]*Mt,_t[3]=Tt[3]*Mt,_t}function m$1Y(_t,Tt,Mt,Pt){return _t[0]=Tt[0]+Mt[0]*Pt,_t[1]=Tt[1]+Mt[1]*Pt,_t[2]=Tt[2]+Mt[2]*Pt,_t[3]=Tt[3]+Mt[3]*Pt,_t}function d$1Q(_t,Tt){const Mt=Tt[0]-_t[0],Pt=Tt[1]-_t[1],Ft=Tt[2]-_t[2],Dt=Tt[3]-_t[3];return Math.sqrt(Mt*Mt+Pt*Pt+Ft*Ft+Dt*Dt)}function b$14(_t,Tt){const Mt=Tt[0]-_t[0],Pt=Tt[1]-_t[1],Ft=Tt[2]-_t[2],Dt=Tt[3]-_t[3];return Mt*Mt+Pt*Pt+Ft*Ft+Dt*Dt}function x$K(_t){const Tt=_t[0],Mt=_t[1],Pt=_t[2],Ft=_t[3];return Math.sqrt(Tt*Tt+Mt*Mt+Pt*Pt+Ft*Ft)}function q$k(_t){const Tt=_t[0],Mt=_t[1],Pt=_t[2],Ft=_t[3];return Tt*Tt+Mt*Mt+Pt*Pt+Ft*Ft}function p$3h(_t,Tt){return _t[0]=-Tt[0],_t[1]=-Tt[1],_t[2]=-Tt[2],_t[3]=-Tt[3],_t}function g$18(_t,Tt){return _t[0]=1/Tt[0],_t[1]=1/Tt[1],_t[2]=1/Tt[2],_t[3]=1/Tt[3],_t}function v$Y(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[3];let Nt=Mt*Mt+Pt*Pt+Ft*Ft+Dt*Dt;return Nt>0&&(Nt=1/Math.sqrt(Nt),_t[0]=Mt*Nt,_t[1]=Pt*Nt,_t[2]=Ft*Nt,_t[3]=Dt*Nt),_t}function y$1v(_t,Tt){return _t[0]*Tt[0]+_t[1]*Tt[1]+_t[2]*Tt[2]+_t[3]*Tt[3]}function j$W(_t,Tt,Mt,Pt){const Ft=Tt[0],Dt=Tt[1],Nt=Tt[2],Vt=Tt[3];return _t[0]=Ft+Pt*(Mt[0]-Ft),_t[1]=Dt+Pt*(Mt[1]-Dt),_t[2]=Nt+Pt*(Mt[2]-Nt),_t[3]=Vt+Pt*(Mt[3]-Vt),_t}function _$t(_t,Tt){let Mt,Pt,Ft,Dt,Nt,Vt;Tt=Tt||1;do Mt=2*a$2F()-1,Pt=2*a$2F()-1,Nt=Mt*Mt+Pt*Pt;while(Nt>=1);do Ft=2*a$2F()-1,Dt=2*a$2F()-1,Vt=Ft*Ft+Dt*Dt;while(Vt>=1);const zt=Math.sqrt((1-Nt)/Vt);return _t[0]=Tt*Mt,_t[1]=Tt*Pt,_t[2]=Tt*Ft*zt,_t[3]=Tt*Dt*zt,_t}function w$_(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Tt[3];return _t[0]=Mt[0]*Pt+Mt[4]*Ft+Mt[8]*Dt+Mt[12]*Nt,_t[1]=Mt[1]*Pt+Mt[5]*Ft+Mt[9]*Dt+Mt[13]*Nt,_t[2]=Mt[2]*Pt+Mt[6]*Ft+Mt[10]*Dt+Mt[14]*Nt,_t[3]=Mt[3]*Pt+Mt[7]*Ft+Mt[11]*Dt+Mt[15]*Nt,_t}function z$u(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Mt[0],Vt=Mt[1],zt=Mt[2],Xt=Mt[3],Ht=Xt*Pt+Vt*Dt-zt*Ft,Wt=Xt*Ft+zt*Pt-Nt*Dt,Qt=Xt*Dt+Nt*Ft-Vt*Pt,Zt=-Nt*Pt-Vt*Ft-zt*Dt;return _t[0]=Ht*Xt+Zt*-Nt+Wt*-zt-Qt*-Vt,_t[1]=Wt*Xt+Zt*-Vt+Qt*-Nt-Ht*-zt,_t[2]=Qt*Xt+Zt*-zt+Ht*-Vt-Wt*-Nt,_t[3]=Tt[3],_t}function A$t(_t){return"vec4("+_t[0]+", "+_t[1]+", "+_t[2]+", "+_t[3]+")"}function D$v(_t,Tt){return _t[0]===Tt[0]&&_t[1]===Tt[1]&&_t[2]===Tt[2]&&_t[3]===Tt[3]}function E$E(_t,Tt){const Mt=_t[0],Pt=_t[1],Ft=_t[2],Dt=_t[3],Nt=Tt[0],Vt=Tt[1],zt=Tt[2],Xt=Tt[3];return Math.abs(Mt-Nt)<=t$1M*Math.max(1,Math.abs(Mt),Math.abs(Nt))&&Math.abs(Pt-Vt)<=t$1M*Math.max(1,Math.abs(Pt),Math.abs(Vt))&&Math.abs(Ft-zt)<=t$1M*Math.max(1,Math.abs(Ft),Math.abs(zt))&&Math.abs(Dt-Xt)<=t$1M*Math.max(1,Math.abs(Dt),Math.abs(Xt))}const L$v=o$1I,O$s=u$1R,S$J=e$1J,k$w=d$1Q,B$o=b$14,C$q=x$K,F$u=q$k;Object.freeze(Object.defineProperty({__proto__:null,copy:a$2E,set:r$1s,add:s$1V,subtract:o$1I,multiply:u$1R,divide:e$1J,ceil:c$2Y,floor:i$2p,min:h$1z,max:M$I,round:f$1q,scale:l$2h,scaleAndAdd:m$1Y,distance:d$1Q,squaredDistance:b$14,length:x$K,squaredLength:q$k,negate:p$3h,inverse:g$18,normalize:v$Y,dot:y$1v,lerp:j$W,random:_$t,transformMat4:w$_,transformQuat:z$u,str:A$t,exactEquals:D$v,equals:E$E,sub:L$v,mul:O$s,div:S$J,dist:k$w,sqrDist:B$o,len:C$q,sqrLen:F$u},Symbol.toStringTag,{value:"Module"}));const u$1Q=new Float32Array(1);function a$2D(_t){--_t;for(let Tt=1;Tt<32;Tt<<=1)_t|=_t>>Tt;return _t+1}function o$1H(_t,Tt,Mt){return Math.min(Math.max(_t,Tt),Mt)}function i$2o(_t){return(_t&_t-1)==0}function c$2X(_t){return _t--,_t|=_t>>1,_t|=_t>>2,_t|=_t>>4,_t|=_t>>8,_t|=_t>>16,++_t}function s$1U(_t,Tt,Mt){return _t+(Tt-_t)*Mt}function M$H(_t){return _t*Math.PI/180}function m$1X(_t){return 180*_t/Math.PI}function N$r(_t,Tt=1e-6){return(_t<0?-1:1)/Math.max(Math.abs(_t),Tt)}function l$2g(_t){return Math.acos(o$1H(_t,-1,1))}function b$13(_t){return Math.asin(o$1H(_t,-1,1))}function p$3g(_t,Tt,Mt=1e-6){return isNaN(_t)||isNaN(Tt)?!1:(_t>Tt?_t-Tt:Tt-_t)<=Mt}function j$V(_t){return k$v(Math.max(-y$1u,Math.min(_t,y$1u)))}function k$v(_t){return u$1Q[0]=_t,u$1Q[0]}function P$q(_t,Tt){const Mt=s$1W(_t),Pt=b$13(_t[2]/Mt),Ft=Math.atan2(_t[1]/Mt,_t[0]/Mt);return o$1J(Tt,Mt,Pt,Ft),Tt}function w$Z(_t){const Tt=_t[0]*_t[0]+_t[1]*_t[1]+_t[2]*_t[2],Mt=_t[3]*_t[3]+_t[4]*_t[4]+_t[5]*_t[5],Pt=_t[6]*_t[6]+_t[7]*_t[7]+_t[8]*_t[8];return!(p$3g(Tt,1)&&p$3g(Mt,1)&&p$3g(Pt,1))}const y$1u=k$v(34028234663852886e22);function n$2x(_t){return o$1H(s$2e(_t),0,255)}function o$1G(_t,Tt,Mt){return _t=Number(_t),isNaN(_t)?Mt:_t<Tt?Tt:_t>Mt?Mt:_t}class h$1y{constructor(Tt){this.r=255,this.g=255,this.b=255,this.a=1,Tt&&this.setColor(Tt)}static blendColors(Tt,Mt,Pt,Ft=new h$1y){return Ft.r=Math.round(Tt.r+(Mt.r-Tt.r)*Pt),Ft.g=Math.round(Tt.g+(Mt.g-Tt.g)*Pt),Ft.b=Math.round(Tt.b+(Mt.b-Tt.b)*Pt),Ft.a=Tt.a+(Mt.a-Tt.a)*Pt,Ft._sanitize()}static fromRgb(Tt,Mt){const Pt=Tt.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(Pt){const Ft=Pt[2].split(/\s*,\s*/),Dt=Pt[1];if(Dt==="rgb"&&Ft.length===3||Dt==="rgba"&&Ft.length===4){const Nt=Ft[0];if(Nt.charAt(Nt.length-1)==="%"){const Vt=Ft.map(zt=>2.56*parseFloat(zt));return Ft.length===4&&(Vt[3]=parseFloat(Ft[3])),h$1y.fromArray(Vt,Mt)}return h$1y.fromArray(Ft.map(Vt=>parseFloat(Vt)),Mt)}if(Dt==="hsl"&&Ft.length===3||Dt==="hsla"&&Ft.length===4)return h$1y.fromArray(o$1M(parseFloat(Ft[0]),parseFloat(Ft[1])/100,parseFloat(Ft[2])/100,parseFloat(Ft[3])),Mt)}return null}static fromHex(Tt,Mt=new h$1y){if(Tt.length!==4&&Tt.length!==7||Tt[0]!=="#")return null;const Pt=Tt.length===4?4:8,Ft=(1<<Pt)-1;let Dt=Number("0x"+Tt.substr(1));return isNaN(Dt)?null:(["b","g","r"].forEach(Nt=>{const Vt=Dt&Ft;Dt>>=Pt,Mt[Nt]=Pt===4?17*Vt:Vt}),Mt.a=1,Mt)}static fromArray(Tt,Mt=new h$1y){return Mt._set(Number(Tt[0]),Number(Tt[1]),Number(Tt[2]),Number(Tt[3])),isNaN(Mt.a)&&(Mt.a=1),Mt._sanitize()}static fromString(Tt,Mt){const Pt=r$1w(Tt)?l$2k(Tt):null;return Pt&&h$1y.fromArray(Pt,Mt)||h$1y.fromRgb(Tt,Mt)||h$1y.fromHex(Tt,Mt)}static fromJSON(Tt){return Tt&&new h$1y([Tt[0],Tt[1],Tt[2],Tt[3]/255])}static toUnitRGB(Tt){return r$1P(Tt)?[Tt.r/255,Tt.g/255,Tt.b/255]:null}static toUnitRGBA(Tt){return r$1P(Tt)?[Tt.r/255,Tt.g/255,Tt.b/255,Tt.a!=null?Tt.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(Tt){var Mt,Pt,Ft,Dt;return typeof Tt=="string"?h$1y.fromString(Tt,this):Array.isArray(Tt)?h$1y.fromArray(Tt,this):(this._set((Mt=Tt.r)!=null?Mt:0,(Pt=Tt.g)!=null?Pt:0,(Ft=Tt.b)!=null?Ft:0,(Dt=Tt.a)!=null?Dt:1),Tt instanceof h$1y||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const Tt=this.r.toString(16),Mt=this.g.toString(16),Pt=this.b.toString(16);return`#${Tt.length<2?"0"+Tt:Tt}${Mt.length<2?"0"+Mt:Mt}${Pt.length<2?"0"+Pt:Pt}`}toCss(Tt=!1){const Mt=this.r+", "+this.g+", "+this.b;return Tt?`rgba(${Mt}, ${this.a})`:`rgb(${Mt})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(Tt=h$1y.AlphaMode.ALWAYS){const Mt=n$2x(this.r),Pt=n$2x(this.g),Ft=n$2x(this.b);return Tt===h$1y.AlphaMode.ALWAYS||this.a!==1?[Mt,Pt,Ft,n$2x(255*this.a)]:[Mt,Pt,Ft]}clone(){return new h$1y(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(Tt){return r$1P(Tt)&&Tt.r===this.r&&Tt.g===this.g&&Tt.b===this.b&&Tt.a===this.a}_sanitize(){return this.r=Math.round(o$1G(this.r,0,255)),this.g=Math.round(o$1G(this.g,0,255)),this.b=Math.round(o$1G(this.b,0,255)),this.a=o$1G(this.a,0,1),this}_set(Tt,Mt,Pt,Ft){this.r=Tt,this.g=Mt,this.b=Pt,this.a=Ft}}h$1y.prototype.declaredClass="esri.Color",function(_t){var Tt;(Tt=_t.AlphaMode||(_t.AlphaMode={}))[Tt.ALWAYS=0]="ALWAYS",Tt[Tt.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(h$1y||(h$1y={}));const l$2f=h$1y;function n$2w(_t){}function o$1F(_t){return()=>_t}function r$1r(_t,Tt={}){var Ft;const Mt=_t instanceof s$1_?_t:new s$1_(_t,Tt),Pt={type:(Ft=Tt==null?void 0:Tt.ignoreUnknown)==null||Ft?Mt.apiValues:String,json:{type:Mt.jsonValues,read:!(Tt!=null&&Tt.readOnly)&&{reader:Mt.read},write:{writer:Mt.write}}};return(Tt==null?void 0:Tt.readOnly)!==void 0&&(Pt.readOnly=!!Tt.readOnly),(Tt==null?void 0:Tt.default)!==void 0&&(Pt.json.default=Tt.default),(Tt==null?void 0:Tt.name)!==void 0&&(Pt.json.name=Tt.name),d$25(Pt)}var t$1L;let p$3f=t$1L=class extends l$2v{constructor(_t){super(_t),this.type="none"}clone(){return new t$1L({type:this.type})}};e$2a([r$1r({none:"none",stayAbove:"stay-above"})],p$3f.prototype,"type",void 0),p$3f=t$1L=e$2a([n$2L("esri.ground.NavigationConstraint")],p$3f);function n$2v(_t){const Tt=s$2e(100*(1-_t));return Math.max(0,Math.min(Tt,100))}function r$1q(_t){const Tt=1-_t/100;return Math.max(0,Math.min(Tt,1))}var w$Y;const C$p=s$2l.getLogger("esri.Ground");let S$I=w$Y=class extends u$26(m$25){constructor(_t){super(_t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new j$11;const Tt=Pt=>{Pt.parent&&Pt.parent!==this&&"remove"in Pt.parent&&Pt.parent.remove(Pt),Pt.parent=this,Pt.type!=="elevation"&&Pt.type!=="base-elevation"&&C$p.error(`Layer '${Pt.title}, id:${Pt.id}' of type '${Pt.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},Mt=Pt=>{Pt.parent=null};this.layers.on("after-add",Pt=>Tt(Pt.item)),this.layers.on("after-remove",Pt=>Mt(Pt.item))}initialize(){this.when().catch(_t=>{C$p.error("#load()","Failed to load ground",_t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const _t=this.layers.removeAll();for(const Tt of _t)Tt.destroy();this.layers.destroy()}normalizeCtorArgs(_t){return _t&&"resourceInfo"in _t&&(this._set("resourceInfo",_t.resourceInfo),delete(_t={..._t}).resourceInfo),_t}set layers(_t){this._set("layers",n$2I(_t,this._get("layers")))}writeLayers(_t,Tt,Mt,Pt){const Ft=[];_t&&(Pt={...Pt,layerContainerType:"ground"},_t.forEach(Dt=>{if("write"in Dt){const Nt={};o$1F(Dt)().write(Nt,Pt)&&Ft.push(Nt)}else Pt&&Pt.messages&&Pt.messages.push(new s$2i("layer:unsupported",`Layers (${Dt.title}, ${Dt.id}) of type '${Dt.declaredClass}' cannot be persisted in the ground`,{layer:Dt}))})),Tt.layers=Ft}load(_t){return this.addResolvingPromise(this._loadFromSource(_t)),Promise.resolve(this)}loadAll(){return n$2E(this,_t=>{_t(this.layers)})}async queryElevation(_t,Tt){await this.load({signal:Tt==null?void 0:Tt.signal});const{ElevationQuery:Mt}=await __vitePreload(()=>import("./ElevationQuery.7c5ad4b2.js"),[]);f$1M(Tt);const Pt=new Mt,Ft=this.layers.filter(L$u).toArray();return Pt.queryAll(Ft,_t,Tt)}async createElevationSampler(_t,Tt){await this.load({signal:Tt==null?void 0:Tt.signal});const{ElevationQuery:Mt}=await __vitePreload(()=>import("./ElevationQuery.7c5ad4b2.js"),[]);f$1M(Tt);const Pt=new Mt,Ft=this.layers.filter(L$u).toArray();return Pt.createSamplerAll(Ft,_t,Tt)}clone(){const _t={opacity:this.opacity,surfaceColor:m$2e(this.surfaceColor),navigationConstraint:m$2e(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(_t.loadStatus="loaded"),new w$Y({resourceInfo:this.resourceInfo}).set(_t)}read(_t,Tt){this.resourceInfo||this._set("resourceInfo",{data:_t,context:Tt}),super.read(_t,Tt)}_loadFromSource(_t){const Tt=this.resourceInfo;return Tt?this._loadLayersFromJSON(Tt.data,Tt.context,_t):Promise.resolve(null)}_loadLayersFromJSON(_t,Tt,Mt){const Pt=Tt&&Tt.origin||"web-scene",Ft=Tt&&Tt.portal||null,Dt=Tt&&Tt.url||null;return __vitePreload(()=>import("./layersCreator.3c55583c.js"),["assets/layersCreator.3c55583c.js","assets/lazyLayerLoader.c995b154.js","assets/portalLayers.f7a5c179.js","assets/layersLoader.e91b56e4.js","assets/jsonContext.2a8214cb.js","assets/portalItemUtils.8cfa2e15.js"]).then(({populateOperationalLayers:Nt})=>{f$1M(Mt);const Vt=[];if(_t.layers&&Array.isArray(_t.layers)){const zt={context:{origin:Pt,url:Dt,portal:Ft,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};Vt.push(Nt(this.layers,_t.layers,zt))}return E$K(Vt)}).then(()=>{})}};function I$z(_t){return _t&&"createElevationSampler"in _t}function L$u(_t){return _t.type==="elevation"||I$z(_t)}e$2a([d$25({json:{read:!1}})],S$I.prototype,"layers",null),e$2a([r$1C("layers")],S$I.prototype,"writeLayers",null),e$2a([d$25({readOnly:!0})],S$I.prototype,"resourceInfo",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:S$Q,read:{reader:r$1q,source:"transparency"},write:{writer:(_t,Tt)=>{Tt.transparency=n$2v(_t)},target:"transparency"}}})],S$I.prototype,"opacity",void 0),e$2a([d$25({type:l$2f,json:{type:[S$Q],write:(_t,Tt)=>{Tt.surfaceColor=_t.toJSON().slice(0,3)}}})],S$I.prototype,"surfaceColor",void 0),e$2a([d$25({type:p$3f,json:{write:!0}})],S$I.prototype,"navigationConstraint",void 0),S$I=w$Y=e$2a([n$2L("esri.Ground")],S$I);const A$s=S$I;let h$1x=class extends y$1E{constructor(_t){super(_t),this._groups=new Map}destroy(){this.removeAll()}get size(){let _t=0;return this._groups.forEach(Tt=>{_t+=Tt.length}),_t}add(_t,Tt){if(!this._isHandle(_t)&&!Array.isArray(_t)&&!j$11.isCollection(_t))return this;const Mt=this._getOrCreateGroup(Tt);return Array.isArray(_t)||j$11.isCollection(_t)?_t.forEach(Pt=>this._isHandle(Pt)&&Mt.push(Pt)):Mt.push(_t),this.notifyChange("size"),this}forEach(_t,Tt){if(typeof _t=="function")this._groups.forEach(Mt=>Mt.forEach(_t));else{const Mt=this._getGroup(_t);Mt&&Tt&&Mt.forEach(Tt)}}has(_t){return this._groups.has(this._ensureGroupKey(_t))}remove(_t){if(Array.isArray(_t)||j$11.isCollection(_t))return _t.forEach(this.remove,this),this;if(!this.has(_t))return this;const Tt=this._getGroup(_t);for(let Mt=0;Mt<Tt.length;Mt++)Tt[Mt].remove();return this._deleteGroup(_t),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(_t=>{for(let Tt=0;Tt<_t.length;Tt++)_t[Tt].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(_t){return _t&&!!_t.remove}_getOrCreateGroup(_t){if(this.has(_t))return this._getGroup(_t);const Tt=[];return this._groups.set(this._ensureGroupKey(_t),Tt),Tt}_getGroup(_t){return this._groups.get(this._ensureGroupKey(_t))}_deleteGroup(_t){return this._groups.delete(this._ensureGroupKey(_t))}_ensureGroupKey(_t){return _t||"_default_"}};e$2a([d$25({readOnly:!0})],h$1x.prototype,"size",null),h$1x=e$2a([n$2L("esri.core.Handles")],h$1x);const u$1P=h$1x;function l$2e(_t,Tt,Mt={}){return m$1W(_t,Tt,Mt,y$1t)}function f$1p(_t,Tt,Mt={}){return m$1W(_t,Tt,Mt,d$1P)}function m$1W(_t,Tt,Mt={},Pt){let Ft=null;const Dt=Mt.once?(Nt,Vt)=>{Pt(Nt)&&(a$31(Ft),Tt(Nt,Vt))}:(Nt,Vt)=>{Pt(Nt)&&Tt(Nt,Vt)};if(Ft=P$v(_t,Dt,Mt.sync,Mt.equals),Mt.initial){const Nt=_t();Dt(Nt,Nt)}return Ft}function a$2C(_t,Tt,Mt,Pt={}){let Ft=null,Dt=null,Nt=null;function Vt(){var Ht;Ft&&Dt&&(Dt.remove(),(Ht=Pt.onListenerRemove)==null||Ht.call(Pt,Ft),Ft=null,Dt=null)}function zt(Ht){Pt.once&&Pt.once&&a$31(Nt),Mt(Ht)}const Xt=l$2e(_t,(Ht,Wt)=>{var Qt;Vt(),e$20(Ht)&&(Ft=Ht,Dt=r$1H(Ht,Tt,zt),(Qt=Pt.onListenerAdd)==null||Qt.call(Pt,Ht))},{sync:Pt.sync,initial:!0});return Nt=n$2W(()=>{Xt.remove(),Vt()}),Nt}function j$U(_t,Tt){return v$X(_t,d$1P,Tt)}function v$X(_t,Tt,Mt){if(p$3C(Mt))return Promise.reject(m$2b());const Pt=_t();if(Tt!=null&&Tt(Pt))return Promise.resolve(Pt);let Ft=null;function Dt(){Ft=a$31(Ft)}return new Promise((Nt,Vt)=>{Ft=r$1M([v$16(Mt,()=>{Dt(),Vt(m$2b())}),m$1W(_t,zt=>{Dt(),Nt(zt)},{sync:!1,once:!0},Tt!=null?Tt:y$1t)])})}function y$1t(_t){return!0}function d$1P(_t){return!!_t}function P$p(_t,Tt,Mt={}){let Pt=!1;const Ft=l$2e(_t,(Dt,Nt)=>{Pt||Tt(Dt,Nt)},Mt);return{remove(){Ft.remove()},pause(){Pt=!0},resume(){Pt=!1}}}const U$r={sync:!0},h$1w={initial:!0},w$X={sync:!0,initial:!0};let c$2W=class extends y$1E{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new u$1P,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(_t,Tt,Mt={}){return this._installWatch(_t,Tt,Mt,l$2e)}addWhen(_t,Tt,Mt={}){return this._installWatch(_t,Tt,Mt,f$1p)}addOnCollectionChange(_t,Tt,{initial:Mt=!1,final:Pt=!1}={}){const Ft=++this.handleId;return this.handles.add([a$2C(_t,"after-changes",this._createSyncUpdatingCallback(),U$r),a$2C(_t,"change",Tt,{onListenerAdd:Mt?Dt=>Tt({added:Dt.toArray(),removed:[]}):void 0,onListenerRemove:Pt?Dt=>Tt({added:[],removed:Dt.toArray()}):void 0})],Ft),{remove:()=>this.handles.remove(Ft)}}addPromise(_t){if(t$2e(_t))return _t;const Tt=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(_t)&&(this.pendingPromises.size!==0||this.handles.has(p$3e)||this._set("updating",!1))}},Tt),this.pendingPromises.add(_t),this._set("updating",!0);const Mt=()=>this.handles.remove(Tt);return _t.then(Mt,Mt),_t}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}_installWatch(_t,Tt,Mt={},Pt){const Ft=++this.handleId;Mt.sync||this._installSyncUpdatingWatch(_t,Ft);const Dt=Pt(_t,Tt,Mt);return this.handles.add(Dt,Ft),{remove:()=>this.handles.remove(Ft)}}_installSyncUpdatingWatch(_t,Tt){const Mt=this._createSyncUpdatingCallback(),Pt=l$2e(_t,Mt,{sync:!0,equals:()=>!1});return this.handles.add(Pt,Tt),Pt}_createSyncUpdatingCallback(){return()=>{this.handles.remove(p$3e),++this.scheduleHandleId;const _t=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(v$15(()=>{_t===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(p$3e))}),p$3e)}}};e$2a([d$25({readOnly:!0})],c$2W.prototype,"updating",void 0),c$2W=e$2a([n$2L("esri.core.support.WatchUpdatingTracking")],c$2W);const p$3e=-42;var m$1V;(function(_t){_t[_t.NONE=0]="NONE",_t[_t.SYNC=1]="SYNC",_t[_t.INIT=2]="INIT"})(m$1V||(m$1V={}));const a$2B=_t=>{let Tt=class extends _t{destroy(){var Mt,Pt;this.destroyed||((Mt=this._get("handles"))==null||Mt.destroy(),(Pt=this._get("updatingHandles"))==null||Pt.destroy())}get handles(){return this._get("handles")||new u$1P}get updatingHandles(){return this._get("updatingHandles")||new c$2W}};return e$2a([d$25({readOnly:!0})],Tt.prototype,"handles",null),e$2a([d$25({readOnly:!0})],Tt.prototype,"updatingHandles",null),Tt=e$2a([n$2L("esri.core.HandleOwner")],Tt),Tt};let d$1O=class extends a$2B(y$1E){};d$1O=e$2a([n$2L("esri.core.HandleOwner")],d$1O);let l$2d=class extends a$2B(j$11){constructor(_t){super(_t),this.getCollections=null}initialize(){this.handles.add(l$2A(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const _t=r$1P(this.getCollections)?this.getCollections():null;if(t$2e(_t))return void this.removeAll();let Tt=0;for(const Mt of _t)r$1P(Mt)&&(Tt=this._processCollection(Tt,Mt));this.splice(Tt,this.length)}_createNewInstance(_t){return new j$11(_t)}_processCollection(_t,Tt){if(!Tt)return _t;const Mt=this.itemFilterFunction?this.itemFilterFunction:Pt=>!!Pt;for(const Pt of Tt)if(Pt){if(Mt(Pt)){const Ft=this.indexOf(Pt,_t);Ft>=0?Ft!==_t&&this.reorder(Pt,_t):this.add(Pt,_t),++_t}if(this.getChildrenFunction){const Ft=this.getChildrenFunction(Pt);if(Array.isArray(Ft))for(const Dt of Ft)_t=this._processCollection(_t,Dt);else _t=this._processCollection(_t,Ft)}}return _t}};e$2a([d$25()],l$2d.prototype,"getCollections",void 0),e$2a([d$25()],l$2d.prototype,"getChildrenFunction",void 0),e$2a([d$25()],l$2d.prototype,"itemFilterFunction",void 0),l$2d=e$2a([n$2L("esri.core.CollectionFlattener")],l$2d);const p$3d=l$2d;function i$2n(_t){var Tt;return!!(_t&&_t.loaded&&"capabilities"in _t&&((Tt=_t==null?void 0:_t.capabilities)==null?void 0:Tt.operations)&&"supportsEditing"in _t.capabilities.operations&&_t.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in _t&&!_t.editingEnabled)}const f$1o=s$2l.getLogger("esri.support.basemapUtils");function p$3c(){return{}}function y$1s(_t){for(const Tt in _t){const Mt=_t[Tt];(Mt==null?void 0:Mt.destroyed)===!1&&Mt.destroy(),delete _t[Tt]}}function m$1U(_t,Tt){let Mt;if(typeof _t=="string"){if(!(_t in s$1Z)){const Pt=Object.entries(s$1Z).filter(([Ft,Dt])=>r$1O.apiKey&&!Dt.classic||!r$1O.apiKey&&Dt.classic&&!Dt.deprecated).map(([Ft])=>`"${Ft}"`).join(", ");return f$1o.warn(`Unable to find basemap definition for: ${_t}. Try one of these: ${Pt}`),null}Tt&&(Mt=Tt[_t]),Mt||(Mt=x$M.fromId(_t),Tt&&(Tt[_t]=Mt))}else Mt=b$1b(x$M,_t);return Mt!=null&&Mt.destroyed&&(f$1o.warn("The provided basemap is already destroyed",{basemap:Mt}),Mt=null),Mt}function t$1K(_t){return new p$3d({getCollections:()=>[_t.tables,_t.layers],getChildrenFunction:Tt=>{const Mt=[];return"tables"in Tt&&Mt.push(Tt.tables),"layers"in Tt&&Mt.push(Tt.layers),Mt},itemFilterFunction:Tt=>{const Mt=Tt.parent;return Mt&&"tables"in Mt&&Mt.tables.includes(Tt)}})}const i$2m=s$2l.getLogger("esri.support.groundUtils"),t$1J={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function a$2A(_t){let Tt=null;if(typeof _t=="string")if(_t in t$1J){const Mt=t$1J[_t];Tt=new A$s({resourceInfo:{data:{layers:[Mt]}}})}else i$2m.warn(`Unable to find ground definition for: ${_t}. Try "world-elevation"`);else Tt=b$1b(A$s,_t);return Tt}function h$1v(_t,Tt,Mt=!1){let{hasM:Pt,hasZ:Ft}=_t;Array.isArray(Tt)?Tt.length!==4||Pt||Ft?Tt.length===3&&Mt&&!Pt?(Ft=!0,Pt=!1):Tt.length===3&&Pt&&Ft&&(Pt=!1,Ft=!1):(Pt=!0,Ft=!0):(Ft=!Ft&&Tt.hasZ&&(!Pt||Tt.hasM),Pt=!Pt&&Tt.hasM&&(!Ft||Tt.hasZ)),_t.hasZ=Ft,_t.hasM=Pt}var h$1u;function l$2c(_t){return(Tt,Mt)=>Tt==null?Mt:Mt==null?Tt:_t(Tt,Mt)}function c$2V(_t){return _t&&(_t.declaredClass==="esri.geometry.SpatialReference"||_t.wkid!=null)}let u$1O=h$1u=class extends p$3q{constructor(..._t){super(..._t),this.points=[],this.type="multipoint"}normalizeCtorArgs(_t,Tt){if(!_t&&!Tt)return null;const Mt={};Array.isArray(_t)?(Mt.points=_t,Mt.spatialReference=Tt):c$2V(_t)?Mt.spatialReference=_t:(_t.points&&(Mt.points=_t.points),_t.spatialReference&&(Mt.spatialReference=_t.spatialReference),_t.hasZ&&(Mt.hasZ=_t.hasZ),_t.hasM&&(Mt.hasM=_t.hasM));const Pt=Mt.points&&Mt.points[0];return Pt&&(Mt.hasZ===void 0&&Mt.hasM===void 0?(Mt.hasZ=Pt.length>2,Mt.hasM=!1):Mt.hasZ===void 0?Mt.hasZ=Pt.length>3:Mt.hasM===void 0&&(Mt.hasM=Pt.length>3)),Mt}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const _t=this.points;if(!_t.length)return null;const Tt=new M$K,Mt=this.hasZ,Pt=this.hasM,Ft=Mt?3:2,Dt=_t[0],Nt=l$2c(Math.min),Vt=l$2c(Math.max);let zt,Xt,Ht,Wt,[Qt,Zt]=Dt,[Kt,er]=Dt;for(let Yt=0,rr=_t.length;Yt<rr;Yt++){const ir=_t[Yt],[nr,ar]=ir;if(Qt=Nt(Qt,nr),Zt=Nt(Zt,ar),Kt=Vt(Kt,nr),er=Vt(er,ar),Mt&&ir.length>2){const or=ir[2];zt=Nt(zt,or),Ht=Vt(Ht,or)}if(Pt&&ir.length>Ft){const or=ir[Ft];Xt=Nt(Xt,or),Wt=Vt(Wt,or)}}return Tt.xmin=Qt,Tt.ymin=Zt,Tt.xmax=Kt,Tt.ymax=er,Tt.spatialReference=this.spatialReference,Mt?(Tt.zmin=zt,Tt.zmax=Ht):(Tt.zmin=null,Tt.zmax=null),Pt?(Tt.mmin=Xt,Tt.mmax=Wt):(Tt.mmin=null,Tt.mmax=null),Tt}writePoints(_t,Tt){Tt.points=m$2e(this.points)}addPoint(_t){return h$1v(this,_t),Array.isArray(_t)?this.points.push(_t):this.points.push(_t.toArray()),this.notifyChange("points"),this}clone(){const _t={points:m$2e(this.points),spatialReference:this.spatialReference};return this.hasZ&&(_t.hasZ=!0),this.hasM&&(_t.hasM=!0),new h$1u(_t)}getPoint(_t){if(!this._validateInputs(_t))return null;const Tt=this.points[_t],Mt={x:Tt[0],y:Tt[1],spatialReference:this.spatialReference};let Pt=2;return this.hasZ&&(Mt.z=Tt[2],Pt=3),this.hasM&&(Mt.m=Tt[Pt]),new j$Z(Mt)}removePoint(_t){if(!this._validateInputs(_t))return null;const Tt=new j$Z(this.points.splice(_t,1)[0],this.spatialReference);return this.notifyChange("points"),Tt}setPoint(_t,Tt){return this._validateInputs(_t)?(h$1v(this,Tt),Array.isArray(Tt)||(Tt=Tt.toArray()),this.points[_t]=Tt,this.notifyChange("points"),this):this}toJSON(_t){return this.write({},_t)}_validateInputs(_t){return _t!=null&&_t>=0&&_t<this.points.length}};e$2a([d$25({readOnly:!0})],u$1O.prototype,"cache",null),e$2a([d$25()],u$1O.prototype,"extent",null),e$2a([d$25({type:[[Number]],json:{write:{isRequired:!0}}})],u$1O.prototype,"points",void 0),e$2a([r$1C("points")],u$1O.prototype,"writePoints",null),u$1O=h$1u=e$2a([n$2L("esri.geometry.Multipoint")],u$1O),u$1O.prototype.toJSON.isDefaultToJSON=!0;const m$1T=u$1O;function t$1I(_t){if(!_t)return null;if(Array.isArray(_t))return _t;const Tt=_t.hasZ,Mt=_t.hasM;if(_t.type==="point")return Mt&&Tt?[_t.x,_t.y,_t.z,_t.m]:Tt?[_t.x,_t.y,_t.z]:Mt?[_t.x,_t.y,_t.m]:[_t.x,_t.y];if(_t.type==="polygon")return _t.rings.slice(0);if(_t.type==="polyline")return _t.paths.slice(0);if(_t.type==="multipoint")return _t.points.slice(0);if(_t.type==="extent"){const Pt=_t.clone().normalize();if(!Pt)return null;let Ft=!1,Dt=!1;return Pt.forEach(Nt=>{Nt.hasZ&&(Ft=!0),Nt.hasM&&(Dt=!0)}),Pt.map(Nt=>{const Vt=[[Nt.xmin,Nt.ymin],[Nt.xmin,Nt.ymax],[Nt.xmax,Nt.ymax],[Nt.xmax,Nt.ymin],[Nt.xmin,Nt.ymin]];if(Ft&&Nt.hasZ){const zt=.5*(Nt.zmax-Nt.zmin);for(let Xt=0;Xt<Vt.length;Xt++)Vt[Xt].push(zt)}if(Dt&&Nt.hasM){const zt=.5*(Nt.mmax-Nt.mmin);for(let Xt=0;Xt<Vt.length;Xt++)Vt[Xt].push(zt)}return Vt})}return null}function e$1I(_t,Tt){const Mt=Tt[0]-_t[0],Pt=Tt[1]-_t[1];if(_t.length>2&&Tt.length>2){const Ft=_t[2]-Tt[2];return Math.sqrt(Mt*Mt+Pt*Pt+Ft*Ft)}return Math.sqrt(Mt*Mt+Pt*Pt)}function r$1p(_t,Tt,Mt){const Pt=_t[0]+Mt*(Tt[0]-_t[0]),Ft=_t[1]+Mt*(Tt[1]-_t[1]);return _t.length>2&&Tt.length>2?[Pt,Ft,_t[2]+Mt*(Tt[2]-_t[2])]:[Pt,Ft]}function o$1E(_t,Tt,Mt,Pt){const[Ft,Dt]=Tt,[Nt,Vt]=Mt[Pt],[zt,Xt]=Mt[Pt+1],Ht=zt-Nt,Wt=Xt-Vt,Qt=Ht*Ht+Wt*Wt,Zt=(Ft-Nt)*Ht+(Dt-Vt)*Wt,Kt=Math.min(1,Math.max(0,Zt/Qt));return _t[0]=Nt+Ht*Kt,_t[1]=Vt+Wt*Kt,_t}function i$2l(_t,Tt){return r$1p(_t,Tt,.5)}function s$1T(_t){const Tt=_t.length;let Mt=0;for(let Pt=0;Pt<Tt-1;++Pt)Mt+=e$1I(_t[Pt],_t[Pt+1]);return Mt}function l$2b(_t,Tt){if(Tt<=0)return _t[0];const Mt=_t.length;let Pt=0;for(let Ft=0;Ft<Mt-1;++Ft){const Dt=e$1I(_t[Ft],_t[Ft+1]);if(Tt-Pt<Dt){const Nt=(Tt-Pt)/Dt;return r$1p(_t[Ft],_t[Ft+1],Nt)}Pt+=Dt}return _t[Mt-1]}function f$1n(_t,Tt,Mt){const Pt=_t.length;let Ft=0,Dt=0,Nt=0;for(let Vt=0;Vt<Pt;Vt++){const zt=_t[Vt],Xt=_t[(Vt+1)%Pt];let Ht=2;Ft+=zt[0]*Xt[1]-Xt[0]*zt[1],zt.length>2&&Xt.length>2&&Mt&&(Dt+=zt[0]*Xt[2]-Xt[0]*zt[2],Ht=3),zt.length>Ht&&Xt.length>Ht&&Tt&&(Nt+=zt[0]*Xt[Ht]-Xt[0]*zt[Ht])}return Ft<=0&&Dt<=0&&Nt<=0}function u$1N(_t){if("rings"in _t){for(const Tt of _t.rings)Tt.length<3||Tt[0][0]===Tt[Tt.length-1][0]&&Tt[0][1]===Tt[Tt.length-1][1]||Tt.push([Tt[0][0],Tt[0][1]]);if(_t.rings.length>0&&!f$1n(_t.rings[0],_t.hasM,_t.hasZ))for(let Tt=0;Tt<_t.rings.length;++Tt)_t.rings[Tt]=_t.rings[Tt].reverse()}}function h$1t(_t){if("rings"in _t)for(const Tt of _t.rings)Tt.length<3||Tt[0][0]===Tt[Tt.length-1][0]&&Tt[0][1]===Tt[Tt.length-1][1]||Tt.push([Tt[0][0],Tt[0][1]])}function a$2z(_t){return _t.type!=="polygon"&&_t.type!=="polyline"||g$17(_t.type==="polygon"?_t.rings:_t.paths,_t.spatialReference),_t}function g$17(_t,Tt){const Mt=R$x(Tt);if(!Mt)return;const Pt=Mt.valid[0],Ft=Mt.valid[1],Dt=Ft-Pt;for(const Nt of _t){let Vt=1/0,zt=-1/0;Nt.forEach(Ht=>{let Wt=Ht[0];for(;Wt<Pt;)Wt+=Dt;for(;Wt>Ft;)Wt-=Dt;Vt=Math.min(Vt,Wt),zt=Math.max(zt,Wt),Ht[0]=Wt});const Xt=zt-Vt;Dt-Xt<Xt&&Nt.forEach(Ht=>{Ht[0]<0&&(Ht[0]+=Dt)})}}function l$2a(_t){return _t?_t.hasZ?[_t.xmax-_t.xmin/2,_t.ymax-_t.ymin/2,_t.zmax-_t.zmin/2]:[_t.xmax-_t.xmin/2,_t.ymax-_t.ymin/2]:null}function e$1H(_t){return _t?o$1D(_t.rings,_t.hasZ):null}function o$1D(_t,Tt){if(!_t||!_t.length)return null;const Mt=[],Pt=[],Ft=Tt?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let Dt=0,Nt=_t.length;Dt<Nt;Dt++){const Vt=r$1o(_t[Dt],Tt,Ft);Vt&&Pt.push(Vt)}if(Pt.sort((Dt,Nt)=>{let Vt=Dt[2]-Nt[2];return Vt===0&&Tt&&(Vt=Dt[4]-Nt[4]),Vt}),Pt.length&&(Mt[0]=Pt[0][0],Mt[1]=Pt[0][1],Tt&&(Mt[2]=Pt[0][3]),(Mt[0]<Ft[0]||Mt[0]>Ft[1]||Mt[1]<Ft[2]||Mt[1]>Ft[3]||Tt&&(Mt[2]<Ft[4]||Mt[2]>Ft[5]))&&(Mt.length=0)),!Mt.length){const Dt=_t[0]&&_t[0].length?h$1s(_t[0],Tt):null;if(!Dt)return null;Mt[0]=Dt[0],Mt[1]=Dt[1],Tt&&Dt.length>2&&(Mt[2]=Dt[2])}return Mt}function r$1o(_t,Tt,Mt){let Pt=0,Ft=0,Dt=0,Nt=0,Vt=0;const zt=_t.length?_t[0][0]:0,Xt=_t.length?_t[0][1]:0,Ht=_t.length&&Tt?_t[0][2]:0;for(let Qt=0;Qt<_t.length;Qt++){const Zt=_t[Qt],Kt=_t[(Qt+1)%_t.length],[er,Yt,rr]=Zt,ir=er-zt,nr=Yt-Xt,ar=Tt?rr-Ht:void 0,[or,ur,dr]=Kt,hr=or-zt,gr=ur-Xt,pr=Tt?dr-Ht:void 0,mr=ir*gr-hr*nr;if(Nt+=mr,Pt+=(ir+hr)*mr,Ft+=(nr+gr)*mr,Tt&&Zt.length>2&&Kt.length>2){const wr=ir*pr-hr*ar;Dt+=(ar+pr)*wr,Vt+=wr}er<Mt[0]&&(Mt[0]=er),er>Mt[1]&&(Mt[1]=er),Yt<Mt[2]&&(Mt[2]=Yt),Yt>Mt[3]&&(Mt[3]=Yt),Tt&&(rr<Mt[4]&&(Mt[4]=rr),rr>Mt[5]&&(Mt[5]=rr))}if(Nt>0&&(Nt*=-1),Vt>0&&(Vt*=-1),!Nt)return null;Nt*=.5,Vt*=.5;const Wt=[Pt/(6*Nt)+zt,Ft/(6*Nt)+Xt,Nt];return Tt&&(Mt[4]===Mt[5]||Vt===0?(Wt[3]=(Mt[4]+Mt[5])/2,Wt[4]=0):(Wt[3]=Dt/(6*Vt)+Ht,Wt[4]=Vt)),Wt}function h$1s(_t,Tt){const Mt=Tt?[0,0,0]:[0,0],Pt=Tt?[0,0,0]:[0,0];let Ft=0,Dt=0,Nt=0,Vt=0;for(let zt=0,Xt=_t.length;zt<Xt-1;zt++){const Ht=_t[zt],Wt=_t[zt+1];if(Ht&&Wt){Mt[0]=Ht[0],Mt[1]=Ht[1],Pt[0]=Wt[0],Pt[1]=Wt[1],Tt&&Ht.length>2&&Wt.length>2&&(Mt[2]=Ht[2],Pt[2]=Wt[2]);const Qt=e$1I(Mt,Pt);if(Qt){Ft+=Qt;const Zt=i$2l(Ht,Wt);Dt+=Qt*Zt[0],Nt+=Qt*Zt[1],Tt&&Zt.length>2&&(Vt+=Qt*Zt[2])}}}return Ft>0?Tt?[Dt/Ft,Nt/Ft,Vt/Ft]:[Dt/Ft,Nt/Ft]:_t.length?_t[0]:null}function n$2u(_t){return _t.xmin!==void 0&&_t.ymin!==void 0&&_t.xmax!==void 0&&_t.ymax!==void 0}function t$1H(_t){return _t.points!==void 0}function e$1G(_t){return _t.x!==void 0&&_t.y!==void 0}function o$1C(_t){return _t.paths!==void 0}function i$2k(_t){return _t.rings!==void 0}function l$29(_t){return(Tt,Mt)=>Tt==null?Mt:Mt==null?Tt:_t(Tt,Mt)}const r$1n=l$29(Math.min),u$1M=l$29(Math.max);function c$2U(_t,Tt){return o$1C(Tt)?h$1r(_t,Tt.paths,!1,!1):i$2k(Tt)?h$1r(_t,Tt.rings,!1,!1):t$1H(Tt)?s$1S(_t,Tt.points,!1,!1,!1,!1):n$2u(Tt)?g$16(_t,Tt):(e$1G(Tt)&&(_t[0]=Tt.x,_t[1]=Tt.y,_t[2]=Tt.x,_t[3]=Tt.y),_t)}function f$1m(_t,Tt){return o$1C(Tt)?h$1r(_t,Tt.paths,!0,!1):i$2k(Tt)?h$1r(_t,Tt.rings,!0,!1):t$1H(Tt)?s$1S(_t,Tt.points,!0,!1,!0,!1):n$2u(Tt)?g$16(_t,Tt,!0,!1,!0,!1):(e$1G(Tt)&&(_t[0]=Tt.x,_t[1]=Tt.y,_t[2]=Tt.z,_t[3]=Tt.x,_t[4]=Tt.y,_t[5]=Tt.z),_t)}function h$1r(_t,Tt,Mt,Pt){const Ft=Mt?3:2;if(!Tt.length||!Tt[0].length)return null;let Dt,Nt,Vt,zt,[Xt,Ht]=Tt[0][0],[Wt,Qt]=Tt[0][0];for(let Zt=0;Zt<Tt.length;Zt++){const Kt=Tt[Zt];for(let er=0;er<Kt.length;er++){const Yt=Kt[er],[rr,ir]=Yt;if(Xt=r$1n(Xt,rr),Ht=r$1n(Ht,ir),Wt=u$1M(Wt,rr),Qt=u$1M(Qt,ir),Mt&&Yt.length>2){const nr=Yt[2];Dt=r$1n(Dt,nr),Nt=u$1M(Nt,nr)}if(Pt&&Yt.length>Ft){const nr=Yt[Ft];Vt=r$1n(Dt,nr),zt=u$1M(Nt,nr)}}}return Mt?Pt?(_t[0]=Xt,_t[1]=Ht,_t[2]=Dt,_t[3]=Vt,_t[4]=Wt,_t[5]=Qt,_t[6]=Nt,_t[7]=zt,_t.length=8,_t):(_t[0]=Xt,_t[1]=Ht,_t[2]=Dt,_t[3]=Wt,_t[4]=Qt,_t[5]=Nt,_t.length=6,_t):Pt?(_t[0]=Xt,_t[1]=Ht,_t[2]=Vt,_t[3]=Wt,_t[4]=Qt,_t[5]=zt,_t.length=6,_t):(_t[0]=Xt,_t[1]=Ht,_t[2]=Wt,_t[3]=Qt,_t.length=4,_t)}function g$16(_t,Tt,Mt,Pt,Ft,Dt){const Nt=Tt.xmin,Vt=Tt.xmax,zt=Tt.ymin,Xt=Tt.ymax;let Ht=Tt.zmin,Wt=Tt.zmax,Qt=Tt.mmin,Zt=Tt.mmax;return Ft?(Ht=Ht||0,Wt=Wt||0,Dt?(Qt=Qt||0,Zt=Zt||0,_t[0]=Nt,_t[1]=zt,_t[2]=Ht,_t[3]=Qt,_t[4]=Vt,_t[5]=Xt,_t[6]=Wt,_t[7]=Zt,_t):(_t[0]=Nt,_t[1]=zt,_t[2]=Ht,_t[3]=Vt,_t[4]=Xt,_t[5]=Wt,_t)):Dt?(Qt=Qt||0,Zt=Zt||0,_t[0]=Nt,_t[1]=zt,_t[2]=Qt,_t[3]=Vt,_t[4]=Xt,_t[5]=Zt,_t):(_t[0]=Nt,_t[1]=zt,_t[2]=Vt,_t[3]=Xt,_t)}function s$1S(_t,Tt,Mt,Pt,Ft,Dt){const Nt=Mt?3:2,Vt=Pt&&Dt,zt=Mt&&Ft;if(!Tt.length||!Tt[0].length)return null;let Xt,Ht,Wt,Qt,[Zt,Kt]=Tt[0],[er,Yt]=Tt[0];for(let rr=0;rr<Tt.length;rr++){const ir=Tt[rr],[nr,ar]=ir;if(Zt=r$1n(Zt,nr),Kt=r$1n(Kt,ar),er=u$1M(er,nr),Yt=u$1M(Yt,ar),zt&&ir.length>2){const or=ir[2];Xt=r$1n(Xt,or),Ht=u$1M(Ht,or)}if(Vt&&ir.length>Nt){const or=ir[Nt];Wt=r$1n(Xt,or),Qt=u$1M(Ht,or)}}return Ft?(Xt=Xt||0,Ht=Ht||0,Dt?(Wt=Wt||0,Qt=Qt||0,_t[0]=Zt,_t[1]=Kt,_t[2]=Xt,_t[3]=Wt,_t[4]=er,_t[5]=Yt,_t[6]=Ht,_t[7]=Qt,_t):(_t[0]=Zt,_t[1]=Kt,_t[2]=Xt,_t[3]=er,_t[4]=Yt,_t[5]=Ht,_t)):Dt?(Wt=Wt||0,Qt=Qt||0,_t[0]=Zt,_t[1]=Kt,_t[2]=Wt,_t[3]=er,_t[4]=Yt,_t[5]=Qt,_t):(_t[0]=Zt,_t[1]=Kt,_t[2]=er,_t[3]=Yt,_t)}function t$1G(_t){return _t.xmin!==void 0&&_t.ymin!==void 0&&_t.xmax!==void 0&&_t.ymax!==void 0}function u$1L(_t){return _t.points!==void 0}function m$1S(_t){return _t.x!==void 0&&_t.y!==void 0}function o$1B(_t){return _t.paths!==void 0}function r$1m(_t){return _t.rings!==void 0}const x$J=[];function a$2y(_t,Tt,Mt,Pt){return{xmin:_t,ymin:Tt,xmax:Mt,ymax:Pt}}function c$2T(_t,Tt,Mt,Pt,Ft,Dt){return{xmin:_t,ymin:Tt,zmin:Mt,xmax:Pt,ymax:Ft,zmax:Dt}}function s$1R(_t,Tt,Mt,Pt,Ft,Dt){return{xmin:_t,ymin:Tt,mmin:Mt,xmax:Pt,ymax:Ft,mmax:Dt}}function e$1F(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt){return{xmin:_t,ymin:Tt,zmin:Mt,mmin:Pt,xmax:Ft,ymax:Dt,zmax:Nt,mmax:Vt}}function f$1l(_t,Tt=!1,Mt=!1){return Tt?Mt?e$1F(_t[0],_t[1],_t[2],_t[3],_t[4],_t[5],_t[6],_t[7]):c$2T(_t[0],_t[1],_t[2],_t[3],_t[4],_t[5]):Mt?s$1R(_t[0],_t[1],_t[2],_t[3],_t[4],_t[5]):a$2y(_t[0],_t[1],_t[2],_t[3])}function l$28(_t){return _t?t$1G(_t)?_t:m$1S(_t)?d$1N(_t):r$1m(_t)?v$W(_t):o$1B(_t)?h$1q(_t):u$1L(_t)?y$1r(_t):null:null}function y$1r(_t){const{hasZ:Tt,hasM:Mt,points:Pt}=_t;return f$1l(s$1S(x$J,Pt,Tt,Mt),Tt,Mt)}function d$1N(_t){const{x:Tt,y:Mt,z:Pt,m:Ft}=_t,Dt=Ft!=null;return Pt!=null?Dt?e$1F(Tt,Mt,Pt,Ft,Tt,Mt,Pt,Ft):c$2T(Tt,Mt,Pt,Tt,Mt,Pt):Dt?s$1R(Tt,Mt,Ft,Tt,Mt,Ft):a$2y(Tt,Mt,Tt,Mt)}function v$W(_t){const{hasZ:Tt,hasM:Mt,rings:Pt}=_t,Ft=h$1r(x$J,Pt,Tt,Mt);return Ft?f$1l(Ft,Tt,Mt):null}function h$1q(_t){const{hasZ:Tt,hasM:Mt,paths:Pt}=_t,Ft=h$1r(x$J,Pt,Tt,Mt);return Ft?f$1l(Ft,Tt,Mt):null}var x$I;function j$T(_t){return!Array.isArray(_t[0])}let w$W=x$I=class extends p$3q{constructor(..._t){super(..._t),this.rings=[],this.type="polygon"}static fromExtent(_t){const Tt=_t.clone().normalize(),Mt=_t.spatialReference;let Pt=!1,Ft=!1;for(const Nt of Tt)Nt.hasZ&&(Pt=!0),Nt.hasM&&(Ft=!0);const Dt={rings:Tt.map(Nt=>{const Vt=[[Nt.xmin,Nt.ymin],[Nt.xmin,Nt.ymax],[Nt.xmax,Nt.ymax],[Nt.xmax,Nt.ymin],[Nt.xmin,Nt.ymin]];if(Pt&&Nt.hasZ){const zt=Nt.zmin+.5*(Nt.zmax-Nt.zmin);for(let Xt=0;Xt<Vt.length;Xt++)Vt[Xt].push(zt)}if(Ft&&Nt.hasM){const zt=Nt.mmin+.5*(Nt.mmax-Nt.mmin);for(let Xt=0;Xt<Vt.length;Xt++)Vt[Xt].push(zt)}return Vt}),spatialReference:Mt};return Pt&&(Dt.hasZ=!0),Ft&&(Dt.hasM=!0),new x$I(Dt)}normalizeCtorArgs(_t,Tt){let Mt,Pt,Ft=null,Dt=null;return _t&&!Array.isArray(_t)?(Ft=_t.rings?_t.rings:null,Tt||(_t.spatialReference?Tt=_t.spatialReference:_t.rings||(Tt=_t)),Mt=_t.hasZ,Pt=_t.hasM):Ft=_t,Ft=Ft||[],Tt=Tt||k$y.WGS84,Ft.length&&Ft[0]&&Ft[0][0]!=null&&typeof Ft[0][0]=="number"&&(Ft=[Ft]),Dt=Ft[0]&&Ft[0][0],Dt&&(Mt===void 0&&Pt===void 0?(Mt=Dt.length>2,Pt=Dt.length>3):Mt===void 0?Mt=Pt?Dt.length>3:Dt.length>2:Pt===void 0&&(Pt=Mt?Dt.length>3:Dt.length>2)),{rings:Ft,spatialReference:Tt,hasZ:Mt,hasM:Pt}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const _t=e$1H(this);if(!_t||isNaN(_t[0])||isNaN(_t[1])||this.hasZ&&isNaN(_t[2]))return null;const Tt=new j$Z;return Tt.x=_t[0],Tt.y=_t[1],Tt.spatialReference=this.spatialReference,this.hasZ&&(Tt.z=_t[2]),Tt}get extent(){const{spatialReference:_t}=this,Tt=v$W(this);if(!Tt)return null;const Mt=new M$K(Tt);return Mt.spatialReference=_t,Mt}get isSelfIntersecting(){return p$3o(this.rings)}writeRings(_t,Tt){Tt.rings=m$2e(this.rings)}addRing(_t){if(!_t)return;const Tt=this.rings,Mt=Tt.length;if(j$T(_t)){const Pt=[];for(let Ft=0,Dt=_t.length;Ft<Dt;Ft++)Pt[Ft]=_t[Ft].toArray();Tt[Mt]=Pt}else Tt[Mt]=_t.concat();return this.notifyChange("rings"),this}clone(){const _t=new x$I;return _t.spatialReference=this.spatialReference,_t.rings=m$2e(this.rings),_t.hasZ=this.hasZ,_t.hasM=this.hasM,_t}equals(_t){if(this===_t)return!0;if(t$2e(_t))return!1;const Tt=this.spatialReference,Mt=_t.spatialReference;if(r$1P(Tt)!==r$1P(Mt)||r$1P(Tt)&&r$1P(Mt)&&!Tt.equals(Mt)||this.rings.length!==_t.rings.length)return!1;const Pt=([Ft,Dt,Nt,Vt],[zt,Xt,Ht,Wt])=>Ft===zt&&Dt===Xt&&(Nt==null&&Ht==null||Nt===Ht)&&(Vt==null&&Wt==null||Vt===Wt);for(let Ft=0;Ft<this.rings.length;Ft++){const Dt=this.rings[Ft],Nt=_t.rings[Ft];if(!i$2V(Dt,Nt,Pt))return!1}return!0}contains(_t){if(!_t)return!1;const Tt=M$L(_t,this.spatialReference);return c$34(this,r$1P(Tt)?Tt:_t)}isClockwise(_t){let Tt;return Tt=j$T(_t)?_t.map(Mt=>this.hasZ?this.hasM?[Mt.x,Mt.y,Mt.z,Mt.m]:[Mt.x,Mt.y,Mt.z]:[Mt.x,Mt.y]):_t,f$1n(Tt,this.hasM,this.hasZ)}getPoint(_t,Tt){if(!this._validateInputs(_t,Tt))return null;const Mt=this.rings[_t][Tt],Pt=this.hasZ,Ft=this.hasM;return Pt&&!Ft?new j$Z(Mt[0],Mt[1],Mt[2],void 0,this.spatialReference):Ft&&!Pt?new j$Z(Mt[0],Mt[1],void 0,Mt[2],this.spatialReference):Pt&&Ft?new j$Z(Mt[0],Mt[1],Mt[2],Mt[3],this.spatialReference):new j$Z(Mt[0],Mt[1],this.spatialReference)}insertPoint(_t,Tt,Mt){return this._validateInputs(_t,Tt,!0)?(h$1v(this,Mt),Array.isArray(Mt)||(Mt=Mt.toArray()),this.rings[_t].splice(Tt,0,Mt),this.notifyChange("rings"),this):this}removePoint(_t,Tt){if(!this._validateInputs(_t,Tt))return null;const Mt=new j$Z(this.rings[_t].splice(Tt,1)[0],this.spatialReference);return this.notifyChange("rings"),Mt}removeRing(_t){if(!this._validateInputs(_t,null))return null;const Tt=this.rings.splice(_t,1)[0],Mt=this.spatialReference,Pt=Tt.map(Ft=>new j$Z(Ft,Mt));return this.notifyChange("rings"),Pt}setPoint(_t,Tt,Mt){return this._validateInputs(_t,Tt)?(h$1v(this,Mt),Array.isArray(Mt)||(Mt=Mt.toArray()),this.rings[_t][Tt]=Mt,this.notifyChange("rings"),this):this}_validateInputs(_t,Tt,Mt=!1){if(_t==null||_t<0||_t>=this.rings.length)return!1;if(Tt!=null){const Pt=this.rings[_t];if(Mt&&(Tt<0||Tt>Pt.length)||!Mt&&(Tt<0||Tt>=Pt.length))return!1}return!0}toJSON(_t){return this.write({},_t)}};e$2a([d$25({readOnly:!0})],w$W.prototype,"cache",null),e$2a([d$25({readOnly:!0})],w$W.prototype,"centroid",null),e$2a([d$25({readOnly:!0})],w$W.prototype,"extent",null),e$2a([d$25({readOnly:!0})],w$W.prototype,"isSelfIntersecting",null),e$2a([d$25({type:[[[Number]]],json:{write:{isRequired:!0}}})],w$W.prototype,"rings",void 0),e$2a([r$1C("rings")],w$W.prototype,"writeRings",null),w$W=x$I=e$2a([n$2L("esri.geometry.Polygon")],w$W),w$W.prototype.toJSON.isDefaultToJSON=!0;const v$V=w$W;var c$2S;function u$1K(_t){return!Array.isArray(_t[0])}let f$1k=c$2S=class extends p$3q{constructor(..._t){super(..._t),this.paths=[],this.type="polyline"}normalizeCtorArgs(_t,Tt){let Mt,Pt,Ft=null,Dt=null;return _t&&!Array.isArray(_t)?(Ft=_t.paths?_t.paths:null,Tt||(_t.spatialReference?Tt=_t.spatialReference:_t.paths||(Tt=_t)),Mt=_t.hasZ,Pt=_t.hasM):Ft=_t,Ft=Ft||[],Tt=Tt||k$y.WGS84,Ft.length&&Ft[0]&&Ft[0][0]!=null&&typeof Ft[0][0]=="number"&&(Ft=[Ft]),Dt=Ft[0]&&Ft[0][0],Dt&&(Mt===void 0&&Pt===void 0?(Mt=Dt.length>2,Pt=!1):Mt===void 0?Mt=!Pt&&Dt.length>3:Pt===void 0&&(Pt=!Mt&&Dt.length>3)),{paths:Ft,spatialReference:Tt,hasZ:Mt,hasM:Pt}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:_t}=this,Tt=h$1q(this);if(!Tt)return null;const Mt=new M$K(Tt);return Mt.spatialReference=_t,Mt}writePaths(_t,Tt){Tt.paths=m$2e(this.paths)}addPath(_t){if(!_t)return;const Tt=this.paths,Mt=Tt.length;if(u$1K(_t)){const Pt=[];for(let Ft=0,Dt=_t.length;Ft<Dt;Ft++)Pt[Ft]=_t[Ft].toArray();Tt[Mt]=Pt}else Tt[Mt]=_t.concat();return this.notifyChange("paths"),this}clone(){const _t=new c$2S;return _t.spatialReference=this.spatialReference,_t.paths=m$2e(this.paths),_t.hasZ=this.hasZ,_t.hasM=this.hasM,_t}getPoint(_t,Tt){if(!this._validateInputs(_t,Tt))return null;const Mt=this.paths[_t][Tt],Pt=this.hasZ,Ft=this.hasM;return Pt&&!Ft?new j$Z(Mt[0],Mt[1],Mt[2],void 0,this.spatialReference):Ft&&!Pt?new j$Z(Mt[0],Mt[1],void 0,Mt[2],this.spatialReference):Pt&&Ft?new j$Z(Mt[0],Mt[1],Mt[2],Mt[3],this.spatialReference):new j$Z(Mt[0],Mt[1],this.spatialReference)}insertPoint(_t,Tt,Mt){return this._validateInputs(_t,Tt,!0)?(h$1v(this,Mt),Array.isArray(Mt)||(Mt=Mt.toArray()),this.paths[_t].splice(Tt,0,Mt),this.notifyChange("paths"),this):this}removePath(_t){if(!this._validateInputs(_t,null))return null;const Tt=this.paths.splice(_t,1)[0],Mt=this.spatialReference,Pt=Tt.map(Ft=>new j$Z(Ft,Mt));return this.notifyChange("paths"),Pt}removePoint(_t,Tt){if(!this._validateInputs(_t,Tt))return null;const Mt=new j$Z(this.paths[_t].splice(Tt,1)[0],this.spatialReference);return this.notifyChange("paths"),Mt}setPoint(_t,Tt,Mt){return this._validateInputs(_t,Tt)?(h$1v(this,Mt),Array.isArray(Mt)||(Mt=Mt.toArray()),this.paths[_t][Tt]=Mt,this.notifyChange("paths"),this):this}_validateInputs(_t,Tt,Mt=!1){if(_t==null||_t<0||_t>=this.paths.length)return!1;if(Tt!=null){const Pt=this.paths[_t];if(Mt&&(Tt<0||Tt>Pt.length)||!Mt&&(Tt<0||Tt>=Pt.length))return!1}return!0}toJSON(_t){return this.write({},_t)}};e$2a([d$25({readOnly:!0})],f$1k.prototype,"cache",null),e$2a([d$25({readOnly:!0})],f$1k.prototype,"extent",null),e$2a([d$25({type:[[[Number]]],json:{write:{isRequired:!0}}})],f$1k.prototype,"paths",void 0),e$2a([r$1C("paths")],f$1k.prototype,"writePaths",null),f$1k=c$2S=e$2a([n$2L("esri.geometry.Polyline")],f$1k),f$1k.prototype.toJSON.isDefaultToJSON=!0;const m$1R=f$1k,i$2j=o$1O()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),t$1F=o$1O()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function s$1Q(_t){return _t.xmin!==void 0&&_t.ymin!==void 0&&_t.xmax!==void 0&&_t.ymax!==void 0}function f$1j(_t){return _t.points!==void 0}function l$27(_t){return _t.x!==void 0&&_t.y!==void 0}function y$1q(_t){return _t.paths!==void 0}function c$2R(_t){return _t.rings!==void 0}function d$1M(_t){return t$2e(_t)?null:_t instanceof p$3q?_t:l$27(_t)?j$Z.fromJSON(_t):y$1q(_t)?m$1R.fromJSON(_t):c$2R(_t)?v$V.fromJSON(_t):f$1j(_t)?m$1T.fromJSON(_t):s$1Q(_t)?M$K.fromJSON(_t):null}function v$U(_t){return _t?l$27(_t)?"esriGeometryPoint":y$1q(_t)?"esriGeometryPolyline":c$2R(_t)?"esriGeometryPolygon":s$1Q(_t)?"esriGeometryEnvelope":f$1j(_t)?"esriGeometryMultipoint":null:null}const G$k={esriGeometryPoint:j$Z,esriGeometryPolyline:m$1R,esriGeometryPolygon:v$V,esriGeometryEnvelope:M$K,esriGeometryMultipoint:m$1T};function a$2x(_t){return _t&&G$k[_t]||null}const i$2i={base:p$3q,key:"type",typeMap:{extent:M$K,multipoint:m$1T,point:j$Z,polyline:m$1R,polygon:v$V}};N$v(i$2i);let t$1E=0;const s$1P=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+t$1E++})}};return Tt=e$2a([n$2L("esri.core.Identifiable")],Tt),Tt};let o$1A=class extends s$1P(class{}){};o$1A=e$2a([n$2L("esri.core.Identifiable")],o$1A);const o$1z=s$2l.getLogger("esri.layers.support.fromPortalItem");async function a$2w(_t){const Tt="portalItem"in _t?_t:{portalItem:_t},Mt=await __vitePreload(()=>import("./portalLayers.f7a5c179.js"),["assets/portalLayers.f7a5c179.js","assets/lazyLayerLoader.c995b154.js","assets/layersLoader.e91b56e4.js","assets/jsonContext.2a8214cb.js","assets/portalItemUtils.8cfa2e15.js"]);try{return await Mt.fromItem(Tt)}catch(Pt){const Ft=Tt&&Tt.portalItem,Dt=Ft&&Ft.id||"unset",Nt=Ft&&Ft.portal&&Ft.portal.url||r$1O.portalUrl;throw o$1z.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+Nt+"', id: '"+Dt+"')",Pt),Pt}}let m$1Q=0,h$1p=class extends n$2K.EventedMixin(s$1P(m$25)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new M$K(-180,-90,180,90,k$y.WGS84),this.id=Date.now().toString(16)+"-layer-"+m$1Q++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=k$y.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(_t){const Tt=typeof _t=="string"?{url:_t}:_t;return(await __vitePreload(()=>import("./arcgisLayers.6196dfbb.js"),["assets/arcgisLayers.6196dfbb.js","assets/lazyLayerLoader.c995b154.js"])).fromUrl(Tt)}static fromPortalItem(_t){return a$2w(_t)}initialize(){this.when().catch(_t=>{var Tt,Mt;g$1l(_t)||s$2l.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(Tt=this.title)!=null?Tt:"no title"}', id: '${(Mt=this.id)!=null?Mt:"no id"}')`,{error:_t})})}destroy(){if(this.parent){const _t=this,Tt=this.parent;"layers"in Tt&&Tt.layers.includes(_t)?Tt.layers.remove(_t):"tables"in Tt&&Tt.tables.includes(_t)?Tt.tables.remove(_t):"baseLayers"in Tt&&Tt.baseLayers.includes(_t)?Tt.baseLayers.remove(_t):"baseLayers"in Tt&&Tt.referenceLayers.includes(_t)&&Tt.referenceLayers.remove(_t)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const _t=this.url;return _t?j$10(_t):null}async fetchAttributionData(){const _t=this.attributionDataUrl;if(this.hasAttributionData&&_t)return(await U$v(_t,{query:{f:"json"},responseType:"json"})).data;throw new s$2i("layer:no-attribution-data","Layer does not have attribution data")}};e$2a([d$25({type:String})],h$1p.prototype,"attributionDataUrl",void 0),e$2a([d$25({type:M$K})],h$1p.prototype,"fullExtent",void 0),e$2a([d$25({readOnly:!0})],h$1p.prototype,"hasAttributionData",null),e$2a([d$25({type:String,clonable:!1})],h$1p.prototype,"id",void 0),e$2a([d$25({type:Boolean,nonNullable:!0})],h$1p.prototype,"legendEnabled",void 0),e$2a([d$25({type:["show","hide","hide-children"]})],h$1p.prototype,"listMode",void 0),e$2a([d$25({type:Number,range:{min:0,max:1},nonNullable:!0})],h$1p.prototype,"opacity",void 0),e$2a([d$25({clonable:!1})],h$1p.prototype,"parent",void 0),e$2a([d$25({readOnly:!0})],h$1p.prototype,"parsedUrl",null),e$2a([d$25({type:Boolean})],h$1p.prototype,"popupEnabled",void 0),e$2a([d$25({type:Boolean})],h$1p.prototype,"attributionVisible",void 0),e$2a([d$25({type:k$y})],h$1p.prototype,"spatialReference",void 0),e$2a([d$25({type:String})],h$1p.prototype,"title",void 0),e$2a([d$25({readOnly:!0,json:{read:!1}})],h$1p.prototype,"type",void 0),e$2a([d$25()],h$1p.prototype,"url",void 0),e$2a([d$25({type:Boolean,nonNullable:!0})],h$1p.prototype,"visible",void 0),h$1p=e$2a([n$2L("esri.layers.Layer")],h$1p);const b$12=h$1p;function n$2t(_t,Tt,Mt){let Pt,Ft;if(_t)for(let Dt=0,Nt=_t.length;Dt<Nt;Dt++){if(Pt=_t.getItemAt(Dt),Pt[Tt]===Mt)return Pt;if((Pt==null?void 0:Pt.type)==="group"&&(Ft=n$2t(Pt.layers,Tt,Mt),Ft))return Ft}}const d$1L=s$2l.getLogger("esri.support.LayersMixin"),y$1p=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt),this.layers=new j$11;const Pt=Nt=>{Nt.parent&&"remove"in Nt.parent&&Nt.parent.remove(Nt)},Ft=Nt=>{Nt.parent=this,this.layerAdded(Nt),Nt.type!=="elevation"&&Nt.type!=="base-elevation"||d$1L.error(`Layer 'title:${Nt.title}, id:${Nt.id}' of type '${Nt.type}' is not supported as an operational layer and will therefore be ignored.`)},Dt=Nt=>{Nt.parent=null,this.layerRemoved(Nt)};this.layers.on("before-add",Nt=>Pt(Nt.item)),this.layers.on("after-add",Nt=>Ft(Nt.item)),this.layers.on("after-remove",Nt=>Dt(Nt.item))}destroy(){const Mt=this.layers.removeAll();for(const Pt of Mt)this.layerRemoved(Pt),Pt.destroy();this.layers.destroy()}set layers(Mt){this._set("layers",n$2I(Mt,this._get("layers")))}add(Mt,Pt){const Ft=this.layers;if(Pt=Ft.getNextIndex(Pt),Mt instanceof b$12){const Dt=Mt;Dt.parent===this?this.reorder(Dt,Pt):Ft.add(Dt,Pt)}else k$E(Mt)?Mt.then(Dt=>{this.destroyed||this.add(Dt,Pt)}):d$1L.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(Mt,Pt){const Ft=this.layers;Pt=Ft.getNextIndex(Pt),Mt.slice().forEach(Dt=>{Dt.parent!==this?(Ft.add(Dt,Pt),Pt+=1):this.reorder(Dt,Pt)})}findLayerById(Mt){return n$2t(this.layers,"id",Mt)}findLayerByUid(Mt){return n$2t(this.layers,"uid",Mt)}remove(Mt){return this.layers.remove(Mt)}removeMany(Mt){return this.layers.removeMany(Mt)}removeAll(){return this.layers.removeAll()}reorder(Mt,Pt){return this.layers.reorder(Mt,Pt)}layerAdded(Mt){}layerRemoved(Mt){}};return e$2a([d$25()],Tt.prototype,"layers",null),Tt=e$2a([n$2L("esri.support.LayersMixin")],Tt),Tt},a$2v="esri.support.TablesMixin",l$26=s$2l.getLogger(a$2v);function n$2s(_t,Tt,Mt){if(_t)for(let Pt=0,Ft=_t.length;Pt<Ft;Pt++){const Dt=_t.getItemAt(Pt);if(Dt[Tt]===Mt)return Dt;if((Dt==null?void 0:Dt.type)==="group"){const Nt=n$2s(Dt.tables,Tt,Mt);if(Nt)return Nt}}}const p$3b=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt),this.tables=new j$11,this.tables.on("after-add",Pt=>{const Ft=Pt.item;Ft.parent&&Ft.parent!==this&&"tables"in Ft.parent&&Ft.parent.tables.remove(Ft),Ft.parent=this,Ft.type!=="feature"&&l$26.error(`Layer 'title:${Ft.title}, id:${Ft.id}' of type '${Ft.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",Pt=>{Pt.item.parent=null})}destroy(){const Mt=this.tables.removeAll();for(const Pt of Mt)Pt.destroy();this.tables.destroy()}set tables(Mt){this._set("tables",n$2I(Mt,this._get("tables")))}findTableById(Mt){return n$2s(this.tables,"id",Mt)}findTableByUid(Mt){return n$2s(this.tables,"uid",Mt)}};return e$2a([d$25()],Tt.prototype,"tables",null),Tt=e$2a([n$2L(a$2v)],Tt),Tt};let j$S=class extends p$3b(y$1p(n$2K.EventedMixin(y$1E))){constructor(_t){super(_t),this.allLayers=new p$3d({getCollections:()=>{var Tt,Mt,Pt;return[(Tt=this.basemap)==null?void 0:Tt.baseLayers,(Mt=this.ground)==null?void 0:Mt.layers,this.layers,(Pt=this.basemap)==null?void 0:Pt.referenceLayers]},getChildrenFunction:Tt=>"layers"in Tt?Tt.layers:null}),this.allTables=t$1K(this),this.basemap=null,this.editableLayers=new p$3d({getCollections:()=>[this.allLayers],itemFilterFunction:i$2n}),this.ground=new A$s,this._basemapCache=p$3c()}destroy(){var _t,Tt;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(_t=this.ground)==null||_t.destroy(),(Tt=this.basemap)==null||Tt.destroy(),y$1s(this._basemapCache),this._basemapCache=null}castBasemap(_t){return m$1U(_t,this._basemapCache)}castGround(_t){const Tt=a$2A(_t);return t$2e(Tt)?this._get("ground"):Tt}findLayerById(_t){return this.allLayers.find(Tt=>Tt.id===_t)}findTableById(_t){return this.allTables.find(Tt=>Tt.id===_t)}};e$2a([d$25({readOnly:!0,dependsOn:[]})],j$S.prototype,"allLayers",void 0),e$2a([d$25({readOnly:!0})],j$S.prototype,"allTables",void 0),e$2a([d$25({type:x$M})],j$S.prototype,"basemap",void 0),e$2a([s$23("basemap")],j$S.prototype,"castBasemap",null),e$2a([d$25({readOnly:!0})],j$S.prototype,"editableLayers",void 0),e$2a([d$25({type:A$s,nonNullable:!0})],j$S.prototype,"ground",void 0),e$2a([s$23("ground")],j$S.prototype,"castGround",null),j$S=e$2a([n$2L("esri.Map")],j$S);const L$t=j$S;var e$1E;function a$2u(_t,Tt){switch(_t.type){case"range":{const Mt="range"in _t?_t.range[0]:_t.minValue,Pt="range"in _t?_t.range[1]:_t.maxValue;if(+Tt<Mt||+Tt>Pt)return e$1E.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(_t.codedValues==null||_t.codedValues.every(Mt=>Mt==null||Mt.code!==Tt))return e$1E.INVALID_CODED_VALUE}return null}function r$1l(_t){if(!(!_t||_t.type!=="range"))return{min:"range"in _t?_t.range[0]:_t.minValue,max:"range"in _t?_t.range[1]:_t.maxValue}}(function(_t){_t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",_t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(e$1E||(e$1E={}));let t$1D;function a$2t(){return t$1D||(t$1D=(async()=>{const _t=await __vitePreload(()=>import("./arcadeUtils.3ece5147.js").then(Tt=>Tt.t),[]);return{arcade:_t.arcade,arcadeUtils:_t,Dictionary:_t.Dictionary,Feature:_t.arcadeFeature}})()),t$1D}const s$1O=(_t,Tt,Mt)=>o$1y.create(_t,Tt,Mt,null,["$feature"]),i$2h=(_t,Tt,Mt)=>o$1y.create(_t,Tt,Mt,null,["$feature","$view"]),n$2r=(_t,Tt,Mt,Pt)=>o$1y.create(_t,Tt,Mt,Pt,["$feature","$view"]);class o$1y{constructor(Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt){this.script=Tt,this.evaluate=Dt;const Xt=Array.isArray(Vt)?Vt:Vt.fields;this.fields=Xt,this._syntaxTree=Ft,this._arcade=Mt,this._arcadeDictionary=Pt,this._arcadeFeature=Nt,this._spatialReference=zt,this._referencesGeometry=Mt.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(Tt,Mt,Pt,Ft,Dt,Nt){const{arcade:Vt,Feature:zt,Dictionary:Xt}=await a$2t(),Ht=k$y.fromJSON(Mt),Wt=Vt.parseScript(Tt,Nt),Qt=Dt.reduce((or,ur)=>({...or,[ur]:null}),{});let Zt=null;r$1P(Ft)&&(Zt=new Xt(Ft),Zt.immutable=!0,Qt.$config=null);const Kt=Vt.scriptUsesGeometryEngine(Wt)&&Vt.enableGeometrySupport(),er=Vt.scriptUsesFeatureSet(Wt)&&Vt.enableFeatureSetSupport(),Yt=Vt.scriptIsAsync(Wt)&&Vt.enableAsyncSupport(),rr={vars:Qt,spatialReference:Ht,useAsync:!!Yt},ir=new Xt;ir.immutable=!1,ir.setField("scale",0);const nr=Vt.compileScript(Wt,rr),ar=or=>("$view"in or&&or.$view&&(ir.setField("scale",or.$view.scale),or.$view=ir),Zt&&(or.$config=Zt),nr({vars:or,spatialReference:Ht}));return await Promise.all([Kt,er,Yt]),new o$1y(Tt,Vt,Xt,Wt,ar,new zt,Pt,Ht)}repurposeFeature(Tt){return Tt.geometry&&!Tt.geometry.spatialReference&&(Tt.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(Tt.geometry,Tt.attributes,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(Tt){return this._arcade.referencesMember(this._syntaxTree,Tt)}referencesFunction(Tt){return this._arcade.referencesFunction(this._syntaxTree,Tt)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const u$1J=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],f$1i=["field","normalizationField"];function c$2Q(_t,Tt){if(_t!=null&&Tt!=null){for(const Mt of Array.isArray(_t)?_t:[_t])if(d$1K(u$1J,Mt,Tt),"visualVariables"in Mt&&Mt.visualVariables)for(const Pt of Mt.visualVariables)d$1K(f$1i,Pt,Tt)}}function d$1K(_t,Tt,Mt){if(_t)for(const Pt of _t){const Ft=t$2b(Pt,Tt),Dt=Ft&&typeof Ft!="function"&&Mt.get(Ft);Dt&&o$2d(Pt,Dt.name,Tt)}}function m$1P(_t,Tt){if(_t!=null&&(Tt==null?void 0:Tt.fields.length))if("startField"in _t){const Mt=Tt.get(_t.startField),Pt=Tt.get(_t.endField);_t.startField=Mt&&Mt.name||null,_t.endField=Pt&&Pt.name||null}else{const Mt=Tt.get(_t.startTimeField),Pt=Tt.get(_t.endTimeField);_t.startTimeField=Mt&&Mt.name||null,_t.endTimeField=Pt&&Pt.name||null}}const p$3a=new Set;function y$1o(_t,Tt){return _t&&Tt?(p$3a.clear(),g$15(p$3a,_t,Tt),Array.from(p$3a).sort()):[]}function g$15(_t,Tt,Mt){var Pt;if(Mt)if((Pt=Tt==null?void 0:Tt.fields)!=null&&Pt.length)if(Mt.includes("*"))for(const{name:Ft}of Tt.fields)_t.add(Ft);else for(const Ft of Mt)F$t(_t,Tt,Ft);else{if(Mt.includes("*"))return _t.clear(),void _t.add("*");for(const Ft of Mt)_t.add(Ft)}}function F$t(_t,Tt,Mt){if(typeof Mt=="string")if(Tt){const Pt=Tt.get(Mt);Pt&&_t.add(Pt.name)}else _t.add(Mt)}function I$y(_t,Tt){return t$2e(Tt)||t$2e(_t)?[]:Tt.includes("*")?_t.fields.map(Mt=>Mt.name):Tt}async function b$11(_t,Tt,Mt){var Dt;if(!Mt)return;const{arcadeUtils:Pt}=await a$2t(),Ft=Pt.extractFieldNames(Mt,(Dt=Tt==null?void 0:Tt.fields)==null?void 0:Dt.map(Nt=>Nt.name));for(const Nt of Ft)F$t(_t,Tt,Nt)}async function T$v(_t,Tt,Mt){if(Mt&&Mt!=="1=1"){const Pt=(await __vitePreload(()=>Promise.resolve().then(()=>WhereClause),void 0)).WhereClause.create(Mt,Tt);if(!Pt.isStandardized)throw new s$2i("fieldUtils:collectFilterFields","Where clause is not standardized",{where:Mt});g$15(_t,Tt,Pt.fieldNames)}}function h$1o({displayField:_t,fields:Tt}){return _t||(Tt&&Tt.length?S$H(Tt,"name-or-title")||S$H(Tt,"unique-identifier")||S$H(Tt,"type-or-category")||w$V(Tt):null)}function w$V(_t){for(const Tt of _t){if(!Tt||!Tt.name)continue;const Mt=Tt.name.toLowerCase();if(Mt.includes("name")||Mt.includes("title"))return Tt.name}return null}function S$H(_t,Tt){for(const Mt of _t)if(Mt&&Mt.valueType&&Mt.valueType===Tt)return Mt.name;return null}async function A$r(_t,Tt){if(!Tt)return;const Mt=t$2b("elevationInfo.featureExpressionInfo",Tt);return Mt?Mt.collectRequiredFields(_t,Tt.fieldsIndex):void 0}async function E$D(_t,Tt,Mt){Mt.outStatistic.onStatisticValueExpression?b$11(_t,Tt,Mt.outStatistic.onStatisticValueExpression):_t.add(Mt.outStatistic.onStatisticField)}async function N$q(_t,Tt,Mt){var Ft,Dt;if(!Tt||!Mt||!("fields"in Mt))return;const Pt=[];if((Ft=Mt.popupTemplate)!=null&&Ft.expressionInfos&&Pt.push(...Mt.popupTemplate.expressionInfos.map(Nt=>b$11(_t,Tt.fieldsIndex,Nt.expression))),Array.isArray((Dt=Mt.popupTemplate)==null?void 0:Dt.content)){const Nt=Mt.popupTemplate.content;for(const Vt of Nt)Vt.type==="expression"&&Vt.expressionInfo&&Pt.push(b$11(_t,Tt.fieldsIndex,Vt.expressionInfo.expression))}Mt.fields&&Pt.push(...Mt.fields.map(Nt=>E$D(_t,Tt.fieldsIndex,Nt))),await Promise.all(Pt)}async function V$m(_t,Tt,Mt){Tt&&(Tt.timeInfo&&r$1P(Mt)&&Mt.timeExtent&&g$15(_t,Tt.fieldsIndex,[Tt.timeInfo.startField,Tt.timeInfo.endField]),Tt.floorInfo&&g$15(_t,Tt.fieldsIndex,[Tt.floorInfo.floorField]),r$1P(Mt)&&r$1P(Mt.where)&&await T$v(_t,Tt.fieldsIndex,Mt.where))}async function _$s(_t,Tt,Mt){Tt&&Mt&&await Promise.all(Mt.map(Pt=>D$u(_t,Tt,Pt)))}async function D$u(_t,Tt,Mt){Tt&&Mt&&(Mt.valueExpression?await b$11(_t,Tt.fieldsIndex,Mt.valueExpression):Mt.field&&F$t(_t,Tt.fieldsIndex,Mt.field))}function L$s(_t){if(!_t)return[];const Tt="editFieldsInfo"in _t&&_t.editFieldsInfo;return Tt?y$1o(_t.fieldsIndex,[Tt&&Tt.creatorField,Tt&&Tt.creationDateField,Tt&&Tt.editorField,Tt&&Tt.editDateField]):[]}function O$r(_t){if(!_t)return[];const Tt=_t.geometryFieldsInfo;return Tt?y$1o(_t.fieldsIndex,[Tt.shapeAreaField,Tt.shapeLengthField]):[]}async function j$R(_t,Tt){const{labelingInfo:Mt,fieldsIndex:Pt}=Tt;Mt&&Mt.length&&await Promise.all(Mt.map(Ft=>z$t(_t,Pt,Ft)))}async function z$t(_t,Tt,Mt){if(!Mt)return;const Pt=Mt.getLabelExpression(),Ft=Mt.where;if(Pt.type==="arcade")await b$11(_t,Tt,Pt.expression);else{const Dt=Pt.expression.match(/{[^}]*}/g);Dt&&Dt.forEach(Nt=>{F$t(_t,Tt,Nt.slice(1,-1))})}await T$v(_t,Tt,Ft)}function P$o(_t){const Tt=_t.defaultValue;return Tt!==void 0&&Y$a(_t,Tt)?Tt:_t.nullable?null:void 0}function k$u(_t){return typeof _t=="number"&&!isNaN(_t)&&isFinite(_t)}function C$o(_t){return _t===null||k$u(_t)}const R$t="isInteger"in Number?Number.isInteger:_t=>typeof _t=="number"&&isFinite(_t)&&Math.floor(_t)===_t;function G$j(_t){return _t===null||R$t(_t)}function W$a(_t){return _t!=null&&typeof _t=="string"}function q$j(_t){return _t===null||W$a(_t)}function M$G(){return!0}function Y$a(_t,Tt){let Mt;switch(_t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":Mt=_t.nullable?G$j:R$t;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":Mt=_t.nullable?C$o:k$u;break;case"string":case"esriFieldTypeString":Mt=_t.nullable?q$j:W$a;break;default:Mt=M$G}return arguments.length===1?Mt:Mt(Tt)}const J$g=["integer","small-integer","single","double"],X$9=new Set([...J$g,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function B$n(_t){return _t!=null&&X$9.has(_t.type)}function H$g(_t){return _t!=null&&(_t.type==="string"||_t.type==="esriFieldTypeString")}function K$c(_t){return _t!=null&&(_t.type==="date"||_t.type==="esriFieldTypeDate")}var Z$9,ee$7;function ne$6(_t){return _t==null||typeof _t=="number"&&isNaN(_t)?null:_t}function ie$6(_t,Tt){return _t.nullable&&Tt===null?null:B$n(_t)&&!te$7(_t.type,Number(Tt))?Z$9.OUT_OF_RANGE:Y$a(_t,Tt)?_t.domain?a$2u(_t.domain,Tt):null:ee$7.INVALID_TYPE}function te$7(_t,Tt){const Mt=typeof _t=="string"?oe$6(_t):_t;return!!Mt&&(Mt.isInteger?R$t(Tt)&&Tt>=Mt.min&&Tt<=Mt.max:Tt>=Mt.min&&Tt<=Mt.max)}function re$7(_t){return r$1l(_t.domain)||(B$n(_t)?oe$6(_t.type):void 0)}function oe$6(_t){switch(_t){case"esriFieldTypeSmallInteger":case"small-integer":return se$6;case"esriFieldTypeInteger":case"integer":return ae$6;case"esriFieldTypeSingle":case"single":return ue$6;case"esriFieldTypeDouble":case"double":return fe$6}}(function(_t){_t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(Z$9||(Z$9={})),function(_t){_t.INVALID_TYPE="type-validation-error::invalid-type"}(ee$7||(ee$7={}));const se$6={min:-32768,max:32767,isInteger:!0},ae$6={min:-2147483648,max:2147483647,isInteger:!0},ue$6={min:-34e37,max:12e37,isInteger:!1},fe$6={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function ce$6(_t,Tt,Mt){switch(_t){case e$1E.INVALID_CODED_VALUE:return`Value ${Mt} is not in the coded domain - field: ${Tt.name}, domain: ${JSON.stringify(Tt.domain)}`;case e$1E.VALUE_OUT_OF_RANGE:return`Value ${Mt} is out of the range of valid values - field: ${Tt.name}, domain: ${JSON.stringify(Tt.domain)}`;case ee$7.INVALID_TYPE:return`Value ${Mt} is not a valid value for the field type - field: ${Tt.name}, type: ${Tt.type}, nullable: ${Tt.nullable}`;case Z$9.OUT_OF_RANGE:{const{min:Pt,max:Ft}=oe$6(Tt.type);return`Value ${Mt} is out of range for the number type - field: ${Tt.name}, type: ${Tt.type}, value range is ${Pt} to ${Ft}`}}}function de$4(_t,Tt){return!me$6(_t,Tt,null)}function me$6(_t,Tt,Mt){if(!Tt||!Tt.attributes||!_t){if(r$1P(Mt))for(const Dt of _t)Mt.add(Dt);return!0}const Pt=Tt.attributes;let Ft=!1;for(const Dt of _t)if(!(Dt in Pt)){if(Ft=!0,!r$1P(Mt))break;Mt.add(Dt)}return Ft}function ye$3(_t){return["raster.itempixelvalue","raster.servicepixelvalue"].some(Tt=>_t.toLowerCase().startsWith(Tt))}let e$1D=class extends l$2v{constructor(_t){super(_t),this.type=null}};e$2a([d$25({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],e$1D.prototype,"type",void 0),e$1D=e$2a([n$2L("esri.popup.content.Content")],e$1D);const p$39=e$1D;var s$1N;let p$38=s$1N=class extends p$39{constructor(_t){super(_t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new s$1N({description:this.description,displayType:this.displayType,title:this.title})}};e$2a([d$25({type:String,json:{write:!0}})],p$38.prototype,"description",void 0),e$2a([d$25({type:["auto","preview","list"],json:{write:!0}})],p$38.prototype,"displayType",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$38.prototype,"title",void 0),e$2a([d$25({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],p$38.prototype,"type",void 0),p$38=s$1N=e$2a([n$2L("esri.popup.content.AttachmentsContent")],p$38);const i$2g=p$38;var p$37;let c$2P=p$37=class extends p$39{constructor(_t){super(_t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new p$37({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?m$2e(this.outFields):null})}};e$2a([d$25()],c$2P.prototype,"creator",void 0),e$2a([d$25()],c$2P.prototype,"destroyer",void 0),e$2a([d$25()],c$2P.prototype,"outFields",void 0),e$2a([d$25({type:["custom"],readOnly:!0})],c$2P.prototype,"type",void 0),c$2P=p$37=e$2a([n$2L("esri.popup.content.CustomContent")],c$2P);const i$2f=c$2P;var s$1M;let p$36=s$1M=class extends l$2v{constructor(_t){super(_t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new s$1M({title:this.title,expression:this.expression})}};e$2a([d$25({type:String,json:{write:!0}})],p$36.prototype,"title",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$36.prototype,"expression",void 0),e$2a([d$25({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],p$36.prototype,"returnType",void 0),p$36=s$1M=e$2a([n$2L("esri.popup.ElementExpressionInfo")],p$36);const i$2e=p$36;var p$35;let n$2q=p$35=class extends p$39{constructor(_t){super(_t),this.expressionInfo=null,this.type="expression"}clone(){var _t;return new p$35({expressionInfo:(_t=this.expressionInfo)==null?void 0:_t.clone()})}};e$2a([d$25({type:i$2e,json:{write:!0}})],n$2q.prototype,"expressionInfo",void 0),e$2a([d$25({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],n$2q.prototype,"type",void 0),n$2q=p$35=e$2a([n$2L("esri.popup.content.ExpressionContent")],n$2q);const i$2d=n$2q,a$2s=o$1O()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});a$2s.toJSON.bind(a$2s);a$2s.fromJSON.bind(a$2s);const r$1k={year:"numeric",month:"numeric",day:"numeric"},n$2p={year:"numeric",month:"long",day:"numeric"},a$2r={year:"numeric",month:"short",day:"numeric"},h$1n={year:"numeric",month:"long",weekday:"long",day:"numeric"},m$1O={hour:"numeric",minute:"numeric"},i$2c={...m$1O,second:"numeric"},s$1L={"short-date":r$1k,"short-date-short-time":{...r$1k,...m$1O},"short-date-short-time-24":{...r$1k,...m$1O,hour12:!1},"short-date-long-time":{...r$1k,...i$2c},"short-date-long-time-24":{...r$1k,...i$2c,hour12:!1},"short-date-le":r$1k,"short-date-le-short-time":{...r$1k,...m$1O},"short-date-le-short-time-24":{...r$1k,...m$1O,hour12:!1},"short-date-le-long-time":{...r$1k,...i$2c},"short-date-le-long-time-24":{...r$1k,...i$2c,hour12:!1},"long-month-day-year":n$2p,"long-month-day-year-short-time":{...n$2p,...m$1O},"long-month-day-year-short-time-24":{...n$2p,...m$1O,hour12:!1},"long-month-day-year-long-time":{...n$2p,...i$2c},"long-month-day-year-long-time-24":{...n$2p,...i$2c,hour12:!1},"day-short-month-year":a$2r,"day-short-month-year-short-time":{...a$2r,...m$1O},"day-short-month-year-short-time-24":{...a$2r,...m$1O,hour12:!1},"day-short-month-year-long-time":{...a$2r,...i$2c},"day-short-month-year-long-time-24":{...a$2r,...i$2c,hour12:!1},"long-date":h$1n,"long-date-short-time":{...h$1n,...m$1O},"long-date-short-time-24":{...h$1n,...m$1O,hour12:!1},"long-date-long-time":{...h$1n,...i$2c},"long-date-long-time-24":{...h$1n,...i$2c,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":m$1O,"long-time":i$2c},l$25=o$1O()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});l$25.apiValues;l$25.toJSON.bind(l$25);l$25.fromJSON.bind(l$25);const u$1I={ar:"ar-u-nu-latn-ca-gregory"};let c$2O=new WeakMap,D$t=s$1L["short-date-short-time"];function T$u(_t){const Tt=_t||D$t;if(!c$2O.has(Tt)){const Mt=l$2q(),Pt=u$1I[l$2q()]||Mt;c$2O.set(Tt,new Intl.DateTimeFormat(Pt,Tt))}return c$2O.get(Tt)}function S$G(_t){return s$1L[_t]||null}function L$r(_t,Tt){return T$u(Tt).format(_t)}g$1a(()=>{c$2O=new WeakMap,D$t=s$1L["short-date-short-time"]});const a$2q={ar:"ar-u-nu-latn"};let e$1C=new WeakMap,o$1x={};function i$2b(_t){const Tt=_t||o$1x;if(!e$1C.has(Tt)){const Mt=l$2q(),Pt=a$2q[l$2q()]||Mt;e$1C.set(Tt,new Intl.NumberFormat(Pt,_t))}return e$1C.get(Tt)}function u$1H(_t={}){const Tt={};return _t.digitSeparator!=null&&(Tt.useGrouping=_t.digitSeparator),_t.places!=null&&(Tt.minimumFractionDigits=Tt.maximumFractionDigits=_t.places),Tt}function m$1N(_t,Tt){return _t===-0&&(_t=0),i$2b(Tt).format(_t)}g$1a(()=>{e$1C=new WeakMap,o$1x={}});var d$1J;let l$24=d$1J=class extends l$2v{constructor(_t){super(_t),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new d$1J({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(_t){return this.dateFormat?L$r(_t,{...S$G(this.dateFormat),...this.dateTimeFormatOptions}):m$1N(_t,u$1H(this))}formatRasterPixelValue(_t){let Tt,Mt;return _t.trim().includes(",")?(Tt=",",Mt=Tt+" ",this._formatDelimitedString(_t,Tt,Mt,this)):_t.trim().includes(";")?(Tt=";",Mt=Tt+" ",this._formatDelimitedString(_t,Tt,Mt,this)):_t.trim().includes(" ")?(Tt=Mt=" ",this._formatDelimitedString(_t,Tt,Mt,this)):this.format(Number(_t))}_formatDelimitedString(_t,Tt,Mt,Pt){return _t&&Tt&&Mt&&Pt?_t.trim().split(Tt).map(Ft=>this.format(Number(Ft))).join(Mt):_t}};e$2a([r$1r(a$2s)],l$24.prototype,"dateFormat",void 0),e$2a([d$25({type:Object,json:{read:!1}})],l$24.prototype,"dateTimeFormatOptions",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],l$24.prototype,"digitSeparator",void 0),e$2a([d$25({type:S$Q,json:{write:!0}})],l$24.prototype,"places",void 0),l$24=d$1J=e$2a([n$2L("esri.popup.support.FieldInfoFormat")],l$24);const u$1G=l$24;var a$2p;let n$2o=a$2p=class extends l$2v{constructor(_t){super(_t),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new a$2p({fieldName:this.fieldName,format:this.format?m$2e(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};e$2a([d$25({type:String,json:{write:!0}})],n$2o.prototype,"fieldName",void 0),e$2a([d$25({type:u$1G,json:{write:!0}})],n$2o.prototype,"format",void 0),e$2a([d$25({type:Boolean,json:{write:!0,default:!1}})],n$2o.prototype,"isEditable",void 0),e$2a([d$25({type:String,json:{write:!0}})],n$2o.prototype,"label",void 0),e$2a([r$1r(new s$1_({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],n$2o.prototype,"stringFieldOption",void 0),e$2a([d$25({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],n$2o.prototype,"statisticType",void 0),e$2a([d$25({type:String,json:{write:!0}})],n$2o.prototype,"tooltip",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],n$2o.prototype,"visible",void 0),n$2o=a$2p=e$2a([n$2L("esri.popup.FieldInfo")],n$2o);const c$2N=n$2o;var n$2n;let l$23=n$2n=class extends p$39{constructor(_t){super(_t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(_t,Tt){Tt.fieldInfos=_t&&_t.map(Mt=>Mt.toJSON())}clone(){return new n$2n(m$2e({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};e$2a([d$25({type:Object,json:{write:!0}})],l$23.prototype,"attributes",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$23.prototype,"description",void 0),e$2a([d$25({type:[c$2N]})],l$23.prototype,"fieldInfos",void 0),e$2a([r$1C("fieldInfos")],l$23.prototype,"writeFieldInfos",null),e$2a([d$25({type:String,json:{write:!0}})],l$23.prototype,"title",void 0),e$2a([d$25({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],l$23.prototype,"type",void 0),l$23=n$2n=e$2a([n$2L("esri.popup.content.FieldsContent")],l$23);const c$2M=l$23;let s$1K=class extends l$2v{constructor(_t){super(_t),this.altText=null,this.caption="",this.title="",this.type=null}};e$2a([d$25({type:String,json:{write:!0}})],s$1K.prototype,"altText",void 0),e$2a([d$25({type:String,json:{write:!0}})],s$1K.prototype,"caption",void 0),e$2a([d$25({type:String,json:{write:!0}})],s$1K.prototype,"title",void 0),e$2a([d$25({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],s$1K.prototype,"type",void 0),s$1K=e$2a([n$2L("esri.popup.content.mixins.MediaInfo")],s$1K);const p$34=s$1K;var s$1J;let p$33=s$1J=class extends y$1E{constructor(_t){super(_t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new s$1J({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};e$2a([d$25()],p$33.prototype,"fieldName",void 0),e$2a([d$25()],p$33.prototype,"tooltip",void 0),e$2a([d$25()],p$33.prototype,"value",void 0),p$33=s$1J=e$2a([n$2L("esri.popup.content.support.ChartMediaInfoValueSeries")],p$33);const i$2a=p$33;var p$32;let l$22=p$32=class extends l$2v{constructor(_t){super(_t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new p$32({fields:m$2e(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};e$2a([d$25({type:[String],json:{write:!0}})],l$22.prototype,"fields",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$22.prototype,"normalizeField",void 0),e$2a([d$25({type:[i$2a],json:{read:!1}})],l$22.prototype,"series",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$22.prototype,"tooltipField",void 0),l$22=p$32=e$2a([n$2L("esri.popup.content.support.ChartMediaInfoValue")],l$22);const n$2m=l$22;let p$31=class extends p$34{constructor(_t){super(_t),this.type=null,this.value=null}};e$2a([d$25({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],p$31.prototype,"type",void 0),e$2a([d$25({type:n$2m,json:{write:!0}})],p$31.prototype,"value",void 0),p$31=e$2a([n$2L("esri.popup.content.mixins.ChartMediaInfo")],p$31);const a$2o=p$31,c$2L=o$1O()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var a$2n;let p$30=a$2n=class extends a$2o{constructor(_t){super(_t),this.type="bar-chart"}clone(){return new a$2n({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$2a([d$25({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:c$2L.write}})],p$30.prototype,"type",void 0),p$30=a$2n=e$2a([n$2L("esri.popup.content.BarChartMediaInfo")],p$30);const i$29=p$30;var a$2m;let p$2$=a$2m=class extends a$2o{constructor(_t){super(_t),this.type="column-chart"}clone(){return new a$2m({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$2a([d$25({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:c$2L.write}})],p$2$.prototype,"type",void 0),p$2$=a$2m=e$2a([n$2L("esri.popup.content.ColumnChartMediaInfo")],p$2$);const c$2K=p$2$;var e$1B;let p$2_=e$1B=class extends l$2v{constructor(_t){super(_t),this.linkURL=null,this.sourceURL=null}clone(){return new e$1B({linkURL:this.linkURL,sourceURL:this.sourceURL})}};e$2a([d$25({type:String,json:{write:!0}})],p$2_.prototype,"linkURL",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$2_.prototype,"sourceURL",void 0),p$2_=e$1B=e$2a([n$2L("esri.popup.content.support.ImageMediaInfoValue")],p$2_);const c$2J=p$2_;var a$2l;let i$28=a$2l=class extends p$34{constructor(_t){super(_t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new a$2l({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};e$2a([d$25({type:Number,json:{write:!0}})],i$28.prototype,"refreshInterval",void 0),e$2a([d$25({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],i$28.prototype,"type",void 0),e$2a([d$25({type:c$2J,json:{write:!0}})],i$28.prototype,"value",void 0),i$28=a$2l=e$2a([n$2L("esri.popup.content.ImageMediaInfo")],i$28);const p$2Z=i$28;var i$27;let a$2k=i$27=class extends a$2o{constructor(_t){super(_t),this.type="line-chart"}clone(){return new i$27({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$2a([d$25({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:c$2L.write}})],a$2k.prototype,"type",void 0),a$2k=i$27=e$2a([n$2L("esri.popup.content.LineChartMediaInfo")],a$2k);const p$2Y=a$2k;var p$2X;let i$26=p$2X=class extends a$2o{constructor(_t){super(_t),this.type="pie-chart"}clone(){return new p$2X({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};e$2a([d$25({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:c$2L.write}})],i$26.prototype,"type",void 0),i$26=p$2X=e$2a([n$2L("esri.popup.content.PieChartMediaInfo")],i$26);const a$2j=i$26,m$1M={base:p$34,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":i$29,"column-chart":c$2K,"line-chart":p$2Y,"pie-chart":a$2j,image:p$2Z}};var l$21;let u$1F=l$21=class extends p$39{constructor(_t){super(_t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(_t){return _t&&_t.map(Tt=>Tt.type==="image"?p$2Z.fromJSON(Tt):Tt.type==="barchart"?i$29.fromJSON(Tt):Tt.type==="columnchart"?c$2K.fromJSON(Tt):Tt.type==="linechart"?p$2Y.fromJSON(Tt):Tt.type==="piechart"?a$2j.fromJSON(Tt):void 0).filter(Boolean)}writeMediaInfos(_t,Tt){Tt.mediaInfos=_t&&_t.map(Mt=>Mt.toJSON())}clone(){return new l$21(m$2e({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};e$2a([d$25()],u$1F.prototype,"activeMediaInfoIndex",void 0),e$2a([d$25({type:Object,json:{write:!0}})],u$1F.prototype,"attributes",void 0),e$2a([d$25({type:String,json:{write:!0}})],u$1F.prototype,"description",void 0),e$2a([d$25({types:[m$1M]})],u$1F.prototype,"mediaInfos",void 0),e$2a([o$1U("mediaInfos")],u$1F.prototype,"readMediaInfos",null),e$2a([r$1C("mediaInfos")],u$1F.prototype,"writeMediaInfos",null),e$2a([d$25({type:String,json:{write:!0}})],u$1F.prototype,"title",void 0),e$2a([d$25({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],u$1F.prototype,"type",void 0),u$1F=l$21=e$2a([n$2L("esri.popup.content.MediaContent")],u$1F);const I$x=u$1F;var s$1I;let p$2W=s$1I=class extends p$39{constructor(_t){super(_t),this.text=null,this.type="text"}clone(){return new s$1I({text:this.text})}};e$2a([d$25({type:String,json:{write:!0}})],p$2W.prototype,"text",void 0),e$2a([d$25({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],p$2W.prototype,"type",void 0),p$2W=s$1I=e$2a([n$2L("esri.popup.content.TextContent")],p$2W);const c$2I=p$2W,m$1L={base:null,key:"type",typeMap:{attachment:i$2g,media:I$x,text:c$2I,expression:i$2d,field:c$2M}};var s$1H;let p$2V=s$1H=class extends l$2v{constructor(_t){super(_t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new s$1H({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e$2a([d$25({type:String,json:{write:!0}})],p$2V.prototype,"name",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$2V.prototype,"title",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$2V.prototype,"expression",void 0),e$2a([d$25({type:["string","number"],json:{write:!0}})],p$2V.prototype,"returnType",void 0),p$2V=s$1H=e$2a([n$2L("esri.popup.ExpressionInfo")],p$2V);const i$25=p$2V;var e$1A;let p$2U=e$1A=class extends l$2v{constructor(_t){super(_t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new e$1A({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};e$2a([d$25({type:Boolean,json:{write:!0}})],p$2U.prototype,"returnTopmostRaster",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],p$2U.prototype,"showNoDataRecords",void 0),p$2U=e$1A=e$2a([n$2L("esri.popup.LayerOptions")],p$2U);const a$2i=p$2U;var t$1C;let p$2T=t$1C=class extends l$2v{constructor(_t){super(_t),this.field=null,this.order=null}clone(){return new t$1C({field:this.field,order:this.order})}};e$2a([d$25({type:String,json:{write:!0}})],p$2T.prototype,"field",void 0),e$2a([d$25({type:["asc","desc"],json:{write:!0}})],p$2T.prototype,"order",void 0),p$2T=t$1C=e$2a([n$2L("esri.popup.support.RelatedRecordsInfoFieldOrder")],p$2T);const c$2H=p$2T;var d$1I;let c$2G=d$1I=class extends l$2v{constructor(_t){super(_t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new d$1I({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?m$2e(this.orderByFields):null})}};e$2a([d$25({type:Boolean,json:{write:!0}})],c$2G.prototype,"showRelatedRecords",void 0),e$2a([d$25({type:[c$2H],json:{write:!0}})],c$2G.prototype,"orderByFields",void 0),c$2G=d$1I=e$2a([n$2L("esri.popup.RelatedRecordsInfo")],c$2G);const l$20=c$2G;var r$1j;let p$2S=r$1j=class extends s$1P(y$1E){constructor(_t){super(_t),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new r$1j({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};e$2a([d$25()],p$2S.prototype,"active",void 0),e$2a([d$25()],p$2S.prototype,"className",void 0),e$2a([d$25()],p$2S.prototype,"disabled",void 0),e$2a([d$25()],p$2S.prototype,"id",void 0),e$2a([d$25()],p$2S.prototype,"indicator",void 0),e$2a([d$25()],p$2S.prototype,"title",void 0),e$2a([d$25()],p$2S.prototype,"type",void 0),e$2a([d$25()],p$2S.prototype,"visible",void 0),p$2S=r$1j=e$2a([n$2L("esri.support.actions.ActionBase")],p$2S);const c$2F=p$2S;var r$1i;let e$1z=r$1i=class extends c$2F{constructor(_t){super(_t),this.image=null,this.type="button"}clone(){return new r$1i({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};e$2a([d$25()],e$1z.prototype,"image",void 0),e$1z=r$1i=e$2a([n$2L("esri.support.Action.ActionButton")],e$1z);const a$2h=e$1z;var o$1w;let r$1h=o$1w=class extends c$2F{constructor(_t){super(_t),this.image=null,this.type="toggle",this.value=!1}clone(){return new o$1w({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};e$2a([d$25()],r$1h.prototype,"image",void 0),e$2a([d$25()],r$1h.prototype,"value",void 0),r$1h=o$1w=e$2a([n$2L("esri.support.Action.ActionToggle")],r$1h);const a$2g=r$1h;var S$F;const T$t=j$11.ofType({key:"type",defaultKeyValue:"button",base:c$2F,typeMap:{button:a$2h,toggle:a$2g}}),b$10={base:p$39,key:"type",typeMap:{media:I$x,custom:i$2f,text:c$2I,attachments:i$2g,fields:c$2M,expression:i$2d}},R$s="esri.PopupTemplate",L$q=s$2l.getLogger(R$s),J$f=["attachments","fields","media","text","expression"];let M$F=S$F=class extends l$2v{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(_t){return Array.isArray(_t)?_t.map(Tt=>N$v(b$10,Tt)):typeof _t=="string"||typeof _t=="function"||_t instanceof HTMLElement||k$E(_t)?_t:(L$q.error("content error","unsupported content value",{value:_t}),null)}readContent(_t,Tt){const{popupElements:Mt}=Tt;return Array.isArray(Mt)&&Mt.length>0?this._readPopupInfoElements(Tt):this._readPopupInfo(Tt)}writeContent(_t,Tt,Mt,Pt){typeof _t!="string"?Array.isArray(_t)&&(Tt.popupElements=_t.filter(Ft=>J$f.includes(Ft.type)).map(Ft=>Ft&&Ft.toJSON(Pt)),Tt.popupElements.forEach(Ft=>{Ft.type==="attachments"?this._writeAttachmentContent(Tt):Ft.type==="media"?this._writeMediaContent(Ft,Tt):Ft.type==="text"&&this._writeTextContent(Ft,Tt)})):Tt.description=_t}writeFieldInfos(_t,Tt,Mt,Pt){const{content:Ft}=this,Dt=Array.isArray(Ft)?Ft:null;if(_t){const Nt=Dt?Dt.filter(zt=>zt.type==="fields"):[],Vt=Nt.length&&Nt.every(zt=>{var Xt;return(Xt=zt.fieldInfos)==null?void 0:Xt.length});Tt.fieldInfos=_t.filter(Boolean).map(zt=>{const Xt=zt.toJSON(Pt);return Vt&&(Xt.visible=!1),Xt})}if(Dt)for(const Nt of Dt)Nt.type==="fields"&&this._writeFieldsContent(Nt,Tt)}writeLayerOptions(_t,Tt,Mt,Pt){Tt[Mt]=!_t||_t.showNoDataRecords===null&&_t.returnTopmostRaster===null?null:_t.toJSON(Pt)}writeTitle(_t,Tt){Tt.title=_t||""}clone(){const{actions:_t}=this,Tt=_t?m$2e(_t.toArray()):[];return new S$F({actions:Tt,content:Array.isArray(this.content)?m$2e(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?m$2e(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?m$2e(this.fieldInfos):null,layerOptions:this.layerOptions?m$2e(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?m$2e(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?m$2e(this.relatedRecordsInfo):null})}async collectRequiredFields(_t,Tt){const Mt=this.expressionInfos||[];await this._collectExpressionInfoFields(_t,Tt,[...Mt,...this._getContentExpressionInfos(this.content,Mt)]),g$15(_t,Tt,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(_t){const Tt=new Set;return await this.collectRequiredFields(Tt,_t),[...Tt].sort()}_writeFieldsContent(_t,Tt){if(!Array.isArray(_t.fieldInfos)||!_t.fieldInfos.length)return;const Mt=m$2e(_t.fieldInfos);Array.isArray(Tt.fieldInfos)?Mt.forEach(Pt=>{const Ft=Tt.fieldInfos.find(Dt=>Dt.fieldName.toLowerCase()===Pt.fieldName.toLowerCase());Ft?Ft.visible=!0:Tt.fieldInfos.push(Pt)}):Tt.fieldInfos=Mt}_writeAttachmentContent(_t){_t.showAttachments||(_t.showAttachments=!0)}_writeTextContent(_t,Tt){!Tt.description&&_t.text&&(Tt.description=_t.text)}_writeMediaContent(_t,Tt){if(!Array.isArray(_t.mediaInfos)||!_t.mediaInfos.length)return;const Mt=m$2e(_t.mediaInfos);Array.isArray(Tt.mediaInfos)?Tt.mediaInfos=[...Tt.mediaInfos,...Mt]:Tt.mediaInfos=Mt}_readPopupInfoElements({description:_t,mediaInfos:Tt,popupElements:Mt}){const Pt={description:!1,mediaInfos:!1};return Mt.map(Ft=>Ft.type==="media"?(Ft.mediaInfos||!Tt||Pt.mediaInfos||(Ft.mediaInfos=Tt,Pt.mediaInfos=!0),I$x.fromJSON(Ft)):Ft.type==="text"?(Ft.text||!_t||Pt.description||(Ft.text=_t,Pt.description=!0),c$2I.fromJSON(Ft)):Ft.type==="attachments"?i$2g.fromJSON(Ft):Ft.type==="fields"?c$2M.fromJSON(Ft):Ft.type==="expression"?i$2d.fromJSON(Ft):void 0).filter(Boolean)}_readPopupInfo({description:_t,mediaInfos:Tt,showAttachments:Mt}){const Pt=[];return _t?Pt.push(new c$2I({text:_t})):Pt.push(new c$2M),Array.isArray(Tt)&&Tt.length&&Pt.push(I$x.fromJSON({mediaInfos:Tt})),Mt&&Pt.push(i$2g.fromJSON({displayType:"auto"})),Pt.length?Pt:_t}_getContentElementFields(_t){const Tt=_t==null?void 0:_t.type;if(Tt==="attachments")return[...this._extractFieldNames(_t.title),...this._extractFieldNames(_t.description)];if(Tt==="custom")return _t.outFields||[];if(Tt==="fields")return[...this._extractFieldNames(_t.title),...this._extractFieldNames(_t.description),...this._getFieldInfoFields(_t.fieldInfos||this.fieldInfos)];if(Tt==="media"){const Mt=_t.mediaInfos||[];return[...this._extractFieldNames(_t.title),...this._extractFieldNames(_t.description),...Mt.reduce((Pt,Ft)=>[...Pt,...this._getMediaInfoFields(Ft)],[])]}return Tt==="text"?this._extractFieldNames(_t.text):[]}_getMediaInfoFields(_t){const{caption:Tt,title:Mt,value:Pt}=_t,Ft=Pt||{},{fields:Dt=[],normalizeField:Nt,tooltipField:Vt,sourceURL:zt,linkURL:Xt}=Ft,Ht=[...this._extractFieldNames(Mt),...this._extractFieldNames(Tt),...this._extractFieldNames(zt),...this._extractFieldNames(Xt),...Dt];return Nt&&Ht.push(Nt),Vt&&Ht.push(Vt),Ht}_getContentExpressionInfos(_t,Tt){return Array.isArray(_t)?_t.reduce((Mt,Pt)=>[...Mt,...Pt.type==="expression"&&Pt.expressionInfo?[Pt.expressionInfo]:[]],Tt):[]}_getContentFields(_t){return typeof _t=="string"?this._extractFieldNames(_t):Array.isArray(_t)?_t.reduce((Tt,Mt)=>[...Tt,...this._getContentElementFields(Mt)],[]):[]}async _collectExpressionInfoFields(_t,Tt,Mt){Mt&&await Promise.all(Mt.map(Pt=>b$11(_t,Tt,Pt.expression)))}_getFieldInfoFields(_t){return _t?_t.filter(Tt=>Tt.visible===void 0||!!Tt.visible).map(Tt=>Tt.fieldName).filter(Tt=>!Tt.includes("relationships/")&&!Tt.includes("expression/")):[]}_getActionsFields(_t){return _t?_t.toArray().reduce((Tt,Mt)=>[...Tt,...this._getActionFields(Mt)],[]):[]}_getActionFields(_t){const{className:Tt,title:Mt,type:Pt}=_t,Ft=Pt==="button"||Pt==="toggle"?_t.image:"";return[...this._extractFieldNames(Mt),...this._extractFieldNames(Tt),...this._extractFieldNames(Ft)]}_getTitleFields(_t){return typeof _t=="string"?this._extractFieldNames(_t):[]}_extractFieldNames(_t){if(!_t||typeof _t!="string")return[];const Tt=/{[^}]*}/g,Mt=_t.match(Tt);if(!Mt)return[];const Pt=/\{(\w+):.+\}/,Ft=Mt.filter(Dt=>!(Dt.indexOf("{relationships/")===0||Dt.indexOf("{expression/")===0)).map(Dt=>Dt.replace(Pt,"{$1}"));return Ft?Ft.map(Dt=>Dt.slice(1,-1)):[]}};e$2a([d$25({type:T$t})],M$F.prototype,"actions",void 0),e$2a([d$25()],M$F.prototype,"content",void 0),e$2a([s$23("content")],M$F.prototype,"castContent",null),e$2a([o$1U("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],M$F.prototype,"readContent",null),e$2a([r$1C("content",{popupElements:{type:j$11.ofType(m$1L)},showAttachments:{type:Boolean},mediaInfos:{type:j$11.ofType(m$1M)},description:{type:String}})],M$F.prototype,"writeContent",null),e$2a([d$25({type:[i$25],json:{write:!0}})],M$F.prototype,"expressionInfos",void 0),e$2a([d$25({type:[c$2N]})],M$F.prototype,"fieldInfos",void 0),e$2a([r$1C("fieldInfos")],M$F.prototype,"writeFieldInfos",null),e$2a([d$25({type:a$2i})],M$F.prototype,"layerOptions",void 0),e$2a([r$1C("layerOptions")],M$F.prototype,"writeLayerOptions",null),e$2a([d$25({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],M$F.prototype,"lastEditInfoEnabled",void 0),e$2a([d$25()],M$F.prototype,"outFields",void 0),e$2a([d$25()],M$F.prototype,"overwriteActions",void 0),e$2a([d$25()],M$F.prototype,"returnGeometry",void 0),e$2a([d$25({json:{type:String}})],M$F.prototype,"title",void 0),e$2a([r$1C("title")],M$F.prototype,"writeTitle",null),e$2a([d$25({type:l$20,json:{write:!0}})],M$F.prototype,"relatedRecordsInfo",void 0),M$F=S$F=e$2a([n$2L(R$s)],M$F);const B$m=M$F,p$2R=new s$1_({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let c$2E=0,m$1K=class extends l$2v{constructor(_t){super(_t),this.id="sym"+c$2E++,this.type=null,this.color=new l$2f([0,0,0,1])}readColor(_t){return _t&&_t[0]!=null?[_t[0],_t[1],_t[2],_t[3]/255]:_t}async collectRequiredFields(_t,Tt){}hash(){return JSON.stringify(this.toJSON())}clone(){}};e$2a([d$25({type:p$2R.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:p$2R.write}}})],m$1K.prototype,"type",void 0),e$2a([d$25({type:l$2f,json:{write:{allowNull:!0}}})],m$1K.prototype,"color",void 0),e$2a([o$1U("color")],m$1K.prototype,"readColor",null),m$1K=e$2a([n$2L("esri.symbols.Symbol")],m$1K);const a$2f=m$1K;var m$1J;let l$1$=m$1J=class extends a$2f{constructor(_t){super(_t),this.data=null,this.type="cim"}readData(_t,Tt){return Tt}writeData(_t,Tt){if(_t)for(const Mt in _t)Tt[Mt]=_t[Mt]}async collectRequiredFields(_t,Tt){if(this.data.type==="CIMSymbolReference"){const Mt=this.data.primitiveOverrides;if(Mt){const Pt=Mt.map(Ft=>{const Dt=Ft.valueExpressionInfo;return b$11(_t,Tt,Dt.expression)});await Promise.all(Pt)}}}clone(){return new m$1J({data:m$2e(this.data)})}hash(){return c$3m(JSON.stringify(this.data)).toString()}};e$2a([d$25({json:{write:!1}})],l$1$.prototype,"color",void 0),e$2a([d$25({json:{write:!0}})],l$1$.prototype,"data",void 0),e$2a([o$1U("data",["symbol"])],l$1$.prototype,"readData",null),e$2a([r$1C("data",{})],l$1$.prototype,"writeData",null),e$2a([r$1r({CIMSymbolReference:"cim"},{readOnly:!0})],l$1$.prototype,"type",void 0),l$1$=m$1J=e$2a([n$2L("esri.symbols.CIMSymbol")],l$1$);const d$1H=l$1$;let p$2Q=class extends l$2v{constructor(_t){super(_t),this.enabled=!0,this.type=null}writeEnabled(_t,Tt,Mt){_t||(Tt[Mt]=_t)}};e$2a([d$25({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],p$2Q.prototype,"enabled",void 0),e$2a([r$1C("enabled")],p$2Q.prototype,"writeEnabled",null),e$2a([d$25({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],p$2Q.prototype,"type",void 0),p$2Q=e$2a([n$2L("esri.symbols.Symbol3DLayer")],p$2Q);const a$2e=p$2Q,n$2l=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,t$1B="screenUtils.toPt: input not recognized!",r$1g=96;function u$1E(_t){return _t?_t/72*r$1g:0}function e$1y(_t){return _t?72*_t/r$1g:0}function o$1v(_t){if(typeof _t=="string"){const Tt=_t.match(n$2l);if(Tt){const Mt=Number(Tt[1]),Pt=Tt[3]&&Tt[3].toLowerCase(),Ft=_t.charAt(0)==="-",Dt=Pt==="px"?e$1y(Mt):Mt;return Ft?-Dt:Dt}return console.warn(t$1B),null}return _t}function c$2D(_t=0,Tt=0){return{x:_t,y:Tt}}function i$24(_t=0,Tt=0){return[_t,Tt]}function x$H(_t=0,Tt=0,Mt=0){return[_t,Tt,Mt]}function y$1n(_t){return _t}function p$2P(_t){return _t}function l$1_(_t){return _t}function d$1G(_t,Tt){return Tt?(Tt[0]=_t.x,Tt[1]=_t.y,Tt.length>2&&(Tt[2]=0),Tt):[_t.x,_t.y]}function s$1G(_t,Tt){const Mt=Tt.transparency!=null?r$1q(Tt.transparency):1,Pt=Tt.color;return Pt&&Array.isArray(Pt)?new l$2f([Pt[0]||0,Pt[1]||0,Pt[2]||0,Mt]):null}function c$2C(_t,Tt){Tt.color=_t.toJSON().slice(0,3);const Mt=n$2v(_t.a);Mt!==0&&(Tt.transparency=Mt)}const p$2O={type:l$2f,json:{type:[S$Q],default:null,read:{source:["color","transparency"],reader:s$1G},write:{target:{color:{type:[S$Q]},transparency:{type:S$Q}},writer:c$2C}}},a$2d={type:Number,cast:o$1v,json:{write:!0}};let l$1Z=class extends l$2v{constructor(_t){super(_t),this.color=new l$2f([0,0,0,1]),this.extensionLength=0,this.size=e$1y(1)}clone(){}cloneProperties(){return{color:m$2e(this.color),size:this.size,extensionLength:this.extensionLength}}};e$2a([d$25({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],l$1Z.prototype,"type",void 0),e$2a([d$25(p$2O)],l$1Z.prototype,"color",void 0),e$2a([d$25({...a$2d,json:{write:{overridePolicy:_t=>({enabled:!!_t})}}})],l$1Z.prototype,"extensionLength",void 0),e$2a([d$25(a$2d)],l$1Z.prototype,"size",void 0),l$1Z=e$2a([n$2L("esri.symbols.edges.Edges3D")],l$1Z);const m$1I=l$1Z;var t$1A;let c$2B=t$1A=class extends m$1I{constructor(_t){super(_t),this.type="sketch"}clone(){return new t$1A(this.cloneProperties())}};e$2a([r$1r({sketch:"sketch"},{readOnly:!0})],c$2B.prototype,"type",void 0),c$2B=t$1A=e$2a([n$2L("esri.symbols.edges.SketchEdges3D")],c$2B);const p$2N=c$2B;var t$1z;let p$2M=t$1z=class extends m$1I{constructor(_t){super(_t),this.type="solid"}clone(){return new t$1z(this.cloneProperties())}};e$2a([r$1r({solid:"solid"},{readOnly:!0})],p$2M.prototype,"type",void 0),p$2M=t$1z=e$2a([n$2L("esri.symbols.support.SolidEdges3D")],p$2M);const c$2A=p$2M,t$1y={types:{key:"type",base:m$1I,typeMap:{solid:c$2A,sketch:p$2N}},json:{write:!0}};var p$2L;let l$1Y=p$2L=class extends l$2v{constructor(_t){super(_t),this.color=null}clone(){const _t={color:r$1P(this.color)?this.color.clone():null};return new p$2L(_t)}};e$2a([d$25(p$2O)],l$1Y.prototype,"color",void 0),l$1Y=p$2L=e$2a([n$2L("esri.symbols.support.Symbol3DMaterial")],l$1Y);var l$1X;let c$2z=l$1X=class extends a$2e{constructor(_t){super(_t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new l$1X({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:r$1P(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};e$2a([r$1r({Extrude:"extrude"},{readOnly:!0})],c$2z.prototype,"type",void 0),e$2a([d$25({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],c$2z.prototype,"size",void 0),e$2a([d$25({type:l$1Y,json:{write:!0}})],c$2z.prototype,"material",void 0),e$2a([d$25({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c$2z.prototype,"castShadows",void 0),e$2a([d$25(t$1y)],c$2z.prototype,"edges",void 0),c$2z=l$1X=e$2a([n$2L("esri.symbols.ExtrudeSymbol3DLayer")],c$2z);const m$1H=c$2z;let i$23=class extends a$2f{constructor(_t){super(_t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};e$2a([r$1r({esriSLS:"simple-line"},{readOnly:!0})],i$23.prototype,"type",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],i$23.prototype,"width",void 0),i$23=e$2a([n$2L("esri.symbols.LineSymbol")],i$23);const c$2y=i$23,e$1x=["begin","end","begin-end"],n$2k=["arrow","circle","square","diamond","cross","x"];var n$2j;let m$1G=n$2j=class extends l$2v{constructor(_t){super(_t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(_t,Tt,Mt,Pt){Tt[Mt]=(Pt==null?void 0:Pt.origin)==="web-map"?"arrow":_t}set color(_t){this._set("color",_t)}readColor(_t){return _t&&_t[0]!=null?[_t[0],_t[1],_t[2],_t[3]/255]:_t}writeColor(_t,Tt,Mt,Pt){(Pt==null?void 0:Pt.origin)==="web-map"||(Tt[Mt]=_t)}clone(){return new n$2j({color:m$2e(this.color),placement:this.placement,style:this.style})}hash(){var _t;return`${this.placement}.${(_t=this.color)==null?void 0:_t.hash()}.${this.style}`}};e$2a([d$25({type:["begin","end","begin-end"],json:{write:!0}})],m$1G.prototype,"placement",void 0),e$2a([r$1r({"line-marker":"line-marker"},{readOnly:!0}),d$25({json:{origins:{"web-map":{write:!1}}}})],m$1G.prototype,"type",void 0),e$2a([d$25({type:n$2k})],m$1G.prototype,"style",void 0),e$2a([r$1C("style")],m$1G.prototype,"writeStyle",null),e$2a([d$25({type:l$2f,value:null,json:{write:{allowNull:!0}}})],m$1G.prototype,"color",null),e$2a([o$1U("color")],m$1G.prototype,"readColor",null),e$2a([r$1C("color")],m$1G.prototype,"writeColor",null),m$1G=n$2j=e$2a([n$2L("esri.symbols.LineSymbolMarker")],m$1G);const u$1D=m$1G;var p$2K;const h$1m=new s$1_({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let d$1F=p$2K=class extends c$2y{constructor(..._t){super(..._t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(_t,Tt,Mt,Pt,Ft,Dt){if(_t&&typeof _t!="string")return _t;const Nt={};return _t!=null&&(Nt.style=_t),Tt!=null&&(Nt.color=Tt),Mt!=null&&(Nt.width=o$1v(Mt)),Pt!=null&&(Nt.cap=Pt),Ft!=null&&(Nt.join=Ft),Dt!=null&&(Nt.miterLimit=o$1v(Dt)),Nt}clone(){var _t;return new p$2K({color:m$2e(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(_t=this.marker)==null?void 0:_t.clone()})}hash(){var _t,Tt;return`${super.hash()}.${(_t=this.color)==null?void 0:_t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(Tt=this.marker)==null?void 0:Tt.hash()}`}};e$2a([r$1r({esriSLS:"simple-line"},{readOnly:!0})],d$1F.prototype,"type",void 0),e$2a([d$25({type:h$1m.apiValues,json:{read:h$1m.read,write:h$1m.write}})],d$1F.prototype,"style",void 0),e$2a([d$25({type:["butt","round","square"],json:{write:{overridePolicy:(_t,Tt,Mt)=>({enabled:_t!=="round"&&(Mt==null||Mt.origin==null)})}}})],d$1F.prototype,"cap",void 0),e$2a([d$25({type:["miter","round","bevel"],json:{write:{overridePolicy:(_t,Tt,Mt)=>({enabled:_t!=="round"&&(Mt==null||Mt.origin==null)})}}})],d$1F.prototype,"join",void 0),e$2a([d$25({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":u$1D}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],d$1F.prototype,"marker",void 0),e$2a([d$25({type:Number,json:{read:!1,write:!1}})],d$1F.prototype,"miterLimit",void 0),d$1F=p$2K=e$2a([n$2L("esri.symbols.SimpleLineSymbol")],d$1F);const m$1F=d$1F,SimpleLineSymbol=Object.freeze(Object.defineProperty({__proto__:null,default:m$1F},Symbol.toStringTag,{value:"Module"}));let l$1W=class extends a$2f{constructor(_t){super(_t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};e$2a([d$25({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":m$1F}},json:{default:null,write:!0}})],l$1W.prototype,"outline",void 0),e$2a([d$25({type:["simple-fill","picture-fill"],readOnly:!0})],l$1W.prototype,"type",void 0),l$1W=e$2a([n$2L("esri.symbols.FillSymbol")],l$1W);const p$2J=l$1W;let t$1x=class extends l$2v{constructor(_t){super(_t)}clone(){}};e$2a([d$25({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],t$1x.prototype,"type",void 0),t$1x=e$2a([n$2L("esri.symbols.patterns.LinePattern3D")],t$1x);const p$2I=t$1x,o$1u=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var p$2H;const h$1l=o$1O()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let c$2x=p$2H=class extends p$2I{constructor(_t){super(_t),this.type="style",this.style="solid"}clone(){const _t={style:this.style};return new p$2H(_t)}};e$2a([d$25({type:["style"]})],c$2x.prototype,"type",void 0),e$2a([r$1r(h$1l),d$25({type:o$1u})],c$2x.prototype,"style",void 0),c$2x=p$2H=e$2a([n$2L("esri.symbols.patterns.LineStylePattern3D")],c$2x);const l$1V=c$2x;let t$1w=class extends l$2v{constructor(_t){super(_t)}clone(){}};e$2a([d$25({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],t$1w.prototype,"type",void 0),t$1w=e$2a([n$2L("esri.symbols.patterns.Pattern3D")],t$1w);const p$2G=t$1w,a$2c=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var p$2F;let c$2w=p$2F=class extends p$2G{constructor(_t){super(_t),this.type="style",this.style="solid"}clone(){const _t={style:this.style};return new p$2F(_t)}};e$2a([d$25({type:["style"]})],c$2w.prototype,"type",void 0),e$2a([d$25({type:a$2c,json:{read:!0,write:!0}})],c$2w.prototype,"style",void 0),c$2w=p$2F=e$2a([n$2L("esri.symbols.patterns.StylePattern3D")],c$2w);const a$2b=c$2w,s$1F={types:{key:"type",base:p$2G,typeMap:{style:a$2b}},json:{write:!0}},o$1t={types:{key:"type",base:p$2I,typeMap:{style:l$1V}},json:{write:!0}},o$1s=new l$2f("white");new l$2f("black");const e$1w=new l$2f([255,255,255,0]);function t$1v(_t){return _t.r===0&&_t.g===0&&_t.b===0}var c$2v;let l$1U=c$2v=class extends l$1Y{constructor(_t){super(_t),this.colorMixMode=null}clone(){const _t={color:r$1P(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new c$2v(_t)}};e$2a([r$1r({multiply:"multiply",replace:"replace",tint:"tint"})],l$1U.prototype,"colorMixMode",void 0),l$1U=c$2v=e$2a([n$2L("esri.symbols.support.Symbol3DFillMaterial")],l$1U);function i$22(_t){return _t}function u$1C(_t=L$p){return[_t[0],_t[1],_t[2],_t[3]]}function e$1v(_t){return[_t[0],_t[1],_t[2],_t[3]]}function a$2a(_t,Tt){return _t!==Tt&&(_t[0]=Tt[0],_t[1]=Tt[1],_t[2]=Tt[2],_t[3]=Tt[3]),_t}function o$1r(_t,Tt,Mt,Pt,Ft=u$1C()){return Ft[0]=_t,Ft[1]=Tt,Ft[2]=Mt,Ft[3]=Pt,Ft}function c$2u(_t,Tt=u$1C()){return Tt[0]=_t.xmin,Tt[1]=_t.ymin,Tt[2]=_t.xmax,Tt[3]=_t.ymax,Tt}function f$1h(_t,Tt){return new M$K({xmin:_t[0],ymin:_t[1],xmax:_t[2],ymax:_t[3],spatialReference:Tt})}function m$1E(_t,Tt){Tt[0]<_t[0]&&(_t[0]=Tt[0]),Tt[0]>_t[2]&&(_t[2]=Tt[0]),Tt[1]<_t[1]&&(_t[1]=Tt[1]),Tt[1]>_t[3]&&(_t[3]=Tt[1])}function h$1k(_t,Tt,Mt){if(t$2e(Tt))a$2a(Mt,_t);else if("length"in Tt)G$i(Tt)?(Mt[0]=Math.min(_t[0],Tt[0]),Mt[1]=Math.min(_t[1],Tt[1]),Mt[2]=Math.max(_t[2],Tt[2]),Mt[3]=Math.max(_t[3],Tt[3])):Tt.length!==2&&Tt.length!==3||(Mt[0]=Math.min(_t[0],Tt[0]),Mt[1]=Math.min(_t[1],Tt[1]),Mt[2]=Math.max(_t[2],Tt[0]),Mt[3]=Math.max(_t[3],Tt[1]));else switch(Tt.type){case"extent":Mt[0]=Math.min(_t[0],Tt.xmin),Mt[1]=Math.min(_t[1],Tt.ymin),Mt[2]=Math.max(_t[2],Tt.xmax),Mt[3]=Math.max(_t[3],Tt.ymax);break;case"point":Mt[0]=Math.min(_t[0],Tt.x),Mt[1]=Math.min(_t[1],Tt.y),Mt[2]=Math.max(_t[2],Tt.x),Mt[3]=Math.max(_t[3],Tt.y)}}function x$G(_t,Tt,Mt=_t){const Pt=Tt.length;let Ft=_t[0],Dt=_t[1],Nt=_t[2],Vt=_t[3];for(let zt=0;zt<Pt;zt++){const Xt=Tt[zt];Ft=Math.min(Ft,Xt[0]),Dt=Math.min(Dt,Xt[1]),Nt=Math.max(Nt,Xt[0]),Vt=Math.max(Vt,Xt[1])}return Mt[0]=Ft,Mt[1]=Dt,Mt[2]=Nt,Mt[3]=Vt,Mt}function M$E(_t){for(let Tt=0;Tt<4;Tt++)if(!isFinite(_t[Tt]))return!1;return!0}function s$1E(_t){return t$2e(_t)||_t[0]>=_t[2]?0:_t[2]-_t[0]}function l$1T(_t){return _t[1]>=_t[3]?0:_t[3]-_t[1]}function y$1m(_t){return s$1E(_t)*l$1T(_t)}function p$2E(_t,Tt=[0,0]){return Tt[0]=(_t[0]+_t[2])/2,Tt[1]=(_t[1]+_t[3])/2,Tt}function b$$(_t,Tt){return w$U(_t,Tt[0],Tt[1])}function F$s(_t,Tt){return w$U(_t,Tt.x,Tt.y)}function w$U(_t,Tt,Mt){return Tt>=_t[0]&&Mt>=_t[1]&&Tt<=_t[2]&&Mt<=_t[3]}function q$i(_t,Tt,Mt){return Tt[0]>=_t[0]-Mt&&Tt[1]>=_t[1]-Mt&&Tt[0]<=_t[2]+Mt&&Tt[1]<=_t[3]+Mt}function E$C(_t,Tt){return Math.max(Tt[0],_t[0])<=Math.min(Tt[2],_t[2])&&Math.max(Tt[1],_t[1])<=Math.min(Tt[3],_t[3])}function R$r(_t,Tt){return Tt[0]>=_t[0]&&Tt[2]<=_t[2]&&Tt[1]>=_t[1]&&Tt[3]<=_t[3]}function z$s(_t,Tt,Mt,Pt=_t){return Pt[0]=_t[0]+Tt,Pt[1]=_t[1]+Mt,Pt[2]=_t[2]+Tt,Pt[3]=_t[3]+Mt,Pt}function D$s(_t){return _t?a$2a(_t,K$b):u$1C(K$b)}function G$i(_t){return _t!=null&&_t.length===4}const K$b=[1/0,1/0,-1/0,-1/0],L$p=[0,0,0,0];function i$21(_t){return _t}function a$29(_t=H$f){return[_t[0],_t[1],_t[2],_t[3],_t[4],_t[5]]}function u$1B(_t,Tt,Mt,Pt,Ft,Dt,Nt=a$29()){return Nt[0]=_t,Nt[1]=Tt,Nt[2]=Mt,Nt[3]=Pt,Nt[4]=Ft,Nt[5]=Dt,Nt}function m$1D(_t,Tt){const Mt=isFinite(_t[2])||isFinite(_t[5]);return new M$K(Mt?{xmin:_t[0],xmax:_t[3],ymin:_t[1],ymax:_t[4],zmin:_t[2],zmax:_t[5],spatialReference:Tt}:{xmin:_t[0],xmax:_t[3],ymin:_t[1],ymax:_t[4],spatialReference:Tt})}function f$1g(_t,Tt){_t[0]=Math.min(_t[0],Tt[0]),_t[1]=Math.min(_t[1],Tt[1]),_t[2]=Math.min(_t[2],Tt[2]),_t[3]=Math.max(_t[3],Tt[3]),_t[4]=Math.max(_t[4],Tt[4]),_t[5]=Math.max(_t[5],Tt[5])}function c$2t(_t,Tt){_t[0]=Math.min(_t[0],Tt[0]),_t[1]=Math.min(_t[1],Tt[1]),_t[3]=Math.max(_t[3],Tt[2]),_t[4]=Math.max(_t[4],Tt[3])}function h$1j(_t,Tt){_t[0]=Math.min(_t[0],Tt[0]),_t[1]=Math.min(_t[1],Tt[1]),_t[2]=Math.min(_t[2],Tt[2]),_t[3]=Math.max(_t[3],Tt[0]),_t[4]=Math.max(_t[4],Tt[1]),_t[5]=Math.max(_t[5],Tt[2])}function M$D(_t,Tt,Mt=0,Pt=Tt.length/3){let Ft=_t[0],Dt=_t[1],Nt=_t[2],Vt=_t[3],zt=_t[4],Xt=_t[5];for(let Ht=0;Ht<Pt;Ht++)Ft=Math.min(Ft,Tt[Mt+3*Ht]),Dt=Math.min(Dt,Tt[Mt+3*Ht+1]),Nt=Math.min(Nt,Tt[Mt+3*Ht+2]),Vt=Math.max(Vt,Tt[Mt+3*Ht]),zt=Math.max(zt,Tt[Mt+3*Ht+1]),Xt=Math.max(Xt,Tt[Mt+3*Ht+2]);_t[0]=Ft,_t[1]=Dt,_t[2]=Nt,_t[3]=Vt,_t[4]=zt,_t[5]=Xt}function s$1D(_t,Tt,Mt){const Pt=Tt.length;let Ft=_t[0],Dt=_t[1],Nt=_t[2],Vt=_t[3],zt=_t[4],Xt=_t[5];if(Mt)for(let Ht=0;Ht<Pt;Ht++){const Wt=Tt[Ht];Ft=Math.min(Ft,Wt[0]),Dt=Math.min(Dt,Wt[1]),Nt=Math.min(Nt,Wt[2]),Vt=Math.max(Vt,Wt[0]),zt=Math.max(zt,Wt[1]),Xt=Math.max(Xt,Wt[2])}else for(let Ht=0;Ht<Pt;Ht++){const Wt=Tt[Ht];Ft=Math.min(Ft,Wt[0]),Dt=Math.min(Dt,Wt[1]),Vt=Math.max(Vt,Wt[0]),zt=Math.max(zt,Wt[1])}_t[0]=Ft,_t[1]=Dt,_t[2]=Nt,_t[3]=Vt,_t[4]=zt,_t[5]=Xt}function l$1S(_t){for(let Tt=0;Tt<6;Tt++)if(!isFinite(_t[Tt]))return!1;return!0}function I$w(_t){return _t[0]>=_t[3]?0:_t[3]-_t[0]}function y$1l(_t){return _t[1]>=_t[4]?0:_t[4]-_t[1]}function N$p(_t){return _t[2]>=_t[5]?0:_t[5]-_t[2]}function g$14(_t){const Tt=I$w(_t),Mt=N$p(_t),Pt=y$1l(_t);return Math.sqrt(Tt*Tt+Mt*Mt+Pt*Pt)}function p$2D(_t,Tt=[0,0,0]){return Tt[0]=_t[0]+I$w(_t)/2,Tt[1]=_t[1]+y$1l(_t)/2,Tt[2]=_t[2]+N$p(_t)/2,Tt}function F$r(_t,Tt=[0,0,0]){return Tt[0]=I$w(_t),Tt[1]=y$1l(_t),Tt[2]=N$p(_t),Tt}function z$r(_t){return Math.max(I$w(_t),N$p(_t),y$1l(_t))}function E$B(_t,Tt){return Tt[0]>=_t[0]&&Tt[1]>=_t[1]&&Tt[2]>=_t[2]&&Tt[0]<=_t[3]&&Tt[1]<=_t[4]&&Tt[2]<=_t[5]}function j$Q(_t,Tt){return Math.max(Tt[0],_t[0])<=Math.min(Tt[3],_t[3])&&Math.max(Tt[1],_t[1])<=Math.min(Tt[4],_t[4])&&Math.max(Tt[2],_t[2])<=Math.min(Tt[5],_t[5])}function R$q(_t,Tt){return!!t$2e(Tt)||j$Q(_t,Tt)}function V$l(_t,Tt,Mt,Pt,Ft=_t){return Ft[0]=_t[0]+Tt,Ft[1]=_t[1]+Mt,Ft[2]=_t[2]+Pt,Ft[3]=_t[3]+Tt,Ft[4]=_t[4]+Mt,Ft[5]=_t[5]+Pt,Ft}function Y$9(_t,Tt,Mt=_t){const Pt=_t[0]+I$w(_t)/2,Ft=_t[1]+y$1l(_t)/2,Dt=_t[2]+N$p(_t)/2;return Mt[0]=Pt+(_t[0]-Pt)*Tt,Mt[1]=Ft+(_t[1]-Ft)*Tt,Mt[2]=Dt+(_t[2]-Dt)*Tt,Mt[3]=Pt+(_t[3]-Pt)*Tt,Mt[4]=Ft+(_t[4]-Ft)*Tt,Mt[5]=Dt+(_t[5]-Dt)*Tt,Mt}function _$r(_t,Tt){return Tt[0]=_t[0],Tt[1]=_t[1],Tt[2]=_t[2],Tt}function q$h(_t,Tt,Mt=_t){return Mt[0]=Tt[0],Mt[1]=Tt[1],Mt[2]=Tt[2],Mt!==_t&&(Mt[3]=_t[3],Mt[4]=_t[4],Mt[5]=_t[5]),Mt}function w$T(_t,Tt,Mt=_t){return Mt[3]=Tt[0],Mt[4]=Tt[1],Mt[5]=Tt[2],Mt!==_t&&(Mt[0]=_t[0],Mt[1]=_t[1],Mt[2]=_t[2]),_t}function A$q(_t,Tt){return _t[0]=Tt[0],_t[1]=Tt[1],_t[2]=Tt[2],_t[3]=Tt[3],_t[4]=Tt[4],_t[5]=Tt[5],_t}function B$l(_t){return _t?A$q(_t,D$r):a$29(D$r)}function G$h(_t,Tt){return Tt||(Tt=u$1C()),Tt[0]=_t[0],Tt[1]=_t[1],Tt[2]=_t[3],Tt[3]=_t[4],Tt}function O$q(_t,Tt){return _t[0]=Tt[0],_t[1]=Tt[1],_t[2]=Number.NEGATIVE_INFINITY,_t[3]=Tt[2],_t[4]=Tt[3],_t[5]=Number.POSITIVE_INFINITY,_t}function P$n(_t){return _t.length===6}function S$E(_t){return I$w(_t)===0&&y$1l(_t)===0&&N$p(_t)===0}function k$t(_t,Tt,Mt){if(t$2e(_t)||t$2e(Tt))return _t===Tt;if(!P$n(_t)||!P$n(Tt))return!1;if(Mt){for(let Pt=0;Pt<_t.length;Pt++)if(!Mt(_t[Pt],Tt[Pt]))return!1}else for(let Pt=0;Pt<_t.length;Pt++)if(_t[Pt]!==Tt[Pt])return!1;return!0}const D$r=[1/0,1/0,1/0,-1/0,-1/0,-1/0],H$f=[0,0,0,0,0,0];a$29();function t$1u(_t,{isPrimitive:Tt,width:Mt,depth:Pt,height:Ft}){const Dt=Tt?10:1;if(Mt==null&&Ft==null&&Pt==null)return[Dt*_t[0],Dt*_t[1],Dt*_t[2]];const Nt=r$1v(Mt,Pt,Ft);let Vt;for(let zt=0;zt<3;zt++){const Xt=Nt[zt];if(Xt!=null){Vt=Xt/_t[zt];break}}for(let zt=0;zt<3;zt++)Nt[zt]==null&&(Nt[zt]=_t[zt]*Vt);return Nt}const n$2i=u$1B(-.5,-.5,-.5,.5,.5,.5),o$1q=u$1B(-.5,-.5,0,.5,.5,1),s$1C=u$1B(-.5,-.5,0,.5,.5,.5);function c$2s(_t){switch(_t){case"sphere":case"cube":case"diamond":return n$2i;case"cylinder":case"cone":case"inverted-cone":return o$1q;case"tetrahedron":return s$1C;default:return}}const u$1A=["butt","square","round"],i$20=[...u$1A,"none"],a$28=["miter","bevel","round"];var m$1C;let u$1z=m$1C=class extends l$2v{constructor(_t){super(_t),this.color=new l$2f([0,0,0,1]),this.size=e$1y(1),this.pattern=null,this.patternCap="butt"}clone(){const _t={color:r$1P(this.color)?this.color.clone():null,size:this.size,pattern:r$1P(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new m$1C(_t)}};e$2a([d$25(p$2O)],u$1z.prototype,"color",void 0),e$2a([d$25(a$2d)],u$1z.prototype,"size",void 0),e$2a([d$25(o$1t)],u$1z.prototype,"pattern",void 0),e$2a([d$25({type:u$1A,json:{default:"butt",write:{overridePolicy(){return{enabled:r$1P(this.pattern)}}}}})],u$1z.prototype,"patternCap",void 0),u$1z=m$1C=e$2a([n$2L("esri.symbols.support.Symbol3DOutline")],u$1z);var d$1E;let h$1i=d$1E=class extends a$2e{constructor(_t){super(_t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const _t={edges:r$1P(this.edges)?this.edges.clone():null,enabled:this.enabled,material:r$1P(this.material)?this.material.clone():null,pattern:r$1P(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:r$1P(this.outline)?this.outline.clone():null};return new d$1E(_t)}static fromSimpleFillSymbol(_t){var Pt,Ft,Dt,Nt,Vt,zt;const Tt=_t.outline&&_t.outline.style&&_t.outline.style!=="inside-frame"&&_t.outline.style!=="solid"?new l$1V({style:_t.outline.style}):null,Mt={size:(Ft=(Pt=_t.outline)==null?void 0:Pt.width)!=null?Ft:0,color:((Nt=(Dt=_t.outline)==null?void 0:Dt.color)!=null?Nt:o$1s).clone(),pattern:Tt};return Tt&&((Vt=_t.outline)==null?void 0:Vt.cap)&&(Mt.patternCap=_t.outline.cap),new d$1E({material:new l$1U({color:((zt=_t.color)!=null?zt:e$1w).clone()}),pattern:_t.style&&_t.style!=="solid"?new a$2b({style:_t.style}):null,outline:Mt})}};e$2a([r$1r({Fill:"fill"},{readOnly:!0})],h$1i.prototype,"type",void 0),e$2a([d$25({type:l$1U,json:{write:!0}})],h$1i.prototype,"material",void 0),e$2a([d$25(s$1F)],h$1i.prototype,"pattern",void 0),e$2a([d$25({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],h$1i.prototype,"castShadows",void 0),e$2a([d$25({type:u$1z,json:{write:!0}})],h$1i.prototype,"outline",void 0),e$2a([d$25(t$1y)],h$1i.prototype,"edges",void 0),h$1i=d$1E=e$2a([n$2L("esri.symbols.FillSymbol3DLayer")],h$1i);const f$1f=h$1i,l$1R=["none","underline","line-through"],t$1t=["normal","italic","oblique"],r$1f=["normal","lighter","bold","bolder"],n$2h={type:Number,cast:_t=>{const Tt=a$2Z(_t);return Tt===0?1:o$1H(Tt,.1,4)},nonNullable:!0},i$1$=["left","right","center"],a$27=["baseline","top","middle","bottom"],m$1B={type:i$1$,nonNullable:!0},p$2C={type:a$27,nonNullable:!0};var n$2g;let l$1Q=n$2g=class extends l$2v{constructor(_t){super(_t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(_t){return o$1v(_t)}clone(){return new n$2g({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};e$2a([d$25({type:l$1R,json:{default:"none",write:!0}})],l$1Q.prototype,"decoration",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$1Q.prototype,"family",void 0),e$2a([d$25({type:Number,json:{write:{overridePolicy:(_t,Tt,Mt)=>({enabled:!Mt||!Mt.textSymbol3D})}}})],l$1Q.prototype,"size",void 0),e$2a([s$23("size")],l$1Q.prototype,"castSize",null),e$2a([d$25({type:t$1t,json:{default:"normal",write:!0}})],l$1Q.prototype,"style",void 0),e$2a([d$25({type:r$1f,json:{default:"normal",write:!0}})],l$1Q.prototype,"weight",void 0),l$1Q=n$2g=e$2a([n$2L("esri.symbols.Font")],l$1Q);const m$1A=l$1Q;function i$1_(_t,Tt){const Mt=Tt&&Tt.url&&Tt.url.path;if(_t&&Mt&&(_t=Q$e(_t,Mt,{preserveProtocolRelative:!0}),Tt.portalItem&&Tt.readResourcePaths)){const Pt=_$A(_t,Tt.portalItem.itemUrl);v$T.test(Pt)&&Tt.readResourcePaths.push(Tt.portalItem.resourceFromPath(Pt).path)}return y$1k(_t,Tt&&Tt.portal)}function c$2r(_t,Tt,Mt=I$v.YES){if(!_t)return _t;!K$f(_t)&&Tt&&Tt.blockedRelativeUrls&&Tt.blockedRelativeUrls.push(_t);let Pt=Q$e(_t);if(Tt){const Ft=Tt.verifyItemRelativeUrls&&Tt.verifyItemRelativeUrls.rootPath||Tt.url&&Tt.url.path;if(Ft){const Dt=y$1k(Ft,Tt.portal);Pt=_$A(y$1k(Pt,Tt.portal),Dt,Dt),Pt!==_t&&Tt.verifyItemRelativeUrls&&Tt.verifyItemRelativeUrls.writtenUrls.push(Pt)}}return Pt=U$q(Pt,Tt&&Tt.portal),K$f(Pt)&&(Pt=F$x(Pt)),(Tt==null?void 0:Tt.resources)&&(Tt==null?void 0:Tt.portalItem)&&!K$f(Pt)&&!X$c(Pt)&&Mt===I$v.YES&&Tt.resources.toKeep.push({resource:Tt.portalItem.resourceFromPath(Pt)}),Pt}function m$1z(_t,Tt,Mt){return i$1_(_t,Mt)}function p$2B(_t,Tt,Mt,Pt){const Ft=c$2r(_t,Pt);Ft!==void 0&&(Tt[Mt]=Ft)}const f$1e=/\/items\/([^\/]+)\/resources\//,v$T=/^\.\/resources\//;function h$1h(_t){const Tt=r$1P(_t)?_t.match(f$1e):null;return r$1P(Tt)?Tt[1]:null}function U$q(_t,Tt){return Tt&&!Tt.isPortal&&Tt.urlKey&&Tt.customBaseUrl?vt(_t,`${Tt.urlKey}.${Tt.customBaseUrl}`,Tt.portalHostname):_t}function y$1k(_t,Tt){if(!Tt||Tt.isPortal||!Tt.urlKey||!Tt.customBaseUrl)return _t;const Mt=`${Tt.urlKey}.${Tt.customBaseUrl}`,Pt=b$19();return z$z(Pt,`${Pt.scheme}://${Mt}`)?vt(_t,Tt.portalHostname,Mt):vt(_t,Mt,Tt.portalHostname)}var I$v;(function(_t){_t[_t.YES=0]="YES",_t[_t.NO=1]="NO"})(I$v||(I$v={}));const R$p=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:i$1_,toJSON:c$2r,read:m$1z,write:p$2B,itemIdFromResourceUrl:h$1h,ensureMainOnlineDomain:U$q,get MarkKeep(){return I$v}},Symbol.toStringTag,{value:"Module"}));var l$1P;const d$1D=o$1O()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let h$1g=l$1P=class extends l$2v{constructor(_t){super(_t)}readHref(_t,Tt,Mt){return _t?i$1_(_t,Mt):Tt.dataURI}writeHref(_t,Tt,Mt,Pt){_t&&(X$c(_t)?Tt.dataURI=_t:(Tt.href=c$2r(_t,Pt),K$f(Tt.href)&&(Tt.href=F$x(Tt.href))))}clone(){return new l$1P({href:this.href,primitive:this.primitive})}};e$2a([d$25({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],h$1g.prototype,"href",void 0),e$2a([o$1U("href")],h$1g.prototype,"readHref",null),e$2a([r$1C("href",{href:{type:String},dataURI:{type:String}})],h$1g.prototype,"writeHref",null),e$2a([r$1r(d$1D)],h$1g.prototype,"primitive",void 0),h$1g=l$1P=e$2a([n$2L("esri.symbols.support.IconSymbol3DLayerResource")],h$1g);const j$P="circle";var e$1u;let p$2A=e$1u=class extends y$1E{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new e$1u({x:this.x,y:this.y})}};e$2a([d$25({type:Number})],p$2A.prototype,"x",void 0),e$2a([d$25({type:Number})],p$2A.prototype,"y",void 0),p$2A=e$1u=e$2a([n$2L("esri.symbols.support.Symbol3DAnchorPosition2D")],p$2A);var l$1O;let a$26=l$1O=class extends l$2v{constructor(_t){super(_t),this.color=new l$2f([0,0,0,1]),this.size=e$1y(1)}clone(){const _t={color:r$1P(this.color)?this.color.clone():null,size:this.size};return new l$1O(_t)}};e$2a([d$25(p$2O)],a$26.prototype,"color",void 0),e$2a([d$25(a$2d)],a$26.prototype,"size",void 0),a$26=l$1O=e$2a([n$2L("esri.symbols.support.Symbol3DIconOutline")],a$26);var d$1C;const f$1d=s$2l.getLogger("esri.symbols.IconSymbol3DLayer");let b$_=d$1C=class extends a$2e{constructor(_t){super(_t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new d$1C({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:r$1P(this.material)?this.material.clone():null,outline:r$1P(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(_t){const Tt=_t.color||o$1s,Mt=j$O(_t),Pt=_t.outline&&_t.outline.width>0?{size:_t.outline.width,color:(_t.outline.color||o$1s).clone()}:null;return new d$1C({size:_t.size,resource:{primitive:w$S(_t.style)},material:{color:Tt},outline:Pt,anchor:Mt?"relative":void 0,anchorPosition:Mt})}static fromPictureMarkerSymbol(_t){const Tt=!_t.color||t$1v(_t.color)?o$1s:_t.color,Mt=j$O(_t);return new d$1C({size:_t.width<=_t.height?_t.height:_t.width,resource:{href:_t.url},material:{color:Tt.clone()},anchor:Mt?"relative":void 0,anchorPosition:Mt})}static fromCIMSymbol(_t){return new d$1C({resource:{href:et$1({mediaType:"application/json",data:JSON.stringify(_t.data)})}})}};function j$O(_t){const Tt="width"in _t?_t.width:_t.size,Mt="height"in _t?_t.height:_t.size,Pt=v$S(_t.xoffset),Ft=v$S(_t.yoffset);return(Pt||Ft)&&Tt&&Mt?{x:-Pt/Tt,y:Ft/Mt}:null}function v$S(_t){return isFinite(_t)?_t:0}e$2a([d$25({type:l$1Y,json:{write:!0}})],b$_.prototype,"material",void 0),e$2a([d$25({type:h$1g,json:{write:!0}})],b$_.prototype,"resource",void 0),e$2a([r$1r({Icon:"icon"},{readOnly:!0})],b$_.prototype,"type",void 0),e$2a([d$25(a$2d)],b$_.prototype,"size",void 0),e$2a([r$1r({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d$25({json:{default:"center"}})],b$_.prototype,"anchor",void 0),e$2a([d$25({type:p$2A,json:{type:[Number],read:{reader:_t=>new p$2A({x:_t[0],y:_t[1]})},write:{writer:(_t,Tt)=>{Tt.anchorPosition=[_t.x,_t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],b$_.prototype,"anchorPosition",void 0),e$2a([d$25({type:a$26,json:{write:!0}})],b$_.prototype,"outline",void 0),b$_=d$1C=e$2a([n$2L("esri.symbols.IconSymbol3DLayer")],b$_);const g$13={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function w$S(_t){return g$13[_t]||(f$1d.warn(`${_t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const S$D=b$_;s$2l.getLogger("esri.core.Clonable");const l$1N=_t=>{let Tt=class extends _t{clone(){var zt;const Mt=f$1Q(e$28(this),"unable to clone instance of non-accessor class"),Pt=Mt.metadatas,Ft=Mt.store,Dt={},Nt=new Map;for(const Xt in Pt){const Ht=Pt[Xt],Wt=Ft==null?void 0:Ft.originOf(Xt),Qt=Ht.clonable;if(Ht.readOnly||Qt===!1||Wt!==r$1K.USER&&Wt!==r$1K.DEFAULTS&&Wt!==r$1K.WEB_MAP&&Wt!==r$1K.WEB_SCENE)continue;const Zt=this[Xt];let Kt=null;Kt=typeof Qt=="function"?Qt(Zt):Qt==="reference"?Zt:b$1f(Zt),Zt!=null&&Kt==null||(Wt===r$1K.DEFAULTS?Nt.set(Xt,Kt):Dt[Xt]=Kt)}const Vt=new(Object.getPrototypeOf(this)).constructor(Dt);if(Nt.size){const Xt=(zt=e$28(Vt))==null?void 0:zt.store;if(Xt)for(const[Ht,Wt]of Nt)Xt.set(Ht,Wt,r$1K.DEFAULTS)}return Vt}};return Tt=e$2a([n$2L("esri.core.Clonable")],Tt),Tt};let a$25=class extends l$1N(y$1E){};a$25=e$2a([n$2L("esri.core.Clonable")],a$25);let n$2f=class extends l$1N(l$2v){constructor(_t){super(_t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(_t){return r$1P(_t)&&_t.placement===this.placement&&_t.style===this.style&&(t$2e(this.color)&&t$2e(_t.color)||r$1P(this.color)&&r$1P(_t.color)&&this.color.toJSON()===_t.color.toJSON())}};e$2a([d$25({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],n$2f.prototype,"type",void 0),e$2a([d$25({type:e$1x,json:{default:"begin-end",write:!0}})],n$2f.prototype,"placement",void 0),e$2a([d$25({type:n$2k,json:{default:"arrow",write:!0}})],n$2f.prototype,"style",void 0),e$2a([d$25({type:l$2f,json:{type:[S$Q],default:null,write:!0}})],n$2f.prototype,"color",void 0),n$2f=e$2a([n$2L("esri.symbols.LineStyleMarker3D")],n$2f);const y$1j=n$2f;var d$1B;let h$1f=d$1B=class extends a$2e{constructor(_t){super(_t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=e$1y(1),this.pattern=null,this.marker=null}clone(){const _t={enabled:this.enabled,material:r$1P(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:r$1P(this.pattern)?this.pattern.clone():null,marker:r$1P(this.marker)?this.marker.clone():null};return new d$1B(_t)}static fromSimpleLineSymbol(_t){var Mt,Pt,Ft;const Tt={enabled:!0,size:(Mt=_t.width)!=null?Mt:e$1y(1),cap:_t.cap||"butt",join:_t.join||"miter",pattern:_t.style&&_t.style!=="inside-frame"?new l$1V({style:_t.style}):null,material:new l$1Y({color:(_t.color||o$1s).clone()}),marker:_t.marker?new y$1j({placement:_t.marker.placement,style:_t.marker.style,color:(Ft=(Pt=_t.marker.color)==null?void 0:Pt.clone())!=null?Ft:null}):null};return new d$1B(Tt)}};e$2a([d$25({type:l$1Y,json:{write:!0}})],h$1f.prototype,"material",void 0),e$2a([r$1r({Line:"line"},{readOnly:!0})],h$1f.prototype,"type",void 0),e$2a([d$25({type:a$28,json:{write:!0,default:"miter"}})],h$1f.prototype,"join",void 0),e$2a([d$25({type:u$1A,json:{write:!0,default:"butt"}})],h$1f.prototype,"cap",void 0),e$2a([d$25(a$2d)],h$1f.prototype,"size",void 0),e$2a([d$25(o$1t)],h$1f.prototype,"pattern",void 0),e$2a([d$25({types:{key:"type",base:y$1j,typeMap:{style:y$1j}},json:{write:!0}})],h$1f.prototype,"marker",void 0),h$1f=d$1B=e$2a([n$2L("esri.symbols.LineSymbol3DLayer")],h$1f);const f$1c=h$1f;var n$2e;const a$24=o$1O()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let m$1y=n$2e=class extends l$2v{clone(){return new n$2e({href:this.href,primitive:this.primitive})}};e$2a([d$25({type:String,json:{read:m$1z,write:p$2B}})],m$1y.prototype,"href",void 0),e$2a([r$1r(a$24)],m$1y.prototype,"primitive",void 0),m$1y=n$2e=e$2a([n$2L("esri.symbols.support.ObjectSymbol3DLayerResource")],m$1y);const d$1A="sphere";var e$1t;let p$2z=e$1t=class extends y$1E{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new e$1t({x:this.x,y:this.y,z:this.z})}};e$2a([d$25({type:Number})],p$2z.prototype,"x",void 0),e$2a([d$25({type:Number})],p$2z.prototype,"y",void 0),e$2a([d$25({type:Number})],p$2z.prototype,"z",void 0),p$2z=e$1t=e$2a([n$2L("esri.symbols.support.Symbol3DAnchorPosition3D")],p$2z);var n$2d;let c$2q=n$2d=class extends a$2e{constructor(_t){super(_t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new n$2d({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:r$1P(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};e$2a([d$25({type:l$1Y,json:{write:!0}})],c$2q.prototype,"material",void 0),e$2a([d$25({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c$2q.prototype,"castShadows",void 0),e$2a([d$25({type:m$1y,json:{write:!0}})],c$2q.prototype,"resource",void 0),e$2a([r$1r({Object:"object"},{readOnly:!0})],c$2q.prototype,"type",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$2q.prototype,"width",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$2q.prototype,"height",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$2q.prototype,"depth",void 0),e$2a([r$1r({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d$25({json:{default:"origin"}})],c$2q.prototype,"anchor",void 0),e$2a([d$25({type:p$2z,json:{type:[Number],read:{reader:_t=>new p$2z({x:_t[0],y:_t[1],z:_t[2]})},write:{writer:(_t,Tt)=>{Tt.anchorPosition=[_t.x,_t.y,_t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],c$2q.prototype,"anchorPosition",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$2q.prototype,"heading",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$2q.prototype,"tilt",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$2q.prototype,"roll",void 0),e$2a([d$25({readOnly:!0})],c$2q.prototype,"isPrimitive",null),c$2q=n$2d=e$2a([n$2L("esri.symbols.ObjectSymbol3DLayer")],c$2q);const l$1M=c$2q;var n$2c;let d$1z=n$2c=class extends a$2e{constructor(_t){super(_t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(_t,Tt){return _t!=null?_t:Tt.height==null&&Tt.size!=null?Tt.size:void 0}readHeight(_t,Tt){return _t!=null?_t:Tt.width==null&&Tt.size!=null?Tt.size:void 0}clone(){return new n$2c({enabled:this.enabled,material:r$1P(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};e$2a([d$25({type:l$1Y,json:{write:!0}})],d$1z.prototype,"material",void 0),e$2a([d$25({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],d$1z.prototype,"castShadows",void 0),e$2a([r$1r({Path:"path"},{readOnly:!0})],d$1z.prototype,"type",void 0),e$2a([d$25({type:["circle","quad"],json:{write:!0,default:"circle"}})],d$1z.prototype,"profile",void 0),e$2a([d$25({type:a$28,json:{write:!0,default:"miter"}})],d$1z.prototype,"join",void 0),e$2a([d$25({type:i$20,json:{write:!0,default:"butt"}})],d$1z.prototype,"cap",void 0),e$2a([d$25({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],d$1z.prototype,"width",void 0),e$2a([o$1U("width",["width","size","height"])],d$1z.prototype,"readWidth",null),e$2a([d$25({type:Number,json:{write:!0}})],d$1z.prototype,"height",void 0),e$2a([o$1U("height",["height","size","width"])],d$1z.prototype,"readHeight",null),e$2a([d$25({type:["center","bottom","top"],json:{write:!0,default:"center"}})],d$1z.prototype,"anchor",void 0),e$2a([d$25({type:["heading","all"],json:{write:!0,default:"all"}})],d$1z.prototype,"profileRotation",void 0),d$1z=n$2c=e$2a([n$2L("esri.symbols.PathSymbol3DLayer")],d$1z);const c$2p=d$1z;var m$1x;let l$1L=m$1x=class extends l$2v{constructor(){super(...arguments),this.color=new l$2f([0,0,0,1]),this.size=0}clone(){const _t={color:m$2e(this.color),size:this.size};return new m$1x(_t)}};e$2a([d$25(p$2O)],l$1L.prototype,"color",void 0),e$2a([d$25(a$2d)],l$1L.prototype,"size",void 0),l$1L=m$1x=e$2a([n$2L("esri.symbols.support.Symbol3DHalo")],l$1L);let c$2o=class extends l$1N(l$2v){constructor(_t){super(_t),this.color=null}};e$2a([d$25(p$2O)],c$2o.prototype,"color",void 0),c$2o=e$2a([n$2L("esri.symbols.support.Symbol3DTextBackground")],c$2o);var g$12;let d$1y=g$12=class extends a$2e{constructor(_t){super(_t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(_t){r$1P(_t)&&r$1P(this._userSize)&&(_t.size=this._userSize),this._set("font",_t)}writeFont(_t,Tt,Mt,Pt){const Ft={...Pt,textSymbol3D:!0};Tt.font=_t.write({},Ft),delete Tt.font.size}get size(){return r$1P(this._userSize)?this._userSize:r$1P(this.font)&&this.font.size!=null?this.font.size:9}set size(_t){this._userSize=_t,r$1P(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const _t=new g$12({enabled:this.enabled,font:this.font&&m$2e(this.font),halo:this.halo&&m$2e(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:r$1P(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:m$2e(this.background)});return _t._userSize=this._userSize,_t}static fromTextSymbol(_t){return new g$12({font:r$1P(_t.font)?_t.font.clone():new m$1A,halo:z$q(_t.haloColor,_t.haloSize),horizontalAlignment:_t.horizontalAlignment,lineHeight:_t.lineHeight,material:_t.color?new l$1Y({color:_t.color.clone()}):null,text:_t.text,verticalAlignment:_t.verticalAlignment,background:_t.backgroundColor?new c$2o({color:_t.backgroundColor.clone()}):null})}};function z$q(_t,Tt){return _t&&Tt>0?new l$1L({color:m$2e(_t),size:Tt}):null}e$2a([d$25({type:m$1A,json:{write:!0}})],d$1y.prototype,"font",null),e$2a([r$1C("font")],d$1y.prototype,"writeFont",null),e$2a([d$25({type:l$1L,json:{write:!0}})],d$1y.prototype,"halo",void 0),e$2a([d$25({...m$1B,json:{default:"center",write:!0}})],d$1y.prototype,"horizontalAlignment",void 0),e$2a([d$25({...n$2h,json:{default:1,write:!0}})],d$1y.prototype,"lineHeight",void 0),e$2a([d$25({type:l$1Y,json:{write:!0}})],d$1y.prototype,"material",void 0),e$2a([d$25({type:c$2o,json:{write:!0}})],d$1y.prototype,"background",void 0),e$2a([d$25(a$2d)],d$1y.prototype,"size",null),e$2a([d$25({type:String,json:{write:!0}})],d$1y.prototype,"text",void 0),e$2a([r$1r({Text:"text"},{readOnly:!0})],d$1y.prototype,"type",void 0),e$2a([d$25({...p$2C,json:{default:"baseline",write:!0}})],d$1y.prototype,"verticalAlignment",void 0),d$1y=g$12=e$2a([n$2L("esri.symbols.TextSymbol3DLayer")],d$1y);const j$N=d$1y;var l$1K;let c$2n=l$1K=class extends a$2e{constructor(_t){super(_t),this.color=m$1w.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new l$1K({color:m$2e(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};e$2a([d$25({type:l$2f,nonNullable:!0,json:{type:[S$Q],write:(_t,Tt,Mt)=>Tt[Mt]=_t.toArray(l$2f.AlphaMode.UNLESS_OPAQUE),default:()=>m$1w.clone(),defaultEquals:_t=>_t.toCss(!0)===m$1w.toCss(!0)}})],c$2n.prototype,"color",void 0),e$2a([r$1r({Water:"water"},{readOnly:!0})],c$2n.prototype,"type",void 0),e$2a([d$25({type:["small","medium","large"],json:{write:!0,default:"medium"}})],c$2n.prototype,"waterbodySize",void 0),e$2a([d$25({type:Number,json:{write:!0,default:null}})],c$2n.prototype,"waveDirection",void 0),e$2a([d$25({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],c$2n.prototype,"waveStrength",void 0),c$2n=l$1K=e$2a([n$2L("esri.symbols.WaterSymbol3DLayer")],c$2n);const m$1w=new l$2f([0,119,190]),n$2b=c$2n;var p$2y;let a$23=p$2y=class extends y$1E{constructor(){super(...arguments),this.portal=null}clone(){return new p$2y({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};e$2a([d$25({type:String})],a$23.prototype,"name",void 0),e$2a([d$25({type:String})],a$23.prototype,"styleUrl",void 0),e$2a([d$25({type:String})],a$23.prototype,"styleName",void 0),e$2a([d$25({type:B$q})],a$23.prototype,"portal",void 0),a$23=p$2y=e$2a([n$2L("esri.symbols.support.StyleOrigin")],a$23);const l$1J=a$23;var t$1s;let p$2x=t$1s=class extends y$1E{clone(){return new t$1s({url:this.url})}};e$2a([d$25({type:String})],p$2x.prototype,"url",void 0),p$2x=t$1s=e$2a([n$2L("esri.symbols.support.Thumbnail")],p$2x);const v$R={icon:S$D,object:l$1M,line:f$1c,path:c$2p,fill:f$1f,extrude:m$1H,text:j$N,water:n$2b},C$n=j$11.ofType({base:a$2e,key:"type",typeMap:v$R,errorContext:"symbol-layer"}),T$s=s$2l.getLogger("esri.symbols.Symbol3D");let k$s=class extends a$2f{constructor(_t){super(_t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const Tt=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,Mt=Tt&&Tt.type||j$11;this._set("symbolLayers",new Mt)}get color(){return null}set color(_t){this.initialized&&T$s.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(_t){n$2I(_t,this._get("symbolLayers"))}readStyleOrigin(_t,Tt,Mt){if(_t.styleUrl&&_t.name){const Pt=i$1_(_t.styleUrl,Mt);return new l$1J({styleUrl:Pt,name:_t.name})}if(_t.styleName&&_t.name)return new l$1J({portal:Mt&&Mt.portal||B$q.getDefault(),styleName:_t.styleName,name:_t.name});Mt&&Mt.messages&&Mt.messages.push(new t$1W("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:Mt,definition:_t}))}writeStyleOrigin(_t,Tt,Mt,Pt){if(_t.styleUrl&&_t.name){let Ft=c$2r(_t.styleUrl,Pt);K$f(Ft)&&(Ft=F$x(Ft)),Tt.styleOrigin={styleUrl:Ft,name:_t.name}}else _t.styleName&&_t.name&&(_t.portal&&Pt&&Pt.portal&&!N$u(_t.portal.restUrl,Pt.portal.restUrl)?Pt&&Pt.messages&&Pt.messages.push(new t$1W("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):Tt.styleOrigin={styleName:_t.styleName,name:_t.name})}normalizeCtorArgs(_t){return _t instanceof a$2e||_t&&v$R[_t.type]?{symbolLayers:[_t]}:Array.isArray(_t)?{symbolLayers:_t}:_t}};e$2a([d$25({json:{read:!1,write:!1}})],k$s.prototype,"color",null),e$2a([d$25({type:C$n,nonNullable:!0,json:{write:!0}}),s$23(t$1V)],k$s.prototype,"symbolLayers",null),e$2a([d$25({type:l$1J})],k$s.prototype,"styleOrigin",void 0),e$2a([o$1U("styleOrigin")],k$s.prototype,"readStyleOrigin",null),e$2a([r$1C("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],k$s.prototype,"writeStyleOrigin",null),e$2a([d$25({type:p$2x,json:{read:!1}})],k$s.prototype,"thumbnail",void 0),e$2a([d$25({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],k$s.prototype,"type",void 0),k$s=e$2a([n$2L("esri.symbols.Symbol3D")],k$s);const A$p=k$s;let t$1r=class extends l$2v{constructor(_t){super(_t),this.visible=!0}clone(){}};e$2a([d$25({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],t$1r.prototype,"type",void 0),e$2a([d$25({readOnly:!0})],t$1r.prototype,"visible",void 0),t$1r=e$2a([n$2L("esri.symbols.callouts.Callout3D")],t$1r);const p$2w=t$1r;var l$1I;let a$22=l$1I=class extends l$2v{constructor(){super(...arguments),this.color=new l$2f("white")}clone(){return new l$1I({color:m$2e(this.color)})}};e$2a([d$25(p$2O)],a$22.prototype,"color",void 0),a$22=l$1I=e$2a([n$2L("esri.symbols.callouts.LineCallout3DBorder")],a$22);const i$1Z=a$22;Object.freeze(Object.defineProperty({__proto__:null,default:i$1Z},Symbol.toStringTag,{value:"Module"}));var u$1y;let d$1x=u$1y=class extends p$2w{constructor(_t){super(_t),this.type="line",this.color=new l$2f([0,0,0,1]),this.size=e$1y(1),this.border=null}get visible(){return this.size>0&&r$1P(this.color)&&this.color.a>0}clone(){return new u$1y({color:m$2e(this.color),size:this.size,border:m$2e(this.border)})}};e$2a([r$1r({line:"line"},{readOnly:!0})],d$1x.prototype,"type",void 0),e$2a([d$25(p$2O)],d$1x.prototype,"color",void 0),e$2a([d$25(a$2d)],d$1x.prototype,"size",void 0),e$2a([d$25({type:i$1Z,json:{write:!0}})],d$1x.prototype,"border",void 0),e$2a([d$25({readOnly:!0})],d$1x.prototype,"visible",null),d$1x=u$1y=e$2a([n$2L("esri.symbols.callouts.LineCallout3D")],d$1x);const y$1i=d$1x;function n$2a(_t){if(!_t)return!1;const Tt=_t.verticalOffset;return!!Tt&&!(Tt.screenLength<=0||Tt.maxWorldLength<=0)}function r$1e(_t){if(!_t||!_t.supportsCallout||!_t.supportsCallout())return!1;const Tt=_t.callout;return!!Tt&&!!Tt.visible&&!!n$2a(_t)}function o$1p(_t){return _t.type==="point-3d"||_t.type==="label-3d"}function i$1Y(_t){return _t.horizontalAlignment==="center"}const l$1H={types:{key:"type",base:p$2w,typeMap:{line:y$1i}},json:{write:!0}};var p$2v;let i$1X=p$2v=class extends l$2v{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new p$2v({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};e$2a([d$25(a$2d)],i$1X.prototype,"screenLength",void 0),e$2a([d$25({type:Number,json:{write:!0,default:0}})],i$1X.prototype,"minWorldLength",void 0),e$2a([d$25({type:Number,json:{write:!0}})],i$1X.prototype,"maxWorldLength",void 0),i$1X=p$2v=e$2a([n$2L("esri.symbols.support.Symbol3DVerticalOffset")],i$1X);var n$29;const u$1x=j$11.ofType({base:null,key:"type",typeMap:{text:j$N}});let f$1b=n$29=class extends A$p{constructor(_t){super(_t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new u$1x,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return r$1e(this)}hasVisibleVerticalOffset(){return n$2a(this)}clone(){return new n$29({styleOrigin:m$2e(this.styleOrigin),symbolLayers:m$2e(this.symbolLayers),thumbnail:m$2e(this.thumbnail),callout:m$2e(this.callout),verticalOffset:m$2e(this.verticalOffset)})}static fromTextSymbol(_t){return new n$29({symbolLayers:[j$N.fromTextSymbol(_t)]})}};e$2a([d$25({type:i$1X,json:{write:!0}})],f$1b.prototype,"verticalOffset",void 0),e$2a([d$25(l$1H)],f$1b.prototype,"callout",void 0),e$2a([d$25({json:{read:!1,write:!1}})],f$1b.prototype,"styleOrigin",void 0),e$2a([d$25({type:u$1x})],f$1b.prototype,"symbolLayers",void 0),e$2a([r$1r({LabelSymbol3D:"label-3d"},{readOnly:!0})],f$1b.prototype,"type",void 0),f$1b=n$29=e$2a([n$2L("esri.symbols.LabelSymbol3D")],f$1b);const b$Z=f$1b;var l$1G;const a$21=j$11.ofType({base:null,key:"type",typeMap:{line:f$1c,path:c$2p}}),n$28=j$11.ofType({base:null,key:"type",typeMap:{line:f$1c,path:c$2p}});let c$2m=l$1G=class extends A$p{constructor(_t){super(_t),this.symbolLayers=new a$21,this.type="line-3d"}clone(){return new l$1G({styleOrigin:m$2e(this.styleOrigin),symbolLayers:m$2e(this.symbolLayers),thumbnail:m$2e(this.thumbnail)})}static fromSimpleLineSymbol(_t){return new l$1G({symbolLayers:[f$1c.fromSimpleLineSymbol(_t)]})}};e$2a([d$25({type:a$21,json:{type:n$28}})],c$2m.prototype,"symbolLayers",void 0),e$2a([r$1r({LineSymbol3D:"line-3d"},{readOnly:!0})],c$2m.prototype,"type",void 0),c$2m=l$1G=e$2a([n$2L("esri.symbols.LineSymbol3D")],c$2m);const b$Y=c$2m;let p$2u=class extends a$2f{constructor(_t){super(_t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};e$2a([d$25({type:Number,json:{read:_t=>_t&&-1*_t,write:(_t,Tt)=>Tt.angle=_t&&-1*_t}})],p$2u.prototype,"angle",void 0),e$2a([d$25({type:["simple-marker","picture-marker"],readOnly:!0})],p$2u.prototype,"type",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],p$2u.prototype,"xoffset",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],p$2u.prototype,"yoffset",void 0),e$2a([d$25({type:Number,cast:_t=>_t==="auto"?_t:o$1v(_t),json:{write:!0}})],p$2u.prototype,"size",void 0),p$2u=e$2a([n$2L("esri.symbols.MarkerSymbol")],p$2u);const i$1W=p$2u;var i$1V;const y$1h=j$11.ofType({base:null,key:"type",typeMap:{fill:f$1f}});let c$2l=i$1V=class extends A$p{constructor(_t){super(_t),this.symbolLayers=new y$1h,this.type="mesh-3d"}clone(){return new i$1V({styleOrigin:m$2e(this.styleOrigin),symbolLayers:m$2e(this.symbolLayers),thumbnail:m$2e(this.thumbnail)})}};e$2a([d$25({type:y$1h})],c$2l.prototype,"symbolLayers",void 0),e$2a([r$1r({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],c$2l.prototype,"type",void 0),c$2l=i$1V=e$2a([n$2L("esri.symbols.MeshSymbol3D")],c$2l);const a$20=c$2l;function s$1B(_t,Tt,Mt){return Tt.imageData?et$1({mediaType:Tt.contentType||"image/png",isBase64:!0,data:Tt.imageData}):l$1F(Tt.url,Mt)}function l$1F(_t,Tt){return p$2t(Tt)&&!K$f(_t)&&Tt.layer.parsedUrl?G$q(Tt.layer.parsedUrl.path,"images",_t):i$1_(_t,Tt)}function u$1w(_t,Tt,Mt,Pt){if(X$c(_t)){const Ft=nt$1(_t);Tt.contentType=Ft.mediaType,Tt.imageData=Ft.data,Mt&&Mt.imageData===Tt.imageData&&Mt.url&&p$2B(Mt.url,Tt,"url",Pt)}else p$2B(_t,Tt,"url",Pt)}const m$1v={json:{read:{source:["imageData","url"],reader:s$1B},write:{writer(_t,Tt,Mt,Pt){u$1w(_t,Tt,this.source,Pt)}}}},c$2k={readOnly:!0,json:{read:{source:["imageData","url"],reader(_t,Tt,Mt){const Pt={};return Tt.imageData&&(Pt.imageData=Tt.imageData),Tt.contentType&&(Pt.contentType=Tt.contentType),Tt.url&&(Pt.url=l$1F(Tt.url,Mt)),Pt}}}};function p$2t(_t){return _t&&(_t.origin==="service"||_t.origin==="portal-item")&&_t.layer&&(_t.layer.type==="feature"||_t.layer.type==="stream")}var c$2j;let u$1v=c$2j=class extends p$2J{constructor(..._t){super(..._t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(_t,Tt,Mt,Pt){if(_t&&typeof _t!="string"&&_t.imageData==null)return _t;const Ft={};return _t&&(Ft.url=_t),Tt&&(Ft.outline=Tt),Mt!=null&&(Ft.width=o$1v(Mt)),Pt!=null&&(Ft.height=o$1v(Pt)),Ft}clone(){const _t=new c$2j({color:m$2e(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return _t._set("source",m$2e(this.source)),_t}hash(){var _t;return`${super.hash()}.${(_t=this.color)==null?void 0:_t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};e$2a([r$1r({esriPFS:"picture-fill"},{readOnly:!0})],u$1v.prototype,"type",void 0),e$2a([d$25(m$1v)],u$1v.prototype,"url",void 0),e$2a([d$25({type:Number,json:{write:!0}})],u$1v.prototype,"xscale",void 0),e$2a([d$25({type:Number,json:{write:!0}})],u$1v.prototype,"yscale",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],u$1v.prototype,"width",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],u$1v.prototype,"height",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],u$1v.prototype,"xoffset",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],u$1v.prototype,"yoffset",void 0),e$2a([d$25(c$2k)],u$1v.prototype,"source",void 0),u$1v=c$2j=e$2a([n$2L("esri.symbols.PictureFillSymbol")],u$1v);const a$1$=u$1v;var l$1E;let a$1_=l$1E=class extends i$1W{constructor(..._t){super(..._t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(_t,Tt,Mt){if(_t&&typeof _t!="string"&&_t.imageData==null)return _t;const Pt={};return _t&&(Pt.url=_t),Tt!=null&&(Pt.width=o$1v(Tt)),Mt!=null&&(Pt.height=o$1v(Mt)),Pt}readHeight(_t,Tt){return Tt.size||_t}readWidth(_t,Tt){return Tt.size||_t}clone(){const _t=new l$1E({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return _t._set("source",m$2e(this.source)),_t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};e$2a([d$25({json:{write:!1}})],a$1_.prototype,"color",void 0),e$2a([r$1r({esriPMS:"picture-marker"},{readOnly:!0})],a$1_.prototype,"type",void 0),e$2a([d$25(m$1v)],a$1_.prototype,"url",void 0),e$2a([d$25(c$2k)],a$1_.prototype,"source",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],a$1_.prototype,"height",void 0),e$2a([o$1U("height",["height","size"])],a$1_.prototype,"readHeight",null),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],a$1_.prototype,"width",void 0),e$2a([d$25({json:{write:!1}})],a$1_.prototype,"size",void 0),a$1_=l$1E=e$2a([n$2L("esri.symbols.PictureMarkerSymbol")],a$1_);const n$27=a$1_;var b$X;const f$1a=j$11.ofType({base:null,key:"type",typeMap:{icon:S$D,object:l$1M,text:j$N}});let S$C=b$X=class extends A$p{constructor(_t){super(_t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new f$1a,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const _t of this.symbolLayers.items)switch(_t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return r$1e(this)}hasVisibleVerticalOffset(){return n$2a(this)}clone(){return new b$X({verticalOffset:m$2e(this.verticalOffset),callout:m$2e(this.callout),styleOrigin:m$2e(this.styleOrigin),symbolLayers:m$2e(this.symbolLayers),thumbnail:m$2e(this.thumbnail)})}static fromSimpleMarkerSymbol(_t){return new b$X({symbolLayers:[S$D.fromSimpleMarkerSymbol(_t)]})}static fromPictureMarkerSymbol(_t){return new b$X({symbolLayers:[S$D.fromPictureMarkerSymbol(_t)]})}static fromCIMSymbol(_t){var Mt,Pt;return((Pt=(Mt=_t.data)==null?void 0:Mt.symbol)==null?void 0:Pt.type)!=="CIMPointSymbol"?null:_t.data.symbol.callout?new b$X({symbolLayers:[S$D.fromCIMSymbol(_t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new b$X({symbolLayers:[S$D.fromCIMSymbol(_t)]})}static fromTextSymbol(_t){return new b$X({symbolLayers:[j$N.fromTextSymbol(_t)]})}};e$2a([d$25({type:i$1X,json:{write:!0}})],S$C.prototype,"verticalOffset",void 0),e$2a([d$25(l$1H)],S$C.prototype,"callout",void 0),e$2a([d$25({type:f$1a,json:{origins:{"web-scene":{write:!0}}}})],S$C.prototype,"symbolLayers",void 0),e$2a([r$1r({PointSymbol3D:"point-3d"},{readOnly:!0})],S$C.prototype,"type",void 0),S$C=b$X=e$2a([n$2L("esri.symbols.PointSymbol3D")],S$C);const h$1e=S$C;var L$o;const u$1u=j$11.ofType({base:null,key:"type",typeMap:{extrude:m$1H,fill:f$1f,icon:S$D,line:f$1c,object:l$1M,text:j$N,water:n$2b}});let j$M=L$o=class extends A$p{constructor(_t){super(_t),this.symbolLayers=new u$1u,this.type="polygon-3d"}clone(){return new L$o({styleOrigin:m$2e(this.styleOrigin),symbolLayers:m$2e(this.symbolLayers),thumbnail:m$2e(this.thumbnail)})}static fromJSON(_t){const Tt=new L$o;if(Tt.read(_t),Tt.symbolLayers.length===2&&Tt.symbolLayers.getItemAt(0).type==="fill"&&Tt.symbolLayers.getItemAt(1).type==="line"){const Mt=Tt.symbolLayers.getItemAt(0),Pt=Tt.symbolLayers.getItemAt(1);!Pt.enabled||_t.symbolLayers&&_t.symbolLayers[1]&&_t.symbolLayers[1].enable===!1||(Mt.outline={size:Pt.size,color:r$1P(Pt.material)?Pt.material.color:null}),Tt.symbolLayers.removeAt(1)}return Tt}static fromSimpleFillSymbol(_t){return new L$o({symbolLayers:[f$1f.fromSimpleFillSymbol(_t)]})}};e$2a([d$25({type:u$1u,json:{write:!0}})],j$M.prototype,"symbolLayers",void 0),e$2a([r$1r({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],j$M.prototype,"type",void 0),j$M=L$o=e$2a([n$2L("esri.symbols.PolygonSymbol3D")],j$M);const S$B=j$M;var p$2s;const c$2i=new s$1_({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let m$1u=p$2s=class extends p$2J{constructor(..._t){super(..._t),this.color=new l$2f([0,0,0,.25]),this.outline=new m$1F,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(_t,Tt,Mt){if(_t&&typeof _t!="string")return _t;const Pt={};return _t&&(Pt.style=_t),Tt&&(Pt.outline=Tt),Mt&&(Pt.color=Mt),Pt}clone(){return new p$2s({color:m$2e(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};e$2a([d$25()],m$1u.prototype,"color",void 0),e$2a([d$25()],m$1u.prototype,"outline",void 0),e$2a([r$1r({esriSFS:"simple-fill"},{readOnly:!0})],m$1u.prototype,"type",void 0),e$2a([d$25({type:c$2i.apiValues,json:{read:c$2i.read,write:c$2i.write}})],m$1u.prototype,"style",void 0),m$1u=p$2s=e$2a([n$2L("esri.symbols.SimpleFillSymbol")],m$1u);const S$A=m$1u,SimpleFillSymbol=Object.freeze(Object.defineProperty({__proto__:null,default:S$A},Symbol.toStringTag,{value:"Module"}));var h$1d;const m$1t=new s$1_({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let u$1t=h$1d=class extends i$1W{constructor(..._t){super(..._t),this.color=new l$2f([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new m$1F}normalizeCtorArgs(_t,Tt,Mt,Pt){if(_t&&typeof _t!="string")return _t;const Ft={};return _t&&(Ft.style=_t),Tt!=null&&(Ft.size=o$1v(Tt)),Mt&&(Ft.outline=Mt),Pt&&(Ft.color=Pt),Ft}writeColor(_t,Tt){_t&&this.style!=="x"&&this.style!=="cross"&&(Tt.color=_t.toJSON()),_t===null&&(Tt.color=null)}set path(_t){this.style="path",this._set("path",_t)}clone(){return new h$1d({angle:this.angle,color:m$2e(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var _t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(_t=this.outline)==null?void 0:_t.hash()}`}};e$2a([d$25()],u$1t.prototype,"color",void 0),e$2a([r$1C("color")],u$1t.prototype,"writeColor",null),e$2a([r$1r({esriSMS:"simple-marker"},{readOnly:!0})],u$1t.prototype,"type",void 0),e$2a([d$25()],u$1t.prototype,"size",void 0),e$2a([d$25({type:m$1t.apiValues,json:{read:m$1t.read,write:m$1t.write}})],u$1t.prototype,"style",void 0),e$2a([d$25({type:String,json:{write:!0}})],u$1t.prototype,"path",null),e$2a([d$25({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":m$1F}},json:{default:null,write:!0}})],u$1t.prototype,"outline",void 0),u$1t=h$1d=e$2a([n$2L("esri.symbols.SimpleMarkerSymbol")],u$1t);const y$1g=u$1t,SimpleMarkerSymbol=Object.freeze(Object.defineProperty({__proto__:null,default:y$1g},Symbol.toStringTag,{value:"Module"}));var f$19;let g$11=f$19=class extends a$2f{constructor(..._t){super(..._t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new m$1A,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(_t,Tt,Mt){if(_t&&typeof _t!="string")return _t;const Pt={};return _t&&(Pt.text=_t),Tt&&(Pt.font=Tt),Mt&&(Pt.color=Mt),Pt}writeLineWidth(_t,Tt,Mt,Pt){Pt&&typeof Pt!="string"?Pt.origin:Tt[Mt]=_t}castLineWidth(_t){return o$1v(_t)}writeLineHeight(_t,Tt,Mt,Pt){Pt&&typeof Pt!="string"?Pt.origin:Tt[Mt]=_t}clone(){return new f$19({angle:this.angle,backgroundColor:m$2e(this.backgroundColor),borderLineColor:m$2e(this.borderLineColor),borderLineSize:this.borderLineSize,color:m$2e(this.color),font:this.font&&this.font.clone(),haloColor:m$2e(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};e$2a([d$25({type:l$2f,json:{write:!0}})],g$11.prototype,"backgroundColor",void 0),e$2a([d$25({type:l$2f,json:{write:!0}})],g$11.prototype,"borderLineColor",void 0),e$2a([d$25({type:Number,json:{write:!0}})],g$11.prototype,"borderLineSize",void 0),e$2a([d$25({type:m$1A,json:{write:!0}})],g$11.prototype,"font",void 0),e$2a([d$25({...m$1B,json:{write:!0}})],g$11.prototype,"horizontalAlignment",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],g$11.prototype,"kerning",void 0),e$2a([d$25({type:l$2f,json:{write:!0}})],g$11.prototype,"haloColor",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],g$11.prototype,"haloSize",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],g$11.prototype,"rightToLeft",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],g$11.prototype,"rotated",void 0),e$2a([d$25({type:String,json:{write:!0}})],g$11.prototype,"text",void 0),e$2a([r$1r({esriTS:"text"},{readOnly:!0})],g$11.prototype,"type",void 0),e$2a([d$25({...p$2C,json:{write:!0}})],g$11.prototype,"verticalAlignment",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],g$11.prototype,"xoffset",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],g$11.prototype,"yoffset",void 0),e$2a([d$25({type:Number,json:{read:_t=>_t&&-1*_t,write:(_t,Tt)=>Tt.angle=_t&&-1*_t}})],g$11.prototype,"angle",void 0),e$2a([d$25({type:Number,json:{write:!0}})],g$11.prototype,"width",void 0),e$2a([d$25({type:Number})],g$11.prototype,"lineWidth",void 0),e$2a([r$1C("lineWidth")],g$11.prototype,"writeLineWidth",null),e$2a([s$23("lineWidth")],g$11.prototype,"castLineWidth",null),e$2a([d$25(n$2h)],g$11.prototype,"lineHeight",void 0),e$2a([r$1C("lineHeight")],g$11.prototype,"writeLineHeight",null),g$11=f$19=e$2a([n$2L("esri.symbols.TextSymbol")],g$11);const m$1s=g$11;var y$1f;const h$1c=s$2l.getLogger("esri.symbols.WebStyleSymbol");let u$1s=y$1f=class extends a$2f{constructor(_t){super(_t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get fetchCacheKey(){const _t=r$1P(this.portal)?this.portal:B$q.getDefault(),Tt=_t.user?_t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${Tt}:${_t.url}`}read(_t,Tt){this.portal=Tt?Tt.portal:void 0,super.read(_t,Tt)}clone(){return new y$1f({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(_t){return this._fetchSymbol("webRef",_t)}fetchCIMSymbol(_t){return this._fetchSymbol("cimRef",_t)}async _fetchSymbol(_t,Tt){const Mt=r$1P(Tt)?Tt.cache:null,Pt=Mt?this.fetchCacheKey:null;if(r$1P(Mt)){const Vt=Mt.get(Pt);if(Vt)return Vt.clone()}const Ft=await f$18();f$1M(Tt);const Dt=Ft.resolveWebStyleSymbol(this,{portal:this.portal},_t,Tt);Dt.catch(Vt=>{h$1c.error("#fetchSymbol()","Failed to create symbol from style",Vt)});const Nt=await Dt;return _t==="webRef"&&Nt.type==="point-3d"||_t==="cimRef"&&Nt.type==="cim"?(r$1P(Mt)&&Mt.set(Pt,Nt.clone()),Nt):null}};function f$18(){return __vitePreload(()=>import("./webStyleSymbolUtils.20127335.js"),["assets/webStyleSymbolUtils.20127335.js","assets/devEnvironmentUtils.8c6e6b72.js"])}e$2a([d$25({json:{write:!1}})],u$1s.prototype,"color",void 0),e$2a([d$25({type:String,json:{write:!0}})],u$1s.prototype,"styleName",void 0),e$2a([d$25({type:B$q,json:{write:!1}})],u$1s.prototype,"portal",void 0),e$2a([d$25({type:String,json:{read:m$1z,write:p$2B}})],u$1s.prototype,"styleUrl",void 0),e$2a([d$25({type:p$2x,json:{read:!1}})],u$1s.prototype,"thumbnail",void 0),e$2a([d$25({type:String,json:{write:!0}})],u$1s.prototype,"name",void 0),e$2a([r$1r({styleSymbolReference:"web-style"},{readOnly:!0})],u$1s.prototype,"type",void 0),e$2a([d$25()],u$1s.prototype,"fetchCacheKey",null),u$1s=y$1f=e$2a([n$2L("esri.symbols.WebStyleSymbol")],u$1s);const b$W=u$1s;function x$F(_t){if(!_t)return!1;switch(_t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function c$2h(_t){if(!_t)return!1;switch(_t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const j$L={base:a$2f,key:"type",typeMap:{"simple-fill":S$A,"picture-fill":a$1$,"picture-marker":n$27,"simple-line":m$1F,"simple-marker":y$1g,text:m$1s,"label-3d":b$Z,"line-3d":b$Y,"mesh-3d":a$20,"point-3d":h$1e,"polygon-3d":S$B,"web-style":b$W,cim:d$1H},errorContext:"symbol"},D$q={base:a$2f,key:"type",typeMap:{"picture-marker":n$27,"simple-marker":y$1g,text:m$1s,"web-style":b$W,cim:d$1H},errorContext:"symbol"},k$r=s$2d({types:j$L}),M$C={base:a$2f,key:"type",typeMap:{"simple-fill":S$A,"picture-fill":a$1$,"picture-marker":n$27,"simple-line":m$1F,"simple-marker":y$1g,text:m$1s,"line-3d":b$Y,"mesh-3d":a$20,"point-3d":h$1e,"polygon-3d":S$B,"web-style":b$W,cim:d$1H},errorContext:"symbol"},P$m={base:a$2f,key:"type",typeMap:{text:m$1s,"label-3d":b$Z},errorContext:"symbol"},h$1b={base:a$2f,key:"type",typeMap:{"line-3d":b$Y,"mesh-3d":a$20,"point-3d":h$1e,"polygon-3d":S$B,"web-style":b$W,cim:d$1H},errorContext:"symbol"},F$q={base:a$2f,key:"type",typeMap:{"label-3d":b$Z},errorContext:"symbol"},g$10=N$v(j$L);function y$1e(_t){if(!_t)return null;const Tt={};for(const Mt in _t){const Pt=d$1M(_t[Mt]);Pt&&(Tt[Mt]=Pt)}return Object.keys(Tt).length!==0?Tt:null}function m$1r(_t){if(!r$1P(_t))return null;const Tt={};for(const Mt in _t){const Pt=_t[Mt];Pt&&(Tt[Mt]=Pt.toJSON())}return Object.keys(Tt).length!==0?Tt:null}let h$1a=class extends l$1N(l$2v){constructor(..._t){super(..._t),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:e$1$(),configurable:!0})}normalizeCtorArgs(_t,Tt,Mt,Pt){return _t&&!_t.declaredClass?_t:{geometry:_t,symbol:Tt,attributes:Mt,popupTemplate:Pt}}set aggregateGeometries(_t){const Tt=this._get("aggregateGeometries");JSON.stringify(Tt)!==JSON.stringify(_t)&&this._set("aggregateGeometries",_t)}set attributes(_t){const Tt=this._get("attributes");Tt!==_t&&(this._set("attributes",_t),this._notifyLayer("attributes",Tt,_t))}set geometry(_t){const Tt=this._get("geometry");Tt!==_t&&(this._set("geometry",_t),this._notifyLayer("geometry",Tt,_t))}set symbol(_t){const Tt=this._get("symbol");Tt!==_t&&(this._set("symbol",_t),this._notifyLayer("symbol",Tt,_t))}set visible(_t){const Tt=this._get("visible");Tt!==_t&&(this._set("visible",_t),this._notifyLayer("visible",Tt,_t))}getEffectivePopupTemplate(_t=!1){if(this.popupTemplate)return this.popupTemplate;for(const Tt of[this.sourceLayer,this.layer])if(Tt){if("popupTemplate"in Tt&&Tt.popupTemplate)return Tt.popupTemplate;if(_t&&"defaultPopupTemplate"in Tt&&r$1P(Tt.defaultPopupTemplate))return Tt.defaultPopupTemplate}return null}getAttribute(_t){return this.attributes&&this.attributes[_t]}setAttribute(_t,Tt){if(this.attributes){const Mt=this.getAttribute(_t);this.attributes[_t]=Tt,this._notifyLayer("attributes",Mt,Tt,_t)}else this.attributes={[_t]:Tt},this._notifyLayer("attributes",void 0,Tt,_t)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:m$1r(this.aggregateGeometries),geometry:r$1P(this.geometry)?this.geometry.toJSON():null,symbol:r$1P(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){r$1P(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(_t,Tt,Mt,Pt){if(!this.layer||!("graphicChanged"in this.layer))return;const Ft={graphic:this,property:_t,oldValue:Tt,newValue:Mt};_t==="attributes"&&(Ft.attributeName=Pt),this.layer.graphicChanged(Ft)}};e$2a([d$25({value:null,json:{read:y$1e}})],h$1a.prototype,"aggregateGeometries",null),e$2a([d$25({value:null})],h$1a.prototype,"attributes",null),e$2a([d$25({value:null,types:i$2i,json:{read:d$1M}})],h$1a.prototype,"geometry",null),e$2a([d$25({type:Boolean})],h$1a.prototype,"isAggregate",void 0),e$2a([d$25({clonable:"reference"})],h$1a.prototype,"layer",void 0),e$2a([d$25({type:B$m})],h$1a.prototype,"popupTemplate",void 0),e$2a([d$25({clonable:"reference"})],h$1a.prototype,"sourceLayer",void 0),e$2a([d$25({value:null,types:j$L})],h$1a.prototype,"symbol",null),e$2a([d$25({type:Boolean,value:!0})],h$1a.prototype,"visible",null),h$1a=e$2a([n$2L("esri.Graphic")],h$1a),function(_t){_t.generateUID=e$1$}(h$1a||(h$1a={}));const g$$=h$1a;class i$1U{constructor(Tt,Mt){this.min=Tt,this.max=Mt,this.range=Mt-Tt}ndiff(Tt,Mt=0){return Math.ceil((Tt-Mt)/this.range)*this.range+Mt}_normalize(Tt,Mt,Pt,Ft=0,Dt=!1){return(Pt-=Ft)<Tt?Pt+=this.ndiff(Tt-Pt):Pt>Mt&&(Pt-=this.ndiff(Pt-Mt)),Dt&&Pt===Mt&&(Pt=Tt),Pt+Ft}normalize(Tt,Mt=0,Pt=!1){return this._normalize(this.min,this.max,Tt,Mt,Pt)}clamp(Tt,Mt=0){return o$1H(Tt-Mt,this.min,this.max)+Mt}monotonic(Tt,Mt,Pt){return Tt<Mt?Mt:Mt+this.ndiff(Tt-Mt,Pt)}minimalMonotonic(Tt,Mt,Pt){return this._normalize(Tt,Tt+this.range,Mt,Pt)}center(Tt,Mt,Pt){return Mt=this.monotonic(Tt,Mt,Pt),this.normalize((Tt+Mt)/2,Pt)}diff(Tt,Mt,Pt){return this.monotonic(Tt,Mt,Pt)-Tt}shortestSignedDiff(Tt,Mt){Tt=this.normalize(Tt);const Pt=(Mt=this.normalize(Mt))-Tt,Ft=Mt<Tt?this.minimalMonotonic(Tt,Mt)-Tt:Mt-this.minimalMonotonic(Mt,Tt);return Math.abs(Pt)<Math.abs(Ft)?Pt:Ft}contains(Tt,Mt,Pt){return Mt=this.minimalMonotonic(Tt,Mt),(Pt=this.minimalMonotonic(Tt,Pt))>Tt&&Pt<Mt}}function t$1q(_t){for(const Tt in _t){const Mt=_t[Tt];Mt instanceof Function&&(_t[Tt]=Mt.bind(_t))}return _t}t$1q(new i$1U(0,2*Math.PI));const r$1d=t$1q(new i$1U(-Math.PI,Math.PI)),s$1A=t$1q(new i$1U(0,360));let u$1r=class extends l$1N(l$2v){constructor(..._t){super(..._t),this.position=new j$Z([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(_t,Tt,Mt,Pt){if(_t&&typeof _t=="object"&&("x"in _t||Array.isArray(_t))){const Ft={position:_t};return Tt!=null&&(Ft.heading=Tt),Mt!=null&&(Ft.tilt=Mt),Pt!=null&&(Ft.fov=Pt),Ft}return _t}writePosition(_t,Tt,Mt,Pt){const Ft=_t.clone();Ft.x=a$2Z(_t.x||0),Ft.y=a$2Z(_t.y||0),Ft.z=_t.hasZ?a$2Z(_t.z||0):_t.z,Tt[Mt]=Ft.write({},Pt)}readPosition(_t,Tt){const Mt=new j$Z;return Mt.read(_t,Tt),Mt.x=a$2Z(Mt.x||0),Mt.y=a$2Z(Mt.y||0),Mt.z=Mt.hasZ?a$2Z(Mt.z||0):Mt.z,Mt}equals(_t){return!!_t&&this.tilt===_t.tilt&&this.heading===_t.heading&&this.fov===_t.fov&&this.position.equals(_t.position)}};e$2a([d$25({type:j$Z,json:{write:{isRequired:!0}}})],u$1r.prototype,"position",void 0),e$2a([r$1C("position")],u$1r.prototype,"writePosition",null),e$2a([o$1U("position")],u$1r.prototype,"readPosition",null),e$2a([d$25({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),s$23(_t=>s$1A.normalize(a$2Z(_t)))],u$1r.prototype,"heading",void 0),e$2a([d$25({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),s$23(_t=>o$1H(a$2Z(_t),-180,180))],u$1r.prototype,"tilt",void 0),e$2a([d$25({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],u$1r.prototype,"fov",void 0),u$1r=e$2a([n$2L("esri.Camera")],u$1r);const d$1w=u$1r;var m$1q;let n$26=m$1q=class extends l$2v{constructor(_t){super(_t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(_t){return(_t%=360)<0&&(_t+=360),_t}clone(){return new m$1q({rotation:this.rotation,scale:this.scale,targetGeometry:r$1P(this.targetGeometry)?this.targetGeometry.clone():null,camera:r$1P(this.camera)?this.camera.clone():null})}};function l$1D(){return{enabled:!this.camera}}e$2a([d$25({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:l$1D}}}}})],n$26.prototype,"rotation",void 0),e$2a([s$23("rotation")],n$26.prototype,"castRotation",null),e$2a([d$25({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:l$1D}}}}})],n$26.prototype,"scale",void 0),e$2a([d$25({types:i$2i,json:{read:d$1M,write:!0,origins:{"web-scene":{read:d$1M,write:{overridePolicy:l$1D}}}}})],n$26.prototype,"targetGeometry",void 0),e$2a([d$25({type:d$1w,json:{write:!0}})],n$26.prototype,"camera",void 0),n$26=m$1q=e$2a([n$2L("esri.Viewpoint")],n$26);const u$1q=n$26;class e$1s{constructor(Tt=Mt=>Mt.values().next().value){this._peeker=Tt,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let Tt;for(Tt of this._items);return Tt}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(Tt){this.contains(Tt)||this._items.add(Tt)}contains(Tt){return this._items.has(Tt)}pop(){if(this.length===0)return;const Tt=this.peek();return this._items.delete(Tt),Tt}popLast(){if(this.length===0)return;const Tt=this.last();return this._items.delete(Tt),Tt}remove(Tt){this._items.delete(Tt)}filter(Tt){return this._items.forEach(Mt=>{Tt(Mt)||this._items.delete(Mt)}),this}}var e$1r;(function(_t){_t[_t.HANDSHAKE=0]="HANDSHAKE",_t[_t.OPEN=1]="OPEN",_t[_t.OPENED=2]="OPENED",_t[_t.RESPONSE=3]="RESPONSE",_t[_t.INVOKE=4]="INVOKE",_t[_t.ABORT=5]="ABORT",_t[_t.CLOSE=6]="CLOSE",_t[_t.OPEN_PORT=7]="OPEN_PORT",_t[_t.ON=8]="ON"})(e$1r||(e$1r={}));let r$1c=0;function n$25(){return r$1c++}function s$1z(_t){return _t&&typeof _t=="object"&&("result"in _t||"transferList"in _t)}function a$1Z(_t){return _t?typeof _t=="string"?JSON.stringify({name:"message",message:_t}):_t.toJSON?JSON.stringify(_t):JSON.stringify({name:_t.name,message:_t.message,details:_t.details||{stack:_t.stack}}):null}function i$1T(_t,Tt,Mt,Pt){if(Tt.type===e$1r.OPEN_PORT)return void _t.postMessage(Tt,[Tt.port]);if(Tt.type!==e$1r.INVOKE&&Tt.type!==e$1r.RESPONSE)return void _t.postMessage(Tt);let Ft;s$1z(Mt)?(Ft=o$1o(Mt.transferList),Tt.data=Mt.result):(Ft=o$1o(Pt),Tt.data=Mt),Ft?_t.postMessage(Tt,Ft):_t.postMessage(Tt)}function f$17(_t){if(!_t)return null;const Tt=_t.data;return Tt?typeof Tt=="string"?JSON.parse(Tt):Tt:null}function o$1o(_t){if(!_t||!_t.length)return null;if(a$32("esri-workers-arraybuffer-transfer"))return _t;const Tt=_t.filter(Mt=>!u$1p(Mt));return Tt.length?Tt:null}function u$1p(_t){return _t instanceof ArrayBuffer||_t&&_t.constructor&&_t.constructor.name==="ArrayBuffer"}const k$q={statsWorker:()=>__vitePreload(()=>import("./statsWorker.960c6999.js"),[]),geometryEngineWorker:()=>__vitePreload(()=>import("./geometryEngineWorker.34046a8c.js"),["assets/geometryEngineWorker.34046a8c.js","assets/geometryEngineJSON.73e38ad3.js","assets/geometryEngineBase.cf4f989f.js"]),CSVSourceWorker:()=>__vitePreload(()=>import("./CSVSourceWorker.0e636ea9.js"),["assets/CSVSourceWorker.0e636ea9.js","assets/FeatureStore.d8739ab5.js","assets/PooledRBush.88201bbf.js","assets/optimizedFeatureQueryEngineAdapter.5c61cb3b.js","assets/centroid.296f6ecc.js","assets/QueryEngine.9ca689c7.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.a1a47a12.js","assets/clientSideDefaults.2ff9dd27.js"]),EdgeProcessingWorker:()=>__vitePreload(()=>import("./EdgeProcessingWorker.b91b210a.js"),["assets/EdgeProcessingWorker.b91b210a.js","assets/deduplicate.ee0b1de6.js","assets/InterleavedLayout.b5350ce1.js","assets/BufferView.43fc091d.js","assets/types.25c129c5.js","assets/VertexAttribute.5551e0d8.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js"]),ElevationSamplerWorker:()=>__vitePreload(()=>import("./ElevationSamplerWorker.6d696641.js"),["assets/ElevationSamplerWorker.6d696641.js","assets/PooledRBush.88201bbf.js","assets/georeference.9c60805c.js","assets/quatf64.b60d4974.js","assets/mat4f64.84d5c445.js","assets/axisAngleDegrees.b0e51c69.js","assets/quat.122fba57.js","assets/BufferView.43fc091d.js","assets/vec33.731df183.js","assets/projection.ba478cd6.js"]),FeatureServiceSnappingSourceWorker:()=>__vitePreload(()=>import("./FeatureServiceSnappingSourceWorker.bef1863e.js"),["assets/FeatureServiceSnappingSourceWorker.bef1863e.js","assets/FeatureStore.d8739ab5.js","assets/PooledRBush.88201bbf.js","assets/optimizedFeatureQueryEngineAdapter.5c61cb3b.js","assets/centroid.296f6ecc.js","assets/QueryEngine.9ca689c7.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.a1a47a12.js"]),GeoJSONSourceWorker:()=>__vitePreload(()=>import("./GeoJSONSourceWorker.a19e5c59.js"),["assets/GeoJSONSourceWorker.a19e5c59.js","assets/FeatureStore.d8739ab5.js","assets/PooledRBush.88201bbf.js","assets/optimizedFeatureQueryEngineAdapter.5c61cb3b.js","assets/centroid.296f6ecc.js","assets/QueryEngine.9ca689c7.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.a1a47a12.js","assets/geojson.6b6e84aa.js","assets/clientSideDefaults.2ff9dd27.js","assets/sourceUtils.728c506e.js"]),LercWorker:()=>__vitePreload(()=>import("./LercWorker.bd273cb3.js"),[]),MemorySourceWorker:()=>__vitePreload(()=>import("./MemorySourceWorker.1b184da5.js"),["assets/MemorySourceWorker.1b184da5.js","assets/objectIdUtils.773397d7.js","assets/FeatureStore.d8739ab5.js","assets/PooledRBush.88201bbf.js","assets/optimizedFeatureQueryEngineAdapter.5c61cb3b.js","assets/centroid.296f6ecc.js","assets/QueryEngine.9ca689c7.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.a1a47a12.js","assets/clientSideDefaults.2ff9dd27.js","assets/sourceUtils.728c506e.js"]),PBFDecoderWorker:()=>__vitePreload(()=>import("./PBFDecoderWorker.7a326775.js"),["assets/PBFDecoderWorker.7a326775.js","assets/dehydratedFeatures.5573332f.js"]),Pipeline:()=>__vitePreload(()=>import("./Pipeline.b7cf54a8.js"),["assets/Pipeline.b7cf54a8.js","assets/QueryEngine.9ca689c7.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.a1a47a12.js","assets/FeatureStore2D.f7b490da.js","assets/CircularArray.c3ac6658.js","assets/ComputedAttributeStorage.11eabc3d.js","assets/centroid.296f6ecc.js","assets/definitions.6dca4f7b.js","assets/visualVariablesUtils.53aa19cb.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/visualVariablesUtils.baa0fa5a.js","assets/ogcFeatureUtils.960cf3d8.js","assets/geojson.6b6e84aa.js","assets/clientSideDefaults.2ff9dd27.js"]),PointCloudWorker:()=>__vitePreload(()=>import("./PointCloudWorker.860aa9b1.js"),["assets/PointCloudWorker.860aa9b1.js","assets/quat.122fba57.js","assets/quatf64.b60d4974.js","assets/vec3f32.0772c8d8.js","assets/PointCloudUniqueValueRenderer.1249e50e.js","assets/VertexAttribute.5551e0d8.js"]),RasterWorker:()=>__vitePreload(()=>import("./RasterWorker.ba0e3cd0.js"),["assets/RasterWorker.ba0e3cd0.js","assets/pixelUtils.2d74e066.js","assets/RasterSymbolizer.bddd4326.js","assets/rasterProjectionHelper.074b5fd5.js","assets/dataUtils.9bc596a4.js","assets/utils.8c5c7730.js"]),SceneLayerSnappingSourceWorker:()=>__vitePreload(()=>import("./SceneLayerSnappingSourceWorker.223d267a.js"),["assets/SceneLayerSnappingSourceWorker.223d267a.js","assets/lineSegment.42c0099b.js","assets/vectorStacks.a7af424f.js","assets/quatf64.b60d4974.js","assets/mat4f64.84d5c445.js","assets/sphere.fe54e1ae.js","assets/Octree.74aeccc1.js","assets/plane.1ed71234.js","assets/Util.221caaac.js","assets/EdgeProcessingWorker.b91b210a.js","assets/deduplicate.ee0b1de6.js","assets/InterleavedLayout.b5350ce1.js","assets/BufferView.43fc091d.js","assets/types.25c129c5.js","assets/VertexAttribute.5551e0d8.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js"]),SceneLayerWorker:()=>__vitePreload(()=>import("./SceneLayerWorker.2a0a1b1c.js"),["assets/SceneLayerWorker.2a0a1b1c.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/quatf64.b60d4974.js","assets/mat4f64.84d5c445.js"]),WFSSourceWorker:()=>__vitePreload(()=>import("./WFSSourceWorker.4e53b8ca.js"),["assets/WFSSourceWorker.4e53b8ca.js","assets/FeatureStore.d8739ab5.js","assets/PooledRBush.88201bbf.js","assets/optimizedFeatureQueryEngineAdapter.5c61cb3b.js","assets/centroid.296f6ecc.js","assets/QueryEngine.9ca689c7.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.a1a47a12.js","assets/geojson.6b6e84aa.js","assets/sourceUtils.728c506e.js","assets/wfsUtils.e27dfe61.js","assets/xmlUtils.986ddba5.js"]),WorkerTileHandler:()=>__vitePreload(()=>import("./WorkerTileHandler.03d5cb09.js"),["assets/WorkerTileHandler.03d5cb09.js","assets/enums.2a1fad7f.js","assets/GeometryUtils.814cb798.js","assets/BidiEngine.ec67919b.js","assets/config.40d47db8.js","assets/StyleDefinition.5774ff26.js","assets/enums.05a6ea95.js","assets/Geometry.b68345ae.js","assets/TileClipper.99759c1f.js","assets/definitions.6dca4f7b.js","assets/GeometryUtils.8166011b.js","assets/StyleRepository.63d84b8c.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/earcut.d30cbec0.js"])},{CLOSE:b$V,ABORT:v$Q,INVOKE:y$1d,RESPONSE:j$K,OPEN_PORT:S$z,ON:f$16}=e$1r,W$9=2;class M$B{constructor(Tt){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=Tt,this._timer=null,this._process=this._process.bind(this)}push(Tt){Tt.type===e$1r.ABORT?this._cancelledJobIds.add(Tt.jobId):(this._invokeMessages.push(Tt),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const Tt of this._invokeMessages)this._cancelledJobIds.has(Tt.jobId)||this._invoke(Tt);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class w$R{constructor(Tt,Mt,Pt){this._port=Tt,this._getNextJob=Pt,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new M$B(Ft=>this._onInvokeMessage(Ft)),this._client=Mt.client,this._onMessage=this._onMessage.bind(this),this._channel=Mt.channel,this._schedule=Mt.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(Tt){const Mt=new MessageChannel;let Pt;Pt=typeof Tt=="function"?new Tt:"default"in Tt&&typeof Tt.default=="function"?new Tt.default:Tt;const Ft=new w$R(Mt.port1,{channel:Mt,client:Pt},()=>null);return typeof Pt=="object"&&"remoteClient"in Pt&&(Pt.remoteClient=Ft),w$R.clients.set(Ft,Pt),Mt.port2}static loadWorker(Tt){const Mt=k$q[Tt];return Mt?Mt():Promise.resolve(null)}close(){this._post({type:b$V}),this._close()}isBusy(){return this._outJobs.size>0}invoke(Tt,Mt,Pt){const Ft=Pt&&Pt.signal,Dt=Pt&&Pt.transferList;if(!this._port)return Promise.reject(new s$2i("worker:port-closed",`Cannot call invoke('${Tt}'), port is closed`,{methodName:Tt,data:Mt}));const Nt=n$25();return new Promise((Vt,zt)=>{if(p$3C(Ft))return this._processWork(),void zt(m$2b());const Xt=v$16(Ft,()=>{const Wt=this._outJobs.get(Nt);Wt&&(this._outJobs.delete(Nt),this._processWork(),a$31(Wt.abortHandle),this._post({type:v$Q,jobId:Nt}),zt(m$2b()))}),Ht={resolve:Vt,reject:zt,abortHandle:Xt,debugInfo:Tt};this._outJobs.set(Nt,Ht),this._post({type:y$1d,jobId:Nt,methodName:Tt,abortable:Ft!=null},Mt,Dt)})}on(Tt,Mt){const Pt=new MessageChannel;function Ft(Dt){Mt(Dt.data)}return this._port.postMessage({type:e$1r.ON,eventType:Tt,port:Pt.port2},[Pt.port2]),Pt.port1.addEventListener("message",Ft),Pt.port1.start(),{remove(){Pt.port1.postMessage({type:e$1r.CLOSE}),Pt.port1.close(),Pt.port1.removeEventListener("message",Ft)}}}jobAdded(){this._processWork()}openPort(){const Tt=new MessageChannel;return this._post({type:S$z,port:Tt.port2}),Tt.port1}_processWork(){if(this._outJobs.size>=W$9)return;const Tt=this._getNextJob();if(!Tt)return;const{methodName:Mt,data:Pt,invokeOptions:Ft,deferred:Dt}=Tt;this.invoke(Mt,Pt,Ft).then(Nt=>Dt.resolve(Nt)).catch(Nt=>Dt.reject(Nt))}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(Tt=>{a$31(Tt.abortHandle),Tt.reject(m$2b(`Worker closing, aborting job calling '${Tt.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(Tt){r$1P(this._schedule)?this._schedule(()=>this._processMessage(Tt)):this._processMessage(Tt)}_processMessage(Tt){const Mt=f$17(Tt);if(Mt)switch(Mt.type){case j$K:this._onResponseMessage(Mt);break;case y$1d:this._invokeQueue.push(Mt);break;case v$Q:this._onAbortMessage(Mt);break;case b$V:this._onCloseMessage();break;case S$z:this._onOpenPortMessage(Mt);break;case f$16:this._onOnMessage(Mt)}}_onAbortMessage(Tt){const Mt=this._inJobs,Pt=Tt.jobId,Ft=Mt.get(Pt);this._invokeQueue.push(Tt),Ft&&(Ft.controller&&Ft.controller.abort(),Mt.delete(Pt))}_onCloseMessage(){const Tt=this._client;this._close(),Tt&&"destroy"in Tt&&w$R.clients.get(this)===Tt&&Tt.destroy(),w$R.clients.delete(this),Tt&&Tt.remoteClient&&(Tt.remoteClient=null)}_onInvokeMessage(Tt){const{methodName:Mt,jobId:Pt,data:Ft,abortable:Dt}=Tt,Nt=Dt?new AbortController:null,Vt=this._inJobs;let zt,Xt=this._client,Ht=Xt[Mt];try{if(!Ht&&Mt&&Mt.includes(".")){const Wt=Mt.split(".");for(let Qt=0;Qt<Wt.length-1;Qt++)Xt=Xt[Wt[Qt]],Ht=Xt[Wt[Qt+1]]}if(typeof Ht!="function")throw new TypeError(`${Mt} is not a function`);zt=Ht.call(Xt,Ft,{client:this,signal:Nt?Nt.signal:null})}catch(Wt){return void this._post({type:j$K,jobId:Pt,error:a$1Z(Wt)})}k$E(zt)?(Vt.set(Pt,{controller:Nt,promise:zt}),zt.then(Wt=>{Vt.has(Pt)&&(Vt.delete(Pt),this._post({type:j$K,jobId:Pt},Wt))},Wt=>{Vt.has(Pt)&&(Vt.delete(Pt),g$1l(Wt)||this._post({type:j$K,jobId:Pt,error:a$1Z(Wt||{message:`Error encountered at method ${Mt}`})}))})):this._post({type:j$K,jobId:Pt},zt)}_onOpenPortMessage(Tt){new w$R(Tt.port,{client:this._client},()=>null)}_onOnMessage(Tt){const{port:Mt}=Tt,Pt=this._client.on(Tt.eventType,Dt=>{Mt.postMessage(Dt)}),Ft=r$1H(Tt.port,"message",Dt=>{f$17(Dt).type===e$1r.CLOSE&&(Ft.remove(),Pt.remove(),Mt.close())})}_onResponseMessage(Tt){const{jobId:Mt,error:Pt,data:Ft}=Tt,Dt=this._outJobs;if(!Dt.has(Mt))return;const Nt=Dt.get(Mt);this._processWork(),Dt.delete(Mt),a$31(Nt.abortHandle),Pt?Nt.reject(s$2i.fromJSON(JSON.parse(Pt))):Nt.resolve(Ft)}_post(Tt,Mt,Pt){return i$1T(this._port,Tt,Mt,Pt)}}w$R.kernelInfo={revision:f$1C,version:s$24,buildDate:d$1Y},w$R.clients=new Map;const h$19=s$2l.getLogger("esri.core.workers.Connection");class c$2g{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new e$1s}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(Tt,Mt){return new Promise((Pt,Ft)=>{let Dt=!0;const Nt=Vt=>{f$1M(Mt.signal),Dt&&(Dt=!1,Vt())};this._clients.length=Tt.length,this._clientPromises.length=Tt.length,this._inUseClients.length=Tt.length;for(let Vt=0;Vt<Tt.length;++Vt){const zt=Tt[Vt];k$E(zt)?this._clientPromises[Vt]=zt.then(Xt=>(this._clients[Vt]=new w$R(Xt,Mt,()=>this._ongoingJobsQueue.pop()),Nt(Pt),this._clients[Vt]),()=>(Nt(Ft),null)):(this._clients[Vt]=new w$R(zt,Mt,()=>this._ongoingJobsQueue.pop()),this._clientPromises[Vt]=Promise.resolve(this._clients[Vt]),Nt(Pt))}})}broadcast(Tt,Mt,Pt){const Ft=new Array(this._clientPromises.length);for(let Dt=0;Dt<this._clientPromises.length;++Dt){const Nt=this._clientPromises[Dt];Ft[Dt]=Nt.then(Vt=>Vt.invoke(Tt,Mt,Pt))}return Ft}close(){let Tt;for(;Tt=this._ongoingJobsQueue.pop();)Tt.deferred.reject(m$2b(`Worker closing, aborting job calling '${Tt.methodName}'`));for(const Mt of this._clientPromises)Mt.then(Pt=>Pt.close());this._clients.length=0,this._clientPromises.length=0}invoke(Tt,Mt,Pt){let Ft=null;Array.isArray(Pt)?(h$19.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),Ft={transferList:Pt}):Ft=Pt;const Dt=T$C();this._ongoingJobsQueue.push({methodName:Tt,data:Mt,invokeOptions:Ft,deferred:Dt});for(let Nt=0;Nt<this._clientPromises.length;Nt++){const Vt=this._clients[Nt];Vt?Vt.jobAdded():this._clientPromises[Nt].then(zt=>zt.jobAdded())}return Dt.promise}on(Tt,Mt){return Promise.all(this._clientPromises).then(()=>r$1M(this._clients.map(Pt=>Pt.on(Tt,Mt))))}openPorts(){return new Promise(Tt=>{const Mt=new Array(this._clientPromises.length);let Pt=Mt.length;for(let Ft=0;Ft<this._clientPromises.length;++Ft)this._clientPromises[Ft].then(Dt=>{Mt[Ft]=Dt.openPort(),--Pt==0&&Tt(Mt)})})}get test(){return{numClients:this._clients.length}}}const i$1S=s$2l.getLogger("esri.intl");function s$1y(_t,Tt,Mt={}){const{format:Pt={}}=Mt;return r$1L(_t,Ft=>u$1o(Ft,Tt,Pt))}function u$1o(_t,Tt,Mt){let Pt,Ft;const Dt=_t.indexOf(":");if(Dt===-1?Pt=_t.trim():(Pt=_t.slice(0,Dt).trim(),Ft=_t.slice(Dt+1).trim()),!Pt)return"";const Nt=t$2b(Pt,Tt);if(Nt==null)return"";const Vt=Mt[Ft]||Mt[Pt];return Vt?c$2f(Nt,Vt):Ft?a$1Y(Nt,Ft):f$15(Nt)}function c$2f(_t,Tt){switch(Tt.type){case"date":return L$r(_t,Tt.intlOptions);case"number":return m$1N(_t,Tt.intlOptions);default:return i$1S.warn("missing format descriptor for key {key}"),f$15(_t)}}function a$1Y(_t,Tt){switch(Tt.toLowerCase()){case"dateformat":return L$r(_t);case"numberformat":return m$1N(_t);default:return i$1S.warn(`inline format is unsupported since 4.12: ${Tt}`),/^(dateformat|datestring)/i.test(Tt)?L$r(_t):/^numberformat/i.test(Tt)?m$1N(_t):f$15(_t)}}function f$15(_t){switch(typeof _t){case"string":return _t;case"number":return m$1N(_t);case"boolean":return""+_t;default:return _t instanceof Date?L$r(_t):""}}async function o$1n(_t,Tt,Mt,Pt){const Ft=Tt.exec(Mt);if(!Ft)throw new s$2i("esri-intl:invalid-bundle",`Bundle id "${Mt}" is not compatible with the pattern "${Tt}"`);const Dt=Ft[1]?`${Ft[1]}/`:"",Nt=Ft[2],Vt=u$1V(Pt),zt=`${Dt}${Nt}.json`,Xt=Vt?`${Dt}${Nt}_${Vt}.json`:zt;let Ht;try{Ht=await s$1x(_t(Xt))}catch(Wt){if(Xt===zt)throw new s$2i("intl:unknown-bundle",`Bundle "${Mt}" cannot be loaded`,{error:Wt});try{Ht=await s$1x(_t(zt))}catch(Qt){throw new s$2i("intl:unknown-bundle",`Bundle "${Mt}" cannot be loaded`,{error:Qt})}}return Ht}async function s$1x(_t){if(r$1P(c$2e.fetchBundleAsset))return c$2e.fetchBundleAsset(_t);const Tt=await U$v(_t,{responseType:"text"});return JSON.parse(Tt.data)}class i$1R{constructor({base:Tt="",pattern:Mt,location:Pt=new URL(window.location.href)}){let Ft;Ft=typeof Pt=="string"?Dt=>new URL(Dt,new URL(Pt,window.location.href)).href:Pt instanceof URL?Dt=>new URL(Dt,Pt).href:Pt,this.pattern=typeof Mt=="string"?new RegExp(`^${Mt}`):Mt,this.getAssetUrl=Ft,Tt=Tt?Tt.endsWith("/")?Tt:Tt+"/":"",this.matcher=new RegExp(`^${Tt}(?:(.*)/)?(.*)$`)}fetchMessageBundle(Tt,Mt){return o$1n(this.getAssetUrl,this.matcher,Tt,Mt)}}function a$1X(_t){return new i$1R(_t)}const c$2e={};l$2n(a$1X({pattern:"esri/",location:a$2M}));const a$1W={};function e$1q(_t,Tt){for(const Mt of _t)if(Mt.name===Tt.name)return;_t.push(Tt)}function r$1b(_t){var Mt;const Tt={async:_t.async,isDebug:_t.isDebug,locale:_t.locale,baseUrl:_t.baseUrl,has:{..._t.has},map:{..._t.map},packages:_t.packages&&_t.packages.concat()||[],paths:{..._t.paths}};return _t.hasOwnProperty("async")||(Tt.async=!0),_t.hasOwnProperty("isDebug")||(Tt.isDebug=!1),_t.baseUrl||(Tt.baseUrl=a$1W.baseUrl),(Mt=a$1W.packages)==null||Mt.forEach(Pt=>{e$1q(Tt.packages,Pt)}),Tt}class n$24{constructor(){const Tt=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(Mt=>{this[Mt]=(...Pt)=>Tt[Mt](...Pt)})}}class a$1V{constructor(){this._dispatcher=new n$24,this._workerPostMessage({type:e$1r.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(Tt){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=Tt,Tt&&this.addEventListener("message",Tt)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(Tt){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=Tt,Tt&&this.addEventListener("messageerror",Tt)}get onerror(){return this._onerrorHandler}set onerror(Tt){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=Tt,Tt&&this.addEventListener("error",Tt)}postMessage(Tt){t$23(()=>{this._workerMessageHandler(new MessageEvent("message",{data:Tt}))})}dispatchEvent(Tt){return this._dispatcher.dispatchEvent(Tt)}addEventListener(Tt,Mt,Pt){this._dispatcher.addEventListener(Tt,Mt,Pt)}removeEventListener(Tt,Mt,Pt){this._dispatcher.removeEventListener(Tt,Mt,Pt)}_workerPostMessage(Tt){t$23(()=>{this.dispatchEvent(new MessageEvent("message",{data:Tt}))})}async _workerMessageHandler(Tt){const Mt=f$17(Tt);if(Mt&&Mt.type===e$1r.OPEN){const{modulePath:Pt,jobId:Ft}=Mt;let Dt=await w$R.loadWorker(Pt);Dt||(Dt=await __vitePreload(()=>import(Pt),[]));const Nt=w$R.connect(Dt);this._workerPostMessage({type:e$1r.OPENED,jobId:Ft,data:Nt})}}}const m$1p=s$2l.getLogger("esri.core.workers"),{HANDSHAKE:p$2r}=e$1r,g$_='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let k$p,h$18;const w$Q="Failed to create Worker. Fallback to execute module in main thread";async function y$1c(){if(!a$32("esri-workers")||(a$32("mozilla"),0))return b$U(new a$1V);if(!k$p&&!h$18)try{const Tt=g$_.replace('"{CONFIGURATION}"',`'${v$P()}'`);k$p=URL.createObjectURL(new Blob([Tt],{type:"text/javascript"}))}catch(Tt){h$18=Tt||{}}let _t;if(k$p)try{_t=new Worker(k$p,{name:"esri-worker-"+P$l++})}catch{m$1p.warn(w$Q,h$18),_t=new a$1V}else m$1p.warn(w$Q,h$18),_t=new a$1V;return b$U(_t)}async function b$U(_t){return new Promise(Tt=>{function Mt(Ft){const Dt=f$17(Ft);Dt&&Dt.type===p$2r&&(_t.removeEventListener("message",Mt),_t.removeEventListener("error",Pt),Tt(_t))}function Pt(Ft){Ft.preventDefault(),_t.removeEventListener("message",Mt),_t.removeEventListener("error",Pt),m$1p.warn("Failed to create Worker. Fallback to execute module in main thread",Ft),(_t=new a$1V).addEventListener("message",Mt),_t.addEventListener("error",Pt)}_t.addEventListener("message",Mt),_t.addEventListener("error",Pt)})}function v$P(){let _t;if(r$1O.default!=null){const Ft={...r$1O};delete Ft.default,_t=JSON.parse(JSON.stringify(Ft))}else _t=JSON.parse(JSON.stringify(r$1O));_t.assetsPath=Q$e(_t.assetsPath),_t.request.interceptors=[],_t.log.interceptors=[],_t.locale=l$2q(),_t.has={"esri-csp-restrictions":a$32("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":a$32("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":a$32("esri-2d-query-centroid-enabled"),"featurelayer-pbf":a$32("featurelayer-pbf"),"featurelayer-simplify-thresholds":a$32("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":a$32("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":a$32("featurelayer-simplify-mobile-factor"),"esri-atomics":a$32("esri-atomics"),"esri-shared-array-buffer":a$32("esri-shared-array-buffer"),"esri-tiles-debug":a$32("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":a$32("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":a$32("feature-polyline-generalization-factor"),"host-webworker":1},_t.workers.loaderUrl&&(_t.workers.loaderUrl=Q$e(_t.workers.loaderUrl)),_t.workers.workerPath?_t.workers.workerPath=Q$e(_t.workers.workerPath):_t.workers.workerPath=Q$e(a$2M("esri/core/workers/RemoteClient.js")),_t.workers.useDynamicImport=!1;const Tt=r$1O.workers.loaderConfig,Mt=r$1b({baseUrl:Tt==null?void 0:Tt.baseUrl,locale:l$2q(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...Tt==null?void 0:Tt.has},map:{...Tt==null?void 0:Tt.map},paths:{...Tt==null?void 0:Tt.paths},packages:(Tt==null?void 0:Tt.packages)||[]}),Pt={version:s$24,buildDate:d$1Y,revision:f$1C};return JSON.stringify({esriConfig:_t,loaderConfig:Mt,kernelInfo:Pt})}let P$l=0;const b$T=s$2l.getLogger("esri.core.workers"),{ABORT:m$1o,INVOKE:_$q,OPEN:g$Z,OPENED:u$1n,RESPONSE:j$J}=e$1r;class f$14{constructor(Tt,Mt){this._outJobs=new Map,this._inJobs=new Map,this.worker=Tt,this.id=Mt,Tt.addEventListener("message",this._onMessage.bind(this)),Tt.addEventListener("error",Pt=>{Pt.preventDefault(),b$T.error(Pt)})}static async create(Tt){const Mt=await y$1c();return new f$14(Mt,Tt)}terminate(){this.worker.terminate()}async open(Tt,Mt={}){const{signal:Pt}=Mt,Ft=n$25();return new Promise((Dt,Nt)=>{const Vt={resolve:Dt,reject:Nt,abortHandle:d$28(Pt,()=>{this._outJobs.delete(Ft),this._post({type:m$1o,jobId:Ft})})};this._outJobs.set(Ft,Vt),this._post({type:g$Z,jobId:Ft,modulePath:Tt})})}_onMessage(Tt){const Mt=f$17(Tt);if(Mt)switch(Mt.type){case u$1n:this._onOpenedMessage(Mt);break;case j$J:this._onResponseMessage(Mt);break;case m$1o:this._onAbortMessage(Mt);break;case _$q:this._onInvokeMessage(Mt)}}_onAbortMessage(Tt){const Mt=this._inJobs,Pt=Tt.jobId,Ft=Mt.get(Pt);Ft&&(Ft.controller&&Ft.controller.abort(),Mt.delete(Pt))}_onInvokeMessage(Tt){const{methodName:Mt,jobId:Pt,data:Ft,abortable:Dt}=Tt,Nt=Dt?new AbortController:null,Vt=this._inJobs,zt=a$2Q[Mt];let Xt;try{if(typeof zt!="function")throw new TypeError(`${Mt} is not a function`);Xt=zt.call(null,Ft,{signal:Nt?Nt.signal:null})}catch(Ht){return void this._post({type:j$J,jobId:Pt,error:a$1Z(Ht)})}k$E(Xt)?(Vt.set(Pt,{controller:Nt,promise:Xt}),Xt.then(Ht=>{Vt.has(Pt)&&(Vt.delete(Pt),this._post({type:j$J,jobId:Pt},Ht))},Ht=>{Vt.has(Pt)&&(Vt.delete(Pt),Ht||(Ht={message:"Error encountered at method"+Mt}),g$1l(Ht)||this._post({type:j$J,jobId:Pt,error:a$1Z(Ht||{message:`Error encountered at method ${Mt}`})}))})):this._post({type:j$J,jobId:Pt},Xt)}_onOpenedMessage(Tt){const{jobId:Mt,data:Pt}=Tt,Ft=this._outJobs.get(Mt);Ft&&(this._outJobs.delete(Mt),a$31(Ft.abortHandle),Ft.resolve(Pt))}_onResponseMessage(Tt){const{jobId:Mt,error:Pt,data:Ft}=Tt,Dt=this._outJobs.get(Mt);Dt&&(this._outJobs.delete(Mt),a$31(Dt.abortHandle),Pt?Dt.reject(s$2i.fromJSON(JSON.parse(Pt))):Dt.resolve(Ft))}_post(Tt,Mt,Pt){return i$1T(this.worker,Tt,Mt,Pt)}}let s$1w=a$32("esri-workers-debug")?1:a$32("host-browser")?navigator.hardwareConcurrency-1:0;s$1w||(s$1w=a$32("safari")&&a$32("mac")||a$32("trident")?7:2);let a$1U=0;const l$1C=[];function c$2d(){h$17()}async function f$13(_t,Tt){const Mt=new c$2g;return await Mt.open(_t,Tt),Mt}async function u$1m(_t,Tt={}){if(typeof _t!="string")throw new s$2i("workers:undefined-module","modulePath is missing");let Mt=Tt.strategy||"distributed";if(a$32("host-webworker")&&!a$32("esri-workers")&&(Mt="local"),Mt==="local"){let Pt=await w$R.loadWorker(_t);Pt||(Pt=await __vitePreload(()=>import(_t),[])),f$1M(Tt.signal);const Ft=Tt.client||Pt;return f$13([w$R.connect(Pt)],{...Tt,client:Ft})}if(await h$17(),f$1M(Tt.signal),Mt==="dedicated"){const Pt=a$1U++%s$1w;return f$13([await l$1C[Pt].open(_t,Tt)],Tt)}if(Tt.maxNumWorkers&&Tt.maxNumWorkers>0){const Pt=Math.min(Tt.maxNumWorkers,s$1w);if(Pt<s$1w){const Ft=new Array(Pt);for(let Dt=0;Dt<Pt;++Dt){const Nt=a$1U++%s$1w;Ft[Dt]=l$1C[Nt].open(_t,Tt)}return f$13(Ft,Tt)}}return f$13(l$1C.map(Pt=>Pt.open(_t,Tt)),Tt)}let d$1v=null;async function h$17(){if(d$1v)return d$1v;new AbortController;const _t=[];for(let Tt=0;Tt<s$1w;Tt++){const Mt=f$14.create(Tt).then(Pt=>(l$1C[Tt]=Pt,Pt));_t.push(Mt)}return d$1v=Promise.all(_t),d$1v}function T$r(_t){return new k$y({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${_t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const G$g=T$r(s$22),I$u=T$r(t$1Q),E$A=T$r(e$1S),R$o=new k$y({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${s$22.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function O$p(_t){return _t&&(P$t(_t)||_t===I$u)?I$u:_t&&(s$25(_t)||_t===E$A)?E$A:G$g}function p$2q(_t){return _t&&(P$t(_t)||_t===I$u)?t$1Q:_t&&(s$25(_t)||_t===E$A)?e$1S:s$22}function u$1l(_t){return w$12(_t)?t$1Q:C$s(_t)?e$1S:s$22}const d$1u=39.37,U$p=s$22.radius*Math.PI/200,q$g=/UNIT\[([^\]]+)\]\]$/i,p$2p=r$1B,h$16=/UNIT\[([^\]]+)\]/i,B$k=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),b$S=o$1O()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),k$o=_t=>_t*_t,y$1b=_t=>_t*_t*_t,g$Y={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:k$o(.001)},"square-centimeters":{inBaseUnits:k$o(.01)},"square-decimeters":{inBaseUnits:k$o(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:k$o(1e3)},"square-inches":{inBaseUnits:k$o(.0254)},"square-feet":{inBaseUnits:k$o(.3048)},"square-yards":{inBaseUnits:k$o(.9144)},"square-miles":{inBaseUnits:k$o(1609.344)},"square-us-feet":{inBaseUnits:k$o(1200/3937)},acres:{inBaseUnits:.0015625*k$o(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*y$1b(.001)},"cubic-centimeters":{inBaseUnits:1e3*y$1b(.01)},"cubic-decimeters":{inBaseUnits:1e3*y$1b(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*y$1b(1e3)},"cubic-inches":{inBaseUnits:1e3*y$1b(.0254)},"cubic-feet":{inBaseUnits:1e3*y$1b(.3048)},"cubic-yards":{inBaseUnits:1e3*y$1b(.9144)},"cubic-miles":{inBaseUnits:1e3*y$1b(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},_$p=(()=>{const _t={};for(const Tt in g$Y)for(const Mt in g$Y[Tt].units)_t[Mt]=Tt;return _t})();function M$A(_t,Tt,Mt){return _t*g$Y[Mt].units[Tt].inBaseUnits}function w$P(_t,Tt,Mt){return _t/g$Y[Mt].units[Tt].inBaseUnits}const j$I=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],I$t=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function C$m(_t){const Tt=_$p[_t];if(!Tt)throw new Error("unknown type");return Tt}function E$z(_t,Tt=null){return Tt=Tt||C$m(_t),g$Y[Tt].baseUnit===_t}function N$o(_t,Tt,Mt){if(Tt===Mt)return _t;const Pt=C$m(Tt);if(Pt!==C$m(Mt))throw new Error("incompatible units");const Ft=E$z(Tt,Pt)?_t:M$A(_t,Tt,Pt);return E$z(Mt,Pt)?Ft:w$P(Ft,Mt,Pt)}function R$n(_t,Tt){const Mt=N$o(_t,Tt,"meters");return Math.abs(Mt)<3e3?"meters":"kilometers"}function J$e(_t,Tt){const Mt=N$o(_t,Tt,"meters");return Math.abs(Mt)<1e5?"meters":"kilometers"}function K$a(_t,Tt){const Mt=N$o(_t,Tt,"feet");return Math.abs(Mt)<1e3?"feet":"miles"}function A$o(_t,Tt){const Mt=N$o(_t,Tt,"feet");return Math.abs(Mt)<1e5?"feet":"miles"}function T$q(_t,Tt){const Mt=N$o(_t,Tt,"square-meters");return Math.abs(Mt)<3e6?"square-meters":"square-kilometers"}function Y$8(_t,Tt){const Mt=N$o(_t,Tt,"square-feet");return Math.abs(Mt)<1e6?"square-feet":"square-miles"}function G$f(_t,Tt,Mt){return N$o(_t,Tt,"meters")/(Mt*Math.PI/180)}function H$e(_t){return b$S.fromJSON(_t.toLowerCase())||null}function W$8(_t){if(_t&&typeof _t=="object"&&!A$w(_t))return 1;const Tt=z$p(_t);return Tt>1e5?1:Tt}function $$f(_t){return z$p(_t)>=(_t instanceof k$y?p$2q(_t).metersPerDegree:1e5)?"meters":Z$8(_t)}function z$p(_t,Tt=s$22.metersPerDegree){return c$3r(Q$b(_t,!0),Tt)}function Q$b(_t,Tt=!1){let Mt,Pt,Ft=null;if(_t!=null&&(typeof _t=="object"?(Mt=_t.wkid,Pt=_t.wkt):typeof _t=="number"?Mt=_t:typeof _t=="string"&&(Pt=_t)),Mt){if(w$12(Mt))return t$1Q.metersPerDegree;if(C$s(Mt))return e$1S.metersPerDegree;Ft=p$2p.values[p$2p[Mt]],!Ft&&Tt&&B$k.has(Mt)&&(Ft=U$p)}else Pt&&(ie$5(Pt)?Ft=V$k(q$g.exec(Pt),Ft):re$6(Pt)&&(Ft=V$k(h$16.exec(Pt),Ft)));return Ft}function V$k(_t,Tt){return _t&&_t[1]?X$8(_t[1]):Tt}function X$8(_t){return parseFloat(_t.split(",")[1])}function Z$8(_t){let Tt,Mt,Pt=null;if(_t!=null&&(typeof _t=="object"?(Tt=_t.wkid,Mt=_t.wkt):typeof _t=="number"?Tt=_t:typeof _t=="string"&&(Mt=_t)),Tt)Pt=p$2p.units[p$2p[Tt]];else if(Mt){const Ft=ie$5(Mt)?q$g:re$6(Mt)?h$16:null;if(Ft){const Dt=Ft.exec(Mt);Dt&&Dt[1]&&(Pt=ae$5(Dt[1]))}}return r$1P(Pt)?H$e(Pt):null}function ee$6(_t){const Tt=Z$8(_t);return t$2e(Tt)||!j$I.includes(Tt)?null:Tt}function se$5(_t){const Tt=$$f(_t);return t$2e(Tt)||!j$I.includes(Tt)?null:Tt}function te$6(_t){const Tt=Z$8(_t);return t$2e(Tt)?null:I$t.get(Tt)}function re$6(_t){return/^GEOCCS/i.test(_t)}function ie$5(_t){return/^PROJCS/i.test(_t)}const ne$5=1e-7;function ae$5(_t){const Tt=/[\\"\\']{1}([^\\"\\']+)/.exec(_t);let Mt=Tt&&Tt[1];if(!Mt||!p$2p.units.includes(Mt)){const Pt=X$8(_t);Mt=null;const Ft=p$2p.values;for(let Dt=0;Dt<Ft.length;++Dt)if(Math.abs(Pt-Ft[Dt])<ne$5){Mt=p$2p.units[Dt];break}}return Mt}function ue$5(_t){const Tt=Z$8(_t);if(t$2e(Tt))return null;switch(Tt){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}function ce$5(_t){var Ft,Dt,Nt;const Tt="metric";if(t$2e(_t))return Tt;const Mt=_t.map,Pt=Mt&&"portalItem"in Mt?(Ft=Mt.portalItem)==null?void 0:Ft.portal:null;if(Pt)switch((Nt=(Dt=Pt==null?void 0:Pt.user)==null?void 0:Dt.units)!=null?Nt:Pt.units){case Tt:return Tt;case"english":return"imperial"}return c$3r(ue$5(_t.spatialReference),Tt)}const oe$5={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},le$4={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},me$5=o$1O()(oe$5),fe$5=o$1O()(le$4);o$1O()({...oe$5,...le$4});function n$23(_t,Tt){return _t[0]=Tt[0],_t[1]=Tt[1],_t[2]=Tt[2],_t[3]=Tt[3],_t[4]=Tt[4],_t[5]=Tt[5],_t[6]=Tt[6],_t[7]=Tt[7],_t[8]=Tt[8],_t[9]=Tt[9],_t[10]=Tt[10],_t[11]=Tt[11],_t[12]=Tt[12],_t[13]=Tt[13],_t[14]=Tt[14],_t[15]=Tt[15],_t}function s$1v(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt,Qt,Zt,Kt,er,Yt){return _t[0]=Tt,_t[1]=Mt,_t[2]=Pt,_t[3]=Ft,_t[4]=Dt,_t[5]=Nt,_t[6]=Vt,_t[7]=zt,_t[8]=Xt,_t[9]=Ht,_t[10]=Wt,_t[11]=Qt,_t[12]=Zt,_t[13]=Kt,_t[14]=er,_t[15]=Yt,_t}function r$1a(_t){return _t[0]=1,_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=0,_t[5]=1,_t[6]=0,_t[7]=0,_t[8]=0,_t[9]=0,_t[10]=1,_t[11]=0,_t[12]=0,_t[13]=0,_t[14]=0,_t[15]=1,_t}function o$1m(_t,Tt){if(_t===Tt){const Mt=Tt[1],Pt=Tt[2],Ft=Tt[3],Dt=Tt[6],Nt=Tt[7],Vt=Tt[11];_t[1]=Tt[4],_t[2]=Tt[8],_t[3]=Tt[12],_t[4]=Mt,_t[6]=Tt[9],_t[7]=Tt[13],_t[8]=Pt,_t[9]=Dt,_t[11]=Tt[14],_t[12]=Ft,_t[13]=Nt,_t[14]=Vt}else _t[0]=Tt[0],_t[1]=Tt[4],_t[2]=Tt[8],_t[3]=Tt[12],_t[4]=Tt[1],_t[5]=Tt[5],_t[6]=Tt[9],_t[7]=Tt[13],_t[8]=Tt[2],_t[9]=Tt[6],_t[10]=Tt[10],_t[11]=Tt[14],_t[12]=Tt[3],_t[13]=Tt[7],_t[14]=Tt[11],_t[15]=Tt[15];return _t}function h$15(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[3],Nt=Tt[4],Vt=Tt[5],zt=Tt[6],Xt=Tt[7],Ht=Tt[8],Wt=Tt[9],Qt=Tt[10],Zt=Tt[11],Kt=Tt[12],er=Tt[13],Yt=Tt[14],rr=Tt[15],ir=Mt*Vt-Pt*Nt,nr=Mt*zt-Ft*Nt,ar=Mt*Xt-Dt*Nt,or=Pt*zt-Ft*Vt,ur=Pt*Xt-Dt*Vt,dr=Ft*Xt-Dt*zt,hr=Ht*er-Wt*Kt,gr=Ht*Yt-Qt*Kt,pr=Ht*rr-Zt*Kt,mr=Wt*Yt-Qt*er,wr=Wt*rr-Zt*er,br=Qt*rr-Zt*Yt;let _r=ir*br-nr*wr+ar*mr+or*pr-ur*gr+dr*hr;return _r?(_r=1/_r,_t[0]=(Vt*br-zt*wr+Xt*mr)*_r,_t[1]=(Ft*wr-Pt*br-Dt*mr)*_r,_t[2]=(er*dr-Yt*ur+rr*or)*_r,_t[3]=(Qt*ur-Wt*dr-Zt*or)*_r,_t[4]=(zt*pr-Nt*br-Xt*gr)*_r,_t[5]=(Mt*br-Ft*pr+Dt*gr)*_r,_t[6]=(Yt*ar-Kt*dr-rr*nr)*_r,_t[7]=(Ht*dr-Qt*ar+Zt*nr)*_r,_t[8]=(Nt*wr-Vt*pr+Xt*hr)*_r,_t[9]=(Pt*pr-Mt*wr-Dt*hr)*_r,_t[10]=(Kt*ur-er*ar+rr*ir)*_r,_t[11]=(Wt*ar-Ht*ur-Zt*ir)*_r,_t[12]=(Vt*gr-Nt*mr-zt*hr)*_r,_t[13]=(Mt*mr-Pt*gr+Ft*hr)*_r,_t[14]=(er*nr-Kt*or-Yt*ir)*_r,_t[15]=(Ht*or-Wt*nr+Qt*ir)*_r,_t):null}function M$z(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[3],Nt=Tt[4],Vt=Tt[5],zt=Tt[6],Xt=Tt[7],Ht=Tt[8],Wt=Tt[9],Qt=Tt[10],Zt=Tt[11],Kt=Tt[12],er=Tt[13],Yt=Tt[14],rr=Tt[15];return _t[0]=Vt*(Qt*rr-Zt*Yt)-Wt*(zt*rr-Xt*Yt)+er*(zt*Zt-Xt*Qt),_t[1]=-(Pt*(Qt*rr-Zt*Yt)-Wt*(Ft*rr-Dt*Yt)+er*(Ft*Zt-Dt*Qt)),_t[2]=Pt*(zt*rr-Xt*Yt)-Vt*(Ft*rr-Dt*Yt)+er*(Ft*Xt-Dt*zt),_t[3]=-(Pt*(zt*Zt-Xt*Qt)-Vt*(Ft*Zt-Dt*Qt)+Wt*(Ft*Xt-Dt*zt)),_t[4]=-(Nt*(Qt*rr-Zt*Yt)-Ht*(zt*rr-Xt*Yt)+Kt*(zt*Zt-Xt*Qt)),_t[5]=Mt*(Qt*rr-Zt*Yt)-Ht*(Ft*rr-Dt*Yt)+Kt*(Ft*Zt-Dt*Qt),_t[6]=-(Mt*(zt*rr-Xt*Yt)-Nt*(Ft*rr-Dt*Yt)+Kt*(Ft*Xt-Dt*zt)),_t[7]=Mt*(zt*Zt-Xt*Qt)-Nt*(Ft*Zt-Dt*Qt)+Ht*(Ft*Xt-Dt*zt),_t[8]=Nt*(Wt*rr-Zt*er)-Ht*(Vt*rr-Xt*er)+Kt*(Vt*Zt-Xt*Wt),_t[9]=-(Mt*(Wt*rr-Zt*er)-Ht*(Pt*rr-Dt*er)+Kt*(Pt*Zt-Dt*Wt)),_t[10]=Mt*(Vt*rr-Xt*er)-Nt*(Pt*rr-Dt*er)+Kt*(Pt*Xt-Dt*Vt),_t[11]=-(Mt*(Vt*Zt-Xt*Wt)-Nt*(Pt*Zt-Dt*Wt)+Ht*(Pt*Xt-Dt*Vt)),_t[12]=-(Nt*(Wt*Yt-Qt*er)-Ht*(Vt*Yt-zt*er)+Kt*(Vt*Qt-zt*Wt)),_t[13]=Mt*(Wt*Yt-Qt*er)-Ht*(Pt*Yt-Ft*er)+Kt*(Pt*Qt-Ft*Wt),_t[14]=-(Mt*(Vt*Yt-zt*er)-Nt*(Pt*Yt-Ft*er)+Kt*(Pt*zt-Ft*Vt)),_t[15]=Mt*(Vt*Qt-zt*Wt)-Nt*(Pt*Qt-Ft*Wt)+Ht*(Pt*zt-Ft*Vt),_t}function e$1p(_t){const Tt=_t[0],Mt=_t[1],Pt=_t[2],Ft=_t[3],Dt=_t[4],Nt=_t[5],Vt=_t[6],zt=_t[7],Xt=_t[8],Ht=_t[9],Wt=_t[10],Qt=_t[11],Zt=_t[12],Kt=_t[13],er=_t[14],Yt=_t[15];return(Tt*Nt-Mt*Dt)*(Wt*Yt-Qt*er)-(Tt*Vt-Pt*Dt)*(Ht*Yt-Qt*Kt)+(Tt*zt-Ft*Dt)*(Ht*er-Wt*Kt)+(Mt*Vt-Pt*Nt)*(Xt*Yt-Qt*Zt)-(Mt*zt-Ft*Nt)*(Xt*er-Wt*Zt)+(Pt*zt-Ft*Vt)*(Xt*Kt-Ht*Zt)}function u$1k(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Tt[3],Vt=Tt[4],zt=Tt[5],Xt=Tt[6],Ht=Tt[7],Wt=Tt[8],Qt=Tt[9],Zt=Tt[10],Kt=Tt[11],er=Tt[12],Yt=Tt[13],rr=Tt[14],ir=Tt[15];let nr=Mt[0],ar=Mt[1],or=Mt[2],ur=Mt[3];return _t[0]=nr*Pt+ar*Vt+or*Wt+ur*er,_t[1]=nr*Ft+ar*zt+or*Qt+ur*Yt,_t[2]=nr*Dt+ar*Xt+or*Zt+ur*rr,_t[3]=nr*Nt+ar*Ht+or*Kt+ur*ir,nr=Mt[4],ar=Mt[5],or=Mt[6],ur=Mt[7],_t[4]=nr*Pt+ar*Vt+or*Wt+ur*er,_t[5]=nr*Ft+ar*zt+or*Qt+ur*Yt,_t[6]=nr*Dt+ar*Xt+or*Zt+ur*rr,_t[7]=nr*Nt+ar*Ht+or*Kt+ur*ir,nr=Mt[8],ar=Mt[9],or=Mt[10],ur=Mt[11],_t[8]=nr*Pt+ar*Vt+or*Wt+ur*er,_t[9]=nr*Ft+ar*zt+or*Qt+ur*Yt,_t[10]=nr*Dt+ar*Xt+or*Zt+ur*rr,_t[11]=nr*Nt+ar*Ht+or*Kt+ur*ir,nr=Mt[12],ar=Mt[13],or=Mt[14],ur=Mt[15],_t[12]=nr*Pt+ar*Vt+or*Wt+ur*er,_t[13]=nr*Ft+ar*zt+or*Qt+ur*Yt,_t[14]=nr*Dt+ar*Xt+or*Zt+ur*rr,_t[15]=nr*Nt+ar*Ht+or*Kt+ur*ir,_t}function c$2c(_t,Tt,Mt){const Pt=Mt[0],Ft=Mt[1],Dt=Mt[2];if(Tt===_t)_t[12]=Tt[0]*Pt+Tt[4]*Ft+Tt[8]*Dt+Tt[12],_t[13]=Tt[1]*Pt+Tt[5]*Ft+Tt[9]*Dt+Tt[13],_t[14]=Tt[2]*Pt+Tt[6]*Ft+Tt[10]*Dt+Tt[14],_t[15]=Tt[3]*Pt+Tt[7]*Ft+Tt[11]*Dt+Tt[15];else{const Nt=Tt[0],Vt=Tt[1],zt=Tt[2],Xt=Tt[3],Ht=Tt[4],Wt=Tt[5],Qt=Tt[6],Zt=Tt[7],Kt=Tt[8],er=Tt[9],Yt=Tt[10],rr=Tt[11];_t[0]=Nt,_t[1]=Vt,_t[2]=zt,_t[3]=Xt,_t[4]=Ht,_t[5]=Wt,_t[6]=Qt,_t[7]=Zt,_t[8]=Kt,_t[9]=er,_t[10]=Yt,_t[11]=rr,_t[12]=Nt*Pt+Ht*Ft+Kt*Dt+Tt[12],_t[13]=Vt*Pt+Wt*Ft+er*Dt+Tt[13],_t[14]=zt*Pt+Qt*Ft+Yt*Dt+Tt[14],_t[15]=Xt*Pt+Zt*Ft+rr*Dt+Tt[15]}return _t}function i$1Q(_t,Tt,Mt){const Pt=Mt[0],Ft=Mt[1],Dt=Mt[2];return _t[0]=Tt[0]*Pt,_t[1]=Tt[1]*Pt,_t[2]=Tt[2]*Pt,_t[3]=Tt[3]*Pt,_t[4]=Tt[4]*Ft,_t[5]=Tt[5]*Ft,_t[6]=Tt[6]*Ft,_t[7]=Tt[7]*Ft,_t[8]=Tt[8]*Dt,_t[9]=Tt[9]*Dt,_t[10]=Tt[10]*Dt,_t[11]=Tt[11]*Dt,_t[12]=Tt[12],_t[13]=Tt[13],_t[14]=Tt[14],_t[15]=Tt[15],_t}function f$12(_t,Tt,Mt,Pt){let Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt,Qt,Zt,Kt,er,Yt,rr,ir,nr,ar,or,ur,dr,hr,gr,pr,mr,wr=Pt[0],br=Pt[1],_r=Pt[2],Mr=Math.sqrt(wr*wr+br*br+_r*_r);return Mr<t$1M?null:(Mr=1/Mr,wr*=Mr,br*=Mr,_r*=Mr,Ft=Math.sin(Mt),Dt=Math.cos(Mt),Nt=1-Dt,Vt=Tt[0],zt=Tt[1],Xt=Tt[2],Ht=Tt[3],Wt=Tt[4],Qt=Tt[5],Zt=Tt[6],Kt=Tt[7],er=Tt[8],Yt=Tt[9],rr=Tt[10],ir=Tt[11],nr=wr*wr*Nt+Dt,ar=br*wr*Nt+_r*Ft,or=_r*wr*Nt-br*Ft,ur=wr*br*Nt-_r*Ft,dr=br*br*Nt+Dt,hr=_r*br*Nt+wr*Ft,gr=wr*_r*Nt+br*Ft,pr=br*_r*Nt-wr*Ft,mr=_r*_r*Nt+Dt,_t[0]=Vt*nr+Wt*ar+er*or,_t[1]=zt*nr+Qt*ar+Yt*or,_t[2]=Xt*nr+Zt*ar+rr*or,_t[3]=Ht*nr+Kt*ar+ir*or,_t[4]=Vt*ur+Wt*dr+er*hr,_t[5]=zt*ur+Qt*dr+Yt*hr,_t[6]=Xt*ur+Zt*dr+rr*hr,_t[7]=Ht*ur+Kt*dr+ir*hr,_t[8]=Vt*gr+Wt*pr+er*mr,_t[9]=zt*gr+Qt*pr+Yt*mr,_t[10]=Xt*gr+Zt*pr+rr*mr,_t[11]=Ht*gr+Kt*pr+ir*mr,Tt!==_t&&(_t[12]=Tt[12],_t[13]=Tt[13],_t[14]=Tt[14],_t[15]=Tt[15]),_t)}function b$R(_t,Tt,Mt){const Pt=Math.sin(Mt),Ft=Math.cos(Mt),Dt=Tt[4],Nt=Tt[5],Vt=Tt[6],zt=Tt[7],Xt=Tt[8],Ht=Tt[9],Wt=Tt[10],Qt=Tt[11];return Tt!==_t&&(_t[0]=Tt[0],_t[1]=Tt[1],_t[2]=Tt[2],_t[3]=Tt[3],_t[12]=Tt[12],_t[13]=Tt[13],_t[14]=Tt[14],_t[15]=Tt[15]),_t[4]=Dt*Ft+Xt*Pt,_t[5]=Nt*Ft+Ht*Pt,_t[6]=Vt*Ft+Wt*Pt,_t[7]=zt*Ft+Qt*Pt,_t[8]=Xt*Ft-Dt*Pt,_t[9]=Ht*Ft-Nt*Pt,_t[10]=Wt*Ft-Vt*Pt,_t[11]=Qt*Ft-zt*Pt,_t}function l$1B(_t,Tt,Mt){const Pt=Math.sin(Mt),Ft=Math.cos(Mt),Dt=Tt[0],Nt=Tt[1],Vt=Tt[2],zt=Tt[3],Xt=Tt[8],Ht=Tt[9],Wt=Tt[10],Qt=Tt[11];return Tt!==_t&&(_t[4]=Tt[4],_t[5]=Tt[5],_t[6]=Tt[6],_t[7]=Tt[7],_t[12]=Tt[12],_t[13]=Tt[13],_t[14]=Tt[14],_t[15]=Tt[15]),_t[0]=Dt*Ft-Xt*Pt,_t[1]=Nt*Ft-Ht*Pt,_t[2]=Vt*Ft-Wt*Pt,_t[3]=zt*Ft-Qt*Pt,_t[8]=Dt*Pt+Xt*Ft,_t[9]=Nt*Pt+Ht*Ft,_t[10]=Vt*Pt+Wt*Ft,_t[11]=zt*Pt+Qt*Ft,_t}function m$1n(_t,Tt,Mt){const Pt=Math.sin(Mt),Ft=Math.cos(Mt),Dt=Tt[0],Nt=Tt[1],Vt=Tt[2],zt=Tt[3],Xt=Tt[4],Ht=Tt[5],Wt=Tt[6],Qt=Tt[7];return Tt!==_t&&(_t[8]=Tt[8],_t[9]=Tt[9],_t[10]=Tt[10],_t[11]=Tt[11],_t[12]=Tt[12],_t[13]=Tt[13],_t[14]=Tt[14],_t[15]=Tt[15]),_t[0]=Dt*Ft+Xt*Pt,_t[1]=Nt*Ft+Ht*Pt,_t[2]=Vt*Ft+Wt*Pt,_t[3]=zt*Ft+Qt*Pt,_t[4]=Xt*Ft-Dt*Pt,_t[5]=Ht*Ft-Nt*Pt,_t[6]=Wt*Ft-Vt*Pt,_t[7]=Qt*Ft-zt*Pt,_t}function x$E(_t,Tt){return _t[0]=1,_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=0,_t[5]=1,_t[6]=0,_t[7]=0,_t[8]=0,_t[9]=0,_t[10]=1,_t[11]=0,_t[12]=Tt[0],_t[13]=Tt[1],_t[14]=Tt[2],_t[15]=1,_t}function q$f(_t,Tt){return _t[0]=Tt[0],_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=0,_t[5]=Tt[1],_t[6]=0,_t[7]=0,_t[8]=0,_t[9]=0,_t[10]=Tt[2],_t[11]=0,_t[12]=0,_t[13]=0,_t[14]=0,_t[15]=1,_t}function p$2o(_t,Tt,Mt){let Pt,Ft,Dt,Nt=Mt[0],Vt=Mt[1],zt=Mt[2],Xt=Math.sqrt(Nt*Nt+Vt*Vt+zt*zt);return Xt<t$1M?null:(Xt=1/Xt,Nt*=Xt,Vt*=Xt,zt*=Xt,Pt=Math.sin(Tt),Ft=Math.cos(Tt),Dt=1-Ft,_t[0]=Nt*Nt*Dt+Ft,_t[1]=Vt*Nt*Dt+zt*Pt,_t[2]=zt*Nt*Dt-Vt*Pt,_t[3]=0,_t[4]=Nt*Vt*Dt-zt*Pt,_t[5]=Vt*Vt*Dt+Ft,_t[6]=zt*Vt*Dt+Nt*Pt,_t[7]=0,_t[8]=Nt*zt*Dt+Vt*Pt,_t[9]=Vt*zt*Dt-Nt*Pt,_t[10]=zt*zt*Dt+Ft,_t[11]=0,_t[12]=0,_t[13]=0,_t[14]=0,_t[15]=1,_t)}function g$X(_t,Tt){const Mt=Math.sin(Tt),Pt=Math.cos(Tt);return _t[0]=1,_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=0,_t[5]=Pt,_t[6]=Mt,_t[7]=0,_t[8]=0,_t[9]=-Mt,_t[10]=Pt,_t[11]=0,_t[12]=0,_t[13]=0,_t[14]=0,_t[15]=1,_t}function d$1t(_t,Tt){const Mt=Math.sin(Tt),Pt=Math.cos(Tt);return _t[0]=Pt,_t[1]=0,_t[2]=-Mt,_t[3]=0,_t[4]=0,_t[5]=1,_t[6]=0,_t[7]=0,_t[8]=Mt,_t[9]=0,_t[10]=Pt,_t[11]=0,_t[12]=0,_t[13]=0,_t[14]=0,_t[15]=1,_t}function R$m(_t,Tt){const Mt=Math.sin(Tt),Pt=Math.cos(Tt);return _t[0]=Pt,_t[1]=Mt,_t[2]=0,_t[3]=0,_t[4]=-Mt,_t[5]=Pt,_t[6]=0,_t[7]=0,_t[8]=0,_t[9]=0,_t[10]=1,_t[11]=0,_t[12]=0,_t[13]=0,_t[14]=0,_t[15]=1,_t}function S$y(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Tt[3],Vt=Pt+Pt,zt=Ft+Ft,Xt=Dt+Dt,Ht=Pt*Vt,Wt=Pt*zt,Qt=Pt*Xt,Zt=Ft*zt,Kt=Ft*Xt,er=Dt*Xt,Yt=Nt*Vt,rr=Nt*zt,ir=Nt*Xt;return _t[0]=1-(Zt+er),_t[1]=Wt+ir,_t[2]=Qt-rr,_t[3]=0,_t[4]=Wt-ir,_t[5]=1-(Ht+er),_t[6]=Kt+Yt,_t[7]=0,_t[8]=Qt+rr,_t[9]=Kt-Yt,_t[10]=1-(Ht+Zt),_t[11]=0,_t[12]=Mt[0],_t[13]=Mt[1],_t[14]=Mt[2],_t[15]=1,_t}function y$1a(_t,Tt){const Mt=T$p,Pt=-Tt[0],Ft=-Tt[1],Dt=-Tt[2],Nt=Tt[3],Vt=Tt[4],zt=Tt[5],Xt=Tt[6],Ht=Tt[7],Wt=Pt*Pt+Ft*Ft+Dt*Dt+Nt*Nt;return Wt>0?(Mt[0]=2*(Vt*Nt+Ht*Pt+zt*Dt-Xt*Ft)/Wt,Mt[1]=2*(zt*Nt+Ht*Ft+Xt*Pt-Vt*Dt)/Wt,Mt[2]=2*(Xt*Nt+Ht*Dt+Vt*Ft-zt*Pt)/Wt):(Mt[0]=2*(Vt*Nt+Ht*Pt+zt*Dt-Xt*Ft),Mt[1]=2*(zt*Nt+Ht*Ft+Xt*Pt-Vt*Dt),Mt[2]=2*(Xt*Nt+Ht*Dt+Vt*Ft-zt*Pt)),S$y(_t,Tt,Mt),_t}const T$p=n$2z();function j$H(_t,Tt){return _t[0]=Tt[12],_t[1]=Tt[13],_t[2]=Tt[14],_t}function v$O(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[4],Nt=Tt[5],Vt=Tt[6],zt=Tt[8],Xt=Tt[9],Ht=Tt[10];return _t[0]=Math.sqrt(Mt*Mt+Pt*Pt+Ft*Ft),_t[1]=Math.sqrt(Dt*Dt+Nt*Nt+Vt*Vt),_t[2]=Math.sqrt(zt*zt+Xt*Xt+Ht*Ht),_t}function O$o(_t,Tt){const Mt=Tt[0]+Tt[5]+Tt[10];let Pt=0;return Mt>0?(Pt=2*Math.sqrt(Mt+1),_t[3]=.25*Pt,_t[0]=(Tt[6]-Tt[9])/Pt,_t[1]=(Tt[8]-Tt[2])/Pt,_t[2]=(Tt[1]-Tt[4])/Pt):Tt[0]>Tt[5]&&Tt[0]>Tt[10]?(Pt=2*Math.sqrt(1+Tt[0]-Tt[5]-Tt[10]),_t[3]=(Tt[6]-Tt[9])/Pt,_t[0]=.25*Pt,_t[1]=(Tt[1]+Tt[4])/Pt,_t[2]=(Tt[8]+Tt[2])/Pt):Tt[5]>Tt[10]?(Pt=2*Math.sqrt(1+Tt[5]-Tt[0]-Tt[10]),_t[3]=(Tt[8]-Tt[2])/Pt,_t[0]=(Tt[1]+Tt[4])/Pt,_t[1]=.25*Pt,_t[2]=(Tt[6]+Tt[9])/Pt):(Pt=2*Math.sqrt(1+Tt[10]-Tt[0]-Tt[5]),_t[3]=(Tt[1]-Tt[4])/Pt,_t[0]=(Tt[8]+Tt[2])/Pt,_t[1]=(Tt[6]+Tt[9])/Pt,_t[2]=.25*Pt),_t}function P$k(_t,Tt,Mt,Pt){const Ft=Tt[0],Dt=Tt[1],Nt=Tt[2],Vt=Tt[3],zt=Ft+Ft,Xt=Dt+Dt,Ht=Nt+Nt,Wt=Ft*zt,Qt=Ft*Xt,Zt=Ft*Ht,Kt=Dt*Xt,er=Dt*Ht,Yt=Nt*Ht,rr=Vt*zt,ir=Vt*Xt,nr=Vt*Ht,ar=Pt[0],or=Pt[1],ur=Pt[2];return _t[0]=(1-(Kt+Yt))*ar,_t[1]=(Qt+nr)*ar,_t[2]=(Zt-ir)*ar,_t[3]=0,_t[4]=(Qt-nr)*or,_t[5]=(1-(Wt+Yt))*or,_t[6]=(er+rr)*or,_t[7]=0,_t[8]=(Zt+ir)*ur,_t[9]=(er-rr)*ur,_t[10]=(1-(Wt+Kt))*ur,_t[11]=0,_t[12]=Mt[0],_t[13]=Mt[1],_t[14]=Mt[2],_t[15]=1,_t}function D$p(_t,Tt,Mt,Pt,Ft){const Dt=Tt[0],Nt=Tt[1],Vt=Tt[2],zt=Tt[3],Xt=Dt+Dt,Ht=Nt+Nt,Wt=Vt+Vt,Qt=Dt*Xt,Zt=Dt*Ht,Kt=Dt*Wt,er=Nt*Ht,Yt=Nt*Wt,rr=Vt*Wt,ir=zt*Xt,nr=zt*Ht,ar=zt*Wt,or=Pt[0],ur=Pt[1],dr=Pt[2],hr=Ft[0],gr=Ft[1],pr=Ft[2],mr=(1-(er+rr))*or,wr=(Zt+ar)*or,br=(Kt-nr)*or,_r=(Zt-ar)*ur,Mr=(1-(Qt+rr))*ur,Ar=(Yt+ir)*ur,xr=(Kt+nr)*dr,yr=(Yt-ir)*dr,Er=(1-(Qt+er))*dr;return _t[0]=mr,_t[1]=wr,_t[2]=br,_t[3]=0,_t[4]=_r,_t[5]=Mr,_t[6]=Ar,_t[7]=0,_t[8]=xr,_t[9]=yr,_t[10]=Er,_t[11]=0,_t[12]=Mt[0]+hr-(mr*hr+_r*gr+xr*pr),_t[13]=Mt[1]+gr-(wr*hr+Mr*gr+yr*pr),_t[14]=Mt[2]+pr-(br*hr+Ar*gr+Er*pr),_t[15]=1,_t}function I$s(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[3],Nt=Mt+Mt,Vt=Pt+Pt,zt=Ft+Ft,Xt=Mt*Nt,Ht=Pt*Nt,Wt=Pt*Vt,Qt=Ft*Nt,Zt=Ft*Vt,Kt=Ft*zt,er=Dt*Nt,Yt=Dt*Vt,rr=Dt*zt;return _t[0]=1-Wt-Kt,_t[1]=Ht+rr,_t[2]=Qt-Yt,_t[3]=0,_t[4]=Ht-rr,_t[5]=1-Xt-Kt,_t[6]=Zt+er,_t[7]=0,_t[8]=Qt+Yt,_t[9]=Zt-er,_t[10]=1-Xt-Wt,_t[11]=0,_t[12]=0,_t[13]=0,_t[14]=0,_t[15]=1,_t}function A$n(_t,Tt,Mt,Pt,Ft,Dt,Nt){const Vt=1/(Mt-Tt),zt=1/(Ft-Pt),Xt=1/(Dt-Nt);return _t[0]=2*Dt*Vt,_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=0,_t[5]=2*Dt*zt,_t[6]=0,_t[7]=0,_t[8]=(Mt+Tt)*Vt,_t[9]=(Ft+Pt)*zt,_t[10]=(Nt+Dt)*Xt,_t[11]=-1,_t[12]=0,_t[13]=0,_t[14]=Nt*Dt*2*Xt,_t[15]=0,_t}function _$o(_t,Tt,Mt,Pt,Ft){const Dt=1/Math.tan(Tt/2);let Nt;return _t[0]=Dt/Mt,_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=0,_t[5]=Dt,_t[6]=0,_t[7]=0,_t[8]=0,_t[9]=0,_t[11]=-1,_t[12]=0,_t[13]=0,_t[15]=0,Ft!=null&&Ft!==1/0?(Nt=1/(Pt-Ft),_t[10]=(Ft+Pt)*Nt,_t[14]=2*Ft*Pt*Nt):(_t[10]=-1,_t[14]=-2*Pt),_t}function w$O(_t,Tt,Mt,Pt){const Ft=Math.tan(Tt.upDegrees*Math.PI/180),Dt=Math.tan(Tt.downDegrees*Math.PI/180),Nt=Math.tan(Tt.leftDegrees*Math.PI/180),Vt=Math.tan(Tt.rightDegrees*Math.PI/180),zt=2/(Nt+Vt),Xt=2/(Ft+Dt);return _t[0]=zt,_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=0,_t[5]=Xt,_t[6]=0,_t[7]=0,_t[8]=-(Nt-Vt)*zt*.5,_t[9]=(Ft-Dt)*Xt*.5,_t[10]=Pt/(Mt-Pt),_t[11]=-1,_t[12]=0,_t[13]=0,_t[14]=Pt*Mt/(Mt-Pt),_t[15]=0,_t}function E$y(_t,Tt,Mt,Pt,Ft,Dt,Nt){const Vt=1/(Tt-Mt),zt=1/(Pt-Ft),Xt=1/(Dt-Nt);return _t[0]=-2*Vt,_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=0,_t[5]=-2*zt,_t[6]=0,_t[7]=0,_t[8]=0,_t[9]=0,_t[10]=2*Xt,_t[11]=0,_t[12]=(Tt+Mt)*Vt,_t[13]=(Ft+Pt)*zt,_t[14]=(Nt+Dt)*Xt,_t[15]=1,_t}function F$p(_t,Tt,Mt,Pt){let Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt,Qt,Zt;const Kt=Tt[0],er=Tt[1],Yt=Tt[2],rr=Pt[0],ir=Pt[1],nr=Pt[2],ar=Mt[0],or=Mt[1],ur=Mt[2];return Math.abs(Kt-ar)<t$1M&&Math.abs(er-or)<t$1M&&Math.abs(Yt-ur)<t$1M?r$1a(_t):(Ht=Kt-ar,Wt=er-or,Qt=Yt-ur,Zt=1/Math.sqrt(Ht*Ht+Wt*Wt+Qt*Qt),Ht*=Zt,Wt*=Zt,Qt*=Zt,Ft=ir*Qt-nr*Wt,Dt=nr*Ht-rr*Qt,Nt=rr*Wt-ir*Ht,Zt=Math.sqrt(Ft*Ft+Dt*Dt+Nt*Nt),Zt?(Zt=1/Zt,Ft*=Zt,Dt*=Zt,Nt*=Zt):(Ft=0,Dt=0,Nt=0),Vt=Wt*Nt-Qt*Dt,zt=Qt*Ft-Ht*Nt,Xt=Ht*Dt-Wt*Ft,Zt=Math.sqrt(Vt*Vt+zt*zt+Xt*Xt),Zt?(Zt=1/Zt,Vt*=Zt,zt*=Zt,Xt*=Zt):(Vt=0,zt=0,Xt=0),_t[0]=Ft,_t[1]=Vt,_t[2]=Ht,_t[3]=0,_t[4]=Dt,_t[5]=zt,_t[6]=Wt,_t[7]=0,_t[8]=Nt,_t[9]=Xt,_t[10]=Qt,_t[11]=0,_t[12]=-(Ft*Kt+Dt*er+Nt*Yt),_t[13]=-(Vt*Kt+zt*er+Xt*Yt),_t[14]=-(Ht*Kt+Wt*er+Qt*Yt),_t[15]=1,_t)}function Q$a(_t,Tt,Mt,Pt){const Ft=Tt[0],Dt=Tt[1],Nt=Tt[2],Vt=Pt[0],zt=Pt[1],Xt=Pt[2];let Ht=Ft-Mt[0],Wt=Dt-Mt[1],Qt=Nt-Mt[2],Zt=Ht*Ht+Wt*Wt+Qt*Qt;Zt>0&&(Zt=1/Math.sqrt(Zt),Ht*=Zt,Wt*=Zt,Qt*=Zt);let Kt=zt*Qt-Xt*Wt,er=Xt*Ht-Vt*Qt,Yt=Vt*Wt-zt*Ht;return Zt=Kt*Kt+er*er+Yt*Yt,Zt>0&&(Zt=1/Math.sqrt(Zt),Kt*=Zt,er*=Zt,Yt*=Zt),_t[0]=Kt,_t[1]=er,_t[2]=Yt,_t[3]=0,_t[4]=Wt*Yt-Qt*er,_t[5]=Qt*Kt-Ht*Yt,_t[6]=Ht*er-Wt*Kt,_t[7]=0,_t[8]=Ht,_t[9]=Wt,_t[10]=Qt,_t[11]=0,_t[12]=Ft,_t[13]=Dt,_t[14]=Nt,_t[15]=1,_t}function k$n(_t){return"mat4("+_t[0]+", "+_t[1]+", "+_t[2]+", "+_t[3]+", "+_t[4]+", "+_t[5]+", "+_t[6]+", "+_t[7]+", "+_t[8]+", "+_t[9]+", "+_t[10]+", "+_t[11]+", "+_t[12]+", "+_t[13]+", "+_t[14]+", "+_t[15]+")"}function z$o(_t){return Math.sqrt(_t[0]**2+_t[1]**2+_t[2]**2+_t[3]**2+_t[4]**2+_t[5]**2+_t[6]**2+_t[7]**2+_t[8]**2+_t[9]**2+_t[10]**2+_t[11]**2+_t[12]**2+_t[13]**2+_t[14]**2+_t[15]**2)}function N$n(_t,Tt,Mt){return _t[0]=Tt[0]+Mt[0],_t[1]=Tt[1]+Mt[1],_t[2]=Tt[2]+Mt[2],_t[3]=Tt[3]+Mt[3],_t[4]=Tt[4]+Mt[4],_t[5]=Tt[5]+Mt[5],_t[6]=Tt[6]+Mt[6],_t[7]=Tt[7]+Mt[7],_t[8]=Tt[8]+Mt[8],_t[9]=Tt[9]+Mt[9],_t[10]=Tt[10]+Mt[10],_t[11]=Tt[11]+Mt[11],_t[12]=Tt[12]+Mt[12],_t[13]=Tt[13]+Mt[13],_t[14]=Tt[14]+Mt[14],_t[15]=Tt[15]+Mt[15],_t}function X$7(_t,Tt,Mt){return _t[0]=Tt[0]-Mt[0],_t[1]=Tt[1]-Mt[1],_t[2]=Tt[2]-Mt[2],_t[3]=Tt[3]-Mt[3],_t[4]=Tt[4]-Mt[4],_t[5]=Tt[5]-Mt[5],_t[6]=Tt[6]-Mt[6],_t[7]=Tt[7]-Mt[7],_t[8]=Tt[8]-Mt[8],_t[9]=Tt[9]-Mt[9],_t[10]=Tt[10]-Mt[10],_t[11]=Tt[11]-Mt[11],_t[12]=Tt[12]-Mt[12],_t[13]=Tt[13]-Mt[13],_t[14]=Tt[14]-Mt[14],_t[15]=Tt[15]-Mt[15],_t}function Y$7(_t,Tt,Mt){return _t[0]=Tt[0]*Mt,_t[1]=Tt[1]*Mt,_t[2]=Tt[2]*Mt,_t[3]=Tt[3]*Mt,_t[4]=Tt[4]*Mt,_t[5]=Tt[5]*Mt,_t[6]=Tt[6]*Mt,_t[7]=Tt[7]*Mt,_t[8]=Tt[8]*Mt,_t[9]=Tt[9]*Mt,_t[10]=Tt[10]*Mt,_t[11]=Tt[11]*Mt,_t[12]=Tt[12]*Mt,_t[13]=Tt[13]*Mt,_t[14]=Tt[14]*Mt,_t[15]=Tt[15]*Mt,_t}function Z$7(_t,Tt,Mt,Pt){return _t[0]=Tt[0]+Mt[0]*Pt,_t[1]=Tt[1]+Mt[1]*Pt,_t[2]=Tt[2]+Mt[2]*Pt,_t[3]=Tt[3]+Mt[3]*Pt,_t[4]=Tt[4]+Mt[4]*Pt,_t[5]=Tt[5]+Mt[5]*Pt,_t[6]=Tt[6]+Mt[6]*Pt,_t[7]=Tt[7]+Mt[7]*Pt,_t[8]=Tt[8]+Mt[8]*Pt,_t[9]=Tt[9]+Mt[9]*Pt,_t[10]=Tt[10]+Mt[10]*Pt,_t[11]=Tt[11]+Mt[11]*Pt,_t[12]=Tt[12]+Mt[12]*Pt,_t[13]=Tt[13]+Mt[13]*Pt,_t[14]=Tt[14]+Mt[14]*Pt,_t[15]=Tt[15]+Mt[15]*Pt,_t}function B$j(_t,Tt){return _t[0]===Tt[0]&&_t[1]===Tt[1]&&_t[2]===Tt[2]&&_t[3]===Tt[3]&&_t[4]===Tt[4]&&_t[5]===Tt[5]&&_t[6]===Tt[6]&&_t[7]===Tt[7]&&_t[8]===Tt[8]&&_t[9]===Tt[9]&&_t[10]===Tt[10]&&_t[11]===Tt[11]&&_t[12]===Tt[12]&&_t[13]===Tt[13]&&_t[14]===Tt[14]&&_t[15]===Tt[15]}function C$l(_t,Tt){if(_t===Tt)return!0;const Mt=_t[0],Pt=_t[1],Ft=_t[2],Dt=_t[3],Nt=_t[4],Vt=_t[5],zt=_t[6],Xt=_t[7],Ht=_t[8],Wt=_t[9],Qt=_t[10],Zt=_t[11],Kt=_t[12],er=_t[13],Yt=_t[14],rr=_t[15],ir=Tt[0],nr=Tt[1],ar=Tt[2],or=Tt[3],ur=Tt[4],dr=Tt[5],hr=Tt[6],gr=Tt[7],pr=Tt[8],mr=Tt[9],wr=Tt[10],br=Tt[11],_r=Tt[12],Mr=Tt[13],Ar=Tt[14],xr=Tt[15];return Math.abs(Mt-ir)<=t$1M*Math.max(1,Math.abs(Mt),Math.abs(ir))&&Math.abs(Pt-nr)<=t$1M*Math.max(1,Math.abs(Pt),Math.abs(nr))&&Math.abs(Ft-ar)<=t$1M*Math.max(1,Math.abs(Ft),Math.abs(ar))&&Math.abs(Dt-or)<=t$1M*Math.max(1,Math.abs(Dt),Math.abs(or))&&Math.abs(Nt-ur)<=t$1M*Math.max(1,Math.abs(Nt),Math.abs(ur))&&Math.abs(Vt-dr)<=t$1M*Math.max(1,Math.abs(Vt),Math.abs(dr))&&Math.abs(zt-hr)<=t$1M*Math.max(1,Math.abs(zt),Math.abs(hr))&&Math.abs(Xt-gr)<=t$1M*Math.max(1,Math.abs(Xt),Math.abs(gr))&&Math.abs(Ht-pr)<=t$1M*Math.max(1,Math.abs(Ht),Math.abs(pr))&&Math.abs(Wt-mr)<=t$1M*Math.max(1,Math.abs(Wt),Math.abs(mr))&&Math.abs(Qt-wr)<=t$1M*Math.max(1,Math.abs(Qt),Math.abs(wr))&&Math.abs(Zt-br)<=t$1M*Math.max(1,Math.abs(Zt),Math.abs(br))&&Math.abs(Kt-_r)<=t$1M*Math.max(1,Math.abs(Kt),Math.abs(_r))&&Math.abs(er-Mr)<=t$1M*Math.max(1,Math.abs(er),Math.abs(Mr))&&Math.abs(Yt-Ar)<=t$1M*Math.max(1,Math.abs(Yt),Math.abs(Ar))&&Math.abs(rr-xr)<=t$1M*Math.max(1,Math.abs(rr),Math.abs(xr))}function G$e(_t){const Tt=t$1M,Mt=_t[0],Pt=_t[1],Ft=_t[2],Dt=_t[4],Nt=_t[5],Vt=_t[6],zt=_t[8],Xt=_t[9],Ht=_t[10];return Math.abs(1-(Mt*Mt+Dt*Dt+zt*zt))<=Tt&&Math.abs(1-(Pt*Pt+Nt*Nt+Xt*Xt))<=Tt&&Math.abs(1-(Ft*Ft+Vt*Vt+Ht*Ht))<=Tt}const H$d=u$1k,J$d=X$7;Object.freeze(Object.defineProperty({__proto__:null,copy:n$23,set:s$1v,identity:r$1a,transpose:o$1m,invert:h$15,adjoint:M$z,determinant:e$1p,multiply:u$1k,translate:c$2c,scale:i$1Q,rotate:f$12,rotateX:b$R,rotateY:l$1B,rotateZ:m$1n,fromTranslation:x$E,fromScaling:q$f,fromRotation:p$2o,fromXRotation:g$X,fromYRotation:d$1t,fromZRotation:R$m,fromRotationTranslation:S$y,fromQuat2:y$1a,getTranslation:j$H,getScaling:v$O,getRotation:O$o,fromRotationTranslationScale:P$k,fromRotationTranslationScaleOrigin:D$p,fromQuat:I$s,frustum:A$n,perspective:_$o,perspectiveFromFieldOfView:w$O,ortho:E$y,lookAt:F$p,targetTo:Q$a,str:k$n,frob:z$o,add:N$n,subtract:X$7,multiplyScalar:Y$7,multiplyScalarAndAdd:Z$7,exactEquals:B$j,equals:C$l,isOrthoNormal:G$e,mul:H$d,sub:J$d},Symbol.toStringTag,{value:"Module"}));let o$1l,r$19=null;function n$22(){return!!r$19}function _$n(){return!!a$32("esri-wasm")}function P$j(){return o$1l||(o$1l=__vitePreload(()=>import("./pe-wasm.41ba155b.js"),[]).then(_t=>_t.p).then(({default:_t})=>_t({locateFile:Tt=>a$2M(`esri/geometry/support/${Tt}`)})).then(_t=>{N$m(_t)}),o$1l)}var s$1u,E$x,i$1P;(function(_t){function Tt(Dt,Nt,Vt){r$19.ensureCache.prepare();const zt=A$m(Vt),Xt=Vt===zt,Ht=r$19.ensureFloat64(zt),Wt=r$19._pe_geog_to_proj(r$19.getPointer(Dt),Nt,Ht);return Wt&&d$1s(Vt,Nt,Ht,Xt),Wt}function Mt(Dt,Nt,Vt,zt){switch(zt){case E$x.PE_TRANSFORM_P_TO_G:return Pt(Dt,Nt,Vt);case E$x.PE_TRANSFORM_G_TO_P:return Tt(Dt,Nt,Vt)}return 0}function Pt(Dt,Nt,Vt){return Ft(Dt,Nt,Vt,0)}function Ft(Dt,Nt,Vt,zt){r$19.ensureCache.prepare();const Xt=A$m(Vt),Ht=Vt===Xt,Wt=r$19.ensureFloat64(Xt),Qt=r$19._pe_proj_to_geog_center(r$19.getPointer(Dt),Nt,Wt,zt);return Qt&&d$1s(Vt,Nt,Wt,Ht),Qt}_t.geogToProj=Tt,_t.projGeog=Mt,_t.projToGeog=Pt,_t.projToGeogCenter=Ft})(s$1u||(s$1u={})),function(_t){function Tt(){_t.PE_BUFFER_MAX=r$19.PeDefs.prototype.PE_BUFFER_MAX,_t.PE_NAME_MAX=r$19.PeDefs.prototype.PE_NAME_MAX,_t.PE_MGRS_MAX=r$19.PeDefs.prototype.PE_MGRS_MAX,_t.PE_USNG_MAX=r$19.PeDefs.prototype.PE_USNG_MAX,_t.PE_DD_MAX=r$19.PeDefs.prototype.PE_DD_MAX,_t.PE_DDM_MAX=r$19.PeDefs.prototype.PE_DDM_MAX,_t.PE_DMS_MAX=r$19.PeDefs.prototype.PE_DMS_MAX,_t.PE_UTM_MAX=r$19.PeDefs.prototype.PE_UTM_MAX,_t.PE_PARM_MAX=r$19.PeDefs.prototype.PE_PARM_MAX,_t.PE_TYPE_NONE=r$19.PeDefs.prototype.PE_TYPE_NONE,_t.PE_TYPE_GEOGCS=r$19.PeDefs.prototype.PE_TYPE_GEOGCS,_t.PE_TYPE_PROJCS=r$19.PeDefs.prototype.PE_TYPE_PROJCS,_t.PE_TYPE_GEOGTRAN=r$19.PeDefs.prototype.PE_TYPE_GEOGTRAN,_t.PE_TYPE_COORDSYS=r$19.PeDefs.prototype.PE_TYPE_COORDSYS,_t.PE_TYPE_UNIT=r$19.PeDefs.prototype.PE_TYPE_UNIT,_t.PE_TYPE_LINUNIT=r$19.PeDefs.prototype.PE_TYPE_LINUNIT,_t.PE_STR_OPTS_NONE=r$19.PeDefs.prototype.PE_STR_OPTS_NONE,_t.PE_STR_AUTH_NONE=r$19.PeDefs.prototype.PE_STR_AUTH_NONE,_t.PE_STR_AUTH_TOP=r$19.PeDefs.prototype.PE_STR_AUTH_TOP,_t.PE_STR_NAME_CANON=r$19.PeDefs.prototype.PE_STR_NAME_CANON,_t.PE_PARM_X0=r$19.PeDefs.prototype.PE_PARM_X0,_t.PE_PARM_ND=r$19.PeDefs.prototype.PE_PARM_ND,_t.PE_TRANSFORM_1_TO_2=r$19.PeDefs.prototype.PE_TRANSFORM_1_TO_2,_t.PE_TRANSFORM_2_TO_1=r$19.PeDefs.prototype.PE_TRANSFORM_2_TO_1,_t.PE_TRANSFORM_P_TO_G=r$19.PeDefs.prototype.PE_TRANSFORM_P_TO_G,_t.PE_TRANSFORM_G_TO_P=r$19.PeDefs.prototype.PE_TRANSFORM_G_TO_P,_t.PE_HORIZON_RECT=r$19.PeDefs.prototype.PE_HORIZON_RECT,_t.PE_HORIZON_POLY=r$19.PeDefs.prototype.PE_HORIZON_POLY,_t.PE_HORIZON_LINE=r$19.PeDefs.prototype.PE_HORIZON_LINE,_t.PE_HORIZON_DELTA=r$19.PeDefs.prototype.PE_HORIZON_DELTA}_t.init=Tt}(E$x||(E$x={})),function(_t){const Tt={},Mt={},Pt=Zt=>{if(Zt){const Kt=Zt.getType();switch(Kt){case E$x.PE_TYPE_GEOGCS:Zt=r$19.castObject(Zt,r$19.PeGeogcs);break;case E$x.PE_TYPE_PROJCS:Zt=r$19.castObject(Zt,r$19.PeProjcs);break;case E$x.PE_TYPE_GEOGTRAN:Zt=r$19.castObject(Zt,r$19.PeGeogtran);break;default:Kt&E$x.PE_TYPE_UNIT&&(Zt=r$19.castObject(Zt,r$19.PeUnit))}}return Zt};function Ft(){r$19.PeFactory.prototype.initialize(null)}function Dt(Zt){return Nt(E$x.PE_TYPE_COORDSYS,Zt)}function Nt(Zt,Kt){let er=null,Yt=Tt[Zt];if(Yt||(Yt={},Tt[Zt]=Yt),Yt.hasOwnProperty(String(Kt)))er=Yt[Kt];else{const rr=r$19.PeFactory.prototype.factoryByType(Zt,Kt);r$19.compare(rr,r$19.NULL)||(er=rr,Yt[Kt]=er)}return er=Pt(er),er}function Vt(Zt,Kt){let er=null,Yt=Mt[Zt];if(Yt||(Yt={},Mt[Zt]=Yt),Yt.hasOwnProperty(Kt))er=Yt[Kt];else{const rr=r$19.PeFactory.prototype.fromString(Zt,Kt);r$19.compare(rr,r$19.NULL)||(er=rr,Yt[Kt]=er)}return er=Pt(er),er}function zt(Zt){return Nt(E$x.PE_TYPE_GEOGCS,Zt)}function Xt(Zt){return Nt(E$x.PE_TYPE_GEOGTRAN,Zt)}function Ht(Zt){return r$19.PeFactory.prototype.getCode(Zt)}function Wt(Zt){return Nt(E$x.PE_TYPE_PROJCS,Zt)}function Qt(Zt){return Nt(E$x.PE_TYPE_UNIT,Zt)}_t.initialize=Ft,_t.coordsys=Dt,_t.factoryByType=Nt,_t.fromString=Vt,_t.geogcs=zt,_t.geogtran=Xt,_t.getCode=Ht,_t.projcs=Wt,_t.unit=Qt}(i$1P||(i$1P={}));let p$2n=null;var u$1j,a$1T,c$2b,g$W,T$o,f$11,O$n,S$x,l$1A;function N$m(_t){function Tt(Dt,Nt,Vt){Dt[Nt]=Vt(Dt[Nt])}r$19=_t,E$x.init(),u$1j.init(),T$o.init(),O$n.init(),S$x.init(),p$2n=class extends r$19.PeGCSExtent{destroy(){r$19.destroy(this)}};const Mt=[r$19.PeDatum,r$19.PeGeogcs,r$19.PeGeogtran,r$19.PeObject,r$19.PeParameter,r$19.PePrimem,r$19.PeProjcs,r$19.PeSpheroid,r$19.PeUnit];for(const Dt of Mt)Tt(Dt.prototype,"getName",Nt=>function(){return Nt.call(this,new Array(E$x.PE_NAME_MAX))});for(const Dt of[r$19.PeGeogtran,r$19.PeProjcs])Tt(Dt.prototype,"getParameters",Nt=>function(){const Vt=new Array(E$x.PE_PARM_MAX);let zt=Nt.call(this);for(let Xt=0;Xt<Vt.length;Xt++){const Ht=r$19.getValue(zt,"*");Vt[Xt]=Ht?r$19.wrapPointer(Ht,r$19.PeParameter):null,zt+=Int32Array.BYTES_PER_ELEMENT}return Vt});Tt(r$19.PeHorizon.prototype,"getCoord",Dt=>function(){const Nt=this.getSize();if(!Nt)return null;const Vt=[];return d$1s(Vt,Nt,Dt.call(this)),Vt}),Tt(r$19.PeGTlistExtendedEntry.prototype,"getEntries",Dt=>{const Nt=r$19._pe_getPeGTlistExtendedGTsSize();return function(){let Vt=null;const zt=Dt.call(this);if(!r$19.compare(zt,r$19.NULL)){Vt=[zt];const Xt=this.getSteps();if(Xt>1){const Ht=r$19.getPointer(zt);for(let Wt=1;Wt<Xt;Wt++)Vt.push(r$19.wrapPointer(Ht+Nt*Wt,r$19.PeGTlistExtendedGTs))}}return Vt}});const Pt=r$19._pe_getPeHorizonSize(),Ft=Dt=>function(){let Nt=this._cache;if(Nt||(Nt=new Map,this._cache=Nt),Nt.has(Dt))return Nt.get(Dt);let Vt=null;const zt=Dt.call(this);if(!r$19.compare(zt,r$19.NULL)){Vt=[zt];const Xt=zt.getNump();if(Xt>1){const Ht=r$19.getPointer(zt);for(let Wt=1;Wt<Xt;Wt++)Vt.push(r$19.wrapPointer(Ht+Pt*Wt,r$19.PeHorizon))}}return Nt.set(Dt,Vt),Vt};Tt(r$19.PeProjcs.prototype,"horizonGcsGenerate",Ft),Tt(r$19.PeProjcs.prototype,"horizonPcsGenerate",Ft),r$19.PeObject.prototype.toString=function(Dt=E$x.PE_STR_OPTS_NONE){r$19.ensureCache.prepare();const Nt=r$19.getPointer(this),Vt=r$19.ensureInt8(new Array(E$x.PE_BUFFER_MAX));return r$19.UTF8ToString(r$19._pe_object_to_string_ext(Nt,Dt,Vt))}}function y$19(_t){if(!_t)return;const Tt=r$19.getClass(_t);if(!Tt)return;const Mt=r$19.getCache(Tt);if(!Mt)return;const Pt=r$19.getPointer(_t);Pt&&delete Mt[Pt]}function M$y(_t,Tt){const Mt=[],Pt=new Array(Tt);for(let Ft=0;Ft<_t;Ft++)Mt.push(r$19.ensureInt8(Pt));return Mt}function A$m(_t){let Tt;return Array.isArray(_t[0])?(Tt=[],_t.forEach(Mt=>{Tt.push(Mt[0],Mt[1])})):Tt=_t,Tt}function d$1s(_t,Tt,Mt,Pt=!1){if(Pt)for(let Ft=0;Ft<2*Tt;Ft++)_t[Ft]=r$19.getValue(Mt+Ft*Float64Array.BYTES_PER_ELEMENT,"double");else{const Ft=_t.length===0;for(let Dt=0;Dt<Tt;Dt++)Ft&&(_t[Dt]=new Array(2)),_t[Dt][0]=r$19.getValue(Mt,"double"),_t[Dt][1]=r$19.getValue(Mt+Float64Array.BYTES_PER_ELEMENT,"double"),Mt+=2*Float64Array.BYTES_PER_ELEMENT}}(function(_t){let Tt;function Mt(){_t.PE_GTLIST_OPTS_COMMON=r$19.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,Tt=r$19._pe_getPeGTlistExtendedEntrySize()}function Pt(Ft,Dt,Nt,Vt,zt,Xt){let Ht=null;const Wt=new r$19.PeInteger(Xt);try{const Qt=r$19.PeGTlistExtended.prototype.getGTlist(Ft,Dt,Nt,Vt,zt,Wt);if((Xt=Wt.val)&&(Ht=[Qt],Xt>1)){const Zt=r$19.getPointer(Qt);for(let Kt=1;Kt<Xt;Kt++)Ht.push(r$19.wrapPointer(Zt+Tt*Kt,r$19.PeGTlistExtendedEntry))}}finally{r$19.destroy(Wt)}return Ht}_t.init=Mt,_t.getGTlist=Pt})(u$1j||(u$1j={})),function(_t){function Tt(Mt){if(Mt&&Mt.length){for(const Pt of Mt)y$19(Pt),Pt.getEntries().forEach(Ft=>{y$19(Ft);const Dt=Ft.getGeogtran();y$19(Dt),Dt.getParameters().forEach(y$19),[Dt.getGeogcs1(),Dt.getGeogcs2()].forEach(Nt=>{y$19(Nt);const Vt=Nt.getDatum();y$19(Vt),y$19(Vt.getSpheroid()),y$19(Nt.getPrimem()),y$19(Nt.getUnit())})});r$19.PeGTlistExtendedEntry.prototype.Delete(Mt[0])}}_t.destroy=Tt}(a$1T||(a$1T={})),function(_t){function Tt(Mt,Pt,Ft,Dt,Nt){r$19.ensureCache.prepare();const Vt=A$m(Ft),zt=Ft===Vt,Xt=r$19.ensureFloat64(Vt);let Ht=0;Dt&&(Ht=r$19.ensureFloat64(Dt));const Wt=r$19._pe_geog_to_geog(r$19.getPointer(Mt),Pt,Xt,Ht,Nt);return Wt&&d$1s(Ft,Pt,Xt,zt),Wt}_t.geogToGeog=Tt}(c$2b||(c$2b={})),function(_t){const Tt=(Xt,Ht,Wt,Qt,Zt,Kt)=>{let er,Yt;switch(r$19.ensureCache.prepare(),Xt){case"dd":er=r$19._pe_geog_to_dd,Yt=E$x.PE_DD_MAX;break;case"ddm":er=r$19._pe_geog_to_ddm,Yt=E$x.PE_DDM_MAX;break;case"dms":er=r$19._pe_geog_to_dms,Yt=E$x.PE_DMS_MAX}let rr=0;Ht&&(rr=r$19.getPointer(Ht));const ir=A$m(Qt),nr=r$19.ensureFloat64(ir),ar=M$y(Wt,Yt),or=er(rr,Wt,nr,Zt,r$19.ensureInt32(ar));if(or)for(let ur=0;ur<Wt;ur++)Kt[ur]=r$19.UTF8ToString(ar[ur]);return or},Mt=(Xt,Ht,Wt,Qt,Zt)=>{let Kt;switch(r$19.ensureCache.prepare(),Xt){case"dd":Kt=r$19._pe_dd_to_geog;break;case"ddm":Kt=r$19._pe_ddm_to_geog;break;case"dms":Kt=r$19._pe_dms_to_geog}let er=0;Ht&&(er=r$19.getPointer(Ht));const Yt=Qt.map(ar=>r$19.ensureString(ar)),rr=r$19.ensureInt32(Yt),ir=r$19.ensureFloat64(new Array(2*Wt)),nr=Kt(er,Wt,rr,ir);return nr&&d$1s(Zt,Wt,ir),nr};function Pt(Xt,Ht,Wt,Qt,Zt){return Tt("dms",Xt,Ht,Wt,Qt,Zt)}function Ft(Xt,Ht,Wt,Qt){return Mt("dms",Xt,Ht,Wt,Qt)}function Dt(Xt,Ht,Wt,Qt,Zt){return Tt("ddm",Xt,Ht,Wt,Qt,Zt)}function Nt(Xt,Ht,Wt,Qt){return Mt("ddm",Xt,Ht,Wt,Qt)}function Vt(Xt,Ht,Wt,Qt,Zt){return Tt("dd",Xt,Ht,Wt,Qt,Zt)}function zt(Xt,Ht,Wt,Qt){return Mt("dd",Xt,Ht,Wt,Qt)}_t.geogToDms=Pt,_t.dmsToGeog=Ft,_t.geogToDdm=Dt,_t.ddmToGeog=Nt,_t.geogToDd=Vt,_t.ddToGeog=zt}(g$W||(g$W={})),function(_t){function Tt(){_t.PE_MGRS_STYLE_NEW=r$19.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,_t.PE_MGRS_STYLE_OLD=r$19.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,_t.PE_MGRS_STYLE_AUTO=r$19.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,_t.PE_MGRS_180_ZONE_1_PLUS=r$19.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,_t.PE_MGRS_ADD_SPACES=r$19.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function Mt(Ft,Dt,Nt,Vt,zt,Xt,Ht){r$19.ensureCache.prepare();let Wt=0;Ft&&(Wt=r$19.getPointer(Ft));const Qt=A$m(Nt),Zt=r$19.ensureFloat64(Qt),Kt=M$y(Dt,E$x.PE_MGRS_MAX),er=r$19.ensureInt32(Kt),Yt=r$19._pe_geog_to_mgrs_extended(Wt,Dt,Zt,Vt,zt,Xt,er);if(Yt)for(let rr=0;rr<Dt;rr++)Ht[rr]=r$19.UTF8ToString(Kt[rr]);return Yt}function Pt(Ft,Dt,Nt,Vt,zt){r$19.ensureCache.prepare();let Xt=0;Ft&&(Xt=r$19.getPointer(Ft));const Ht=Nt.map(Kt=>r$19.ensureString(Kt)),Wt=r$19.ensureInt32(Ht),Qt=r$19.ensureFloat64(new Array(2*Dt)),Zt=r$19._pe_mgrs_to_geog_extended(Xt,Dt,Wt,Vt,Qt);return Zt&&d$1s(zt,Dt,Qt),Zt}_t.init=Tt,_t.geogToMgrsExtended=Mt,_t.mgrsToGeogExtended=Pt}(T$o||(T$o={})),function(_t){function Tt(Pt,Ft,Dt,Nt,Vt,zt,Xt){r$19.ensureCache.prepare();let Ht=0;Pt&&(Ht=r$19.getPointer(Pt));const Wt=A$m(Dt),Qt=r$19.ensureFloat64(Wt),Zt=M$y(Ft,E$x.PE_MGRS_MAX),Kt=r$19.ensureInt32(Zt),er=r$19._pe_geog_to_usng(Ht,Ft,Qt,Nt,Vt,zt,Kt);if(er)for(let Yt=0;Yt<Ft;Yt++)Xt[Yt]=r$19.UTF8ToString(Zt[Yt]);return er}function Mt(Pt,Ft,Dt,Nt){r$19.ensureCache.prepare();let Vt=0;Pt&&(Vt=r$19.getPointer(Pt));const zt=Dt.map(Qt=>r$19.ensureString(Qt)),Xt=r$19.ensureInt32(zt),Ht=r$19.ensureFloat64(new Array(2*Ft)),Wt=r$19._pe_usng_to_geog(Vt,Ft,Xt,Ht);return Wt&&d$1s(Nt,Ft,Ht),Wt}_t.geogToUsng=Tt,_t.usngToGeog=Mt}(f$11||(f$11={})),function(_t){function Tt(){_t.PE_UTM_OPTS_NONE=r$19.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,_t.PE_UTM_OPTS_ADD_SPACES=r$19.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,_t.PE_UTM_OPTS_NS=r$19.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function Mt(Ft,Dt,Nt,Vt,zt){r$19.ensureCache.prepare();let Xt=0;Ft&&(Xt=r$19.getPointer(Ft));const Ht=A$m(Nt),Wt=r$19.ensureFloat64(Ht),Qt=M$y(Dt,E$x.PE_UTM_MAX),Zt=r$19.ensureInt32(Qt),Kt=r$19._pe_geog_to_utm(Xt,Dt,Wt,Vt,Zt);if(Kt)for(let er=0;er<Dt;er++)zt[er]=r$19.UTF8ToString(Qt[er]);return Kt}function Pt(Ft,Dt,Nt,Vt,zt){r$19.ensureCache.prepare();let Xt=0;Ft&&(Xt=r$19.getPointer(Ft));const Ht=Nt.map(Kt=>r$19.ensureString(Kt)),Wt=r$19.ensureInt32(Ht),Qt=r$19.ensureFloat64(new Array(2*Dt)),Zt=r$19._pe_utm_to_geog(Xt,Dt,Wt,Vt,Qt);return Zt&&d$1s(zt,Dt,Qt),Zt}_t.init=Tt,_t.geogToUtm=Mt,_t.utmToGeog=Pt}(O$n||(O$n={})),function(_t){const Tt=new Map;function Mt(){_t.PE_PCSINFO_OPTION_NONE=r$19.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,_t.PE_PCSINFO_OPTION_DOMAIN=r$19.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,_t.PE_POLE_OUTSIDE_BOUNDARY=r$19.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,_t.PE_POLE_POINT=r$19.PePCSInfo.prototype.PE_POLE_POINT}function Pt(Ft,Dt=_t.PE_PCSINFO_OPTION_DOMAIN){let Nt,Vt;return Tt.has(Ft)&&(Vt=Tt.get(Ft),Vt[Dt]&&(Nt=Vt[Dt])),Nt||(Nt=r$19.PePCSInfo.prototype.generate(Ft,Dt),Vt||(Vt=[],Tt.set(Ft,Vt)),Vt[Dt]=Nt),Nt}_t.init=Mt,_t.generate=Pt}(S$x||(S$x={})),function(_t){function Tt(){return r$19.PeVersion.prototype.version_string()}_t.versionString=Tt}(l$1A||(l$1A={}));const R$l=Object.freeze(Object.defineProperty({__proto__:null,get _pe(){return r$19},isLoaded:n$22,isSupported:_$n,load:P$j,get PeCSTransformations(){return s$1u},get PeDefs(){return E$x},get PeFactory(){return i$1P},get PeGCSExtent(){return p$2n},get PeGTlistExtended(){return u$1j},get PeGTlistExtendedEntry(){return a$1T},get PeGTTransformations(){return c$2b},get PeNotationDms(){return g$W},get PeNotationMgrs(){return T$o},get PeNotationUsng(){return f$11},get PeNotationUtm(){return O$n},get PePCSInfo(){return S$x},get PeVersion(){return l$1A},_init:N$m},Symbol.toStringTag,{value:"Module"})),i$1O=Math.PI/180,t$1p=/SPHEROID\[([^\]]+)]/i,r$18=s$22.radius,n$21=s$22.eccentricitySquared,s$1t={a1:r$18*n$21,a2:r$18*n$21*r$18*n$21,a3:r$18*n$21*n$21/2,a4:r$18*n$21*r$18*n$21*2.5,a5:r$18*n$21+r$18*n$21*n$21/2,a6:1-n$21},d$1r={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:s$22.radius,f:s$22.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:e$1S.radius,f:e$1S.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:t$1Q.radius,f:t$1Q.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:t$1Q.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let s$1s=0;class t$1o{constructor(Tt=null){this.uid=s$1s++,Tt?(this._wkt=Tt.wkt!==void 0?Tt.wkt:null,this._wkid=Tt.wkid!==void 0?Tt.wkid:-1,this._isInverse=Tt.isInverse!==void 0&&Tt.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(Tt){const Mt=new t$1o;return Mt._wkt=Tt.wkt,Mt._wkid=Tt.wkid,Mt._isInverse=Tt.isInverse,Mt}get wkt(){return this._wkt}set wkt(Tt){this._wkt=Tt,this.uid=s$1s++}get wkid(){return this._wkid}set wkid(Tt){this._wkid=Tt,this.uid=s$1s++}get isInverse(){return this._isInverse}set isInverse(Tt){this._isInverse=Tt,this.uid=s$1s++}getInverse(){const Tt=new t$1o;return Tt._wkt=this.wkt,Tt._wkid=this._wkid,Tt._isInverse=!this.isInverse,Tt}}class s$1r{constructor(Tt){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,Tt&&Tt.steps)for(const Mt of Tt.steps)Mt instanceof t$1o?this.steps.push(Mt):this.steps.push(new t$1o({wkid:Mt.wkid,wkt:Mt.wkt,isInverse:Mt.isInverse}))}static cacheKey(Tt,Mt){return[Tt.wkid!==void 0&&Tt.wkid!==null?Tt.wkid.toString():"-1",Tt.wkt!==void 0&&Tt.wkt!==null?Tt.wkt.toString():"",Mt.wkid!==void 0&&Mt.wkid!==null?Mt.wkid.toString():"-1",Mt.wkt!==void 0&&Mt.wkt!==null?Mt.wkt.toString():""].join(",")}static fromGE(Tt){const Mt=new s$1r;let Pt="";for(const Ft of Tt.steps){const Dt=t$1o.fromGE(Ft);Mt.steps.push(Dt),Pt+=Dt.uid.toString()+","}return Mt._cached_projection={},Mt._gtlistentry=null,Mt._chain=Pt,Mt}getInverse(){const Tt=new s$1r;Tt.steps=[];for(let Mt=this.steps.length-1;Mt>=0;Mt--){const Pt=this.steps[Mt];Tt.steps.push(Pt.getInverse())}return Tt}getGTListEntry(){let Tt="";for(const Mt of this.steps)Tt+=Mt.uid.toString()+",";return Tt!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=Tt),this._gtlistentry}assignCachedGe(Tt,Mt,Pt){this._cached_projection[s$1r.cacheKey(Tt,Mt)]=Pt}getCachedGeTransformation(Tt,Mt){let Pt="";for(const Dt of this.steps)Pt+=Dt.uid.toString()+",";Pt!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=Pt);const Ft=this._cached_projection[s$1r.cacheKey(Tt,Mt)];return Ft===void 0?null:Ft}}function o$1k(_t,Tt,Mt){if(t$2e(Tt)||t$2e(Mt)||Mt.vcsWkid||E$G(Tt,Mt))return null;const Pt=W$8(Tt)/W$8(Mt);if(Pt===1)return null;switch(_t){case"point":case"esriGeometryPoint":return Ft=>r$17(Ft,Pt);case"polyline":case"esriGeometryPolyline":return Ft=>s$1q(Ft,Pt);case"polygon":case"esriGeometryPolygon":return Ft=>i$1N(Ft,Pt);case"multipoint":case"esriGeometryMultipoint":return Ft=>c$2a(Ft,Pt);case"extent":case"esriGeometryExtent":return Ft=>l$1z(Ft,Pt);default:return null}}function r$17(_t,Tt){_t&&_t.z!=null&&(_t.z*=Tt)}function i$1N(_t,Tt){if(_t)for(const Mt of _t.rings)for(const Pt of Mt)Pt.length>2&&(Pt[2]*=Tt)}function s$1q(_t,Tt){if(_t)for(const Mt of _t.paths)for(const Pt of Mt)Pt.length>2&&(Pt[2]*=Tt)}function c$2a(_t,Tt){if(_t)for(const Mt of _t.points)Mt.length>2&&(Mt[2]*=Tt)}function l$1z(_t,Tt){_t&&_t.zmin!=null&&_t.zmax!=null&&(_t.zmin*=Tt,_t.zmax*=Tt)}let J$c=null,Q$9=null,Y$6=null,$$e={};const nn=new e$1X;function en(){return!!J$c&&n$22()}function tn(_t){return t$2e(Y$6)&&(Y$6=Promise.all([P$j(),__vitePreload(()=>import("./geometryEngineBase.cf4f989f.js"),[]).then(Tt=>Tt.g),__vitePreload(()=>import("./hydrated.54675f53.js"),[])])),Y$6.then(([,Tt,{hydratedAdapter:Mt}])=>{f$1M(_t),Q$9=Mt,J$c=Tt.default,J$c._enableProjection(R$l),nn.notify()})}function rn(_t,Tt,Mt=null,Pt=null){return Array.isArray(_t)?_t.length===0?[]:ln(Q$9,_t,_t[0].spatialReference,Tt,Mt,Pt):ln(Q$9,[_t],_t.spatialReference,Tt,Mt,Pt)[0]}function ln(_t,Tt,Mt,Pt,Ft=null,Dt=null){if(t$2e(Mt)||t$2e(Pt))return Tt;if(An(Mt,Pt,Ft))return Tt.map(Nt=>Sn(Nt,Mt,Pt));if(t$2e(Ft)){const Nt=s$1r.cacheKey(Mt,Pt);$$e[Nt]!==void 0?Ft=$$e[Nt]:(Ft=on(Mt,Pt,null),t$2e(Ft)&&(Ft=new s$1r),$$e[Nt]=Ft)}if(t$2e(J$c))throw new an;return r$1P(Dt)?J$c._project(_t,Tt,Mt,Pt,Ft,Dt):J$c._project(_t,Tt,Mt,Pt,Ft)}function un(_t,Tt){return t$2e(_t)?{pending:null,geometry:null}:E$G(_t.spatialReference,Tt)?{pending:null,geometry:_t}:I$C(_t.spatialReference)&&I$C(Tt)?An(_t.spatialReference,Tt)||en()?{pending:null,geometry:Rn(_t,Tt)}:(l$2E(nn),{pending:tn(),geometry:null}):{pending:null,geometry:null}}function on(_t,Tt,Mt=null){if(t$2e(J$c))throw new an;if(t$2e(_t)||t$2e(Tt))return null;const Pt=J$c._getTransformation(Q$9,_t,Tt,Mt,Mt==null?void 0:Mt.spatialReference);return Pt!==null?s$1r.fromGE(Pt):null}class an extends s$2i{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}var cn;(function(_t){_t[_t.UNKNOWN=0]="UNKNOWN",_t[_t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",_t[_t.WGS84=2]="WGS84",_t[_t.WEB_MERCATOR=3]="WEB_MERCATOR",_t[_t.WGS84_ECEF=4]="WGS84_ECEF",_t[_t.CGCS2000=5]="CGCS2000",_t[_t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",_t[_t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",_t[_t.GCSMARS2000=8]="GCSMARS2000",_t[_t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",_t[_t.GCSMOON2000=10]="GCSMOON2000",_t[_t.LON_LAT=11]="LON_LAT",_t[_t.PLATE_CARREE=12]="PLATE_CARREE"})(cn||(cn={}));function Rn(_t,Tt){try{const Mt=rn(_t,Tt);if(Mt==null)return null;"xmin"in _t&&"xmin"in Mt&&(Mt.zmin=_t.zmin,Mt.zmax=_t.zmax);const Pt=o$1k(Mt.type,_t.spatialReference,Tt);return r$1P(Pt)&&Pt(Mt),Mt}catch(Mt){if(!(Mt instanceof an))throw Mt;return null}}function An(_t,Tt,Mt){return!Mt&&(!!E$G(_t,Tt)||I$C(_t)&&I$C(Tt)&&!!Ie$1(_t,Tt,je$2))}async function fn(_t,Tt,Mt,Pt){if(en())return q$p(Pt);if(Array.isArray(_t)){for(const{source:Ft,dest:Dt,geographicTransformation:Nt}of _t)if(!An(Ft,Dt,Nt))return tn(Pt)}else if(!An(_t,Tt,Mt))return tn(Pt);return q$p(Pt)}function Sn(_t,Tt,Mt){return _t?"x"in _t?Ln(_t,Tt,new j$Z,Mt,0):"xmin"in _t?Fn(_t,Tt,new M$K,Mt,0):"rings"in _t?mn(_t,Tt,new v$V,Mt,0):"paths"in _t?Nn(_t,Tt,new m$1R,Mt,0):"points"in _t?On(_t,Tt,new m$1T,Mt,0):null:null}function Pn(_t,Tt,Mt=Tt.spatialReference,Pt=0){return!t$2e(Mt)&&r$1P(Ln(_t,_t.spatialReference,Tt,Mt,Pt))}function Ln(_t,Tt,Mt,Pt,Ft){ke$2[0]=_t.x,ke$2[1]=_t.y;const Dt=_t.z;return ke$2[2]=Dt!==void 0?Dt:Ft,Un(ke$2,Tt,0,ke$2,Pt,0,1)?(Mt.x=ke$2[0],Mt.y=ke$2[1],Mt.spatialReference=Pt,Dt===void 0?(Mt.z=void 0,Mt.hasZ=!1):(Mt.z=ke$2[2],Mt.hasZ=!0),_t.m===void 0?(Mt.m=void 0,Mt.hasM=!1):(Mt.m=_t.m,Mt.hasM=!0),Mt):null}function On(_t,Tt,Mt,Pt,Ft){const{points:Dt,hasZ:Nt,hasM:Vt}=_t,zt=[],Xt=Dt.length,Ht=[];for(const Wt of Dt)Ht.push(Wt[0],Wt[1],Nt?Wt[2]:Ft);if(!Un(Ht,Tt,0,Ht,Pt,0,Xt))return null;for(let Wt=0;Wt<Xt;++Wt){const Qt=3*Wt,Zt=Ht[Qt],Kt=Ht[Qt+1];Nt&&Vt?zt.push([Zt,Kt,Ht[Qt+2],Dt[Wt][3]]):Nt?zt.push([Zt,Kt,Ht[Qt+2]]):Vt?zt.push([Zt,Kt,Dt[Wt][2]]):zt.push([Zt,Kt])}return Mt.points=zt,Mt.spatialReference=Pt,Mt.hasZ=Nt,Mt.hasM=Vt,Mt}function Nn(_t,Tt,Mt,Pt,Ft){const{paths:Dt,hasZ:Nt,hasM:Vt}=_t,zt=[];return Kn(Dt,Nt,Vt,Tt,zt,Pt,Ft)?(Mt.paths=zt,Mt.spatialReference=Pt,Mt.hasZ=Nt,Mt.hasM=Vt,Mt):null}function Gn({hasZ:_t,spatialReference:Tt,paths:Mt},Pt,Ft=0){const Dt=Dn(Tt,ge$3),Nt=Fe$1[Dt][cn.WGS84_COMPARABLE_LON_LAT];if(t$2e(Nt))return!1;const Vt=_t?zt=>zt:zt=>o$1J(ke$2,zt[0],zt[1],Ft);for(const zt of Mt){const Xt=[];for(const Ht of zt){const Wt=[0,0,Ft];Nt(Vt(Ht),0,Wt,0),Xt.push(Wt)}Pt.push(Xt)}return!0}function hn({hasZ:_t,spatialReference:Tt,rings:Mt},Pt,Ft=0){const Dt=Dn(Tt,ge$3),Nt=Fe$1[Dt][cn.WGS84_COMPARABLE_LON_LAT];if(t$2e(Nt))return!1;const Vt=_t?zt=>zt:zt=>o$1J(ke$2,zt[0],zt[1],Ft);for(const zt of Mt){const Xt=[];for(const Ht of zt){const Wt=[0,0,Ft];Nt(Vt(Ht),0,Wt,0),Xt.push(Wt)}Pt.push(Xt)}return!0}function Wn(_t,Tt,Mt=Tt.spatialReference,Pt=0){return r$1P(Mt)&&r$1P(mn(_t,_t.spatialReference,Tt,Mt,Pt))}function mn(_t,Tt,Mt,Pt,Ft){const{rings:Dt,hasZ:Nt,hasM:Vt}=_t,zt=[];return Kn(Dt,Nt,Vt,Tt,zt,Pt,Ft)?(Mt.rings=zt,Mt.spatialReference=Pt,Mt.hasZ=Nt,Mt.hasM=Vt,Mt):null}function Fn(_t,Tt,Mt,Pt,Ft){const{xmin:Dt,ymin:Nt,xmax:Vt,ymax:zt,hasZ:Xt,hasM:Ht}=_t;return gn(Dt,Nt,Xt?_t.zmin:Ft,Tt,ke$2,Pt)?(Mt.xmin=ke$2[0],Mt.ymin=ke$2[1],Xt&&(Mt.zmin=ke$2[2]),gn(Vt,zt,Xt?_t.zmax:Ft,Tt,ke$2,Pt)?(Mt.xmax=ke$2[0],Mt.ymax=ke$2[1],Xt&&(Mt.zmax=ke$2[2]),Ht&&(Mt.mmin=_t.mmin,Mt.mmax=_t.mmax),Mt.spatialReference=Pt,Mt):null):null}function dn(_t,Tt,Mt){return Un(_t,Tt,0,ke$2,Mt.spatialReference,0,1)?(Mt.x=ke$2[0],Mt.y=ke$2[1],Mt.z=ke$2[2],Mt):null}function Hn(_t,Tt,Mt,Pt=0){ke$2[0]=_t.x,ke$2[1]=_t.y;const Ft=_t.z;return ke$2[2]=Ft!==void 0?Ft:Pt,Un(ke$2,_t.spatialReference,0,Tt,Mt,0,1)}function gn(_t,Tt,Mt,Pt,Ft,Dt){return xe$1[0]=_t,xe$1[1]=Tt,xe$1[2]=Mt,Un(xe$1,Pt,0,Ft,Dt,0,1)}function Bn(_t,Tt,Mt,Pt){return!(t$2e(Tt)||t$2e(Pt)||_t.length<2)&&(_t.length===2&&(xe$1[0]=_t[0],xe$1[1]=_t[1],xe$1[2]=0,_t=xe$1),Un(_t,Tt,0,Mt,Pt,0,1))}function yn(_t,Tt,Mt){return wn(_t,Tt,Mt)}function wn(_t,Tt,Mt){if(t$2e(Tt))return!1;const Pt=Dn(Tt,ge$3),Ft=Fe$1[Pt][cn.WGS84_COMPARABLE_LON_LAT];return!t$2e(Ft)&&(Ft(_t,0,xe$1,0),Mt!==xe$1&&(Mt[0]=xe$1[0],Mt[1]=xe$1[1],Mt.length>2&&(Mt[2]=xe$1[2])),!0)}function Un(_t,Tt,Mt,Pt,Ft,Dt,Nt=1){const Vt=Ie$1(Tt,Ft,je$2);if(t$2e(Vt))return!1;if(Vt===Jn){if(_t===Pt&&Mt===Dt)return!0;const Xt=Mt+3*Nt;for(let Ht=Mt,Wt=Dt;Ht<Xt;Ht++,Wt++)Pt[Wt]=_t[Ht];return!0}const zt=Mt+3*Nt;for(let Xt=Mt,Ht=Dt;Xt<zt;Xt+=3,Ht+=3)Vt(_t,Xt,Pt,Ht);return!0}function Kn(_t,Tt,Mt,Pt,Ft,Dt,Nt=0){const Vt=new Array;for(const Xt of _t)for(const Ht of Xt)Vt.push(Ht[0],Ht[1],Tt?Ht[2]:Nt);if(!Un(Vt,Pt,0,Vt,Dt,0,Vt.length/3))return!1;let zt=0;Ft.length=0;for(const Xt of _t){const Ht=new Array;for(const Wt of Xt)Tt&&Mt?Ht.push([Vt[zt++],Vt[zt++],Vt[zt++],Wt[3]]):Tt?Ht.push([Vt[zt++],Vt[zt++],Vt[zt++]]):Mt?(Ht.push([Vt[zt++],Vt[zt++],Wt[2]]),zt++):(Ht.push([Vt[zt++],Vt[zt++]]),zt++);Ft.push(Ht)}return!0}function zn(_t,Tt,Mt,Pt){return _t!=null&&(E$G(Tt,Pt)?(a$2a(Mt,_t),!0):(xe$1[0]=_t[0],xe$1[1]=_t[1],xe$1[2]=0,!!Un(xe$1,Tt,0,xe$1,Pt,0,1)&&(Mt[0]=xe$1[0],Mt[1]=xe$1[1],xe$1[0]=_t[2],xe$1[1]=_t[3],xe$1[2]=0,!!Un(xe$1,Tt,0,xe$1,Pt,0,1)&&(Mt[2]=xe$1[0],Mt[3]=xe$1[1],!0))))}function qn(_t,Tt,Mt,Pt){if(t$2e(_t)||t$2e(Pt))return!1;const Ft=Dn(_t,ge$3),Dt=Dn(Pt,Be$1);if(Ft===Dt&&!Zn(Dt)&&(Ft!==cn.UNKNOWN||E$G(_t,Pt)))return x$E(Mt,Tt),!0;if(Zn(Dt)){const Nt=Fe$1[Ft][cn.LON_LAT],Vt=Fe$1[cn.LON_LAT][Dt];return!t$2e(Nt)&&!t$2e(Vt)&&(Nt(Tt,0,Ke$1,0),Vt(Ke$1,0,be$2,0),Vn(we$2*Ke$1[0],we$2*Ke$1[1],Mt),Mt[12]=be$2[0],Mt[13]=be$2[1],Mt[14]=be$2[2],!0)}if((Dt===cn.WEB_MERCATOR||Dt===cn.PLATE_CARREE)&&(Ft===cn.WGS84||Ft===cn.CGCS2000&&Dt===cn.PLATE_CARREE||Ft===cn.SPHERICAL_ECEF||Ft===cn.WEB_MERCATOR)){const Nt=Fe$1[Ft][cn.LON_LAT],Vt=Fe$1[cn.LON_LAT][Dt];return!t$2e(Nt)&&!t$2e(Vt)&&(Nt(Tt,0,Ke$1,0),Vt(Ke$1,0,be$2,0),Ft===cn.SPHERICAL_ECEF?Xn(we$2*Ke$1[0],we$2*Ke$1[1],Mt):r$1a(Mt),Mt[12]=be$2[0],Mt[13]=be$2[1],Mt[14]=be$2[2],!0)}return!1}function Zn(_t){return _t===cn.SPHERICAL_ECEF||_t===cn.SPHERICAL_MARS_PCPF||_t===cn.SPHERICAL_MOON_PCPF}function Vn(_t,Tt,Mt){const Pt=Math.sin(_t),Ft=Math.cos(_t),Dt=Math.sin(Tt),Nt=Math.cos(Tt),Vt=Mt;return Vt[0]=-Pt,Vt[4]=-Dt*Ft,Vt[8]=Nt*Ft,Vt[12]=0,Vt[1]=Ft,Vt[5]=-Dt*Pt,Vt[9]=Nt*Pt,Vt[13]=0,Vt[2]=0,Vt[6]=Nt,Vt[10]=Dt,Vt[14]=0,Vt[3]=0,Vt[7]=0,Vt[11]=0,Vt[15]=1,Vt}function Xn(_t,Tt,Mt){return Vn(_t,Tt,Mt),o$1m(Mt,Mt),Mt}function Dn(_t,Tt){return Tt.spatialReference===_t?Tt.spatialReferenceId:(Tt.spatialReference=_t,"metersPerUnit"in Tt&&(Tt.metersPerUnit=z$p(_t,1)),_t.wkt===G$g.wkt?Tt.spatialReferenceId=cn.SPHERICAL_ECEF:G$p(_t)?Tt.spatialReferenceId=cn.WGS84:k$z(_t)?Tt.spatialReferenceId=cn.WEB_MERCATOR:T$x(_t)?Tt.spatialReferenceId=cn.PLATE_CARREE:_t.wkt===R$o.wkt?Tt.spatialReferenceId=cn.WGS84_ECEF:_t.wkid===S$O.CGCS2000?Tt.spatialReferenceId=cn.CGCS2000:_t.wkt===I$u.wkt?Tt.spatialReferenceId=cn.SPHERICAL_MARS_PCPF:_t.wkt===E$A.wkt?Tt.spatialReferenceId=cn.SPHERICAL_MOON_PCPF:P$t(_t)?Tt.spatialReferenceId=cn.GCSMARS2000:s$25(_t)?Tt.spatialReferenceId=cn.GCSMOON2000:Tt.spatialReferenceId=cn.UNKNOWN)}function Jn(_t,Tt,Mt,Pt){_t!==Mt&&(Mt[Pt++]=_t[Tt++],Mt[Pt++]=_t[Tt++],Mt[Pt]=_t[Tt])}function Qn(_t,Tt,Mt,Pt){Mt[Pt++]=Ue$1*(_t[Tt++]/s$22.radius),Mt[Pt++]=Ue$1*(Math.PI/2-2*Math.atan(Math.exp(-_t[Tt++]/s$22.radius))),Mt[Pt]=_t[Tt]}function Yn(_t,Tt,Mt,Pt){Qn(_t,Tt,Mt,Pt),Se$2(Mt,Pt,Mt,Pt)}function $n(_t,Tt,Mt,Pt){Qn(_t,Tt,Mt,Pt),he$3(Mt,Pt,Mt,Pt)}function ne$4(_t,Tt,Mt,Pt,Ft){const Dt=.4999999*Math.PI,Nt=o$1H(we$2*_t[Tt+1],-Dt,Dt),Vt=Math.sin(Nt);Mt[Pt++]=we$2*_t[Tt]*Ft.radius,Mt[Pt++]=Ft.halfSemiMajorAxis*Math.log((1+Vt)/(1-Vt)),Mt[Pt]=_t[Tt+2]}function ee$5(_t,Tt,Mt,Pt){ne$4(_t,Tt,Mt,Pt,s$22)}const te$5=s$22.radius*Math.PI/180,re$5=180/(s$22.radius*Math.PI);function le$3(_t,Tt,Mt,Pt){Mt[Pt]=_t[Tt]*te$5,Mt[Pt+1]=_t[Tt+1]*te$5,Mt[Pt+2]=_t[Tt+2]}function ue$4(_t,Tt,Mt,Pt){Mt[Pt]=_t[Tt]*re$5,Mt[Pt+1]=_t[Tt+1]*re$5,Mt[Pt+2]=_t[Tt+2]}function oe$4(_t,Tt,Mt,Pt){Qn(_t,Tt,Mt,Pt),le$3(Mt,Pt,Mt,Pt)}function se$4(_t,Tt,Mt,Pt){We$1(_t,Tt,Mt,Pt),le$3(Mt,Pt,Mt,Pt)}function ie$4(_t,Tt,Mt,Pt){Oe(_t,Tt,Mt,Pt),le$3(Mt,Pt,Mt,Pt)}function ae$4(_t,Tt,Mt,Pt){ue$4(_t,Tt,Mt,Pt),Se$2(Mt,Pt,Mt,Pt)}function ce$4(_t,Tt,Mt,Pt){ue$4(_t,Tt,Mt,Pt),ee$5(Mt,Pt,Mt,Pt)}function Ee(_t,Tt,Mt,Pt){ue$4(_t,Tt,Mt,Pt),he$3(Mt,Pt,Mt,Pt)}function Ae$1(_t,Tt,Mt,Pt,Ft){const Dt=Ft+_t[Tt+2],Nt=we$2*_t[Tt+1],Vt=we$2*_t[Tt],zt=Math.cos(Nt);Mt[Pt++]=Math.cos(Vt)*zt*Dt,Mt[Pt++]=Math.sin(Vt)*zt*Dt,Mt[Pt]=Math.sin(Nt)*Dt}function fe$4(_t,Tt,Mt,Pt){Ae$1(_t,Tt,Mt,Pt,e$1S.radius)}function _e$1(_t,Tt,Mt,Pt){Ae$1(_t,Tt,Mt,Pt,t$1Q.radius)}function Se$2(_t,Tt,Mt,Pt){Ae$1(_t,Tt,Mt,Pt,s$22.radius)}function Pe(_t,Tt,Mt,Pt,Ft){const Dt=_t[Tt],Nt=_t[Tt+1],Vt=_t[Tt+2],zt=Math.sqrt(Dt*Dt+Nt*Nt+Vt*Vt),Xt=b$13(Vt/(zt===0?1:zt)),Ht=Math.atan2(Nt,Dt);Mt[Pt++]=Ue$1*Ht,Mt[Pt++]=Ue$1*Xt,Mt[Pt]=zt-Ft}function Le(_t,Tt,Mt,Pt){Pe(_t,Tt,Mt,Pt,e$1S.radius)}function Me$1(_t,Tt,Mt,Pt){Pe(_t,Tt,Mt,Pt,t$1Q.radius)}function Oe(_t,Tt,Mt,Pt){Pe(_t,Tt,Mt,Pt,s$22.radius)}function pe$3(_t,Tt,Mt,Pt){Oe(_t,Tt,Mt,Pt),ee$5(Mt,Pt,Mt,Pt)}function Ne$2(_t,Tt,Mt,Pt){Oe(_t,Tt,Mt,Pt),he$3(Mt,Pt,Mt,Pt)}function Ge$1(_t,Tt,Mt,Pt,Ft){const Dt=we$2*_t[Tt],Nt=we$2*_t[Tt+1],Vt=_t[Tt+2],zt=Math.sin(Nt),Xt=Math.cos(Nt),Ht=Ft.radius/Math.sqrt(1-Ft.eccentricitySquared*zt*zt);Mt[Pt++]=(Ht+Vt)*Xt*Math.cos(Dt),Mt[Pt++]=(Ht+Vt)*Xt*Math.sin(Dt),Mt[Pt++]=(Ht*(1-Ft.eccentricitySquared)+Vt)*zt}function he$3(_t,Tt,Mt,Pt){Ge$1(_t,Tt,Mt,Pt,s$22)}function We$1(_t,Tt,Mt,Pt){const Ft=s$1t,Dt=_t[Tt],Nt=_t[Tt+1],Vt=_t[Tt+2];let zt,Xt,Ht,Wt,Qt,Zt,Kt,er,Yt,rr,ir,nr,ar,or,ur,dr,hr,gr,pr,mr,wr;zt=Math.abs(Vt),Xt=Dt*Dt+Nt*Nt,Ht=Math.sqrt(Xt),Wt=Xt+Vt*Vt,Qt=Math.sqrt(Wt),mr=Math.atan2(Nt,Dt),Zt=Vt*Vt/Wt,Kt=Xt/Wt,or=Ft.a2/Qt,ur=Ft.a3-Ft.a4/Qt,Kt>.3?(er=zt/Qt*(1+Kt*(Ft.a1+or+Zt*ur)/Qt),pr=Math.asin(er),rr=er*er,Yt=Math.sqrt(1-rr)):(Yt=Ht/Qt*(1-Zt*(Ft.a5-or-Kt*ur)/Qt),pr=Math.acos(Yt),rr=1-Yt*Yt,er=Math.sqrt(rr)),ir=1-s$22.eccentricitySquared*rr,nr=s$22.radius/Math.sqrt(ir),ar=Ft.a6*nr,or=Ht-nr*Yt,ur=zt-ar*er,hr=Yt*or+er*ur,dr=Yt*ur-er*or,gr=dr/(ar/ir+hr),pr+=gr,wr=hr+dr*gr/2,Vt<0&&(pr=-pr),Mt[Pt++]=Ue$1*mr,Mt[Pt++]=Ue$1*pr,Mt[Pt]=wr}function me$4(_t,Tt,Mt,Pt){We$1(_t,Tt,Mt,Pt),Se$2(Mt,Pt,Mt,Pt)}function Te$2(_t,Tt,Mt,Pt){We$1(_t,Tt,Mt,Pt),ee$5(Mt,Pt,Mt,Pt)}const Fe$1={[cn.WGS84]:{[cn.CGCS2000]:null,[cn.GCSMARS2000]:null,[cn.GCSMOON2000]:null,[cn.LON_LAT]:Jn,[cn.WGS84_COMPARABLE_LON_LAT]:Jn,[cn.SPHERICAL_ECEF]:Se$2,[cn.SPHERICAL_MARS_PCPF]:null,[cn.SPHERICAL_MOON_PCPF]:null,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:ee$5,[cn.PLATE_CARREE]:le$3,[cn.WGS84]:Jn,[cn.WGS84_ECEF]:he$3},[cn.CGCS2000]:{[cn.CGCS2000]:Jn,[cn.GCSMARS2000]:null,[cn.GCSMOON2000]:null,[cn.LON_LAT]:Jn,[cn.WGS84_COMPARABLE_LON_LAT]:Jn,[cn.SPHERICAL_ECEF]:Se$2,[cn.SPHERICAL_MARS_PCPF]:null,[cn.SPHERICAL_MOON_PCPF]:null,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:null,[cn.PLATE_CARREE]:le$3,[cn.WGS84]:null,[cn.WGS84_ECEF]:he$3},[cn.GCSMARS2000]:{[cn.CGCS2000]:null,[cn.GCSMARS2000]:Jn,[cn.GCSMOON2000]:null,[cn.LON_LAT]:Jn,[cn.WGS84_COMPARABLE_LON_LAT]:null,[cn.SPHERICAL_ECEF]:null,[cn.SPHERICAL_MARS_PCPF]:_e$1,[cn.SPHERICAL_MOON_PCPF]:null,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:null,[cn.PLATE_CARREE]:null,[cn.WGS84]:null,[cn.WGS84_ECEF]:null},[cn.GCSMOON2000]:{[cn.CGCS2000]:null,[cn.GCSMARS2000]:null,[cn.GCSMOON2000]:Jn,[cn.LON_LAT]:Jn,[cn.WGS84_COMPARABLE_LON_LAT]:null,[cn.SPHERICAL_ECEF]:null,[cn.SPHERICAL_MARS_PCPF]:null,[cn.SPHERICAL_MOON_PCPF]:fe$4,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:null,[cn.PLATE_CARREE]:null,[cn.WGS84]:null,[cn.WGS84_ECEF]:null},[cn.WEB_MERCATOR]:{[cn.CGCS2000]:null,[cn.GCSMARS2000]:null,[cn.GCSMOON2000]:null,[cn.LON_LAT]:Qn,[cn.WGS84_COMPARABLE_LON_LAT]:Qn,[cn.SPHERICAL_ECEF]:Yn,[cn.SPHERICAL_MARS_PCPF]:null,[cn.SPHERICAL_MOON_PCPF]:null,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:Jn,[cn.PLATE_CARREE]:oe$4,[cn.WGS84]:Qn,[cn.WGS84_ECEF]:$n},[cn.WGS84_ECEF]:{[cn.CGCS2000]:We$1,[cn.GCSMARS2000]:null,[cn.GCSMOON2000]:null,[cn.LON_LAT]:We$1,[cn.WGS84_COMPARABLE_LON_LAT]:We$1,[cn.SPHERICAL_ECEF]:me$4,[cn.SPHERICAL_MARS_PCPF]:null,[cn.SPHERICAL_MOON_PCPF]:null,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:Te$2,[cn.PLATE_CARREE]:se$4,[cn.WGS84]:We$1,[cn.WGS84_ECEF]:Jn},[cn.SPHERICAL_ECEF]:{[cn.CGCS2000]:Oe,[cn.GCSMARS2000]:null,[cn.GCSMOON2000]:null,[cn.LON_LAT]:Oe,[cn.WGS84_COMPARABLE_LON_LAT]:Oe,[cn.SPHERICAL_ECEF]:Jn,[cn.SPHERICAL_MARS_PCPF]:null,[cn.SPHERICAL_MOON_PCPF]:null,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:pe$3,[cn.PLATE_CARREE]:ie$4,[cn.WGS84]:Oe,[cn.WGS84_ECEF]:Ne$2},[cn.SPHERICAL_MARS_PCPF]:{[cn.CGCS2000]:null,[cn.GCSMARS2000]:Me$1,[cn.GCSMOON2000]:null,[cn.LON_LAT]:Me$1,[cn.WGS84_COMPARABLE_LON_LAT]:null,[cn.SPHERICAL_ECEF]:null,[cn.SPHERICAL_MARS_PCPF]:Jn,[cn.SPHERICAL_MOON_PCPF]:null,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:null,[cn.PLATE_CARREE]:null,[cn.WGS84]:null,[cn.WGS84_ECEF]:null},[cn.SPHERICAL_MOON_PCPF]:{[cn.CGCS2000]:null,[cn.GCSMARS2000]:null,[cn.GCSMOON2000]:Le,[cn.LON_LAT]:Le,[cn.WGS84_COMPARABLE_LON_LAT]:null,[cn.SPHERICAL_ECEF]:null,[cn.SPHERICAL_MARS_PCPF]:null,[cn.SPHERICAL_MOON_PCPF]:Jn,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:null,[cn.PLATE_CARREE]:null,[cn.WGS84]:null,[cn.WGS84_ECEF]:null},[cn.UNKNOWN]:{[cn.CGCS2000]:null,[cn.GCSMARS2000]:null,[cn.GCSMOON2000]:null,[cn.LON_LAT]:null,[cn.WGS84_COMPARABLE_LON_LAT]:null,[cn.SPHERICAL_ECEF]:null,[cn.SPHERICAL_MARS_PCPF]:null,[cn.SPHERICAL_MOON_PCPF]:null,[cn.UNKNOWN]:Jn,[cn.WEB_MERCATOR]:null,[cn.PLATE_CARREE]:null,[cn.WGS84]:null,[cn.WGS84_ECEF]:null},[cn.LON_LAT]:{[cn.CGCS2000]:Jn,[cn.GCSMARS2000]:Jn,[cn.GCSMOON2000]:Jn,[cn.LON_LAT]:Jn,[cn.WGS84_COMPARABLE_LON_LAT]:Jn,[cn.SPHERICAL_ECEF]:Se$2,[cn.SPHERICAL_MARS_PCPF]:_e$1,[cn.SPHERICAL_MOON_PCPF]:fe$4,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:ee$5,[cn.PLATE_CARREE]:le$3,[cn.WGS84]:Jn,[cn.WGS84_ECEF]:he$3},[cn.WGS84_COMPARABLE_LON_LAT]:{[cn.CGCS2000]:null,[cn.GCSMARS2000]:null,[cn.GCSMOON2000]:null,[cn.LON_LAT]:Jn,[cn.WGS84_COMPARABLE_LON_LAT]:Jn,[cn.SPHERICAL_ECEF]:Se$2,[cn.SPHERICAL_MARS_PCPF]:null,[cn.SPHERICAL_MOON_PCPF]:null,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:null,[cn.PLATE_CARREE]:le$3,[cn.WGS84]:Jn,[cn.WGS84_ECEF]:he$3},[cn.PLATE_CARREE]:{[cn.CGCS2000]:ue$4,[cn.GCSMARS2000]:null,[cn.GCSMOON2000]:null,[cn.LON_LAT]:ue$4,[cn.WGS84_COMPARABLE_LON_LAT]:ue$4,[cn.SPHERICAL_ECEF]:ae$4,[cn.SPHERICAL_MARS_PCPF]:null,[cn.SPHERICAL_MOON_PCPF]:null,[cn.UNKNOWN]:null,[cn.WEB_MERCATOR]:ce$4,[cn.PLATE_CARREE]:Jn,[cn.WGS84]:ue$4,[cn.WGS84_ECEF]:Ee}};function Ie$1(_t,Tt,Mt=He$1()){return t$2e(_t)||t$2e(Tt)?null:de$3(_t,Tt,Mt).projector}function de$3(_t,Tt,Mt){if(t$2e(_t)||t$2e(Tt)||Mt.source.spatialReference===_t&&Mt.dest.spatialReference===Tt)return Mt;const Pt=Dn(_t,Mt.source),Ft=Dn(Tt,Mt.dest);return Pt===cn.UNKNOWN&&Ft===cn.UNKNOWN?E$G(_t,Tt)?Mt.projector=Jn:Mt.projector=null:Mt.projector=Fe$1[Pt][Ft],Mt}function He$1(){return{source:{spatialReference:null,spatialReferenceId:cn.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:cn.UNKNOWN,metersPerUnit:1},projector:Jn}}const ge$3={spatialReference:null,spatialReferenceId:cn.UNKNOWN},Be$1={spatialReference:null,spatialReferenceId:cn.UNKNOWN},je$2=He$1();He$1();const we$2=M$H(1),Ue$1=m$1X(1),xe$1=n$2z(),Ke$1=n$2z(),be$2=n$2z(),ke$2=n$2z();var i$1M;let l$1y=i$1M=class extends l$2v{constructor(_t){super(_t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new i$1M({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};e$2a([d$25({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l$1y.prototype,"cols",void 0),e$2a([d$25({type:S$Q,json:{write:!0}})],l$1y.prototype,"level",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$1y.prototype,"levelValue",void 0),e$2a([d$25({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l$1y.prototype,"origin",void 0),e$2a([d$25({type:Number,json:{write:!0}})],l$1y.prototype,"resolution",void 0),e$2a([d$25({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l$1y.prototype,"rows",void 0),e$2a([d$25({type:Number,json:{write:!0}})],l$1y.prototype,"scale",void 0),l$1y=i$1M=e$2a([n$2L("esri.layers.support.LOD")],l$1y);const p$2m=l$1y;var w$N;const x$D=new s$1_({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let O$m=w$N=class extends l$2v{constructor(_t){super(_t),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(_t={}){const{resolutionFactor:Tt=1,scales:Mt,size:Pt=256,spatialReference:Ft=k$y.WebMercator,numLODs:Dt=24}=_t;if(!I$C(Ft)){const Wt=[];if(Mt)for(let Qt=0;Qt<Mt.length;Qt++){const Zt=Mt[Qt];Wt.push({level:Qt,scale:Zt,resolution:Zt})}else{let Qt=5e-4;for(let Zt=Dt-1;Zt>=0;Zt--)Wt.unshift({level:Zt,scale:Qt,resolution:Qt}),Qt*=2}return new w$N({dpi:96,lods:Wt,origin:new j$Z(0,0,Ft),size:[Pt,Pt],spatialReference:Ft})}const Nt=R$x(Ft),Vt=_t.origin?new j$Z({x:_t.origin.x,y:_t.origin.y,spatialReference:Ft}):new j$Z(Nt?{x:Nt.origin[0],y:Nt.origin[1],spatialReference:Ft}:{x:0,y:0,spatialReference:Ft}),zt=96,Xt=1/(z$p(Ft)*39.37*zt),Ht=[];if(Mt)for(let Wt=0;Wt<Mt.length;Wt++){const Qt=Mt[Wt],Zt=Qt*Xt;Ht.push({level:Wt,scale:Qt,resolution:Zt})}else{let Wt=o$1W(Ft)?512/Pt*5916575275917094e-7:256/Pt*591657527591555e-6;const Qt=Math.ceil(Dt/Tt);Ht.push({level:0,scale:Wt,resolution:Wt*Xt});for(let Zt=1;Zt<Qt;Zt++){const Kt=Wt/2**Tt,er=Kt*Xt;Ht.push({level:Zt,scale:Kt,resolution:er}),Wt=Kt}}return new w$N({dpi:zt,lods:Ht,origin:Vt,size:[Pt,Pt],spatialReference:Ft})}get isWrappable(){const{spatialReference:_t,origin:Tt}=this;if(_t&&Tt){const Mt=R$x(_t);return _t.isWrappable&&Math.abs(Mt.origin[0]-Tt.x)<=Mt.dx}return!1}readOrigin(_t,Tt){return j$Z.fromJSON({spatialReference:Tt.spatialReference,..._t})}set lods(_t){let Tt=0,Mt=0;const Pt=[];this._levelToLOD={},_t&&(Tt=-1/0,Mt=1/0,_t.forEach(Ft=>{Pt.push(Ft.scale),Tt=Ft.scale>Tt?Ft.scale:Tt,Mt=Ft.scale<Mt?Ft.scale:Mt,this._levelToLOD[Ft.level]=Ft})),this._set("scales",Pt),this._set("minScale",Tt),this._set("maxScale",Mt),this._set("lods",_t),this._initializeUpsampleLevels()}readSize(_t,Tt){return[Tt.cols,Tt.rows]}writeSize(_t,Tt){Tt.cols=_t[0],Tt.rows=_t[1]}zoomToScale(_t){const Tt=this.scales;if(_t<=0)return Tt[0];if(_t>=Tt.length-1)return Tt[Tt.length-1];{const Mt=Math.floor(_t),Pt=Mt+1;return Tt[Mt]/(Tt[Mt]/Tt[Pt])**(_t-Mt)}}scaleToZoom(_t){const Tt=this.scales,Mt=Tt.length-1;let Pt=0;for(;Pt<Mt;Pt++){const Ft=Tt[Pt],Dt=Tt[Pt+1];if(Ft<=_t)return Pt;if(Dt===_t)return Pt+1;if(Ft>_t&&Dt<_t)return Pt+Math.log(Ft/_t)/Math.log(Ft/Dt)}return Pt}snapScale(_t,Tt=.95){const Mt=this.scaleToZoom(_t);return Mt%Math.floor(Mt)>=Tt?this.zoomToScale(Math.ceil(Mt)):this.zoomToScale(Math.floor(Mt))}tileAt(_t,Tt,Mt,Pt){const Ft=this.lodAt(_t);if(!Ft)return null;let Dt,Nt;if(typeof Tt=="number")Dt=Tt,Nt=Mt;else if(E$G(Tt.spatialReference,this.spatialReference))Dt=Tt.x,Nt=Tt.y,Pt=Mt;else{const Xt=M$L(Tt,this.spatialReference);if(t$2e(Xt))return null;Dt=Xt.x,Nt=Xt.y,Pt=Mt}const Vt=Ft.resolution*this.size[0],zt=Ft.resolution*this.size[1];return Pt||(Pt={id:null,level:0,row:0,col:0,extent:u$1C()}),Pt.level=_t,Pt.row=Math.floor((this.origin.y-Nt)/zt+.001),Pt.col=Math.floor((Dt-this.origin.x)/Vt+.001),this.updateTileInfo(Pt),Pt}updateTileInfo(_t,Tt=w$N.ExtrapolateOptions.NONE){let Mt=this.lodAt(_t.level);if(!Mt&&Tt===w$N.ExtrapolateOptions.POWER_OF_TWO){const Nt=this.lods[this.lods.length-1];Nt.level<_t.level&&(Mt=Nt)}if(!Mt)return;const Pt=_t.level-Mt.level,Ft=Mt.resolution*this.size[0]/2**Pt,Dt=Mt.resolution*this.size[1]/2**Pt;_t.id=`${_t.level}/${_t.row}/${_t.col}`,_t.extent||(_t.extent=u$1C()),_t.extent[0]=this.origin.x+_t.col*Ft,_t.extent[1]=this.origin.y-(_t.row+1)*Dt,_t.extent[2]=_t.extent[0]+Ft,_t.extent[3]=_t.extent[1]+Dt}upsampleTile(_t){const Tt=this._upsampleLevels[_t.level];return!(!Tt||Tt.parentLevel===-1)&&(_t.level=Tt.parentLevel,_t.row=Math.floor(_t.row/Tt.factor+.001),_t.col=Math.floor(_t.col/Tt.factor+.001),this.updateTileInfo(_t),!0)}getTileBounds(_t,Tt){const{resolution:Mt}=this.lodAt(Tt.level),Pt=Mt*this.size[0],Ft=Mt*this.size[1];return _t[0]=this.origin.x+Tt.col*Pt,_t[1]=this.origin.y-(Tt.row+1)*Ft,_t[2]=_t[0]+Pt,_t[3]=_t[1]+Ft,_t}lodAt(_t){return this._levelToLOD&&this._levelToLOD[_t]||null}clone(){return w$N.fromJSON(this.write({}))}getOrCreateCompatible(_t,Tt){if(this.size[0]===256&&this.size[1]===256)return _t===256?this:null;const Mt=[],Pt=this.lods.length;for(let Ft=0;Ft<Pt;Ft++){const Dt=this.lods[Ft],Nt=Dt.resolution*Tt;Mt.push(new p$2m({level:Dt.level,scale:Dt.scale,resolution:Nt}))}return new w$N({size:[_t,_t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:Mt})}_initializeUpsampleLevels(){const _t=this.lods;this._upsampleLevels=[];let Tt=null;for(let Mt=0;Mt<_t.length;Mt++){const Pt=_t[Mt];this._upsampleLevels[Pt.level]={parentLevel:Tt?Tt.level:-1,factor:Tt?Tt.resolution/Pt.resolution:0},Tt=Pt}}};e$2a([d$25({type:Number,json:{write:!0}})],O$m.prototype,"compressionQuality",void 0),e$2a([d$25({type:Number,json:{write:!0}})],O$m.prototype,"dpi",void 0),e$2a([d$25({type:String,json:{read:x$D.read,write:x$D.write,origins:{"web-scene":{read:!1,write:!1}}}})],O$m.prototype,"format",void 0),e$2a([d$25({readOnly:!0})],O$m.prototype,"isWrappable",null),e$2a([d$25({type:j$Z,json:{write:!0}})],O$m.prototype,"origin",void 0),e$2a([o$1U("origin")],O$m.prototype,"readOrigin",null),e$2a([d$25({type:[p$2m],value:null,json:{write:!0}})],O$m.prototype,"lods",null),e$2a([d$25({readOnly:!0})],O$m.prototype,"minScale",void 0),e$2a([d$25({readOnly:!0})],O$m.prototype,"maxScale",void 0),e$2a([d$25({readOnly:!0})],O$m.prototype,"scales",void 0),e$2a([d$25({cast:_t=>Array.isArray(_t)?_t:typeof _t=="number"?[_t,_t]:[256,256]})],O$m.prototype,"size",void 0),e$2a([o$1U("size",["rows","cols"])],O$m.prototype,"readSize",null),e$2a([r$1C("size",{cols:{type:S$Q},rows:{type:S$Q}})],O$m.prototype,"writeSize",null),e$2a([d$25({type:k$y,json:{write:!0}})],O$m.prototype,"spatialReference",void 0),O$m=w$N=e$2a([n$2L("esri.layers.support.TileInfo")],O$m),function(_t){var Tt;(Tt=_t.ExtrapolateOptions||(_t.ExtrapolateOptions={}))[Tt.NONE=0]="NONE",Tt[Tt.POWER_OF_TWO=1]="POWER_OF_TWO"}(O$m||(O$m={}));const S$w=O$m,n$20={widthBreakpoint:{getValue(_t){const Tt=_t.viewSize[0],Mt=_t.breakpoints,Pt=this.values;return Tt<=Mt.xsmall?Pt.xsmall:Tt<=Mt.small?Pt.small:Tt<=Mt.medium?Pt.medium:Tt<=Mt.large?Pt.large:Pt.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(_t){const Tt=_t.viewSize[1],Mt=_t.breakpoints,Pt=this.values;return Tt<=Mt.xsmall?Pt.xsmall:Tt<=Mt.small?Pt.small:Tt<=Mt.medium?Pt.medium:Tt<=Mt.large?Pt.large:Pt.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(_t){const Tt=_t.viewSize,Mt=Tt[0],Pt=Tt[1],Ft=this.values;return Pt>=Mt?Ft.portrait:Ft.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},o$1j={xsmall:544,small:768,medium:992,large:1200};function m$1m(_t){const Tt=_t;return Tt&&Tt.xsmall<Tt.small&&Tt.small<Tt.medium&&Tt.medium<Tt.large}function g$V(_t,Tt){return Tt?n$20[_t].valueToClassName[Tt].split(" "):[]}const w$M=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt),this._breakpointsHandles=new u$1P,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=o$1j}initialize(){this._breakpointsHandles.add(l$2e(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),h$1w))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=l$2H(this._breakpointsHandles))}set breakpoints(Mt){if(Mt===this._get("breakpoints"))return;const Pt=m$1m(Mt);if(!Pt){const Ft=JSON.stringify(o$1j,null,2);console.warn("provided breakpoints are not valid, using defaults:"+Ft)}Mt=Pt?Mt:o$1j,this._set("breakpoints",{...Mt})}_updateClassNames(){if(!this.container)return;const Mt=t$29.acquire(),Pt=t$29.acquire();let Ft,Dt=!1;for(Ft in n$20){const Nt=this[Ft],Vt=n$20[Ft].getValue({viewSize:this.size,breakpoints:this.breakpoints});Nt!==Vt&&(Dt=!0,this[Ft]=Vt,g$V(Ft,Nt).forEach(zt=>Pt.push(zt)),g$V(Ft,Vt).forEach(zt=>Mt.push(zt)))}Dt&&(this._applyClassNameChanges(Mt,Pt),t$29.release(Mt),t$29.release(Pt))}_applyClassNameChanges(Mt,Pt){const Ft=this.container;Ft&&(Pt.forEach(Dt=>Ft.classList.remove(Dt)),Mt.forEach(Dt=>Ft.classList.add(Dt)))}_removeActiveClassNames(){const Mt=this.container;if(!Mt)return;let Pt;for(Pt in n$20)g$V(Pt,this[Pt]).forEach(Ft=>Mt.classList.remove(Ft))}};return e$2a([d$25()],Tt.prototype,"breakpoints",null),e$2a([d$25()],Tt.prototype,"orientation",void 0),e$2a([d$25()],Tt.prototype,"widthBreakpoint",void 0),e$2a([d$25()],Tt.prototype,"heightBreakpoint",void 0),Tt=e$2a([n$2L("esri.views.BreakpointsOwner")],Tt),Tt};function e$1o(_t){return typeof _t=="string"?document.getElementById(_t):_t}function t$1n(_t){for(;_t.hasChildNodes();)_t.removeChild(_t.firstChild)}function o$1i(_t,Tt){const Mt=Tt.parentNode;Mt&&Mt.insertBefore(_t,Tt)}function r$16(_t,Tt){for(;;){const Mt=_t.firstChild;if(!Mt)break;Tt.appendChild(Mt)}}/*!
 * @esri/arcgis-html-sanitizer - v2.10.0 - Tue Mar 15 2022 16:38:25 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var objectTag="[object Object]";function isHostObject(_t){var Tt=!1;if(_t!=null&&typeof _t.toString!="function")try{Tt=!!(_t+"")}catch{}return Tt}function overArg(_t,Tt){return function(Mt){return _t(Tt(Mt))}}var funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$1=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object),objectToString=objectProto.toString,getPrototype=overArg(Object.getPrototypeOf,Object);function isObjectLike(_t){return!!_t&&typeof _t=="object"}function isPlainObject$1(_t){if(!isObjectLike(_t)||objectToString.call(_t)!=objectTag||isHostObject(_t))return!1;var Tt=getPrototype(_t);if(Tt===null)return!0;var Mt=hasOwnProperty$1.call(Tt,"constructor")&&Tt.constructor;return typeof Mt=="function"&&Mt instanceof Mt&&funcToString.call(Mt)==objectCtorString}var lodash_isplainobject=isPlainObject$1,lib$1={exports:{}},_default$1={},lib={exports:{}},_default={};function getDefaultWhiteList$1(){var _t={};return _t["align-content"]=!1,_t["align-items"]=!1,_t["align-self"]=!1,_t["alignment-adjust"]=!1,_t["alignment-baseline"]=!1,_t.all=!1,_t["anchor-point"]=!1,_t.animation=!1,_t["animation-delay"]=!1,_t["animation-direction"]=!1,_t["animation-duration"]=!1,_t["animation-fill-mode"]=!1,_t["animation-iteration-count"]=!1,_t["animation-name"]=!1,_t["animation-play-state"]=!1,_t["animation-timing-function"]=!1,_t.azimuth=!1,_t["backface-visibility"]=!1,_t.background=!0,_t["background-attachment"]=!0,_t["background-clip"]=!0,_t["background-color"]=!0,_t["background-image"]=!0,_t["background-origin"]=!0,_t["background-position"]=!0,_t["background-repeat"]=!0,_t["background-size"]=!0,_t["baseline-shift"]=!1,_t.binding=!1,_t.bleed=!1,_t["bookmark-label"]=!1,_t["bookmark-level"]=!1,_t["bookmark-state"]=!1,_t.border=!0,_t["border-bottom"]=!0,_t["border-bottom-color"]=!0,_t["border-bottom-left-radius"]=!0,_t["border-bottom-right-radius"]=!0,_t["border-bottom-style"]=!0,_t["border-bottom-width"]=!0,_t["border-collapse"]=!0,_t["border-color"]=!0,_t["border-image"]=!0,_t["border-image-outset"]=!0,_t["border-image-repeat"]=!0,_t["border-image-slice"]=!0,_t["border-image-source"]=!0,_t["border-image-width"]=!0,_t["border-left"]=!0,_t["border-left-color"]=!0,_t["border-left-style"]=!0,_t["border-left-width"]=!0,_t["border-radius"]=!0,_t["border-right"]=!0,_t["border-right-color"]=!0,_t["border-right-style"]=!0,_t["border-right-width"]=!0,_t["border-spacing"]=!0,_t["border-style"]=!0,_t["border-top"]=!0,_t["border-top-color"]=!0,_t["border-top-left-radius"]=!0,_t["border-top-right-radius"]=!0,_t["border-top-style"]=!0,_t["border-top-width"]=!0,_t["border-width"]=!0,_t.bottom=!1,_t["box-decoration-break"]=!0,_t["box-shadow"]=!0,_t["box-sizing"]=!0,_t["box-snap"]=!0,_t["box-suppress"]=!0,_t["break-after"]=!0,_t["break-before"]=!0,_t["break-inside"]=!0,_t["caption-side"]=!1,_t.chains=!1,_t.clear=!0,_t.clip=!1,_t["clip-path"]=!1,_t["clip-rule"]=!1,_t.color=!0,_t["color-interpolation-filters"]=!0,_t["column-count"]=!1,_t["column-fill"]=!1,_t["column-gap"]=!1,_t["column-rule"]=!1,_t["column-rule-color"]=!1,_t["column-rule-style"]=!1,_t["column-rule-width"]=!1,_t["column-span"]=!1,_t["column-width"]=!1,_t.columns=!1,_t.contain=!1,_t.content=!1,_t["counter-increment"]=!1,_t["counter-reset"]=!1,_t["counter-set"]=!1,_t.crop=!1,_t.cue=!1,_t["cue-after"]=!1,_t["cue-before"]=!1,_t.cursor=!1,_t.direction=!1,_t.display=!0,_t["display-inside"]=!0,_t["display-list"]=!0,_t["display-outside"]=!0,_t["dominant-baseline"]=!1,_t.elevation=!1,_t["empty-cells"]=!1,_t.filter=!1,_t.flex=!1,_t["flex-basis"]=!1,_t["flex-direction"]=!1,_t["flex-flow"]=!1,_t["flex-grow"]=!1,_t["flex-shrink"]=!1,_t["flex-wrap"]=!1,_t.float=!1,_t["float-offset"]=!1,_t["flood-color"]=!1,_t["flood-opacity"]=!1,_t["flow-from"]=!1,_t["flow-into"]=!1,_t.font=!0,_t["font-family"]=!0,_t["font-feature-settings"]=!0,_t["font-kerning"]=!0,_t["font-language-override"]=!0,_t["font-size"]=!0,_t["font-size-adjust"]=!0,_t["font-stretch"]=!0,_t["font-style"]=!0,_t["font-synthesis"]=!0,_t["font-variant"]=!0,_t["font-variant-alternates"]=!0,_t["font-variant-caps"]=!0,_t["font-variant-east-asian"]=!0,_t["font-variant-ligatures"]=!0,_t["font-variant-numeric"]=!0,_t["font-variant-position"]=!0,_t["font-weight"]=!0,_t.grid=!1,_t["grid-area"]=!1,_t["grid-auto-columns"]=!1,_t["grid-auto-flow"]=!1,_t["grid-auto-rows"]=!1,_t["grid-column"]=!1,_t["grid-column-end"]=!1,_t["grid-column-start"]=!1,_t["grid-row"]=!1,_t["grid-row-end"]=!1,_t["grid-row-start"]=!1,_t["grid-template"]=!1,_t["grid-template-areas"]=!1,_t["grid-template-columns"]=!1,_t["grid-template-rows"]=!1,_t["hanging-punctuation"]=!1,_t.height=!0,_t.hyphens=!1,_t.icon=!1,_t["image-orientation"]=!1,_t["image-resolution"]=!1,_t["ime-mode"]=!1,_t["initial-letters"]=!1,_t["inline-box-align"]=!1,_t["justify-content"]=!1,_t["justify-items"]=!1,_t["justify-self"]=!1,_t.left=!1,_t["letter-spacing"]=!0,_t["lighting-color"]=!0,_t["line-box-contain"]=!1,_t["line-break"]=!1,_t["line-grid"]=!1,_t["line-height"]=!1,_t["line-snap"]=!1,_t["line-stacking"]=!1,_t["line-stacking-ruby"]=!1,_t["line-stacking-shift"]=!1,_t["line-stacking-strategy"]=!1,_t["list-style"]=!0,_t["list-style-image"]=!0,_t["list-style-position"]=!0,_t["list-style-type"]=!0,_t.margin=!0,_t["margin-bottom"]=!0,_t["margin-left"]=!0,_t["margin-right"]=!0,_t["margin-top"]=!0,_t["marker-offset"]=!1,_t["marker-side"]=!1,_t.marks=!1,_t.mask=!1,_t["mask-box"]=!1,_t["mask-box-outset"]=!1,_t["mask-box-repeat"]=!1,_t["mask-box-slice"]=!1,_t["mask-box-source"]=!1,_t["mask-box-width"]=!1,_t["mask-clip"]=!1,_t["mask-image"]=!1,_t["mask-origin"]=!1,_t["mask-position"]=!1,_t["mask-repeat"]=!1,_t["mask-size"]=!1,_t["mask-source-type"]=!1,_t["mask-type"]=!1,_t["max-height"]=!0,_t["max-lines"]=!1,_t["max-width"]=!0,_t["min-height"]=!0,_t["min-width"]=!0,_t["move-to"]=!1,_t["nav-down"]=!1,_t["nav-index"]=!1,_t["nav-left"]=!1,_t["nav-right"]=!1,_t["nav-up"]=!1,_t["object-fit"]=!1,_t["object-position"]=!1,_t.opacity=!1,_t.order=!1,_t.orphans=!1,_t.outline=!1,_t["outline-color"]=!1,_t["outline-offset"]=!1,_t["outline-style"]=!1,_t["outline-width"]=!1,_t.overflow=!1,_t["overflow-wrap"]=!1,_t["overflow-x"]=!1,_t["overflow-y"]=!1,_t.padding=!0,_t["padding-bottom"]=!0,_t["padding-left"]=!0,_t["padding-right"]=!0,_t["padding-top"]=!0,_t.page=!1,_t["page-break-after"]=!1,_t["page-break-before"]=!1,_t["page-break-inside"]=!1,_t["page-policy"]=!1,_t.pause=!1,_t["pause-after"]=!1,_t["pause-before"]=!1,_t.perspective=!1,_t["perspective-origin"]=!1,_t.pitch=!1,_t["pitch-range"]=!1,_t["play-during"]=!1,_t.position=!1,_t["presentation-level"]=!1,_t.quotes=!1,_t["region-fragment"]=!1,_t.resize=!1,_t.rest=!1,_t["rest-after"]=!1,_t["rest-before"]=!1,_t.richness=!1,_t.right=!1,_t.rotation=!1,_t["rotation-point"]=!1,_t["ruby-align"]=!1,_t["ruby-merge"]=!1,_t["ruby-position"]=!1,_t["shape-image-threshold"]=!1,_t["shape-outside"]=!1,_t["shape-margin"]=!1,_t.size=!1,_t.speak=!1,_t["speak-as"]=!1,_t["speak-header"]=!1,_t["speak-numeral"]=!1,_t["speak-punctuation"]=!1,_t["speech-rate"]=!1,_t.stress=!1,_t["string-set"]=!1,_t["tab-size"]=!1,_t["table-layout"]=!1,_t["text-align"]=!0,_t["text-align-last"]=!0,_t["text-combine-upright"]=!0,_t["text-decoration"]=!0,_t["text-decoration-color"]=!0,_t["text-decoration-line"]=!0,_t["text-decoration-skip"]=!0,_t["text-decoration-style"]=!0,_t["text-emphasis"]=!0,_t["text-emphasis-color"]=!0,_t["text-emphasis-position"]=!0,_t["text-emphasis-style"]=!0,_t["text-height"]=!0,_t["text-indent"]=!0,_t["text-justify"]=!0,_t["text-orientation"]=!0,_t["text-overflow"]=!0,_t["text-shadow"]=!0,_t["text-space-collapse"]=!0,_t["text-transform"]=!0,_t["text-underline-position"]=!0,_t["text-wrap"]=!0,_t.top=!1,_t.transform=!1,_t["transform-origin"]=!1,_t["transform-style"]=!1,_t.transition=!1,_t["transition-delay"]=!1,_t["transition-duration"]=!1,_t["transition-property"]=!1,_t["transition-timing-function"]=!1,_t["unicode-bidi"]=!1,_t["vertical-align"]=!1,_t.visibility=!1,_t["voice-balance"]=!1,_t["voice-duration"]=!1,_t["voice-family"]=!1,_t["voice-pitch"]=!1,_t["voice-range"]=!1,_t["voice-rate"]=!1,_t["voice-stress"]=!1,_t["voice-volume"]=!1,_t.volume=!1,_t["white-space"]=!1,_t.widows=!1,_t.width=!0,_t["will-change"]=!1,_t["word-break"]=!0,_t["word-spacing"]=!0,_t["word-wrap"]=!0,_t["wrap-flow"]=!1,_t["wrap-through"]=!1,_t["writing-mode"]=!1,_t["z-index"]=!1,_t}function onAttr(_t,Tt,Mt){}function onIgnoreAttr(_t,Tt,Mt){}var REGEXP_URL_JAVASCRIPT=/javascript\s*\:/img;function safeAttrValue$1(_t,Tt){return REGEXP_URL_JAVASCRIPT.test(Tt)?"":Tt}_default.whiteList=getDefaultWhiteList$1();_default.getDefaultWhiteList=getDefaultWhiteList$1;_default.onAttr=onAttr;_default.onIgnoreAttr=onIgnoreAttr;_default.safeAttrValue=safeAttrValue$1;var util$1={indexOf:function(_t,Tt){var Mt,Pt;if(Array.prototype.indexOf)return _t.indexOf(Tt);for(Mt=0,Pt=_t.length;Mt<Pt;Mt++)if(_t[Mt]===Tt)return Mt;return-1},forEach:function(_t,Tt,Mt){var Pt,Ft;if(Array.prototype.forEach)return _t.forEach(Tt,Mt);for(Pt=0,Ft=_t.length;Pt<Ft;Pt++)Tt.call(Mt,_t[Pt],Pt,_t)},trim:function(_t){return String.prototype.trim?_t.trim():_t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(_t){return String.prototype.trimRight?_t.trimRight():_t.replace(/(\s*$)/g,"")}},_$3$1=util$1;function parseStyle$1(_t,Tt){_t=_$3$1.trimRight(_t),_t[_t.length-1]!==";"&&(_t+=";");var Mt=_t.length,Pt=!1,Ft=0,Dt=0,Nt="";function Vt(){if(!Pt){var Ht=_$3$1.trim(_t.slice(Ft,Dt)),Wt=Ht.indexOf(":");if(Wt!==-1){var Qt=_$3$1.trim(Ht.slice(0,Wt)),Zt=_$3$1.trim(Ht.slice(Wt+1));if(Qt){var Kt=Tt(Ft,Nt.length,Qt,Zt,Ht);Kt&&(Nt+=Kt+"; ")}}}Ft=Dt+1}for(;Dt<Mt;Dt++){var zt=_t[Dt];if(zt==="/"&&_t[Dt+1]==="*"){var Xt=_t.indexOf("*/",Dt+2);if(Xt===-1)break;Dt=Xt+1,Ft=Dt+1,Pt=!1}else zt==="("?Pt=!0:zt===")"?Pt=!1:zt===";"?Pt||Vt():zt===`
`&&Vt()}return _$3$1.trim(Nt)}var parser$2=parseStyle$1,DEFAULT$1=_default,parseStyle=parser$2;function isNull$1(_t){return _t==null}function shallowCopyObject$1(_t){var Tt={};for(var Mt in _t)Tt[Mt]=_t[Mt];return Tt}function FilterCSS$2(_t){_t=shallowCopyObject$1(_t||{}),_t.whiteList=_t.whiteList||DEFAULT$1.whiteList,_t.onAttr=_t.onAttr||DEFAULT$1.onAttr,_t.onIgnoreAttr=_t.onIgnoreAttr||DEFAULT$1.onIgnoreAttr,_t.safeAttrValue=_t.safeAttrValue||DEFAULT$1.safeAttrValue,this.options=_t}FilterCSS$2.prototype.process=function(_t){if(_t=_t||"",_t=_t.toString(),!_t)return"";var Tt=this,Mt=Tt.options,Pt=Mt.whiteList,Ft=Mt.onAttr,Dt=Mt.onIgnoreAttr,Nt=Mt.safeAttrValue,Vt=parseStyle(_t,function(zt,Xt,Ht,Wt,Qt){var Zt=Pt[Ht],Kt=!1;if(Zt===!0?Kt=Zt:typeof Zt=="function"?Kt=Zt(Wt):Zt instanceof RegExp&&(Kt=Zt.test(Wt)),Kt!==!0&&(Kt=!1),Wt=Nt(Ht,Wt),!!Wt){var er={position:Xt,sourcePosition:zt,source:Qt,isWhite:Kt};if(Kt){var Yt=Ft(Ht,Wt,er);return isNull$1(Yt)?Ht+":"+Wt:Yt}else{var Yt=Dt(Ht,Wt,er);if(!isNull$1(Yt))return Yt}}});return Vt};var css=FilterCSS$2;(function(_t,Tt){var Mt=_default,Pt=css;function Ft(Nt,Vt){var zt=new Pt(Vt);return zt.process(Nt)}Tt=_t.exports=Ft,Tt.FilterCSS=Pt;for(var Dt in Mt)Tt[Dt]=Mt[Dt]})(lib,lib.exports);var util={indexOf:function(_t,Tt){var Mt,Pt;if(Array.prototype.indexOf)return _t.indexOf(Tt);for(Mt=0,Pt=_t.length;Mt<Pt;Mt++)if(_t[Mt]===Tt)return Mt;return-1},forEach:function(_t,Tt,Mt){var Pt,Ft;if(Array.prototype.forEach)return _t.forEach(Tt,Mt);for(Pt=0,Ft=_t.length;Pt<Ft;Pt++)Tt.call(Mt,_t[Pt],Pt,_t)},trim:function(_t){return String.prototype.trim?_t.trim():_t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(_t){var Tt=/\s|\n|\t/,Mt=Tt.exec(_t);return Mt?Mt.index:-1}},FilterCSS$1=lib.exports.FilterCSS,getDefaultCSSWhiteList=lib.exports.getDefaultWhiteList,_$2$1=util;function getDefaultWhiteList(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var defaultCSSFilter=new FilterCSS$1;function onTag(_t,Tt,Mt){}function onIgnoreTag(_t,Tt,Mt){}function onTagAttr(_t,Tt,Mt){}function onIgnoreTagAttr(_t,Tt,Mt){}function escapeHtml(_t){return _t.replace(REGEXP_LT,"&lt;").replace(REGEXP_GT,"&gt;")}function safeAttrValue(_t,Tt,Mt,Pt){if(Mt=friendlyAttrValue(Mt),Tt==="href"||Tt==="src"){if(Mt=_$2$1.trim(Mt),Mt==="#")return"#";if(!(Mt.substr(0,7)==="http://"||Mt.substr(0,8)==="https://"||Mt.substr(0,7)==="mailto:"||Mt.substr(0,4)==="tel:"||Mt.substr(0,11)==="data:image/"||Mt.substr(0,6)==="ftp://"||Mt.substr(0,2)==="./"||Mt.substr(0,3)==="../"||Mt[0]==="#"||Mt[0]==="/"))return""}else if(Tt==="background"){if(REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex=0,REGEXP_DEFAULT_ON_TAG_ATTR_4.test(Mt))return""}else if(Tt==="style"){if(REGEXP_DEFAULT_ON_TAG_ATTR_7.lastIndex=0,REGEXP_DEFAULT_ON_TAG_ATTR_7.test(Mt)||(REGEXP_DEFAULT_ON_TAG_ATTR_8.lastIndex=0,REGEXP_DEFAULT_ON_TAG_ATTR_8.test(Mt)&&(REGEXP_DEFAULT_ON_TAG_ATTR_4.lastIndex=0,REGEXP_DEFAULT_ON_TAG_ATTR_4.test(Mt))))return"";Pt!==!1&&(Pt=Pt||defaultCSSFilter,Mt=Pt.process(Mt))}return Mt=escapeAttrValue(Mt),Mt}var REGEXP_LT=/</g,REGEXP_GT=/>/g,REGEXP_QUOTE=/"/g,REGEXP_QUOTE_2=/&quot;/g,REGEXP_ATTR_VALUE_1=/&#([a-zA-Z0-9]*);?/gim,REGEXP_ATTR_VALUE_COLON=/&colon;?/gim,REGEXP_ATTR_VALUE_NEWLINE=/&newline;?/gim,REGEXP_DEFAULT_ON_TAG_ATTR_4=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,REGEXP_DEFAULT_ON_TAG_ATTR_7=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,REGEXP_DEFAULT_ON_TAG_ATTR_8=/u\s*r\s*l\s*\(.*/gi;function escapeQuote(_t){return _t.replace(REGEXP_QUOTE,"&quot;")}function unescapeQuote(_t){return _t.replace(REGEXP_QUOTE_2,'"')}function escapeHtmlEntities(_t){return _t.replace(REGEXP_ATTR_VALUE_1,function(Mt,Pt){return Pt[0]==="x"||Pt[0]==="X"?String.fromCharCode(parseInt(Pt.substr(1),16)):String.fromCharCode(parseInt(Pt,10))})}function escapeDangerHtml5Entities(_t){return _t.replace(REGEXP_ATTR_VALUE_COLON,":").replace(REGEXP_ATTR_VALUE_NEWLINE," ")}function clearNonPrintableCharacter(_t){for(var Tt="",Mt=0,Pt=_t.length;Mt<Pt;Mt++)Tt+=_t.charCodeAt(Mt)<32?" ":_t.charAt(Mt);return _$2$1.trim(Tt)}function friendlyAttrValue(_t){return _t=unescapeQuote(_t),_t=escapeHtmlEntities(_t),_t=escapeDangerHtml5Entities(_t),_t=clearNonPrintableCharacter(_t),_t}function escapeAttrValue(_t){return _t=escapeQuote(_t),_t=escapeHtml(_t),_t}function onIgnoreTagStripAll(){return""}function StripTagBody(_t,Tt){typeof Tt!="function"&&(Tt=function(){});var Mt=!Array.isArray(_t);function Pt(Nt){return Mt?!0:_$2$1.indexOf(_t,Nt)!==-1}var Ft=[],Dt=!1;return{onIgnoreTag:function(Nt,Vt,zt){if(Pt(Nt))if(zt.isClosing){var Xt="[/removed]",Ht=zt.position+Xt.length;return Ft.push([Dt!==!1?Dt:zt.position,Ht]),Dt=!1,Xt}else return Dt||(Dt=zt.position),"[removed]";else return Tt(Nt,Vt,zt)},remove:function(Nt){var Vt="",zt=0;return _$2$1.forEach(Ft,function(Xt){Vt+=Nt.slice(zt,Xt[0]),zt=Xt[1]}),Vt+=Nt.slice(zt),Vt}}}function stripCommentTag(_t){for(var Tt="",Mt=0;Mt<_t.length;){var Pt=_t.indexOf("<!--",Mt);if(Pt===-1){Tt+=_t.slice(Mt);break}Tt+=_t.slice(Mt,Pt);var Ft=_t.indexOf("-->",Pt);if(Ft===-1)break;Mt=Ft+3}return Tt}function stripBlankChar(_t){var Tt=_t.split("");return Tt=Tt.filter(function(Mt){var Pt=Mt.charCodeAt(0);return Pt===127?!1:Pt<=31?Pt===10||Pt===13:!0}),Tt.join("")}_default$1.whiteList=getDefaultWhiteList();_default$1.getDefaultWhiteList=getDefaultWhiteList;_default$1.onTag=onTag;_default$1.onIgnoreTag=onIgnoreTag;_default$1.onTagAttr=onTagAttr;_default$1.onIgnoreTagAttr=onIgnoreTagAttr;_default$1.safeAttrValue=safeAttrValue;_default$1.escapeHtml=escapeHtml;_default$1.escapeQuote=escapeQuote;_default$1.unescapeQuote=unescapeQuote;_default$1.escapeHtmlEntities=escapeHtmlEntities;_default$1.escapeDangerHtml5Entities=escapeDangerHtml5Entities;_default$1.clearNonPrintableCharacter=clearNonPrintableCharacter;_default$1.friendlyAttrValue=friendlyAttrValue;_default$1.escapeAttrValue=escapeAttrValue;_default$1.onIgnoreTagStripAll=onIgnoreTagStripAll;_default$1.StripTagBody=StripTagBody;_default$1.stripCommentTag=stripCommentTag;_default$1.stripBlankChar=stripBlankChar;_default$1.cssFilter=defaultCSSFilter;_default$1.getDefaultCSSWhiteList=getDefaultCSSWhiteList;var parser$1={},_$1$1=util;function getTagName(_t){var Tt=_$1$1.spaceIndex(_t);if(Tt===-1)var Mt=_t.slice(1,-1);else var Mt=_t.slice(1,Tt+1);return Mt=_$1$1.trim(Mt).toLowerCase(),Mt.slice(0,1)==="/"&&(Mt=Mt.slice(1)),Mt.slice(-1)==="/"&&(Mt=Mt.slice(0,-1)),Mt}function isClosing(_t){return _t.slice(0,2)==="</"}function parseTag$1(_t,Tt,Mt){var Pt="",Ft=0,Dt=!1,Nt=!1,Vt=0,zt=_t.length,Xt="",Ht="";e:for(Vt=0;Vt<zt;Vt++){var Wt=_t.charAt(Vt);if(Dt===!1){if(Wt==="<"){Dt=Vt;continue}}else if(Nt===!1){if(Wt==="<"){Pt+=Mt(_t.slice(Ft,Vt)),Dt=Vt,Ft=Vt;continue}if(Wt===">"){Pt+=Mt(_t.slice(Ft,Dt)),Ht=_t.slice(Dt,Vt+1),Xt=getTagName(Ht),Pt+=Tt(Dt,Pt.length,Xt,Ht,isClosing(Ht)),Ft=Vt+1,Dt=!1;continue}if(Wt==='"'||Wt==="'")for(var Qt=1,Zt=_t.charAt(Vt-Qt);Zt.trim()===""||Zt==="=";){if(Zt==="="){Nt=Wt;continue e}Zt=_t.charAt(Vt-++Qt)}}else if(Wt===Nt){Nt=!1;continue}}return Ft<_t.length&&(Pt+=Mt(_t.substr(Ft))),Pt}var REGEXP_ILLEGAL_ATTR_NAME=/[^a-zA-Z0-9_:\.\-]/gim;function parseAttr$1(_t,Tt){var Mt=0,Pt=[],Ft=!1,Dt=_t.length;function Nt(Wt,Qt){if(Wt=_$1$1.trim(Wt),Wt=Wt.replace(REGEXP_ILLEGAL_ATTR_NAME,"").toLowerCase(),!(Wt.length<1)){var Zt=Tt(Wt,Qt||"");Zt&&Pt.push(Zt)}}for(var Vt=0;Vt<Dt;Vt++){var zt=_t.charAt(Vt),Xt,Ht;if(Ft===!1&&zt==="="){Ft=_t.slice(Mt,Vt),Mt=Vt+1;continue}if(Ft!==!1&&Vt===Mt&&(zt==='"'||zt==="'")&&_t.charAt(Vt-1)==="="){if(Ht=_t.indexOf(zt,Vt+1),Ht===-1)break;Xt=_$1$1.trim(_t.slice(Mt+1,Ht)),Nt(Ft,Xt),Ft=!1,Vt=Ht,Mt=Vt+1;continue}if(/\s|\n|\t/.test(zt))if(_t=_t.replace(/\s|\n|\t/g," "),Ft===!1)if(Ht=findNextEqual(_t,Vt),Ht===-1){Xt=_$1$1.trim(_t.slice(Mt,Vt)),Nt(Xt),Ft=!1,Mt=Vt+1;continue}else{Vt=Ht-1;continue}else if(Ht=findBeforeEqual(_t,Vt-1),Ht===-1){Xt=_$1$1.trim(_t.slice(Mt,Vt)),Xt=stripQuoteWrap(Xt),Nt(Ft,Xt),Ft=!1,Mt=Vt+1;continue}else continue}return Mt<_t.length&&(Ft===!1?Nt(_t.slice(Mt)):Nt(Ft,stripQuoteWrap(_$1$1.trim(_t.slice(Mt))))),_$1$1.trim(Pt.join(" "))}function findNextEqual(_t,Tt){for(;Tt<_t.length;Tt++){var Mt=_t[Tt];if(Mt!==" ")return Mt==="="?Tt:-1}}function findBeforeEqual(_t,Tt){for(;Tt>0;Tt--){var Mt=_t[Tt];if(Mt!==" ")return Mt==="="?Tt:-1}}function isQuoteWrapString(_t){return _t[0]==='"'&&_t[_t.length-1]==='"'||_t[0]==="'"&&_t[_t.length-1]==="'"}function stripQuoteWrap(_t){return isQuoteWrapString(_t)?_t.substr(1,_t.length-2):_t}parser$1.parseTag=parseTag$1;parser$1.parseAttr=parseAttr$1;var FilterCSS=lib.exports.FilterCSS,DEFAULT=_default$1,parser=parser$1,parseTag=parser.parseTag,parseAttr=parser.parseAttr,_$m=util;function isNull(_t){return _t==null}function getAttrs(_t){var Tt=_$m.spaceIndex(_t);if(Tt===-1)return{html:"",closing:_t[_t.length-2]==="/"};_t=_$m.trim(_t.slice(Tt+1,-1));var Mt=_t[_t.length-1]==="/";return Mt&&(_t=_$m.trim(_t.slice(0,-1))),{html:_t,closing:Mt}}function shallowCopyObject(_t){var Tt={};for(var Mt in _t)Tt[Mt]=_t[Mt];return Tt}function FilterXSS(_t){_t=shallowCopyObject(_t||{}),_t.stripIgnoreTag&&(_t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),_t.onIgnoreTag=DEFAULT.onIgnoreTagStripAll),_t.whiteList=_t.whiteList||_t.allowList||DEFAULT.whiteList,_t.onTag=_t.onTag||DEFAULT.onTag,_t.onTagAttr=_t.onTagAttr||DEFAULT.onTagAttr,_t.onIgnoreTag=_t.onIgnoreTag||DEFAULT.onIgnoreTag,_t.onIgnoreTagAttr=_t.onIgnoreTagAttr||DEFAULT.onIgnoreTagAttr,_t.safeAttrValue=_t.safeAttrValue||DEFAULT.safeAttrValue,_t.escapeHtml=_t.escapeHtml||DEFAULT.escapeHtml,this.options=_t,_t.css===!1?this.cssFilter=!1:(_t.css=_t.css||{},this.cssFilter=new FilterCSS(_t.css))}FilterXSS.prototype.process=function(_t){if(_t=_t||"",_t=_t.toString(),!_t)return"";var Tt=this,Mt=Tt.options,Pt=Mt.whiteList,Ft=Mt.onTag,Dt=Mt.onIgnoreTag,Nt=Mt.onTagAttr,Vt=Mt.onIgnoreTagAttr,zt=Mt.safeAttrValue,Xt=Mt.escapeHtml,Ht=Tt.cssFilter;Mt.stripBlankChar&&(_t=DEFAULT.stripBlankChar(_t)),Mt.allowCommentTag||(_t=DEFAULT.stripCommentTag(_t));var Wt=!1;if(Mt.stripIgnoreTagBody){var Wt=DEFAULT.StripTagBody(Mt.stripIgnoreTagBody,Dt);Dt=Wt.onIgnoreTag}var Qt=parseTag(_t,function(Zt,Kt,er,Yt,rr){var ir={sourcePosition:Zt,position:Kt,isClosing:rr,isWhite:Pt.hasOwnProperty(er)},nr=Ft(er,Yt,ir);if(!isNull(nr))return nr;if(ir.isWhite){if(ir.isClosing)return"</"+er+">";var ar=getAttrs(Yt),or=Pt[er],ur=parseAttr(ar.html,function(hr,gr){var pr=_$m.indexOf(or,hr)!==-1,mr=Nt(er,hr,gr,pr);if(!isNull(mr))return mr;if(pr)return gr=zt(er,hr,gr,Ht),gr?hr+'="'+gr+'"':hr;var mr=Vt(er,hr,gr,pr);return isNull(mr)?void 0:mr}),Yt="<"+er;return ur&&(Yt+=" "+ur),ar.closing&&(Yt+=" /"),Yt+=">",Yt}else{var nr=Dt(er,Yt,ir);return isNull(nr)?Xt(Yt):nr}},Xt);return Wt&&(Qt=Wt.remove(Qt)),Qt};var xss=FilterXSS;(function(_t,Tt){var Mt=_default$1,Pt=parser$1,Ft=xss;function Dt(zt,Xt){var Ht=new Ft(Xt);return Ht.process(zt)}Tt=_t.exports=Dt,Tt.filterXSS=Dt,Tt.FilterXSS=Ft;for(var Nt in Mt)Tt[Nt]=Mt[Nt];for(var Nt in Pt)Tt[Nt]=Pt[Nt];function Vt(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}Vt()&&(self.filterXSS=_t.exports)})(lib$1,lib$1.exports);var Sanitizer=function(){function _t(Tt,Mt){var Pt=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(Dt,Nt,Vt,zt){return Dt==="a"&&Nt==="href"||(Dt==="img"||Dt==="source")&&Nt==="src"?Pt.sanitizeUrl(Vt):lib$1.exports.safeAttrValue(Dt,Nt,Vt,zt)}};var Ft;Tt&&!Mt?Ft=Tt:Tt&&Mt?(Ft=Object.create(this.arcgisFilterOptions),Object.keys(Tt).forEach(function(Dt){Dt==="whiteList"?Ft.whiteList=Pt._extendObjectOfArrays([Pt.arcgisWhiteList,Tt.whiteList||{}]):Ft[Dt]=Tt[Dt]})):(Ft=Object.create(this.arcgisFilterOptions),Ft.whiteList=this.arcgisWhiteList),this.xssFilterOptions=Ft,this._xssFilter=new lib$1.exports.FilterXSS(Ft)}return _t.prototype.sanitize=function(Tt,Mt){switch(Mt===void 0&&(Mt={}),typeof Tt){case"number":return isNaN(Tt)||!isFinite(Tt)?null:Tt;case"boolean":return Tt;case"string":return this._xssFilter.process(Tt);case"object":return this._iterateOverObject(Tt,Mt);default:return Mt.allowUndefined&&typeof Tt>"u"?void 0:null}},_t.prototype.sanitizeUrl=function(Tt,Mt){var Pt=(Mt!=null?Mt:{}).isProtocolRequired,Ft=Pt===void 0?!0:Pt,Dt=this._trim(Tt.substring(0,Tt.indexOf(":"))),Nt=Tt==="/",Vt=/^#/.test(Tt),zt=Dt&&this.allowedProtocols.indexOf(Dt.toLowerCase())>-1;return Nt||Vt||zt?lib$1.exports.escapeAttrValue(Tt):!Dt&&!Ft?lib$1.exports.escapeAttrValue("https://".concat(Tt)):""},_t.prototype.sanitizeHTMLAttribute=function(Tt,Mt,Pt,Ft){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(Tt,Mt,Pt,Ft):lib$1.exports.safeAttrValue(Tt,Mt,Pt,Ft)},_t.prototype.validate=function(Tt,Mt){Mt===void 0&&(Mt={});var Pt=this.sanitize(Tt,Mt);return{isValid:Tt===Pt,sanitized:Pt}},_t.prototype._extendObjectOfArrays=function(Tt){var Mt={};return Tt.forEach(function(Pt){Object.keys(Pt).forEach(function(Ft){Array.isArray(Pt[Ft])&&Array.isArray(Mt[Ft])?Mt[Ft]=Mt[Ft].concat(Pt[Ft]):Mt[Ft]=Pt[Ft]})}),Mt},_t.prototype._iterateOverObject=function(Tt,Mt){var Pt=this;Mt===void 0&&(Mt={});try{var Ft=!1,Dt=void 0;if(Array.isArray(Tt))Dt=Tt.reduce(function(Vt,zt){var Xt=Pt.validate(zt,Mt);return Xt.isValid?Vt.concat([zt]):(Ft=!0,Vt.concat([Xt.sanitized]))},[]);else if(lodash_isplainobject(Tt)){var Nt=Object.keys(Tt);Dt=Nt.reduce(function(Vt,zt){var Xt=Tt[zt],Ht=Pt.validate(Xt,Mt);return Ht.isValid?Vt[zt]=Xt:(Ft=!0,Vt[zt]=Ht.sanitized),Vt},{})}else return Mt.allowUndefined&&typeof Tt>"u"?void 0:null;return Ft?Dt:Tt}catch{return null}},_t.prototype._trim=function(Tt){return String.prototype.trim?Tt.trim():Tt.replace(/(^\s*)|(\s*$)/g,"")},_t}();const n$1$=new Map;function t$1m(){n$1$.clear()}function e$1n(_t){return n$1$.get(_t)}function c$29(_t,Tt){n$1$.set(_t,Tt)}function o$1h(_t){n$1$.delete(_t)}var o$1g,s$1p,a$1S=function(_t){if("WebkitTransition"in _t.style)o$1g="webkitTransitionEnd",s$1p="webkitAnimationEnd";else{if(!("transition"in _t.style))throw new Error("Your browser is not supported!");o$1g="transitionend",s$1p="animationend"}},c$28=function(_t){o$1g||a$1S(_t)},l$1x=function(_t,Tt){return Tt===void 0&&(Tt=_t+"-active"),function(Mt){c$28(Mt);var Pt=!1,Ft=function(Dt){Pt||(Pt=!0,Mt.removeEventListener(o$1g,Ft),Mt.removeEventListener(s$1p,Ft),Mt.classList.remove(_t),Mt.classList.remove(Tt))};Mt.classList.add(_t),Mt.addEventListener(o$1g,Ft),Mt.addEventListener(s$1p,Ft),requestAnimationFrame(function(){Mt.classList.add(Tt)})}},d$1q=function(_t,Tt){return Tt===void 0&&(Tt=_t+"-active"),function(Mt,Pt){c$28(Mt);var Ft=!1,Dt=function(Nt){Ft||(Ft=!0,Mt.removeEventListener(o$1g,Dt),Mt.removeEventListener(s$1p,Dt),Pt())};Mt.classList.add(_t),Mt.addEventListener(o$1g,Dt),Mt.addEventListener(s$1p,Dt),requestAnimationFrame(function(){Mt.classList.add(Tt)})}};const u$1i=s$2l.getLogger("esri.widgets.support.widgetUtils");function p$2l(_t){const Tt=t$29.acquire();for(let Pt=0;Pt<arguments.length;Pt++){const Ft=arguments[Pt],Dt=typeof Ft;if(Dt==="string")Tt.push(Ft);else if(Array.isArray(Ft))Tt.push.apply(Tt,Ft);else if(Dt==="object")for(const Nt in Ft)Ft[Nt]&&Tt.push(Nt)}const Mt=Tt.join(" ");return t$29.release(Tt),Mt}(()=>{const _t=new Map,Tt=new ResizeObserver(Mt=>{t$1m();for(const Pt of Mt)_t.get(Pt.target)(Pt)});return(Mt,Pt,Ft)=>(_t.has(Mt)&&u$1i.error("Already observing element",Mt),_t.set(Mt,Pt),Tt.observe(Mt,Ft),n$2W(()=>{Tt.unobserve(Mt),_t.delete(Mt)}))})();function f$10(_t){const Tt=_t==null?void 0:_t.closest("[dir]");return Tt!==null&&Tt instanceof HTMLElement&&Tt.dir==="rtl"||document.dir==="rtl"}function h$14(_t){const Tt="data-node-ref";this[_t.getAttribute(Tt)]=null}function v$N(_t){const Tt="data-node-ref";this[_t.getAttribute(Tt)]=_t}function w$L(_t,Tt){return(_t==="enter"?l$1x:d$1q)(Tt)}const L$n=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],b$Q=L$n.reduce((_t,Tt)=>(_t[Tt]=[],_t),{}),y$18=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],E$w=new Sanitizer({whiteList:b$Q,onTagAttr:(_t,Tt,Mt)=>{const Pt=`${Tt}="${Mt}"`;if(y$18.includes(Tt))return Pt},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function A$l(_t,Tt){const Mt=_t.getBoundingClientRect(),Pt=Tt.getBoundingClientRect(),Ft=Mt.top+Mt.height,Dt=Pt.top+Pt.height,Nt=Mt.top,Vt=Pt.top;(Ft>Dt||Nt<Vt)&&_t.scrollIntoView({block:"end"})}function k$m(_t){return _t==="Enter"||_t===" "}const t$1l="http://www.w3.org/",r$15=`${t$1l}2000/svg`,o$1f=`${t$1l}1999/xlink`;let i$1L,l$1w=[],n$1_=(_t,Tt)=>{let Mt={};return Object.keys(_t).forEach(Pt=>{Mt[Pt]=_t[Pt]}),Tt&&Object.keys(Tt).forEach(Pt=>{Mt[Pt]=Tt[Pt]}),Mt},s$1o=(_t,Tt)=>_t.vnodeSelector===Tt.vnodeSelector&&(_t.properties&&Tt.properties?_t.properties.key===Tt.properties.key&&_t.properties.bind===Tt.properties.bind:!_t.properties&&!Tt.properties),p$2k=_t=>{if(typeof _t!="string")throw new Error("Style values must be strings")},d$1p=(_t,Tt,Mt)=>{if(Tt.vnodeSelector!==""){for(let Pt=Mt;Pt<_t.length;Pt++)if(s$1o(_t[Pt],Tt))return Pt}return-1},a$1R=(_t,Tt,Mt,Pt)=>{let Ft=_t[Tt];if(Ft.vnodeSelector==="")return;let Dt=Ft.properties;if(!(Dt&&(Dt.key===void 0?Dt.bind:Dt.key))){for(let Nt=0;Nt<_t.length;Nt++)if(Nt!==Tt){let Vt=_t[Nt];if(s$1o(Vt,Ft))throw new Error(`${Mt.vnodeSelector} had a ${Ft.vnodeSelector} child ${Pt==="added"?Pt:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},f$$=_t=>{if(_t.properties){let Tt=_t.properties.enterAnimation;Tt&&Tt(_t.domNode,_t.properties)}},c$27=[],u$1h=!1,h$13=_t=>{(_t.children||[]).forEach(h$13),_t.properties&&_t.properties.afterRemoved&&_t.properties.afterRemoved.apply(_t.properties.bind||_t.properties,[_t.domNode])},m$1l=()=>{u$1h=!1,c$27.forEach(h$13),c$27.length=0},v$M=_t=>{c$27.push(_t),u$1h||(u$1h=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(m$1l,{timeout:16}):setTimeout(m$1l,16))},y$17=_t=>{let Tt=_t.domNode;if(_t.properties){let Mt=_t.properties.exitAnimation;if(Mt)return Tt.style.pointerEvents="none",void Mt(Tt,()=>{Tt.parentNode&&(Tt.parentNode.removeChild(Tt),v$M(_t))},_t.properties)}Tt.parentNode&&(Tt.parentNode.removeChild(Tt),v$M(_t))},g$U=(_t,Tt,Mt)=>{if(!Tt)return;let Pt=Mt.eventHandlerInterceptor,Ft=Object.keys(Tt),Dt=Ft.length;for(let Nt=0;Nt<Dt;Nt++){let Vt=Ft[Nt],zt=Tt[Vt];if(Vt==="className")throw new Error('Property "className" is not supported, use "class".');if(Vt==="class")x$C(_t,zt,!0);else if(Vt==="classes"){let Xt=Object.keys(zt),Ht=Xt.length;for(let Wt=0;Wt<Ht;Wt++){let Qt=Xt[Wt];zt[Qt]&&_t.classList.add(Qt)}}else if(Vt==="styles"){let Xt=Object.keys(zt),Ht=Xt.length;for(let Wt=0;Wt<Ht;Wt++){let Qt=Xt[Wt],Zt=zt[Qt];Zt&&(p$2k(Zt),Mt.styleApplyer(_t,Qt,Zt))}}else if(Vt!=="key"&&zt!=null){let Xt=typeof zt;Xt==="function"?(Vt.lastIndexOf("on",0)===0&&(Pt&&(zt=Pt(Vt,zt,_t,Tt)),Vt==="oninput"&&function(){let Ht=zt;zt=function(Wt){Ht.apply(this,[Wt]),Wt.target["oninput-value"]=Wt.target.value}}()),_t[Vt]=zt):Mt.namespace===r$15?Vt==="href"?_t.setAttributeNS(o$1f,Vt,zt):_t.setAttribute(Vt,zt):Xt==="string"&&Vt!=="value"?Vt==="innerHTML"?_t[Vt]=E$w.sanitize(zt):_t.setAttribute(Vt,zt):_t[Vt]=zt}}},b$P=(_t,Tt,Mt)=>{if(Tt)for(let Pt of Tt)w$K(Pt,_t,void 0,Mt)},N$l=(_t,Tt,Mt)=>{b$P(_t,Tt.children,Mt),Tt.text&&(_t.textContent=Tt.text),g$U(_t,Tt.properties,Mt),Tt.properties&&Tt.properties.afterCreate&&Tt.properties.afterCreate.apply(Tt.properties.bind||Tt.properties,[_t,Mt,Tt.vnodeSelector,Tt.properties,Tt.children])},w$K=(_t,Tt,Mt,Pt)=>{let Ft,Dt=0,Nt=_t.vnodeSelector,Vt=Tt.ownerDocument;if(Nt==="")Ft=_t.domNode=Vt.createTextNode(_t.text),Mt!==void 0?Tt.insertBefore(Ft,Mt):Tt.appendChild(Ft);else{for(let zt=0;zt<=Nt.length;++zt){let Xt=Nt.charAt(zt);if(zt===Nt.length||Xt==="."||Xt==="#"){let Ht=Nt.charAt(Dt-1),Wt=Nt.slice(Dt,zt);Ht==="."?Ft.classList.add(Wt):Ht==="#"?Ft.id=Wt:(Wt==="svg"&&(Pt=n$1_(Pt,{namespace:r$15})),Pt.namespace!==void 0?Ft=_t.domNode=Vt.createElementNS(Pt.namespace,Wt):(Ft=_t.domNode=_t.domNode||Vt.createElement(Wt),Wt==="input"&&_t.properties&&_t.properties.type!==void 0&&Ft.setAttribute("type",_t.properties.type)),Mt!==void 0?Tt.insertBefore(Ft,Mt):Ft.parentNode!==Tt&&Tt.appendChild(Ft)),Dt=zt+1}}N$l(Ft,_t,Pt)}},x$C=(_t,Tt,Mt)=>{Tt&&Tt.split(" ").forEach(Pt=>{Pt&&_t.classList.toggle(Pt,Mt)})},k$l=(_t,Tt,Mt,Pt)=>{if(!Mt)return;let Ft=!1,Dt=Object.keys(Mt),Nt=Dt.length;for(let Vt=0;Vt<Nt;Vt++){let zt=Dt[Vt],Xt=Mt[zt],Ht=Tt[zt];if(zt==="class")Ht!==Xt&&(x$C(_t,Ht,!1),x$C(_t,Xt,!0));else if(zt==="classes"){let Wt=_t.classList,Qt=Object.keys(Xt),Zt=Qt.length;for(let Kt=0;Kt<Zt;Kt++){let er=Qt[Kt],Yt=!!Xt[er];Yt!==!!Ht[er]&&(Ft=!0,Yt?Wt.add(er):Wt.remove(er))}}else if(zt==="styles"){let Wt=Object.keys(Xt),Qt=Wt.length;for(let Zt=0;Zt<Qt;Zt++){let Kt=Wt[Zt],er=Xt[Kt];er!==Ht[Kt]&&(Ft=!0,er?(p$2k(er),Pt.styleApplyer(_t,Kt,er)):Pt.styleApplyer(_t,Kt,""))}}else if(Xt||typeof Ht!="string"||(Xt=""),zt==="value"){let Wt=_t[zt];Wt!==Xt&&(_t["oninput-value"]?Wt===_t["oninput-value"]:Xt!==Ht)&&(_t[zt]=Xt,_t["oninput-value"]=void 0),Xt!==Ht&&(Ft=!0)}else if(Xt!==Ht){let Wt=typeof Xt;Wt==="function"&&Pt.eventHandlerInterceptor||(Pt.namespace===r$15?zt==="href"?_t.setAttributeNS(o$1f,zt,Xt):_t.setAttribute(zt,Xt):Wt==="string"?zt==="innerHTML"?_t[zt]=E$w.sanitize(Xt):zt==="role"&&Xt===""?_t.removeAttribute(zt):_t.setAttribute(zt,Xt):_t[zt]!==Xt&&(_t[zt]=Xt),Ft=!0)}}return Ft},A$k=(_t,Tt,Mt,Pt,Ft)=>{if(Mt===Pt)return!1;Pt=Pt||l$1w;let Dt,Nt=(Mt=Mt||l$1w).length,Vt=Pt.length,zt=0,Xt=0,Ht=!1;for(;Xt<Vt;){let Wt=zt<Nt?Mt[zt]:void 0,Qt=Pt[Xt];if(Wt!==void 0&&s$1o(Wt,Qt))Ht=i$1L(Wt,Qt,Ft)||Ht,zt++;else{let Zt=d$1p(Mt,Qt,zt+1);if(Zt>=0){for(Dt=zt;Dt<Zt;Dt++)y$17(Mt[Dt]),a$1R(Mt,Dt,_t,"removed");Ht=i$1L(Mt[Zt],Qt,Ft)||Ht,zt=Zt+1}else w$K(Qt,Tt,zt<Nt?Mt[zt].domNode:void 0,Ft),f$$(Qt),a$1R(Pt,Xt,_t,"added")}Xt++}if(Nt>zt)for(Dt=zt;Dt<Nt;Dt++)y$17(Mt[Dt]),a$1R(Mt,Dt,_t,"removed");return Ht};i$1L=(_t,Tt,Mt)=>{let Pt=_t.domNode,Ft=!1;if(_t===Tt)return!1;let Dt=!1;if(Tt.vnodeSelector===""){if(Tt.text!==_t.text){let Nt=Pt.ownerDocument.createTextNode(Tt.text);return Pt.parentNode.replaceChild(Nt,Pt),Tt.domNode=Nt,Ft=!0,Ft}Tt.domNode=Pt}else Tt.vnodeSelector.lastIndexOf("svg",0)===0&&(Mt=n$1_(Mt,{namespace:r$15})),_t.text!==Tt.text&&(Dt=!0,Tt.text===void 0?Pt.removeChild(Pt.firstChild):Pt.textContent=Tt.text),Tt.domNode=Pt,Dt=A$k(Tt,Pt,_t.children,Tt.children,Mt)||Dt,Dt=k$l(Pt,_t.properties,Tt.properties,Mt)||Dt,Tt.properties&&Tt.properties.afterUpdate&&Tt.properties.afterUpdate.apply(Tt.properties.bind||Tt.properties,[Pt,Mt,Tt.vnodeSelector,Tt.properties,Tt.children]);return Dt&&Tt.properties&&Tt.properties.updateAnimation&&Tt.properties.updateAnimation(Pt,Tt.properties,_t.properties),Ft};let S$v=(_t,Tt)=>({getLastRender:()=>_t,update:Mt=>{if(_t.vnodeSelector!==Mt.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let Pt=_t;_t=Mt,i$1L(Pt,Mt,Tt)},domNode:_t.domNode});const p$2j={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(_t,Tt,Mt)=>{Tt.charAt(0)==="-"?_t.style.setProperty(Tt,Mt):_t.style[Tt]=Mt}};let d$1o=_t=>n$1_(p$2j,_t),n$1Z={create:(_t,Tt)=>(Tt=d$1o(Tt),w$K(_t,document.createElement("div"),void 0,Tt),S$v(_t,Tt)),append:(_t,Tt,Mt)=>(Mt=d$1o(Mt),w$K(Tt,_t,void 0,Mt),S$v(Tt,Mt)),insertBefore:(_t,Tt,Mt)=>(Mt=d$1o(Mt),w$K(Tt,_t.parentNode,_t,Mt),S$v(Tt,Mt)),merge:(_t,Tt,Mt)=>(Mt=d$1o(Mt),Tt.domNode=_t,N$l(_t,Tt,Mt),S$v(Tt,Mt)),replace:(_t,Tt,Mt)=>(Mt=d$1o(Mt),w$K(Tt,_t.parentNode,_t,Mt),_t.parentNode.removeChild(_t),S$v(Tt,Mt))},t$1k,n$1Y=(_t,Tt)=>{let Mt=[];for(;_t&&_t!==Tt;)Mt.push(_t),_t=_t.parentNode;return Mt};t$1k=Array.prototype.find?(_t,Tt)=>_t.find(Tt):(_t,Tt)=>_t.filter(Tt)[0];let o$1e=(_t,Tt)=>{let Mt=_t;return Tt.forEach(Pt=>{Mt=Mt&&Mt.children?t$1k(Mt.children,Ft=>Ft.domNode===Pt):void 0}),Mt},d$1n=(_t,Tt,Mt)=>{let Pt=function(Ft){Mt("domEvent",Ft);let Dt=Tt(),Nt=n$1Y(Ft.currentTarget,Dt.domNode);Nt.reverse();let Vt,zt=o$1e(Dt.getLastRender(),Nt);return _t.scheduleRender(),zt&&(Vt=zt.properties[`on${Ft.type}`].apply(zt.properties.bind||this,arguments)),Mt("domEventProcessed",Ft),Vt};return(Ft,Dt,Nt,Vt)=>Pt},i$1K=_t=>{let Tt,Mt,Pt=d$1o(_t),Ft=Pt.performanceLogger,Dt=!0,Nt=!1,Vt=[],zt=[],Xt=(Wt,Qt,Zt)=>{let Kt,er=()=>Kt;Pt.eventHandlerInterceptor=d$1n(Tt,er,Ft),Kt=Wt(Qt,Zt(),Pt),Vt.push(Kt),zt.push(Zt)},Ht=()=>{if(Mt=void 0,Dt){Dt=!1,Ft("renderStart",void 0);for(let Wt=0;Wt<Vt.length;Wt++){let Qt=zt[Wt]();Ft("rendered",void 0),Vt[Wt].update(Qt),Ft("patched",void 0)}Ft("renderDone",void 0),Dt=!0}};return Tt={renderNow:Ht,scheduleRender:()=>{Mt||Nt||(Mt=requestAnimationFrame(Ht))},stop:()=>{Mt&&(cancelAnimationFrame(Mt),Mt=void 0),Nt=!0},resume:()=>{Nt=!1,Dt=!0,Tt.scheduleRender()},append:(Wt,Qt)=>{Xt(n$1Z.append,Wt,Qt)},insertBefore:(Wt,Qt)=>{Xt(n$1Z.insertBefore,Wt,Qt)},merge:(Wt,Qt)=>{Xt(n$1Z.merge,Wt,Qt)},replace:(Wt,Qt)=>{Xt(n$1Z.replace,Wt,Qt)},detach:Wt=>{for(let Qt=0;Qt<zt.length;Qt++)if(zt[Qt]===Wt)return zt.splice(Qt,1),Vt.splice(Qt,1)[0];throw new Error("renderFunction was not found")}},Tt},c$26=class extends y$1E{constructor(){super(...arguments),this.items=new j$11,this._watchUpdatingTracking=new c$2W,this._callbacks=new Map,this._projector=i$1K(),this._hiddenProjector=i$1K()}get needsRender(){return this.items.length>0}initialize(){const _t=document.createElement("div");_t.className="esri-overlay-surface",this._set("surface",_t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),_t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,Tt=>{for(const Mt of Tt.added){const Pt=()=>Mt.render();this._callbacks.set(Mt,Pt),this._projector.append(this.surface,Pt)}for(const Mt of Tt.removed){const Pt=this._projector.detach(this._callbacks.get(Mt));this.surface.removeChild(Pt.domNode),this._callbacks.delete(Mt)}})}addItem(_t){this.items.add(_t)}removeItem(_t){this.items.remove(_t)}destroy(){this.items.removeAll(),this._callbacks.forEach(_t=>this._projector.detach(_t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(_t){const Tt=this._hiddenSurface,Mt=this._hiddenProjector;let Pt=null;const Ft=()=>(Pt=_t.render(),Pt);Mt.append(Tt,Ft),Mt.renderNow();const Dt={left:0,top:0,right:0,bottom:0};if(Pt&&Pt.domNode){const Nt=Pt.domNode.getBoundingClientRect();Dt.left=Nt.left,Dt.top=Nt.top,Dt.right=Nt.right,Dt.bottom=Nt.bottom}for(Mt.detach(Ft);Tt.firstChild;)Tt.removeChild(Tt.firstChild);return Dt}overlaps(_t,Tt){const Mt=this.computeBoundingRect(_t),Pt=this.computeBoundingRect(Tt);return Math.max(Mt.left,Pt.left)<=Math.min(Mt.right,Pt.right)&&Math.max(Mt.top,Pt.top)<=Math.min(Mt.bottom,Pt.bottom)}get hasVisibleItems(){return this.items.some(_t=>_t.visible)}renderCanvas(_t){if(!this.items.some(Mt=>Mt.visible))return;const Tt=_t.getContext("2d");Tt.save(),Tt.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(Mt=>{Tt.save(),Mt.renderCanvas(Tt),Tt.restore()}),Tt.restore()}};e$2a([d$25({readOnly:!0})],c$26.prototype,"surface",void 0),e$2a([d$25({readOnly:!0})],c$26.prototype,"items",void 0),e$2a([d$25({readOnly:!0})],c$26.prototype,"needsRender",null),e$2a([d$25({readOnly:!0})],c$26.prototype,"_watchUpdatingTracking",void 0),e$2a([d$25({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],c$26.prototype,"updating",void 0),c$26=e$2a([n$2L("esri.views.overlay.ViewOverlay")],c$26);const n$1X=c$26;function e$1m(_t,Tt,Mt,Pt){let Ft=null,Dt=1e3;typeof Tt=="number"?(Dt=Tt,Pt=Mt):(Ft=Tt!=null?Tt:null,Dt=Mt);let Nt,Vt=0;const zt=()=>{Vt=0,_t.apply(Pt,Nt)},Xt=(...Ht)=>{Ft&&Ft.apply(Pt,Ht),Nt=Ht,Dt?Vt||(Vt=setTimeout(zt,Dt)):zt()};return Xt.remove=()=>{Vt&&(clearTimeout(Vt),Vt=0)},Xt.forceUpdate=()=>{Vt&&(clearTimeout(Vt),zt())},Xt.hasPendingUpdates=()=>!!Vt,Xt}function o$1d(_t,Tt){const Mt=Tt?{...Tt,source:_t}:_t;return d$25({aliasOf:Mt})}const n$1W="randomUUID"in crypto;function t$1j(){if(n$1W)return crypto.randomUUID();const _t=crypto.getRandomValues(new Uint16Array(8));_t[3]=4095&_t[3]|16384,_t[4]=16383&_t[4]|32768;const Tt=Mt=>_t[Mt].toString(16);return Tt(0)+Tt(1)+"-"+Tt(2)+"-"+Tt(3)+"-"+Tt(4)+"-"+Tt(5)+Tt(6)+Tt(7)}const e$1l={handleInterceptedEvent:(_t,Tt,Mt,Pt)=>(_t.scheduleRender(),Tt.properties[`on${Pt.type}`].apply(Tt.properties.bind||Mt,[Pt]))},e$1k={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(_t,Tt,Mt)=>{_t.style[Tt]=Mt}},r$14=_t=>({...e$1k,..._t}),o$1c=(_t,Tt)=>{const Mt=[];for(;_t&&_t!==Tt;)Mt.push(_t),_t=_t.parentNode;return Mt},n$1V=(_t,Tt)=>_t.find(Tt),d$1m=(_t,Tt,Mt=!1)=>{let Pt=_t;return Tt.forEach((Ft,Dt)=>{const Nt=Pt!=null&&Pt.children?n$1V(Pt.children,Vt=>Vt.domNode===Ft):void 0;Mt&&!Nt&&Dt!==Tt.length-1||(Pt=Nt)}),Pt},s$1n=_t=>{let Tt;const Mt={...e$1l,..._t},Pt=r$14(Mt),Ft=Pt.performanceLogger;let Dt,Nt=!0,Vt=!1;const zt=[],Xt=[],Ht=(Qt,Zt,Kt)=>{var rr;let er;Pt.eventHandlerInterceptor=(ir,nr,ar,or)=>function(ur){let dr;Ft("domEvent",ur);const hr=o$1c(ur.currentTarget,er.domNode),gr=hr.some(mr=>{var wr;return customElements.get((wr=mr==null?void 0:mr.tagName)==null?void 0:wr.toLowerCase())});if(ur.eventPhase===Event.CAPTURING_PHASE||!gr)hr.reverse(),dr=d$1m(er.getLastRender(),hr);else{const mr=ur.composedPath(),wr=mr.slice(mr.indexOf(ur.currentTarget),mr.indexOf(er.domNode)).filter(br=>br.getRootNode()===br.ownerDocument).reverse();dr=d$1m(er.getLastRender(),wr,!0)}let pr;return dr&&(pr=Mt.handleInterceptedEvent(Tt,dr,this,ur)),Ft("domEventProcessed",ur),pr},(rr=Mt.postProcessProjectionOptions)==null||rr.call(Mt,Pt);const Yt=Kt();er=Qt(Zt,Yt,Pt),zt.push(er),Xt.push(Kt),Mt.afterFirstVNodeRendered&&Mt.afterFirstVNodeRendered(er,Yt)};let Wt=()=>{if(Dt=void 0,Nt){Nt=!1,Ft("renderStart",void 0);for(let Qt=0;Qt<zt.length;Qt++){const Zt=Xt[Qt]();Ft("rendered",void 0),zt[Qt].update(Zt),Ft("patched",void 0)}Ft("renderDone",void 0),Nt=!0}};return Mt.modifyDoRenderImplementation&&(Wt=Mt.modifyDoRenderImplementation(Wt,zt,Xt)),Tt={renderNow:Wt,scheduleRender:()=>{Dt||Vt||(Dt=requestAnimationFrame(Wt))},stop:()=>{Dt&&(cancelAnimationFrame(Dt),Dt=void 0),Vt=!0},resume:()=>{Vt=!1,Nt=!0,Tt.scheduleRender()},append:(Qt,Zt)=>{Ht(n$1Z.append,Qt,Zt)},insertBefore:(Qt,Zt)=>{Ht(n$1Z.insertBefore,Qt,Zt)},merge:(Qt,Zt)=>{Ht(n$1Z.merge,Qt,Zt)},replace:(Qt,Zt)=>{Ht(n$1Z.replace,Qt,Zt)},detach:Qt=>{for(let Zt=0;Zt<Xt.length;Zt++)if(Xt[Zt]===Qt)return Xt.splice(Zt,1),zt.splice(Zt,1)[0];throw new Error("renderFunction was not found")}},Tt},BUILD={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let scopeId,contentRef,hostTagName,useNativeShadowDom=!1,checkSlotFallbackVisibility=!1,checkSlotRelocate=!1,isSvgMode=!1,renderingRef=null,queuePending=!1;const win=typeof window<"u"?window:{};BUILD.cssVarShim&&win.CSS;const doc=win.document||{head:{}},H$c=win.HTMLElement||class{},plt={$flags$:0,$resourcesUrl$:"",jmp:_t=>_t(),raf:_t=>requestAnimationFrame(_t),ael:(_t,Tt,Mt,Pt)=>_t.addEventListener(Tt,Mt,Pt),rel:(_t,Tt,Mt,Pt)=>_t.removeEventListener(Tt,Mt,Pt),ce:(_t,Tt)=>new CustomEvent(_t,Tt)},supportsShadow=BUILD.shadowDomShim&&BUILD.shadowDom?(()=>(doc.head.attachShadow+"").indexOf("[native")>-1)():!0,supportsListenerOptions=(()=>{let _t=!1;try{doc.addEventListener("e",null,Object.defineProperty({},"passive",{get(){_t=!0}}))}catch{}return _t})(),promiseResolve=_t=>Promise.resolve(_t),supportsConstructibleStylesheets=BUILD.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,addHostEventListeners=(_t,Tt,Mt,Pt)=>{Mt&&Mt.map(([Ft,Dt,Nt])=>{const Vt=getHostListenerTarget(_t,Ft),zt=hostListenerProxy(Tt,Nt),Xt=hostListenerOpts(Ft);plt.ael(Vt,Dt,zt,Xt),(Tt.$rmListeners$=Tt.$rmListeners$||[]).push(()=>plt.rel(Vt,Dt,zt,Xt))})},hostListenerProxy=(_t,Tt)=>Mt=>{try{BUILD.lazyLoad||_t.$hostElement$[Tt](Mt)}catch(Pt){consoleError(Pt)}},getHostListenerTarget=(_t,Tt)=>Tt&4?doc:Tt&8?win:Tt&16?doc.body:_t,hostListenerOpts=_t=>supportsListenerOptions?{passive:(_t&1)!==0,capture:(_t&2)!==0}:(_t&2)!==0,XLINK_NS="http://www.w3.org/1999/xlink",createTime=(_t,Tt="")=>()=>{},rootAppliedStyles=new WeakMap,registerStyle=(_t,Tt,Mt)=>{let Pt=styles.get(_t);supportsConstructibleStylesheets&&Mt?(Pt=Pt||new CSSStyleSheet,Pt.replace(Tt)):Pt=Tt,styles.set(_t,Pt)},addStyle=(_t,Tt,Mt,Pt)=>{let Ft=getScopeId(Tt,Mt),Dt=styles.get(Ft);if(_t=_t.nodeType===11?_t:doc,Dt)if(typeof Dt=="string"){_t=_t.head||_t;let Nt=rootAppliedStyles.get(_t),Vt;Nt||rootAppliedStyles.set(_t,Nt=new Set),Nt.has(Ft)||(Vt=doc.createElement("style"),Vt.innerHTML=Dt,_t.insertBefore(Vt,_t.querySelector("link")),Nt&&Nt.add(Ft))}else _t.adoptedStyleSheets.includes(Dt)||(_t.adoptedStyleSheets=[..._t.adoptedStyleSheets,Dt]);return Ft},attachStyles=_t=>{const Tt=_t.$cmpMeta$,Mt=_t.$hostElement$,Pt=Tt.$flags$,Ft=createTime("attachStyles",Tt.$tagName$),Dt=addStyle(supportsShadow&&Mt.shadowRoot?Mt.shadowRoot:Mt.getRootNode(),Tt,_t.$modeName$);Pt&10&&(Mt["s-sc"]=Dt,Mt.classList.add(Dt+"-h"),Pt&2&&Mt.classList.add(Dt+"-s")),Ft()},getScopeId=(_t,Tt)=>"sc-"+(Tt&&_t.$flags$&32?_t.$tagName$+"-"+Tt:_t.$tagName$),computeMode=_t=>modeResolutionChain.map(Tt=>Tt(_t)).find(Tt=>!!Tt),EMPTY_OBJ={},SVG_NS="http://www.w3.org/2000/svg",HTML_NS="http://www.w3.org/1999/xhtml",isDef=_t=>_t!=null,isComplexType=_t=>(_t=typeof _t,_t==="object"||_t==="function"),h$12=(_t,Tt,...Mt)=>{let Pt=null,Ft=null,Dt=null,Nt=!1,Vt=!1,zt=[];const Xt=Wt=>{for(let Qt=0;Qt<Wt.length;Qt++)Pt=Wt[Qt],Array.isArray(Pt)?Xt(Pt):Pt!=null&&typeof Pt!="boolean"&&((Nt=typeof _t!="function"&&!isComplexType(Pt))&&(Pt=String(Pt)),Nt&&Vt?zt[zt.length-1].$text$+=Pt:zt.push(Nt?newVNode(null,Pt):Pt),Vt=Nt)};if(Xt(Mt),Tt&&(BUILD.isDev&&_t==="input"&&validateInputProperties(Tt),BUILD.vdomKey&&Tt.key&&(Ft=Tt.key),BUILD.slotRelocation&&Tt.name&&(Dt=Tt.name),BUILD.vdomClass)){const Wt=Tt.className||Tt.class;Wt&&(Tt.class=typeof Wt!="object"?Wt:Object.keys(Wt).filter(Qt=>Wt[Qt]).join(" "))}if(BUILD.isDev&&zt.some(isHost)&&consoleDevError(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),BUILD.vdomFunctional&&typeof _t=="function")return _t(Tt===null?{}:Tt,zt,vdomFnUtils);const Ht=newVNode(_t,null);return Ht.$attrs$=Tt,zt.length>0&&(Ht.$children$=zt),BUILD.vdomKey&&(Ht.$key$=Ft),BUILD.slotRelocation&&(Ht.$name$=Dt),Ht},newVNode=(_t,Tt)=>{const Mt={$flags$:0,$tag$:_t,$text$:Tt,$elm$:null,$children$:null};return BUILD.vdomAttribute&&(Mt.$attrs$=null),BUILD.vdomKey&&(Mt.$key$=null),BUILD.slotRelocation&&(Mt.$name$=null),Mt},Host={},isHost=_t=>_t&&_t.$tag$===Host,vdomFnUtils={forEach:(_t,Tt)=>_t.map(convertToPublic).forEach(Tt),map:(_t,Tt)=>_t.map(convertToPublic).map(Tt).map(convertToPrivate)},convertToPublic=_t=>({vattrs:_t.$attrs$,vchildren:_t.$children$,vkey:_t.$key$,vname:_t.$name$,vtag:_t.$tag$,vtext:_t.$text$}),convertToPrivate=_t=>{if(typeof _t.vtag=="function"){const Mt=Object.assign({},_t.vattrs);return _t.vkey&&(Mt.key=_t.vkey),_t.vname&&(Mt.name=_t.vname),h$12(_t.vtag,Mt,..._t.vchildren||[])}const Tt=newVNode(_t.vtag,_t.vtext);return Tt.$attrs$=_t.vattrs,Tt.$children$=_t.vchildren,Tt.$key$=_t.vkey,Tt.$name$=_t.vname,Tt},validateInputProperties=_t=>{const Tt=Object.keys(_t),Mt=Tt.indexOf("value");if(Mt===-1)return;const Pt=Tt.indexOf("type"),Ft=Tt.indexOf("min"),Dt=Tt.indexOf("max"),Nt=Tt.indexOf("step");(Mt<Pt||Mt<Ft||Mt<Dt||Mt<Nt)&&consoleDevWarn('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},setAccessor=(_t,Tt,Mt,Pt,Ft,Dt)=>{if(Mt!==Pt){let Nt=isMemberInElement(_t,Tt),Vt=Tt.toLowerCase();if(Tt==="class"){const zt=_t.classList,Xt=parseClassList(Mt),Ht=parseClassList(Pt);zt.remove(...Xt.filter(Wt=>Wt&&!Ht.includes(Wt))),zt.add(...Ht.filter(Wt=>Wt&&!Xt.includes(Wt)))}else if(Tt==="style"){for(const zt in Mt)(!Pt||Pt[zt]==null)&&(zt.includes("-")?_t.style.removeProperty(zt):_t.style[zt]="");for(const zt in Pt)(!Mt||Pt[zt]!==Mt[zt])&&(zt.includes("-")?_t.style.setProperty(zt,Pt[zt]):_t.style[zt]=Pt[zt])}else if(Tt!=="key")if(Tt==="ref")Pt&&Pt(_t);else if(!_t.__lookupSetter__(Tt)&&Tt[0]==="o"&&Tt[1]==="n")Tt[2]==="-"?Tt=Tt.slice(3):isMemberInElement(win,Vt)?Tt=Vt.slice(2):Tt=Vt[2]+Tt.slice(3),Mt&&plt.rel(_t,Tt,Mt,!1),Pt&&plt.ael(_t,Tt,Pt,!1);else{const zt=isComplexType(Pt);if((Nt||zt&&Pt!==null)&&!Ft)try{if(_t.tagName.includes("-"))_t[Tt]=Pt;else{let Ht=Pt==null?"":Pt;Tt==="list"?Nt=!1:(Mt==null||_t[Tt]!=Ht)&&(_t[Tt]=Ht)}}catch{}let Xt=!1;Vt!==(Vt=Vt.replace(/^xlink\:?/,""))&&(Tt=Vt,Xt=!0),Pt==null||Pt===!1?(Pt!==!1||_t.getAttribute(Tt)==="")&&(Xt?_t.removeAttributeNS(XLINK_NS,Tt):_t.removeAttribute(Tt)):(!Nt||Dt&4||Ft)&&!zt&&(Pt=Pt===!0?"":Pt,Xt?_t.setAttributeNS(XLINK_NS,Tt,Pt):_t.setAttribute(Tt,Pt))}}},parseClassListRegex=/\s/,parseClassList=_t=>_t?_t.split(parseClassListRegex):[],updateElement=(_t,Tt,Mt,Pt)=>{const Ft=Tt.$elm$.nodeType===11&&Tt.$elm$.host?Tt.$elm$.host:Tt.$elm$,Dt=_t&&_t.$attrs$||EMPTY_OBJ,Nt=Tt.$attrs$||EMPTY_OBJ;for(Pt in Dt)Pt in Nt||setAccessor(Ft,Pt,Dt[Pt],void 0,Mt,Tt.$flags$);for(Pt in Nt)setAccessor(Ft,Pt,Dt[Pt],Nt[Pt],Mt,Tt.$flags$)},createElm=(_t,Tt,Mt,Pt)=>{let Ft=Tt.$children$[Mt],Dt=0,Nt,Vt,zt;if(useNativeShadowDom||(checkSlotRelocate=!0,Ft.$tag$==="slot"&&(scopeId&&Pt.classList.add(scopeId+"-s"),Ft.$flags$|=Ft.$children$?2:1)),Ft.$text$!==null)Nt=Ft.$elm$=doc.createTextNode(Ft.$text$);else if(Ft.$flags$&1)Nt=Ft.$elm$=doc.createTextNode("");else{if(isSvgMode||(isSvgMode=Ft.$tag$==="svg"),Nt=Ft.$elm$=doc.createElementNS(isSvgMode?SVG_NS:HTML_NS,Ft.$flags$&2?"slot-fb":Ft.$tag$),isSvgMode&&Ft.$tag$==="foreignObject"&&(isSvgMode=!1),updateElement(null,Ft,isSvgMode),isDef(scopeId)&&Nt["s-si"]!==scopeId&&Nt.classList.add(Nt["s-si"]=scopeId),Ft.$children$)for(Dt=0;Dt<Ft.$children$.length;++Dt)Vt=createElm(_t,Ft,Dt,Nt),Vt&&Nt.appendChild(Vt);Ft.$tag$==="svg"?isSvgMode=!1:Nt.tagName==="foreignObject"&&(isSvgMode=!0)}return Nt["s-hn"]=hostTagName,Ft.$flags$&3&&(Nt["s-sr"]=!0,Nt["s-cr"]=contentRef,Nt["s-sn"]=Ft.$name$||"",zt=_t&&_t.$children$&&_t.$children$[Mt],zt&&zt.$tag$===Ft.$tag$&&_t.$elm$&&putBackInOriginalLocation(_t.$elm$,!1)),Nt},putBackInOriginalLocation=(_t,Tt)=>{plt.$flags$|=1;const Mt=_t.childNodes;for(let Pt=Mt.length-1;Pt>=0;Pt--){const Ft=Mt[Pt];Ft["s-hn"]!==hostTagName&&Ft["s-ol"]&&(parentReferenceNode(Ft).insertBefore(Ft,referenceNode(Ft)),Ft["s-ol"].remove(),Ft["s-ol"]=void 0,checkSlotRelocate=!0),Tt&&putBackInOriginalLocation(Ft,Tt)}plt.$flags$&=-2},addVnodes=(_t,Tt,Mt,Pt,Ft,Dt)=>{let Nt=_t["s-cr"]&&_t["s-cr"].parentNode||_t,Vt;for(Nt.shadowRoot&&Nt.tagName===hostTagName&&(Nt=Nt.shadowRoot);Ft<=Dt;++Ft)Pt[Ft]&&(Vt=createElm(null,Mt,Ft,_t),Vt&&(Pt[Ft].$elm$=Vt,Nt.insertBefore(Vt,referenceNode(Tt))))},removeVnodes=(_t,Tt,Mt,Pt,Ft)=>{for(;Tt<=Mt;++Tt)(Pt=_t[Tt])&&(Ft=Pt.$elm$,callNodeRefs(Pt),checkSlotFallbackVisibility=!0,Ft["s-ol"]?Ft["s-ol"].remove():putBackInOriginalLocation(Ft,!0),Ft.remove())},updateChildren=(_t,Tt,Mt,Pt)=>{let Ft=0,Dt=0,Nt=0,Vt=0,zt=Tt.length-1,Xt=Tt[0],Ht=Tt[zt],Wt=Pt.length-1,Qt=Pt[0],Zt=Pt[Wt],Kt,er;for(;Ft<=zt&&Dt<=Wt;)if(Xt==null)Xt=Tt[++Ft];else if(Ht==null)Ht=Tt[--zt];else if(Qt==null)Qt=Pt[++Dt];else if(Zt==null)Zt=Pt[--Wt];else if(isSameVnode(Xt,Qt))patch(Xt,Qt),Xt=Tt[++Ft],Qt=Pt[++Dt];else if(isSameVnode(Ht,Zt))patch(Ht,Zt),Ht=Tt[--zt],Zt=Pt[--Wt];else if(isSameVnode(Xt,Zt))(Xt.$tag$==="slot"||Zt.$tag$==="slot")&&putBackInOriginalLocation(Xt.$elm$.parentNode,!1),patch(Xt,Zt),_t.insertBefore(Xt.$elm$,Ht.$elm$.nextSibling),Xt=Tt[++Ft],Zt=Pt[--Wt];else if(isSameVnode(Ht,Qt))(Xt.$tag$==="slot"||Zt.$tag$==="slot")&&putBackInOriginalLocation(Ht.$elm$.parentNode,!1),patch(Ht,Qt),_t.insertBefore(Ht.$elm$,Xt.$elm$),Ht=Tt[--zt],Qt=Pt[++Dt];else{for(Nt=-1,Vt=Ft;Vt<=zt;++Vt)if(Tt[Vt]&&Tt[Vt].$key$!==null&&Tt[Vt].$key$===Qt.$key$){Nt=Vt;break}Nt>=0?(er=Tt[Nt],er.$tag$!==Qt.$tag$?Kt=createElm(Tt&&Tt[Dt],Mt,Nt,_t):(patch(er,Qt),Tt[Nt]=void 0,Kt=er.$elm$),Qt=Pt[++Dt]):(Kt=createElm(Tt&&Tt[Dt],Mt,Dt,_t),Qt=Pt[++Dt]),Kt&&parentReferenceNode(Xt.$elm$).insertBefore(Kt,referenceNode(Xt.$elm$))}Ft>zt?addVnodes(_t,Pt[Wt+1]==null?null:Pt[Wt+1].$elm$,Mt,Pt,Dt,Wt):Dt>Wt&&removeVnodes(Tt,Ft,zt)},isSameVnode=(_t,Tt)=>_t.$tag$===Tt.$tag$?_t.$tag$==="slot"?_t.$name$===Tt.$name$:_t.$key$===Tt.$key$:!1,referenceNode=_t=>_t&&_t["s-ol"]||_t,parentReferenceNode=_t=>(_t["s-ol"]?_t["s-ol"]:_t).parentNode,patch=(_t,Tt)=>{const Mt=Tt.$elm$=_t.$elm$,Pt=_t.$children$,Ft=Tt.$children$,Dt=Tt.$tag$,Nt=Tt.$text$;let Vt;Nt===null?(isSvgMode=Dt==="svg"?!0:Dt==="foreignObject"?!1:isSvgMode,Dt==="slot"||updateElement(_t,Tt,isSvgMode),Pt!==null&&Ft!==null?updateChildren(Mt,Pt,Tt,Ft):Ft!==null?(_t.$text$!==null&&(Mt.textContent=""),addVnodes(Mt,null,Tt,Ft,0,Ft.length-1)):Pt!==null&&removeVnodes(Pt,0,Pt.length-1),isSvgMode&&Dt==="svg"&&(isSvgMode=!1)):(Vt=Mt["s-cr"])?Vt.parentNode.textContent=Nt:_t.$text$!==Nt&&(Mt.data=Nt)},updateFallbackSlotVisibility=_t=>{let Tt=_t.childNodes,Mt,Pt,Ft,Dt,Nt,Vt;for(Pt=0,Ft=Tt.length;Pt<Ft;Pt++)if(Mt=Tt[Pt],Mt.nodeType===1){if(Mt["s-sr"]){for(Nt=Mt["s-sn"],Mt.hidden=!1,Dt=0;Dt<Ft;Dt++)if(Vt=Tt[Dt].nodeType,Tt[Dt]["s-hn"]!==Mt["s-hn"]||Nt!==""){if(Vt===1&&Nt===Tt[Dt].getAttribute("slot")){Mt.hidden=!0;break}}else if(Vt===1||Vt===3&&Tt[Dt].textContent.trim()!==""){Mt.hidden=!0;break}}updateFallbackSlotVisibility(Mt)}},relocateNodes=[],relocateSlotContent=_t=>{let Tt,Mt,Pt,Ft,Dt,Nt,Vt=0,zt=_t.childNodes,Xt=zt.length;for(;Vt<Xt;Vt++){if(Tt=zt[Vt],Tt["s-sr"]&&(Mt=Tt["s-cr"])&&Mt.parentNode)for(Pt=Mt.parentNode.childNodes,Ft=Tt["s-sn"],Nt=Pt.length-1;Nt>=0;Nt--)Mt=Pt[Nt],!Mt["s-cn"]&&!Mt["s-nr"]&&Mt["s-hn"]!==Tt["s-hn"]&&(isNodeLocatedInSlot(Mt,Ft)?(Dt=relocateNodes.find(Ht=>Ht.$nodeToRelocate$===Mt),checkSlotFallbackVisibility=!0,Mt["s-sn"]=Mt["s-sn"]||Ft,Dt?Dt.$slotRefNode$=Tt:relocateNodes.push({$slotRefNode$:Tt,$nodeToRelocate$:Mt}),Mt["s-sr"]&&relocateNodes.map(Ht=>{isNodeLocatedInSlot(Ht.$nodeToRelocate$,Mt["s-sn"])&&(Dt=relocateNodes.find(Wt=>Wt.$nodeToRelocate$===Mt),Dt&&!Ht.$slotRefNode$&&(Ht.$slotRefNode$=Dt.$slotRefNode$))})):relocateNodes.some(Ht=>Ht.$nodeToRelocate$===Mt)||relocateNodes.push({$nodeToRelocate$:Mt}));Tt.nodeType===1&&relocateSlotContent(Tt)}},isNodeLocatedInSlot=(_t,Tt)=>_t.nodeType===1?_t.getAttribute("slot")===null&&Tt===""||_t.getAttribute("slot")===Tt:_t["s-sn"]===Tt?!0:Tt==="",callNodeRefs=_t=>{_t.$attrs$&&_t.$attrs$.ref&&_t.$attrs$.ref(null),_t.$children$&&_t.$children$.map(callNodeRefs)},renderVdom=(_t,Tt)=>{const Mt=_t.$hostElement$,Pt=_t.$cmpMeta$,Ft=_t.$vnode$||newVNode(null,null),Dt=isHost(Tt)?Tt:h$12(null,null,Tt);hostTagName=Mt.tagName,Pt.$attrsToReflect$&&(Dt.$attrs$=Dt.$attrs$||{},Pt.$attrsToReflect$.map(([Nt,Vt])=>Dt.$attrs$[Vt]=Mt[Nt])),Dt.$tag$=null,Dt.$flags$|=4,_t.$vnode$=Dt,Dt.$elm$=Ft.$elm$=Mt.shadowRoot||Mt,scopeId=Mt["s-sc"],contentRef=Mt["s-cr"],useNativeShadowDom=supportsShadow&&(Pt.$flags$&1)!==0,checkSlotFallbackVisibility=!1,patch(Ft,Dt);{if(plt.$flags$|=1,checkSlotRelocate){relocateSlotContent(Dt.$elm$);let Nt,Vt,zt,Xt,Ht,Wt,Qt=0;for(;Qt<relocateNodes.length;Qt++)Nt=relocateNodes[Qt],Vt=Nt.$nodeToRelocate$,Vt["s-ol"]||(zt=doc.createTextNode(""),zt["s-nr"]=Vt,Vt.parentNode.insertBefore(Vt["s-ol"]=zt,Vt));for(Qt=0;Qt<relocateNodes.length;Qt++)if(Nt=relocateNodes[Qt],Vt=Nt.$nodeToRelocate$,Nt.$slotRefNode$){for(Xt=Nt.$slotRefNode$.parentNode,Ht=Nt.$slotRefNode$.nextSibling,zt=Vt["s-ol"];zt=zt.previousSibling;)if(Wt=zt["s-nr"],Wt&&Wt["s-sn"]===Vt["s-sn"]&&Xt===Wt.parentNode&&(Wt=Wt.nextSibling,!Wt||!Wt["s-nr"])){Ht=Wt;break}(!Ht&&Xt!==Vt.parentNode||Vt.nextSibling!==Ht)&&Vt!==Ht&&(!Vt["s-hn"]&&Vt["s-ol"]&&(Vt["s-hn"]=Vt["s-ol"].parentNode.nodeName),Xt.insertBefore(Vt,Ht))}else Vt.nodeType===1&&(Vt.hidden=!0)}checkSlotFallbackVisibility&&updateFallbackSlotVisibility(Dt.$elm$),plt.$flags$&=-2,relocateNodes.length=0}},getElement=_t=>BUILD.lazyLoad?getHostRef(_t).$hostElement$:_t,createEvent=(_t,Tt,Mt)=>{const Pt=getElement(_t);return{emit:Ft=>(BUILD.isDev&&!Pt.isConnected&&consoleDevWarn(`The "${Tt}" event was emitted, but the dispatcher node is no longer connected to the dom.`),emitEvent(Pt,Tt,{bubbles:!!(Mt&4),composed:!!(Mt&2),cancelable:!!(Mt&1),detail:Ft}))}},emitEvent=(_t,Tt,Mt)=>{const Pt=plt.ce(Tt,Mt);return _t.dispatchEvent(Pt),Pt},attachToAncestor=(_t,Tt)=>{},scheduleUpdate=(_t,Tt)=>(BUILD.taskQueue&&BUILD.updatable&&(_t.$flags$|=16),attachToAncestor(_t,_t.$ancestorComponent$),writeTask(()=>dispatchHooks(_t,Tt))),dispatchHooks=(_t,Tt)=>{const Mt=_t.$hostElement$,Pt=createTime("scheduleUpdate",_t.$cmpMeta$.$tagName$),Ft=Mt;let Dt;return Tt?Dt=safeCall(Ft,"componentWillLoad"):Dt=safeCall(Ft,"componentWillUpdate"),Dt=then(Dt,()=>safeCall(Ft,"componentWillRender")),Pt(),then(Dt,()=>updateComponent(_t,Ft,Tt))},updateComponent=async(_t,Tt,Mt)=>{const Pt=_t.$hostElement$,Ft=createTime("update",_t.$cmpMeta$.$tagName$);Pt["s-rc"],Mt&&attachStyles(_t);const Dt=createTime("render",_t.$cmpMeta$.$tagName$);callRender(_t,Tt,Pt),Dt(),Ft(),postUpdateComponent(_t)},callRender=(_t,Tt,Mt)=>{try{renderingRef=Tt,Tt=Tt.render&&Tt.render(),_t.$flags$&=-17,_t.$flags$|=2,(BUILD.hasRenderFn||BUILD.reflect)&&(BUILD.vdomRender||BUILD.reflect)&&(BUILD.hydrateServerSide||renderVdom(_t,Tt))}catch(Vt){consoleError(Vt,_t.$hostElement$)}return renderingRef=null,null},postUpdateComponent=_t=>{const Tt=_t.$cmpMeta$.$tagName$,Mt=_t.$hostElement$,Pt=createTime("postUpdate",Tt),Ft=Mt;_t.$ancestorComponent$,safeCall(Ft,"componentDidRender"),_t.$flags$&64?(safeCall(Ft,"componentDidUpdate"),Pt()):(_t.$flags$|=64,safeCall(Ft,"componentDidLoad"),Pt())},forceUpdate=_t=>{if(BUILD.updatable){const Tt=getHostRef(_t),Mt=Tt.$hostElement$.isConnected;return Mt&&(Tt.$flags$&18)===2&&scheduleUpdate(Tt,!1),Mt}return!1},safeCall=(_t,Tt,Mt)=>{if(_t&&_t[Tt])try{return _t[Tt](Mt)}catch(Pt){consoleError(Pt)}},then=(_t,Tt)=>_t&&_t.then?_t.then(Tt):Tt(),parsePropertyValue=(_t,Tt)=>_t!=null&&!isComplexType(_t)?Tt&4?_t==="false"?!1:_t===""||!!_t:Tt&2?parseFloat(_t):Tt&1?String(_t):_t:_t,getValue=(_t,Tt)=>getHostRef(_t).$instanceValues$.get(Tt),setValue=(_t,Tt,Mt,Pt)=>{const Ft=getHostRef(_t),Dt=_t,Nt=Ft.$instanceValues$.get(Tt),Vt=Ft.$flags$,zt=Dt;Mt=parsePropertyValue(Mt,Pt.$members$[Tt][0]);const Xt=Number.isNaN(Nt)&&Number.isNaN(Mt);if(Mt!==Nt&&!Xt){Ft.$instanceValues$.set(Tt,Mt);{if(Pt.$watchers$&&Vt&128){const Wt=Pt.$watchers$[Tt];Wt&&Wt.map(Qt=>{try{zt[Qt](Mt,Nt,Tt)}catch(Zt){consoleError(Zt,Dt)}})}if((Vt&18)===2){if(zt.componentShouldUpdate&&zt.componentShouldUpdate(Mt,Nt,Tt)===!1)return;scheduleUpdate(Ft,!1)}}}},proxyComponent=(_t,Tt,Mt)=>{if(Tt.$members$){_t.watchers&&(Tt.$watchers$=_t.watchers);const Pt=Object.entries(Tt.$members$),Ft=_t.prototype;Pt.map(([Dt,[Nt]])=>{(Nt&31||Nt&32)&&Object.defineProperty(Ft,Dt,{get(){return getValue(this,Dt)},set(Vt){setValue(this,Dt,Vt,Tt)},configurable:!0,enumerable:!0})});{const Dt=new Map;Ft.attributeChangedCallback=function(Nt,Vt,zt){plt.jmp(()=>{const Xt=Dt.get(Nt);if(this.hasOwnProperty(Xt))zt=this[Xt],delete this[Xt];else if(Ft.hasOwnProperty(Xt)&&typeof this[Xt]=="number"&&this[Xt]==zt)return;this[Xt]=zt===null&&typeof this[Xt]=="boolean"?!1:zt})},_t.observedAttributes=Pt.filter(([Nt,Vt])=>Vt[0]&15).map(([Nt,Vt])=>{const zt=Vt[1]||Nt;return Dt.set(zt,Nt),Vt[0]&512&&Tt.$attrsToReflect$.push([Nt,zt]),zt})}}return _t},initializeComponent=async(_t,Tt,Mt,Pt,Ft)=>{if((Tt.$flags$&32)===0&&(Ft=_t.constructor,Tt.$flags$|=32,customElements.whenDefined(Mt.$tagName$).then(()=>Tt.$flags$|=128),Ft.style)){let Nt=Ft.style;typeof Nt!="string"&&(Nt=Nt[Tt.$modeName$=computeMode(_t)]);const Vt=getScopeId(Mt,Tt.$modeName$);if(!styles.has(Vt)){const zt=createTime("registerStyles",Mt.$tagName$);registerStyle(Vt,Nt,!!(Mt.$flags$&1)),zt()}}Tt.$ancestorComponent$,(()=>scheduleUpdate(Tt,!0))()},fireConnectedCallback=_t=>{},connectedCallback=_t=>{if((plt.$flags$&1)===0){const Tt=getHostRef(_t),Mt=Tt.$cmpMeta$,Pt=createTime("connectedCallback",Mt.$tagName$);Tt.$flags$&1?(addHostEventListeners(_t,Tt,Mt.$listeners$),fireConnectedCallback(Tt.$lazyInstance$)):(Tt.$flags$|=1,Mt.$flags$&12&&setContentReference(_t),Mt.$members$&&Object.entries(Mt.$members$).map(([Ft,[Dt]])=>{if(Dt&31&&_t.hasOwnProperty(Ft)){const Nt=_t[Ft];delete _t[Ft],_t[Ft]=Nt}}),initializeComponent(_t,Tt,Mt)),Pt()}},setContentReference=_t=>{const Tt=_t["s-cr"]=doc.createComment("");Tt["s-cn"]=!0,_t.insertBefore(Tt,_t.firstChild)},disconnectedCallback=_t=>{if((plt.$flags$&1)===0){const Tt=getHostRef(_t);Tt.$rmListeners$&&(Tt.$rmListeners$.map(Mt=>Mt()),Tt.$rmListeners$=void 0)}},proxyCustomElement=(_t,Tt)=>{const Mt={$flags$:Tt[0],$tagName$:Tt[1]};BUILD.member&&(Mt.$members$=Tt[2]),BUILD.hostListener&&(Mt.$listeners$=Tt[3]),BUILD.watchCallback&&(Mt.$watchers$=_t.$watchers$),BUILD.reflect&&(Mt.$attrsToReflect$=[]),BUILD.shadowDom&&!supportsShadow&&Mt.$flags$&1&&(Mt.$flags$|=8);const Pt=_t.prototype.connectedCallback,Ft=_t.prototype.disconnectedCallback;return Object.assign(_t.prototype,{__registerHost(){registerHost(this,Mt)},connectedCallback(){connectedCallback(this),BUILD.connectedCallback&&Pt&&Pt.call(this)},disconnectedCallback(){disconnectedCallback(this),BUILD.disconnectedCallback&&Ft&&Ft.call(this)},__attachShadow(){supportsShadow?BUILD.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(Mt.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),_t.is=Mt.$tagName$,proxyComponent(_t,Mt)},getAssetPath=_t=>{const Tt=new URL(_t,plt.$resourcesUrl$);return Tt.origin!==win.location.origin?Tt.href:Tt.pathname},setAssetPath=_t=>plt.$resourcesUrl$=_t,Fragment=(_t,Tt)=>Tt,hostRefs=new WeakMap,getHostRef=_t=>hostRefs.get(_t),registerHost=(_t,Tt)=>{const Mt={$flags$:0,$hostElement$:_t,$cmpMeta$:Tt,$instanceValues$:new Map};return BUILD.isDev&&(Mt.$renderCount$=0),BUILD.method&&BUILD.lazyLoad&&(Mt.$onInstancePromise$=new Promise(Pt=>Mt.$onInstanceResolve$=Pt)),BUILD.asyncLoading&&(Mt.$onReadyPromise$=new Promise(Pt=>Mt.$onReadyResolve$=Pt),_t["s-p"]=[],_t["s-rc"]=[]),addHostEventListeners(_t,Mt,Tt.$listeners$),hostRefs.set(_t,Mt)},isMemberInElement=(_t,Tt)=>Tt in _t,consoleError=(_t,Tt)=>(0,console.error)(_t,Tt),STENCIL_DEV_MODE=BUILD.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],consoleDevError=(..._t)=>console.error(...STENCIL_DEV_MODE,..._t),consoleDevWarn=(..._t)=>console.warn(...STENCIL_DEV_MODE,..._t),styles=new Map,modeResolutionChain=[],queueDomReads=[],queueDomWrites=[],queueTask=(_t,Tt)=>Mt=>{_t.push(Mt),queuePending||(queuePending=!0,Tt&&plt.$flags$&4?nextTick(flush):plt.raf(flush))},consume=_t=>{for(let Tt=0;Tt<_t.length;Tt++)try{_t[Tt](performance.now())}catch(Mt){consoleError(Mt)}_t.length=0},flush=()=>{consume(queueDomReads),consume(queueDomWrites),(queuePending=queueDomReads.length>0)&&plt.raf(flush)},nextTick=_t=>promiseResolve().then(_t),writeTask=queueTask(queueDomWrites,!0),Build={isDev:!!BUILD.isDev,isBrowser:!0,isServer:!1,isTesting:!!BUILD.isTesting};let e$1j;function r$13(){setAssetPath(Q$e(a$2M(e$1j)))}e$1j="components/assets";const t$1i=Symbol("widget"),r$12=[],n$1U={},o$1b=new WeakMap;function i$1J(_t,Tt){let Mt=Tt.children;if(Mt&&Mt.length)for(let Ft=0;Ft<Mt.length;++Ft)Mt[Ft]=i$1J(_t,Mt[Ft]);else Mt=r$12;const Pt=Tt.vnodeSelector;if(a$1Q(Pt)){const Ft=Tt.properties||n$1U,Dt=Ft.key||Pt;return{vnodeSelector:"div",properties:{key:Dt,afterCreate:d$1l,afterUpdate:c$25,afterRemoved:s$1m,parentWidget:_t,widgetConstructor:Pt,widgetProperties:{...Ft,key:Dt,children:Mt}},children:void 0,text:void 0,domNode:null}}return Tt}function d$1l(_t,Tt,Mt,{parentWidget:Pt,widgetConstructor:Ft,widgetProperties:Dt}){var Vt;const Nt=new Ft(Dt);Nt.container=_t,o$1b.set(_t,Nt),(Vt=Nt.afterCreate)==null||Vt.call(Nt,Nt,_t),Pt._internalHandles.add(n$2W(()=>s$1m(_t)))}function c$25(_t,Tt,Mt,{widgetProperties:Pt}){var Dt;const Ft=o$1b.get(_t);Ft&&(Ft.set(Pt),(Dt=Ft.afterUpdate)==null||Dt.call(Ft,Ft,_t))}function s$1m(_t){const Tt=o$1b.get(_t);Tt&&(Tt.destroy(),o$1b.delete(_t))}function a$1Q(_t){return typeof _t=="function"&&_t[t$1i]}const e$1i=new Set;function n$1T(_t){e$1i.add(_t),_t.finally(()=>e$1i.delete(_t))}const U$o="esri.widgets.Widget",$$d=s$2l.getLogger(U$o);let x$B=0;const z$n={widgetIcon:"esri-icon-checkbox-unchecked"};function A$j(_t,Tt){for(const Mt in Tt)_t[Mt]!=null&&(typeof _t[Mt]=="object"&&typeof Tt[Mt]=="object"?A$j(_t[Mt],Tt[Mt]):_t[Mt]=Tt[Mt]);return _t}const B$i=s$1n({postProcessProjectionOptions(_t){const Tt=_t.eventHandlerInterceptor,Mt=/capture$/i;_t.eventHandlerInterceptor=(Pt,Ft,Dt,Nt)=>{const Vt=Tt(Pt,Ft,Dt,Nt),zt=Mt.test(Pt);if(!((Pt=Pt.replace(Mt,"")).toLowerCase()in Dt)||zt){const Xt=Pt[2].toLowerCase()+Pt.slice(3),Ht=Zt=>Vt.call(Dt,Zt);Dt.addEventListener(Xt,Ht,zt);const Wt=()=>Dt.removeEventListener(Xt,Ht,zt),Qt=Nt.afterRemoved;Nt.afterRemoved=Zt=>{Qt==null||Qt(Zt),Wt()}}return Vt}},handleInterceptedEvent(_t,Tt,Mt,Pt){const{eventPhase:Ft,type:Dt}=Pt,Nt=Ft===Event.CAPTURING_PHASE;let Vt=`on${Dt}${Nt?"capture":""}`;const zt=Tt.properties;(Vt in zt||(Vt=`on${Dt[0].toUpperCase()}${Dt.slice(1)}${Nt?"Capture":""}`,Vt in zt))&&(t$1m(),_t.scheduleRender(),zt[Vt].call(zt.bind||Mt,Pt))}});let D$o=!1,M$x=class extends m$26(n$2K.EventedAccessor){constructor(_t,Tt){super(_t,Tt),this._attached=!1,this._internalHandles=new u$1P,this._projector=B$i,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=z$n.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=x$V(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const Dt=await E$K(this._messageBundleProps.map(async({bundlePath:Nt,propertyName:Vt})=>{let zt=await h$1B(Nt);this.uiStrings&&Object.keys(this.uiStrings)&&(zt=A$j(m$2e(zt),this.uiStrings)),this[Vt]=zt}));for(const Nt of Dt)Nt.error&&$$d.error("widget-intl:locale-error",this.declaredClass,Nt.error)}await this.loadLocale()}),r$13();const Mt="esri-widget-uid-"+t$1j(),Pt=this.render.bind(this);this._trackingTarget=new s$2f(()=>this.scheduleRender());const Ft=()=>{var Ht;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:Mt,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const Dt=Pt();let{properties:Nt}=Dt;Nt||(Dt.properties=Nt={});let{key:Vt,styles:zt}=Nt;Vt||(Nt.key=Mt),zt||(Nt.styles=zt={}),zt.display||(zt.display="");let Xt=0;return(Ht=Dt.children)==null||Ht.forEach(Wt=>{if(a$1Q(Wt.vnodeSelector))return;let{properties:Qt}=Wt;Qt||(Wt.properties=Qt={}),Qt.key||(Qt.key=`${this.id}--${Xt++}`)}),i$1J(this,Dt)};this.render=()=>{if(D$o)return Ft();let Dt=e$1n(this);if(Dt)return Dt;this._trackingTarget.clear(),D$o=!0;try{Dt=g$1n(this._trackingTarget,Ft)}catch(Nt){throw console.error(Nt),Nt}finally{D$o=!1}return c$29(this,Dt),Dt},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),n$1T(this._resourcesFetch)}normalizeCtorArgs(_t,Tt){const Mt={..._t};return Tt&&(Mt.container=Tt),Mt}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(b$1e)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(l$2H(this._trackingTarget),l$2H(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,o$1h(this))}set container(_t){this._get("container")||this._set("container",_t)}castContainer(_t){return e$1o(_t)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+x$B++}set id(_t){_t&&this._set("id",_t)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(o$1h(this),this._projector.scheduleRender())}classes(..._t){return p$2l.apply(this,_t)}renderNow(){o$1h(this),this._projector.renderNow()}_postInitialize(){var Tt;if(this.destroyed)return;this.scheduleRender(),(Tt=this._delegatedEventNames)!=null&&Tt.length&&this._internalHandles.add(l$2e(()=>this.viewModel,(Mt,Pt)=>{Pt&&this._internalHandles.remove("delegated-events"),Mt&&e$20(Mt)&&this._internalHandles.add(this._delegatedEventNames.map(Ft=>r$1H(Mt,Ft,Dt=>{this.emit(Ft,Dt)})),"delegated-events")},h$1w)),this.postInitialize();const _t=async()=>{await this._loadLocale().catch(b$1e),this.scheduleRender()};this._internalHandles.add([s$1$(_t),l$2e(()=>this.uiStrings,_t),f$1p(()=>this.container,Mt=>{this.destroyed||this._attach(Mt)},{initial:!0,once:!0})])}_attach(_t){_t&&(this._projector.merge(_t,this.render),this._attached=!0)}_detach(_t){_t&&this._attached&&(this._projector.detach(this.render),_t.parentNode&&_t.parentNode.removeChild(_t),this._attached=!1)}};M$x[t$1i]=!0,e$2a([d$25()],M$x.prototype,"_readyForTrueRender",void 0),e$2a([d$25({value:null})],M$x.prototype,"container",null),e$2a([s$23("container")],M$x.prototype,"castContainer",null),e$2a([d$25({aliasOf:"container"})],M$x.prototype,"domNode",void 0),e$2a([d$25()],M$x.prototype,"iconClass",void 0),e$2a([d$25()],M$x.prototype,"id",null),e$2a([d$25()],M$x.prototype,"label",void 0),e$2a([d$25()],M$x.prototype,"renderable",null),e$2a([d$25()],M$x.prototype,"uiStrings",void 0),e$2a([d$25()],M$x.prototype,"viewModel",void 0),e$2a([d$25()],M$x.prototype,"visible",void 0),e$2a([d$25()],M$x.prototype,"key",void 0),e$2a([d$25()],M$x.prototype,"children",void 0),e$2a([d$25()],M$x.prototype,"afterCreate",void 0),e$2a([d$25()],M$x.prototype,"afterUpdate",void 0),e$2a([d$25()],M$x.prototype,"afterRemoved",void 0),M$x=e$2a([n$2L(U$o)],M$x);const O$l=M$x;function n$1S(_t){return 32+_t.length}function t$1h(){return 16}function r$11(_t){if(!_t)return 0;let Tt=32;for(const Mt in _t)if(_t.hasOwnProperty(Mt)){const Pt=_t[Mt];switch(typeof Pt){case"string":Tt+=n$1S(Pt);break;case"number":Tt+=t$1h();break;case"boolean":Tt+=4}}return Tt}function e$1h(_t,Tt){return 32+_t.length*Tt}var o$1a;(function(_t){_t[_t.KILOBYTES=1024]="KILOBYTES",_t[_t.MEGABYTES=1048576]="MEGABYTES",_t[_t.GIGABYTES=1073741824]="GIGABYTES"})(o$1a||(o$1a={}));function g$T(_t,Tt,Mt){return _t.units[Tt][Mt]}function l$1v(_t,Tt,Mt,Pt=2,Ft="abbr"){return`${m$1N(Tt,{minimumFractionDigits:Pt,maximumFractionDigits:Pt})} ${g$T(_t,Mt,Ft)}`}function p$2i(_t,Tt,Mt,Pt=2,Ft="abbr"){return`${m$1N(Tt,{minimumFractionDigits:Pt,maximumFractionDigits:Pt,signDisplay:"exceptZero"})} ${g$T(_t,Mt,Ft)}`}function D$n(_t,Tt,Mt,Pt=2,Ft="abbr"){const Dt=R$n(Tt,Mt);return l$1v(_t,N$o(Tt,Mt,Dt),Dt,Pt,Ft)}function F$o(_t,Tt,Mt,Pt=2,Ft="abbr"){const Dt=R$n(Tt,Mt);return p$2i(_t,N$o(Tt,Mt,Dt),Dt,Pt,Ft)}function x$A(_t,Tt,Mt,Pt=2,Ft="abbr"){const Dt=J$e(Tt,Mt);return l$1v(_t,N$o(Tt,Mt,Dt),Dt,Pt,Ft)}function h$11(_t,Tt,Mt,Pt=2,Ft="abbr"){const Dt=J$e(Tt,Mt);return p$2i(_t,N$o(Tt,Mt,Dt),Dt,Pt,Ft)}function y$16(_t,Tt,Mt,Pt=2,Ft="abbr"){const Dt=K$a(Tt,Mt);return l$1v(_t,N$o(Tt,Mt,Dt),Dt,Pt,Ft)}function d$1k(_t,Tt,Mt,Pt=2,Ft="abbr"){const Dt=K$a(Tt,Mt);return p$2i(_t,N$o(Tt,Mt,Dt),Dt,Pt,Ft)}function j$G(_t,Tt,Mt,Pt=2,Ft="abbr"){const Dt=A$o(Tt,Mt);return l$1v(_t,N$o(Tt,Mt,Dt),Dt,Pt,Ft)}function B$h(_t,Tt,Mt,Pt=2,Ft="abbr"){const Dt=A$o(Tt,Mt);return p$2i(_t,N$o(Tt,Mt,Dt),Dt,Pt,Ft)}function $$c(_t,Tt,Mt,Pt=2,Ft="abbr"){const Dt=T$q(Tt,Mt);return l$1v(_t,N$o(Tt,Mt,Dt),Dt,Pt,Ft)}function M$w(_t,Tt,Mt,Pt=2,Ft="abbr"){const Dt=Y$8(Tt,Mt);return l$1v(_t,N$o(Tt,Mt,Dt),Dt,Pt,Ft)}function w$J(_t,Tt,Mt,Pt,Ft){const Dt=s$1A.normalize(z$m(N$o(_t,Tt,"degrees"),Mt,Pt),0,!0);return Ft=c$3r(Ft,2),m$1N(Dt,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:Ft,minimumFractionDigits:Ft})}function z$m(_t,Tt,Mt){if(Tt===Mt)return _t;switch(Mt){case"arithmetic":return E$v(_t);case"geographic":return T$n(_t)}}function E$v(_t){return 90-_t}function T$n(_t){return-_t-90}function I$r(_t,Tt,Mt,Pt,Ft){Mt!==Pt&&(_t=-_t);const Dt=N$o(_t,Tt,"degrees")%360;return Ft=c$3r(Ft,2),m$1N(Dt,{style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:Ft,minimumFractionDigits:Ft,signDisplay:"exceptZero"})}const K$9=["B","kB","MB","GB","TB"];function L$m(_t,Tt){let Mt=Tt===0?0:Math.floor(Math.log(Tt)/Math.log(o$1a.KILOBYTES));Mt=o$1H(Mt,0,K$9.length-1);const Pt=m$1N(Tt/o$1a.KILOBYTES**Mt,{maximumFractionDigits:2});return r$1L(_t.units.bytes[K$9[Mt]],{fileSize:Pt})}function n$1R(_t){const{exifInfo:Tt,exifName:Mt,tagName:Pt}=_t;if(!Tt||!Mt||!Pt)return null;const Ft=Tt.find(Dt=>Dt.name===Mt);return Ft?t$1g({tagName:Pt,tags:Ft.tags}):null}function t$1g(_t){const{tagName:Tt,tags:Mt}=_t;if(!Mt||!Tt)return null;const Pt=Mt.find(Ft=>Ft.name===Tt);return Pt&&Pt.value||null}var s$1l;const p$2h={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let a$1P=s$1l=class extends l$2v{constructor(_t){super(_t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:_t}=this,Tt=n$1R({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:_t});return p$2h[Tt]||null}clone(){return new s$1l({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};e$2a([d$25({type:String})],a$1P.prototype,"contentType",void 0),e$2a([d$25()],a$1P.prototype,"exifInfo",void 0),e$2a([d$25({readOnly:!0})],a$1P.prototype,"orientationInfo",null),e$2a([d$25({type:S$Q})],a$1P.prototype,"id",void 0),e$2a([d$25({type:String})],a$1P.prototype,"globalId",void 0),e$2a([d$25({type:String})],a$1P.prototype,"keywords",void 0),e$2a([d$25({type:String})],a$1P.prototype,"name",void 0),e$2a([d$25({json:{read:!1}})],a$1P.prototype,"parentGlobalId",void 0),e$2a([d$25({json:{read:!1}})],a$1P.prototype,"parentObjectId",void 0),e$2a([d$25({type:S$Q})],a$1P.prototype,"size",void 0),e$2a([d$25({json:{read:!1}})],a$1P.prototype,"url",void 0),a$1P=s$1l=e$2a([n$2L("esri.layers.support.AttachmentInfo")],a$1P);const l$1u=a$1P;var a$1O;let p$2g=a$1O=class extends l$2v{constructor(_t){super(_t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(_t,Tt){Tt.resultOffset=this.start,Tt.resultRecordCount=this.num||10}clone(){return new a$1O(m$2e({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};e$2a([d$25({type:[String],json:{write:!0}})],p$2g.prototype,"attachmentTypes",void 0),e$2a([d$25({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],p$2g.prototype,"attachmentsWhere",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],p$2g.prototype,"cacheHint",void 0),e$2a([d$25({type:[String],json:{write:!0}})],p$2g.prototype,"keywords",void 0),e$2a([d$25({type:[Number],json:{write:!0}})],p$2g.prototype,"globalIds",void 0),e$2a([d$25({json:{write:!0}})],p$2g.prototype,"name",void 0),e$2a([d$25({type:Number,json:{read:{source:"resultRecordCount"}}})],p$2g.prototype,"num",void 0),e$2a([d$25({type:[Number],json:{write:!0}})],p$2g.prototype,"objectIds",void 0),e$2a([d$25({type:Boolean,json:{default:!1,write:!0}})],p$2g.prototype,"returnMetadata",void 0),e$2a([d$25({type:[Number],json:{write:!0}})],p$2g.prototype,"size",void 0),e$2a([d$25({type:Number,json:{read:{source:"resultOffset"}}})],p$2g.prototype,"start",void 0),e$2a([r$1C("start"),r$1C("num")],p$2g.prototype,"writeStart",null),e$2a([d$25({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],p$2g.prototype,"where",void 0),p$2g=a$1O=e$2a([n$2L("esri.rest.support.AttachmentQuery")],p$2g),p$2g.from=b$1b(p$2g);const c$24=p$2g,d$1j="esri.widgets.Feature.support.featureUtils",p$2f=s$2l.getLogger(d$1j),m$1k=/href=(""|'')/gi,y$15=/(\{([^\{\r\n]+)\})/g,g$S=/\'/g,h$10=/^\s*expression\//i,I$q=/(\n)/gi,b$O=/[\u00A0-\u9999<>\&]/gim,F$n=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,w$I=/^(?:mailto:|tel:)/,N$k="relationships/",E$u=S$G("short-date-short-time");function j$F(_t){if(!t$2e(_t))return _t.get("sourceLayer")||_t.get("layer")}async function x$z(_t,Tt){return typeof _t=="function"?_t.call(null,Tt):_t}function T$m(_t=""){if(_t)return!w$I.test(_t.trim().toLowerCase())}function C$k(_t){return!!_t&&h$10.test(_t)}function M$v(_t,Tt){if(!C$k(Tt)||!_t)return null;const Mt=Tt.replace(h$10,"").toLowerCase();let Pt;return _t.some(Ft=>Ft.name.toLowerCase()===Mt&&(Pt=Ft,!0)),Pt}function q$e(_t,Tt){const Mt=M$v(Tt,_t==null?void 0:_t.fieldName);return Mt?Mt.title||null:_t?_t.label||_t.fieldName:null}function R$k(_t,Tt){const Mt=Tt.get(_t.toLowerCase());return`{${Mt&&Mt.fieldName||_t}}`}function v$L(_t){return _t.replace(m$1k,"")}function D$m(_t,Tt){const Mt=L$l(Tt,_t);return Mt?Mt.name:_t}function A$i(_t,Tt){return _t&&_t.map(Mt=>D$m(Mt,Tt))}function L$l(_t,Tt){return _t&&typeof _t.getField=="function"?_t.getField(Tt):null}function U$n(_t){return`${_t}`.trim()}function $$b({attributes:_t,globalAttributes:Tt,layer:Mt,text:Pt,expressionAttributes:Ft,fieldInfoMap:Dt}){return Pt?S$u({formattedAttributes:Tt,template:_$l(Pt,{...Tt,...Ft,..._t},Mt),fieldInfoMap:Dt}):""}function S$u({formattedAttributes:_t,template:Tt,fieldInfoMap:Mt}){return U$n(v$L(r$1L(r$1L(Tt,Pt=>R$k(Pt,Mt)),_t)))}function G$d(_t,Tt,Mt=!1){const Pt=Tt[_t];if(typeof Pt=="string"){const Ft="%27",Dt=(Mt?encodeURIComponent(Pt):Pt).replace(g$S,Ft);Tt[_t]=Dt}}function k$k(_t,Tt=!1){const Mt={..._t};return Object.keys(Mt).forEach(Pt=>G$d(Pt,Mt,Tt)),Mt}function O$k(_t,Tt,Mt){const Pt=(Tt=U$n(Tt))&&Tt[0]!=="{";return r$1L(_t,k$k(Mt,Pt))}function P$i(_t,Tt){return _t.replace(y$15,(Mt,Pt,Ft)=>{const Dt=L$l(Tt,Ft);return Dt?`{${Dt.name}}`:Pt})}function _$l(_t,Tt,Mt){const Pt=P$i(_t,Mt);return Pt&&Pt.replace(F$n,(Ft,Dt,Nt)=>O$k(Ft,Dt||Nt,Tt))}function z$l(_t,Tt){if(typeof _t=="string"&&Tt&&Tt.dateFormat==null&&(Tt.places!=null||Tt.digitSeparator!=null)){const Mt=Number(_t);if(!isNaN(Mt))return Mt}return _t}function H$b(_t){return(_t==null?void 0:_t.type)==="feature"}function Q$8(_t){return!!(_t!=null&&_t.layer)}function Z$6(_t){return(_t==null?void 0:_t.type)==="map-image"}function V$j(_t,Tt){var Xt;const Mt=Tt.fieldInfos,Pt=Tt.fieldName,Ft=(Xt=B$g(Mt,Pt))==null?void 0:Xt.clone(),Dt=Tt.preventPlacesFormatting,Nt=Tt.layer,Vt=L$l(Nt,Pt);if(Ft&&(Vt==null?void 0:Vt.type)==="date"){const Ht=Ft.format||new u$1G;Ht.dateFormat=Ht.dateFormat||"short-date-short-time",Ht.dateTimeFormatOptions=!Q$8(Nt)&&H$b(Nt)&&Nt.datesInUnknownTimezone||Q$8(Nt)&&Z$6(Nt.layer)&&Nt.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,Ft.format=Ht}const zt=Ft&&Ft.format;return typeof _t=="string"&&ye$3(Pt)&&zt?zt.formatRasterPixelValue(_t):typeof(_t=z$l(_t,zt))=="string"||_t==null||zt==null?te$4(_t):Dt?m$1N(_t,{...u$1H(zt),minimumFractionDigits:0,maximumFractionDigits:20}):zt.format(_t)}function B$g(_t,Tt){if(!_t||!_t.length||!Tt)return;const Mt=Tt.toLowerCase();let Pt;return _t.some(Ft=>!(!Ft.fieldName||Ft.fieldName.toLowerCase()!==Mt)&&(Pt=Ft,!0)),Pt}function J$b({fieldName:_t,graphic:Tt,layer:Mt}){if(ue$3(_t)||!Mt||typeof Mt.getFeatureType!="function")return null;const{typeIdField:Pt}=Mt;if(!Pt||_t!==Pt)return null;const Ft=Mt.getFeatureType(Tt);return Ft?Ft.name:null}function K$8({fieldName:_t,value:Tt,graphic:Mt,layer:Pt}){if(ue$3(_t)||!Pt||typeof Pt.getFieldDomain!="function")return null;const Ft=Pt.getFieldDomain(_t,{feature:Mt});return Ft&&Ft.type==="coded-value"?Ft.getName(Tt):null}function W$7(_t,Tt){const{creatorField:Mt,creationDateField:Pt,editorField:Ft,editDateField:Dt}=_t;if(!Tt)return;const Nt=Tt[Dt];if(typeof Nt=="number"){const zt=Tt[Ft];return{type:"edit",date:L$r(Nt,E$u),user:zt}}const Vt=Tt[Pt];if(typeof Vt=="number"){const zt=Tt[Mt];return{type:"create",date:L$r(Vt,E$u),user:zt}}return null}function X$6(_t,Tt){const Mt=new Map;return _t&&_t.forEach(Pt=>{const Ft=D$m(Pt.fieldName,Tt);Pt.fieldName=Ft,Mt.set(Ft.toLowerCase(),Pt)}),Mt}function Y$5(_t){const Tt=[];if(!_t)return Tt;const{fieldInfos:Mt,content:Pt}=_t;return Mt&&Tt.push(...Mt),Pt&&Array.isArray(Pt)&&Pt.forEach(Ft=>{if(Ft.type==="fields"){const Dt=Ft&&Ft.fieldInfos;Dt&&Tt.push(...Dt)}}),Tt}function ee$4(_t){return _t.replace(b$O,Tt=>`&#${Tt.charCodeAt(0)};`)}function te$4(_t){return typeof _t=="string"?_t.replace(I$q,'<br class="esri-text-new-line" />'):_t}function re$4(_t){const{value:Tt,fieldName:Mt,fieldInfos:Pt,fieldInfoMap:Ft,layer:Dt,graphic:Nt}=_t;if(Tt==null)return"";const Vt=K$8({fieldName:Mt,value:Tt,graphic:Nt,layer:Dt});if(Vt)return Vt;const zt=J$b({fieldName:Mt,graphic:Nt,layer:Dt});if(zt)return zt;if(Ft.get(Mt.toLowerCase()))return V$j(Tt,{fieldInfos:Pt||Array.from(Ft.values()),fieldName:Mt,layer:Dt});const Xt=Dt&&Dt.fieldsIndex;return Xt&&Xt.isDateField(Mt)?L$r(Tt,E$u):te$4(Tt)}function ne$3({fieldInfos:_t,attributes:Tt,layer:Mt,graphic:Pt,fieldInfoMap:Ft,relatedInfos:Dt}){const Nt={};return Dt==null||Dt.forEach(Vt=>fe$3({attributes:Nt,relatedInfo:Vt,fieldInfoMap:Ft,fieldInfos:_t,layer:Mt})),Object.keys(Tt).forEach(Vt=>{const zt=Tt[Vt];Nt[Vt]=re$4({fieldName:Vt,fieldInfos:_t,fieldInfoMap:Ft,layer:Mt,value:zt,graphic:Pt})}),Nt}async function ie$3(_t,Tt){var Ht,Wt;const{layer:Mt,graphic:Pt,outFields:Ft,objectIds:Dt,returnGeometry:Nt,spatialReference:Vt}=_t,zt=Dt[0];if(typeof zt!="number"&&typeof zt!="string"){const Qt="Could not query required fields for the specified feature. The feature's ID is invalid.",Zt={layer:Mt,graphic:Pt,objectId:zt,requiredFields:Ft};return p$2f.warn(Qt,Zt),null}if(!((Wt=(Ht=Mt.capabilities)==null?void 0:Ht.operations)!=null&&Wt.supportsQuery)){const Qt="The specified layer cannot be queried. The following fields will not be available.",Zt={layer:Mt,graphic:Pt,requiredFields:Ft,returnGeometry:Nt};return p$2f.warn(Qt,Zt),null}const Xt=Mt.createQuery();return Xt.objectIds=Dt,Xt.outFields=Ft!=null&&Ft.length?Ft:[Mt.objectIdField],Xt.returnGeometry=!!Nt,Xt.returnZ=!!Nt,Xt.returnM=!!Nt,Xt.outSpatialReference=Vt,(await Mt.queryFeatures(Xt,Tt)).features[0]}async function oe$3(_t){var Pt;if(!((Pt=_t.expressionInfos)!=null&&Pt.length))return!1;const Tt=await a$2t(),{arcadeUtils:{hasGeometryFunctions:Mt}}=Tt;return Mt(_t)}async function ae$3({graphic:_t,popupTemplate:Tt,layer:Mt,spatialReference:Pt},Ft){if(!Mt||!Tt||(typeof Mt.load=="function"&&await Mt.load(Ft),!_t.attributes))return;const Dt=_t.attributes[Mt.objectIdField];if(Dt==null)return;const Nt=[Dt],Vt=await Tt.getRequiredFields(Mt.fieldsIndex),zt=de$4(Vt,_t),Xt=zt?[]:Vt,Ht=Tt.returnGeometry||await oe$3(Tt);if(zt&&!Ht)return;const Wt=await ie$3({layer:Mt,graphic:_t,outFields:Xt,objectIds:Nt,returnGeometry:Ht,spatialReference:Pt},Ft);Wt&&(Wt.geometry&&(_t.geometry=Wt.geometry),Wt.attributes&&(_t.attributes={..._t.attributes,...Wt.attributes}))}function ue$3(_t=""){return!!_t&&_t.includes(N$k)}function le$2(_t){return _t?`${N$k}${_t.layerId}/${_t.fieldName}`:""}function se$3({attributes:_t,graphic:Tt,relatedInfo:Mt,fieldInfos:Pt,fieldInfoMap:Ft,layer:Dt}){_t&&Tt&&Mt&&Object.keys(Tt.attributes).forEach(Nt=>{const Vt=le$2({layerId:Mt.relation.id.toString(),fieldName:Nt}),zt=Tt.attributes[Nt];_t[Vt]=re$4({fieldName:Vt,fieldInfos:Pt,fieldInfoMap:Ft,layer:Dt,value:zt,graphic:Tt})})}function fe$3({attributes:_t,relatedInfo:Tt,fieldInfoMap:Mt,fieldInfos:Pt,layer:Ft}){_t&&Tt&&(Tt.relatedFeatures&&Tt.relatedFeatures&&Tt.relatedFeatures.forEach(Dt=>se$3({attributes:_t,graphic:Dt,relatedInfo:Tt,fieldInfoMap:Mt,fieldInfos:Pt,layer:Ft})),Tt.relatedStatsFeatures&&Tt.relatedStatsFeatures&&Tt.relatedStatsFeatures.forEach(Dt=>se$3({attributes:_t,graphic:Dt,relatedInfo:Tt,fieldInfoMap:Mt,fieldInfos:Pt,layer:Ft})))}const ce$3=_t=>{if(!_t)return!1;const Tt=_t.toUpperCase();return Tt.includes("CURRENT_TIMESTAMP")||Tt.includes("CURRENT_DATE")||Tt.includes("CURRENT_TIME")},de$2=({layer:_t,method:Tt,query:Mt,definitionExpression:Pt})=>{var Nt,Vt;if(!((Vt=(Nt=_t.capabilities)==null?void 0:Nt.query)!=null&&Vt.supportsCacheHint)||Tt==="attachments")return;const Ft=r$1P(Mt.where)&&Mt.where,Dt=r$1P(Mt.geometry)&&Mt.geometry;ce$3(Pt)||ce$3(Ft)||(Dt==null?void 0:Dt.type)==="extent"||Mt.resultType==="tile"||(Mt.cacheHint=!0)},pe$2=({query:_t,layer:Tt,method:Mt})=>{de$2({layer:Tt,method:Mt,query:_t,definitionExpression:`${Tt.definitionExpression} ${Tt.serviceDefinitionExpression}`})},me$3=({queryPayload:_t,layer:Tt,method:Mt})=>{de$2({layer:Tt,method:Mt,query:_t,definitionExpression:`${Tt.definitionExpression} ${Tt.serviceDefinitionExpression}`})},u$1g={editing:!1,operations:{add:!0,update:!0,delete:!0}},y$14=j$11.ofType(l$1u),A$h="graphic.layer.capabilities.operations.supportsResizeAttachments";let f$_=class extends y$1E{constructor(_t){super(_t),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...u$1g},this.activeAttachmentInfo=null,this.attachmentInfos=new y$14,this.graphic=null,this.mode="view",this.own(l$2e(()=>this.graphic,()=>this._graphicChanged(),h$1w))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(_t){return{...u$1g,..._t}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(A$h)||!1}async getAttachments(){const{_attachmentLayer:_t,attachmentInfos:Tt}=this;if(!_t||typeof _t.queryAttachments!="function")throw new s$2i("invalid-layer","getAttachments(): A valid layer is required.");const Mt=this._getFeatureId(),Pt=new c$24({objectIds:[Mt],returnMetadata:!0}),Ft=[],Dt=_t.queryAttachments(Pt).then(Vt=>Vt[Mt]||Ft).catch(()=>Ft);this._getAttachmentsPromise=Dt,this.notifyChange("state");const Nt=await Dt;return Tt.removeAll(),Nt.length&&Tt.addMany(Nt),this._getAttachmentsPromise=null,this.notifyChange("state"),Nt}async addAttachment(_t){const{_attachmentLayer:Tt,attachmentInfos:Mt,graphic:Pt,abilities:Ft}=this;if(!_t)throw new s$2i("invalid-attachment","addAttachment(): An attachment is required.",{attachment:_t});if(!Ft.operations.add)throw new s$2i("invalid-abilities","addAttachment(): add abilities are required.");if(!Tt||typeof Tt.addAttachment!="function")throw new s$2i("invalid-layer","addAttachment(): A valid layer is required.");const Dt=Tt.addAttachment(Pt,_t).then(Vt=>this._queryAttachment(Vt.objectId)),Nt=await Dt;return Mt.add(Nt),Nt}async deleteAttachment(_t){const{_attachmentLayer:Tt,attachmentInfos:Mt,graphic:Pt,abilities:Ft}=this;if(!_t)throw new s$2i("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:_t});if(!Ft.operations.delete)throw new s$2i("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!Tt||typeof Tt.deleteAttachments!="function")throw new s$2i("invalid-layer","deleteAttachment(): A valid layer is required.");const Dt=Tt.deleteAttachments(Pt,[_t.id]).then(()=>_t),Nt=await Dt;return Mt.remove(Nt),Nt}async updateAttachment(_t,Tt=this.activeAttachmentInfo){const{_attachmentLayer:Mt,attachmentInfos:Pt,graphic:Ft,abilities:Dt}=this;if(!_t)throw new s$2i("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:_t});if(!Tt)throw new s$2i("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:Tt});if(!Dt.operations.update)throw new s$2i("invalid-abilities","updateAttachment(): Update abilities are required.");const Nt=Pt.findIndex(Xt=>Xt===Tt);if(!Mt||typeof Mt.updateAttachment!="function")throw new s$2i("invalid-layer","updateAttachment(): A valid layer is required.");const Vt=Mt.updateAttachment(Ft,Tt.id,_t).then(Xt=>this._queryAttachment(Xt.objectId)),zt=await Vt;return Pt.splice(Nt,1,zt),zt}async _queryAttachment(_t){if(!_t)throw new s$2i("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:Tt}=this,Mt=this._getFeatureId(),Pt=new c$24({objectIds:[Mt],attachmentsWhere:`AttachmentId=${_t}`,returnMetadata:!0});return Tt.queryAttachments(Pt).then(Ft=>Ft[Mt][0])}_getFeatureId(){const{_attachmentLayer:_t,graphic:Tt}=this;if(!_t||!Tt)return null;const{objectIdField:Mt}=_t,{attributes:Pt}=Tt;return Pt&&Pt[Mt]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:_t}=this,Tt=j$F(_t);this._attachmentLayer=Tt?Tt.type==="scene"&&r$1P(Tt.associatedLayer)?Tt.associatedLayer:Tt:null}};e$2a([d$25()],f$_.prototype,"abilities",void 0),e$2a([s$23("abilities")],f$_.prototype,"castAbilities",null),e$2a([d$25()],f$_.prototype,"activeAttachmentInfo",void 0),e$2a([d$25({readOnly:!0,type:y$14})],f$_.prototype,"attachmentInfos",void 0),e$2a([d$25({type:g$$})],f$_.prototype,"graphic",void 0),e$2a([d$25()],f$_.prototype,"mode",void 0),e$2a([d$25({readOnly:!0})],f$_.prototype,"state",null),e$2a([d$25({readOnly:!0})],f$_.prototype,"supportsResizeAttachments",null),f$_=e$2a([n$2L("esri.widgets.Attachments.AttachmentsViewModel")],f$_);const g$R=f$_;function e$1g(_t){const Tt=_t.toLowerCase();return Tt==="image/bmp"||Tt==="image/emf"||Tt==="image/exif"||Tt==="image/gif"||Tt==="image/x-icon"||Tt==="image/jpeg"||Tt==="image/png"||Tt==="image/tiff"||Tt==="image/x-wmf"}function p$2e(_t){const Tt=a$2M("esri/themes/base/images/files/");return _t?_t==="text/plain"?`${Tt}text-32.svg`:_t==="application/pdf"?`${Tt}pdf-32.svg`:_t==="text/csv"?`${Tt}csv-32.svg`:_t==="application/gpx+xml"?`${Tt}gpx-32.svg`:_t==="application/x-dwf"?`${Tt}cad-32.svg`:_t==="application/postscript"||_t==="application/json"||_t==="text/xml"||_t==="model/vrml"?`${Tt}code-32.svg`:_t==="application/x-zip-compressed"||_t==="application/x-7z-compressed"||_t==="application/x-gzip"||_t==="application/x-tar"||_t==="application/x-gtar"||_t==="application/x-bzip2"||_t==="application/gzip"||_t==="application/x-compress"||_t==="application/x-apple-diskimage"||_t==="application/x-rar-compressed"||_t==="application/zip"?`${Tt}zip-32.svg`:_t.includes("image/")?`${Tt}image-32.svg`:_t.includes("audio/")?`${Tt}sound-32.svg`:_t.includes("video/")?`${Tt}video-32.svg`:_t.includes("msexcel")||_t.includes("ms-excel")||_t.includes("spreadsheetml")?`${Tt}excel-32.svg`:_t.includes("msword")||_t.includes("ms-word")||_t.includes("wordprocessingml")?`${Tt}word-32.svg`:_t.includes("powerpoint")||_t.includes("presentationml")?`${Tt}report-32.svg`:`${Tt}generic-32.svg`:`${Tt}generic-32.svg`}function e$1f(_t){return(Tt,Mt)=>{Tt.hasOwnProperty("_messageBundleProps")||(Tt._messageBundleProps=Tt._messageBundleProps?Tt._messageBundleProps.slice():[]),Tt._messageBundleProps.push({bundlePath:_t,propertyName:Mt})}}var e$1e=function(_t){return{vnodeSelector:"",properties:void 0,children:void 0,text:_t.toString(),domNode:null}},o$19=function(_t,Tt){for(var Mt=0,Pt=_t.length;Mt<Pt;Mt++){var Ft=_t[Mt];Array.isArray(Ft)?o$19(Ft,Tt):Ft!=null&&Ft!==!1&&(Ft.hasOwnProperty("vnodeSelector")||(Ft=e$1e(Ft)),Tt.push(Ft))}},t$1f=function(_t,Tt){for(var Mt=[],Pt=2;Pt<arguments.length;Pt++)Mt[Pt-2]=arguments[Pt];if(Mt.length===1&&typeof Mt[0]=="string")return{vnodeSelector:_t,properties:Tt||void 0,children:void 0,text:Mt[0],domNode:null};var Ft=[];return o$19(Mt,Ft),{vnodeSelector:_t,properties:Tt||void 0,children:Ft,text:void 0,domNode:null}};function n$1Q(_t,Tt,...Mt){return typeof _t!="function"||a$1Q(_t)?t$1f(_t,Tt,...Mt):_t(Tt,...Mt)}const v$K={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},y$13={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},B$f=window.CSS;let A$g=class extends O$l{constructor(_t,Tt){super(_t,Tt),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new g$R,this.visibleElements={...v$K},this._supportsImageOrientation=B$f&&B$f.supports&&B$f.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own([a$2C(()=>{var _t;return(_t=this.viewModel)==null?void 0:_t.attachmentInfos},"change",()=>this.scheduleRender()),l$2e(()=>{var _t;return(_t=this.viewModel)==null?void 0:_t.mode},()=>this._modeChanged(),h$1w)])}get effectiveDisplayType(){const{displayType:_t}=this;return _t&&_t!=="auto"?_t:this.viewModel.supportsResizeAttachments?"preview":"list"}castVisibleElements(_t){return{...v$K,..._t}}addAttachment(){const{_addAttachmentForm:_t,viewModel:Tt}=this;return this._set("submitting",!0),this._set("error",null),Tt.addAttachment(_t).then(Mt=>(this._set("submitting",!1),this._set("error",null),Tt.mode="view",Mt)).catch(Mt=>{throw this._set("submitting",!1),this._set("error",new s$2i("attachments:add-attachment",this.messages.addErrorMessage,Mt)),Mt})}deleteAttachment(_t){const{viewModel:Tt}=this;return this._set("submitting",!0),this._set("error",null),Tt.deleteAttachment(_t).then(Mt=>(this._set("submitting",!1),this._set("error",null),Tt.mode="view",Mt)).catch(Mt=>{throw this._set("submitting",!1),this._set("error",new s$2i("attachments:delete-attachment",this.messages.deleteErrorMessage,Mt)),Mt})}updateAttachment(){const{viewModel:_t}=this,{_updateAttachmentForm:Tt}=this;return this._set("submitting",!0),this._set("error",null),_t.updateAttachment(Tt).then(Mt=>(this._set("submitting",!1),this._set("error",null),_t.mode="view",Mt)).catch(Mt=>{throw this._set("submitting",!1),this._set("error",new s$2i("attachments:update-attachment",this.messages.updateErrorMessage,Mt)),Mt})}render(){const{submitting:_t,viewModel:Tt}=this,{state:Mt}=Tt;return n$1Q("div",{class:this.classes(y$13.base,y$13.esriWidget)},_t?this.renderProgressBar():null,Mt==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:_t,visibleElements:Tt}=this;return _t&&Tt.errorMessage?n$1Q("div",{key:"error-message",class:y$13.errorMessage},_t.message):null}renderAttachments(){const{mode:_t,activeAttachmentInfo:Tt}=this.viewModel;return _t==="add"?this.renderAddForm():_t==="edit"?this.renderDetailsForm(Tt):this.renderAttachmentContainer()}renderLoading(){return n$1Q("div",{class:y$13.loaderContainer,key:"loader"},n$1Q("div",{class:y$13.loader}))}renderProgressBar(){return this.visibleElements.progressBar?n$1Q("div",{class:y$13.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:_t,selectedFile:Tt}=this,Mt=_t||!Tt,Pt=this.visibleElements.cancelAddButton?n$1Q("button",{type:"button",bind:this,disabled:_t,onclick:this._cancelForm,class:this.classes(y$13.esriButton,y$13.esriButtonTertiary,y$13.esriButtonSmall,y$13.esriButtonHalf,_t&&y$13.buttonDisabled)},this.messages.cancel):null,Ft=this.visibleElements.addSubmitButton?n$1Q("button",{type:"submit",disabled:Mt,class:this.classes(y$13.esriButton,y$13.esriButtonSecondary,y$13.esriButtonSmall,y$13.esriButtonHalf,{[y$13.buttonDisabled]:Mt})},this.messages.add):null,Dt=Tt?n$1Q("span",{key:"file-name",class:y$13.fileName},Tt.name):null,Nt=n$1Q("form",{bind:this,afterCreate:v$N,afterRemoved:h$14,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},n$1Q("fieldset",{class:y$13.fileFieldset},Dt,n$1Q("label",{class:this.classes(y$13.fileLabel,y$13.esriButton,y$13.esriButtonSecondary)},Tt?this.messages.changeFile:this.messages.selectFile,n$1Q("input",{class:y$13.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),Ft,Pt);return n$1Q("div",{key:"add-form-container",class:y$13.formNode},Nt)}renderDetailsForm(_t){const{visibleElements:Tt,viewModel:Mt,selectedFile:Pt,submitting:Ft}=this,{contentType:Dt,size:Nt,url:Vt}=_t,{abilities:zt}=Mt,Xt=Ft||!Pt,Ht=zt.editing&&zt.operations.delete&&Tt.deleteButton?n$1Q("button",{key:"delete-button",type:"button",disabled:Ft,bind:this,onclick:ir=>this._submitDeleteAttachment(ir,_t),class:this.classes(y$13.esriButton,y$13.esriButtonSmall,y$13.esriButtonTertiary,y$13.deleteButton,{[y$13.buttonDisabled]:Ft})},this.messages.delete):null,Wt=zt.editing&&zt.operations.update&&Tt.updateButton?n$1Q("button",{disabled:Xt,key:"update-button",type:"submit",class:this.classes(y$13.esriButton,y$13.esriButtonSmall,y$13.esriButtonThird,{[y$13.buttonDisabled]:Xt})},this.messages.update):null,Qt=this.visibleElements.cancelUpdateButton?n$1Q("button",{disabled:Ft,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(y$13.esriButton,y$13.esriButtonSmall,y$13.esriButtonTertiary,y$13.esriButtonThird,{[y$13.buttonDisabled]:Ft})},this.messages.cancel):null,Zt=Pt?n$1Q("span",{key:"file-name",class:y$13.fileName},Pt.name):null,Kt=zt.editing&&zt.operations.update?n$1Q("fieldset",{key:"file",class:y$13.fileFieldset},Zt,n$1Q("label",{class:this.classes(y$13.fileLabel,y$13.esriButton,y$13.esriButtonSecondary)},this.messages.changeFile,n$1Q("input",{class:y$13.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,er=n$1Q("fieldset",{key:"size",class:y$13.metadataFieldset},n$1Q("label",null,L$m(this.messagesUnits,Nt))),Yt=n$1Q("fieldset",{key:"content-type",class:y$13.metadataFieldset},n$1Q("label",null,Dt)),rr=n$1Q("form",{bind:this,afterCreate:v$N,afterRemoved:h$14,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},n$1Q("div",{class:y$13.metadata},er,Yt),Kt,n$1Q("div",{class:y$13.actions},Ht,Qt,Wt));return n$1Q("div",{key:"edit-form-container",class:y$13.formNode},n$1Q("a",{class:y$13.itemLink,href:Vt,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:_t,size:400}),n$1Q("div",{class:y$13.itemLinkOverlay},n$1Q("span",{class:y$13.itemLinkOverlayIcon},n$1Q("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},n$1Q("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),n$1Q("path",{fill:"none",d:"M0 0h32v32H0z"}))))),rr)}renderImageMask({attachmentInfo:_t,size:Tt}){const{supportsResizeAttachments:Mt}=this.viewModel,{contentType:Pt,name:Ft,url:Dt}=_t,Nt=Mt&&e$1g(Pt),Vt=this._getCSSTransform(_t,Nt),zt=Vt?{transform:Vt,"image-orientation":"none"}:{},Xt=Dt.includes("?")?"&":"?",Ht=Nt?`${Dt}${Xt}w=${Tt}`:p$2e(Pt),Wt={[y$13.itemMaskIcon]:!Nt},Qt={[y$13.itemImageResizable]:Mt};return n$1Q("div",{class:this.classes(Wt,y$13.itemMask)},n$1Q("img",{styles:zt,alt:Ft,src:Ht,class:this.classes(Qt,y$13.itemImage)}))}renderAttachmentInfo({attachmentInfo:_t,displayType:Tt}){const{viewModel:Mt}=this,{abilities:Pt}=Mt,{name:Ft,url:Dt}=_t,Nt=this.renderImageMask({attachmentInfo:_t,size:Tt==="list"?48:400}),Vt=Pt.editing?n$1Q("span",{"aria-hidden":"true",class:this.classes(y$13.itemChevronIcon,f$10(this.container)?y$13.iconLeft:y$13.iconRight)}):null,zt=[Nt,n$1Q("label",{class:y$13.itemLabel},n$1Q("span",{class:y$13.itemFilename},Ft||this.messages.noTitle),Vt)],Xt=Pt.editing?n$1Q("button",{key:"details-button",bind:this,class:y$13.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":_t.id,onclick:()=>this._startEditAttachment(_t),type:"button"},zt):n$1Q("a",{key:"details-link",class:y$13.itemButton,href:Dt,target:"_blank"},zt);return n$1Q("li",{class:y$13.item,key:_t},Xt)}renderAttachmentContainer(){const{effectiveDisplayType:_t,viewModel:Tt,visibleElements:Mt}=this,{attachmentInfos:Pt,abilities:Ft}=Tt,Dt=Pt&&Pt.length,Nt={[y$13.containerList]:_t!=="preview",[y$13.containerPreview]:_t==="preview"},Vt=Ft.editing&&Ft.operations.add&&Mt.addButton?n$1Q("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(y$13.esriButton,y$13.esriButtonTertiary,y$13.addAttachmentButton),type:"button"},n$1Q("span",{"aria-hidden":"true",class:this.classes(y$13.itemAddIcon,y$13.iconPlus)}),this.messages.add):null,zt=Dt?n$1Q("ul",{class:y$13.items},Pt.toArray().map(Xt=>this.renderAttachmentInfo({attachmentInfo:Xt,displayType:_t}))):n$1Q("div",{class:y$13.empty},this.messages.noAttachments);return n$1Q("div",{key:"attachments-container",class:this.classes(y$13.container,Nt)},zt,Vt)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(_t){const Tt=_t.target,Mt=Tt&&Tt.files&&Tt.files.item(0);this._set("selectedFile",Mt)}_submitDeleteAttachment(_t,Tt){_t.preventDefault(),this.deleteAttachment(Tt)}_submitAddAttachment(_t){_t.preventDefault(),this.addAttachment()}_submitUpdateAttachment(_t){_t.preventDefault(),this.updateAttachment()}_startEditAttachment(_t){const{viewModel:Tt}=this;Tt.activeAttachmentInfo=_t,Tt.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(_t){_t.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(_t,Tt){const{orientationInfo:Mt}=_t;return!this._supportsImageOrientation&&Tt&&Mt?[Mt.rotation?`rotate(${Mt.rotation}deg)`:"",Mt.mirrored?"scaleX(-1)":""].join(" "):""}};e$2a([o$1d("viewModel.abilities")],A$g.prototype,"abilities",void 0),e$2a([d$25()],A$g.prototype,"displayType",void 0),e$2a([d$25({readOnly:!0})],A$g.prototype,"effectiveDisplayType",null),e$2a([o$1d("viewModel.graphic")],A$g.prototype,"graphic",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],A$g.prototype,"label",void 0),e$2a([d$25(),e$1f("esri/widgets/Attachments/t9n/Attachments")],A$g.prototype,"messages",void 0),e$2a([d$25(),e$1f("esri/core/t9n/Units")],A$g.prototype,"messagesUnits",void 0),e$2a([d$25({readOnly:!0})],A$g.prototype,"selectedFile",void 0),e$2a([d$25({readOnly:!0})],A$g.prototype,"submitting",void 0),e$2a([d$25({readOnly:!0})],A$g.prototype,"error",void 0),e$2a([d$25({type:g$R})],A$g.prototype,"viewModel",void 0),e$2a([d$25()],A$g.prototype,"visibleElements",void 0),e$2a([s$23("visibleElements")],A$g.prototype,"castVisibleElements",null),A$g=e$2a([n$2L("esri.widgets.Attachments")],A$g);const w$H=A$g;let o$18=class extends g$R{constructor(_t){super(_t),this.description=null,this.title=null}};e$2a([d$25()],o$18.prototype,"description",void 0),e$2a([d$25()],o$18.prototype,"title",void 0),o$18=e$2a([n$2L("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],o$18);const c$23=o$18,i$1I={heading:"esri-widget__heading"};function n$1P(_t,Tt){const Mt=o$17(_t.level),Pt=`h${Mt}`;return delete _t.level,n$1Q(Pt,{..._t,class:p$2l(i$1I.heading,_t.class),role:"heading","aria-level":String(Mt)},Tt)}function o$17(_t){return o$1H(Math.ceil(_t),1,6)}function l$1t(_t,Tt=1){return o$17(_t+Tt)}const p$2d={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let n$1O=class extends O$l{constructor(_t,Tt){super(_t,Tt),this.description=null,this.headingLevel=2,this.title=null}render(){return n$1Q("div",{class:p$2d.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:_t}=this;return _t?n$1Q(n$1P,{level:this.headingLevel,class:p$2d.title},_t):null}renderDescription(){const{description:_t}=this;return _t?n$1Q("div",{key:"description",class:p$2d.description},_t):null}};e$2a([d$25()],n$1O.prototype,"description",void 0),e$2a([d$25()],n$1O.prototype,"headingLevel",void 0),e$2a([d$25()],n$1O.prototype,"title",void 0),n$1O=e$2a([n$2L("esri.widgets.Feature.support.FeatureElementInfo")],n$1O);const c$22=n$1O,d$1i={base:"esri-feature-attachments"};let h$$=class extends O$l{constructor(_t,Tt){super(_t,Tt),this._featureElementInfo=null,this.attachmentsWidget=new w$H,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new c$23}initialize(){this._featureElementInfo=new c$22,this.own([l$2e(()=>{var _t,Tt;return[(_t=this.viewModel)==null?void 0:_t.description,(Tt=this.viewModel)==null?void 0:Tt.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),h$1w),l$2e(()=>{var _t;return(_t=this.viewModel)==null?void 0:_t.graphic},_t=>this.attachmentsWidget.graphic=_t,h$1w)])}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var Tt;const{attachmentsWidget:_t}=this;return n$1Q("div",{class:d$1i.base},(Tt=this._featureElementInfo)==null?void 0:Tt.render(),_t==null?void 0:_t.render())}_setupFeatureElementInfo(){const{description:_t,title:Tt,headingLevel:Mt}=this;this._featureElementInfo.set({description:_t,title:Tt,headingLevel:Mt})}};e$2a([d$25({readOnly:!0})],h$$.prototype,"attachmentsWidget",void 0),e$2a([o$1d("viewModel.description")],h$$.prototype,"description",void 0),e$2a([o$1d("attachmentsWidget.displayType")],h$$.prototype,"displayType",void 0),e$2a([o$1d("viewModel.graphic")],h$$.prototype,"graphic",void 0),e$2a([d$25()],h$$.prototype,"headingLevel",void 0),e$2a([o$1d("viewModel.title")],h$$.prototype,"title",void 0),e$2a([d$25({type:c$23})],h$$.prototype,"viewModel",void 0),h$$=e$2a([n$2L("esri.widgets.Feature.FeatureAttachments")],h$$);const m$1j=h$$;let p$2c=class extends a$2B(y$1E){constructor(_t){super(_t),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(l$2e(()=>this.creator,Tt=>{this._destroyContent(),this._createContent(Tt)},h$1w))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:_t,graphic:Tt,destroyer:Mt}=this;_t&&(x$z(Mt,{graphic:Tt}).catch(()=>null),this._set("created",null))}async _createContent(_t){const{graphic:Tt}=this,Mt=x$z(_t,{graphic:Tt}).catch(()=>null);this._loadingPromise=Mt,this.notifyChange("state");const Pt=await Mt;Mt===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",Pt))}};e$2a([d$25({readOnly:!0})],p$2c.prototype,"created",void 0),e$2a([d$25()],p$2c.prototype,"creator",void 0),e$2a([d$25()],p$2c.prototype,"destroyer",void 0),e$2a([d$25({type:g$$})],p$2c.prototype,"graphic",void 0),e$2a([d$25({readOnly:!0})],p$2c.prototype,"state",null),p$2c=e$2a([n$2L("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],p$2c);const l$1s=p$2c;function t$1e(){return function(_t,Tt){if(!_t[Tt])throw new TypeError(`Cannot auto bind undefined function '${Tt}'`);return{value:o$16(_t[Tt])}}}function e$1d(_t){const{type:Tt}=_t;return _t instanceof KeyboardEvent||Tt==="keyup"||Tt==="keydown"||Tt==="keypress"}function o$16(_t){return function(Tt,...Mt){e$1d(Tt)?k$m(Tt.key)&&(Tt.preventDefault(),Tt.stopPropagation(),Tt.target.click()):_t.call(this,Tt,...Mt)}}function n$1N(_t){return _t.split(",").map(Tt=>Tt.trim())}function t$1d(_t){return Tt=>{Tt.hasOwnProperty("_delegatedEventNames")||(Tt._delegatedEventNames=Tt._delegatedEventNames?Tt._delegatedEventNames.slice():[]);const Mt=Tt._delegatedEventNames,Pt=Array.isArray(_t)?_t:n$1N(_t);Mt.push(...Pt)}}const t$1c="calcite-theme-";function e$1c(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function r$10(){return e$1c().startsWith("dark")}function c$21(){return`${t$1c}${r$10()?"dark":"light"}`}function n$1M(_t){s$1k(_t),_t.classList.add(c$21())}function s$1k(_t){Array.from(_t.classList).forEach(Tt=>{Tt.startsWith(t$1c)&&_t.classList.remove(Tt)})}function e$1b(_t){return _t&&typeof _t.render=="function"}function t$1b(_t){return _t&&typeof _t.postMixInProperties=="function"&&typeof _t.buildRendering=="function"&&typeof _t.postCreate=="function"&&typeof _t.startup=="function"}const c$20={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let p$2b=class extends O$l{constructor(_t,Tt){super(_t,Tt),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=Mt=>{Array.from(Mt.querySelectorAll("a")).forEach(Pt=>{T$m(Pt.href)&&!Pt.hasAttribute("target")&&Pt.setAttribute("target","_blank")})}}renderLoading(){return n$1Q("div",{class:c$20.loaderContainer,key:"loader"},n$1Q("div",{class:c$20.loader}))}renderCreated(){var Tt;const _t=(Tt=this.viewModel)==null?void 0:Tt.created;return _t?_t instanceof HTMLElement?n$1Q("div",{key:_t,bind:_t,afterCreate:this._attachToNode}):e$1b(_t)?n$1Q("div",{key:_t},!_t.destroyed&&_t.render()):n$1Q("div",{key:_t,innerHTML:_t,afterCreate:this._addTargetToAnchors}):null}render(){var Tt;const _t=(Tt=this.viewModel)==null?void 0:Tt.state;return n$1Q("div",{class:c$20.base},_t==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(_t){const Tt=this;_t.appendChild(Tt)}};e$2a([o$1d("viewModel.creator")],p$2b.prototype,"creator",void 0),e$2a([o$1d("viewModel.graphic")],p$2b.prototype,"graphic",void 0),e$2a([d$25({type:l$1s})],p$2b.prototype,"viewModel",void 0),p$2b=e$2a([n$2L("esri.widgets.Feature.FeatureContent")],p$2b);const l$1r=p$2b;let l$1q=class extends y$1E{constructor(_t){super(_t),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:_t,fieldInfos:Tt}=this,Mt=[];return Tt==null||Tt.forEach(Pt=>{if(!(!Pt.hasOwnProperty("visible")||Pt.visible))return;const Ft=Pt.clone();Ft.label=q$e(Ft,_t),Mt.push(Ft)}),Mt}};e$2a([d$25()],l$1q.prototype,"attributes",void 0),e$2a([d$25({type:[i$25]})],l$1q.prototype,"expressionInfos",void 0),e$2a([d$25()],l$1q.prototype,"description",void 0),e$2a([d$25({type:[c$2N]})],l$1q.prototype,"fieldInfos",void 0),e$2a([d$25({readOnly:!0})],l$1q.prototype,"formattedFieldInfos",null),e$2a([d$25()],l$1q.prototype,"title",void 0),l$1q=e$2a([n$2L("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],l$1q);const n$1L=l$1q,s$1j=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function a$1N(_t){let Tt=null;return s$1j.some(Mt=>(Mt.pattern.test(_t)&&(Tt=Mt),!!Tt)),Tt}function p$2a(_t,Tt){if(typeof Tt!="string"||!Tt)return Tt;const Mt=a$1N(Tt);if(!Mt)return Tt;const Pt=Tt.match(Mt.pattern),Ft=Pt&&Pt[2],Dt=r$1L(r$1L(Mt.label,{messages:_t,hierPart:Ft}),{appName:Mt.appName}),Nt=Mt.target?` target="${Mt.target}"`:"",Vt=Mt.target==="_blank"?' rel="noreferrer"':"";return Tt.replace(Mt.pattern,`<a${Nt} href="$1"${Vt}>${Dt}</a>`)}const u$1f={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let m$1i=class extends O$l{constructor(_t,Tt){super(_t,Tt),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new n$1L,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new c$22,this.own(l$2e(()=>{var _t,Tt;return[(_t=this.viewModel)==null?void 0:_t.description,(Tt=this.viewModel)==null?void 0:Tt.title]},()=>this._setupFeatureElementInfo(),h$1w))}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(_t,Tt){const{attributes:Mt}=this.viewModel,Pt=_t.fieldName,Ft=_t.label||Pt,Dt=Mt?Mt[Pt]==null?"":Mt[Pt]:"",Nt=!(!_t.format||!_t.format.dateFormat),Vt=typeof Dt=="number"&&!Nt?this._forceLTR(Dt):p$2a(this.messagesURIUtils,Dt),zt={[u$1f.fieldDataDate]:Nt};return n$1Q("tr",{key:`fields-element-info-row-${Pt}-${Tt}`},n$1Q("th",{key:`fields-element-info-row-header-${Pt}-${Tt}`,class:u$1f.fieldHeader,innerHTML:Ft}),n$1Q("td",{key:`fields-element-info-row-data-${Pt}-${Tt}`,class:this.classes(u$1f.fieldData,zt),innerHTML:Vt}))}renderFields(){const{formattedFieldInfos:_t}=this.viewModel;return _t!=null&&_t.length?n$1Q("table",{class:u$1f.esriTable,summary:this.messages.fieldsSummary},n$1Q("tbody",null,_t.map((Tt,Mt)=>this.renderFieldInfo(Tt,Mt)))):null}render(){var _t;return n$1Q("div",{class:u$1f.base},(_t=this._featureElementInfo)==null?void 0:_t.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:_t,title:Tt}=this;this._featureElementInfo.set({description:_t,title:Tt})}_forceLTR(_t){return`&lrm;${_t}`}};e$2a([o$1d("viewModel.attributes")],m$1i.prototype,"attributes",void 0),e$2a([o$1d("viewModel.description")],m$1i.prototype,"description",void 0),e$2a([o$1d("viewModel.expressionInfos")],m$1i.prototype,"expressionInfos",void 0),e$2a([o$1d("viewModel.fieldInfos")],m$1i.prototype,"fieldInfos",void 0),e$2a([o$1d("viewModel.title")],m$1i.prototype,"title",void 0),e$2a([d$25({type:n$1L})],m$1i.prototype,"viewModel",void 0),e$2a([d$25(),e$1f("esri/widgets/Feature/t9n/Feature")],m$1i.prototype,"messages",void 0),e$2a([d$25(),e$1f("esri/widgets/support/t9n/uriUtils")],m$1i.prototype,"messagesURIUtils",void 0),m$1i=e$2a([n$2L("esri.widgets.Feature.FeatureFields")],m$1i);const c$1$=m$1i,n$1K=/^-?(\d+)(\.(\d+))?$/i;function e$1a(_t,Tt){return _t-Tt}function r$$(_t,Tt){let Mt,Pt;return Mt=Number(_t.toFixed(Tt)),Mt<_t?Pt=Mt+1/10**Tt:(Pt=Mt,Mt-=1/10**Tt),Mt=Number(Mt.toFixed(Tt)),Pt=Number(Pt.toFixed(Tt)),[Mt,Pt]}function o$15(_t,Tt,Mt,Pt,Ft){const Dt=l$1p(_t,Tt,Mt,Pt),Nt=Dt.previous==null||Dt.previous<=Ft,Vt=Dt.next==null||Dt.next<=Ft;return Nt&&Vt||Dt.previous+Dt.next<=2*Ft}function i$1H(_t){const Tt=String(_t),Mt=Tt.match(n$1K);if(Mt&&Mt[1])return{integer:Mt[1].split("").length,fractional:Mt[3]?Mt[3].split("").length:0};if(Tt.toLowerCase().includes("e")){const Pt=Tt.split("e"),Ft=Pt[0],Dt=Pt[1];if(Ft&&Dt){const Nt=Number(Ft);let Vt=Number(Dt);const zt=Vt>0;zt||(Vt=Math.abs(Vt));const Xt=i$1H(Nt);return zt?(Xt.integer+=Vt,Vt>Xt.fractional?Xt.fractional=0:Xt.fractional-=Vt):(Xt.fractional+=Vt,Vt>Xt.integer?Xt.integer=1:Xt.integer-=Vt),Xt}}return{integer:0,fractional:0}}function l$1p(_t,Tt,Mt,Pt){const Ft={previous:null,next:null};if(Mt!=null){const Dt=_t-Mt,Nt=Tt-Mt-Dt;Ft.previous=Math.floor(Math.abs(100*Nt/Dt))}if(Pt!=null){const Dt=Pt-_t,Nt=Pt-Tt-Dt;Ft.next=Math.floor(Math.abs(100*Nt/Dt))}return Ft}function u$1e(_t,Tt={}){const Mt=_t.slice(0),{tolerance:Pt=2,strictBounds:Ft=!1,indexes:Dt=Mt.map((Nt,Vt)=>Vt)}=Tt;Dt.sort(e$1a);for(let Nt=0;Nt<Dt.length;Nt++){const Vt=Dt[Nt],zt=Mt[Vt],Xt=Vt===0?null:Mt[Vt-1],Ht=Vt===Mt.length-1?null:Mt[Vt+1],Wt=i$1H(zt).fractional;if(Wt){let Qt,Zt=0,Kt=!1;for(;Zt<=Wt&&!Kt;){const er=r$$(zt,Zt);Qt=Ft&&Nt===0?er[1]:er[0],Kt=o$15(zt,Qt,Xt,Ht,Pt),Zt++}Kt&&(Mt[Vt]=Qt)}}return Mt}const s$1i={maximumFractionDigits:20};function c$1_(_t){return m$1N(_t,s$1i)}var i$1G;let c$1Z=i$1G=class extends l$2v{constructor(_t){super(_t),this.color=null,this.label=null,this.value=null}writeValue(_t,Tt,Mt){Tt[Mt]=_t==null?0:_t}clone(){return new i$1G({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};e$2a([d$25({type:l$2f,json:{type:[S$Q],write:!0}})],c$1Z.prototype,"color",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$1Z.prototype,"label",void 0),e$2a([d$25({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],c$1Z.prototype,"value",void 0),e$2a([r$1C("value")],c$1Z.prototype,"writeValue",null),c$1Z=i$1G=e$2a([n$2L("esri.renderers.visualVariables.support.ColorStop")],c$1Z);const a$1M=c$1Z;function e$19(){const _t=new Float32Array(16);return _t[0]=1,_t[5]=1,_t[10]=1,_t[15]=1,_t}function r$_(_t){const Tt=new Float32Array(16);return Tt[0]=_t[0],Tt[1]=_t[1],Tt[2]=_t[2],Tt[3]=_t[3],Tt[4]=_t[4],Tt[5]=_t[5],Tt[6]=_t[6],Tt[7]=_t[7],Tt[8]=_t[8],Tt[9]=_t[9],Tt[10]=_t[10],Tt[11]=_t[11],Tt[12]=_t[12],Tt[13]=_t[13],Tt[14]=_t[14],Tt[15]=_t[15],Tt}function t$1a(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt,Qt,Zt,Kt,er){const Yt=new Float32Array(16);return Yt[0]=_t,Yt[1]=Tt,Yt[2]=Mt,Yt[3]=Pt,Yt[4]=Ft,Yt[5]=Dt,Yt[6]=Nt,Yt[7]=Vt,Yt[8]=zt,Yt[9]=Xt,Yt[10]=Ht,Yt[11]=Wt,Yt[12]=Qt,Yt[13]=Zt,Yt[14]=Kt,Yt[15]=er,Yt}function n$1J(_t,Tt){return new Float32Array(_t,Tt,16)}const o$14=e$19();Object.freeze(Object.defineProperty({__proto__:null,create:e$19,clone:r$_,fromValues:t$1a,createView:n$1J,IDENTITY:o$14},Symbol.toStringTag,{value:"Module"}));const r$Z=(_t,Tt)=>{const Mt=s$1v(_t,Tt,0,0,0,0,Tt,0,0,0,0,Tt,0,0,0,0,1);return o$1m(Mt,Mt)},s$1h=(_t,Tt)=>{const Mt=s$1v(_t,Tt,0,0,.5-.5*Tt,0,Tt,0,.5-.5*Tt,0,0,Tt,.5-.5*Tt,0,0,0,1);return o$1m(Mt,Mt)},o$13=(_t,Tt)=>{const Mt=1-Tt,Pt=s$1v(_t,.2126+.7874*Mt,.7152-.7152*Mt,.0722-.0722*Mt,0,.2126-.2126*Mt,.7152+.2848*Mt,.0722-.0722*Mt,0,.2126-.2126*Mt,.7152-.7152*Mt,.0722+.9278*Mt,0,0,0,0,1);return o$1m(Pt,Pt)},c$1Y=(_t,Tt)=>{const Mt=Math.sin(Tt*Math.PI/180),Pt=Math.cos(Tt*Math.PI/180),Ft=s$1v(_t,.213+.787*Pt-.213*Mt,.715-.715*Pt-.715*Mt,.072-.072*Pt+.928*Mt,0,.213-.213*Pt+.143*Mt,.715+.285*Pt+.14*Mt,.072-.072*Pt-.283*Mt,0,.213-.213*Pt-.787*Mt,.715-.715*Pt+.715*Mt,.072+.928*Pt+.072*Mt,0,0,0,0,1);return o$1m(Ft,Ft)},e$18=(_t,Tt)=>{const Mt=1-2*Tt,Pt=s$1v(_t,Mt,0,0,Tt,0,Mt,0,Tt,0,0,Mt,Tt,0,0,0,1);return o$1m(Pt,Pt)},u$1d=(_t,Tt)=>{const Mt=s$1v(_t,.213+.787*Tt,.715-.715*Tt,.072-.072*Tt,0,.213-.213*Tt,.715+.285*Tt,.072-.072*Tt,0,.213-.213*Tt,.715-.715*Tt,.072+.928*Tt,0,0,0,0,1);return o$1m(Mt,Mt)},a$1L=(_t,Tt)=>{const Mt=1-Tt,Pt=s$1v(_t,.393+.607*Mt,.769-.769*Mt,.189-.189*Mt,0,.349-.349*Mt,.686+.314*Mt,.168-.168*Mt,0,.272-.272*Mt,.534-.534*Mt,.131+.869*Mt,0,0,0,0,1);return o$1m(Pt,Pt)};class l$1o{constructor(Tt,Mt,Pt){this.strength=Tt,this.radius=Mt,this.threshold=Pt,this.type="bloom"}interpolate(Tt,Mt,Pt){this.strength=y$12(Tt.strength,Mt.strength,Pt),this.radius=y$12(Tt.radius,Mt.radius,Pt),this.threshold=y$12(Tt.threshold,Mt.threshold,Pt)}clone(){return new l$1o(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:x$y(this.radius),strength:this.strength,threshold:this.threshold}}}class p$29{constructor(Tt){this.radius=Tt,this.type="blur"}interpolate(Tt,Mt,Pt){this.radius=Math.round(y$12(Tt.radius,Mt.radius,Pt))}clone(){return new p$29(this.radius)}toJSON(){return{type:"blur",radius:x$y(this.radius)}}}class d$1h{constructor(Tt,Mt){this.type=Tt,this.amount=Mt,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(Tt,Mt,Pt){this.amount=y$12(Tt.amount,Mt.amount,Pt),this._updateMatrix()}clone(){return new d$1h(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const Tt=this._colorMatrix||e$19();switch(this.type){case"brightness":this._colorMatrix=r$Z(Tt,this.amount);break;case"contrast":this._colorMatrix=s$1h(Tt,this.amount);break;case"grayscale":this._colorMatrix=o$13(Tt,this.amount);break;case"invert":this._colorMatrix=e$18(Tt,this.amount);break;case"saturate":this._colorMatrix=u$1d(Tt,this.amount);break;case"sepia":this._colorMatrix=a$1L(Tt,this.amount)}}}class m$1h{constructor(Tt,Mt,Pt,Ft){this.offsetX=Tt,this.offsetY=Mt,this.blurRadius=Pt,this.color=Ft,this.type="drop-shadow"}interpolate(Tt,Mt,Pt){this.offsetX=y$12(Tt.offsetX,Mt.offsetX,Pt),this.offsetY=y$12(Tt.offsetY,Mt.offsetY,Pt),this.blurRadius=y$12(Tt.blurRadius,Mt.blurRadius,Pt),this.color[0]=Math.round(y$12(Tt.color[0],Mt.color[0],Pt)),this.color[1]=Math.round(y$12(Tt.color[1],Mt.color[1],Pt)),this.color[2]=Math.round(y$12(Tt.color[2],Mt.color[2],Pt)),this.color[3]=y$12(Tt.color[3],Mt.color[3],Pt)}clone(){return new m$1h(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const Tt=[...this.color];return Tt[3]*=255,{type:"drop-shadow",xoffset:x$y(this.offsetX),yoffset:x$y(this.offsetY),blurRadius:x$y(this.blurRadius),color:Tt}}}class f$Z{constructor(Tt){this.angle=Tt,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(Tt,Mt,Pt){this.angle=y$12(Tt.angle,Mt.angle,Pt),this._updateMatrix()}clone(){return new f$Z(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const Tt=this._colorMatrix||e$19();this._colorMatrix=c$1Y(Tt,this.angle)}}class M$u{constructor(Tt){this.amount=Tt,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(Tt,Mt,Pt){this.amount=y$12(Tt.amount,Mt.amount,Pt)}clone(){return new M$u(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function y$12(_t,Tt,Mt){return _t+(Tt-_t)*Mt}function x$y(_t){return Math.round(1e3*e$1y(_t))/1e3}function g$Q(_t){switch(_t.type){case"grayscale":case"sepia":case"invert":return new d$1h(_t.type,0);case"saturate":case"brightness":case"contrast":return new d$1h(_t.type,1);case"opacity":return new M$u(1);case"hue-rotate":return new f$Z(0);case"blur":return new p$29(0);case"drop-shadow":return new m$1h(0,0,0,[...l$2k("transparent")]);case"bloom":return new l$1o(0,0,1)}}function n$1I(_t,Tt){const Mt=_t.length>Tt.length?_t:Tt;return(_t.length>Tt.length?Tt:_t).every((Pt,Ft)=>Pt.type===Mt[Ft].type)}function e$17(_t,Tt){const Mt=_t.length>Tt.length?_t:Tt,Pt=_t.length>Tt.length?Tt:_t;for(let Ft=Pt.length;Ft<Mt.length;Ft++)Pt.push(g$Q(Mt[Ft]))}function h$_(_t){const Tt=_t[0];return!!Tt&&"type"in Tt}var m$1g,g$P,v$J={exports:{}};function d$1g(_t){if(!_t||_t.length===0)return null;if(typeof _t=="string"){const Mt=y$11(_t);return Mt&&Mt.length!==0?Mt:null}const Tt=_t.map(Mt=>{if(!Number.isFinite(Mt.scale)||Mt.scale<=0)throw new s$2i("effect:invalid-scale","scale must be finite and greater than 0",{stop:Mt});return{scale:Mt.scale,effects:y$11(Mt.value)}});Tt.sort((Mt,Pt)=>Pt.effects.length-Mt.effects.length);for(let Mt=0;Mt<Tt.length-1;Mt++){if(!n$1I(Tt[Mt].effects,Tt[Mt+1].effects))throw new s$2i("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:Tt[Mt].effects,b:Tt[Mt+1].effects});e$17(Tt[Mt].effects,Tt[Mt+1].effects)}return Tt.sort((Mt,Pt)=>Pt.scale-Mt.scale),Tt}function y$11(_t){let Tt;if(!_t)return[];try{Tt=v$J.exports.parse(_t)}catch(Mt){throw new s$2i("effect:invalid-syntax","Invalid effect syntax",{value:_t,error:Mt})}return Tt.map(Mt=>A$f(Mt))}function A$f(_t){try{switch(_t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return w$G(_t);case"opacity":return x$x(_t);case"hue-rotate":return b$N(_t);case"blur":return C$j(_t);case"drop-shadow":return F$m(_t);case"bloom":return E$t(_t)}}catch(Tt){throw Tt.details.filter=_t,Tt}throw new s$2i("effect:unknown-effect",`Effect '${_t.name}' is not supported`,{effect:_t})}function w$G(_t){let Tt=1;return j$E(_t.parameters,1),_t.parameters.length===1&&(Tt=M$t(_t.parameters[0])),new d$1h(_t.name,Tt)}function x$x(_t){let Tt=1;return j$E(_t.parameters,1),_t.parameters.length===1&&(Tt=M$t(_t.parameters[0])),new M$u(Tt)}function b$N(_t){let Tt=0;return j$E(_t.parameters,1),_t.parameters.length===1&&(Tt=N$j(_t.parameters[0])),new f$Z(Tt)}function C$j(_t){let Tt=0;return j$E(_t.parameters,1),_t.parameters.length===1&&(Tt=T$l(_t.parameters[0]),O$j(Tt,_t.parameters[0])),new p$29(Tt)}function F$m(_t){const Tt=[];let Mt=null;for(const Pt of _t.parameters)if(Pt.type==="color"){if(Tt.length&&Object.freeze(Tt),Mt)throw new s$2i("effect:type-error","Accepts only one color",{});Mt=U$m(Pt)}else{const Ft=T$l(Pt);if(Object.isFrozen(Tt))throw new s$2i("effect:type-error","<length> parameters not consecutive",{lengths:Tt});Tt.push(Ft),Tt.length===3&&O$j(Ft,Pt)}if(Tt.length<2||Tt.length>3)throw new s$2i("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${Tt.length}}`,{lengths:Tt});return new m$1h(Tt[0],Tt[1],Tt[2]||0,Mt||H$a("black"))}function E$t(_t){let Tt=1,Mt=0,Pt=0;return j$E(_t.parameters,3),_t.parameters[0]&&(Tt=M$t(_t.parameters[0])),_t.parameters[1]&&(Mt=T$l(_t.parameters[1]),O$j(Mt,_t.parameters[1])),_t.parameters[2]&&(Pt=M$t(_t.parameters[2])),new l$1o(Tt,Mt,Pt)}function j$E(_t,Tt){if(_t.length>Tt)throw new s$2i("effect:type-error",`Function supports up to ${Tt} parameters, Actual: ${_t.length}`,{parameters:_t})}function $$a(_t){if(_t.type==="color")return"<color>";if(_t.unit){if(R$j[_t.unit])return"<length>";if(S$t[_t.unit])return"<angle>";if(_t.unit==="%")return"<percentage>"}return"<double>"}function O$j(_t,Tt){if(_t<0)throw new s$2i("effect:type-error",`Negative values are not allowed, Actual: ${_t}`,{term:Tt})}function k$j(_t){if(_t.type!=="quantity"||_t.unit!==null)throw new s$2i("effect:type-error",`Expected <double>, Actual: ${$$a(_t)}`,{term:_t})}function q$d(_t){if(_t.type!=="quantity"||_t.unit!==null&&_t.unit!=="%")throw new s$2i("effect:type-error",`Expected <double> or <percentage>, Actual: ${$$a(_t)}`,{term:_t})}g$P=function(){function _t(Ft,Dt){function Nt(){this.constructor=Ft}Nt.prototype=Dt.prototype,Ft.prototype=new Nt}function Tt(Ft,Dt,Nt,Vt){var zt=Error.call(this,Ft);return Object.setPrototypeOf&&Object.setPrototypeOf(zt,Tt.prototype),zt.expected=Dt,zt.found=Nt,zt.location=Vt,zt.name="SyntaxError",zt}function Mt(Ft,Dt,Nt){return Nt=Nt||" ",Ft.length>Dt?Ft:(Dt-=Ft.length,Ft+(Nt+=Nt.repeat(Dt)).slice(0,Dt))}function Pt(Ft,Dt){var Nt,Vt={},zt=(Dt=Dt!==void 0?Dt:{}).grammarSource,Xt={start:js},Ht=js,Wt="none",Qt=")",Zt=",",Kt="(",er="%",Yt="px",rr="cm",ir="mm",nr="in",ar="pt",or="pc",ur="deg",dr="rad",hr="grad",gr="turn",pr="#",mr=".",wr="e",br=/^[ \t\n\r]/,_r=/^[a-z\-]/,Mr=/^[0-9a-fA-F]/,Ar=/^[+\-]/,xr=/^[0-9]/,yr=ps("none"),Er=xn("none",!1),Cr=xn(")",!1),Dr=xn(",",!1),jr=ps("whitespace"),Hr=_s([" ","	",`
`,"\r"],!1,!1),zr=ps("function"),Qr=xn("(",!1),Xr=ps("identifier"),Br=_s([["a","z"],"-"],!1,!1),Ur=ps("percentage"),Jr=xn("%",!1),Zr=ps("length"),pn=xn("px",!1),_i=xn("cm",!1),Rr=xn("mm",!1),Mn=xn("in",!1),ls=xn("pt",!1),us=xn("pc",!1),ss=ps("angle"),kn=xn("deg",!1),In=xn("rad",!1),_n=xn("grad",!1),Cn=xn("turn",!1),jn=ps("number"),ts=ps("color"),ds=xn("#",!1),es=_s([["0","9"],["a","f"],["A","F"]],!1,!1),hs=_s(["+","-"],!1,!1),rs=_s([["0","9"]],!1,!1),ys=xn(".",!1),gs=xn("e",!1),Ls=function(){return[]},Ks=function(vr,kr){return{type:"function",name:vr,parameters:kr||[]}},Ys=function(vr,kr){return kr.length>0?Io(vr,kr,3):[vr]},eo=function(vr){return{type:"quantity",value:vr.value,unit:vr.unit}},Os=function(vr){return{type:"color",colorType:vr.type,value:vr.value}},to=function(vr){return vr},ro=function(){return vs()},io=function(vr){return{value:vr,unit:"%"}},no=function(vr){return{value:vr,unit:"px"}},Fs=function(vr){return{value:vr,unit:"cm"}},so=function(vr){return{value:vr,unit:"mm"}},Rs=function(vr){return{value:vr,unit:"in"}},oo=function(vr){return{value:vr,unit:"pt"}},ao=function(vr){return{value:vr,unit:"pc"}},lo=function(vr){return{value:vr,unit:"deg"}},uo=function(vr){return{value:vr,unit:"rad"}},co=function(vr){return{value:vr,unit:"grad"}},ho=function(vr){return{value:vr,unit:"turn"}},Ts=function(vr){return{value:vr,unit:null}},Ms=function(){return{type:"hex",value:vs()}},po=function(vr){return{type:"function",value:vr}},$o=function(){return{type:"named",value:vs()}},fo=function(){return parseFloat(vs())},Sr=0,Yr=0,bs=[{line:1,column:1}],cs=0,Is=[],Fr=0;if("startRule"in Dt){if(!(Dt.startRule in Xt))throw new Error(`Can't start parsing from rule "`+Dt.startRule+'".');Ht=Xt[Dt.startRule]}function vs(){return Ft.substring(Yr,Sr)}function xn(vr,kr){return{type:"literal",text:vr,ignoreCase:kr}}function _s(vr,kr,Pr){return{type:"class",parts:vr,inverted:kr,ignoreCase:Pr}}function mo(){return{type:"end"}}function ps(vr){return{type:"other",description:vr}}function Ds(vr){var kr,Pr=bs[vr];if(Pr)return Pr;for(kr=vr-1;!bs[kr];)kr--;for(Pr={line:(Pr=bs[kr]).line,column:Pr.column};kr<vr;)Ft.charCodeAt(kr)===10?(Pr.line++,Pr.column=1):Pr.column++,kr++;return bs[vr]=Pr,Pr}function Ns(vr,kr){var Pr=Ds(vr),Gr=Ds(kr);return{source:zt,start:{offset:vr,line:Pr.line,column:Pr.column},end:{offset:kr,line:Gr.line,column:Gr.column}}}function Vr(vr){Sr<cs||(Sr>cs&&(cs=Sr,Is=[]),Is.push(vr))}function yo(vr,kr,Pr){return new Tt(Tt.buildMessage(vr,kr),vr,kr,Pr)}function js(){var vr;return(vr=go())===Vt&&(vr=vo()),vr}function go(){var vr,kr;return Fr++,vr=Sr,En(),Ft.substr(Sr,4)===Wt?(kr=Wt,Sr+=4):(kr=Vt,Fr===0&&Vr(Er)),kr!==Vt?(En(),Yr=vr,vr=Ls()):(Sr=vr,vr=Vt),Fr--,vr===Vt&&Fr===0&&Vr(yr),vr}function vo(){var vr,kr;if(vr=[],(kr=ks())!==Vt)for(;kr!==Vt;)vr.push(kr),kr=ks();else vr=Vt;return vr}function ks(){var vr,kr,Pr,Gr;return vr=Sr,En(),(kr=wo())!==Vt?(En(),(Pr=_o())===Vt&&(Pr=null),En(),Ft.charCodeAt(Sr)===41?(Gr=Qt,Sr++):(Gr=Vt,Fr===0&&Vr(Cr)),Gr!==Vt?(En(),Yr=vr,vr=Ks(kr,Pr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),vr}function _o(){var vr,kr,Pr,Gr,Tn,sn,as,xs;if(vr=Sr,(kr=Ps())!==Vt){for(Pr=[],Gr=Sr,Tn=En(),Ft.charCodeAt(Sr)===44?(sn=Zt,Sr++):(sn=Vt,Fr===0&&Vr(Dr)),sn===Vt&&(sn=null),as=En(),(xs=Ps())!==Vt?Gr=Tn=[Tn,sn,as,xs]:(Sr=Gr,Gr=Vt);Gr!==Vt;)Pr.push(Gr),Gr=Sr,Tn=En(),Ft.charCodeAt(Sr)===44?(sn=Zt,Sr++):(sn=Vt,Fr===0&&Vr(Dr)),sn===Vt&&(sn=null),as=En(),(xs=Ps())!==Vt?Gr=Tn=[Tn,sn,as,xs]:(Sr=Gr,Gr=Vt);Yr=vr,vr=Ys(kr,Pr)}else Sr=vr,vr=Vt;return vr}function Ps(){var vr,kr;return vr=Sr,(kr=bo())===Vt&&(kr=xo())===Vt&&(kr=So())===Vt&&(kr=Eo()),kr!==Vt&&(Yr=vr,kr=eo(kr)),(vr=kr)===Vt&&(vr=Sr,(kr=To())!==Vt&&(Yr=vr,kr=Os(kr)),vr=kr),vr}function En(){var vr,kr;for(Fr++,vr=[],br.test(Ft.charAt(Sr))?(kr=Ft.charAt(Sr),Sr++):(kr=Vt,Fr===0&&Vr(Hr));kr!==Vt;)vr.push(kr),br.test(Ft.charAt(Sr))?(kr=Ft.charAt(Sr),Sr++):(kr=Vt,Fr===0&&Vr(Hr));return Fr--,kr=Vt,Fr===0&&Vr(jr),vr}function wo(){var vr,kr,Pr;return Fr++,vr=Sr,(kr=Vs())!==Vt?(Ft.charCodeAt(Sr)===40?(Pr=Kt,Sr++):(Pr=Vt,Fr===0&&Vr(Qr)),Pr!==Vt?(Yr=vr,vr=to(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),Fr--,vr===Vt&&(kr=Vt,Fr===0&&Vr(zr)),vr}function Vs(){var vr,kr,Pr;if(Fr++,vr=Sr,kr=[],_r.test(Ft.charAt(Sr))?(Pr=Ft.charAt(Sr),Sr++):(Pr=Vt,Fr===0&&Vr(Br)),Pr!==Vt)for(;Pr!==Vt;)kr.push(Pr),_r.test(Ft.charAt(Sr))?(Pr=Ft.charAt(Sr),Sr++):(Pr=Vt,Fr===0&&Vr(Br));else kr=Vt;return kr!==Vt&&(Yr=vr,kr=ro()),Fr--,(vr=kr)===Vt&&(kr=Vt,Fr===0&&Vr(Xr)),vr}function bo(){var vr,kr,Pr;return Fr++,vr=Sr,En(),(kr=os())!==Vt?(Ft.charCodeAt(Sr)===37?(Pr=er,Sr++):(Pr=Vt,Fr===0&&Vr(Jr)),Pr!==Vt?(Yr=vr,vr=io(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),Fr--,vr===Vt&&Fr===0&&Vr(Ur),vr}function xo(){var vr,kr,Pr;return Fr++,vr=Sr,En(),(kr=os())!==Vt?(Ft.substr(Sr,2)===Yt?(Pr=Yt,Sr+=2):(Pr=Vt,Fr===0&&Vr(pn)),Pr!==Vt?(Yr=vr,vr=no(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),vr===Vt&&(vr=Sr,En(),(kr=os())!==Vt?(Ft.substr(Sr,2)===rr?(Pr=rr,Sr+=2):(Pr=Vt,Fr===0&&Vr(_i)),Pr!==Vt?(Yr=vr,vr=Fs(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),vr===Vt&&(vr=Sr,En(),(kr=os())!==Vt?(Ft.substr(Sr,2)===ir?(Pr=ir,Sr+=2):(Pr=Vt,Fr===0&&Vr(Rr)),Pr!==Vt?(Yr=vr,vr=so(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),vr===Vt&&(vr=Sr,En(),(kr=os())!==Vt?(Ft.substr(Sr,2)===nr?(Pr=nr,Sr+=2):(Pr=Vt,Fr===0&&Vr(Mn)),Pr!==Vt?(Yr=vr,vr=Rs(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),vr===Vt&&(vr=Sr,En(),(kr=os())!==Vt?(Ft.substr(Sr,2)===ar?(Pr=ar,Sr+=2):(Pr=Vt,Fr===0&&Vr(ls)),Pr!==Vt?(Yr=vr,vr=oo(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),vr===Vt&&(vr=Sr,En(),(kr=os())!==Vt?(Ft.substr(Sr,2)===or?(Pr=or,Sr+=2):(Pr=Vt,Fr===0&&Vr(us)),Pr!==Vt?(Yr=vr,vr=ao(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt)))))),Fr--,vr===Vt&&Fr===0&&Vr(Zr),vr}function So(){var vr,kr,Pr;return Fr++,vr=Sr,(kr=os())!==Vt?(Ft.substr(Sr,3)===ur?(Pr=ur,Sr+=3):(Pr=Vt,Fr===0&&Vr(kn)),Pr!==Vt?(Yr=vr,vr=lo(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),vr===Vt&&(vr=Sr,(kr=os())!==Vt?(Ft.substr(Sr,3)===dr?(Pr=dr,Sr+=3):(Pr=Vt,Fr===0&&Vr(In)),Pr!==Vt?(Yr=vr,vr=uo(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),vr===Vt&&(vr=Sr,(kr=os())!==Vt?(Ft.substr(Sr,4)===hr?(Pr=hr,Sr+=4):(Pr=Vt,Fr===0&&Vr(_n)),Pr!==Vt?(Yr=vr,vr=co(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt),vr===Vt&&(vr=Sr,(kr=os())!==Vt?(Ft.substr(Sr,4)===gr?(Pr=gr,Sr+=4):(Pr=Vt,Fr===0&&Vr(Cn)),Pr!==Vt?(Yr=vr,vr=ho(kr)):(Sr=vr,vr=Vt)):(Sr=vr,vr=Vt)))),Fr--,vr===Vt&&(kr=Vt,Fr===0&&Vr(ss)),vr}function Eo(){var vr,kr;return Fr++,vr=Sr,En(),(kr=os())!==Vt?(Yr=vr,vr=Ts(kr)):(Sr=vr,vr=Vt),Fr--,vr===Vt&&Fr===0&&Vr(jn),vr}function To(){var vr,kr,Pr,Gr;if(Fr++,vr=Sr,Ft.charCodeAt(Sr)===35?(kr=pr,Sr++):(kr=Vt,Fr===0&&Vr(ds)),kr!==Vt){if(Pr=[],Mr.test(Ft.charAt(Sr))?(Gr=Ft.charAt(Sr),Sr++):(Gr=Vt,Fr===0&&Vr(es)),Gr!==Vt)for(;Gr!==Vt;)Pr.push(Gr),Mr.test(Ft.charAt(Sr))?(Gr=Ft.charAt(Sr),Sr++):(Gr=Vt,Fr===0&&Vr(es));else Pr=Vt;Pr!==Vt?(Yr=vr,vr=Ms()):(Sr=vr,vr=Vt)}else Sr=vr,vr=Vt;return vr===Vt&&(vr=Sr,(kr=ks())!==Vt&&(Yr=vr,kr=po(kr)),(vr=kr)===Vt&&(vr=Sr,(kr=Vs())!==Vt&&(Yr=vr,kr=$o()),vr=kr)),Fr--,vr===Vt&&(kr=Vt,Fr===0&&Vr(ts)),vr}function os(){var vr,kr,Pr,Gr,Tn,sn,as;for(vr=Sr,Ar.test(Ft.charAt(Sr))?(Ft.charAt(Sr),Sr++):Fr===0&&Vr(hs),kr=Sr,Pr=[],xr.test(Ft.charAt(Sr))?(Gr=Ft.charAt(Sr),Sr++):(Gr=Vt,Fr===0&&Vr(rs));Gr!==Vt;)Pr.push(Gr),xr.test(Ft.charAt(Sr))?(Gr=Ft.charAt(Sr),Sr++):(Gr=Vt,Fr===0&&Vr(rs));if(Ft.charCodeAt(Sr)===46?(Gr=mr,Sr++):(Gr=Vt,Fr===0&&Vr(ys)),Gr!==Vt){if(Tn=[],xr.test(Ft.charAt(Sr))?(sn=Ft.charAt(Sr),Sr++):(sn=Vt,Fr===0&&Vr(rs)),sn!==Vt)for(;sn!==Vt;)Tn.push(sn),xr.test(Ft.charAt(Sr))?(sn=Ft.charAt(Sr),Sr++):(sn=Vt,Fr===0&&Vr(rs));else Tn=Vt;Tn!==Vt?kr=Pr=[Pr,Gr,Tn]:(Sr=kr,kr=Vt)}else Sr=kr,kr=Vt;if(kr===Vt)if(kr=[],xr.test(Ft.charAt(Sr))?(Pr=Ft.charAt(Sr),Sr++):(Pr=Vt,Fr===0&&Vr(rs)),Pr!==Vt)for(;Pr!==Vt;)kr.push(Pr),xr.test(Ft.charAt(Sr))?(Pr=Ft.charAt(Sr),Sr++):(Pr=Vt,Fr===0&&Vr(rs));else kr=Vt;if(kr!==Vt){if(Pr=Sr,Ft.charCodeAt(Sr)===101?(Gr=wr,Sr++):(Gr=Vt,Fr===0&&Vr(gs)),Gr!==Vt){if(Ar.test(Ft.charAt(Sr))?(Tn=Ft.charAt(Sr),Sr++):(Tn=Vt,Fr===0&&Vr(hs)),Tn===Vt&&(Tn=null),sn=[],xr.test(Ft.charAt(Sr))?(as=Ft.charAt(Sr),Sr++):(as=Vt,Fr===0&&Vr(rs)),as!==Vt)for(;as!==Vt;)sn.push(as),xr.test(Ft.charAt(Sr))?(as=Ft.charAt(Sr),Sr++):(as=Vt,Fr===0&&Vr(rs));else sn=Vt;sn!==Vt?Pr=Gr=[Gr,Tn,sn]:(Sr=Pr,Pr=Vt)}else Sr=Pr,Pr=Vt;Pr===Vt&&(Pr=null),Yr=vr,vr=fo()}else Sr=vr,vr=Vt;return vr}function Mo(vr,kr){return vr.map(function(Pr){return Pr[kr]})}function Io(vr,kr,Pr){return[vr].concat(Mo(kr,Pr))}if((Nt=Ht())!==Vt&&Sr===Ft.length)return Nt;throw Nt!==Vt&&Sr<Ft.length&&Vr(mo()),yo(Is,cs<Ft.length?Ft.charAt(cs):null,cs<Ft.length?Ns(cs,cs+1):Ns(cs,cs))}return _t(Tt,Error),Tt.prototype.format=function(Ft){var Dt="Error: "+this.message;if(this.location){var Nt,Vt=null;for(Nt=0;Nt<Ft.length;Nt++)if(Ft[Nt].source===this.location.source){Vt=Ft[Nt].text.split(/\r\n|\n|\r/g);break}var zt=this.location.start,Xt=this.location.source+":"+zt.line+":"+zt.column;if(Vt){var Ht=this.location.end,Wt=Mt("",zt.line.toString().length),Qt=Vt[zt.line-1],Zt=zt.line===Ht.line?Ht.column:Qt.length+1;Dt+=`
 --> `+Xt+`
`+Wt+` |
`+zt.line+" | "+Qt+`
`+Wt+" | "+Mt("",zt.column-1)+Mt("",Zt-zt.column,"^")}else Dt+=`
 at `+Xt}return Dt},Tt.buildMessage=function(Ft,Dt){var Nt={literal:function(Zt){return'"'+zt(Zt.text)+'"'},class:function(Zt){var Kt=Zt.parts.map(function(er){return Array.isArray(er)?Xt(er[0])+"-"+Xt(er[1]):Xt(er)});return"["+(Zt.inverted?"^":"")+Kt+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(Zt){return Zt.description}};function Vt(Zt){return Zt.charCodeAt(0).toString(16).toUpperCase()}function zt(Zt){return Zt.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Kt){return"\\x0"+Vt(Kt)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Kt){return"\\x"+Vt(Kt)})}function Xt(Zt){return Zt.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Kt){return"\\x0"+Vt(Kt)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Kt){return"\\x"+Vt(Kt)})}function Ht(Zt){return Nt[Zt.type](Zt)}function Wt(Zt){var Kt,er,Yt=Zt.map(Ht);if(Yt.sort(),Yt.length>0){for(Kt=1,er=1;Kt<Yt.length;Kt++)Yt[Kt-1]!==Yt[Kt]&&(Yt[er]=Yt[Kt],er++);Yt.length=er}switch(Yt.length){case 1:return Yt[0];case 2:return Yt[0]+" or "+Yt[1];default:return Yt.slice(0,-1).join(", ")+", or "+Yt[Yt.length-1]}}function Qt(Zt){return Zt?'"'+zt(Zt)+'"':"end of input"}return"Expected "+Wt(Ft)+" but "+Qt(Dt)+" found."},{SyntaxError:Tt,parse:Pt}},(m$1g=v$J).exports&&(m$1g.exports=g$P());const S$t={deg:1,grad:.9,rad:180/Math.PI,turn:360};function z$k(_t){if(_t.type!=="quantity"||!(_t.value===0&&_t.unit===null||_t.unit&&S$t[_t.unit]!=null))throw new s$2i("effect:type-error",`Expected <angle>, Actual: ${$$a(_t)}`,{term:_t})}const R$j={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function I$p(_t){if(_t.type!=="quantity"||!(_t.value===0&&_t.unit===null||_t.unit&&R$j[_t.unit]!=null))throw new s$2i("effect:type-error",`Expected <length>, Actual: ${$$a(_t)}`,{term:_t})}function M$t(_t){q$d(_t);const Tt=_t.value;return O$j(Tt,_t),_t.unit==="%"?.01*Tt:Tt}function P$h(_t){return k$j(_t),O$j(_t.value,_t),_t.value}function N$j(_t){return z$k(_t),_t.value*S$t[_t.unit]||0}function T$l(_t){return I$p(_t),_t.value*R$j[_t.unit]||0}function U$m(_t){switch(_t.colorType){case"hex":return i$2s(_t.value);case"named":return H$a(_t.value);case"function":return D$l(_t.value)}}function H$a(_t){if(!r$1w(_t))throw new s$2i("effect:unknown-color",`color '${_t}' isn't valid`,{namedColor:_t});return a$2H(_t)}const _$k=/^rgba?/i,B$e=/^hsla?/i;function D$l(_t){if(j$E(_t.parameters,4),_$k.test(_t.name))return[M$t(_t.parameters[0]),M$t(_t.parameters[1]),M$t(_t.parameters[2]),_t.parameters[3]?M$t(_t.parameters[3]):1];if(B$e.test(_t.name))return o$1M(P$h(_t.parameters[0]),M$t(_t.parameters[1]),M$t(_t.parameters[2]),_t.parameters[3]?M$t(_t.parameters[3]):1);throw new s$2i("effect:syntax-error",`Invalid color function '${_t.name}'`,{colorFunction:_t})}function n$1H(_t,Tt,Mt){var Pt;try{return c$1X(_t)}catch(Ft){(Pt=Mt==null?void 0:Mt.messages)==null||Pt.push(Ft)}return null}function a$1K(_t,Tt,Mt,Pt){try{const Ft=o$12(_t);o$2d(Mt,Ft,Tt)}catch(Ft){Pt.messages&&Pt.messages.push(Ft)}}function o$12(_t){const Tt=d$1g(_t);return Tt?h$_(Tt)?Tt.map(Mt=>Mt.toJSON()):Tt.map(({scale:Mt,effects:Pt})=>({scale:Mt,value:Pt.map(Ft=>Ft.toJSON())})):null}function c$1X(_t){if(!_t||_t.length===0)return null;if(f$Y(_t)){const Tt=[];for(const Mt of _t)Tt.push({scale:Mt.scale,value:i$1F(Mt.value)});return Tt}return i$1F(_t)}function f$Y(_t){const Tt=_t[0];return!!Tt&&"scale"in Tt}function i$1F(_t){if(!_t||!_t.length)return"";const Tt=[];for(const Mt of _t){let Pt=[];switch(Mt.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":Pt=[u$1c(Mt,"amount")];break;case"blur":Pt=[u$1c(Mt,"radius","pt")];break;case"hue-rotate":Pt=[u$1c(Mt,"angle","deg")];break;case"drop-shadow":Pt=[u$1c(Mt,"xoffset","pt"),u$1c(Mt,"yoffset","pt"),u$1c(Mt,"blurRadius","pt"),l$1n(Mt,"color")];break;case"bloom":Pt=[u$1c(Mt,"strength"),u$1c(Mt,"radius","pt"),u$1c(Mt,"threshold")]}const Ft=`${Mt.type}(${Pt.filter(Boolean).join(" ")})`;d$1g(Ft),Tt.push(Ft)}return Tt.join(" ")}function u$1c(_t,Tt,Mt){if(_t[Tt]==null)throw new s$2i("effect:missing-parameter",`Missing parameter '${Tt}' in ${_t.type} effect`,{effect:_t});return Mt?_t[Tt]+Mt:""+_t[Tt]}function l$1n(_t,Tt){if(_t[Tt]==null)throw new s$2i("effect:missing-parameter",`Missing parameter '${Tt}' in ${_t.type} effect`,{effect:_t});const Mt=_t[Tt];return`rgba(${Mt[0]||0}, ${Mt[1]||0}, ${Mt[2]||0}, ${Mt[3]/255||0})`}const s$1g=-3;var i$1E;(function(_t){_t[_t.ALL=0]="ALL",_t[_t.SOME=1]="SOME"})(i$1E||(i$1E={}));class r$Y{constructor(Tt,Mt,Pt){this._namespace=Tt,this._storage=Mt,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",Pt&&(this._storage.registerRemoveFunc(this._namespace,Pt),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(Tt,Mt,Pt,Ft=0){this._storage.put(this._namespace+Tt,Mt,Pt,Ft)}get(Tt){const Mt=this._storage.get(this._namespace+Tt);return Mt===void 0?++this._miss:++this._hit,Mt}pop(Tt){const Mt=this._storage.pop(this._namespace+Tt);return Mt===void 0?++this._miss:++this._hit,Mt}updateSize(Tt,Mt,Pt){this._storage.updateSize(this._namespace+Tt,Mt,Pt)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class h$Z{constructor(Tt=10485760){this._maxSize=Tt,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n$2R,this._users=new n$2R}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(Tt){this._users.push(Tt)}deregister(Tt){this._users.removeUnordered(Tt)}registerRemoveFunc(Tt,Mt){this._removeFuncs.push([Tt,Mt])}deregisterRemoveFunc(Tt){this._removeFuncs.filterInPlace(Mt=>Mt[0]!==Tt)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(Tt){this._maxSize=Math.max(Tt,0),this._checkSizeLimit()}put(Tt,Mt,Pt,Ft){const Dt=this._db.get(Tt);if(Dt&&(this._size-=Dt.size,this._db.delete(Tt),Dt.entry!==Mt&&this._notifyRemove(Tt,Dt.entry,i$1E.ALL)),Pt>this._maxSize)return void this._notifyRemove(Tt,Mt,i$1E.ALL);if(Mt===void 0)return void console.warn("Refusing to cache undefined entry ");if(!Pt||Pt<0)return void console.warn("Refusing to cache entry with invalid size "+Pt);const Nt=1+Math.max(Ft,s$1g)-s$1g;this._db.set(Tt,{entry:Mt,size:Pt,lifetime:Nt,lives:Nt}),this._size+=Pt,this._checkSizeLimit()}updateSize(Tt,Mt,Pt){const Ft=this._db.get(Tt);if(Ft&&Ft.entry===Mt){for(this._size-=Ft.size;Pt>this._maxSize;){const Dt=this._notifyRemove(Tt,Mt,i$1E.SOME);if(!(r$1P(Dt)&&Dt>0))return void this._db.delete(Tt);Pt=Dt}Ft.size=Pt,this._size+=Pt,this._checkSizeLimit()}}pop(Tt){const Mt=this._db.get(Tt);if(Mt)return this._size-=Mt.size,this._db.delete(Tt),++this._hit,Mt.entry;++this._miss}get(Tt){const Mt=this._db.get(Tt);if(Mt!==void 0)return this._db.delete(Tt),Mt.lives=Mt.lifetime,this._db.set(Tt,Mt),++this._hit,Mt.entry;++this._miss}getStats(){const Tt={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},Mt={},Pt=new Array;this._db.forEach((Nt,Vt)=>{const zt=Nt.lifetime;Pt[zt]=(Pt[zt]||0)+Nt.size,this._users.forAll(Xt=>{const Ht=Xt.namespace;if(Vt.startsWith(Ht)){const Wt=Mt[Ht]||0;Mt[Ht]=Wt+Nt.size}})});const Ft={};this._users.forAll(Nt=>{const Vt=Nt.namespace;if(!isNaN(Nt.hitRate)&&Nt.hitRate>0){const zt=Mt[Vt]||0;Mt[Vt]=zt,Ft[Vt]=Math.round(100*Nt.hitRate)+"%"}else Ft[Vt]="0%"});const Dt=Object.keys(Mt);Dt.sort((Nt,Vt)=>Mt[Vt]-Mt[Nt]),Dt.forEach(Nt=>Tt[Nt]=Math.round(Mt[Nt]/2**20)+"MB / "+Ft[Nt]);for(let Nt=Pt.length-1;Nt>=0;--Nt){const Vt=Pt[Nt];Vt&&(Tt["Priority "+(Nt+s$1g-1)]=Math.round(Vt/this.size*100)+"%")}return Tt}resetStats(){this._hit=this._miss=0,this._users.forAll(Tt=>Tt.resetHitRate())}clear(Tt){this._db.forEach((Mt,Pt)=>{Pt.startsWith(Tt)&&(this._size-=Mt.size,this._db.delete(Pt),this._notifyRemove(Pt,Mt.entry,i$1E.ALL))})}clearAll(){this._db.forEach((Tt,Mt)=>this._notifyRemove(Mt,Tt.entry,i$1E.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(Tt,Mt,Pt){let Ft;return this._removeFuncs.some(Dt=>{if(Tt.startsWith(Dt[0])){const Nt=Dt[1](Mt,Pt);return typeof Nt=="number"&&(Ft=Nt),!0}return!1}),Ft}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[Tt,Mt]of this._db){if(this._db.delete(Tt),Mt.lives<=1){this._size-=Mt.size;const Pt=this._notifyRemove(Tt,Mt.entry,i$1E.SOME);r$1P(Pt)&&Pt>0&&(this._size+=Pt,Mt.lives=Mt.lifetime,Mt.size=Pt,this._db.set(Tt,Mt))}else--Mt.lives,this._db.set(Tt,Mt);if(this._size<=.9*this.maxSize)return}}}class e$16{constructor(Tt,Mt){this._storage=new h$Z,this._storage.maxSize=Tt,Mt&&this._storage.registerRemoveFunc("",Mt)}put(Tt,Mt){this._storage.put(Tt,Mt,1,1)}pop(Tt){return this._storage.pop(Tt)}get(Tt){return this._storage.get(Tt)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}function t$19(_t){return typeof _t=="function"}function e$15(_t,Tt,Mt,Pt){return t$19(_t)?_t(Tt,Mt,Pt):_t}function r$X(_t){return[_t.r,_t.g,_t.b,_t.a]}function n$1G(_t,Tt,Mt){const Pt=` /-,
`,Ft=zt=>{let Xt=zt.length;for(;Xt--;)if(!Pt.includes(zt.charAt(Xt)))return!1;return!0},Dt=[];let Nt=0,Vt=-1;do if(Vt=Tt.indexOf("[",Nt),Vt>=Nt){if(Vt>Nt){const zt=Tt.substr(Nt,Vt-Nt);Dt.push([zt,null,Ft(zt)])}if(Nt=Vt+1,Vt=Tt.indexOf("]",Nt),Vt>=Nt){if(Vt>Nt){const zt=_t[Tt.substr(Nt,Vt-Nt)];zt&&Dt.push([null,zt,!1])}Nt=Vt+1}}while(Vt!==-1);if(Nt<Tt.length-1){const zt=Tt.substr(Nt);Dt.push([zt,null,Ft(zt)])}return zt=>{let Xt="",Ht=null;for(const Wt of Dt){const[Qt,Zt,Kt]=Wt;if(Qt)Kt?Ht=Qt:(Ht&&(Xt+=Ht,Ht=null),Xt+=Qt);else{const er=zt.attributes[Zt];er&&(Ht&&(Xt+=Ht,Ht=null),Xt+=er)}}return o$11(Xt,Mt)}}function o$11(_t,Tt){switch(typeof _t!="string"&&(_t=String(_t)),Tt){case"LowerCase":return _t.toLowerCase();case"Allcaps":return _t.toUpperCase();default:return _t}}function a$1J(_t,Tt,Mt,Pt,Ft,Dt,Nt=!0){const Vt=Tt/Ft,zt=Mt/Dt,Xt=Math.ceil(Vt/2),Ht=Math.ceil(zt/2);for(let Wt=0;Wt<Dt;Wt++)for(let Qt=0;Qt<Ft;Qt++){const Zt=4*(Qt+(Nt?Dt-Wt-1:Wt)*Ft);let Kt=0,er=0,Yt=0,rr=0,ir=0,nr=0,ar=0;const or=(Wt+.5)*zt;for(let ur=Math.floor(Wt*zt);ur<(Wt+1)*zt;ur++){const dr=Math.abs(or-(ur+.5))/Ht,hr=(Qt+.5)*Vt,gr=dr*dr;for(let pr=Math.floor(Qt*Vt);pr<(Qt+1)*Vt;pr++){let mr=Math.abs(hr-(pr+.5))/Xt;const wr=Math.sqrt(gr+mr*mr);wr>=-1&&wr<=1&&(Kt=2*wr*wr*wr-3*wr*wr+1,Kt>0&&(mr=4*(pr+ur*Tt),ar+=Kt*_t[mr+3],Yt+=Kt,_t[mr+3]<255&&(Kt=Kt*_t[mr+3]/250),rr+=Kt*_t[mr],ir+=Kt*_t[mr+1],nr+=Kt*_t[mr+2],er+=Kt))}}Pt[Zt]=rr/er,Pt[Zt+1]=ir/er,Pt[Zt+2]=nr/er,Pt[Zt+3]=ar/Yt}}function i$1D(_t){return _t?{r:_t[0],g:_t[1],b:_t[2],a:_t[3]/255}:{r:0,g:0,b:0,a:0}}function c$1W(_t){var Tt;return(Tt=_t.data)==null?void 0:Tt.symbol}function l$1m(_t){return _t.type==="CIMVectorMarker"||_t.type==="CIMPictureMarker"||_t.type==="CIMBarChartMarker"||_t.type==="CIMCharacterMarker"||_t.type==="CIMPieChartMarker"||_t.type==="CIMStackedBarChartMarker"}function u$1b(_t){return _t.type==="CIMGradientStroke"||_t.type==="CIMPictureStroke"||_t.type==="CIMSolidStroke"}function s$1f(_t){return _t.type==="CIMGradientFill"||_t.type==="CIMHatchFill"||_t.type==="CIMPictureFill"||_t.type==="CIMSolidFill"||_t.type==="CIMWaterFill"}function f$X(_t){return _t.type==="CIMMarkerPlacementAlongLineRandomSize"||_t.type==="CIMMarkerPlacementAlongLineSameSize"||_t.type==="CIMMarkerPlacementAlongLineVariableSize"||_t.type==="CIMMarkerPlacementAtExtremities"||_t.type==="CIMMarkerPlacementAtMeasuredUnits"||_t.type==="CIMMarkerPlacementAtRatioPositions"||_t.type==="CIMMarkerPlacementOnLine"||_t.type==="CIMMarkerPlacementOnVertices"}const M$s=_t=>isNaN(_t)||!_t?0:_t,p$28=_t=>{if(!_t)return!1;for(const Tt of _t)switch(Tt.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":return!0}return!1};function C$i(){return __vitePreload(()=>import("./geometryEngineJSON.e6f25a73.js"),["assets/geometryEngineJSON.e6f25a73.js","assets/geometryEngineBase.cf4f989f.js","assets/geometryEngineJSON.73e38ad3.js"])}function i$1C(_t){const Tt=c$1W(_t);if(Tt.type==="CIMTextSymbol")return Tt.height;let Mt=0;if(Tt.symbolLayers)for(const Pt of Tt.symbolLayers)l$1m(Pt)&&Pt.size>Mt?Mt=Pt.size:u$1b(Pt)&&Pt.width>Mt?Mt=Pt.width:s$1f(Pt);return Mt}function c$1V(_t,Tt,Mt){const Pt=c$1W(_t),Ft=i$1C(_t);if(Ft===0)return void f$W(Pt,Tt);l$1l(Pt,Tt/Ft,!1,Mt)}function f$W(_t,Tt){if(_t.type!=="CIMTextSymbol"){if(_t.symbolLayers)for(const Mt of _t.symbolLayers)switch(Mt.type){case"CIMPictureMarker":case"CIMVectorMarker":Mt.size=Tt;break;case"CIMPictureStroke":case"CIMSolidStroke":Mt.width=Tt}}else _t.height=Tt}function l$1l(_t,Tt,Mt,Pt){if(_t.type!=="CIMTextSymbol"){if(Mt&&_t.effects)for(const Ft of _t.effects)C$h(Ft,Tt);if(_t.symbolLayers)for(const Ft of _t.symbolLayers)switch(Ft.type){case"CIMPictureMarker":case"CIMVectorMarker":m$1f(Ft,Tt,Pt);break;case"CIMPictureStroke":case"CIMSolidStroke":!(Pt!=null&&Pt.preserveOutlineWidth)&&Ft.width&&(Ft.width*=Tt);break;case"CIMPictureFill":Ft.height&&(Ft.height*=Tt),Ft.offsetX&&(Ft.offsetX*=Tt),Ft.offsetY&&(Ft.offsetY*=Tt);break;case"CIMHatchFill":l$1l(Ft.lineSymbol,Tt,!0,{...Pt,preserveOutlineWidth:!1}),Ft.offsetX&&(Ft.offsetX*=Tt),Ft.offsetY&&(Ft.offsetY*=Tt),Ft.separation&&(Ft.separation*=Tt)}}else _t.height*=Tt}function m$1f(_t,Tt,Mt){if(_t.markerPlacement&&M$r(_t.markerPlacement,Tt),_t.offsetX&&(_t.offsetX*=Tt),_t.offsetY&&(_t.offsetY*=Tt),_t.anchorPoint&&_t.anchorPointUnits==="Absolute"&&(_t.anchorPoint={x:_t.anchorPoint.x*Tt,y:_t.anchorPoint.y*Tt}),_t.size*=Tt,_t.type==="CIMVectorMarker"&&_t.markerGraphics)for(const Pt of _t.markerGraphics)_t.scaleSymbolsProportionally||l$1l(Pt.symbol,Tt,!0,Mt)}function M$r(_t,Tt){switch(f$X(_t)&&_t.offset&&(_t.offset*=Tt),_t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(_t.customEndingOffset&&(_t.customEndingOffset*=Tt),_t.offsetAlongLine&&(_t.offsetAlongLine*=Tt),_t.placementTemplate&&_t.placementTemplate.length){const Mt=_t.placementTemplate.map(Pt=>Pt*Tt);_t.placementTemplate=Mt}break;case"CIMMarkerPlacementAlongLineVariableSize":if(_t.maxRandomOffset&&(_t.maxRandomOffset*=Tt),_t.placementTemplate&&_t.placementTemplate.length){const Mt=_t.placementTemplate.map(Pt=>Pt*Tt);_t.placementTemplate=Mt}break;case"CIMMarkerPlacementOnLine":_t.startPointOffset&&(_t.startPointOffset*=Tt);break;case"CIMMarkerPlacementAtExtremities":_t.offsetAlongLine&&(_t.offsetAlongLine*=Tt);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":_t.beginPosition&&(_t.beginPosition*=Tt),_t.endPosition&&(_t.endPosition*=Tt);break;case"CIMMarkerPlacementPolygonCenter":_t.offsetX&&(_t.offsetX*=Tt),_t.offsetY&&(_t.offsetY*=Tt);break;case"CIMMarkerPlacementInsidePolygon":_t.offsetX&&(_t.offsetX*=Tt),_t.offsetY&&(_t.offsetY*=Tt),_t.stepX&&(_t.stepX*=Tt),_t.stepY&&(_t.stepY*=Tt)}}function C$h(_t,Tt){switch(_t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":_t.width&&(_t.width*=Tt);break;case"CIMGeometricEffectBuffer":_t.size&&(_t.size*=Tt);break;case"CIMGeometricEffectCut":_t.beginCut&&(_t.beginCut*=Tt),_t.endCut&&(_t.endCut*=Tt),_t.middleCut&&(_t.middleCut*=Tt);break;case"CIMGeometricEffectDashes":if(_t.customEndingOffset&&(_t.customEndingOffset*=Tt),_t.offsetAlongLine&&(_t.offsetAlongLine*=Tt),_t.dashTemplate&&_t.dashTemplate.length){const Mt=_t.dashTemplate.map(Pt=>Pt*Tt);_t.dashTemplate=Mt}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":_t.length&&(_t.length*=Tt);break;case"CIMGeometricEffectMove":_t.offsetX&&(_t.offsetX*=Tt),_t.offsetY&&(_t.offsetY*=Tt);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":_t.offset&&(_t.offset*=Tt);break;case"CIMGeometricEffectRegularPolygon":_t.radius&&(_t.radius*=Tt);break;case"CIMGeometricEffectTaperedPolygon":_t.fromWidth&&(_t.fromWidth*=Tt),_t.length&&(_t.length*=Tt),_t.toWidth&&(_t.toWidth*=Tt);break;case"CIMGeometricEffectWave":_t.amplitude&&(_t.amplitude*=Tt),_t.period&&(_t.period*=Tt)}}function y$10(_t){const Tt=[];return k$i(c$1W(_t),Tt),Tt.length?new l$2f(i$1D(Tt[0])):null}function k$i(_t,Tt){let Mt;Mt=_t.type==="CIMTextSymbol"?_t.symbol:_t;const Pt=_t.type==="CIMPolygonSymbol";if(Mt.symbolLayers){for(const Ft of Mt.symbolLayers)if(!(Ft.colorLocked||Pt&&(u$1b(Ft)||l$1m(Ft)&&Ft.markerPlacement&&f$X(Ft.markerPlacement))))switch(Ft.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":Ft.tintColor&&b$M(Tt,Ft.tintColor);break;case"CIMVectorMarker":Ft.markerGraphics.forEach(Dt=>{k$i(Dt.symbol,Tt)});break;case"CIMSolidStroke":case"CIMSolidFill":b$M(Tt,Ft.color);break;case"CIMHatchFill":k$i(Ft.lineSymbol,Tt)}}}function b$M(_t,Tt){for(const Mt of _t)if(Mt.join(".")===Tt.join("."))return;_t.push(Tt)}function p$27(_t,Tt,Mt){Tt instanceof l$2f||(Tt=new l$2f(Tt));const Pt=c$1W(_t);Pt&&I$o(Pt,Tt,Mt)}function I$o(_t,Tt,Mt){let Pt;Pt=_t.type==="CIMTextSymbol"?_t.symbol:_t;const Ft=Pt.type==="CIMPolygonSymbol";if(Pt.symbolLayers)for(const Dt of Pt.symbolLayers){if(Dt.colorLocked)continue;if(Ft){if(Mt){const{layersToColor:Vt}=Mt;if((u$1b(Dt)||l$1m(Dt)&&Dt.markerPlacement&&f$X(Dt.markerPlacement))&&Vt==="fill"||s$1f(Dt)&&Vt==="outline")continue}else if(u$1b(Dt)||l$1m(Dt)&&Dt.markerPlacement&&f$X(Dt.markerPlacement))continue}const Nt=Tt.toArray();switch(Dt.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":Dt.tintColor=Nt;break;case"CIMVectorMarker":Dt.markerGraphics.forEach(Vt=>{I$o(Vt.symbol,Tt,Mt)});break;case"CIMSolidStroke":case"CIMSolidFill":Dt.color=Nt;break;case"CIMHatchFill":I$o(Dt.lineSymbol,Tt,Mt)}}}const s$1e="picture-fill",l$1k="simple-fill",a$1I="simple-line",c$1U="simple-marker",m$1e="text",u$1a="cim",d$1f=new e$16(1e3);function b$L(_t){const Tt=_t.style;let Mt=null;if(_t)switch(_t.type){case c$1U:Tt!=="cross"&&Tt!=="x"&&(Mt=_t.color);break;case l$1k:Tt==="solid"?Mt=_t.color:Tt!=="none"&&(Mt={type:"pattern",x:0,y:0,src:a$2M(`esri/symbols/patterns/${Tt}.png`),width:5,height:5});break;case s$1e:Mt={type:"pattern",src:_t.url,width:u$1E(_t.width)*_t.xscale,height:u$1E(_t.height)*_t.yscale,x:u$1E(_t.xoffset),y:u$1E(_t.yoffset)};break;case m$1e:Mt=_t.color;break;case u$1a:Mt=y$10(_t)}return Mt}function w$F(_t,Tt){const Mt=_t+"-"+Tt;return d$1f.get(Mt)!==void 0?Promise.resolve(d$1f.get(Mt)):U$v(_t,{responseType:"image"}).then(Pt=>{const Ft=Pt.data,Dt=Ft.naturalWidth,Nt=Ft.naturalHeight,Vt=document.createElement("canvas");Vt.width=Dt,Vt.height=Nt;const zt=Vt.getContext("2d");zt.fillStyle=Tt,zt.fillRect(0,0,Dt,Nt),zt.globalCompositeOperation="destination-in",zt.drawImage(Ft,0,0);const Xt=Vt.toDataURL();return d$1f.put(Mt,Xt),Xt})}function j$D(_t){if(!_t)return null;let Tt;switch(_t.type){case l$1k:case s$1e:case c$1U:Tt=j$D(_t.outline);break;case a$1I:{const Mt=u$1E(_t.width);_t.style!=="none"&&Mt!==0&&(Tt={color:_t.color,style:x$w(_t.style),width:Mt,cap:_t.cap,join:_t.join==="miter"?u$1E(_t.miterLimit):_t.join});break}default:Tt=null}return Tt}const x$w=(()=>{const _t={};return Tt=>{if(_t[Tt])return _t[Tt];const Mt=Tt.replace(/-/g,"");return _t[Tt]=Mt,Mt}})(),k$h=new l$2f([128,128,128]),p$26=/\/resource\/(.*?)\.svg$/,h$Y=new l$2f("white");function b$K(_t){const Tt=_t.symbolLayers&&_t.symbolLayers.length;if(!Tt)return;const Mt=_t.symbolLayers.getItemAt(Tt-1);return"outline"in Mt?m$2g(Mt,"outline","size"):void 0}function w$E(_t){if(!_t)return 0;if(c$2h(_t)){const Mt=b$K(_t);return r$1P(Mt)?Mt:0}const Tt=j$D(_t);return Tt&&e$1y(Tt.width)||0}function d$1e(_t){if(t$2e(_t)||!("symbolLayers"in _t)||t$2e(_t.symbolLayers))return!1;switch(_t.type){case"point-3d":return _t.symbolLayers.some(Tt=>Tt.type==="object");case"line-3d":return _t.symbolLayers.some(Tt=>Tt.type==="path");case"polygon-3d":return _t.symbolLayers.some(Tt=>Tt.type==="object"||Tt.type==="extrude");default:return!1}}function g$O(_t,Tt){const Mt=Tt.resource.href;return!a$32("esri-canvas-svg-support")&&_t.styleOrigin&&p$26.test(Mt)?Mt.replace(p$26,"/resource/png/$1.png"):Mt}function j$C(_t,Tt){if(!_t)return null;let Mt=null;return c$2h(_t)?Mt=k$g(_t):x$F(_t)&&(Mt=_t.color?new l$2f(_t.color):null),Mt?L$k(Mt,Tt):null}function k$g(_t){const Tt=_t.symbolLayers;if(!Tt)return null;let Mt=null;return Tt.forEach(Pt=>{Pt.type==="object"&&Pt.resource.href!=null||(Mt=Pt.type==="water"?Pt.color:r$1P(Pt.material)?Pt.material.color:null)}),Mt?new l$2f(Mt):null}function L$k(_t,Tt){if(Tt==null)return _t;const Mt=_t.toRgba();return Mt[3]=Mt[3]*Tt,new l$2f(Mt)}function z$j(_t,Tt,Mt){const Pt=_t.symbolLayers;if(!Pt)return;const Ft=Dt=>{const Nt=r$1P(Dt)?Dt:null;return L$k(Tt=Tt||Nt||Mt!=null&&h$Y,Mt)};Pt.forEach(Dt=>{if(Dt.type!=="object"||Dt.resource.href==null||Tt)if(Dt.type==="water")Dt.color=Ft(Dt.color);else{const Nt=r$1P(Dt.material)?Dt.material.color:null,Vt=Ft(Nt);t$2e(Dt.material)?Dt.material=new l$1Y({color:Vt}):Dt.material.color=Vt,Mt!=null&&"outline"in Dt&&r$1P(Dt.outline)&&r$1P(Dt.outline.color)&&(Dt.outline.color=L$k(Dt.outline.color,Mt))}})}function v$I(_t,Tt,Mt){(Tt=Tt||_t.color)&&(_t.color=L$k(Tt,Mt)),Mt!=null&&"outline"in _t&&_t.outline&&_t.outline.color&&(_t.outline.color=L$k(_t.outline.color,Mt))}function x$v(_t,Tt,Mt){_t&&(Tt||Mt!=null)&&(Tt&&(Tt=new l$2f(Tt)),c$2h(_t)?z$j(_t,Tt,Mt):x$F(_t)&&v$I(_t,Tt,Mt))}async function S$s(_t,Tt){const Mt=_t.symbolLayers;Mt&&await n$2F(Mt,async Pt=>U$l(Pt,Tt))}async function U$l(_t,Tt){switch(_t.type){case"extrude":R$i(_t,Tt);break;case"icon":case"line":case"text":O$i(_t,Tt);break;case"path":A$e(_t,Tt);break;case"object":await $$9(_t,Tt)}}function O$i(_t,Tt){const Mt=E$s(Tt);r$1P(Mt)&&(_t.size=Mt)}function E$s(_t){for(const Tt of _t)if(typeof Tt=="number")return Tt;return null}function R$i(_t,Tt){_t.size=typeof Tt[2]=="number"?Tt[2]:0}async function $$9(_t,Tt){const{resourceSize:Mt,symbolSize:Pt}=await D$k(_t),Ft=C$g(Tt,Mt,Pt);_t.width=I$n(Tt[0],Pt[0],Mt[0],Ft),_t.depth=I$n(Tt[1],Pt[1],Mt[1],Ft),_t.height=I$n(Tt[2],Pt[2],Mt[2],Ft)}function A$e(_t,Tt){const Mt=C$g(Tt,l$2j,[_t.width,void 0,_t.height]);_t.width=I$n(Tt[0],_t.width,1,Mt),_t.height=I$n(Tt[2],_t.height,1,Mt)}function C$g(_t,Tt,Mt){for(let Pt=0;Pt<3;Pt++){const Ft=_t[Pt];switch(Ft){case"symbol-value":return Mt[Pt]!=null?Mt[Pt]/Tt[Pt]:1;case"proportional":break;default:if(Ft&&Tt[Pt])return Ft/Tt[Pt]}}return 1}async function D$k(_t){const Tt=await __vitePreload(()=>import("./symbolLayerUtils.d43bd90b.js"),[]),Mt=await Tt.computeObjectLayerResourceSize(_t,10),{width:Pt,height:Ft,depth:Dt}=_t,Nt=[Pt,Dt,Ft];let Vt=1;for(let zt=0;zt<3;zt++)if(Nt[zt]!=null){Vt=Nt[zt]/Mt[zt];break}for(let zt=0;zt<3;zt++)Nt[zt]==null&&(Nt[zt]=Mt[zt]*Vt);return{resourceSize:Mt,symbolSize:Nt}}function I$n(_t,Tt,Mt,Pt){switch(_t){case"proportional":return Mt*Pt;case"symbol-value":return Tt!=null?Tt:Mt;default:return _t}}function J$a(_t,Tt){const Mt=E$s(Tt);if(!t$2e(Mt))switch(_t.type){case"simple-marker":_t.size=Mt;break;case"picture-marker":{const Pt=_t.width/_t.height;Pt>1?(_t.width=Mt,_t.height=Mt*Pt):(_t.width=Mt*Pt,_t.height=Mt);break}case"simple-line":_t.width=Mt;break;case"text":_t.font.size=Mt}}async function M$q(_t,Tt){if(_t&&Tt)return c$2h(_t)?S$s(_t,Tt):void(x$F(_t)&&J$a(_t,Tt))}function N$i(_t,Tt,Mt){if(_t&&Tt!=null)if(c$2h(_t)){const Pt=_t.symbolLayers;Pt&&Pt.forEach(Ft=>{if(Ft&&Ft.type==="object")switch(Mt){case"tilt":Ft.tilt=Tt;break;case"roll":Ft.roll=Tt;break;default:Ft.heading=Tt}})}else x$F(_t)&&(_t.type!=="simple-marker"&&_t.type!=="picture-marker"&&_t.type!=="text"||(_t.angle=Tt))}function q$c(_t){if(!_t)return null;const Tt=_t.effects.filter(Mt=>Mt.type!=="bloom").map(Mt=>Mt.toJSON());return i$1F(Tt)}const s$1d="<",i$1B=">",r$W=S$G("short-date");function o$10(_t,Tt,Mt,Pt){let Ft="";Tt===0?Ft=`${s$1d} `:Tt===Mt&&(Ft=`${i$1B} `);let Dt=null;return Dt=Pt?L$r(_t,r$W):c$1_(_t),Ft+Dt}const e$14=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function n$1F(_t){if(!("visualVariables"in _t)||!_t.visualVariables)return null;const Tt=_t.visualVariables.find(Nt=>Nt.type==="color");if(!Tt)return null;let Mt=null,Pt=null;if(Tt.stops){if(Tt.stops.length===1)return Tt.stops[0].color;Mt=Tt.stops[0].value,Pt=Tt.stops[Tt.stops.length-1].value}const Ft=Mt+(Pt-Mt)/2,{getColor:Dt}=await __vitePreload(()=>Promise.resolve().then(()=>visualVariableUtils),void 0);return Dt(Tt,Ft)}async function u$19(_t,Tt){const Mt=_t.trailCap,Pt=_t.trailWidth||1,Ft=Tt||await n$1F(_t)||_t.color;return new m$1F({cap:Mt,color:Ft,width:Pt})}const o$$=new l$2f([64,64,64]);function n$1E(_t,Tt){const Mt=[],Pt=_t.length-1;return _t.length===5?Mt.push(0,2,4):Mt.push(0,Pt),_t.map((Ft,Dt)=>Mt.includes(Dt)?o$10(Ft,Dt,Pt,Tt):null)}async function r$V(_t,Tt,Mt){let Pt=!1,Ft=[],Dt=[];if(_t.stops){const Xt=_t.stops;Ft=Xt.map(Ht=>Ht.value),Pt=Xt.some(Ht=>!!Ht.label),Pt&&(Dt=Xt.map(Ht=>Ht.label))}const Nt=Ft[0],Vt=Ft[Ft.length-1];if(Nt==null&&Vt==null)return null;const zt=Pt?null:n$1E(Ft,Mt);return(await Promise.all(Ft.map(async(Xt,Ht)=>({value:Xt,color:_t.type==="opacity"?await t$18(Xt,_t,Tt):(await __vitePreload(()=>Promise.resolve().then(()=>visualVariableUtils),void 0)).getColor(_t,Xt),label:Pt?Dt[Ht]:zt[Ht]})))).reverse()}async function t$18(_t,Tt,Mt=o$$){const Pt=new l$2f(Mt),Ft=(await __vitePreload(()=>Promise.resolve().then(()=>visualVariableUtils),void 0)).getOpacity(Tt,_t);return Ft!=null&&(Pt.a=Ft),Pt}function a$1H(_t){let Tt=!1,Mt=[],Pt=[];Mt=_t.map(Vt=>Vt.value),Tt=_t.some(Vt=>!!Vt.label),Tt&&(Pt=_t.map(Vt=>Vt.label));const Ft=Mt[0],Dt=Mt[Mt.length-1];if(Ft==null&&Dt==null)return null;const Nt=Tt?null:n$1E(Mt,!1);return Mt.map((Vt,zt)=>({value:Vt,color:u$18(Vt,_t),label:Tt?Pt[zt]:Nt[zt]})).reverse()}function u$18(_t,Tt){const{startIndex:Mt,endIndex:Pt,weight:Ft}=s$1c(_t,Tt);if(Mt===Pt)return Tt[Mt].color;const Dt=l$2f.blendColors(Tt[Mt].color,Tt[Pt].color,Ft);return new l$2f(Dt)}function s$1c(_t,Tt){let Mt=0,Pt=Tt.length-1;return Tt.some((Ft,Dt)=>_t<Ft.value?(Pt=Dt,!0):(Mt=Dt,!1)),{startIndex:Mt,endIndex:Pt,weight:(_t-Tt[Mt].value)/(Tt[Pt].value-Tt[Mt].value)}}function i$1A(_t,Tt){let Mt=[];if(_t&&_t.type==="multipart")_t.colorRamps.reverse().forEach((Pt,Ft)=>{Ft===0?Mt.push({value:Tt.max,color:new l$2f(Pt.toColor),label:"high"}):Mt.push({value:null,color:new l$2f(Pt.toColor),label:""}),Ft===_t.colorRamps.length-1?Mt.push({value:Tt.min,color:new l$2f(Pt.fromColor),label:"low"}):Mt.push({value:null,color:new l$2f(Pt.fromColor),label:""})});else{let Pt,Ft;_t&&_t.type==="algorithmic"?(Pt=_t.fromColor,Ft=_t.toColor):(Pt=[0,0,0,1],Ft=[255,255,255,1]),Mt=[{value:Tt.max,color:new l$2f(Ft),label:"high"},{value:Tt.min,color:new l$2f(Pt),label:"low"}]}return Mt}var c$1T;let i$1z=c$1T=class extends l$2v{constructor(_t){super(_t),this.color=null,this.ratio=null}clone(){return new c$1T({color:this.color,ratio:this.ratio})}};e$2a([d$25({type:l$2f,json:{type:[S$Q],default:null,write:!0}})],i$1z.prototype,"color",void 0),e$2a([d$25({type:Number,json:{write:!0}})],i$1z.prototype,"ratio",void 0),i$1z=c$1T=e$2a([n$2L("esri.renderers.support.HeatmapColorStop")],i$1z);const a$1G=i$1z;function r$U(_t){if(!_t.colorStops)return[];const Tt=[..._t.colorStops].filter(Pt=>{var Ft;return((Ft=Pt.color)==null?void 0:Ft.a)>0});let Mt=Tt.length-1;if(Tt&&Tt[0]){const Pt=Tt[Mt];Pt&&Pt.ratio!==1&&(Tt.push(new a$1G({ratio:1,color:Pt.color})),Mt++)}return Tt.map((Pt,Ft)=>{var Nt,Vt;let Dt="";return Ft===0?Dt=((Nt=_t.legendOptions)==null?void 0:Nt.minLabel)||"low":Ft===Mt&&(Dt=((Vt=_t.legendOptions)==null?void 0:Vt.maxLabel)||"high"),{color:Pt.color,label:Dt,ratio:Pt.ratio}}).reverse()}s$2l.getLogger("esri.renderers.support.utils");function g$N(_t,Tt,Mt){r$1F(_t,Tt,()=>[]).push(...Mt)}async function h$X(_t){var Mt,Pt;const Tt=new Map;if("visualVariables"in _t&&_t.visualVariables){const Ft=_t.visualVariables.filter(Dt=>Dt.type==="color");for(const Dt of Ft){const Nt=Dt.field||Dt.valueExpression,Vt=(await r$V(Dt)).map(zt=>zt.color);g$N(Tt,Nt,Vt)}}if(_t.type==="heatmap"){const Ft=r$U(_t).map(Dt=>Dt.color);g$N(Tt,_t.field,Ft)}else if(_t.type==="pie-chart"){for(const Ft of _t.attributes)g$N(Tt,Ft.field,[Ft.color]);g$N(Tt,null,[(Mt=_t==null?void 0:_t.othersCategory)==null?void 0:Mt.color,j$C(_t.backgroundFillSymbol,null)])}else if(_t.type==="dot-density"){for(const Ft of _t.attributes)g$N(Tt,Ft.field,[Ft.color]);g$N(Tt,null,[_t.backgroundColor])}else if(_t.type==="unique-value")if(((Pt=_t.authoringInfo)==null?void 0:Pt.type)==="predominance")for(const Ft of _t.uniqueValueInfos)g$N(Tt,Ft.value.toString(),[j$C(Ft.symbol,null)]);else{const Ft=_t.uniqueValueInfos.map(Xt=>j$C(Xt.symbol,null)),{field:Dt,field2:Nt,field3:Vt,valueExpression:zt}=_t;(Dt||zt)&&g$N(Tt,Dt||zt,Ft),Nt&&g$N(Tt,Nt,Ft),Vt&&g$N(Tt,Vt,Ft)}else if(_t.type==="class-breaks"){const Ft=_t.classBreakInfos.map(Dt=>j$C(Dt.symbol,null));g$N(Tt,_t.field||_t.valueExpression,Ft)}else _t.type==="simple"&&g$N(Tt,null,[j$C(_t.symbol,null)]);return"defaultSymbol"in _t&&_t.defaultSymbol&&g$N(Tt,null,[j$C(_t.defaultSymbol,null)]),Tt.forEach((Ft,Dt)=>{const Nt=u$2j(Ft.filter(Boolean),(Vt,zt)=>JSON.stringify(Vt)===JSON.stringify(zt));Tt.set(Dt,Nt)}),Tt}var t$17;let p$25=t$17=class extends l$2v{constructor(_t){super(_t),this.name=null,this.code=null}clone(){return new t$17({name:this.name,code:this.code})}};e$2a([d$25({type:String,json:{write:!0}})],p$25.prototype,"name",void 0),e$2a([d$25({type:[String,Number],json:{write:!0}})],p$25.prototype,"code",void 0),p$25=t$17=e$2a([n$2L("esri.layers.support.CodedValue")],p$25);const c$1S=new s$1_({inherited:"inherited",codedValue:"coded-value",range:"range"});let a$1F=class extends l$2v{constructor(_t){super(_t),this.name=null,this.type=null}};e$2a([d$25({type:String,json:{write:!0}})],a$1F.prototype,"name",void 0),e$2a([r$1r(c$1S)],a$1F.prototype,"type",void 0),a$1F=e$2a([n$2L("esri.layers.support.Domain")],a$1F);const i$1y=a$1F;var d$1d;let p$24=d$1d=class extends i$1y{constructor(_t){super(_t),this.codedValues=null,this.type="coded-value"}getName(_t){let Tt=null;if(this.codedValues){const Mt=String(_t);this.codedValues.some(Pt=>(String(Pt.code)===Mt&&(Tt=Pt.name),!!Tt))}return Tt}clone(){return new d$1d({codedValues:m$2e(this.codedValues),name:this.name})}};e$2a([d$25({type:[p$25],json:{write:!0}})],p$24.prototype,"codedValues",void 0),e$2a([r$1r({codedValue:"coded-value"})],p$24.prototype,"type",void 0),p$24=d$1d=e$2a([n$2L("esri.layers.support.CodedValueDomain")],p$24);const u$17=p$24;var t$16;let p$23=t$16=class extends i$1y{constructor(_t){super(_t),this.type="inherited"}clone(){return new t$16}};e$2a([r$1r({inherited:"inherited"})],p$23.prototype,"type",void 0),p$23=t$16=e$2a([n$2L("esri.layers.support.InheritedDomain")],p$23);const c$1R=p$23;var s$1b;let n$1D=s$1b=class extends i$1y{constructor(_t){super(_t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new s$1b({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};e$2a([d$25({type:Number,json:{type:[Number],read:{source:"range",reader:(_t,Tt)=>Tt.range&&Tt.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(_t,Tt,Mt){Tt[Mt]=[this.minValue||0,_t]}}}})],n$1D.prototype,"maxValue",void 0),e$2a([d$25({type:Number,json:{type:[Number],read:{source:"range",reader:(_t,Tt)=>Tt.range&&Tt.range[0]},write:{target:"range",writer(_t,Tt,Mt){Tt[Mt]=[_t,this.maxValue||0]}}}})],n$1D.prototype,"minValue",void 0),e$2a([r$1r({range:"range"})],n$1D.prototype,"type",void 0),n$1D=s$1b=e$2a([n$2L("esri.layers.support.RangeDomain")],n$1D);const i$1x=n$1D,n$1C={key:"type",base:i$1y,typeMap:{range:i$1x,"coded-value":u$17,inherited:c$1R}};function t$15(_t){if(!_t||!_t.type)return null;switch(_t.type){case"range":return i$1x.fromJSON(_t);case"codedValue":return u$17.fromJSON(_t);case"inherited":return c$1R.fromJSON(_t)}return null}const i$1w=new s$1_({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var u$16;const c$1Q=new s$1_({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let m$1d=u$16=class extends l$2v{constructor(_t){super(_t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(_t,{description:Tt}){let Mt;try{Mt=JSON.parse(Tt)}catch{}return Mt?Mt.value:null}readValueType(_t,{description:Tt}){let Mt;try{Mt=JSON.parse(Tt)}catch{}return Mt?c$1Q.fromJSON(Mt.fieldValueType):null}clone(){return new u$16({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};e$2a([d$25({type:String,json:{write:!0}})],m$1d.prototype,"alias",void 0),e$2a([d$25({type:[String,Number],json:{write:{allowNull:!0}}})],m$1d.prototype,"defaultValue",void 0),e$2a([d$25()],m$1d.prototype,"description",void 0),e$2a([o$1U("description")],m$1d.prototype,"readDescription",null),e$2a([d$25({types:n$1C,json:{read:{reader:t$15},write:!0}})],m$1d.prototype,"domain",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],m$1d.prototype,"editable",void 0),e$2a([d$25({type:S$Q,json:{write:!0}})],m$1d.prototype,"length",void 0),e$2a([d$25({type:String,json:{write:!0}})],m$1d.prototype,"name",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],m$1d.prototype,"nullable",void 0),e$2a([r$1r(i$1w)],m$1d.prototype,"type",void 0),e$2a([d$25()],m$1d.prototype,"valueType",void 0),e$2a([o$1U("valueType",["description"])],m$1d.prototype,"readValueType",null),m$1d=u$16=e$2a([n$2L("esri.layers.support.Field")],m$1d);const y$$=m$1d;var a$1E;let c$1P=a$1E=class extends l$2v{constructor(_t){super(_t),this.type="map-layer"}clone(){const{mapLayerId:_t,gdbVersion:Tt}=this;return new a$1E({mapLayerId:_t,gdbVersion:Tt})}};e$2a([r$1r({mapLayer:"map-layer"})],c$1P.prototype,"type",void 0),e$2a([d$25({type:S$Q,json:{write:!0}})],c$1P.prototype,"mapLayerId",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$1P.prototype,"gdbVersion",void 0),c$1P=a$1E=e$2a([n$2L("esri.layers.support.source.MapLayerSource")],c$1P);var c$1O;let a$1D=c$1O=class extends l$2v{constructor(_t){super(_t),this.type="query-table"}clone(){var Nt;const{workspaceId:_t,query:Tt,oidFields:Mt,spatialReference:Pt,geometryType:Ft}=this,Dt={workspaceId:_t,query:Tt,oidFields:Mt,spatialReference:(Nt=Pt==null?void 0:Pt.clone())!=null?Nt:void 0,geometryType:Ft};return new c$1O(Dt)}};e$2a([r$1r({queryTable:"query-table"})],a$1D.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0}})],a$1D.prototype,"workspaceId",void 0),e$2a([d$25({type:String,json:{write:!0}})],a$1D.prototype,"query",void 0),e$2a([d$25({type:String,json:{write:!0}})],a$1D.prototype,"oidFields",void 0),e$2a([d$25({type:k$y,json:{write:!0}})],a$1D.prototype,"spatialReference",void 0),e$2a([r$1r(i$2j)],a$1D.prototype,"geometryType",void 0),a$1D=c$1O=e$2a([n$2L("esri.layers.support.source.QueryTableDataSource")],a$1D);var p$22;let a$1C=p$22=class extends l$2v{constructor(_t){super(_t),this.type="raster"}clone(){const{workspaceId:_t,dataSourceName:Tt}=this;return new p$22({workspaceId:_t,dataSourceName:Tt})}};e$2a([r$1r({raster:"raster"})],a$1C.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0}})],a$1C.prototype,"dataSourceName",void 0),e$2a([d$25({type:String,json:{write:!0}})],a$1C.prototype,"workspaceId",void 0),a$1C=p$22=e$2a([n$2L("esri.layers.support.source.RasterDataSource")],a$1C);var p$21;let a$1B=p$21=class extends l$2v{constructor(_t){super(_t),this.type="table"}clone(){const{workspaceId:_t,gdbVersion:Tt,dataSourceName:Mt}=this;return new p$21({workspaceId:_t,gdbVersion:Tt,dataSourceName:Mt})}};e$2a([r$1r({table:"table"})],a$1B.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0}})],a$1B.prototype,"workspaceId",void 0),e$2a([d$25({type:String,json:{write:!0}})],a$1B.prototype,"gdbVersion",void 0),e$2a([d$25({type:String,json:{write:!0}})],a$1B.prototype,"dataSourceName",void 0),a$1B=p$21=e$2a([n$2L("esri.layers.support.source.TableDataSource")],a$1B);var d$1c,m$1c;const j$B=o$1O()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let T$k=d$1c=class extends l$2v{constructor(_t){super(_t),this.type="join-table"}readLeftTableSource(_t,Tt,Mt){return g$M()(_t,Tt,Mt)}castLeftTableSource(_t){return N$v(L$j(),_t)}readRightTableSource(_t,Tt,Mt){return g$M()(_t,Tt,Mt)}castRightTableSource(_t){return N$v(L$j(),_t)}clone(){var Nt,Vt;const{leftTableKey:_t,rightTableKey:Tt,leftTableSource:Mt,rightTableSource:Pt,joinType:Ft}=this,Dt={leftTableKey:_t,rightTableKey:Tt,leftTableSource:(Nt=Mt==null?void 0:Mt.clone())!=null?Nt:void 0,rightTableSource:(Vt=Pt==null?void 0:Pt.clone())!=null?Vt:void 0,joinType:Ft};return new d$1c(Dt)}};e$2a([r$1r({joinTable:"join-table"})],T$k.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0}})],T$k.prototype,"leftTableKey",void 0),e$2a([d$25({type:String,json:{write:!0}})],T$k.prototype,"rightTableKey",void 0),e$2a([d$25({json:{write:!0}})],T$k.prototype,"leftTableSource",void 0),e$2a([o$1U("leftTableSource")],T$k.prototype,"readLeftTableSource",null),e$2a([s$23("leftTableSource")],T$k.prototype,"castLeftTableSource",null),e$2a([d$25({json:{write:!0}})],T$k.prototype,"rightTableSource",void 0),e$2a([o$1U("rightTableSource")],T$k.prototype,"readRightTableSource",null),e$2a([s$23("rightTableSource")],T$k.prototype,"castRightTableSource",null),e$2a([r$1r(j$B)],T$k.prototype,"joinType",void 0),T$k=d$1c=e$2a([n$2L("esri.layers.support.source.JoinTableDataSource")],T$k);let h$W=null;function g$M(){return h$W||(h$W=s$2d({types:L$j()})),h$W}let v$H=null;function L$j(){return v$H||(v$H={key:"type",base:null,typeMap:{"data-layer":K$7,"map-layer":c$1P}}),v$H}const w$D={key:"type",base:null,typeMap:{"join-table":T$k,"query-table":a$1D,raster:a$1C,table:a$1B}};let K$7=m$1c=class extends l$2v{constructor(_t){super(_t),this.type="data-layer"}clone(){const{fields:_t,dataSource:Tt}=this;return new m$1c({fields:_t,dataSource:Tt})}};e$2a([r$1r({dataLayer:"data-layer"})],K$7.prototype,"type",void 0),e$2a([d$25({type:[y$$],json:{write:!0}})],K$7.prototype,"fields",void 0),e$2a([d$25({types:w$D,json:{write:!0}})],K$7.prototype,"dataSource",void 0),K$7=m$1c=e$2a([n$2L("esri.layers.support.source.DataLayerSource")],K$7),K$7.from=b$1b(K$7);function e$13(_t,Tt){return Tt?{...Tt,query:{..._t,...Tt.query}}:{query:_t}}function n$1B(_t){return typeof _t=="string"?j$10(_t):m$2e(_t)}function o$_(_t,Tt,Mt){const Pt={};for(const Ft in _t){if(Ft==="declaredClass")continue;const Dt=_t[Ft];if(Dt!=null&&typeof Dt!="function")if(Array.isArray(Dt)){Pt[Ft]=[];for(let Nt=0;Nt<Dt.length;Nt++)Pt[Ft][Nt]=o$_(Dt[Nt])}else if(typeof Dt=="object")if(Dt.toJSON){const Nt=Dt.toJSON(Mt&&Mt[Ft]);Pt[Ft]=Tt?Nt:JSON.stringify(Nt)}else Pt[Ft]=Tt?Dt:JSON.stringify(Dt);else Pt[Ft]=Dt}return Pt}const r$T={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new m$1R({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:k$y.WebMercator}),minus180Line:new m$1R({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:k$y.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new m$1R({paths:[[[180,-180],[180,180]]],spatialReference:k$y.WGS84}),minus180Line:new m$1R({paths:[[[-180,-180],[-180,180]]],spatialReference:k$y.WGS84})}};function i$1v(_t,Tt){return Math.ceil((_t-Tt)/(2*Tt))}function s$1a(_t,Tt){const Mt=o$Z(_t);for(const Pt of Mt)for(const Ft of Pt)Ft[0]+=Tt;return _t}function o$Z(_t){return c$2R(_t)?_t.rings:_t.paths}async function o$Y(_t,Tt,Mt,Pt){const Ft=typeof _t=="string"?j$10(_t):_t,Dt=Tt[0].spatialReference,Nt={...Pt,query:{...Ft.query,f:"json",sr:JSON.stringify(Dt),target:JSON.stringify({geometryType:v$U(Tt[0]),geometries:Tt}),cutter:JSON.stringify(Mt)}},Vt=await U$v(Ft.path+"/cut",Nt),{cutIndexes:zt,geometries:Xt=[]}=Vt.data;return{cutIndexes:zt,geometries:Xt.map(Ht=>{const Wt=d$1M(Ht);return Wt.spatialReference=Dt,Wt})}}async function i$1u(_t,Tt,Mt){const Pt=typeof _t=="string"?j$10(_t):_t,Ft=Tt[0].spatialReference,Dt=v$U(Tt[0]),Nt={...Mt,query:{...Pt.query,f:"json",sr:Ft.wkid?Ft.wkid:JSON.stringify(Ft),geometries:JSON.stringify(s$19(Tt))}};return n$1A((await U$v(Pt.path+"/simplify",Nt)).data,Dt,Ft)}function s$19(_t){return{geometryType:v$U(_t[0]),geometries:_t.map(Tt=>Tt.toJSON())}}function n$1A(_t,Tt,Mt){const Pt=a$2x(Tt);return _t.map(Ft=>{const Dt=Pt.fromJSON(Ft);return Dt.spatialReference=Mt,Dt})}const y$_=s$2l.getLogger("esri.geometry.support.normalizeUtils");function x$u(_t){return _t.type==="polygon"}function d$1b(_t){return _t[0].type==="polygon"}function w$C(_t){return _t[0].type==="polyline"}function M$p(_t,Tt){if(!(_t instanceof m$1R||_t instanceof v$V)){const Ft="straightLineDensify: the input geometry is neither polyline nor polygon";throw y$_.error(Ft),new s$2i(Ft)}const Mt=o$Z(_t),Pt=[];for(const Ft of Mt){const Dt=[];Pt.push(Dt),Dt.push([Ft[0][0],Ft[0][1]]);for(let Nt=0;Nt<Ft.length-1;Nt++){const Vt=Ft[Nt][0],zt=Ft[Nt][1],Xt=Ft[Nt+1][0],Ht=Ft[Nt+1][1],Wt=Math.sqrt((Xt-Vt)*(Xt-Vt)+(Ht-zt)*(Ht-zt)),Qt=(Ht-zt)/Wt,Zt=(Xt-Vt)/Wt,Kt=Wt/Tt;if(Kt>1){for(let ir=1;ir<=Kt-1;ir++){const nr=ir*Tt,ar=Zt*nr+Vt,or=Qt*nr+zt;Dt.push([ar,or])}const er=(Wt+Math.floor(Kt-1)*Tt)/2,Yt=Zt*er+Vt,rr=Qt*er+zt;Dt.push([Yt,rr])}Dt.push([Xt,Ht])}}return x$u(_t)?new v$V({rings:Pt,spatialReference:_t.spatialReference}):new m$1R({paths:Pt,spatialReference:_t.spatialReference})}function R$h(_t,Tt,Mt){if(Tt){const Pt=M$p(_t,1e6);_t=j$_(Pt,!0)}return Mt&&(_t=s$1a(_t,Mt)),_t}function b$J(_t,Tt,Mt){if(Array.isArray(_t)){const Pt=_t[0];if(Pt>Tt){const Ft=i$1v(Pt,Tt);_t[0]=Pt+Ft*(-2*Tt)}else if(Pt<Mt){const Ft=i$1v(Pt,Mt);_t[0]=Pt+Ft*(-2*Mt)}}else{const Pt=_t.x;if(Pt>Tt){const Ft=i$1v(Pt,Tt);_t=_t.clone().offset(Ft*(-2*Tt),0)}else if(Pt<Mt){const Ft=i$1v(Pt,Mt);_t=_t.clone().offset(Ft*(-2*Mt),0)}}return _t}function P$g(_t,Tt){let Mt=-1;for(let Pt=0;Pt<Tt.cutIndexes.length;Pt++){const Ft=Tt.cutIndexes[Pt],Dt=Tt.geometries[Pt],Nt=o$Z(Dt);for(let Vt=0;Vt<Nt.length;Vt++){const zt=Nt[Vt];zt.some(Xt=>{if(Xt[0]<180)return!0;{let Ht=0;for(let Qt=0;Qt<zt.length;Qt++){const Zt=zt[Qt][0];Ht=Zt>Ht?Zt:Ht}Ht=Number(Ht.toFixed(9));const Wt=-360*i$1v(Ht,180);for(let Qt=0;Qt<zt.length;Qt++){const Zt=Dt.getPoint(Vt,Qt);Dt.setPoint(Vt,Qt,Zt.clone().offset(Wt,0))}return!0}})}if(Ft===Mt){if(d$1b(_t))for(const Vt of o$Z(Dt))_t[Ft]=_t[Ft].addRing(Vt);else if(w$C(_t))for(const Vt of o$Z(Dt))_t[Ft]=_t[Ft].addPath(Vt)}else Mt=Ft,_t[Ft]=Dt}return _t}async function L$i(_t,Tt,Mt){var ar;if(!Array.isArray(_t))return L$i([_t],Tt);Tt&&typeof Tt!="string"&&y$_.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const Pt=typeof Tt=="string"?Tt:(ar=Tt==null?void 0:Tt.url)!=null?ar:r$1O.geometryServiceUrl;let Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt,Qt=0;const Zt=[],Kt=[];for(const or of _t)if(t$2e(or))Kt.push(or);else if(Ft||(Ft=or.spatialReference,Dt=R$x(Ft),Nt=Ft.isWebMercator,Xt=Nt?102100:4326,Vt=r$T[Xt].maxX,zt=r$T[Xt].minX,Ht=r$T[Xt].plus180Line,Wt=r$T[Xt].minus180Line),Dt)if(or.type==="mesh")Kt.push(or);else if(or.type==="point")Kt.push(b$J(or.clone(),Vt,zt));else if(or.type==="multipoint"){const ur=or.clone();ur.points=ur.points.map(dr=>b$J(dr,Vt,zt)),Kt.push(ur)}else if(or.type==="extent"){const ur=or.clone()._normalize(!1,!1,Dt);Kt.push(ur.rings?new v$V(ur):ur)}else if(or.extent){const ur=or.extent,dr=i$1v(ur.xmin,zt)*(2*Vt);let hr=dr===0?or.clone():s$1a(or.clone(),dr);ur.offset(dr,0),ur.intersects(Ht)&&ur.xmax!==Vt?(Qt=ur.xmax>Qt?ur.xmax:Qt,hr=R$h(hr,Nt),Zt.push(hr),Kt.push("cut")):ur.intersects(Wt)&&ur.xmin!==zt?(Qt=ur.xmax*(2*Vt)>Qt?ur.xmax*(2*Vt):Qt,hr=R$h(hr,Nt,360),Zt.push(hr),Kt.push("cut")):Kt.push(hr)}else Kt.push(or.clone());else Kt.push(or);let er=i$1v(Qt,Vt),Yt=-90;const rr=er,ir=new m$1R;for(;er>0;){const or=360*er-180;ir.addPath([[or,Yt],[or,-1*Yt]]),Yt*=-1,er--}if(Zt.length>0&&rr>0){const or=P$g(Zt,await o$Y(Pt,Zt,ir,Mt)),ur=[],dr=[];for(let pr=0;pr<Kt.length;pr++){const mr=Kt[pr];if(mr!=="cut")dr.push(mr);else{const wr=or.shift(),br=_t[pr];r$1P(br)&&br.type==="polygon"&&br.rings&&br.rings.length>1&&wr.rings.length>=br.rings.length?(ur.push(wr),dr.push("simplify")):dr.push(Nt?R$v(wr):wr)}}if(!ur.length)return dr;const hr=await i$1u(Pt,ur,Mt),gr=[];for(let pr=0;pr<dr.length;pr++){const mr=dr[pr];mr!=="simplify"?gr.push(mr):gr.push(Nt?R$v(hr.shift()):hr.shift())}return gr}const nr=[];for(let or=0;or<Kt.length;or++){const ur=Kt[or];if(ur!=="cut")nr.push(ur);else{const dr=Zt.shift();nr.push(Nt===!0?R$v(dr):dr)}}return nr}function z$i(_t,Tt){const Mt=R$x(Tt);if(Mt){const[Pt,Ft]=Mt.valid,Dt=Ft-Pt;if(_t<Pt)for(;_t<Pt;)_t+=Dt;if(_t>Ft)for(;_t>Ft;)_t-=Dt}return _t}function t$14(_t){const Tt={};for(const Mt in _t){if(Mt==="declaredClass")continue;const Pt=_t[Mt];if(Pt!=null&&typeof Pt!="function")if(Array.isArray(Pt)){Tt[Mt]=[];for(let Ft=0;Ft<Pt.length;Ft++)Tt[Mt][Ft]=t$14(Pt[Ft])}else typeof Pt=="object"?Pt.toJSON&&(Tt[Mt]=JSON.stringify(Pt)):Tt[Mt]=Pt}return Tt}var i$1t;(function(_t){_t[_t.varint=0]="varint",_t[_t.fixed64=1]="fixed64",_t[_t.delimited=2]="delimited",_t[_t.fixed32=5]="fixed32",_t[_t.unknown=99]="unknown"})(i$1t||(i$1t={}));const s$18=4294967296,r$S=new TextDecoder("utf-8"),n$1z=a$32("safari")||a$32("ios")?6:a$32("ff")?12:32;class a$1A{constructor(Tt,Mt,Pt=0,Ft=Tt?Tt.byteLength:0){this._tag=0,this._dataType=i$1t.unknown,this._init(Tt,Mt,Pt,Ft)}_init(Tt,Mt,Pt,Ft){this._data=Tt,this._dataView=Mt,this._pos=Pt,this._end=Ft}clone(){return new a$1A(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(Tt){this._pos=Tt}nextTag(Tt){for(;;){if(this._pos===this._end)return!1;const Mt=this._decodeVarint();if(this._tag=Mt>>3,this._dataType=7&Mt,!Tt||Tt===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const Tt=this._decodeVarint();return this._tag=Tt>>3,this._dataType=7&Tt,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let Tt=4294967295;return Tt=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?Tt:(Tt=(Tt|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?Tt:(Tt=(Tt|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?Tt:(Tt=(Tt|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?Tt:(Tt=(Tt|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?Tt:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const Tt=this.getUInt32();return Tt>>>1^-(1&Tt)|0}getSInt64(){return this._decodeSVarint()}getBool(){const Tt=this._data[this._pos]!==0;return this._skip(1),Tt}getEnum(){return this._decodeVarint()}getFixed64(){const Tt=this._dataView,Mt=this._pos,Pt=Tt.getUint32(Mt,!0)+Tt.getUint32(Mt+4,!0)*s$18;return this._skip(8),Pt}getSFixed64(){const Tt=this._dataView,Mt=this._pos,Pt=Tt.getUint32(Mt,!0)+Tt.getInt32(Mt+4,!0)*s$18;return this._skip(8),Pt}getDouble(){const Tt=this._dataView.getFloat64(this._pos,!0);return this._skip(8),Tt}getFixed32(){const Tt=this._dataView.getUint32(this._pos,!0);return this._skip(4),Tt}getSFixed32(){const Tt=this._dataView.getInt32(this._pos,!0);return this._skip(4),Tt}getFloat(){const Tt=this._dataView.getFloat32(this._pos,!0);return this._skip(4),Tt}getString(){const Tt=this._getLength(),Mt=this._pos,Pt=this._toString(this._data,Mt,Mt+Tt);return this._skip(Tt),Pt}getBytes(){const Tt=this._getLength(),Mt=this._pos,Pt=this._toBytes(this._data,Mt,Mt+Tt);return this._skip(Tt),Pt}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(Tt,Mt,Pt,Ft){const Dt=this.getMessage(),Nt=Tt(Dt,Mt,Pt,Ft);return Dt.release(),Nt}processMessage(Tt){const Mt=this.getMessage(),Pt=Tt(Mt);return Mt.release(),Pt}getMessage(){const Tt=this._getLength(),Mt=a$1A.pool.acquire();return Mt._init(this._data,this._dataView,this._pos,this._pos+Tt),this._skip(Tt),Mt}release(){a$1A.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case i$1t.varint:this._decodeVarint();break;case i$1t.fixed64:this._skip(8);break;case i$1t.delimited:this._skip(this._getLength());break;case i$1t.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(Tt){this._skip(Tt)}_skip(Tt){if(this._pos+Tt>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=Tt}_decodeVarint(){const Tt=this._data;let Mt,Pt=this._pos,Ft=0;if(this._end-Pt>=10)do{if(Mt=Tt[Pt++],Ft|=127&Mt,(128&Mt)==0||(Mt=Tt[Pt++],Ft|=(127&Mt)<<7,(128&Mt)==0)||(Mt=Tt[Pt++],Ft|=(127&Mt)<<14,(128&Mt)==0)||(Mt=Tt[Pt++],Ft|=(127&Mt)<<21,(128&Mt)==0)||(Mt=Tt[Pt++],Ft+=268435456*(127&Mt),(128&Mt)==0)||(Mt=Tt[Pt++],Ft+=34359738368*(127&Mt),(128&Mt)==0)||(Mt=Tt[Pt++],Ft+=4398046511104*(127&Mt),(128&Mt)==0)||(Mt=Tt[Pt++],Ft+=562949953421312*(127&Mt),(128&Mt)==0)||(Mt=Tt[Pt++],Ft+=72057594037927940*(127&Mt),(128&Mt)==0)||(Mt=Tt[Pt++],Ft+=9223372036854776e3*(127&Mt),(128&Mt)==0))break;throw new Error("Varint too long!")}while(0);else{let Dt=1;for(;Pt!==this._end&&(Mt=Tt[Pt],(128&Mt)!=0);)++Pt,Ft+=(127&Mt)*Dt,Dt*=128;if(Pt===this._end)throw new Error("Varint overrun!");++Pt,Ft+=Mt*Dt}return this._pos=Pt,Ft}_decodeSVarint(){const Tt=this._decodeVarint();return Tt%2?-(Tt+1)/2:Tt/2}_getLength(){if(this._dataType!==i$1t.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(Tt,Mt,Pt){if((Pt=Math.min(this._end,Pt))-Mt>n$1z){const Nt=Tt.subarray(Mt,Pt);return r$S.decode(Nt)}let Ft="",Dt="";for(let Nt=Mt;Nt<Pt;++Nt){const Vt=Tt[Nt];128&Vt?Dt+="%"+Vt.toString(16):(Ft+=decodeURIComponent(Dt)+String.fromCharCode(Vt),Dt="")}return Dt.length&&(Ft+=decodeURIComponent(Dt)),Ft}_toBytes(Tt,Mt,Pt){return Pt=Math.min(this._end,Pt),new Uint8Array(Tt.buffer,Mt,Pt-Mt)}}a$1A.pool=new e$29(a$1A,null,_t=>{_t._data=null,_t._dataView=null});class t$13{constructor(Tt=[],Mt=[],Pt=!1){this.lengths=Tt!=null?Tt:[],this.coords=Mt!=null?Mt:[],this.hasIndeterminateRingOrder=Pt}static fromRect(Tt){const[Mt,Pt,Ft,Dt]=Tt,Nt=Ft-Mt,Vt=Dt-Pt;return new t$13([5],[Mt,Pt,Nt,0,0,Vt,-Nt,0,0,-Vt])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((Tt,Mt)=>Tt+Mt)}forEachVertex(Tt){let Mt=0;this.lengths.length||Tt(this.coords[0],this.coords[1]);for(let Pt=0;Pt<this.lengths.length;Pt++){const Ft=this.lengths[Pt];for(let Dt=0;Dt<Ft;Dt++)Tt(this.coords[2*(Dt+Mt)],this.coords[2*(Dt+Mt)+1]);Mt+=Ft}}clone(Tt){return Tt?(Tt.set(this.coords),new t$13(this.lengths.slice(),Tt,this.hasIndeterminateRingOrder)):new t$13(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class s$17{constructor(Tt=null,Mt={},Pt,Ft){this.geometry=Tt,this.attributes=Mt,this.centroid=Pt,this.objectId=Ft,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const Tt=new s$17(this.geometry,this.attributes,this.centroid,this.objectId);return Tt.displayId=this.displayId,Tt.geohashX=this.geohashX,Tt.geohashY=this.geohashY,Tt}}function e$12(_t){return!(t$2e(_t.geometry)||!_t.geometry.coords||!_t.geometry.coords.length)}class o$X extends s$17{}class e$11{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const Tt=new e$11;return Tt.objectIdFieldName=this.objectIdFieldName,Tt.globalIdFieldName=this.globalIdFieldName,Tt.geohashFieldName=this.geohashFieldName,Tt.geometryProperties=this.geometryProperties,Tt.geometryType=this.geometryType,Tt.spatialReference=this.spatialReference,Tt.hasZ=this.hasZ,Tt.hasM=this.hasM,Tt.features=this.features,Tt.fields=this.fields,Tt.transform=this.transform,Tt.exceededTransferLimit=this.exceededTransferLimit,Tt.uniqueIdField=this.uniqueIdField,Tt.queryGeometry=this.queryGeometry,Tt.queryGeometryType=this.queryGeometryType,Tt}}const n$1y=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class a$1z{constructor(Tt){this.options=Tt,this.geometryTypes=n$1y,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new e$11}prepareFeatures(Tt){this._vertexDimension=2,Tt.hasZ&&this._vertexDimension++,Tt.hasM&&this._vertexDimension++}finishFeatureResult(Tt){if(!Tt||!Tt.features||!Tt.hasZ||!this.options.sourceSpatialReference||!Tt.spatialReference||E$G(Tt.spatialReference,this.options.sourceSpatialReference)||Tt.spatialReference.vcsWkid)return;const Mt=W$8(this.options.sourceSpatialReference)/W$8(Tt.spatialReference);if(Mt!==1)for(const Pt of Tt.features){if(!e$12(Pt))continue;const Ft=Pt.geometry.coords;for(let Dt=2;Dt<Ft.length;Dt+=3)Ft[Dt]*=Mt}}addFeature(Tt,Mt){Tt.features.push(Mt)}createFeature(){return new s$17}createSpatialReference(){return{wkid:0}}createGeometry(){return new t$13}addField(Tt,Mt){Tt.fields.push(Mt)}allocateCoordinates(Tt){Tt.coords.length=Tt.lengths.reduce((Mt,Pt)=>Mt+Pt,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(Tt,Mt){Tt.coords[this._coordinatePtr++]=Mt}addCoordinatePoint(Tt,Mt){Tt.coords.push(Mt)}addLength(Tt,Mt){Tt.lengths.push(Mt)}addQueryGeometry(Tt,Mt){Tt.queryGeometry=Mt.queryGeometry,Tt.queryGeometryType=Mt.queryGeometryType}createPointGeometry(){return new t$13}}const n$1x=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],o$W=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],i$1s=["upperLeft","lowerLeft"];function c$1N(_t){return _t>=n$1x.length?null:n$1x[_t]}function l$1j(_t){return _t>=o$W.length?null:o$W[_t]}function g$L(_t){return _t>=i$1s.length?null:i$1s[_t]}function p$20(_t,Tt){return Tt>=_t.geometryTypes.length?null:_t.geometryTypes[Tt]}function u$15(_t,Tt,Mt){const Ft=Tt.createPointGeometry(Mt);for(;_t.next();)switch(_t.tag()){case 3:{const Dt=_t.getUInt32(),Nt=_t.pos()+Dt;let Vt=0;for(;_t.pos()<Nt;)Tt.addCoordinatePoint(Ft,_t.getSInt64(),Vt++);break}default:_t.skip()}return Ft}function y$Z(_t,Tt,Mt){const Dt=Tt.createGeometry(Mt),Nt=2+(Mt.hasZ?1:0)+(Mt.hasM?1:0);for(;_t.next();)switch(_t.tag()){case 2:{const Vt=_t.getUInt32(),zt=_t.pos()+Vt;let Xt=0;for(;_t.pos()<zt;)Tt.addLength(Dt,_t.getUInt32(),Xt++);break}case 3:{const Vt=_t.getUInt32(),zt=_t.pos()+Vt;let Xt=0;for(Tt.allocateCoordinates(Dt);_t.pos()<zt;)Tt.addCoordinate(Dt,_t.getSInt64(),Xt),Xt++,Xt===Nt&&(Xt=0);break}default:_t.skip()}return Dt}function b$I(_t){const Ft=new t$13;let Dt="esriGeometryPoint";for(;_t.next();)switch(_t.tag()){case 2:{const Nt=_t.getUInt32(),Vt=_t.pos()+Nt;for(;_t.pos()<Vt;)Ft.lengths.push(_t.getUInt32());break}case 3:{const Nt=_t.getUInt32(),Vt=_t.pos()+Nt;for(;_t.pos()<Vt;)Ft.coords.push(_t.getSInt64());break}case 1:Dt=n$1y[_t.getEnum()];break;default:_t.skip()}return{queryGeometry:Ft,queryGeometryType:Dt}}function f$V(_t){for(;_t.next();)switch(_t.tag()){case 1:return _t.getString();case 2:return _t.getFloat();case 3:return _t.getDouble();case 4:return _t.getSInt32();case 5:return _t.getUInt32();case 6:return _t.getInt64();case 7:return _t.getUInt64();case 8:return _t.getSInt64();case 9:return _t.getBool();default:return _t.skip(),null}return null}function k$f(_t){const Vt={type:c$1N(0)};for(;_t.next();)switch(_t.tag()){case 1:Vt.name=_t.getString();break;case 2:Vt.type=c$1N(_t.getEnum());break;case 3:Vt.alias=_t.getString();break;case 4:Vt.sqlType=l$1j(_t.getEnum());break;case 5:_t.skip();break;case 6:Vt.defaultValue=_t.getString();break;default:_t.skip()}return Vt}function d$1a(_t){const Pt={};for(;_t.next();)switch(_t.tag()){case 1:Pt.name=_t.getString();break;case 2:Pt.isSystemMaintained=_t.getBool();break;default:_t.skip()}return Pt}function m$1b(_t,Tt,Mt,Pt){const Vt=Tt.createFeature(Mt);let zt=0;for(;_t.next();)switch(_t.tag()){case 1:{const Xt=Pt[zt++].name;Vt.attributes[Xt]=_t.processMessage(f$V);break}case 2:Vt.geometry=_t.processMessageWithArgs(y$Z,Tt,Mt);break;case 4:Vt.centroid=_t.processMessageWithArgs(u$15,Tt,Mt);break;default:_t.skip()}return Vt}function h$V(_t){const Dt=[1,1,1,1];for(;_t.next();)switch(_t.tag()){case 1:Dt[0]=_t.getDouble();break;case 2:Dt[1]=_t.getDouble();break;case 4:Dt[2]=_t.getDouble();break;case 3:Dt[3]=_t.getDouble();break;default:_t.skip()}return Dt}function T$j(_t){const Dt=[0,0,0,0];for(;_t.next();)switch(_t.tag()){case 1:Dt[0]=_t.getDouble();break;case 2:Dt[1]=_t.getDouble();break;case 4:Dt[2]=_t.getDouble();break;case 3:Dt[3]=_t.getDouble();break;default:_t.skip()}return Dt}function q$b(_t){const Ft={originPosition:g$L(0)};for(;_t.next();)switch(_t.tag()){case 1:Ft.originPosition=g$L(_t.getEnum());break;case 2:Ft.scale=_t.processMessage(h$V);break;case 3:Ft.translate=_t.processMessage(T$j);break;default:_t.skip()}return Ft}function I$m(_t){const Ft={};for(;_t.next();)switch(_t.tag()){case 1:Ft.shapeAreaFieldName=_t.getString();break;case 2:Ft.shapeLengthFieldName=_t.getString();break;case 3:Ft.units=_t.getString();break;default:_t.skip()}return Ft}function F$l(_t,Tt){const Vt=Tt.createSpatialReference();for(;_t.next();)switch(_t.tag()){case 1:Vt.wkid=_t.getUInt32();break;case 5:Vt.wkt=_t.getString();break;case 2:Vt.latestWkid=_t.getUInt32();break;case 3:Vt.vcsWkid=_t.getUInt32();break;case 4:Vt.latestVcsWkid=_t.getUInt32();break;default:_t.skip()}return Vt}function S$r(_t,Tt){const er=Tt.createFeatureResult();er.geometryType=p$20(Tt,0);let Yt=!1;for(;_t.next();)switch(_t.tag()){case 1:er.objectIdFieldName=_t.getString();break;case 3:er.globalIdFieldName=_t.getString();break;case 4:er.geohashFieldName=_t.getString();break;case 5:er.geometryProperties=_t.processMessage(I$m);break;case 7:er.geometryType=p$20(Tt,_t.getEnum());break;case 8:er.spatialReference=_t.processMessageWithArgs(F$l,Tt);break;case 10:er.hasZ=_t.getBool();break;case 11:er.hasM=_t.getBool();break;case 12:er.transform=_t.processMessage(q$b);break;case 9:{const rr=_t.getBool();er.exceededTransferLimit=rr;break}case 13:Tt.addField(er,_t.processMessage(k$f));break;case 15:Yt||(Tt.prepareFeatures(er),Yt=!0),Tt.addFeature(er,_t.processMessageWithArgs(m$1b,Tt,er,er.fields));break;case 2:er.uniqueIdField=_t.processMessage(d$1a);break;default:_t.skip()}return Tt.finishFeatureResult(er),er}function w$B(_t,Tt){const Ft={};let Dt=null;for(;_t.next();)switch(_t.tag()){case 4:Dt=_t.processMessageWithArgs(b$I);break;case 1:Ft.featureResult=_t.processMessageWithArgs(S$r,Tt);break;default:_t.skip()}return r$1P(Dt)&&Ft.featureResult&&Tt.addQueryGeometry(Ft,Dt),Ft}function D$j(_t,Tt){try{const Pt=new a$1A(new Uint8Array(_t),new DataView(_t)),Ft={};for(;Pt.next();)Pt.tag()===2?Ft.queryResult=Pt.processMessageWithArgs(w$B,Tt):Pt.skip();return Ft}catch(Mt){throw new s$2i("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:Mt})}}function t$12(_t,Tt){const Mt=D$j(_t,Tt),Pt=Mt.queryResult.featureResult,Ft=Mt.queryResult.queryGeometry,Dt=Mt.queryResult.queryGeometryType;if(Pt&&Pt.features&&Pt.features.length&&Pt.objectIdFieldName){const Nt=Pt.objectIdFieldName;for(const Vt of Pt.features)Vt.attributes&&(Vt.objectId=Vt.attributes[Nt])}return Pt&&(Pt.queryGeometry=Ft,Pt.queryGeometryType=Dt),Pt}function r$R(_t,Tt,Mt){if(!Mt||!Mt.features||!Mt.hasZ)return;const Pt=o$1k(Mt.geometryType,Tt,_t.outSpatialReference);if(!t$2e(Pt))for(const Ft of Mt.features)Pt(Ft.geometry)}const l$1i="Layer does not support extent calculation.";function m$1a(_t,Tt){if(Tt&&_t.type==="extent")return`${_t.xmin},${_t.ymin},${_t.xmax},${_t.ymax}`;if(Tt&&_t.type==="point")return`${_t.x},${_t.y}`;const Mt=_t.toJSON();return delete Mt.spatialReference,JSON.stringify(Mt)}function y$Y(_t,Tt){const Mt=_t.geometry,Pt=_t.toJSON();delete Pt.compactGeometryEnabled,delete Pt.defaultSpatialReferenceEnabled;const Ft=Pt;let Dt,Nt,Vt;if(r$1P(Mt)&&(Nt=Mt.spatialReference,Vt=Mt.spatialReference.wkid||JSON.stringify(Mt.spatialReference),Ft.geometryType=v$U(Mt),Ft.geometry=m$1a(Mt,_t.compactGeometryEnabled),Ft.inSR=Vt),Pt.groupByFieldsForStatistics&&(Ft.groupByFieldsForStatistics=Pt.groupByFieldsForStatistics.join(",")),Pt.objectIds&&(Ft.objectIds=Pt.objectIds.join(",")),Pt.orderByFields&&(Ft.orderByFields=Pt.orderByFields.join(",")),!Pt.outFields||!Pt.returnDistinctValues&&((Tt==null?void 0:Tt.returnCountOnly)||(Tt==null?void 0:Tt.returnExtentOnly)||(Tt==null?void 0:Tt.returnIdsOnly))?delete Ft.outFields:Pt.outFields.includes("*")?Ft.outFields="*":Ft.outFields=Pt.outFields.join(","),Pt.outSR?(Ft.outSR=Pt.outSR.wkid||JSON.stringify(Pt.outSR),Dt=_t.outSpatialReference):Mt&&(Pt.returnGeometry||Pt.returnCentroid)&&(Ft.outSR=Ft.inSR,Dt=Nt),Pt.returnGeometry&&delete Pt.returnGeometry,Pt.outStatistics&&(Ft.outStatistics=JSON.stringify(Pt.outStatistics)),Pt.pixelSize&&(Ft.pixelSize=JSON.stringify(Pt.pixelSize)),Pt.quantizationParameters&&(_t.defaultSpatialReferenceEnabled&&r$1P(Nt)&&r$1P(_t.quantizationParameters)&&r$1P(_t.quantizationParameters.extent)&&Nt.equals(_t.quantizationParameters.extent.spatialReference)&&delete Pt.quantizationParameters.extent.spatialReference,Ft.quantizationParameters=JSON.stringify(Pt.quantizationParameters)),Pt.parameterValues&&(Ft.parameterValues=JSON.stringify(Pt.parameterValues)),Pt.rangeValues&&(Ft.rangeValues=JSON.stringify(Pt.rangeValues)),Pt.dynamicDataSource&&(Ft.layer=JSON.stringify({source:Pt.dynamicDataSource}),delete Pt.dynamicDataSource),Pt.timeExtent){const zt=Pt.timeExtent,{start:Xt,end:Ht}=zt;Xt==null&&Ht==null||(Ft.time=Xt===Ht?Xt:`${Xt==null?"null":Xt},${Ht==null?"null":Ht}`),delete Pt.timeExtent}return _t.defaultSpatialReferenceEnabled&&r$1P(Nt)&&r$1P(Dt)&&Nt.equals(Dt)&&(Ft.defaultSR=Ft.inSR,delete Ft.inSR,delete Ft.outSR),Ft}async function c$1M(_t,Tt,Mt,Pt){const Ft=r$1P(Tt.timeExtent)&&Tt.timeExtent.isEmpty?{data:{features:[]}}:await E$r(_t,Tt,"json",Pt);return r$R(Tt,Mt,Ft.data),Ft}async function d$19(_t,Tt,Mt,Pt){if(r$1P(Tt.timeExtent)&&Tt.timeExtent.isEmpty)return{data:Mt.createFeatureResult()};const Ft=await f$U(_t,Tt,Pt),Dt=Ft;return Dt.data=t$12(Ft.data,Mt),Dt}function f$U(_t,Tt,Mt){return E$r(_t,Tt,"pbf",Mt)}function p$1$(_t,Tt,Mt){return r$1P(Tt.timeExtent)&&Tt.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):E$r(_t,Tt,"json",Mt,{returnIdsOnly:!0})}function S$q(_t,Tt,Mt){return r$1P(Tt.timeExtent)&&Tt.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):E$r(_t,Tt,"json",Mt,{returnIdsOnly:!0,returnCountOnly:!0})}function x$t(_t,Tt,Mt){return r$1P(Tt.timeExtent)&&Tt.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):E$r(_t,Tt,"json",Mt,{returnExtentOnly:!0,returnCountOnly:!0}).then(Pt=>{const Ft=Pt.data;if(Ft.hasOwnProperty("extent"))return Pt;if(Ft.features)throw new Error(l$1i);if(Ft.hasOwnProperty("count"))throw new Error(l$1i);return Pt})}function E$r(_t,Tt,Mt,Pt={},Ft={}){const Dt=typeof _t=="string"?j$10(_t):_t,Nt=Tt.geometry?[Tt.geometry]:[];return Pt.responseType=Mt==="pbf"?"array-buffer":"json",L$i(Nt,null,Pt).then(Vt=>{const zt=Vt&&Vt[0];r$1P(zt)&&((Tt=Tt.clone()).geometry=zt);const Xt=t$14({...Dt.query,f:Mt,...Ft,...y$Y(Tt,Ft)});return U$v(G$q(Dt.path,"query"),{...Pt,query:{...Xt,...Pt.query}})})}const query=Object.freeze(Object.defineProperty({__proto__:null,encodeGeometry:m$1a,executeQuery:c$1M,executeQueryForCount:S$q,executeQueryForExtent:x$t,executeQueryForIds:p$1$,executeQueryPBF:d$19,executeQueryPBFBuffer:f$U,queryToQueryStringParameters:y$Y,runQuery:E$r},Symbol.toStringTag,{value:"Module"}));var d$18;const g$K=new s$1_({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let j$A=d$18=class extends l$2v{constructor(_t){super(_t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(_t,Tt){var Ft;const Mt=k$y.fromJSON(Tt.spatialReference),Pt=[];for(let Dt=0;Dt<_t.length;Dt++){const Nt=_t[Dt],Vt=g$$.fromJSON(Nt),zt=Nt.geometry&&Nt.geometry.spatialReference;r$1P(Vt.geometry)&&!zt&&(Vt.geometry.spatialReference=Mt);const Xt=Nt.aggregateGeometries,Ht=Vt.aggregateGeometries;if(Xt&&r$1P(Ht))for(const Wt in Ht){const Qt=Ht[Wt],Zt=(Ft=Xt[Wt])==null?void 0:Ft.spatialReference;r$1P(Qt)&&!Zt&&(Qt.spatialReference=Mt)}Pt.push(Vt)}return Pt}writeGeometryType(_t,Tt,Mt,Pt){if(_t)return void g$K.write(_t,Tt,Mt,Pt);const{features:Ft}=this;if(Ft){for(const Dt of Ft)if(Dt&&r$1P(Dt.geometry))return void g$K.write(Dt.geometry.type,Tt,Mt,Pt)}}readQueryGeometry(_t,Tt){if(!_t)return null;const Mt=!!_t.spatialReference,Pt=d$1M(_t);return!Mt&&Tt.spatialReference&&(Pt.spatialReference=k$y.fromJSON(Tt.spatialReference)),Pt}writeSpatialReference(_t,Tt){if(_t)return void(Tt.spatialReference=_t.toJSON());const{features:Mt}=this;if(Mt){for(const Pt of Mt)if(Pt&&r$1P(Pt.geometry)&&Pt.geometry.spatialReference)return void(Tt.spatialReference=Pt.geometry.spatialReference.toJSON())}}clone(){return new d$18(this.cloneProperties())}cloneProperties(){return m$2e({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(_t){const Tt=this.write();if(Tt.features&&Array.isArray(_t)&&_t.length>0)for(let Mt=0;Mt<Tt.features.length;Mt++){const Pt=Tt.features[Mt];if(Pt.geometry){const Ft=_t&&_t[Mt];Pt.geometry=Ft&&Ft.toJSON()||Pt.geometry}}return Tt}quantize(_t){const{scale:[Tt,Mt],translate:[Pt,Ft]}=_t,Dt=Xt=>Math.round((Xt-Pt)/Tt),Nt=Xt=>Math.round((Ft-Xt)/Mt),Vt=this.features,zt=this._getQuantizationFunction(this.geometryType,Dt,Nt);for(let Xt=0,Ht=Vt.length;Xt<Ht;Xt++)zt(Vt[Xt].geometry)||(Vt.splice(Xt,1),Xt--,Ht--);return this.transform=_t,this}unquantize(){const{geometryType:_t,features:Tt,transform:Mt}=this;if(!Mt)return this;const{translate:[Pt,Ft],scale:[Dt,Nt]}=Mt,Vt=Ht=>Ht*Dt+Pt,zt=Ht=>Ft-Ht*Nt,Xt=this._getHydrationFunction(_t,Vt,zt);for(const{geometry:Ht}of Tt)r$1P(Ht)&&Xt(Ht);return this.transform=null,this}_quantizePoints(_t,Tt,Mt){let Pt,Ft;const Dt=[];for(let Nt=0,Vt=_t.length;Nt<Vt;Nt++){const zt=_t[Nt];if(Nt>0){const Xt=Tt(zt[0]),Ht=Mt(zt[1]);Xt===Pt&&Ht===Ft||(Dt.push([Xt-Pt,Ht-Ft]),Pt=Xt,Ft=Ht)}else Pt=Tt(zt[0]),Ft=Mt(zt[1]),Dt.push([Pt,Ft])}return Dt.length>0?Dt:null}_getQuantizationFunction(_t,Tt,Mt){return _t==="point"?Pt=>(Pt.x=Tt(Pt.x),Pt.y=Mt(Pt.y),Pt):_t==="polyline"||_t==="polygon"?Pt=>{const Ft=c$2R(Pt)?Pt.rings:Pt.paths,Dt=[];for(let Nt=0,Vt=Ft.length;Nt<Vt;Nt++){const zt=Ft[Nt],Xt=this._quantizePoints(zt,Tt,Mt);Xt&&Dt.push(Xt)}return Dt.length>0?(c$2R(Pt)?Pt.rings=Dt:Pt.paths=Dt,Pt):null}:_t==="multipoint"?Pt=>{const Ft=this._quantizePoints(Pt.points,Tt,Mt);return Ft.length>0?(Pt.points=Ft,Pt):null}:_t==="extent"?Pt=>Pt:null}_getHydrationFunction(_t,Tt,Mt){return _t==="point"?Pt=>{Pt.x=Tt(Pt.x),Pt.y=Mt(Pt.y)}:_t==="polyline"||_t==="polygon"?Pt=>{const Ft=c$2R(Pt)?Pt.rings:Pt.paths;let Dt,Nt;for(let Vt=0,zt=Ft.length;Vt<zt;Vt++){const Xt=Ft[Vt];for(let Ht=0,Wt=Xt.length;Ht<Wt;Ht++){const Qt=Xt[Ht];Ht>0?(Dt+=Qt[0],Nt+=Qt[1]):(Dt=Qt[0],Nt=Qt[1]),Qt[0]=Tt(Dt),Qt[1]=Mt(Nt)}}}:_t==="extent"?Pt=>{Pt.xmin=Tt(Pt.xmin),Pt.ymin=Mt(Pt.ymin),Pt.xmax=Tt(Pt.xmax),Pt.ymax=Mt(Pt.ymax)}:_t==="multipoint"?Pt=>{const Ft=Pt.points;let Dt,Nt;for(let Vt=0,zt=Ft.length;Vt<zt;Vt++){const Xt=Ft[Vt];Vt>0?(Dt+=Xt[0],Nt+=Xt[1]):(Dt=Xt[0],Nt=Xt[1]),Xt[0]=Tt(Dt),Xt[1]=Mt(Nt)}}:void 0}};e$2a([d$25({type:String,json:{write:!0}})],j$A.prototype,"displayFieldName",void 0),e$2a([d$25({type:Boolean,json:{write:{overridePolicy:_t=>({enabled:_t})}}})],j$A.prototype,"exceededTransferLimit",void 0),e$2a([d$25({type:[g$$],json:{write:!0}})],j$A.prototype,"features",void 0),e$2a([o$1U("features")],j$A.prototype,"readFeatures",null),e$2a([d$25({type:[y$$],json:{write:!0}})],j$A.prototype,"fields",void 0),e$2a([d$25({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:g$K.read}}})],j$A.prototype,"geometryType",void 0),e$2a([r$1C("geometryType")],j$A.prototype,"writeGeometryType",null),e$2a([d$25({type:Boolean,json:{write:{overridePolicy:_t=>({enabled:_t})}}})],j$A.prototype,"hasM",void 0),e$2a([d$25({type:Boolean,json:{write:{overridePolicy:_t=>({enabled:_t})}}})],j$A.prototype,"hasZ",void 0),e$2a([d$25({types:i$2i,json:{write:!0}})],j$A.prototype,"queryGeometry",void 0),e$2a([o$1U("queryGeometry")],j$A.prototype,"readQueryGeometry",null),e$2a([d$25({type:k$y,json:{write:!0}})],j$A.prototype,"spatialReference",void 0),e$2a([r$1C("spatialReference")],j$A.prototype,"writeSpatialReference",null),e$2a([d$25({json:{write:!0}})],j$A.prototype,"transform",void 0),j$A=d$18=e$2a([n$2L("esri.rest.support.FeatureSet")],j$A),j$A.prototype.toJSON.isDefaultToJSON=!0;const x$s=j$A,FeatureSet=Object.freeze(Object.defineProperty({__proto__:null,default:x$s},Symbol.toStringTag,{value:"Module"})),e$10={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},t$11={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function s$16(_t,Tt){const Mt=new Date(_t,Tt+1,1);return Mt.setDate(0),Mt.getDate()}function n$1w(_t,Tt,Mt){const Pt=new Date(_t.getTime());if(Tt&&Mt){const Ft=t$11[Mt],{getter:Dt,setter:Nt,multiplier:Vt}=Ft;if(Mt==="months"){const zt=s$16(Pt.getFullYear(),Pt.getMonth()+Tt);Pt.getDate()>zt&&Pt.setDate(zt)}Pt[Nt](Pt[Dt]()+Tt*Vt)}return Pt}function l$1h(_t,Tt){switch(Tt){case"milliseconds":return new Date(_t.getTime());case"seconds":return new Date(_t.getFullYear(),_t.getMonth(),_t.getDate(),_t.getHours(),_t.getMinutes(),_t.getSeconds());case"minutes":return new Date(_t.getFullYear(),_t.getMonth(),_t.getDate(),_t.getHours(),_t.getMinutes());case"hours":return new Date(_t.getFullYear(),_t.getMonth(),_t.getDate(),_t.getHours());case"days":return new Date(_t.getFullYear(),_t.getMonth(),_t.getDate());case"weeks":return new Date(_t.getFullYear(),_t.getMonth(),_t.getDate()-_t.getDay());case"months":return new Date(_t.getFullYear(),_t.getMonth(),1);case"years":return new Date(_t.getFullYear(),0,1);case"decades":return new Date(_t.getFullYear()-_t.getFullYear()%10,0,1);case"centuries":return new Date(_t.getFullYear()-_t.getFullYear()%100,0,1);default:return new Date}}function g$J(_t,Tt,Mt){return _t===0?0:_t*e$10[Tt]/e$10[Mt]}var u$14;let d$17=u$14=class extends l$2v{constructor(_t){super(_t),this.end=null,this.start=null}static get allTime(){return c$1L}static get empty(){return h$U}readEnd(_t,Tt){return Tt.end!=null?new Date(Tt.end):null}writeEnd(_t,Tt){Tt.end=_t?_t.getTime():null}get isAllTime(){return this.equals(u$14.allTime)}get isEmpty(){return this.equals(u$14.empty)}readStart(_t,Tt){return Tt.start!=null?new Date(Tt.start):null}writeStart(_t,Tt){Tt.start=_t?_t.getTime():null}clone(){return new u$14({end:this.end,start:this.start})}equals(_t){if(!_t)return!1;const Tt=r$1P(this.start)?this.start.getTime():this.start,Mt=r$1P(this.end)?this.end.getTime():this.end,Pt=r$1P(_t.start)?_t.start.getTime():_t.start,Ft=r$1P(_t.end)?_t.end.getTime():_t.end;return Tt===Pt&&Mt===Ft}expandTo(_t){if(this.isEmpty||this.isAllTime)return this.clone();const Tt=o$2f(this.start,Pt=>l$1h(Pt,_t)),Mt=o$2f(this.end,Pt=>n$1w(l$1h(Pt,_t),1,_t));return new u$14({start:Tt,end:Mt})}intersection(_t){if(!_t)return this.clone();if(this.isEmpty||_t.isEmpty)return u$14.empty;if(this.isAllTime)return _t.clone();if(_t.isAllTime)return this.clone();const Tt=E$M(this.start,-1/0,Vt=>Vt.getTime()),Mt=E$M(this.end,1/0,Vt=>Vt.getTime()),Pt=E$M(_t.start,-1/0,Vt=>Vt.getTime()),Ft=E$M(_t.end,1/0,Vt=>Vt.getTime());let Dt,Nt;if(Pt>=Tt&&Pt<=Mt?Dt=Pt:Tt>=Pt&&Tt<=Ft&&(Dt=Tt),Mt>=Pt&&Mt<=Ft?Nt=Mt:Ft>=Tt&&Ft<=Mt&&(Nt=Ft),!isNaN(Dt)&&!isNaN(Nt)){const Vt=new u$14;return Vt.start=Dt===-1/0?null:new Date(Dt),Vt.end=Nt===1/0?null:new Date(Nt),Vt}return u$14.empty}offset(_t,Tt){if(this.isEmpty||this.isAllTime)return this.clone();const Mt=new u$14,{start:Pt,end:Ft}=this;return r$1P(Pt)&&(Mt.start=n$1w(Pt,_t,Tt)),r$1P(Ft)&&(Mt.end=n$1w(Ft,_t,Tt)),Mt}union(_t){if(!_t||_t.isEmpty)return this.clone();if(this.isEmpty)return _t.clone();if(this.isAllTime||_t.isAllTime)return c$1L.clone();const Tt=r$1P(this.start)&&r$1P(_t.start)?new Date(Math.min(this.start.getTime(),_t.start.getTime())):null,Mt=r$1P(this.end)&&r$1P(_t.end)?new Date(Math.max(this.end.getTime(),_t.end.getTime())):null;return new u$14({start:Tt,end:Mt})}};e$2a([d$25({type:Date,json:{write:{allowNull:!0}}})],d$17.prototype,"end",void 0),e$2a([o$1U("end")],d$17.prototype,"readEnd",null),e$2a([r$1C("end")],d$17.prototype,"writeEnd",null),e$2a([d$25({readOnly:!0,json:{read:!1}})],d$17.prototype,"isAllTime",null),e$2a([d$25({readOnly:!0,json:{read:!1}})],d$17.prototype,"isEmpty",null),e$2a([d$25({type:Date,json:{write:{allowNull:!0}}})],d$17.prototype,"start",void 0),e$2a([o$1U("start")],d$17.prototype,"readStart",null),e$2a([r$1C("start")],d$17.prototype,"writeStart",null),d$17=u$14=e$2a([n$2L("esri.TimeExtent")],d$17);const c$1L=new d$17,h$U=new d$17({start:void 0,end:void 0}),y$X=d$17;var n$1v;const c$1K=new s$1_({upperLeft:"upper-left",lowerLeft:"lower-left"});let m$19=n$1v=class extends l$2v{constructor(_t){super(_t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new n$1v(m$2e({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};e$2a([d$25({type:M$K,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],m$19.prototype,"extent",void 0),e$2a([d$25({type:["view","edit"],json:{write:!0}})],m$19.prototype,"mode",void 0),e$2a([d$25({type:String,json:{read:c$1K.read,write:c$1K.write}})],m$19.prototype,"originPosition",void 0),e$2a([d$25({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],m$19.prototype,"tolerance",void 0),m$19=n$1v=e$2a([n$2L("esri.rest.support.QuantizationParameters")],m$19);const a$1y=m$19;var c$1J;const n$1u=new s$1_({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let p$1_=c$1J=class extends l$2v{constructor(_t){super(_t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(_t,Tt){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(Tt.statisticParameters=m$2e(_t))}clone(){return new c$1J({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:m$2e(this.statisticParameters)})}};e$2a([d$25({type:Number,json:{write:!0}})],p$1_.prototype,"maxPointCount",void 0),e$2a([d$25({type:Number,json:{write:!0}})],p$1_.prototype,"maxRecordCount",void 0),e$2a([d$25({type:Number,json:{write:!0}})],p$1_.prototype,"maxVertexCount",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1_.prototype,"onStatisticField",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1_.prototype,"outStatisticFieldName",void 0),e$2a([d$25({type:String,json:{read:{source:"statisticType",reader:n$1u.read},write:{target:"statisticType",writer:n$1u.write}}})],p$1_.prototype,"statisticType",void 0),e$2a([d$25({type:Object})],p$1_.prototype,"statisticParameters",void 0),e$2a([r$1C("statisticParameters")],p$1_.prototype,"writeStatisticParameters",null),p$1_=c$1J=e$2a([n$2L("esri.rest.support.StatisticDefinition")],p$1_);const m$18=p$1_;var w$A;const v$G=new s$1_({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),g$I=new s$1_({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let R$g=w$A=class extends l$2v{constructor(_t){super(_t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(_t){return v$13(w$A,_t)}castDatumTransformation(_t){return typeof _t=="number"||typeof _t=="object"?_t:null}writeHistoricMoment(_t,Tt){Tt.historicMoment=_t&&_t.getTime()}writeParameterValues(_t,Tt){if(_t){const Mt={};for(const Pt in _t){const Ft=_t[Pt];Array.isArray(Ft)?Mt[Pt]=Ft.map(Dt=>Dt instanceof Date?Dt.getTime():Dt):Ft instanceof Date?Mt[Pt]=Ft.getTime():Mt[Pt]=Ft}Tt.parameterValues=Mt}}writeStart(_t,Tt){Tt.resultOffset=this.start,Tt.resultRecordCount=this.num||10,Tt.where="1=1"}writeWhere(_t,Tt){Tt.where=_t||"1=1"}clone(){return new w$A(m$2e({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:r$1P(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};R$g.MAX_MAX_RECORD_COUNT_FACTOR=5,e$2a([d$25({json:{write:!0}})],R$g.prototype,"aggregateIds",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],R$g.prototype,"cacheHint",void 0),e$2a([d$25({type:Boolean,json:{default:!1,write:!0}})],R$g.prototype,"compactGeometryEnabled",void 0),e$2a([d$25({json:{write:!0}})],R$g.prototype,"datumTransformation",void 0),e$2a([s$23("datumTransformation")],R$g.prototype,"castDatumTransformation",null),e$2a([d$25({type:Boolean,json:{default:!1,write:!0}})],R$g.prototype,"defaultSpatialReferenceEnabled",void 0),e$2a([d$25({type:Number,json:{write:{overridePolicy:_t=>({enabled:_t>0})}}})],R$g.prototype,"distance",void 0),e$2a([d$25({type:K$7,json:{write:!0}})],R$g.prototype,"dynamicDataSource",void 0),e$2a([d$25({type:String,json:{write:!0}})],R$g.prototype,"formatOf3DObjects",void 0),e$2a([d$25({type:String,json:{write:!0}})],R$g.prototype,"gdbVersion",void 0),e$2a([d$25({types:i$2i,json:{read:d$1M,write:!0}})],R$g.prototype,"geometry",void 0),e$2a([d$25({type:Number,json:{write:!0}})],R$g.prototype,"geometryPrecision",void 0),e$2a([d$25({type:[String],json:{write:!0}})],R$g.prototype,"groupByFieldsForStatistics",void 0),e$2a([d$25({type:String,json:{write:!0}})],R$g.prototype,"having",void 0),e$2a([d$25({type:Date})],R$g.prototype,"historicMoment",void 0),e$2a([r$1C("historicMoment")],R$g.prototype,"writeHistoricMoment",null),e$2a([d$25({type:Number,json:{write:!0}})],R$g.prototype,"maxAllowableOffset",void 0),e$2a([d$25({type:Number,cast:_t=>_t<1?1:_t>w$A.MAX_MAX_RECORD_COUNT_FACTOR?w$A.MAX_MAX_RECORD_COUNT_FACTOR:_t,json:{write:{overridePolicy:_t=>({enabled:_t>1})}}})],R$g.prototype,"maxRecordCountFactor",void 0),e$2a([d$25({type:["xyFootprint"],json:{write:!0}})],R$g.prototype,"multipatchOption",void 0),e$2a([d$25({type:Number,json:{read:{source:"resultRecordCount"}}})],R$g.prototype,"num",void 0),e$2a([d$25({json:{write:!0}})],R$g.prototype,"objectIds",void 0),e$2a([d$25({type:[String],json:{write:!0}})],R$g.prototype,"orderByFields",void 0),e$2a([d$25({type:[String],json:{write:!0}})],R$g.prototype,"outFields",void 0),e$2a([d$25({type:k$y,json:{name:"outSR",write:!0}})],R$g.prototype,"outSpatialReference",void 0),e$2a([d$25({type:[m$18],json:{write:{enabled:!0,overridePolicy(){return{enabled:r$1P(this.outStatistics)&&this.outStatistics.length>0}}}}})],R$g.prototype,"outStatistics",void 0),e$2a([d$25({json:{write:!0}})],R$g.prototype,"parameterValues",void 0),e$2a([r$1C("parameterValues")],R$g.prototype,"writeParameterValues",null),e$2a([d$25({type:j$Z,json:{write:!0}})],R$g.prototype,"pixelSize",void 0),e$2a([d$25({type:a$1y,json:{write:!0}})],R$g.prototype,"quantizationParameters",void 0),e$2a([d$25({type:[Object],json:{write:!0}})],R$g.prototype,"rangeValues",void 0),e$2a([d$25({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],R$g.prototype,"relationParameter",void 0),e$2a([d$25({type:String,json:{write:!0}})],R$g.prototype,"resultType",void 0),e$2a([d$25({type:Boolean,json:{default:!1,write:!0}})],R$g.prototype,"returnCentroid",void 0),e$2a([d$25({type:Boolean,json:{default:!1,write:!0}})],R$g.prototype,"returnDistinctValues",void 0),e$2a([d$25({type:Boolean,json:{default:!0,write:!0}})],R$g.prototype,"returnExceededLimitFeatures",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],R$g.prototype,"returnGeometry",void 0),e$2a([d$25({type:Boolean,json:{default:!1,write:!0}})],R$g.prototype,"returnQueryGeometry",void 0),e$2a([d$25({type:Boolean,json:{default:!1,write:!0}})],R$g.prototype,"returnM",void 0),e$2a([d$25({type:Boolean,json:{write:{overridePolicy:_t=>({enabled:_t})}}})],R$g.prototype,"returnZ",void 0),e$2a([d$25({type:k$y,json:{write:!0}})],R$g.prototype,"sourceSpatialReference",void 0),e$2a([r$1r(v$G,{ignoreUnknown:!1,name:"spatialRel"})],R$g.prototype,"spatialRelationship",void 0),e$2a([d$25({type:Number,json:{read:{source:"resultOffset"}}})],R$g.prototype,"start",void 0),e$2a([r$1C("start"),r$1C("num")],R$g.prototype,"writeStart",null),e$2a([d$25({type:String,json:{write:!0}})],R$g.prototype,"sqlFormat",void 0),e$2a([d$25({type:String,json:{write:!0}})],R$g.prototype,"text",void 0),e$2a([d$25({type:y$X,json:{write:!0}})],R$g.prototype,"timeExtent",void 0),e$2a([d$25({type:Boolean,json:{default:!1,write:!0}})],R$g.prototype,"timeReferenceUnknownClient",void 0),e$2a([r$1r(g$I,{ignoreUnknown:!1}),d$25({json:{write:{overridePolicy(_t){return{enabled:_t&&this.distance>0}}}}})],R$g.prototype,"units",void 0),e$2a([d$25({type:String,json:{write:{overridePolicy(_t){return{enabled:_t!=null||this.start>0}}}}})],R$g.prototype,"where",void 0),e$2a([r$1C("where")],R$g.prototype,"writeWhere",null),R$g=w$A=e$2a([n$2L("esri.rest.support.Query")],R$g);const b$H=R$g;async function s$15(_t,Tt,Mt){const Pt=await a$1x(_t,Tt,Mt);return x$s.fromJSON(Pt)}async function a$1x(_t,Tt,Mt){const Pt=n$1B(_t),Ft={...Mt},Dt=b$H.from(Tt),{data:Nt}=await c$1M(Pt,Dt,Dt.sourceSpatialReference,Ft);return Nt}function h$T(_t,Tt){return _t?Tt?4:3:Tt?3:2}const a$1w=s$2l.getLogger("esri.layers.graphics.featureConversionUtils"),g$H={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},d$16=(_t,Tt,Mt,Pt,Ft,Dt)=>{_t[Mt]=Ft,_t[Mt+1]=Dt},m$17=(_t,Tt,Mt,Pt,Ft,Dt)=>{_t[Mt]=Ft,_t[Mt+1]=Dt,_t[Mt+2]=Tt[Pt+2]},y$W=(_t,Tt,Mt,Pt,Ft,Dt)=>{_t[Mt]=Ft,_t[Mt+1]=Dt,_t[Mt+2]=Tt[Pt+3]},p$1Z=(_t,Tt,Mt,Pt,Ft,Dt)=>{_t[Mt]=Ft,_t[Mt+1]=Dt,_t[Mt+2]=Tt[Pt+2],_t[Mt+3]=Tt[Pt+3]};function I$l(_t,Tt,Mt,Pt){if(_t){if(Mt)return Tt&&Pt?p$1Z:m$17;if(Tt&&Pt)return y$W}else if(Tt&&Pt)return m$17;return d$16}function b$G({scale:_t,translate:Tt},Mt){return Math.round((Mt-Tt[0])/_t[0])}function M$o({scale:_t,translate:Tt},Mt){return Math.round((Tt[1]-Mt)/_t[1])}function w$z({scale:_t,translate:Tt},Mt){return Mt*_t[0]+Tt[0]}function N$h({scale:_t,translate:Tt},Mt){return Tt[1]-Mt*_t[1]}function G$c(_t,Tt,Mt){return _t?Tt?Mt?k$e(_t):P$f(_t):Mt?Z$5(_t):T$i(_t):null}function T$i(_t){const Tt=_t.coords;return{x:Tt[0],y:Tt[1]}}function F$k(_t,Tt){return _t.coords[0]=Tt.x,_t.coords[1]=Tt.y,_t}function P$f(_t){const Tt=_t.coords;return{x:Tt[0],y:Tt[1],z:Tt[2]}}function x$r(_t,Tt){return _t.coords[0]=Tt.x,_t.coords[1]=Tt.y,_t.coords[2]=Tt.z,_t}function Z$5(_t){const Tt=_t.coords;return{x:Tt[0],y:Tt[1],m:Tt[2]}}function j$z(_t,Tt){return _t.coords[0]=Tt.x,_t.coords[1]=Tt.y,_t.coords[2]=Tt.m,_t}function k$e(_t){const Tt=_t.coords;return{x:Tt[0],y:Tt[1],z:Tt[2],m:Tt[3]}}function E$q(_t,Tt){return _t.coords[0]=Tt.x,_t.coords[1]=Tt.y,_t.coords[2]=Tt.z,_t.coords[3]=Tt.m,_t}function z$h(_t,Tt,Mt,Pt){let Ft=T$i;Mt&&Pt?Ft=k$e:Mt?Ft=P$f:Pt&&(Ft=Z$5);for(const Dt of Tt){const{geometry:Nt,attributes:Vt}=Dt,zt=r$1P(Nt)?Ft(Nt):null;_t.push({attributes:Vt,geometry:zt})}return _t}function v$F(_t,Tt){return _t&&Tt?E$q:_t?x$r:Tt?j$z:F$k}function S$p(_t,Tt,Mt,Pt,Ft){const Dt=v$F(Mt,Pt);for(const Nt of Tt){const{geometry:Vt,attributes:zt}=Nt;let Xt;Vt&&(Xt=Dt(new t$13,Vt)),_t.push(new s$17(Xt,zt,null,zt[Ft]))}return _t}function Y$4(_t,Tt,Mt,Pt){for(const Ft of Tt){const{geometry:Dt,attributes:Nt}=Ft;let Vt;Dt&&(Vt=_$j(Dt,Mt,Pt)),_t.push({attributes:Nt,geometry:Vt})}return _t}function _$j(_t,Tt,Mt){if(t$2e(_t))return null;const Pt=h$T(Tt,Mt),Ft=[];for(let Dt=0;Dt<_t.coords.length;Dt+=Pt){const Nt=[];for(let Vt=0;Vt<Pt;Vt++)Nt.push(_t.coords[Dt+Vt]);Ft.push(Nt)}return Tt?Mt?{points:Ft,hasZ:Tt,hasM:Mt}:{points:Ft,hasZ:Tt}:Mt?{points:Ft,hasM:Mt}:{points:Ft}}function O$h(_t,Tt,Mt,Pt,Ft){const Dt=h$T(Mt,Pt);for(const Nt of Tt){const Vt=Nt.geometry,zt=Nt.attributes;let Xt;Vt&&(Xt=U$k(new t$13,Vt,Dt)),_t.push(new s$17(Xt,zt,null,zt[Ft]))}return _t}function U$k(_t,Tt,Mt=h$T(Tt.hasZ,Tt.hasM)){_t.lengths[0]=Tt.points.length;const Pt=_t.coords;let Ft=0;for(const Dt of Tt.points)for(let Nt=0;Nt<Mt;Nt++)Pt[Ft++]=Dt[Nt];return _t}function A$d(_t,Tt,Mt,Pt){for(const Ft of Tt){const{geometry:Dt,attributes:Nt}=Ft;let Vt;r$1P(Dt)&&(Vt=L$h(Dt,Mt,Pt)),_t.push({attributes:Nt,geometry:Vt})}return _t}function L$h(_t,Tt,Mt){if(!_t)return null;const Pt=h$T(Tt,Mt),{coords:Ft,lengths:Dt}=_t,Nt=[];let Vt=0;for(const zt of Dt){const Xt=[];for(let Ht=0;Ht<zt;Ht++){const Wt=[];for(let Qt=0;Qt<Pt;Qt++)Wt.push(Ft[Vt++]);Xt.push(Wt)}Nt.push(Xt)}return Tt?Mt?{paths:Nt,hasZ:Tt,hasM:Mt}:{paths:Nt,hasZ:Tt}:Mt?{paths:Nt,hasM:Mt}:{paths:Nt}}function q$a(_t,Tt,Mt,Pt,Ft){const Dt=h$T(Mt,Pt);for(const Nt of Tt){const Vt=Nt.geometry,zt=Nt.attributes;let Xt;Vt&&(Xt=$$8(new t$13,Vt,Dt)),_t.push(new s$17(Xt,zt,null,zt[Ft]))}return _t}function $$8(_t,Tt,Mt=h$T(Tt.hasZ,Tt.hasM)){const{lengths:Pt,coords:Ft}=_t;let Dt=0;for(const Nt of Tt.paths){for(const Vt of Nt)for(let zt=0;zt<Mt;zt++)Ft[Dt++]=Vt[zt];Pt.push(Nt.length)}return _t}function R$f(_t,Tt,Mt,Pt){for(const Ft of Tt){const{geometry:Dt,attributes:Nt,centroid:Vt}=Ft;let zt;if(r$1P(Dt)&&(zt=C$f(Dt,Mt,Pt)),r$1P(Vt)){const Xt=T$i(Vt);_t.push({attributes:Nt,centroid:Xt,geometry:zt})}else _t.push({attributes:Nt,geometry:zt})}return _t}function C$f(_t,Tt,Mt){if(!_t)return null;const Pt=h$T(Tt,Mt),{coords:Ft,lengths:Dt}=_t,Nt=[];let Vt=0;for(const zt of Dt){const Xt=[];for(let Ht=0;Ht<zt;Ht++){const Wt=[];for(let Qt=0;Qt<Pt;Qt++)Wt.push(Ft[Vt++]);Xt.push(Wt)}Nt.push(Xt)}return Tt?Mt?{rings:Nt,hasZ:Tt,hasM:Mt}:{rings:Nt,hasZ:Tt}:Mt?{rings:Nt,hasM:Mt}:{rings:Nt}}function B$d(_t,Tt,Mt,Pt,Ft){for(const Dt of Tt){const Nt=Dt.geometry,Vt=Dt.centroid,zt=Dt.attributes;let Xt;Nt&&(Xt=D$i(new t$13,Nt,Mt,Pt)),r$1P(Vt)?_t.push(new s$17(Xt,zt,F$k(new t$13,Vt),zt[Ft])):_t.push(new s$17(Xt,zt,null,zt[Ft]))}return _t}function D$i(_t,Tt,Mt=Tt.hasZ,Pt=Tt.hasM){return H$9(_t,Tt.rings,Mt,Pt),_t}function H$9(_t,Tt,Mt,Pt){const Ft=h$T(Mt,Pt),{lengths:Dt,coords:Nt}=_t;let Vt=0;Dt.length=Nt.length=0;for(const zt of Tt){for(const Xt of zt)for(let Ht=0;Ht<Ft;Ht++)Nt[Vt++]=Xt[Ht];Dt.push(zt.length)}return _t}const J$9=[],K$6=[];function Q$7(_t,Tt,Mt,Pt,Ft){J$9[0]=_t;const[Dt]=W$6(K$6,J$9,Tt,Mt,Pt,Ft);return J$9.length=K$6.length=0,Dt}function W$6(_t,Tt,Mt,Pt,Ft,Dt){if(_t.length=0,!Mt){for(const Nt of Tt){const Vt=Nt.attributes[Dt];_t.push(new s$17(null,Nt.attributes,null,Vt))}return _t}switch(Mt){case"esriGeometryPoint":return S$p(_t,Tt,Pt,Ft,Dt);case"esriGeometryMultipoint":return O$h(_t,Tt,Pt,Ft,Dt);case"esriGeometryPolyline":return q$a(_t,Tt,Pt,Ft,Dt);case"esriGeometryPolygon":return B$d(_t,Tt,Pt,Ft,Dt);default:a$1w.error("convertToFeatureSet:unknown-geometry",new s$2i(`Unable to parse unknown geometry type '${Mt}'`)),_t.length=0}return _t}function X$5(_t,Tt,Mt,Pt,Ft,Dt){const Nt=_t.length;switch(Mt){case"esriGeometryPoint":S$p(_t,Tt,Pt,Ft,Dt);break;case"esriGeometryMultipoint":O$h(_t,Tt,Pt,Ft,Dt);break;case"esriGeometryPolyline":q$a(_t,Tt,Pt,Ft,Dt);break;case"esriGeometryPolygon":B$d(_t,Tt,Pt,Ft,Dt);break;default:a$1w.error("convertToFeatureSet:unknown-geometry",new s$2i(`Unable to parse unknown geometry type '${Mt}'`))}for(let Vt=0;Vt<Tt.length;Vt++)_t[Vt+Nt].geometryType=Mt,_t[Vt+Nt].insertAfter=Tt[Vt].insertAfter,_t[Vt+Nt].groupId=Tt[Vt].groupId;return _t}function ee$3(_t,Tt,Mt,Pt){K$6[0]=_t,re$3(J$9,K$6,Tt,Mt,Pt);const Ft=J$9[0];return J$9.length=K$6.length=0,Ft}function te$3(_t,Tt,Mt){if(t$2e(_t))return null;const Pt=new t$13;return"hasZ"in _t&&Tt==null&&(Tt=_t.hasZ),"hasM"in _t&&Mt==null&&(Mt=_t.hasM),l$27(_t)?v$F(Tt!=null?Tt:_t.z!=null,Mt!=null?Mt:_t.m!=null)(Pt,_t):c$2R(_t)?D$i(Pt,_t,Tt,Mt):y$1q(_t)?$$8(Pt,_t,h$T(Tt,Mt)):f$1j(_t)?U$k(Pt,_t,h$T(Tt,Mt)):void a$1w.error("convertFromGeometry:unknown-geometry",new s$2i(`Unable to parse unknown geometry type '${_t}'`))}function ne$2(_t,Tt,Mt,Pt){const Ft=_t&&("coords"in _t?_t:_t.geometry);if(t$2e(Ft))return null;switch(Tt){case"esriGeometryPoint":{let Dt=T$i;return Mt&&Pt?Dt=k$e:Mt?Dt=P$f:Pt&&(Dt=Z$5),Dt(Ft)}case"esriGeometryMultipoint":return _$j(Ft,Mt,Pt);case"esriGeometryPolyline":return L$h(Ft,Mt,Pt);case"esriGeometryPolygon":return C$f(Ft,Mt,Pt);default:return void a$1w.error("convertToGeometry:unknown-geometry",new s$2i(`Unable to parse unknown geometry type '${Tt}'`))}}function oe$2(_t,Tt){for(const Mt of Tt)_t.push({attributes:Mt.attributes});return _t}function re$3(_t,Tt,Mt,Pt,Ft){if(_t.length=0,t$2e(Mt))return oe$2(_t,Tt);switch(Mt){case"esriGeometryPoint":return z$h(_t,Tt,Pt,Ft);case"esriGeometryMultipoint":return Y$4(_t,Tt,Pt,Ft);case"esriGeometryPolyline":return A$d(_t,Tt,Pt,Ft);case"esriGeometryPolygon":return R$f(_t,Tt,Pt,Ft);default:a$1w.error("convertToFeatureSet:unknown-geometry",new s$2i(`Unable to parse unknown geometry type '${Mt}'`))}return _t}function se$2(_t){const{objectIdFieldName:Tt,spatialReference:Mt,transform:Pt,fields:Ft,hasM:Dt,hasZ:Nt,features:Vt,geometryType:zt,exceededTransferLimit:Xt,uniqueIdField:Ht,queryGeometry:Wt,queryGeometryType:Qt}=_t,Zt={features:re$3([],Vt,zt,Nt,Dt),fields:Ft,geometryType:zt,objectIdFieldName:Tt,spatialReference:Mt,uniqueIdField:Ht,queryGeometry:ne$2(Wt,Qt,!1,!1)};return Pt&&(Zt.transform=Pt),Xt&&(Zt.exceededTransferLimit=Xt),Dt&&(Zt.hasM=Dt),Nt&&(Zt.hasZ=Nt),Zt}function ce$2(_t,Tt){const Mt=new e$11,{hasM:Pt,hasZ:Ft,features:Dt,objectIdFieldName:Nt,spatialReference:Vt,geometryType:zt,exceededTransferLimit:Xt,transform:Ht,fields:Wt}=_t;return Wt&&(Mt.fields=Wt),Mt.geometryType=zt,Mt.objectIdFieldName=Nt||Tt,Mt.spatialReference=Vt,Mt.objectIdFieldName?(Dt&&W$6(Mt.features,Dt,zt,Ft,Pt,Mt.objectIdFieldName),Xt&&(Mt.exceededTransferLimit=Xt),Pt&&(Mt.hasM=Pt),Ft&&(Mt.hasZ=Ft),Ht&&(Mt.transform=Ht),Mt):(a$1w.error(new s$2i("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),Mt)}function le$1(_t){const{transform:Tt,features:Mt,hasM:Pt,hasZ:Ft}=_t;if(!Tt)return _t;for(const Dt of Mt)r$1P(Dt.geometry)&&me$2(Dt.geometry,Dt.geometry,Pt,Ft,Tt),r$1P(Dt.centroid)&&me$2(Dt.centroid,Dt.centroid,Pt,Ft,Tt);return _t.transform=null,_t}function ue$2(_t,Tt){const{geometryType:Mt,features:Pt,hasM:Ft,hasZ:Dt}=Tt;if(!_t)return Tt;for(let Nt=0;Nt<Pt.length;Nt++){const Vt=Pt[Nt],zt=Vt.weakClone();zt.geometry=new t$13,ie$2(zt.geometry,Vt.geometry,Ft,Dt,Mt,_t),Vt.centroid&&(zt.centroid=new t$13,ie$2(zt.centroid,Vt.centroid,Ft,Dt,"esriGeometryPoint",_t)),Pt[Nt]=zt}return Tt.transform=_t,Tt}function ie$2(_t,Tt,Mt,Pt,Ft,Dt,Nt=Mt,Vt=Pt){if(_t.lengths.length&&(_t.lengths.length=0),_t.coords.length&&(_t.coords.length=0),t$2e(Tt)||!Tt.coords.length)return null;const zt=g$H[Ft],{coords:Xt,lengths:Ht}=Tt,Wt=h$T(Mt,Pt),Qt=h$T(Mt&&Nt,Pt&&Vt),Zt=I$l(Mt,Pt,Nt,Vt);if(!Ht.length)return Zt(_t.coords,Xt,0,0,b$G(Dt,Xt[0]),M$o(Dt,Xt[1])),_t.lengths.length&&(_t.lengths.length=0),_t.coords.length=Wt,_t;let Kt,er,Yt,rr,ir=0,nr=0,ar=nr;for(const or of Ht){if(or<zt)continue;let ur=0;nr=ar,Yt=Kt=b$G(Dt,Xt[ir]),rr=er=M$o(Dt,Xt[ir+1]),Zt(_t.coords,Xt,nr,ir,Yt,rr),ur++,ir+=Wt,nr+=Qt;for(let dr=1;dr<or;dr++,ir+=Wt)Yt=b$G(Dt,Xt[ir]),rr=M$o(Dt,Xt[ir+1]),Yt===Kt&&rr===er||(Zt(_t.coords,Xt,nr,ir,Yt-Kt,rr-er),nr+=Qt,ur++,Kt=Yt,er=rr);ur>=zt&&(_t.lengths.push(ur),ar=nr)}return _t.coords.length=ar,_t.coords.length?_t:null}function fe$2(_t,Tt,Mt,Pt,Ft,Dt,Nt=Mt,Vt=Pt){if(_t.lengths.length&&(_t.lengths.length=0),_t.coords.length&&(_t.coords.length=0),!Tt||!Tt.coords.length)return null;const zt=g$H[Ft],{coords:Xt,lengths:Ht}=Tt,Wt=h$T(Mt,Pt),Qt=h$T(Mt&&Nt,Pt&&Vt),Zt=I$l(Mt,Pt,Nt,Vt);if(!Ht.length)return Zt(_t.coords,Xt,0,0,Xt[0],Xt[1]),_t.lengths.length&&(_t.lengths.length=0),_t.coords.length=Wt,_t;let Kt=0;const er=Dt*Dt;for(const Yt of Ht){if(Yt<zt){Kt+=Yt*Wt;continue}const rr=_t.coords.length/Qt,ir=Kt,nr=Kt+(Yt-1)*Wt;Zt(_t.coords,Xt,_t.coords.length,ir,Xt[ir],Xt[ir+1]),ae$2(_t.coords,Xt,Wt,er,Zt,ir,nr),Zt(_t.coords,Xt,_t.coords.length,nr,Xt[nr],Xt[nr+1]);const ar=_t.coords.length/Qt-rr;ar>=zt?_t.lengths.push(ar):_t.coords.length=rr*Qt,Kt+=Yt*Wt}return _t.coords.length?_t:null}function he$2(_t,Tt,Mt,Pt){const Ft=_t[Tt],Dt=_t[Tt+1],Nt=_t[Mt],Vt=_t[Mt+1],zt=_t[Pt],Xt=_t[Pt+1];let Ht=Nt,Wt=Vt,Qt=zt-Ht,Zt=Xt-Wt;if(Qt!==0||Zt!==0){const Kt=((Ft-Ht)*Qt+(Dt-Wt)*Zt)/(Qt*Qt+Zt*Zt);Kt>1?(Ht=zt,Wt=Xt):Kt>0&&(Ht+=Qt*Kt,Wt+=Zt*Kt)}return Qt=Ft-Ht,Zt=Dt-Wt,Qt*Qt+Zt*Zt}function ae$2(_t,Tt,Mt,Pt,Ft,Dt,Nt){let Vt,zt=Pt,Xt=0;for(let Ht=Dt+Mt;Ht<Nt;Ht+=Mt)Vt=he$2(Tt,Ht,Dt,Nt),Vt>zt&&(Xt=Ht,zt=Vt);zt>Pt&&(Xt-Dt>Mt&&ae$2(_t,Tt,Mt,Pt,Ft,Dt,Xt),Ft(_t,Tt,_t.length,Xt,Tt[Xt],Tt[Xt+1]),Nt-Xt>Mt&&ae$2(_t,Tt,Mt,Pt,Ft,Xt,Nt))}function ge$2(_t,Tt,Mt,Pt){if(t$2e(Tt)||!Tt.coords||!Tt.coords.length)return null;const Ft=h$T(Mt,Pt);let Dt=Number.POSITIVE_INFINITY,Nt=Number.POSITIVE_INFINITY,Vt=Number.NEGATIVE_INFINITY,zt=Number.NEGATIVE_INFINITY;if(Tt&&Tt.coords){const Xt=Tt.coords;for(let Ht=0;Ht<Xt.length;Ht+=Ft){const Wt=Xt[Ht],Qt=Xt[Ht+1];Dt=Math.min(Dt,Wt),Vt=Math.max(Vt,Wt),Nt=Math.min(Nt,Qt),zt=Math.max(zt,Qt)}}return _t[0]=Dt,_t[1]=Nt,_t[2]=Vt,_t[3]=zt,_t}function me$2(_t,Tt,Mt,Pt,Ft){const{coords:Dt,lengths:Nt}=Tt,Vt=Mt?Pt?p$1Z:m$17:Pt?m$17:d$16,zt=h$T(Mt,Pt);if(!Dt.length)return _t!==Tt&&(_t.lengths.length=0,_t.coords.length=0),_t;if(!Nt.length)return Vt(_t.coords,Dt,0,0,w$z(Ft,Dt[0]),N$h(Ft,Dt[1])),_t!==Tt&&(_t.lengths.length=0,_t.coords.length=zt),_t;const[Xt,Ht]=Ft.scale;let Wt=0;for(let Qt=0;Qt<Nt.length;Qt++){const Zt=Nt[Qt];_t.lengths[Qt]=Zt;let Kt=w$z(Ft,Dt[Wt]),er=N$h(Ft,Dt[Wt+1]);Vt(_t.coords,Dt,Wt,Wt,Kt,er),Wt+=zt;for(let Yt=1;Yt<Zt;Yt++,Wt+=zt)Kt+=Dt[Wt]*Xt,er-=Dt[Wt+1]*Ht,Vt(_t.coords,Dt,Wt,Wt,Kt,er)}return _t!==Tt&&(_t.lengths.length=Nt.length,_t.coords.length=Dt.length),_t}function ye$2(_t,Tt,Mt,Pt,Ft,Dt){const Nt=h$T(Mt,Pt),Vt=I$l(Mt,Pt,Ft,Dt),zt=Tt.coords;_t.coords.length=0,_t.lengths.length=0,_t.lengths.push(...Tt.lengths);for(let Xt=0;Xt<zt.length;Xt+=Nt)Vt(_t.coords,zt,_t.coords.length,Xt,zt[Xt],zt[Xt+1]);return _t}function Ie(_t,Tt,Mt,Pt){let Ft=0,Dt=_t[Pt*Tt],Nt=_t[Pt*(Tt+1)];for(let Vt=1;Vt<Mt;Vt++){const zt=Dt+_t[Pt*(Tt+Vt)],Xt=Nt+_t[Pt*(Tt+Vt)+1],Ht=(zt-Dt)*(Xt+Nt);Dt=zt,Nt=Xt,Ft+=Ht}return .5*Ft}function be$1(_t,Tt){const{coords:Mt,lengths:Pt}=_t;let Ft=0,Dt=0;for(let Nt=0;Nt<Pt.length;Nt++)Dt+=Ie(Mt,Ft,Pt[Nt],Tt),Ft+=Nt;return Math.abs(Dt)}function we$1(_t,Tt){if(t$2e(_t))return null;const Mt=_t.clone(),Pt=_t.coords,Ft=_t.lengths;let Dt=0;for(let Nt=0;Nt<Ft.length;Nt++){const Vt=Ft[Nt];let zt=Pt[Tt*Dt],Xt=Pt[Tt*Dt+1];for(let Ht=1;Ht<Vt;Ht++){const Wt=zt+Pt[Tt*(Dt+Ht)],Qt=Xt+Pt[Tt*(Dt+Ht)+1];Mt.coords[Tt*(Dt+Ht)]=Wt,Mt.coords[Tt*(Dt+Ht)+1]=Qt,zt=Wt,Xt=Qt}Dt+=Vt}return Mt}var u$13;let c$1I=u$13=class extends l$2v{constructor(_t){super(_t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(_t,Tt){Tt.historicMoment=_t&&_t.getTime()}writeStart(_t,Tt){Tt.resultOffset=this.start,Tt.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(Tt.definitionExpression="1=1")}clone(){return new u$13(m$2e({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};e$2a([d$25({type:Boolean,json:{write:!0}})],c$1I.prototype,"cacheHint",void 0),e$2a([d$25({type:K$7,json:{write:!0}})],c$1I.prototype,"dynamicDataSource",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$1I.prototype,"gdbVersion",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$1I.prototype,"geometryPrecision",void 0),e$2a([d$25({type:Date})],c$1I.prototype,"historicMoment",void 0),e$2a([r$1C("historicMoment")],c$1I.prototype,"_writeHistoricMoment",null),e$2a([d$25({type:Number,json:{write:!0}})],c$1I.prototype,"maxAllowableOffset",void 0),e$2a([d$25({type:[Number],json:{write:!0}})],c$1I.prototype,"objectIds",void 0),e$2a([d$25({type:[String],json:{write:!0}})],c$1I.prototype,"orderByFields",void 0),e$2a([d$25({type:[String],json:{write:!0}})],c$1I.prototype,"outFields",void 0),e$2a([d$25({type:k$y,json:{read:{source:"outSR"},write:{target:"outSR"}}})],c$1I.prototype,"outSpatialReference",void 0),e$2a([d$25({json:{write:!0}})],c$1I.prototype,"relationshipId",void 0),e$2a([d$25({type:Number,json:{read:{source:"resultOffset"}}})],c$1I.prototype,"start",void 0),e$2a([r$1C("start"),r$1C("num")],c$1I.prototype,"writeStart",null),e$2a([d$25({type:Number,json:{read:{source:"resultRecordCount"}}})],c$1I.prototype,"num",void 0),e$2a([d$25({json:{write:!0}})],c$1I.prototype,"returnGeometry",void 0),e$2a([d$25({type:Boolean,json:{write:{overridePolicy:_t=>({enabled:_t})}}})],c$1I.prototype,"returnM",void 0),e$2a([d$25({type:Boolean,json:{write:{overridePolicy:_t=>({enabled:_t})}}})],c$1I.prototype,"returnZ",void 0),e$2a([d$25({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],c$1I.prototype,"where",void 0),c$1I=u$13=e$2a([n$2L("esri.rest.support.RelationshipQuery")],c$1I),c$1I.from=b$1b(c$1I);const d$15=c$1I;var e$$;let p$1Y=e$$=class extends l$2v{constructor(_t){super(_t),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new e$$({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};e$2a([d$25({type:[String],json:{write:!0}})],p$1Y.prototype,"groupByFields",void 0),e$2a([d$25({type:Number,json:{write:!0}})],p$1Y.prototype,"topCount",void 0),e$2a([d$25({type:[String],json:{write:!0}})],p$1Y.prototype,"orderByFields",void 0),p$1Y=e$$=e$2a([n$2L("esri.rest.support.TopFilter")],p$1Y);const i$1r=p$1Y;var y$V;const m$16=new s$1_({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),h$S=new s$1_({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let j$y=y$V=class extends l$2v{constructor(_t){super(_t),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(_t,Tt){Tt.resultOffset=this.start,Tt.resultRecordCount=this.num||10}clone(){return new y$V(m$2e({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};e$2a([d$25({type:Boolean,json:{write:!0}})],j$y.prototype,"cacheHint",void 0),e$2a([d$25({type:Number,json:{write:{overridePolicy:_t=>({enabled:_t>0})}}})],j$y.prototype,"distance",void 0),e$2a([d$25({types:i$2i,json:{read:d$1M,write:!0}})],j$y.prototype,"geometry",void 0),e$2a([d$25({type:Number,json:{write:!0}})],j$y.prototype,"geometryPrecision",void 0),e$2a([d$25({type:Number,json:{write:!0}})],j$y.prototype,"maxAllowableOffset",void 0),e$2a([d$25({type:Number,json:{read:{source:"resultRecordCount"}}})],j$y.prototype,"num",void 0),e$2a([d$25({json:{write:!0}})],j$y.prototype,"objectIds",void 0),e$2a([d$25({type:[String],json:{write:!0}})],j$y.prototype,"orderByFields",void 0),e$2a([d$25({type:[String],json:{write:!0}})],j$y.prototype,"outFields",void 0),e$2a([d$25({type:k$y,json:{read:{source:"outSR"},write:{target:"outSR"}}})],j$y.prototype,"outSpatialReference",void 0),e$2a([d$25({type:String,json:{write:!0}})],j$y.prototype,"resultType",void 0),e$2a([d$25({json:{write:!0}})],j$y.prototype,"returnGeometry",void 0),e$2a([d$25({type:Boolean,json:{write:{overridePolicy:_t=>({enabled:_t})}}})],j$y.prototype,"returnM",void 0),e$2a([d$25({type:Boolean,json:{write:{overridePolicy:_t=>({enabled:_t})}}})],j$y.prototype,"returnZ",void 0),e$2a([d$25({type:Number,json:{read:{source:"resultOffset"}}})],j$y.prototype,"start",void 0),e$2a([r$1C("start"),r$1C("num")],j$y.prototype,"writeStart",null),e$2a([d$25({type:String,json:{read:{source:"spatialRel",reader:m$16.read},write:{target:"spatialRel",writer:m$16.write}}})],j$y.prototype,"spatialRelationship",void 0),e$2a([d$25({type:y$X,json:{write:!0}})],j$y.prototype,"timeExtent",void 0),e$2a([d$25({type:i$1r,json:{write:!0}})],j$y.prototype,"topFilter",void 0),e$2a([d$25({type:String,json:{read:h$S.read,write:{writer:h$S.write,overridePolicy(_t){return{enabled:_t&&this.distance>0}}}}})],j$y.prototype,"units",void 0),e$2a([d$25({type:String,json:{write:!0}})],j$y.prototype,"where",void 0),j$y=y$V=e$2a([n$2L("esri.rest.support.TopFeaturesQuery")],j$y),j$y.from=b$1b(j$y);const S$o=j$y,p$1X="esri.widgets.Feature.support.relatedFeatureUtils",c$1H=s$2l.getLogger(p$1X),f$T=new Map;function d$14(_t){if(!ue$3(_t))return null;const[Tt,Mt]=_t.split("/").slice(1);return{layerId:Tt,fieldName:Mt}}function m$15(_t,Tt){if(!Tt.relationships)return null;let Mt=null;const{relationships:Pt}=Tt;return Pt.some(Ft=>Ft.id===parseInt(_t,10)&&(Mt=Ft,!0)),Mt}function y$U({originRelationship:_t,relationships:Tt,layerId:Mt}){let Pt;return Tt&&Tt.some(Ft=>(`${Ft.relatedTableId}`===Mt&&Ft.id===_t.id&&(Pt=Ft),!!Pt)),Pt}function j$x(_t,Tt){const Mt=Tt.toLowerCase();for(const Pt in _t)if(Pt.toLowerCase()===Mt)return _t[Pt];return null}function h$R(_t,Tt){const Mt=m$15(_t,Tt);if(!!Mt)return{url:`${Tt.url}/${Mt.relatedTableId}`,sourceSpatialReference:Tt.spatialReference,relation:Mt,relatedFields:[],outStatistics:[]}}function F$j(_t,Tt){if(!Tt||!_t)return;const{features:Mt,statsFeatures:Pt}=_t,Ft=Mt&&Mt.value;Tt.relatedFeatures=Ft?Ft.features:[];const Dt=Pt&&Pt.value;Tt.relatedStatsFeatures=Dt?Dt.features:[]}function g$G(_t,Tt,Mt,Pt){const Ft=new d$15;return Ft.outFields=["*"],Ft.relationshipId=typeof Tt.id=="number"?Tt.id:parseInt(Tt.id,10),Ft.objectIds=[_t.attributes[Mt.objectIdField]],Mt.queryRelatedFeatures(Ft,Pt)}function I$k(_t,Tt,Mt){let Pt=0;const Ft=[];for(;Pt<Tt.length;)Ft.push(`${_t} IN (${Tt.slice(Pt,Mt+Pt)})`),Pt+=Mt;return Ft.join(" OR ")}async function S$n(_t,Tt,Mt,Pt){const Ft=Mt.layerId.toString(),{layerInfo:Dt,relation:Nt,relatedFields:Vt,outStatistics:zt,url:Xt,sourceSpatialReference:Ht}=Tt,Wt=y$U({originRelationship:Nt,relationships:Dt.relationships,layerId:Ft});if(Wt.relationshipTableId&&Wt.keyFieldInRelationshipTable){const Zt=(await g$G(_t,Wt,Mt,Pt))[_t.attributes[Mt.objectIdField]];if(!Zt)return null;const Kt=Zt.features.map(er=>er.attributes[Dt.objectIdField]);if((zt==null?void 0:zt.length)>0&&Dt.supportsStatistics){const er=new b$H;er.where=I$k(Dt.objectIdField,Kt,1e3),er.outFields=Vt,er.outStatistics=zt,er.sourceSpatialReference=Ht;const Yt={features:Promise.resolve(Zt),statsFeatures:s$15(Xt,er)};return E$K(Yt)}}const Qt=Wt==null?void 0:Wt.keyField;if(Qt){const Zt=B$n(U$j(Dt.fields,Qt)),Kt=j$x(_t.attributes,Nt.keyField),er=Zt?`${Qt}=${Kt}`:`${Qt}='${Kt}'`,Yt=s$15(Xt,new b$H({where:er,outFields:Tt.relatedFields,sourceSpatialReference:Ht}),Pt),rr=Tt.outStatistics&&Tt.outStatistics.length>0&&Dt.supportsStatistics?s$15(Xt,new b$H({where:er,outFields:Tt.relatedFields,outStatistics:Tt.outStatistics,sourceSpatialReference:Ht}),Pt):null,ir={features:Yt};return rr&&(ir.statsFeatures=rr),E$K(ir)}return null}function w$y(_t,Tt){return U$v(_t,{query:{f:"json"},signal:Tt&&Tt.signal})}function b$F({relatedInfos:_t,layer:Tt},Mt){const Pt={};return _t.forEach((Ft,Dt)=>{const{relation:Nt}=Ft;if(!Nt){const Wt=new s$2i("relation-required","A relation is required on a layer to retrieve related records.");throw c$1H.error(Wt),Wt}const{relatedTableId:Vt}=Nt;if(typeof Vt!="number"){const Wt=new s$2i("A related table ID is required on a layer to retrieve related records.");throw c$1H.error(Wt),Wt}const zt=`${Tt.url}/${Vt}`,Xt=f$T.get(zt),Ht=Xt||w$y(zt,Mt);Xt||f$T.set(zt,Ht),Pt[Dt]=Ht}),E$K(Pt)}function R$e({graphic:_t,relatedInfos:Tt,layer:Mt},Pt){const Ft={};return Tt.forEach((Dt,Nt)=>{Dt.layerInfo&&(Ft[Nt]=S$n(_t,Dt,Mt,Pt))}),E$K(Ft)}function $$7({relatedInfo:_t,fieldName:Tt,fieldInfo:Mt}){if(_t.relatedFields.push(Tt),Mt.statisticType){const Pt=new m$18({statisticType:Mt.statisticType,onStatisticField:Tt,outStatisticFieldName:Tt});_t.outStatistics.push(Pt)}}function U$j(_t,Tt){if(_t!=null){Tt=Tt.toLowerCase();for(const Mt of _t)if(Mt&&Mt.name.toLowerCase()===Tt)return Mt}return null}const y$T={chartAnimation:!0};let I$j=class extends y$1E{constructor(_t){super(_t),this.abilities={...y$T},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(_t){return{...y$T,..._t}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(_t){this._setContentElementMedia(_t)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(_t){const{formattedMediaInfoCount:Tt}=this,Mt=(_t+Tt)%Tt;this.activeMediaInfoIndex=Mt}_pageContentElementMedia(_t){const{activeMediaInfoIndex:Tt}=this,Mt=Tt+_t;this._setContentElementMedia(Mt)}_formatMediaInfos(){const{attributes:_t,mediaInfos:Tt,formattedAttributes:Mt,expressionAttributes:Pt,fieldInfoMap:Ft,layer:Dt}=this;return Tt==null?void 0:Tt.map(Nt=>{const Vt=Nt==null?void 0:Nt.clone();if(!Vt)return null;if(Vt.title=$$b({attributes:_t,fieldInfoMap:Ft,globalAttributes:Mt,expressionAttributes:Pt,layer:Dt,text:Vt.title}),Vt.caption=$$b({attributes:_t,fieldInfoMap:Ft,globalAttributes:Mt,expressionAttributes:Pt,layer:Dt,text:Vt.caption}),Vt.altText=$$b({attributes:_t,fieldInfoMap:Ft,globalAttributes:Mt,expressionAttributes:Pt,layer:Dt,text:Vt.altText}),Vt.type==="image"){const{value:zt}=Vt;return this._setImageValue({value:zt,formattedAttributes:Mt,layer:Dt}),Vt.value.sourceURL?Vt:void 0}if(Vt.type==="pie-chart"||Vt.type==="line-chart"||Vt.type==="column-chart"||Vt.type==="bar-chart"){const{value:zt}=Vt;return this._setChartValue({value:zt,chartType:Vt.type,attributes:_t,formattedAttributes:Mt,layer:Dt}),Vt}return null}).filter(Boolean)}_setImageValue(_t){const{fieldInfoMap:Tt}=this,{value:Mt,formattedAttributes:Pt,layer:Ft}=_t,{linkURL:Dt,sourceURL:Nt}=Mt;if(Nt){const Vt=P$i(Nt,Ft);Mt.sourceURL=S$u({formattedAttributes:Pt,template:Vt,fieldInfoMap:Tt})}if(Dt){const Vt=P$i(Dt,Ft);Mt.linkURL=S$u({formattedAttributes:Pt,template:Vt,fieldInfoMap:Tt})}}_setChartValue(_t){const{value:Tt,attributes:Mt,formattedAttributes:Pt,chartType:Ft,layer:Dt}=_t,{popupTemplate:Nt,relatedInfos:Vt}=this,{fields:zt,normalizeField:Xt}=Tt;if(Tt.fields=A$i(zt,Dt),Xt&&(Tt.normalizeField=D$m(Xt,Dt)),!zt.some(Wt=>!!(Pt[Wt]!=null||ue$3(Wt)&&Vt.size)))return;const Ht=Nt==null?void 0:Nt.fieldInfos;zt.forEach(Wt=>{if(ue$3(Wt))return void(Tt.series=[...Tt.series,...this._getRelatedChartInfos({fieldInfos:Ht,fieldName:Wt,formattedAttributes:Pt,chartType:Ft,value:Tt})]);const Qt=this._getChartOption({value:Tt,attributes:Mt,chartType:Ft,formattedAttributes:Pt,fieldName:Wt,fieldInfos:Ht});Tt.series.push(Qt)})}_getRelatedChartInfos(_t){var Kt;const{fieldInfos:Tt,fieldName:Mt,formattedAttributes:Pt,chartType:Ft,value:Dt}=_t,Nt=[],Vt=d$14(Mt),{layerId:zt,fieldName:Xt}=Vt,Ht=(Kt=this.relatedInfos)==null?void 0:Kt.get(zt.toString());if(!Ht)return Nt;const{relatedFeatures:Wt,relation:Qt}=Ht;if(!Qt||!Wt)return Nt;const{cardinality:Zt}=Qt;return Wt.forEach(er=>{const{attributes:Yt}=er;Yt&&Object.keys(Yt).forEach(rr=>{rr===Xt&&Nt.push(this._getChartOption({value:Dt,attributes:Yt,formattedAttributes:Pt,fieldName:Mt,chartType:Ft,relatedFieldName:rr,fieldInfos:Tt}))})}),Zt==="one-to-many"||Zt==="many-to-many"?Nt:[Nt[0]]}_getTooltip({label:_t,value:Tt,chartType:Mt}){return Mt==="pie-chart"?`${_t}`:`${_t}: ${Tt}`}_getChartOption(_t){var nr,ar,or,ur,dr,hr;const{value:Tt,attributes:Mt,formattedAttributes:Pt,fieldName:Ft,relatedFieldName:Dt,fieldInfos:Nt,chartType:Vt}=_t,{layer:zt,fieldInfoMap:Xt}=this,{normalizeField:Ht,tooltipField:Wt}=Tt,Qt=Ht?ue$3(Ht)?Mt[d$14(Ht).fieldName]:Mt[Ht]:null,Zt=Dt&&Mt[Dt]!==void 0?Mt[Dt]:Mt[Ft]!==void 0?Mt[Ft]:Pt[Ft],Kt=new i$2a({fieldName:Ft,value:Zt===void 0?null:Zt&&Qt?Zt/Qt:Zt});if(ue$3(Ft)){const gr=Xt.get(Ft.toLowerCase()),pr=Xt.get(Wt.toLowerCase()),mr=(nr=gr==null?void 0:gr.fieldName)!=null?nr:Ft,wr=(dr=(ur=(or=Pt[(ar=pr==null?void 0:pr.fieldName)!=null?ar:Wt])!=null?or:gr==null?void 0:gr.label)!=null?ur:gr==null?void 0:gr.fieldName)!=null?dr:Dt,br=Pt[mr];return Kt.tooltip=this._getTooltip({label:wr,value:br,chartType:Vt}),Kt}const er=B$g(Nt,Ft),Yt=D$m(Ft,zt),rr=Wt&&Pt[Wt]!==void 0?Pt[Wt]:q$e(er||new c$2N({fieldName:Yt}),(hr=this.popupTemplate)==null?void 0:hr.expressionInfos),ir=Pt[Yt];return Kt.tooltip=this._getTooltip({label:rr,value:ir,chartType:Vt}),Kt}};e$2a([d$25()],I$j.prototype,"abilities",void 0),e$2a([s$23("abilities")],I$j.prototype,"castAbilities",null),e$2a([d$25()],I$j.prototype,"activeMediaInfoIndex",void 0),e$2a([d$25({readOnly:!0})],I$j.prototype,"activeMediaInfo",null),e$2a([d$25()],I$j.prototype,"attributes",void 0),e$2a([d$25()],I$j.prototype,"description",void 0),e$2a([d$25()],I$j.prototype,"fieldInfoMap",void 0),e$2a([d$25()],I$j.prototype,"formattedAttributes",void 0),e$2a([d$25()],I$j.prototype,"expressionAttributes",void 0),e$2a([d$25({readOnly:!0})],I$j.prototype,"formattedMediaInfos",null),e$2a([d$25()],I$j.prototype,"layer",void 0),e$2a([d$25({readOnly:!0})],I$j.prototype,"formattedMediaInfoCount",null),e$2a([d$25()],I$j.prototype,"mediaInfos",void 0),e$2a([d$25()],I$j.prototype,"popupTemplate",void 0),e$2a([d$25()],I$j.prototype,"relatedInfos",void 0),e$2a([d$25()],I$j.prototype,"title",void 0),I$j=e$2a([n$2L("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],I$j);const b$E=I$j;var f$S=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],b$D=[].concat(f$S.slice(30,39),f$S.slice(28,30).reverse()),e$_=[{name:"default",colors:b$D},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const n$1t="en-us",h$Q=new Map([["ar",()=>__vitePreload(()=>import("./ar.5d7bdca7.js"),["assets/ar.5d7bdca7.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.a)],["bg-bg",()=>__vitePreload(()=>import("./bg_BG.e6ba29c2.js"),["assets/bg_BG.e6ba29c2.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.b)],["bs-ba",()=>__vitePreload(()=>import("./bs_BA.14911a00.js"),["assets/bs_BA.14911a00.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.b)],["ca-es",()=>__vitePreload(()=>import("./ca_ES.1a938920.js"),["assets/ca_ES.1a938920.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.c)],["cs-cz",()=>__vitePreload(()=>import("./cs_CZ.8624de8a.js"),["assets/cs_CZ.8624de8a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.c)],["da-dk",()=>__vitePreload(()=>import("./da_DK.aef5a9c8.js"),["assets/da_DK.aef5a9c8.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.d)],["de-de",()=>__vitePreload(()=>import("./de_DE.b08b4cf1.js"),["assets/de_DE.b08b4cf1.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.d)],["de-ch",()=>__vitePreload(()=>import("./de_CH.0b6cd702.js"),["assets/de_CH.0b6cd702.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.d)],["el-gr",()=>__vitePreload(()=>import("./el_GR.8e618bc9.js"),["assets/el_GR.8e618bc9.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.e)],["en-us",()=>__vitePreload(()=>import("./en_US.41c717af.js"),["assets/en_US.41c717af.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.e)],["en-ca",()=>__vitePreload(()=>import("./en_CA.f60d00bf.js"),["assets/en_CA.f60d00bf.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.e)],["es-es",()=>__vitePreload(()=>import("./es_ES.1f0f76f4.js"),["assets/es_ES.1f0f76f4.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.e)],["et-ee",()=>__vitePreload(()=>import("./et_EE.a7babafb.js"),["assets/et_EE.a7babafb.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.e)],["fi-fi",()=>__vitePreload(()=>import("./fi_FI.fdc0a8b3.js"),["assets/fi_FI.fdc0a8b3.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.f)],["fr-fr",()=>__vitePreload(()=>import("./fr_FR.9fb72c1a.js"),["assets/fr_FR.9fb72c1a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.f)],["he-il",()=>__vitePreload(()=>import("./he_IL.3941bb8a.js"),["assets/he_IL.3941bb8a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.h)],["hr-hr",()=>__vitePreload(()=>import("./hr_HR.0f5af0f2.js"),["assets/hr_HR.0f5af0f2.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.h)],["hu-hu",()=>__vitePreload(()=>import("./hu_HU.b4dae139.js"),["assets/hu_HU.b4dae139.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.h)],["id-id",()=>__vitePreload(()=>import("./id_ID.f5b918ea.js"),["assets/id_ID.f5b918ea.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.i)],["it-it",()=>__vitePreload(()=>import("./it_IT.94769a92.js"),["assets/it_IT.94769a92.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.i)],["ja-jp",()=>__vitePreload(()=>import("./ja_JP.8eb86db8.js"),["assets/ja_JP.8eb86db8.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.j)],["ko-kr",()=>__vitePreload(()=>import("./ko_KR.8ba7fd29.js"),["assets/ko_KR.8ba7fd29.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.k)],["lt-lt",()=>__vitePreload(()=>import("./lt_LT.d8c1cc92.js"),["assets/lt_LT.d8c1cc92.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.l)],["lv-lv",()=>__vitePreload(()=>import("./lv_LV.ceb923a4.js"),["assets/lv_LV.ceb923a4.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.l)],["nb-no",()=>__vitePreload(()=>import("./nb_NO.d0457d8e.js"),["assets/nb_NO.d0457d8e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.n)],["nl-nl",()=>__vitePreload(()=>import("./nl_NL.fbf1ad03.js"),["assets/nl_NL.fbf1ad03.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.n)],["pl-pl",()=>__vitePreload(()=>import("./pl_PL.44d49398.js"),["assets/pl_PL.44d49398.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.p)],["pt-br",()=>__vitePreload(()=>import("./pt_BR.89b1d3a7.js"),["assets/pt_BR.89b1d3a7.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.p)],["pt-pt",()=>__vitePreload(()=>import("./pt_PT.2abd4e91.js"),["assets/pt_PT.2abd4e91.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.p)],["ro-ro",()=>__vitePreload(()=>import("./ro_RO.fb4fff60.js"),["assets/ro_RO.fb4fff60.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.r)],["ru-ru",()=>__vitePreload(()=>import("./ru_RU.684f53ee.js"),["assets/ru_RU.684f53ee.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.r)],["sk-sk",()=>__vitePreload(()=>import("./sk_SK.eaca904e.js"),["assets/sk_SK.eaca904e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.s)],["sl-sl",()=>__vitePreload(()=>import("./sl_SL.cff9b92a.js"),["assets/sl_SL.cff9b92a.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.s)],["sr-rs",()=>__vitePreload(()=>import("./sr_RS.44ddc4cf.js"),["assets/sr_RS.44ddc4cf.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.s)],["sv-se",()=>__vitePreload(()=>import("./sv_SE.16043ad0.js"),["assets/sv_SE.16043ad0.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.s)],["th-th",()=>__vitePreload(()=>import("./th_TH.99f2a35e.js"),["assets/th_TH.99f2a35e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.t)],["tr-tr",()=>__vitePreload(()=>import("./tr_TR.ab1c9f2f.js"),["assets/tr_TR.ab1c9f2f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.t)],["uk-ua",()=>__vitePreload(()=>import("./uk_UA.ae3608ad.js"),["assets/uk_UA.ae3608ad.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.u)],["vi-vn",()=>__vitePreload(()=>import("./vi_VN.7d19f32e.js"),["assets/vi_VN.7d19f32e.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.v)],["zh-cn",()=>__vitePreload(()=>import("./zh_Hans.0f482448.js"),["assets/zh_Hans.0f482448.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.z)],["zh-hk",()=>__vitePreload(()=>import("./zh_Hant.f458376f.js"),["assets/zh_Hant.f458376f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.z)],["zh-tw",()=>__vitePreload(()=>import("./zh_Hant.f458376f.js"),["assets/zh_Hant.f458376f.js","assets/_commonjsHelpers.01f5fe30.js"]).then(_t=>_t.z)]]);function e$Z(_t){const Tt=_t.split("-")[0].toLowerCase();let Mt=null;for(const Pt of h$Q.keys())if(Pt.startsWith(Tt)){Mt=Pt;break}return Mt}function r$Q(_t){return _t?h$Q.has(_t.toLowerCase())?_t.toLowerCase():e$Z(_t)||n$1t:n$1t}let o$V,i$1q;async function c$1G(_t=l$2q()){if(_t=r$Q(_t),o$V&&_t===i$1q)return o$V;o$V=__vitePreload(()=>import("./index.7ba26017.js"),["assets/index.7ba26017.js","assets/_commonjsHelpers.01f5fe30.js"]).then(Tt=>Tt.i),i$1q=_t;try{const[Tt,Mt]=await Promise.all([o$V,h$Q.get(i$1q)()]);i$1q===_t&&(Tt.am4core.options.defaultLocale=Mt.default),Tt.am4core.options.suppressWarnings=!0,Tt.am4core.options.autoDispose=!0}catch{return o$V=null,i$1q=null,null}return o$V}function u$12(_t,Tt="default"){const Mt=e$_.find(Pt=>Pt.name===Tt);return Mt?Mt.colors.map(Pt=>_t.color(Pt)):null}const M$n={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},I$i=.05,y$S=.95,w$x=15,g$F="color",b$C="tooltip",C$e="value",T$h="default-line-value";let x$q=class extends O$l{constructor(_t,Tt){super(_t,Tt),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new b$E,this.messages=null,this._getChartDependencies=async Mt=>{const Pt=await c$1G(),{destroyed:Ft,viewModel:Dt}=this;if(Ft||!Dt||!Mt)return;const{activeMediaInfo:Nt}=Dt,Vt=await this._getRendererColors(Pt);this._renderChart({chartDiv:Mt,mediaInfo:Nt,chartsModule:Pt,colorMap:Vt})}}initialize(){this._featureElementInfo=new c$22,this.own([l$2e(()=>{var _t,Tt;return[(_t=this.viewModel)==null?void 0:_t.activeMediaInfo,(Tt=this.viewModel)==null?void 0:Tt.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),h$1w),l$2e(()=>{var _t,Tt;return[(_t=this.viewModel)==null?void 0:_t.description,(Tt=this.viewModel)==null?void 0:Tt.title]},()=>this._setupFeatureElementInfo(),h$1w)])}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var _t;return n$1Q("div",{bind:this,class:M$n.base,onkeyup:this._handleMediaKeyup},(_t=this._featureElementInfo)==null?void 0:_t.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:_t}=this.viewModel;return _t?n$1Q("div",{key:"media-element-container",class:M$n.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(_t){const{_refreshIntervalInfo:Tt}=this,{activeMediaInfoIndex:Mt,formattedMediaInfoCount:Pt}=this.viewModel,{value:Ft,refreshInterval:Dt,altText:Nt,title:Vt,type:zt}=_t,{sourceURL:Xt,linkURL:Ht}=Ft,Wt=T$m(Ht)?"_blank":"_self",Qt=Wt==="_blank"?"noreferrer":"",Zt=Dt?Tt:null,Kt=Zt?Zt.timestamp:0,er=Zt?Zt.sourceURL:Xt,Yt=n$1Q("img",{alt:Nt||Vt,key:`media-${zt}-${Mt}-${Pt}-${Kt}`,src:er});return(Ht?n$1Q("a",{title:Vt,href:Ht,rel:Qt,target:Wt},Yt):null)||Yt}renderChartMediaInfo(_t){const{activeMediaInfoIndex:Tt,formattedMediaInfoCount:Mt}=this.viewModel;return n$1Q("div",{key:`media-${_t.type}-${Tt}-${Mt}`,bind:this,class:M$n.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:_t}=this.viewModel;return _t?_t.type==="image"?this.renderImageMediaInfo(_t):_t.type.includes("chart")?this.renderChartMediaInfo(_t):null:null}renderMediaInfo(){const{activeMediaInfo:_t}=this.viewModel;if(!_t)return null;const Tt=_t.title?n$1Q("div",{key:"media-title",class:M$n.mediaItemTitle,innerHTML:_t.title}):null,Mt=_t.caption?n$1Q("div",{key:"media-caption",class:M$n.mediaItemCaption,innerHTML:_t.caption}):null;return n$1Q("div",{key:"media-container",class:M$n.mediaItemContainer},n$1Q("div",{key:"media-item-container",class:M$n.mediaItem},this.renderMediaInfoType()),Tt,Mt)}renderMediaPageButton(_t){if(this.viewModel.formattedMediaInfoCount<2)return null;const Tt=_t==="previous",Mt=Tt?this.messages.previous:this.messages.next,Pt=Tt?this.classes(M$n.mediaButton,M$n.mediaPrevious):this.classes(M$n.mediaButton,M$n.mediaNext),Ft=Tt?this.classes(M$n.mediaIcon,M$n.mediaPreviousIconLTR,M$n.iconLeftTriangleArrow):this.classes(M$n.mediaIcon,M$n.mediaNextIconLTR,M$n.iconRightTriangleArrow),Dt=Tt?this.classes(M$n.mediaIcon,M$n.mediaPreviousIconRTL,M$n.iconRightTriangleArrow):this.classes(M$n.mediaIcon,M$n.mediaNextIconRTL,M$n.iconLeftTriangleArrow),Nt=Tt?"media-previous":"media-next",Vt=Tt?this._previous:this._next;return n$1Q("button",{type:"button",key:Nt,title:Mt,"aria-label":Mt,tabIndex:0,class:Pt,bind:this,onclick:Vt},n$1Q("span",{"aria-hidden":"true",class:Ft}),n$1Q("span",{"aria-hidden":"true",class:Dt}))}_setupFeatureElementInfo(){const{description:_t,title:Tt}=this;this._featureElementInfo.set({description:_t,title:Tt})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}async _getRendererColors(_t){var Dt;const{am4core:Tt}=_t,Mt=(Dt=this.viewModel)==null?void 0:Dt.layer,Pt=new Map;if(!Mt)return Pt;const Ft=await h$X(Mt.renderer);return Ft.delete(null),Array.from(Ft.values()).every(Nt=>(Nt==null?void 0:Nt.length)===1)&&(Pt.set(T$h,Tt.color({r:50,g:50,b:50,a:1})),Array.from(Ft.keys()).forEach(Nt=>{Nt&&Pt.set(Nt,Tt.color(Ft.get(Nt)[0].toCss(!0)))})),Pt}_handleMediaKeyup(_t){const Tt=i$2K(_t);Tt==="ArrowLeft"&&(_t.stopPropagation(),this.viewModel.previous()),Tt==="ArrowRight"&&(_t.stopPropagation(),this.viewModel.next())}_renderChart(_t){const{abilities:Tt}=this.viewModel,{chartsModule:Mt,chartDiv:Pt,mediaInfo:Ft,colorMap:Dt}=_t,{value:Nt,type:Vt}=Ft,{am4core:zt}=Mt,Xt=u$12(zt);function Ht(Zt){Zt instanceof zt.ColorSet&&Xt&&(Zt.list=Xt)}r$10()&&zt.useTheme(Mt.am4themes_dark);const Wt=window.matchMedia("(prefers-reduced-motion: reduce)");Tt.chartAnimation&&!Wt.matches?zt.useTheme(Mt.am4themes_animated):zt.unuseTheme(Mt.am4themes_animated),zt.useTheme(Ht);const Qt=Vt==="pie-chart"?this._createPieChart(_t):this._createXYChart(_t);Pt.setAttribute("aria-label",Ft.altText||Ft.title),Qt.data=Nt.series.map(Zt=>({[b$C]:Zt.tooltip,[C$e]:Zt.value,[g$F]:Dt.get(Zt.fieldName)})).filter(Zt=>Vt!=="pie-chart"||Zt.value>0)}_customizeChartTooltip(_t,Tt){_t.label.wrap=!0,_t.label.maxWidth=200,_t.autoTextColor=!1,_t.getFillFromObject=!1,_t.label.fill=Tt.color("#ffffff"),_t.background.fill=Tt.color({r:0,g:0,b:0,a:.7})}_createPieChart(_t){const{chartDiv:Tt,chartsModule:Mt}=_t,{am4core:Pt,am4charts:Ft}=Mt,Dt=Pt.create(Tt,Ft.PieChart);Dt.rtl=f$10(this.container);const Nt=Dt.series.push(new Ft.PieSeries);return Nt.labels.template.disabled=!0,Nt.ticks.template.disabled=!0,Nt.dataFields.value=C$e,Nt.dataFields.category=b$C,this._customizeChartTooltip(Nt.tooltip,Pt),Nt.slices.template.tooltipText=Dt.rtl?"{category}: %{value.percent.formatNumber('#.0')}":"{category}: {value.percent.formatNumber('#.0')}%",Nt.slices.template.propertyFields.fill=g$F,Nt.slices.template.propertyFields.stroke=g$F,Dt}_getMinSeriesValue(_t){let Tt=0;return _t.forEach(Mt=>Tt=Math.min(Mt.value,Tt)),Tt}_createColumnChart(_t,Tt){const{chartsModule:Mt,mediaInfo:Pt}=Tt,{value:Ft}=Pt,{am4core:Dt,am4charts:Nt}=Mt,Vt=_t.xAxes.push(new Nt.CategoryAxis);Vt.dataFields.category=b$C,Vt.renderer.labels.template.disabled=!0,this._customizeChartTooltip(Vt.tooltip,Dt),Vt.tooltip.events.on("sizechanged",()=>{Vt.tooltip.dy=-Vt.tooltip.contentHeight});const zt=_t.yAxes.push(new Nt.ValueAxis),Xt=zt.renderer.labels.template;zt.renderer.minLabelPosition=I$i,zt.renderer.maxLabelPosition=y$S,zt.min=this._getMinSeriesValue(Ft.series),this._customizeChartTooltip(zt.tooltip,Dt),Xt.wrap=!0;const Ht=_t.series.push(new Nt.ColumnSeries);Ht.dataFields.valueY=C$e,Ht.dataFields.categoryX=b$C,Ht.columns.template.propertyFields.fill=g$F,Ht.columns.template.propertyFields.stroke=g$F,_t.cursor=new Nt.XYCursor,Ft.series.length>w$x&&(_t.scrollbarX=new Dt.Scrollbar)}_createBarChart(_t,Tt){const{chartsModule:Mt,mediaInfo:Pt}=Tt,{value:Ft}=Pt,{am4core:Dt,am4charts:Nt}=Mt,Vt=_t.yAxes.push(new Nt.CategoryAxis);Vt.dataFields.category=b$C,Vt.renderer.inversed=!0,Vt.renderer.labels.template.disabled=!0,this._customizeChartTooltip(Vt.tooltip,Dt),Vt.tooltip.events.on("sizechanged",()=>{Vt.tooltip.dx=Vt.tooltip.contentWidth});const zt=_t.xAxes.push(new Nt.ValueAxis),Xt=zt.renderer.labels.template;zt.renderer.minLabelPosition=I$i,zt.renderer.maxLabelPosition=y$S,zt.min=this._getMinSeriesValue(Ft.series),this._customizeChartTooltip(zt.tooltip,Dt),Xt.wrap=!0;const Ht=_t.series.push(new Nt.ColumnSeries);Ht.dataFields.valueX=C$e,Ht.dataFields.categoryY=b$C,Ht.columns.template.propertyFields.fill=g$F,Ht.columns.template.propertyFields.stroke=g$F,_t.cursor=new Nt.XYCursor,Ft.series.length>w$x&&(_t.scrollbarY=new Dt.Scrollbar)}_createLineChart(_t,Tt){const{chartsModule:Mt,mediaInfo:Pt,colorMap:Ft}=Tt,{value:Dt}=Pt,{am4core:Nt,am4charts:Vt}=Mt,zt=_t.xAxes.push(new Vt.CategoryAxis);zt.dataFields.category=b$C,zt.renderer.labels.template.disabled=!0,this._customizeChartTooltip(zt.tooltip,Nt),zt.tooltip.events.on("sizechanged",()=>{zt.tooltip.dy=-zt.tooltip.contentHeight});const Xt=_t.yAxes.push(new Vt.ValueAxis),Ht=Xt.renderer.labels.template;Xt.renderer.minLabelPosition=I$i,Xt.renderer.maxLabelPosition=y$S,Xt.min=this._getMinSeriesValue(Dt.series),this._customizeChartTooltip(Xt.tooltip,Nt),Ht.wrap=!0;const Wt=_t.series.push(new Vt.LineSeries);Wt.dataFields.categoryX=b$C,Wt.dataFields.valueY=C$e,Wt.strokeWidth=1;const Qt=Ft.get(T$h);Qt&&(Wt.stroke=Qt);const Zt=Wt.bullets.push(new Vt.CircleBullet);Zt.propertyFields.fill=g$F,Zt.propertyFields.stroke=g$F,_t.cursor=new Vt.XYCursor,Dt.series.length>w$x&&(_t.scrollbarX=new Nt.Scrollbar)}_createXYChart(_t){const{chartDiv:Tt,chartsModule:Mt,mediaInfo:Pt}=_t,{type:Ft}=Pt,{am4core:Dt,am4charts:Nt}=Mt,Vt=Dt.create(Tt,Nt.XYChart);return Vt.rtl=f$10(this.container),Ft==="column-chart"&&this._createColumnChart(Vt,_t),Ft==="bar-chart"&&this._createBarChart(Vt,_t),Ft==="line-chart"&&this._createLineChart(Vt,_t),Vt}_clearMediaRefreshTimer(){const{_refreshTimer:_t}=this;_t&&(clearTimeout(_t),this._refreshTimer=null)}_updateMediaInfoTimestamp(_t){const Tt=Date.now();this._refreshIntervalInfo={timestamp:Tt,sourceURL:this._getImageSource(_t,Tt)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:_t}=this.viewModel;_t&&_t.type==="image"&&_t.refreshInterval&&this._setRefreshTimeout(_t)}_setRefreshTimeout(_t){const{refreshInterval:Tt,value:Mt}=_t;if(!Tt)return;const Pt=6e4*Tt;this._updateMediaInfoTimestamp(Mt.sourceURL);const Ft=setInterval(()=>{this._updateMediaInfoTimestamp(Mt.sourceURL)},Pt);this._refreshTimer=Ft}_getImageSource(_t,Tt){const Mt=_t.includes("?")?"&":"?",[Pt,Ft=""]=_t.split("#");return`${Pt}${Mt}timestamp=${Tt}${Ft?"#":""}${Ft}`}};e$2a([o$1d("viewModel.attributes")],x$q.prototype,"attributes",void 0),e$2a([o$1d("viewModel.activeMediaInfoIndex")],x$q.prototype,"activeMediaInfoIndex",void 0),e$2a([o$1d("viewModel.description")],x$q.prototype,"description",void 0),e$2a([o$1d("viewModel.fieldInfoMap")],x$q.prototype,"fieldInfoMap",void 0),e$2a([o$1d("viewModel.layer")],x$q.prototype,"layer",void 0),e$2a([o$1d("viewModel.mediaInfos")],x$q.prototype,"mediaInfos",void 0),e$2a([o$1d("viewModel.popupTemplate")],x$q.prototype,"popupTemplate",void 0),e$2a([o$1d("viewModel.relatedInfos")],x$q.prototype,"relatedInfos",void 0),e$2a([o$1d("viewModel.title")],x$q.prototype,"title",void 0),e$2a([d$25({type:b$E})],x$q.prototype,"viewModel",void 0),e$2a([d$25(),e$1f("esri/widgets/Feature/t9n/Feature")],x$q.prototype,"messages",void 0),x$q=e$2a([n$2L("esri.widgets.Feature.FeatureMedia")],x$q);const F$i=x$q;class t$10{constructor(Tt,Mt){this.definition=null,this.context=null,this.definition=Tt,this.context=Mt}}class t$${constructor(Tt=[]){this._elements=Tt}length(){return this._elements.length}get(Tt){return this._elements[Tt]}toArray(){const Tt=[];for(let Mt=0;Mt<this.length();Mt++)Tt.push(this.get(Mt));return Tt}}class i$1p extends t$${constructor(Tt,Mt,Pt,Ft,Dt,Nt){super(Tt),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=Mt,this._hasZ=Pt,this._hasM=Ft,this._cacheId=Dt,this._partId=Nt}get(Tt){if(this._lazyPt[Tt]===void 0){const Mt=this._elements[Tt];if(Mt===void 0)return;const Pt=this._hasZ,Ft=this._hasM;let Dt=null;Dt=Pt&&!Ft?new j$Z(Mt[0],Mt[1],Mt[2],void 0,this._spRef):Ft&&!Pt?new j$Z(Mt[0],Mt[1],void 0,Mt[2],this._spRef):Pt&&Ft?new j$Z(Mt[0],Mt[1],Mt[2],Mt[3],this._spRef):new j$Z(Mt[0],Mt[1],this._spRef),Dt.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+Tt.toString(),this._lazyPt[Tt]=Dt}return this._lazyPt[Tt]}equalityTest(Tt){return Tt===this||Tt!==null&&Tt instanceof i$1p&&Tt.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class h$P extends t$${constructor(Tt,Mt,Pt,Ft,Dt){super(Tt),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=Pt,this._hasM=Ft,this._spRef=Mt,this._cacheId=Dt}get(Tt){if(this._lazyPath[Tt]===void 0){const Mt=this._elements[Tt];if(Mt===void 0)return;this._lazyPath[Tt]=new i$1p(Mt,this._spRef,this._hasZ,this._hasM,this._cacheId,Tt)}return this._lazyPath[Tt]}equalityTest(Tt){return Tt===this||Tt!==null&&Tt instanceof h$P&&Tt.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class LuxonError extends Error{}class InvalidDateTimeError extends LuxonError{constructor(Tt){super(`Invalid DateTime: ${Tt.toMessage()}`)}}class InvalidIntervalError extends LuxonError{constructor(Tt){super(`Invalid Interval: ${Tt.toMessage()}`)}}class InvalidDurationError extends LuxonError{constructor(Tt){super(`Invalid Duration: ${Tt.toMessage()}`)}}class ConflictingSpecificationError extends LuxonError{}class InvalidUnitError extends LuxonError{constructor(Tt){super(`Invalid unit ${Tt}`)}}class InvalidArgumentError extends LuxonError{}class ZoneIsAbstractError extends LuxonError{constructor(){super("Zone is an abstract class")}}const n$1s="numeric",s$14="short",l$1g="long",DATE_SHORT={year:n$1s,month:n$1s,day:n$1s},DATE_MED={year:n$1s,month:s$14,day:n$1s},DATE_MED_WITH_WEEKDAY={year:n$1s,month:s$14,day:n$1s,weekday:s$14},DATE_FULL={year:n$1s,month:l$1g,day:n$1s},DATE_HUGE={year:n$1s,month:l$1g,day:n$1s,weekday:l$1g},TIME_SIMPLE={hour:n$1s,minute:n$1s},TIME_WITH_SECONDS={hour:n$1s,minute:n$1s,second:n$1s},TIME_WITH_SHORT_OFFSET={hour:n$1s,minute:n$1s,second:n$1s,timeZoneName:s$14},TIME_WITH_LONG_OFFSET={hour:n$1s,minute:n$1s,second:n$1s,timeZoneName:l$1g},TIME_24_SIMPLE={hour:n$1s,minute:n$1s,hourCycle:"h23"},TIME_24_WITH_SECONDS={hour:n$1s,minute:n$1s,second:n$1s,hourCycle:"h23"},TIME_24_WITH_SHORT_OFFSET={hour:n$1s,minute:n$1s,second:n$1s,hourCycle:"h23",timeZoneName:s$14},TIME_24_WITH_LONG_OFFSET={hour:n$1s,minute:n$1s,second:n$1s,hourCycle:"h23",timeZoneName:l$1g},DATETIME_SHORT={year:n$1s,month:n$1s,day:n$1s,hour:n$1s,minute:n$1s},DATETIME_SHORT_WITH_SECONDS={year:n$1s,month:n$1s,day:n$1s,hour:n$1s,minute:n$1s,second:n$1s},DATETIME_MED={year:n$1s,month:s$14,day:n$1s,hour:n$1s,minute:n$1s},DATETIME_MED_WITH_SECONDS={year:n$1s,month:s$14,day:n$1s,hour:n$1s,minute:n$1s,second:n$1s},DATETIME_MED_WITH_WEEKDAY={year:n$1s,month:s$14,day:n$1s,weekday:s$14,hour:n$1s,minute:n$1s},DATETIME_FULL={year:n$1s,month:l$1g,day:n$1s,hour:n$1s,minute:n$1s,timeZoneName:s$14},DATETIME_FULL_WITH_SECONDS={year:n$1s,month:l$1g,day:n$1s,hour:n$1s,minute:n$1s,second:n$1s,timeZoneName:s$14},DATETIME_HUGE={year:n$1s,month:l$1g,day:n$1s,weekday:l$1g,hour:n$1s,minute:n$1s,timeZoneName:l$1g},DATETIME_HUGE_WITH_SECONDS={year:n$1s,month:l$1g,day:n$1s,weekday:l$1g,hour:n$1s,minute:n$1s,second:n$1s,timeZoneName:l$1g};function isUndefined$1(_t){return typeof _t>"u"}function isNumber$1(_t){return typeof _t=="number"}function isInteger(_t){return typeof _t=="number"&&_t%1===0}function isString$1(_t){return typeof _t=="string"}function isDate$1(_t){return Object.prototype.toString.call(_t)==="[object Date]"}function hasRelative(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function maybeArray(_t){return Array.isArray(_t)?_t:[_t]}function bestBy(_t,Tt,Mt){if(_t.length!==0)return _t.reduce((Pt,Ft)=>{const Dt=[Tt(Ft),Ft];return Pt&&Mt(Pt[0],Dt[0])===Pt[0]?Pt:Dt},null)[1]}function pick(_t,Tt){return Tt.reduce((Mt,Pt)=>(Mt[Pt]=_t[Pt],Mt),{})}function hasOwnProperty(_t,Tt){return Object.prototype.hasOwnProperty.call(_t,Tt)}function integerBetween(_t,Tt,Mt){return isInteger(_t)&&_t>=Tt&&_t<=Mt}function floorMod(_t,Tt){return _t-Tt*Math.floor(_t/Tt)}function padStart(_t,Tt=2){const Mt=_t<0;let Pt;return Mt?Pt="-"+(""+-_t).padStart(Tt,"0"):Pt=(""+_t).padStart(Tt,"0"),Pt}function parseInteger(_t){if(!(isUndefined$1(_t)||_t===null||_t===""))return parseInt(_t,10)}function parseFloating(_t){if(!(isUndefined$1(_t)||_t===null||_t===""))return parseFloat(_t)}function parseMillis(_t){if(!(isUndefined$1(_t)||_t===null||_t==="")){const Tt=parseFloat("0."+_t)*1e3;return Math.floor(Tt)}}function roundTo(_t,Tt,Mt=!1){const Pt=10**Tt;return(Mt?Math.trunc:Math.round)(_t*Pt)/Pt}function isLeapYear(_t){return _t%4===0&&(_t%100!==0||_t%400===0)}function daysInYear(_t){return isLeapYear(_t)?366:365}function daysInMonth(_t,Tt){const Mt=floorMod(Tt-1,12)+1,Pt=_t+(Tt-Mt)/12;return Mt===2?isLeapYear(Pt)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][Mt-1]}function objToLocalTS(_t){let Tt=Date.UTC(_t.year,_t.month-1,_t.day,_t.hour,_t.minute,_t.second,_t.millisecond);return _t.year<100&&_t.year>=0&&(Tt=new Date(Tt),Tt.setUTCFullYear(Tt.getUTCFullYear()-1900)),+Tt}function weeksInWeekYear(_t){const Tt=(_t+Math.floor(_t/4)-Math.floor(_t/100)+Math.floor(_t/400))%7,Mt=_t-1,Pt=(Mt+Math.floor(Mt/4)-Math.floor(Mt/100)+Math.floor(Mt/400))%7;return Tt===4||Pt===3?53:52}function untruncateYear(_t){return _t>99?_t:_t>60?1900+_t:2e3+_t}function parseZoneInfo(_t,Tt,Mt,Pt=null){const Ft=new Date(_t),Dt={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};Pt&&(Dt.timeZone=Pt);const Nt={timeZoneName:Tt,...Dt},Vt=new Intl.DateTimeFormat(Mt,Nt).formatToParts(Ft).find(zt=>zt.type.toLowerCase()==="timezonename");return Vt?Vt.value:null}function signedOffset(_t,Tt){let Mt=parseInt(_t,10);Number.isNaN(Mt)&&(Mt=0);const Pt=parseInt(Tt,10)||0,Ft=Mt<0||Object.is(Mt,-0)?-Pt:Pt;return Mt*60+Ft}function asNumber(_t){const Tt=Number(_t);if(typeof _t=="boolean"||_t===""||Number.isNaN(Tt))throw new InvalidArgumentError(`Invalid unit value ${_t}`);return Tt}function normalizeObject(_t,Tt){const Mt={};for(const Pt in _t)if(hasOwnProperty(_t,Pt)){const Ft=_t[Pt];if(Ft==null)continue;Mt[Tt(Pt)]=asNumber(Ft)}return Mt}function formatOffset(_t,Tt){const Mt=Math.trunc(Math.abs(_t/60)),Pt=Math.trunc(Math.abs(_t%60)),Ft=_t>=0?"+":"-";switch(Tt){case"short":return`${Ft}${padStart(Mt,2)}:${padStart(Pt,2)}`;case"narrow":return`${Ft}${Mt}${Pt>0?`:${Pt}`:""}`;case"techie":return`${Ft}${padStart(Mt,2)}${padStart(Pt,2)}`;default:throw new RangeError(`Value format ${Tt} is out of range for property format`)}}function timeObject(_t){return pick(_t,["hour","minute","second","millisecond"])}const ianaRegex=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsNarrow=["J","F","M","A","M","J","J","A","S","O","N","D"];function months(_t){switch(_t){case"narrow":return[...monthsNarrow];case"short":return[...monthsShort];case"long":return[...monthsLong];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const weekdaysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekdaysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weekdaysNarrow=["M","T","W","T","F","S","S"];function weekdays(_t){switch(_t){case"narrow":return[...weekdaysNarrow];case"short":return[...weekdaysShort];case"long":return[...weekdaysLong];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const meridiems=["AM","PM"],erasLong=["Before Christ","Anno Domini"],erasShort=["BC","AD"],erasNarrow=["B","A"];function eras(_t){switch(_t){case"narrow":return[...erasNarrow];case"short":return[...erasShort];case"long":return[...erasLong];default:return null}}function meridiemForDateTime(_t){return meridiems[_t.hour<12?0:1]}function weekdayForDateTime(_t,Tt){return weekdays(Tt)[_t.weekday-1]}function monthForDateTime(_t,Tt){return months(Tt)[_t.month-1]}function eraForDateTime(_t,Tt){return eras(Tt)[_t.year<0?0:1]}function formatRelativeTime(_t,Tt,Mt="always",Pt=!1){const Ft={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},Dt=["hours","minutes","seconds"].indexOf(_t)===-1;if(Mt==="auto"&&Dt){const Wt=_t==="days";switch(Tt){case 1:return Wt?"tomorrow":`next ${Ft[_t][0]}`;case-1:return Wt?"yesterday":`last ${Ft[_t][0]}`;case 0:return Wt?"today":`this ${Ft[_t][0]}`}}const Nt=Object.is(Tt,-0)||Tt<0,Vt=Math.abs(Tt),zt=Vt===1,Xt=Ft[_t],Ht=Pt?zt?Xt[1]:Xt[2]||Xt[1]:zt?Ft[_t][0]:_t;return Nt?`${Vt} ${Ht} ago`:`in ${Vt} ${Ht}`}function stringifyTokens(_t,Tt){let Mt="";for(const Pt of _t)Pt.literal?Mt+=Pt.val:Mt+=Tt(Pt.val);return Mt}const macroTokenToFormatOpts={D:DATE_SHORT,DD:DATE_MED,DDD:DATE_FULL,DDDD:DATE_HUGE,t:TIME_SIMPLE,tt:TIME_WITH_SECONDS,ttt:TIME_WITH_SHORT_OFFSET,tttt:TIME_WITH_LONG_OFFSET,T:TIME_24_SIMPLE,TT:TIME_24_WITH_SECONDS,TTT:TIME_24_WITH_SHORT_OFFSET,TTTT:TIME_24_WITH_LONG_OFFSET,f:DATETIME_SHORT,ff:DATETIME_MED,fff:DATETIME_FULL,ffff:DATETIME_HUGE,F:DATETIME_SHORT_WITH_SECONDS,FF:DATETIME_MED_WITH_SECONDS,FFF:DATETIME_FULL_WITH_SECONDS,FFFF:DATETIME_HUGE_WITH_SECONDS};class Formatter{static create(Tt,Mt={}){return new Formatter(Tt,Mt)}static parseFormat(Tt){let Mt=null,Pt="",Ft=!1;const Dt=[];for(let Nt=0;Nt<Tt.length;Nt++){const Vt=Tt.charAt(Nt);Vt==="'"?(Pt.length>0&&Dt.push({literal:Ft,val:Pt}),Mt=null,Pt="",Ft=!Ft):Ft||Vt===Mt?Pt+=Vt:(Pt.length>0&&Dt.push({literal:!1,val:Pt}),Pt=Vt,Mt=Vt)}return Pt.length>0&&Dt.push({literal:Ft,val:Pt}),Dt}static macroTokenToFormatOpts(Tt){return macroTokenToFormatOpts[Tt]}constructor(Tt,Mt){this.opts=Mt,this.loc=Tt,this.systemLoc=null}formatWithSystemDefault(Tt,Mt){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(Tt,{...this.opts,...Mt}).format()}formatDateTime(Tt,Mt={}){return this.loc.dtFormatter(Tt,{...this.opts,...Mt}).format()}formatDateTimeParts(Tt,Mt={}){return this.loc.dtFormatter(Tt,{...this.opts,...Mt}).formatToParts()}resolvedOptions(Tt,Mt={}){return this.loc.dtFormatter(Tt,{...this.opts,...Mt}).resolvedOptions()}num(Tt,Mt=0){if(this.opts.forceSimple)return padStart(Tt,Mt);const Pt={...this.opts};return Mt>0&&(Pt.padTo=Mt),this.loc.numberFormatter(Pt).format(Tt)}formatDateTimeFromString(Tt,Mt){const Pt=this.loc.listingMode()==="en",Ft=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",Dt=(Zt,Kt)=>this.loc.extract(Tt,Zt,Kt),Nt=Zt=>Tt.isOffsetFixed&&Tt.offset===0&&Zt.allowZ?"Z":Tt.isValid?Tt.zone.formatOffset(Tt.ts,Zt.format):"",Vt=()=>Pt?meridiemForDateTime(Tt):Dt({hour:"numeric",hourCycle:"h12"},"dayperiod"),zt=(Zt,Kt)=>Pt?monthForDateTime(Tt,Zt):Dt(Kt?{month:Zt}:{month:Zt,day:"numeric"},"month"),Xt=(Zt,Kt)=>Pt?weekdayForDateTime(Tt,Zt):Dt(Kt?{weekday:Zt}:{weekday:Zt,month:"long",day:"numeric"},"weekday"),Ht=Zt=>{const Kt=Formatter.macroTokenToFormatOpts(Zt);return Kt?this.formatWithSystemDefault(Tt,Kt):Zt},Wt=Zt=>Pt?eraForDateTime(Tt,Zt):Dt({era:Zt},"era"),Qt=Zt=>{switch(Zt){case"S":return this.num(Tt.millisecond);case"u":case"SSS":return this.num(Tt.millisecond,3);case"s":return this.num(Tt.second);case"ss":return this.num(Tt.second,2);case"uu":return this.num(Math.floor(Tt.millisecond/10),2);case"uuu":return this.num(Math.floor(Tt.millisecond/100));case"m":return this.num(Tt.minute);case"mm":return this.num(Tt.minute,2);case"h":return this.num(Tt.hour%12===0?12:Tt.hour%12);case"hh":return this.num(Tt.hour%12===0?12:Tt.hour%12,2);case"H":return this.num(Tt.hour);case"HH":return this.num(Tt.hour,2);case"Z":return Nt({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return Nt({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return Nt({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return Tt.zone.offsetName(Tt.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return Tt.zone.offsetName(Tt.ts,{format:"long",locale:this.loc.locale});case"z":return Tt.zoneName;case"a":return Vt();case"d":return Ft?Dt({day:"numeric"},"day"):this.num(Tt.day);case"dd":return Ft?Dt({day:"2-digit"},"day"):this.num(Tt.day,2);case"c":return this.num(Tt.weekday);case"ccc":return Xt("short",!0);case"cccc":return Xt("long",!0);case"ccccc":return Xt("narrow",!0);case"E":return this.num(Tt.weekday);case"EEE":return Xt("short",!1);case"EEEE":return Xt("long",!1);case"EEEEE":return Xt("narrow",!1);case"L":return Ft?Dt({month:"numeric",day:"numeric"},"month"):this.num(Tt.month);case"LL":return Ft?Dt({month:"2-digit",day:"numeric"},"month"):this.num(Tt.month,2);case"LLL":return zt("short",!0);case"LLLL":return zt("long",!0);case"LLLLL":return zt("narrow",!0);case"M":return Ft?Dt({month:"numeric"},"month"):this.num(Tt.month);case"MM":return Ft?Dt({month:"2-digit"},"month"):this.num(Tt.month,2);case"MMM":return zt("short",!1);case"MMMM":return zt("long",!1);case"MMMMM":return zt("narrow",!1);case"y":return Ft?Dt({year:"numeric"},"year"):this.num(Tt.year);case"yy":return Ft?Dt({year:"2-digit"},"year"):this.num(Tt.year.toString().slice(-2),2);case"yyyy":return Ft?Dt({year:"numeric"},"year"):this.num(Tt.year,4);case"yyyyyy":return Ft?Dt({year:"numeric"},"year"):this.num(Tt.year,6);case"G":return Wt("short");case"GG":return Wt("long");case"GGGGG":return Wt("narrow");case"kk":return this.num(Tt.weekYear.toString().slice(-2),2);case"kkkk":return this.num(Tt.weekYear,4);case"W":return this.num(Tt.weekNumber);case"WW":return this.num(Tt.weekNumber,2);case"o":return this.num(Tt.ordinal);case"ooo":return this.num(Tt.ordinal,3);case"q":return this.num(Tt.quarter);case"qq":return this.num(Tt.quarter,2);case"X":return this.num(Math.floor(Tt.ts/1e3));case"x":return this.num(Tt.ts);default:return Ht(Zt)}};return stringifyTokens(Formatter.parseFormat(Mt),Qt)}formatDurationFromString(Tt,Mt){const Pt=zt=>{switch(zt[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},Ft=zt=>Xt=>{const Ht=Pt(Xt);return Ht?this.num(zt.get(Ht),Xt.length):Xt},Dt=Formatter.parseFormat(Mt),Nt=Dt.reduce((zt,{literal:Xt,val:Ht})=>Xt?zt:zt.concat(Ht),[]),Vt=Tt.shiftTo(...Nt.map(Pt).filter(zt=>zt));return stringifyTokens(Dt,Ft(Vt))}}class Invalid{constructor(Tt,Mt){this.reason=Tt,this.explanation=Mt}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class Zone{get type(){throw new ZoneIsAbstractError}get name(){throw new ZoneIsAbstractError}get ianaName(){return this.name}get isUniversal(){throw new ZoneIsAbstractError}offsetName(Tt,Mt){throw new ZoneIsAbstractError}formatOffset(Tt,Mt){throw new ZoneIsAbstractError}offset(Tt){throw new ZoneIsAbstractError}equals(Tt){throw new ZoneIsAbstractError}get isValid(){throw new ZoneIsAbstractError}}let singleton$1=null;class SystemZone extends Zone{static get instance(){return singleton$1===null&&(singleton$1=new SystemZone),singleton$1}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(Tt,{format:Mt,locale:Pt}){return parseZoneInfo(Tt,Mt,Pt)}formatOffset(Tt,Mt){return formatOffset(this.offset(Tt),Mt)}offset(Tt){return-new Date(Tt).getTimezoneOffset()}equals(Tt){return Tt.type==="system"}get isValid(){return!0}}let dtfCache={};function makeDTF(_t){return dtfCache[_t]||(dtfCache[_t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:_t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),dtfCache[_t]}const typeToPos={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function hackyOffset(_t,Tt){const Mt=_t.format(Tt).replace(/\u200E/g,""),Pt=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(Mt),[,Ft,Dt,Nt,Vt,zt,Xt,Ht]=Pt;return[Nt,Ft,Dt,Vt,zt,Xt,Ht]}function partsOffset(_t,Tt){const Mt=_t.formatToParts(Tt),Pt=[];for(let Ft=0;Ft<Mt.length;Ft++){const{type:Dt,value:Nt}=Mt[Ft],Vt=typeToPos[Dt];Dt==="era"?Pt[Vt]=Nt:isUndefined$1(Vt)||(Pt[Vt]=parseInt(Nt,10))}return Pt}let ianaZoneCache={};class IANAZone extends Zone{static create(Tt){return ianaZoneCache[Tt]||(ianaZoneCache[Tt]=new IANAZone(Tt)),ianaZoneCache[Tt]}static resetCache(){ianaZoneCache={},dtfCache={}}static isValidSpecifier(Tt){return this.isValidZone(Tt)}static isValidZone(Tt){if(!Tt)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:Tt}).format(),!0}catch{return!1}}constructor(Tt){super(),this.zoneName=Tt,this.valid=IANAZone.isValidZone(Tt)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(Tt,{format:Mt,locale:Pt}){return parseZoneInfo(Tt,Mt,Pt,this.name)}formatOffset(Tt,Mt){return formatOffset(this.offset(Tt),Mt)}offset(Tt){const Mt=new Date(Tt);if(isNaN(Mt))return NaN;const Pt=makeDTF(this.name);let[Ft,Dt,Nt,Vt,zt,Xt,Ht]=Pt.formatToParts?partsOffset(Pt,Mt):hackyOffset(Pt,Mt);Vt==="BC"&&(Ft=-Math.abs(Ft)+1);const Qt=objToLocalTS({year:Ft,month:Dt,day:Nt,hour:zt===24?0:zt,minute:Xt,second:Ht,millisecond:0});let Zt=+Mt;const Kt=Zt%1e3;return Zt-=Kt>=0?Kt:1e3+Kt,(Qt-Zt)/(60*1e3)}equals(Tt){return Tt.type==="iana"&&Tt.name===this.name}get isValid(){return this.valid}}let singleton=null;class FixedOffsetZone extends Zone{static get utcInstance(){return singleton===null&&(singleton=new FixedOffsetZone(0)),singleton}static instance(Tt){return Tt===0?FixedOffsetZone.utcInstance:new FixedOffsetZone(Tt)}static parseSpecifier(Tt){if(Tt){const Mt=Tt.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(Mt)return new FixedOffsetZone(signedOffset(Mt[1],Mt[2]))}return null}constructor(Tt){super(),this.fixed=Tt}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${formatOffset(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${formatOffset(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(Tt,Mt){return formatOffset(this.fixed,Mt)}get isUniversal(){return!0}offset(){return this.fixed}equals(Tt){return Tt.type==="fixed"&&Tt.fixed===this.fixed}get isValid(){return!0}}class InvalidZone extends Zone{constructor(Tt){super(),this.zoneName=Tt}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function normalizeZone(_t,Tt){if(isUndefined$1(_t)||_t===null)return Tt;if(_t instanceof Zone)return _t;if(isString$1(_t)){const Mt=_t.toLowerCase();return Mt==="local"||Mt==="system"?Tt:Mt==="utc"||Mt==="gmt"?FixedOffsetZone.utcInstance:FixedOffsetZone.parseSpecifier(Mt)||IANAZone.create(_t)}else return isNumber$1(_t)?FixedOffsetZone.instance(_t):typeof _t=="object"&&_t.offset&&typeof _t.offset=="number"?_t:new InvalidZone(_t)}let now=()=>Date.now(),defaultZone="system",defaultLocale=null,defaultNumberingSystem=null,defaultOutputCalendar=null,throwOnInvalid;class Settings{static get now(){return now}static set now(Tt){now=Tt}static set defaultZone(Tt){defaultZone=Tt}static get defaultZone(){return normalizeZone(defaultZone,SystemZone.instance)}static get defaultLocale(){return defaultLocale}static set defaultLocale(Tt){defaultLocale=Tt}static get defaultNumberingSystem(){return defaultNumberingSystem}static set defaultNumberingSystem(Tt){defaultNumberingSystem=Tt}static get defaultOutputCalendar(){return defaultOutputCalendar}static set defaultOutputCalendar(Tt){defaultOutputCalendar=Tt}static get throwOnInvalid(){return throwOnInvalid}static set throwOnInvalid(Tt){throwOnInvalid=Tt}static resetCaches(){Locale.resetCache(),IANAZone.resetCache()}}let intlLFCache={};function getCachedLF(_t,Tt={}){const Mt=JSON.stringify([_t,Tt]);let Pt=intlLFCache[Mt];return Pt||(Pt=new Intl.ListFormat(_t,Tt),intlLFCache[Mt]=Pt),Pt}let intlDTCache={};function getCachedDTF(_t,Tt={}){const Mt=JSON.stringify([_t,Tt]);let Pt=intlDTCache[Mt];return Pt||(Pt=new Intl.DateTimeFormat(_t,Tt),intlDTCache[Mt]=Pt),Pt}let intlNumCache={};function getCachedINF(_t,Tt={}){const Mt=JSON.stringify([_t,Tt]);let Pt=intlNumCache[Mt];return Pt||(Pt=new Intl.NumberFormat(_t,Tt),intlNumCache[Mt]=Pt),Pt}let intlRelCache={};function getCachedRTF(_t,Tt={}){const{base:Mt,...Pt}=Tt,Ft=JSON.stringify([_t,Pt]);let Dt=intlRelCache[Ft];return Dt||(Dt=new Intl.RelativeTimeFormat(_t,Tt),intlRelCache[Ft]=Dt),Dt}let sysLocaleCache=null;function systemLocale(){return sysLocaleCache||(sysLocaleCache=new Intl.DateTimeFormat().resolvedOptions().locale,sysLocaleCache)}function parseLocaleString(_t){const Tt=_t.indexOf("-u-");if(Tt===-1)return[_t];{let Mt;const Pt=_t.substring(0,Tt);try{Mt=getCachedDTF(_t).resolvedOptions()}catch{Mt=getCachedDTF(Pt).resolvedOptions()}const{numberingSystem:Ft,calendar:Dt}=Mt;return[Pt,Ft,Dt]}}function intlConfigString(_t,Tt,Mt){return(Mt||Tt)&&(_t+="-u",Mt&&(_t+=`-ca-${Mt}`),Tt&&(_t+=`-nu-${Tt}`)),_t}function mapMonths(_t){const Tt=[];for(let Mt=1;Mt<=12;Mt++){const Pt=DateTime.utc(2016,Mt,1);Tt.push(_t(Pt))}return Tt}function mapWeekdays(_t){const Tt=[];for(let Mt=1;Mt<=7;Mt++){const Pt=DateTime.utc(2016,11,13+Mt);Tt.push(_t(Pt))}return Tt}function listStuff(_t,Tt,Mt,Pt,Ft){const Dt=_t.listingMode(Mt);return Dt==="error"?null:Dt==="en"?Pt(Tt):Ft(Tt)}function supportsFastNumbers(_t){return _t.numberingSystem&&_t.numberingSystem!=="latn"?!1:_t.numberingSystem==="latn"||!_t.locale||_t.locale.startsWith("en")||new Intl.DateTimeFormat(_t.intl).resolvedOptions().numberingSystem==="latn"}class PolyNumberFormatter{constructor(Tt,Mt,Pt){this.padTo=Pt.padTo||0,this.floor=Pt.floor||!1;const{padTo:Ft,floor:Dt,...Nt}=Pt;if(!Mt||Object.keys(Nt).length>0){const Vt={useGrouping:!1,...Pt};Pt.padTo>0&&(Vt.minimumIntegerDigits=Pt.padTo),this.inf=getCachedINF(Tt,Vt)}}format(Tt){if(this.inf){const Mt=this.floor?Math.floor(Tt):Tt;return this.inf.format(Mt)}else{const Mt=this.floor?Math.floor(Tt):roundTo(Tt,3);return padStart(Mt,this.padTo)}}}class PolyDateFormatter{constructor(Tt,Mt,Pt){this.opts=Pt;let Ft;if(Tt.zone.isUniversal){const Nt=-1*(Tt.offset/60),Vt=Nt>=0?`Etc/GMT+${Nt}`:`Etc/GMT${Nt}`;Tt.offset!==0&&IANAZone.create(Vt).valid?(Ft=Vt,this.dt=Tt):(Ft="UTC",Pt.timeZoneName?this.dt=Tt:this.dt=Tt.offset===0?Tt:DateTime.fromMillis(Tt.ts+Tt.offset*60*1e3))}else Tt.zone.type==="system"?this.dt=Tt:(this.dt=Tt,Ft=Tt.zone.name);const Dt={...this.opts};Ft&&(Dt.timeZone=Ft),this.dtf=getCachedDTF(Mt,Dt)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class PolyRelFormatter{constructor(Tt,Mt,Pt){this.opts={style:"long",...Pt},!Mt&&hasRelative()&&(this.rtf=getCachedRTF(Tt,Pt))}format(Tt,Mt){return this.rtf?this.rtf.format(Tt,Mt):formatRelativeTime(Mt,Tt,this.opts.numeric,this.opts.style!=="long")}formatToParts(Tt,Mt){return this.rtf?this.rtf.formatToParts(Tt,Mt):[]}}class Locale{static fromOpts(Tt){return Locale.create(Tt.locale,Tt.numberingSystem,Tt.outputCalendar,Tt.defaultToEN)}static create(Tt,Mt,Pt,Ft=!1){const Dt=Tt||Settings.defaultLocale,Nt=Dt||(Ft?"en-US":systemLocale()),Vt=Mt||Settings.defaultNumberingSystem,zt=Pt||Settings.defaultOutputCalendar;return new Locale(Nt,Vt,zt,Dt)}static resetCache(){sysLocaleCache=null,intlDTCache={},intlNumCache={},intlRelCache={}}static fromObject({locale:Tt,numberingSystem:Mt,outputCalendar:Pt}={}){return Locale.create(Tt,Mt,Pt)}constructor(Tt,Mt,Pt,Ft){const[Dt,Nt,Vt]=parseLocaleString(Tt);this.locale=Dt,this.numberingSystem=Mt||Nt||null,this.outputCalendar=Pt||Vt||null,this.intl=intlConfigString(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=Ft,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=supportsFastNumbers(this)),this.fastNumbersCached}listingMode(){const Tt=this.isEnglish(),Mt=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return Tt&&Mt?"en":"intl"}clone(Tt){return!Tt||Object.getOwnPropertyNames(Tt).length===0?this:Locale.create(Tt.locale||this.specifiedLocale,Tt.numberingSystem||this.numberingSystem,Tt.outputCalendar||this.outputCalendar,Tt.defaultToEN||!1)}redefaultToEN(Tt={}){return this.clone({...Tt,defaultToEN:!0})}redefaultToSystem(Tt={}){return this.clone({...Tt,defaultToEN:!1})}months(Tt,Mt=!1,Pt=!0){return listStuff(this,Tt,Pt,months,()=>{const Ft=Mt?{month:Tt,day:"numeric"}:{month:Tt},Dt=Mt?"format":"standalone";return this.monthsCache[Dt][Tt]||(this.monthsCache[Dt][Tt]=mapMonths(Nt=>this.extract(Nt,Ft,"month"))),this.monthsCache[Dt][Tt]})}weekdays(Tt,Mt=!1,Pt=!0){return listStuff(this,Tt,Pt,weekdays,()=>{const Ft=Mt?{weekday:Tt,year:"numeric",month:"long",day:"numeric"}:{weekday:Tt},Dt=Mt?"format":"standalone";return this.weekdaysCache[Dt][Tt]||(this.weekdaysCache[Dt][Tt]=mapWeekdays(Nt=>this.extract(Nt,Ft,"weekday"))),this.weekdaysCache[Dt][Tt]})}meridiems(Tt=!0){return listStuff(this,void 0,Tt,()=>meridiems,()=>{if(!this.meridiemCache){const Mt={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[DateTime.utc(2016,11,13,9),DateTime.utc(2016,11,13,19)].map(Pt=>this.extract(Pt,Mt,"dayperiod"))}return this.meridiemCache})}eras(Tt,Mt=!0){return listStuff(this,Tt,Mt,eras,()=>{const Pt={era:Tt};return this.eraCache[Tt]||(this.eraCache[Tt]=[DateTime.utc(-40,1,1),DateTime.utc(2017,1,1)].map(Ft=>this.extract(Ft,Pt,"era"))),this.eraCache[Tt]})}extract(Tt,Mt,Pt){const Ft=this.dtFormatter(Tt,Mt),Dt=Ft.formatToParts(),Nt=Dt.find(Vt=>Vt.type.toLowerCase()===Pt);return Nt?Nt.value:null}numberFormatter(Tt={}){return new PolyNumberFormatter(this.intl,Tt.forceSimple||this.fastNumbers,Tt)}dtFormatter(Tt,Mt={}){return new PolyDateFormatter(Tt,this.intl,Mt)}relFormatter(Tt={}){return new PolyRelFormatter(this.intl,this.isEnglish(),Tt)}listFormatter(Tt={}){return getCachedLF(this.intl,Tt)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(Tt){return this.locale===Tt.locale&&this.numberingSystem===Tt.numberingSystem&&this.outputCalendar===Tt.outputCalendar}}function combineRegexes(..._t){const Tt=_t.reduce((Mt,Pt)=>Mt+Pt.source,"");return RegExp(`^${Tt}$`)}function combineExtractors(..._t){return Tt=>_t.reduce(([Mt,Pt,Ft],Dt)=>{const[Nt,Vt,zt]=Dt(Tt,Ft);return[{...Mt,...Nt},Vt||Pt,zt]},[{},null,1]).slice(0,2)}function parse(_t,...Tt){if(_t==null)return[null,null];for(const[Mt,Pt]of Tt){const Ft=Mt.exec(_t);if(Ft)return Pt(Ft)}return[null,null]}function simpleParse(..._t){return(Tt,Mt)=>{const Pt={};let Ft;for(Ft=0;Ft<_t.length;Ft++)Pt[_t[Ft]]=parseInteger(Tt[Mt+Ft]);return[Pt,null,Mt+Ft]}}const offsetRegex=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,isoExtendedZone=`(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`,isoTimeBaseRegex=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,isoTimeRegex=RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`),isoTimeExtensionRegex=RegExp(`(?:T${isoTimeRegex.source})?`),isoYmdRegex=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,isoWeekRegex=/(\d{4})-?W(\d\d)(?:-?(\d))?/,isoOrdinalRegex=/(\d{4})-?(\d{3})/,extractISOWeekData=simpleParse("weekYear","weekNumber","weekDay"),extractISOOrdinalData=simpleParse("year","ordinal"),sqlYmdRegex=/(\d{4})-(\d\d)-(\d\d)/,sqlTimeRegex=RegExp(`${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`),sqlTimeExtensionRegex=RegExp(`(?: ${sqlTimeRegex.source})?`);function int(_t,Tt,Mt){const Pt=_t[Tt];return isUndefined$1(Pt)?Mt:parseInteger(Pt)}function extractISOYmd(_t,Tt){return[{year:int(_t,Tt),month:int(_t,Tt+1,1),day:int(_t,Tt+2,1)},null,Tt+3]}function extractISOTime(_t,Tt){return[{hours:int(_t,Tt,0),minutes:int(_t,Tt+1,0),seconds:int(_t,Tt+2,0),milliseconds:parseMillis(_t[Tt+3])},null,Tt+4]}function extractISOOffset(_t,Tt){const Mt=!_t[Tt]&&!_t[Tt+1],Pt=signedOffset(_t[Tt+1],_t[Tt+2]),Ft=Mt?null:FixedOffsetZone.instance(Pt);return[{},Ft,Tt+3]}function extractIANAZone(_t,Tt){const Mt=_t[Tt]?IANAZone.create(_t[Tt]):null;return[{},Mt,Tt+1]}const isoTimeOnly=RegExp(`^T?${isoTimeBaseRegex.source}$`),isoDuration=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function extractISODuration(_t){const[Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt]=_t,Ht=Tt[0]==="-",Wt=zt&&zt[0]==="-",Qt=(Zt,Kt=!1)=>Zt!==void 0&&(Kt||Zt&&Ht)?-Zt:Zt;return[{years:Qt(parseFloating(Mt)),months:Qt(parseFloating(Pt)),weeks:Qt(parseFloating(Ft)),days:Qt(parseFloating(Dt)),hours:Qt(parseFloating(Nt)),minutes:Qt(parseFloating(Vt)),seconds:Qt(parseFloating(zt),zt==="-0"),milliseconds:Qt(parseMillis(Xt),Wt)}]}const obsOffsets={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function fromStrings(_t,Tt,Mt,Pt,Ft,Dt,Nt){const Vt={year:Tt.length===2?untruncateYear(parseInteger(Tt)):parseInteger(Tt),month:monthsShort.indexOf(Mt)+1,day:parseInteger(Pt),hour:parseInteger(Ft),minute:parseInteger(Dt)};return Nt&&(Vt.second=parseInteger(Nt)),_t&&(Vt.weekday=_t.length>3?weekdaysLong.indexOf(_t)+1:weekdaysShort.indexOf(_t)+1),Vt}const rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function extractRFC2822(_t){const[,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt]=_t,Qt=fromStrings(Tt,Ft,Pt,Mt,Dt,Nt,Vt);let Zt;return zt?Zt=obsOffsets[zt]:Xt?Zt=0:Zt=signedOffset(Ht,Wt),[Qt,new FixedOffsetZone(Zt)]}function preprocessRFC2822(_t){return _t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const rfc1123=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rfc850=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ascii=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function extractRFC1123Or850(_t){const[,Tt,Mt,Pt,Ft,Dt,Nt,Vt]=_t;return[fromStrings(Tt,Ft,Pt,Mt,Dt,Nt,Vt),FixedOffsetZone.utcInstance]}function extractASCII(_t){const[,Tt,Mt,Pt,Ft,Dt,Nt,Vt]=_t;return[fromStrings(Tt,Vt,Mt,Pt,Ft,Dt,Nt),FixedOffsetZone.utcInstance]}const isoYmdWithTimeExtensionRegex=combineRegexes(isoYmdRegex,isoTimeExtensionRegex),isoWeekWithTimeExtensionRegex=combineRegexes(isoWeekRegex,isoTimeExtensionRegex),isoOrdinalWithTimeExtensionRegex=combineRegexes(isoOrdinalRegex,isoTimeExtensionRegex),isoTimeCombinedRegex=combineRegexes(isoTimeRegex),extractISOYmdTimeAndOffset=combineExtractors(extractISOYmd,extractISOTime,extractISOOffset,extractIANAZone),extractISOWeekTimeAndOffset=combineExtractors(extractISOWeekData,extractISOTime,extractISOOffset,extractIANAZone),extractISOOrdinalDateAndTime=combineExtractors(extractISOOrdinalData,extractISOTime,extractISOOffset,extractIANAZone),extractISOTimeAndOffset=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseISODate(_t){return parse(_t,[isoYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[isoWeekWithTimeExtensionRegex,extractISOWeekTimeAndOffset],[isoOrdinalWithTimeExtensionRegex,extractISOOrdinalDateAndTime],[isoTimeCombinedRegex,extractISOTimeAndOffset])}function parseRFC2822Date(_t){return parse(preprocessRFC2822(_t),[rfc2822,extractRFC2822])}function parseHTTPDate(_t){return parse(_t,[rfc1123,extractRFC1123Or850],[rfc850,extractRFC1123Or850],[ascii,extractASCII])}function parseISODuration(_t){return parse(_t,[isoDuration,extractISODuration])}const extractISOTimeOnly=combineExtractors(extractISOTime);function parseISOTimeOnly(_t){return parse(_t,[isoTimeOnly,extractISOTimeOnly])}const sqlYmdWithTimeExtensionRegex=combineRegexes(sqlYmdRegex,sqlTimeExtensionRegex),sqlTimeCombinedRegex=combineRegexes(sqlTimeRegex),extractISOTimeOffsetAndIANAZone=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);function parseSQL(_t){return parse(_t,[sqlYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[sqlTimeCombinedRegex,extractISOTimeOffsetAndIANAZone])}const INVALID$2="Invalid Duration",lowOrderMatrix={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},casualMatrix={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...lowOrderMatrix},daysInYearAccurate=146097/400,daysInMonthAccurate=146097/4800,accurateMatrix={years:{quarters:4,months:12,weeks:daysInYearAccurate/7,days:daysInYearAccurate,hours:daysInYearAccurate*24,minutes:daysInYearAccurate*24*60,seconds:daysInYearAccurate*24*60*60,milliseconds:daysInYearAccurate*24*60*60*1e3},quarters:{months:3,weeks:daysInYearAccurate/28,days:daysInYearAccurate/4,hours:daysInYearAccurate*24/4,minutes:daysInYearAccurate*24*60/4,seconds:daysInYearAccurate*24*60*60/4,milliseconds:daysInYearAccurate*24*60*60*1e3/4},months:{weeks:daysInMonthAccurate/7,days:daysInMonthAccurate,hours:daysInMonthAccurate*24,minutes:daysInMonthAccurate*24*60,seconds:daysInMonthAccurate*24*60*60,milliseconds:daysInMonthAccurate*24*60*60*1e3},...lowOrderMatrix},orderedUnits$1=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],reverseUnits=orderedUnits$1.slice(0).reverse();function clone$1(_t,Tt,Mt=!1){const Pt={values:Mt?Tt.values:{..._t.values,...Tt.values||{}},loc:_t.loc.clone(Tt.loc),conversionAccuracy:Tt.conversionAccuracy||_t.conversionAccuracy};return new Duration(Pt)}function antiTrunc(_t){return _t<0?Math.floor(_t):Math.ceil(_t)}function convert(_t,Tt,Mt,Pt,Ft){const Dt=_t[Ft][Mt],Nt=Tt[Mt]/Dt,Vt=Math.sign(Nt)===Math.sign(Pt[Ft]),zt=!Vt&&Pt[Ft]!==0&&Math.abs(Nt)<=1?antiTrunc(Nt):Math.trunc(Nt);Pt[Ft]+=zt,Tt[Mt]-=zt*Dt}function normalizeValues(_t,Tt){reverseUnits.reduce((Mt,Pt)=>isUndefined$1(Tt[Pt])?Mt:(Mt&&convert(_t,Tt,Mt,Tt,Pt),Pt),null)}class Duration{constructor(Tt){const Mt=Tt.conversionAccuracy==="longterm"||!1;this.values=Tt.values,this.loc=Tt.loc||Locale.create(),this.conversionAccuracy=Mt?"longterm":"casual",this.invalid=Tt.invalid||null,this.matrix=Mt?accurateMatrix:casualMatrix,this.isLuxonDuration=!0}static fromMillis(Tt,Mt){return Duration.fromObject({milliseconds:Tt},Mt)}static fromObject(Tt,Mt={}){if(Tt==null||typeof Tt!="object")throw new InvalidArgumentError(`Duration.fromObject: argument expected to be an object, got ${Tt===null?"null":typeof Tt}`);return new Duration({values:normalizeObject(Tt,Duration.normalizeUnit),loc:Locale.fromObject(Mt),conversionAccuracy:Mt.conversionAccuracy})}static fromDurationLike(Tt){if(isNumber$1(Tt))return Duration.fromMillis(Tt);if(Duration.isDuration(Tt))return Tt;if(typeof Tt=="object")return Duration.fromObject(Tt);throw new InvalidArgumentError(`Unknown duration argument ${Tt} of type ${typeof Tt}`)}static fromISO(Tt,Mt){const[Pt]=parseISODuration(Tt);return Pt?Duration.fromObject(Pt,Mt):Duration.invalid("unparsable",`the input "${Tt}" can't be parsed as ISO 8601`)}static fromISOTime(Tt,Mt){const[Pt]=parseISOTimeOnly(Tt);return Pt?Duration.fromObject(Pt,Mt):Duration.invalid("unparsable",`the input "${Tt}" can't be parsed as ISO 8601`)}static invalid(Tt,Mt=null){if(!Tt)throw new InvalidArgumentError("need to specify a reason the Duration is invalid");const Pt=Tt instanceof Invalid?Tt:new Invalid(Tt,Mt);if(Settings.throwOnInvalid)throw new InvalidDurationError(Pt);return new Duration({invalid:Pt})}static normalizeUnit(Tt){const Mt={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[Tt&&Tt.toLowerCase()];if(!Mt)throw new InvalidUnitError(Tt);return Mt}static isDuration(Tt){return Tt&&Tt.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(Tt,Mt={}){const Pt={...Mt,floor:Mt.round!==!1&&Mt.floor!==!1};return this.isValid?Formatter.create(this.loc,Pt).formatDurationFromString(this,Tt):INVALID$2}toHuman(Tt={}){const Mt=orderedUnits$1.map(Pt=>{const Ft=this.values[Pt];return isUndefined$1(Ft)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...Tt,unit:Pt.slice(0,-1)}).format(Ft)}).filter(Pt=>Pt);return this.loc.listFormatter({type:"conjunction",style:Tt.listStyle||"narrow",...Tt}).format(Mt)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let Tt="P";return this.years!==0&&(Tt+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(Tt+=this.months+this.quarters*3+"M"),this.weeks!==0&&(Tt+=this.weeks+"W"),this.days!==0&&(Tt+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(Tt+="T"),this.hours!==0&&(Tt+=this.hours+"H"),this.minutes!==0&&(Tt+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(Tt+=roundTo(this.seconds+this.milliseconds/1e3,3)+"S"),Tt==="P"&&(Tt+="T0S"),Tt}toISOTime(Tt={}){if(!this.isValid)return null;const Mt=this.toMillis();if(Mt<0||Mt>=864e5)return null;Tt={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...Tt};const Pt=this.shiftTo("hours","minutes","seconds","milliseconds");let Ft=Tt.format==="basic"?"hhmm":"hh:mm";(!Tt.suppressSeconds||Pt.seconds!==0||Pt.milliseconds!==0)&&(Ft+=Tt.format==="basic"?"ss":":ss",(!Tt.suppressMilliseconds||Pt.milliseconds!==0)&&(Ft+=".SSS"));let Dt=Pt.toFormat(Ft);return Tt.includePrefix&&(Dt="T"+Dt),Dt}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(Tt){if(!this.isValid)return this;const Mt=Duration.fromDurationLike(Tt),Pt={};for(const Ft of orderedUnits$1)(hasOwnProperty(Mt.values,Ft)||hasOwnProperty(this.values,Ft))&&(Pt[Ft]=Mt.get(Ft)+this.get(Ft));return clone$1(this,{values:Pt},!0)}minus(Tt){if(!this.isValid)return this;const Mt=Duration.fromDurationLike(Tt);return this.plus(Mt.negate())}mapUnits(Tt){if(!this.isValid)return this;const Mt={};for(const Pt of Object.keys(this.values))Mt[Pt]=asNumber(Tt(this.values[Pt],Pt));return clone$1(this,{values:Mt},!0)}get(Tt){return this[Duration.normalizeUnit(Tt)]}set(Tt){if(!this.isValid)return this;const Mt={...this.values,...normalizeObject(Tt,Duration.normalizeUnit)};return clone$1(this,{values:Mt})}reconfigure({locale:Tt,numberingSystem:Mt,conversionAccuracy:Pt}={}){const Ft=this.loc.clone({locale:Tt,numberingSystem:Mt}),Dt={loc:Ft};return Pt&&(Dt.conversionAccuracy=Pt),clone$1(this,Dt)}as(Tt){return this.isValid?this.shiftTo(Tt).get(Tt):NaN}normalize(){if(!this.isValid)return this;const Tt=this.toObject();return normalizeValues(this.matrix,Tt),clone$1(this,{values:Tt},!0)}shiftTo(...Tt){if(!this.isValid)return this;if(Tt.length===0)return this;Tt=Tt.map(Nt=>Duration.normalizeUnit(Nt));const Mt={},Pt={},Ft=this.toObject();let Dt;for(const Nt of orderedUnits$1)if(Tt.indexOf(Nt)>=0){Dt=Nt;let Vt=0;for(const Xt in Pt)Vt+=this.matrix[Xt][Nt]*Pt[Xt],Pt[Xt]=0;isNumber$1(Ft[Nt])&&(Vt+=Ft[Nt]);const zt=Math.trunc(Vt);Mt[Nt]=zt,Pt[Nt]=(Vt*1e3-zt*1e3)/1e3;for(const Xt in Ft)orderedUnits$1.indexOf(Xt)>orderedUnits$1.indexOf(Nt)&&convert(this.matrix,Ft,Xt,Mt,Nt)}else isNumber$1(Ft[Nt])&&(Pt[Nt]=Ft[Nt]);for(const Nt in Pt)Pt[Nt]!==0&&(Mt[Dt]+=Nt===Dt?Pt[Nt]:Pt[Nt]/this.matrix[Dt][Nt]);return clone$1(this,{values:Mt},!0).normalize()}negate(){if(!this.isValid)return this;const Tt={};for(const Mt of Object.keys(this.values))Tt[Mt]=this.values[Mt]===0?0:-this.values[Mt];return clone$1(this,{values:Tt},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(Tt){if(!this.isValid||!Tt.isValid||!this.loc.equals(Tt.loc))return!1;function Mt(Pt,Ft){return Pt===void 0||Pt===0?Ft===void 0||Ft===0:Pt===Ft}for(const Pt of orderedUnits$1)if(!Mt(this.values[Pt],Tt.values[Pt]))return!1;return!0}}const INVALID$1="Invalid Interval";function validateStartEnd(_t,Tt){return!_t||!_t.isValid?Interval.invalid("missing or invalid start"):!Tt||!Tt.isValid?Interval.invalid("missing or invalid end"):Tt<_t?Interval.invalid("end before start",`The end of an interval must be after its start, but you had start=${_t.toISO()} and end=${Tt.toISO()}`):null}class Interval{constructor(Tt){this.s=Tt.start,this.e=Tt.end,this.invalid=Tt.invalid||null,this.isLuxonInterval=!0}static invalid(Tt,Mt=null){if(!Tt)throw new InvalidArgumentError("need to specify a reason the Interval is invalid");const Pt=Tt instanceof Invalid?Tt:new Invalid(Tt,Mt);if(Settings.throwOnInvalid)throw new InvalidIntervalError(Pt);return new Interval({invalid:Pt})}static fromDateTimes(Tt,Mt){const Pt=friendlyDateTime(Tt),Ft=friendlyDateTime(Mt),Dt=validateStartEnd(Pt,Ft);return Dt==null?new Interval({start:Pt,end:Ft}):Dt}static after(Tt,Mt){const Pt=Duration.fromDurationLike(Mt),Ft=friendlyDateTime(Tt);return Interval.fromDateTimes(Ft,Ft.plus(Pt))}static before(Tt,Mt){const Pt=Duration.fromDurationLike(Mt),Ft=friendlyDateTime(Tt);return Interval.fromDateTimes(Ft.minus(Pt),Ft)}static fromISO(Tt,Mt){const[Pt,Ft]=(Tt||"").split("/",2);if(Pt&&Ft){let Dt,Nt;try{Dt=DateTime.fromISO(Pt,Mt),Nt=Dt.isValid}catch{Nt=!1}let Vt,zt;try{Vt=DateTime.fromISO(Ft,Mt),zt=Vt.isValid}catch{zt=!1}if(Nt&&zt)return Interval.fromDateTimes(Dt,Vt);if(Nt){const Xt=Duration.fromISO(Ft,Mt);if(Xt.isValid)return Interval.after(Dt,Xt)}else if(zt){const Xt=Duration.fromISO(Pt,Mt);if(Xt.isValid)return Interval.before(Vt,Xt)}}return Interval.invalid("unparsable",`the input "${Tt}" can't be parsed as ISO 8601`)}static isInterval(Tt){return Tt&&Tt.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(Tt="milliseconds"){return this.isValid?this.toDuration(Tt).get(Tt):NaN}count(Tt="milliseconds"){if(!this.isValid)return NaN;const Mt=this.start.startOf(Tt),Pt=this.end.startOf(Tt);return Math.floor(Pt.diff(Mt,Tt).get(Tt))+1}hasSame(Tt){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,Tt):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(Tt){return this.isValid?this.s>Tt:!1}isBefore(Tt){return this.isValid?this.e<=Tt:!1}contains(Tt){return this.isValid?this.s<=Tt&&this.e>Tt:!1}set({start:Tt,end:Mt}={}){return this.isValid?Interval.fromDateTimes(Tt||this.s,Mt||this.e):this}splitAt(...Tt){if(!this.isValid)return[];const Mt=Tt.map(friendlyDateTime).filter(Nt=>this.contains(Nt)).sort(),Pt=[];let{s:Ft}=this,Dt=0;for(;Ft<this.e;){const Nt=Mt[Dt]||this.e,Vt=+Nt>+this.e?this.e:Nt;Pt.push(Interval.fromDateTimes(Ft,Vt)),Ft=Vt,Dt+=1}return Pt}splitBy(Tt){const Mt=Duration.fromDurationLike(Tt);if(!this.isValid||!Mt.isValid||Mt.as("milliseconds")===0)return[];let{s:Pt}=this,Ft=1,Dt;const Nt=[];for(;Pt<this.e;){const Vt=this.start.plus(Mt.mapUnits(zt=>zt*Ft));Dt=+Vt>+this.e?this.e:Vt,Nt.push(Interval.fromDateTimes(Pt,Dt)),Pt=Dt,Ft+=1}return Nt}divideEqually(Tt){return this.isValid?this.splitBy(this.length()/Tt).slice(0,Tt):[]}overlaps(Tt){return this.e>Tt.s&&this.s<Tt.e}abutsStart(Tt){return this.isValid?+this.e==+Tt.s:!1}abutsEnd(Tt){return this.isValid?+Tt.e==+this.s:!1}engulfs(Tt){return this.isValid?this.s<=Tt.s&&this.e>=Tt.e:!1}equals(Tt){return!this.isValid||!Tt.isValid?!1:this.s.equals(Tt.s)&&this.e.equals(Tt.e)}intersection(Tt){if(!this.isValid)return this;const Mt=this.s>Tt.s?this.s:Tt.s,Pt=this.e<Tt.e?this.e:Tt.e;return Mt>=Pt?null:Interval.fromDateTimes(Mt,Pt)}union(Tt){if(!this.isValid)return this;const Mt=this.s<Tt.s?this.s:Tt.s,Pt=this.e>Tt.e?this.e:Tt.e;return Interval.fromDateTimes(Mt,Pt)}static merge(Tt){const[Mt,Pt]=Tt.sort((Ft,Dt)=>Ft.s-Dt.s).reduce(([Ft,Dt],Nt)=>Dt?Dt.overlaps(Nt)||Dt.abutsStart(Nt)?[Ft,Dt.union(Nt)]:[Ft.concat([Dt]),Nt]:[Ft,Nt],[[],null]);return Pt&&Mt.push(Pt),Mt}static xor(Tt){let Mt=null,Pt=0;const Ft=[],Dt=Tt.map(zt=>[{time:zt.s,type:"s"},{time:zt.e,type:"e"}]),Nt=Array.prototype.concat(...Dt),Vt=Nt.sort((zt,Xt)=>zt.time-Xt.time);for(const zt of Vt)Pt+=zt.type==="s"?1:-1,Pt===1?Mt=zt.time:(Mt&&+Mt!=+zt.time&&Ft.push(Interval.fromDateTimes(Mt,zt.time)),Mt=null);return Interval.merge(Ft)}difference(...Tt){return Interval.xor([this].concat(Tt)).map(Mt=>this.intersection(Mt)).filter(Mt=>Mt&&!Mt.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:INVALID$1}toISO(Tt){return this.isValid?`${this.s.toISO(Tt)}/${this.e.toISO(Tt)}`:INVALID$1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:INVALID$1}toISOTime(Tt){return this.isValid?`${this.s.toISOTime(Tt)}/${this.e.toISOTime(Tt)}`:INVALID$1}toFormat(Tt,{separator:Mt=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(Tt)}${Mt}${this.e.toFormat(Tt)}`:INVALID$1}toDuration(Tt,Mt){return this.isValid?this.e.diff(this.s,Tt,Mt):Duration.invalid(this.invalidReason)}mapEndpoints(Tt){return Interval.fromDateTimes(Tt(this.s),Tt(this.e))}}class Info{static hasDST(Tt=Settings.defaultZone){const Mt=DateTime.now().setZone(Tt).set({month:12});return!Tt.isUniversal&&Mt.offset!==Mt.set({month:6}).offset}static isValidIANAZone(Tt){return IANAZone.isValidZone(Tt)}static normalizeZone(Tt){return normalizeZone(Tt,Settings.defaultZone)}static months(Tt="long",{locale:Mt=null,numberingSystem:Pt=null,locObj:Ft=null,outputCalendar:Dt="gregory"}={}){return(Ft||Locale.create(Mt,Pt,Dt)).months(Tt)}static monthsFormat(Tt="long",{locale:Mt=null,numberingSystem:Pt=null,locObj:Ft=null,outputCalendar:Dt="gregory"}={}){return(Ft||Locale.create(Mt,Pt,Dt)).months(Tt,!0)}static weekdays(Tt="long",{locale:Mt=null,numberingSystem:Pt=null,locObj:Ft=null}={}){return(Ft||Locale.create(Mt,Pt,null)).weekdays(Tt)}static weekdaysFormat(Tt="long",{locale:Mt=null,numberingSystem:Pt=null,locObj:Ft=null}={}){return(Ft||Locale.create(Mt,Pt,null)).weekdays(Tt,!0)}static meridiems({locale:Tt=null}={}){return Locale.create(Tt).meridiems()}static eras(Tt="short",{locale:Mt=null}={}){return Locale.create(Mt,null,"gregory").eras(Tt)}static features(){return{relative:hasRelative()}}}function dayDiff(_t,Tt){const Mt=Ft=>Ft.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),Pt=Mt(Tt)-Mt(_t);return Math.floor(Duration.fromMillis(Pt).as("days"))}function highOrderDiffs(_t,Tt,Mt){const Pt=[["years",(Vt,zt)=>zt.year-Vt.year],["quarters",(Vt,zt)=>zt.quarter-Vt.quarter],["months",(Vt,zt)=>zt.month-Vt.month+(zt.year-Vt.year)*12],["weeks",(Vt,zt)=>{const Xt=dayDiff(Vt,zt);return(Xt-Xt%7)/7}],["days",dayDiff]],Ft={};let Dt,Nt;for(const[Vt,zt]of Pt)if(Mt.indexOf(Vt)>=0){Dt=Vt;let Xt=zt(_t,Tt);Nt=_t.plus({[Vt]:Xt}),Nt>Tt?(_t=_t.plus({[Vt]:Xt-1}),Xt-=1):_t=Nt,Ft[Vt]=Xt}return[_t,Ft,Nt,Dt]}function diff(_t,Tt,Mt,Pt){let[Ft,Dt,Nt,Vt]=highOrderDiffs(_t,Tt,Mt);const zt=Tt-Ft,Xt=Mt.filter(Wt=>["hours","minutes","seconds","milliseconds"].indexOf(Wt)>=0);Xt.length===0&&(Nt<Tt&&(Nt=Ft.plus({[Vt]:1})),Nt!==Ft&&(Dt[Vt]=(Dt[Vt]||0)+zt/(Nt-Ft)));const Ht=Duration.fromObject(Dt,Pt);return Xt.length>0?Duration.fromMillis(zt,Pt).shiftTo(...Xt).plus(Ht):Ht}const numberingSystems={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},numberingSystemsUTF16={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hanidecChars=numberingSystems.hanidec.replace(/[\[|\]]/g,"").split("");function parseDigits(_t){let Tt=parseInt(_t,10);if(isNaN(Tt)){Tt="";for(let Mt=0;Mt<_t.length;Mt++){const Pt=_t.charCodeAt(Mt);if(_t[Mt].search(numberingSystems.hanidec)!==-1)Tt+=hanidecChars.indexOf(_t[Mt]);else for(const Ft in numberingSystemsUTF16){const[Dt,Nt]=numberingSystemsUTF16[Ft];Pt>=Dt&&Pt<=Nt&&(Tt+=Pt-Dt)}}return parseInt(Tt,10)}else return Tt}function digitRegex({numberingSystem:_t},Tt=""){return new RegExp(`${numberingSystems[_t||"latn"]}${Tt}`)}const MISSING_FTP="missing Intl.DateTimeFormat.formatToParts support";function intUnit(_t,Tt=Mt=>Mt){return{regex:_t,deser:([Mt])=>Tt(parseDigits(Mt))}}const NBSP=String.fromCharCode(160),spaceOrNBSP=`[ ${NBSP}]`,spaceOrNBSPRegExp=new RegExp(spaceOrNBSP,"g");function fixListRegex(_t){return _t.replace(/\./g,"\\.?").replace(spaceOrNBSPRegExp,spaceOrNBSP)}function stripInsensitivities(_t){return _t.replace(/\./g,"").replace(spaceOrNBSPRegExp," ").toLowerCase()}function oneOf(_t,Tt){return _t===null?null:{regex:RegExp(_t.map(fixListRegex).join("|")),deser:([Mt])=>_t.findIndex(Pt=>stripInsensitivities(Mt)===stripInsensitivities(Pt))+Tt}}function offset(_t,Tt){return{regex:_t,deser:([,Mt,Pt])=>signedOffset(Mt,Pt),groups:Tt}}function simple(_t){return{regex:_t,deser:([Tt])=>Tt}}function escapeToken(_t){return _t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function unitForToken(_t,Tt){const Mt=digitRegex(Tt),Pt=digitRegex(Tt,"{2}"),Ft=digitRegex(Tt,"{3}"),Dt=digitRegex(Tt,"{4}"),Nt=digitRegex(Tt,"{6}"),Vt=digitRegex(Tt,"{1,2}"),zt=digitRegex(Tt,"{1,3}"),Xt=digitRegex(Tt,"{1,6}"),Ht=digitRegex(Tt,"{1,9}"),Wt=digitRegex(Tt,"{2,4}"),Qt=digitRegex(Tt,"{4,6}"),Zt=Yt=>({regex:RegExp(escapeToken(Yt.val)),deser:([rr])=>rr,literal:!0}),er=(Yt=>{if(_t.literal)return Zt(Yt);switch(Yt.val){case"G":return oneOf(Tt.eras("short",!1),0);case"GG":return oneOf(Tt.eras("long",!1),0);case"y":return intUnit(Xt);case"yy":return intUnit(Wt,untruncateYear);case"yyyy":return intUnit(Dt);case"yyyyy":return intUnit(Qt);case"yyyyyy":return intUnit(Nt);case"M":return intUnit(Vt);case"MM":return intUnit(Pt);case"MMM":return oneOf(Tt.months("short",!0,!1),1);case"MMMM":return oneOf(Tt.months("long",!0,!1),1);case"L":return intUnit(Vt);case"LL":return intUnit(Pt);case"LLL":return oneOf(Tt.months("short",!1,!1),1);case"LLLL":return oneOf(Tt.months("long",!1,!1),1);case"d":return intUnit(Vt);case"dd":return intUnit(Pt);case"o":return intUnit(zt);case"ooo":return intUnit(Ft);case"HH":return intUnit(Pt);case"H":return intUnit(Vt);case"hh":return intUnit(Pt);case"h":return intUnit(Vt);case"mm":return intUnit(Pt);case"m":return intUnit(Vt);case"q":return intUnit(Vt);case"qq":return intUnit(Pt);case"s":return intUnit(Vt);case"ss":return intUnit(Pt);case"S":return intUnit(zt);case"SSS":return intUnit(Ft);case"u":return simple(Ht);case"uu":return simple(Vt);case"uuu":return intUnit(Mt);case"a":return oneOf(Tt.meridiems(),0);case"kkkk":return intUnit(Dt);case"kk":return intUnit(Wt,untruncateYear);case"W":return intUnit(Vt);case"WW":return intUnit(Pt);case"E":case"c":return intUnit(Mt);case"EEE":return oneOf(Tt.weekdays("short",!1,!1),1);case"EEEE":return oneOf(Tt.weekdays("long",!1,!1),1);case"ccc":return oneOf(Tt.weekdays("short",!0,!1),1);case"cccc":return oneOf(Tt.weekdays("long",!0,!1),1);case"Z":case"ZZ":return offset(new RegExp(`([+-]${Vt.source})(?::(${Pt.source}))?`),2);case"ZZZ":return offset(new RegExp(`([+-]${Vt.source})(${Pt.source})?`),2);case"z":return simple(/[a-z_+-/]{1,256}?/i);default:return Zt(Yt)}})(_t)||{invalidReason:MISSING_FTP};return er.token=_t,er}const partTypeStyleToTokenVal={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function tokenForPart(_t,Tt,Mt){const{type:Pt,value:Ft}=_t;if(Pt==="literal")return{literal:!0,val:Ft};const Dt=Mt[Pt];let Nt=partTypeStyleToTokenVal[Pt];if(typeof Nt=="object"&&(Nt=Nt[Dt]),Nt)return{literal:!1,val:Nt}}function buildRegex(_t){return[`^${_t.map(Mt=>Mt.regex).reduce((Mt,Pt)=>`${Mt}(${Pt.source})`,"")}$`,_t]}function match(_t,Tt,Mt){const Pt=_t.match(Tt);if(Pt){const Ft={};let Dt=1;for(const Nt in Mt)if(hasOwnProperty(Mt,Nt)){const Vt=Mt[Nt],zt=Vt.groups?Vt.groups+1:1;!Vt.literal&&Vt.token&&(Ft[Vt.token.val[0]]=Vt.deser(Pt.slice(Dt,Dt+zt))),Dt+=zt}return[Pt,Ft]}else return[Pt,{}]}function dateTimeFromMatches(_t){const Tt=Dt=>{switch(Dt){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let Mt=null,Pt;return isUndefined$1(_t.z)||(Mt=IANAZone.create(_t.z)),isUndefined$1(_t.Z)||(Mt||(Mt=new FixedOffsetZone(_t.Z)),Pt=_t.Z),isUndefined$1(_t.q)||(_t.M=(_t.q-1)*3+1),isUndefined$1(_t.h)||(_t.h<12&&_t.a===1?_t.h+=12:_t.h===12&&_t.a===0&&(_t.h=0)),_t.G===0&&_t.y&&(_t.y=-_t.y),isUndefined$1(_t.u)||(_t.S=parseMillis(_t.u)),[Object.keys(_t).reduce((Dt,Nt)=>{const Vt=Tt(Nt);return Vt&&(Dt[Vt]=_t[Nt]),Dt},{}),Mt,Pt]}let dummyDateTimeCache=null;function getDummyDateTime(){return dummyDateTimeCache||(dummyDateTimeCache=DateTime.fromMillis(1555555555555)),dummyDateTimeCache}function maybeExpandMacroToken(_t,Tt){if(_t.literal)return _t;const Mt=Formatter.macroTokenToFormatOpts(_t.val);if(!Mt)return _t;const Dt=Formatter.create(Tt,Mt).formatDateTimeParts(getDummyDateTime()).map(Nt=>tokenForPart(Nt,Tt,Mt));return Dt.includes(void 0)?_t:Dt}function expandMacroTokens(_t,Tt){return Array.prototype.concat(..._t.map(Mt=>maybeExpandMacroToken(Mt,Tt)))}function explainFromTokens(_t,Tt,Mt){const Pt=expandMacroTokens(Formatter.parseFormat(Mt),_t),Ft=Pt.map(Nt=>unitForToken(Nt,_t)),Dt=Ft.find(Nt=>Nt.invalidReason);if(Dt)return{input:Tt,tokens:Pt,invalidReason:Dt.invalidReason};{const[Nt,Vt]=buildRegex(Ft),zt=RegExp(Nt,"i"),[Xt,Ht]=match(Tt,zt,Vt),[Wt,Qt,Zt]=Ht?dateTimeFromMatches(Ht):[null,null,void 0];if(hasOwnProperty(Ht,"a")&&hasOwnProperty(Ht,"H"))throw new ConflictingSpecificationError("Can't include meridiem when specifying 24-hour format");return{input:Tt,tokens:Pt,regex:zt,rawMatches:Xt,matches:Ht,result:Wt,zone:Qt,specificOffset:Zt}}}function parseFromTokens(_t,Tt,Mt){const{result:Pt,zone:Ft,specificOffset:Dt,invalidReason:Nt}=explainFromTokens(_t,Tt,Mt);return[Pt,Ft,Dt,Nt]}const nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335];function unitOutOfRange(_t,Tt){return new Invalid("unit out of range",`you specified ${Tt} (of type ${typeof Tt}) as a ${_t}, which is invalid`)}function dayOfWeek(_t,Tt,Mt){const Pt=new Date(Date.UTC(_t,Tt-1,Mt));_t<100&&_t>=0&&Pt.setUTCFullYear(Pt.getUTCFullYear()-1900);const Ft=Pt.getUTCDay();return Ft===0?7:Ft}function computeOrdinal(_t,Tt,Mt){return Mt+(isLeapYear(_t)?leapLadder:nonLeapLadder)[Tt-1]}function uncomputeOrdinal(_t,Tt){const Mt=isLeapYear(_t)?leapLadder:nonLeapLadder,Pt=Mt.findIndex(Dt=>Dt<Tt),Ft=Tt-Mt[Pt];return{month:Pt+1,day:Ft}}function gregorianToWeek(_t){const{year:Tt,month:Mt,day:Pt}=_t,Ft=computeOrdinal(Tt,Mt,Pt),Dt=dayOfWeek(Tt,Mt,Pt);let Nt=Math.floor((Ft-Dt+10)/7),Vt;return Nt<1?(Vt=Tt-1,Nt=weeksInWeekYear(Vt)):Nt>weeksInWeekYear(Tt)?(Vt=Tt+1,Nt=1):Vt=Tt,{weekYear:Vt,weekNumber:Nt,weekday:Dt,...timeObject(_t)}}function weekToGregorian(_t){const{weekYear:Tt,weekNumber:Mt,weekday:Pt}=_t,Ft=dayOfWeek(Tt,1,4),Dt=daysInYear(Tt);let Nt=Mt*7+Pt-Ft-3,Vt;Nt<1?(Vt=Tt-1,Nt+=daysInYear(Vt)):Nt>Dt?(Vt=Tt+1,Nt-=daysInYear(Tt)):Vt=Tt;const{month:zt,day:Xt}=uncomputeOrdinal(Vt,Nt);return{year:Vt,month:zt,day:Xt,...timeObject(_t)}}function gregorianToOrdinal(_t){const{year:Tt,month:Mt,day:Pt}=_t,Ft=computeOrdinal(Tt,Mt,Pt);return{year:Tt,ordinal:Ft,...timeObject(_t)}}function ordinalToGregorian(_t){const{year:Tt,ordinal:Mt}=_t,{month:Pt,day:Ft}=uncomputeOrdinal(Tt,Mt);return{year:Tt,month:Pt,day:Ft,...timeObject(_t)}}function hasInvalidWeekData(_t){const Tt=isInteger(_t.weekYear),Mt=integerBetween(_t.weekNumber,1,weeksInWeekYear(_t.weekYear)),Pt=integerBetween(_t.weekday,1,7);return Tt?Mt?Pt?!1:unitOutOfRange("weekday",_t.weekday):unitOutOfRange("week",_t.week):unitOutOfRange("weekYear",_t.weekYear)}function hasInvalidOrdinalData(_t){const Tt=isInteger(_t.year),Mt=integerBetween(_t.ordinal,1,daysInYear(_t.year));return Tt?Mt?!1:unitOutOfRange("ordinal",_t.ordinal):unitOutOfRange("year",_t.year)}function hasInvalidGregorianData(_t){const Tt=isInteger(_t.year),Mt=integerBetween(_t.month,1,12),Pt=integerBetween(_t.day,1,daysInMonth(_t.year,_t.month));return Tt?Mt?Pt?!1:unitOutOfRange("day",_t.day):unitOutOfRange("month",_t.month):unitOutOfRange("year",_t.year)}function hasInvalidTimeData(_t){const{hour:Tt,minute:Mt,second:Pt,millisecond:Ft}=_t,Dt=integerBetween(Tt,0,23)||Tt===24&&Mt===0&&Pt===0&&Ft===0,Nt=integerBetween(Mt,0,59),Vt=integerBetween(Pt,0,59),zt=integerBetween(Ft,0,999);return Dt?Nt?Vt?zt?!1:unitOutOfRange("millisecond",Ft):unitOutOfRange("second",Pt):unitOutOfRange("minute",Mt):unitOutOfRange("hour",Tt)}const INVALID="Invalid DateTime",MAX_DATE=864e13;function unsupportedZone(_t){return new Invalid("unsupported zone",`the zone "${_t.name}" is not supported`)}function possiblyCachedWeekData(_t){return _t.weekData===null&&(_t.weekData=gregorianToWeek(_t.c)),_t.weekData}function clone(_t,Tt){const Mt={ts:_t.ts,zone:_t.zone,c:_t.c,o:_t.o,loc:_t.loc,invalid:_t.invalid};return new DateTime({...Mt,...Tt,old:Mt})}function fixOffset(_t,Tt,Mt){let Pt=_t-Tt*60*1e3;const Ft=Mt.offset(Pt);if(Tt===Ft)return[Pt,Tt];Pt-=(Ft-Tt)*60*1e3;const Dt=Mt.offset(Pt);return Ft===Dt?[Pt,Ft]:[_t-Math.min(Ft,Dt)*60*1e3,Math.max(Ft,Dt)]}function tsToObj(_t,Tt){_t+=Tt*60*1e3;const Mt=new Date(_t);return{year:Mt.getUTCFullYear(),month:Mt.getUTCMonth()+1,day:Mt.getUTCDate(),hour:Mt.getUTCHours(),minute:Mt.getUTCMinutes(),second:Mt.getUTCSeconds(),millisecond:Mt.getUTCMilliseconds()}}function objToTS(_t,Tt,Mt){return fixOffset(objToLocalTS(_t),Tt,Mt)}function adjustTime(_t,Tt){const Mt=_t.o,Pt=_t.c.year+Math.trunc(Tt.years),Ft=_t.c.month+Math.trunc(Tt.months)+Math.trunc(Tt.quarters)*3,Dt={..._t.c,year:Pt,month:Ft,day:Math.min(_t.c.day,daysInMonth(Pt,Ft))+Math.trunc(Tt.days)+Math.trunc(Tt.weeks)*7},Nt=Duration.fromObject({years:Tt.years-Math.trunc(Tt.years),quarters:Tt.quarters-Math.trunc(Tt.quarters),months:Tt.months-Math.trunc(Tt.months),weeks:Tt.weeks-Math.trunc(Tt.weeks),days:Tt.days-Math.trunc(Tt.days),hours:Tt.hours,minutes:Tt.minutes,seconds:Tt.seconds,milliseconds:Tt.milliseconds}).as("milliseconds"),Vt=objToLocalTS(Dt);let[zt,Xt]=fixOffset(Vt,Mt,_t.zone);return Nt!==0&&(zt+=Nt,Xt=_t.zone.offset(zt)),{ts:zt,o:Xt}}function parseDataToDateTime(_t,Tt,Mt,Pt,Ft,Dt){const{setZone:Nt,zone:Vt}=Mt;if(_t&&Object.keys(_t).length!==0){const zt=Tt||Vt,Xt=DateTime.fromObject(_t,{...Mt,zone:zt,specificOffset:Dt});return Nt?Xt:Xt.setZone(Vt)}else return DateTime.invalid(new Invalid("unparsable",`the input "${Ft}" can't be parsed as ${Pt}`))}function toTechFormat(_t,Tt,Mt=!0){return _t.isValid?Formatter.create(Locale.create("en-US"),{allowZ:Mt,forceSimple:!0}).formatDateTimeFromString(_t,Tt):null}function toISODate(_t,Tt){const Mt=_t.c.year>9999||_t.c.year<0;let Pt="";return Mt&&_t.c.year>=0&&(Pt+="+"),Pt+=padStart(_t.c.year,Mt?6:4),Tt?(Pt+="-",Pt+=padStart(_t.c.month),Pt+="-",Pt+=padStart(_t.c.day)):(Pt+=padStart(_t.c.month),Pt+=padStart(_t.c.day)),Pt}function toISOTime(_t,Tt,Mt,Pt,Ft,Dt){let Nt=padStart(_t.c.hour);return Tt?(Nt+=":",Nt+=padStart(_t.c.minute),(_t.c.second!==0||!Mt)&&(Nt+=":")):Nt+=padStart(_t.c.minute),(_t.c.second!==0||!Mt)&&(Nt+=padStart(_t.c.second),(_t.c.millisecond!==0||!Pt)&&(Nt+=".",Nt+=padStart(_t.c.millisecond,3))),Ft&&(_t.isOffsetFixed&&_t.offset===0&&!Dt?Nt+="Z":_t.o<0?(Nt+="-",Nt+=padStart(Math.trunc(-_t.o/60)),Nt+=":",Nt+=padStart(Math.trunc(-_t.o%60))):(Nt+="+",Nt+=padStart(Math.trunc(_t.o/60)),Nt+=":",Nt+=padStart(Math.trunc(_t.o%60)))),Dt&&(Nt+="["+_t.zone.ianaName+"]"),Nt}const defaultUnitValues={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},defaultWeekUnitValues={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},defaultOrdinalUnitValues={ordinal:1,hour:0,minute:0,second:0,millisecond:0},orderedUnits=["year","month","day","hour","minute","second","millisecond"],orderedWeekUnits=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],orderedOrdinalUnits=["year","ordinal","hour","minute","second","millisecond"];function normalizeUnit(_t){const Tt={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[_t.toLowerCase()];if(!Tt)throw new InvalidUnitError(_t);return Tt}function quickDT(_t,Tt){const Mt=normalizeZone(Tt.zone,Settings.defaultZone),Pt=Locale.fromObject(Tt),Ft=Settings.now();let Dt,Nt;if(isUndefined$1(_t.year))Dt=Ft;else{for(const Xt of orderedUnits)isUndefined$1(_t[Xt])&&(_t[Xt]=defaultUnitValues[Xt]);const Vt=hasInvalidGregorianData(_t)||hasInvalidTimeData(_t);if(Vt)return DateTime.invalid(Vt);const zt=Mt.offset(Ft);[Dt,Nt]=objToTS(_t,zt,Mt)}return new DateTime({ts:Dt,zone:Mt,loc:Pt,o:Nt})}function diffRelative(_t,Tt,Mt){const Pt=isUndefined$1(Mt.round)?!0:Mt.round,Ft=(Nt,Vt)=>(Nt=roundTo(Nt,Pt||Mt.calendary?0:2,!0),Tt.loc.clone(Mt).relFormatter(Mt).format(Nt,Vt)),Dt=Nt=>Mt.calendary?Tt.hasSame(_t,Nt)?0:Tt.startOf(Nt).diff(_t.startOf(Nt),Nt).get(Nt):Tt.diff(_t,Nt).get(Nt);if(Mt.unit)return Ft(Dt(Mt.unit),Mt.unit);for(const Nt of Mt.units){const Vt=Dt(Nt);if(Math.abs(Vt)>=1)return Ft(Vt,Nt)}return Ft(_t>Tt?-0:0,Mt.units[Mt.units.length-1])}function lastOpts(_t){let Tt={},Mt;return _t.length>0&&typeof _t[_t.length-1]=="object"?(Tt=_t[_t.length-1],Mt=Array.from(_t).slice(0,_t.length-1)):Mt=Array.from(_t),[Tt,Mt]}class DateTime{constructor(Tt){const Mt=Tt.zone||Settings.defaultZone;let Pt=Tt.invalid||(Number.isNaN(Tt.ts)?new Invalid("invalid input"):null)||(Mt.isValid?null:unsupportedZone(Mt));this.ts=isUndefined$1(Tt.ts)?Settings.now():Tt.ts;let Ft=null,Dt=null;if(!Pt)if(Tt.old&&Tt.old.ts===this.ts&&Tt.old.zone.equals(Mt))[Ft,Dt]=[Tt.old.c,Tt.old.o];else{const Vt=Mt.offset(this.ts);Ft=tsToObj(this.ts,Vt),Pt=Number.isNaN(Ft.year)?new Invalid("invalid input"):null,Ft=Pt?null:Ft,Dt=Pt?null:Vt}this._zone=Mt,this.loc=Tt.loc||Locale.create(),this.invalid=Pt,this.weekData=null,this.c=Ft,this.o=Dt,this.isLuxonDateTime=!0}static now(){return new DateTime({})}static local(){const[Tt,Mt]=lastOpts(arguments),[Pt,Ft,Dt,Nt,Vt,zt,Xt]=Mt;return quickDT({year:Pt,month:Ft,day:Dt,hour:Nt,minute:Vt,second:zt,millisecond:Xt},Tt)}static utc(){const[Tt,Mt]=lastOpts(arguments),[Pt,Ft,Dt,Nt,Vt,zt,Xt]=Mt;return Tt.zone=FixedOffsetZone.utcInstance,quickDT({year:Pt,month:Ft,day:Dt,hour:Nt,minute:Vt,second:zt,millisecond:Xt},Tt)}static fromJSDate(Tt,Mt={}){const Pt=isDate$1(Tt)?Tt.valueOf():NaN;if(Number.isNaN(Pt))return DateTime.invalid("invalid input");const Ft=normalizeZone(Mt.zone,Settings.defaultZone);return Ft.isValid?new DateTime({ts:Pt,zone:Ft,loc:Locale.fromObject(Mt)}):DateTime.invalid(unsupportedZone(Ft))}static fromMillis(Tt,Mt={}){if(isNumber$1(Tt))return Tt<-MAX_DATE||Tt>MAX_DATE?DateTime.invalid("Timestamp out of range"):new DateTime({ts:Tt,zone:normalizeZone(Mt.zone,Settings.defaultZone),loc:Locale.fromObject(Mt)});throw new InvalidArgumentError(`fromMillis requires a numerical input, but received a ${typeof Tt} with value ${Tt}`)}static fromSeconds(Tt,Mt={}){if(isNumber$1(Tt))return new DateTime({ts:Tt*1e3,zone:normalizeZone(Mt.zone,Settings.defaultZone),loc:Locale.fromObject(Mt)});throw new InvalidArgumentError("fromSeconds requires a numerical input")}static fromObject(Tt,Mt={}){Tt=Tt||{};const Pt=normalizeZone(Mt.zone,Settings.defaultZone);if(!Pt.isValid)return DateTime.invalid(unsupportedZone(Pt));const Ft=Settings.now(),Dt=isUndefined$1(Mt.specificOffset)?Pt.offset(Ft):Mt.specificOffset,Nt=normalizeObject(Tt,normalizeUnit),Vt=!isUndefined$1(Nt.ordinal),zt=!isUndefined$1(Nt.year),Xt=!isUndefined$1(Nt.month)||!isUndefined$1(Nt.day),Ht=zt||Xt,Wt=Nt.weekYear||Nt.weekNumber,Qt=Locale.fromObject(Mt);if((Ht||Vt)&&Wt)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Xt&&Vt)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");const Zt=Wt||Nt.weekday&&!Ht;let Kt,er,Yt=tsToObj(Ft,Dt);Zt?(Kt=orderedWeekUnits,er=defaultWeekUnitValues,Yt=gregorianToWeek(Yt)):Vt?(Kt=orderedOrdinalUnits,er=defaultOrdinalUnitValues,Yt=gregorianToOrdinal(Yt)):(Kt=orderedUnits,er=defaultUnitValues);let rr=!1;for(const hr of Kt){const gr=Nt[hr];isUndefined$1(gr)?rr?Nt[hr]=er[hr]:Nt[hr]=Yt[hr]:rr=!0}const ir=Zt?hasInvalidWeekData(Nt):Vt?hasInvalidOrdinalData(Nt):hasInvalidGregorianData(Nt),nr=ir||hasInvalidTimeData(Nt);if(nr)return DateTime.invalid(nr);const ar=Zt?weekToGregorian(Nt):Vt?ordinalToGregorian(Nt):Nt,[or,ur]=objToTS(ar,Dt,Pt),dr=new DateTime({ts:or,zone:Pt,o:ur,loc:Qt});return Nt.weekday&&Ht&&Tt.weekday!==dr.weekday?DateTime.invalid("mismatched weekday",`you can't specify both a weekday of ${Nt.weekday} and a date of ${dr.toISO()}`):dr}static fromISO(Tt,Mt={}){const[Pt,Ft]=parseISODate(Tt);return parseDataToDateTime(Pt,Ft,Mt,"ISO 8601",Tt)}static fromRFC2822(Tt,Mt={}){const[Pt,Ft]=parseRFC2822Date(Tt);return parseDataToDateTime(Pt,Ft,Mt,"RFC 2822",Tt)}static fromHTTP(Tt,Mt={}){const[Pt,Ft]=parseHTTPDate(Tt);return parseDataToDateTime(Pt,Ft,Mt,"HTTP",Mt)}static fromFormat(Tt,Mt,Pt={}){if(isUndefined$1(Tt)||isUndefined$1(Mt))throw new InvalidArgumentError("fromFormat requires an input string and a format");const{locale:Ft=null,numberingSystem:Dt=null}=Pt,Nt=Locale.fromOpts({locale:Ft,numberingSystem:Dt,defaultToEN:!0}),[Vt,zt,Xt,Ht]=parseFromTokens(Nt,Tt,Mt);return Ht?DateTime.invalid(Ht):parseDataToDateTime(Vt,zt,Pt,`format ${Mt}`,Tt,Xt)}static fromString(Tt,Mt,Pt={}){return DateTime.fromFormat(Tt,Mt,Pt)}static fromSQL(Tt,Mt={}){const[Pt,Ft]=parseSQL(Tt);return parseDataToDateTime(Pt,Ft,Mt,"SQL",Tt)}static invalid(Tt,Mt=null){if(!Tt)throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");const Pt=Tt instanceof Invalid?Tt:new Invalid(Tt,Mt);if(Settings.throwOnInvalid)throw new InvalidDateTimeError(Pt);return new DateTime({invalid:Pt})}static isDateTime(Tt){return Tt&&Tt.isLuxonDateTime||!1}get(Tt){return this[Tt]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}get weekNumber(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}get weekday(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}get ordinal(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}get monthShort(){return this.isValid?Info.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Info.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Info.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Info.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return isLeapYear(this.year)}get daysInMonth(){return daysInMonth(this.year,this.month)}get daysInYear(){return this.isValid?daysInYear(this.year):NaN}get weeksInWeekYear(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}resolvedLocaleOptions(Tt={}){const{locale:Mt,numberingSystem:Pt,calendar:Ft}=Formatter.create(this.loc.clone(Tt),Tt).resolvedOptions(this);return{locale:Mt,numberingSystem:Pt,outputCalendar:Ft}}toUTC(Tt=0,Mt={}){return this.setZone(FixedOffsetZone.instance(Tt),Mt)}toLocal(){return this.setZone(Settings.defaultZone)}setZone(Tt,{keepLocalTime:Mt=!1,keepCalendarTime:Pt=!1}={}){if(Tt=normalizeZone(Tt,Settings.defaultZone),Tt.equals(this.zone))return this;if(Tt.isValid){let Ft=this.ts;if(Mt||Pt){const Dt=Tt.offset(this.ts),Nt=this.toObject();[Ft]=objToTS(Nt,Dt,Tt)}return clone(this,{ts:Ft,zone:Tt})}else return DateTime.invalid(unsupportedZone(Tt))}reconfigure({locale:Tt,numberingSystem:Mt,outputCalendar:Pt}={}){const Ft=this.loc.clone({locale:Tt,numberingSystem:Mt,outputCalendar:Pt});return clone(this,{loc:Ft})}setLocale(Tt){return this.reconfigure({locale:Tt})}set(Tt){if(!this.isValid)return this;const Mt=normalizeObject(Tt,normalizeUnit),Pt=!isUndefined$1(Mt.weekYear)||!isUndefined$1(Mt.weekNumber)||!isUndefined$1(Mt.weekday),Ft=!isUndefined$1(Mt.ordinal),Dt=!isUndefined$1(Mt.year),Nt=!isUndefined$1(Mt.month)||!isUndefined$1(Mt.day),Vt=Dt||Nt,zt=Mt.weekYear||Mt.weekNumber;if((Vt||Ft)&&zt)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(Nt&&Ft)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");let Xt;Pt?Xt=weekToGregorian({...gregorianToWeek(this.c),...Mt}):isUndefined$1(Mt.ordinal)?(Xt={...this.toObject(),...Mt},isUndefined$1(Mt.day)&&(Xt.day=Math.min(daysInMonth(Xt.year,Xt.month),Xt.day))):Xt=ordinalToGregorian({...gregorianToOrdinal(this.c),...Mt});const[Ht,Wt]=objToTS(Xt,this.o,this.zone);return clone(this,{ts:Ht,o:Wt})}plus(Tt){if(!this.isValid)return this;const Mt=Duration.fromDurationLike(Tt);return clone(this,adjustTime(this,Mt))}minus(Tt){if(!this.isValid)return this;const Mt=Duration.fromDurationLike(Tt).negate();return clone(this,adjustTime(this,Mt))}startOf(Tt){if(!this.isValid)return this;const Mt={},Pt=Duration.normalizeUnit(Tt);switch(Pt){case"years":Mt.month=1;case"quarters":case"months":Mt.day=1;case"weeks":case"days":Mt.hour=0;case"hours":Mt.minute=0;case"minutes":Mt.second=0;case"seconds":Mt.millisecond=0;break}if(Pt==="weeks"&&(Mt.weekday=1),Pt==="quarters"){const Ft=Math.ceil(this.month/3);Mt.month=(Ft-1)*3+1}return this.set(Mt)}endOf(Tt){return this.isValid?this.plus({[Tt]:1}).startOf(Tt).minus(1):this}toFormat(Tt,Mt={}){return this.isValid?Formatter.create(this.loc.redefaultToEN(Mt)).formatDateTimeFromString(this,Tt):INVALID}toLocaleString(Tt=DATE_SHORT,Mt={}){return this.isValid?Formatter.create(this.loc.clone(Mt),Tt).formatDateTime(this):INVALID}toLocaleParts(Tt={}){return this.isValid?Formatter.create(this.loc.clone(Tt),Tt).formatDateTimeParts(this):[]}toISO({format:Tt="extended",suppressSeconds:Mt=!1,suppressMilliseconds:Pt=!1,includeOffset:Ft=!0,extendedZone:Dt=!1}={}){if(!this.isValid)return null;const Nt=Tt==="extended";let Vt=toISODate(this,Nt);return Vt+="T",Vt+=toISOTime(this,Nt,Mt,Pt,Ft,Dt),Vt}toISODate({format:Tt="extended"}={}){return this.isValid?toISODate(this,Tt==="extended"):null}toISOWeekDate(){return toTechFormat(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:Tt=!1,suppressSeconds:Mt=!1,includeOffset:Pt=!0,includePrefix:Ft=!1,extendedZone:Dt=!1,format:Nt="extended"}={}){return this.isValid?(Ft?"T":"")+toISOTime(this,Nt==="extended",Mt,Tt,Pt,Dt):null}toRFC2822(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?toISODate(this,!0):null}toSQLTime({includeOffset:Tt=!0,includeZone:Mt=!1,includeOffsetSpace:Pt=!0}={}){let Ft="HH:mm:ss.SSS";return(Mt||Tt)&&(Pt&&(Ft+=" "),Mt?Ft+="z":Tt&&(Ft+="ZZ")),toTechFormat(this,Ft,!0)}toSQL(Tt={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(Tt)}`:null}toString(){return this.isValid?this.toISO():INVALID}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(Tt={}){if(!this.isValid)return{};const Mt={...this.c};return Tt.includeConfig&&(Mt.outputCalendar=this.outputCalendar,Mt.numberingSystem=this.loc.numberingSystem,Mt.locale=this.loc.locale),Mt}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(Tt,Mt="milliseconds",Pt={}){if(!this.isValid||!Tt.isValid)return Duration.invalid("created by diffing an invalid DateTime");const Ft={locale:this.locale,numberingSystem:this.numberingSystem,...Pt},Dt=maybeArray(Mt).map(Duration.normalizeUnit),Nt=Tt.valueOf()>this.valueOf(),Vt=Nt?this:Tt,zt=Nt?Tt:this,Xt=diff(Vt,zt,Dt,Ft);return Nt?Xt.negate():Xt}diffNow(Tt="milliseconds",Mt={}){return this.diff(DateTime.now(),Tt,Mt)}until(Tt){return this.isValid?Interval.fromDateTimes(this,Tt):this}hasSame(Tt,Mt){if(!this.isValid)return!1;const Pt=Tt.valueOf(),Ft=this.setZone(Tt.zone,{keepLocalTime:!0});return Ft.startOf(Mt)<=Pt&&Pt<=Ft.endOf(Mt)}equals(Tt){return this.isValid&&Tt.isValid&&this.valueOf()===Tt.valueOf()&&this.zone.equals(Tt.zone)&&this.loc.equals(Tt.loc)}toRelative(Tt={}){if(!this.isValid)return null;const Mt=Tt.base||DateTime.fromObject({},{zone:this.zone}),Pt=Tt.padding?this<Mt?-Tt.padding:Tt.padding:0;let Ft=["years","months","days","hours","minutes","seconds"],Dt=Tt.unit;return Array.isArray(Tt.unit)&&(Ft=Tt.unit,Dt=void 0),diffRelative(Mt,this.plus(Pt),{...Tt,numeric:"always",units:Ft,unit:Dt})}toRelativeCalendar(Tt={}){return this.isValid?diffRelative(Tt.base||DateTime.fromObject({},{zone:this.zone}),this,{...Tt,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...Tt){if(!Tt.every(DateTime.isDateTime))throw new InvalidArgumentError("min requires all arguments be DateTimes");return bestBy(Tt,Mt=>Mt.valueOf(),Math.min)}static max(...Tt){if(!Tt.every(DateTime.isDateTime))throw new InvalidArgumentError("max requires all arguments be DateTimes");return bestBy(Tt,Mt=>Mt.valueOf(),Math.max)}static fromFormatExplain(Tt,Mt,Pt={}){const{locale:Ft=null,numberingSystem:Dt=null}=Pt,Nt=Locale.fromOpts({locale:Ft,numberingSystem:Dt,defaultToEN:!0});return explainFromTokens(Nt,Tt,Mt)}static fromStringExplain(Tt,Mt,Pt={}){return DateTime.fromFormatExplain(Tt,Mt,Pt)}static get DATE_SHORT(){return DATE_SHORT}static get DATE_MED(){return DATE_MED}static get DATE_MED_WITH_WEEKDAY(){return DATE_MED_WITH_WEEKDAY}static get DATE_FULL(){return DATE_FULL}static get DATE_HUGE(){return DATE_HUGE}static get TIME_SIMPLE(){return TIME_SIMPLE}static get TIME_WITH_SECONDS(){return TIME_WITH_SECONDS}static get TIME_WITH_SHORT_OFFSET(){return TIME_WITH_SHORT_OFFSET}static get TIME_WITH_LONG_OFFSET(){return TIME_WITH_LONG_OFFSET}static get TIME_24_SIMPLE(){return TIME_24_SIMPLE}static get TIME_24_WITH_SECONDS(){return TIME_24_WITH_SECONDS}static get TIME_24_WITH_SHORT_OFFSET(){return TIME_24_WITH_SHORT_OFFSET}static get TIME_24_WITH_LONG_OFFSET(){return TIME_24_WITH_LONG_OFFSET}static get DATETIME_SHORT(){return DATETIME_SHORT}static get DATETIME_SHORT_WITH_SECONDS(){return DATETIME_SHORT_WITH_SECONDS}static get DATETIME_MED(){return DATETIME_MED}static get DATETIME_MED_WITH_SECONDS(){return DATETIME_MED_WITH_SECONDS}static get DATETIME_MED_WITH_WEEKDAY(){return DATETIME_MED_WITH_WEEKDAY}static get DATETIME_FULL(){return DATETIME_FULL}static get DATETIME_FULL_WITH_SECONDS(){return DATETIME_FULL_WITH_SECONDS}static get DATETIME_HUGE(){return DATETIME_HUGE}static get DATETIME_HUGE_WITH_SECONDS(){return DATETIME_HUGE_WITH_SECONDS}}function friendlyDateTime(_t){if(DateTime.isDateTime(_t))return _t;if(_t&&_t.valueOf&&isNumber$1(_t.valueOf()))return DateTime.fromJSDate(_t);if(_t&&typeof _t=="object")return DateTime.fromObject(_t);throw new InvalidArgumentError(`Unknown datetime argument: ${_t}, of type ${typeof _t}`)}const n$1r={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function r$P(_t){_t||(_t=l$2q());let Tt=_t in n$1r;if(!Tt){const Dt=_t.split("-");Dt.length>1&&Dt[0]in n$1r&&(_t=Dt[0],Tt=!0),Tt||(_t="en")}const[Mt,Pt,Ft="#,##0.###"]=n$1r[_t];return{decimal:Mt,group:Pt,pattern:Ft}}function s$13(_t,Tt){const Mt=r$P((Tt={...Tt}).locale);Tt.customs=Mt;const Pt=Tt.pattern||Mt.pattern;return isNaN(_t)||Math.abs(_t)===1/0?null:o$U(_t,Pt,Tt)}const l$1f=/[#0,]*[#0](?:\.0*#*)?/;function o$U(_t,Tt,Mt){const Pt=(Mt=Mt||{}).customs.group,Ft=Mt.customs.decimal,Dt=Tt.split(";"),Nt=Dt[0];if((Tt=Dt[_t<0?1:0]||"-"+Nt).includes("%"))_t*=100;else if(Tt.includes("\u2030"))_t*=1e3;else{if(Tt.includes("\xA4"))throw new Error("currency notation not supported");if(Tt.includes("E"))throw new Error("exponential notation not supported")}const Vt=l$1f,zt=Nt.match(Vt);if(!zt)throw new Error("unable to find a number expression in pattern: "+Tt);return Mt.fractional===!1&&(Mt.places=0),Tt.replace(Vt,i$1o(_t,zt[0],{decimal:Ft,group:Pt,places:Mt.places,round:Mt.round}))}function i$1o(_t,Tt,Mt){(Mt=Mt||{}).places===!0&&(Mt.places=0),Mt.places===1/0&&(Mt.places=6);const Pt=Tt.split("."),Ft=typeof Mt.places=="string"&&Mt.places.indexOf(",");let Dt=Mt.places;Ft?Dt=Mt.places.substring(Ft+1):Dt>=0||(Dt=(Pt[1]||[]).length),Mt.round<0||(_t=Number(_t.toFixed(Number(Dt))));const Nt=String(Math.abs(_t)).split("."),Vt=Nt[1]||"";if(Pt[1]||Mt.places){Ft&&(Mt.places=Mt.places.substring(0,Ft));const Kt=Mt.places!==void 0?Mt.places:Pt[1]&&Pt[1].lastIndexOf("0")+1;Kt>Vt.length&&(Nt[1]=Vt.padEnd(Number(Kt),"0")),Dt<Vt.length&&(Nt[1]=Vt.substr(0,Number(Dt)))}else Nt[1]&&Nt.pop();const zt=Pt[0].replace(",","");let Xt=zt.indexOf("0");Xt!==-1&&(Xt=zt.length-Xt,Xt>Nt[0].length&&(Nt[0]=Nt[0].padStart(Xt,"0")),zt.includes("#")||(Nt[0]=Nt[0].substr(Nt[0].length-Xt)));let Ht,Wt,Qt=Pt[0].lastIndexOf(",");if(Qt!==-1){Ht=Pt[0].length-Qt-1;const Kt=Pt[0].substr(0,Qt);Qt=Kt.lastIndexOf(","),Qt!==-1&&(Wt=Kt.length-Qt-1)}const Zt=[];for(let Kt=Nt[0];Kt;){const er=Kt.length-Ht;Zt.push(er>0?Kt.substr(er):Kt),Kt=er>0?Kt.slice(0,er):"",Wt&&(Ht=Wt,Wt=void 0)}return Nt[0]=Zt.reverse().join(Mt.group||","),Nt.join(Mt.decimal||".")}function a$1v(_t){const Tt=r$P((_t=_t||{}).locale),Mt=_t.pattern||Tt.pattern,Pt=Tt.group,Ft=Tt.decimal;let Dt=1;if(Mt.includes("%"))Dt/=100;else if(Mt.includes("\u2030"))Dt/=1e3;else if(Mt.includes("\xA4"))throw new Error("currency notation not supported");const Nt=Mt.split(";");return Nt.length===1&&Nt.push("-"+Nt[0]),{regexp:g$E(Nt,zt=>(zt="(?:"+o$26(zt,".")+")").replace(l$1f,Xt=>{const Ht={signed:!1,separator:_t.strict?Pt:[Pt,""],fractional:_t.fractional,decimal:Ft,exponent:!1},Wt=Xt.split(".");let Qt=_t.places;Wt.length===1&&Dt!==1&&(Wt[1]="###"),Wt.length===1||Qt===0?Ht.fractional=!1:(Qt===void 0&&(Qt=_t.pattern?Wt[1].lastIndexOf("0")+1:1/0),Qt&&_t.fractional==null&&(Ht.fractional=!0),!_t.places&&Qt<Wt[1].length&&(Qt+=","+Wt[1].length),Ht.places=Qt);const Zt=Wt[0].split(",");return Zt.length>1&&(Ht.groupSize=Zt.pop().length,Zt.length>1&&(Ht.groupSize2=Zt.pop().length)),"("+u$11(Ht)+")"}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:Pt,decimal:Ft,factor:Dt}}function p$1W(_t,Tt){const Mt=a$1v(Tt),Pt=new RegExp("^"+Mt.regexp+"$").exec(_t);if(!Pt)return NaN;let Ft=Pt[1];if(!Pt[1]){if(!Pt[2])return NaN;Ft=Pt[2],Mt.factor*=-1}return Ft=Ft.replace(new RegExp("["+Mt.group+"\\s\\xa0]","g"),"").replace(Mt.decimal,"."),Number(Ft)*Mt.factor}function u$11(_t){"places"in(_t=_t||{})||(_t.places=1/0),typeof _t.decimal!="string"&&(_t.decimal="."),"fractional"in _t&&!/^0/.test(String(_t.places))||(_t.fractional=[!0,!1]),"exponent"in _t||(_t.exponent=[!0,!1]),"eSigned"in _t||(_t.eSigned=[!0,!1]);const Tt=d$13(_t),Mt=g$E(_t.fractional,Ft=>{let Dt="";return Ft&&_t.places!==0&&(Dt="\\"+_t.decimal,_t.places===1/0?Dt="(?:"+Dt+"\\d+)?":Dt+="\\d{"+_t.places+"}"),Dt},!0);let Pt=Tt+Mt;return Mt&&(Pt="(?:(?:"+Pt+")|(?:"+Mt+"))"),Pt+g$E(_t.exponent,Ft=>Ft?"([eE]"+d$13({signed:_t.eSigned})+")":"")}function d$13(_t){return"signed"in(_t=_t||{})||(_t.signed=[!0,!1]),"separator"in _t?"groupSize"in _t||(_t.groupSize=3):_t.separator="",g$E(_t.signed,Tt=>Tt?"[-+]":"",!0)+g$E(_t.separator,Tt=>{if(!Tt)return"(?:\\d+)";(Tt=o$26(Tt))===" "?Tt="\\s":Tt==="\xA0"&&(Tt="\\s\\xa0");const Mt=_t.groupSize,Pt=_t.groupSize2;if(Pt){const Ft="(?:0|[1-9]\\d{0,"+(Pt-1)+"}(?:["+Tt+"]\\d{"+Pt+"})*["+Tt+"]\\d{"+Mt+"})";return Mt-Pt>0?"(?:"+Ft+"|(?:0|[1-9]\\d{0,"+(Mt-1)+"}))":Ft}return"(?:0|[1-9]\\d{0,"+(Mt-1)+"}(?:["+Tt+"]\\d{"+Mt+"})*)"},!0)}const g$E=(_t,Tt,Mt)=>{if(!(_t instanceof Array))return Tt(_t);const Pt=[];for(let Ft=0;Ft<_t.length;Ft++)Pt.push(Tt(_t[Ft]));return f$R(Pt.join("|"),Mt)},f$R=(_t,Tt)=>"("+(Tt?"?:":"")+_t+")";var t$_,i$1n;function n$1q(_t){return y$$.fromJSON(_t.toJSON())}function o$T(_t){return _t.toJSON?_t.toJSON():_t}function l$1e(_t){return typeof _t=="string"||_t instanceof String}function y$R(_t){return typeof _t=="number"}function p$1V(_t){return _t instanceof Date}function c$1F(_t,Tt){return _t===Tt||!(!p$1V(_t)||!p$1V(Tt))&&_t.getTime()===Tt.getTime()}function m$14(_t){if(_t===void 0)return null;if(typeof _t=="number")return _t;switch(_t.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109413;case"kilometers":case"kilometer":case"km":return 109414}return null}function d$12(_t){if(_t===null)return null;switch(_t.type){case"polygon":case"multipoint":case"polyline":return _t.extent;case"point":return new M$K({xmin:_t.x,ymin:_t.y,xmax:_t.x,ymax:_t.y,spatialReference:_t.spatialReference});case"extent":return _t}return null}function f$Q(_t){if(_t===void 0)return null;if(typeof _t=="number"||typeof _t=="number")return _t;switch(_t.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9035;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(_t){_t[_t.Standardised=0]="Standardised",_t[_t.StandardisedNoInterval=1]="StandardisedNoInterval",_t[_t.SqlServer=2]="SqlServer",_t[_t.Oracle=3]="Oracle",_t[_t.Postgres=4]="Postgres",_t[_t.PGDB=5]="PGDB",_t[_t.FILEGDB=6]="FILEGDB",_t[_t.NotEvaluated=7]="NotEvaluated"})(t$_||(t$_={})),function(_t){_t[_t.InFeatureSet=0]="InFeatureSet",_t[_t.NotInFeatureSet=1]="NotInFeatureSet",_t[_t.Unknown=2]="Unknown"}(i$1n||(i$1n={}));const F$h=1e3,S$m={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},v$E={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},P$e={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"eesriFieldTypeXML",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"eesriFieldTypeXML"};function b$B(_t){return _t===void 0?"":_t=(_t=(_t=_t.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function D$h(_t,Tt){Tt||(Tt={}),typeof Tt=="function"&&(Tt={cmp:Tt});const Mt=typeof Tt.cycles=="boolean"&&Tt.cycles,Pt=Tt.cmp&&(Ft=Tt.cmp,function(Nt){return function(Vt,zt){const Xt={key:Vt,value:Nt[Vt]},Ht={key:zt,value:Nt[zt]};return Ft(Xt,Ht)}});var Ft;const Dt=[];return function Nt(Vt){if(Vt&&Vt.toJSON&&typeof Vt.toJSON=="function"&&(Vt=Vt.toJSON()),Vt===void 0)return;if(typeof Vt=="number")return isFinite(Vt)?""+Vt:"null";if(typeof Vt!="object")return JSON.stringify(Vt);let zt,Xt;if(Array.isArray(Vt)){for(Xt="[",zt=0;zt<Vt.length;zt++)zt&&(Xt+=","),Xt+=Nt(Vt[zt])||"null";return Xt+"]"}if(Vt===null)return"null";if(Dt.includes(Vt)){if(Mt)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const Ht=Dt.push(Vt)-1,Wt=Object.keys(Vt).sort(Pt&&Pt(Vt));for(Xt="",zt=0;zt<Wt.length;zt++){const Qt=Wt[zt],Zt=Nt(Vt[Qt]);Zt&&(Xt&&(Xt+=","),Xt+=JSON.stringify(Qt)+":"+Zt)}return Dt.splice(Ht,1),"{"+Xt+"}"}(_t)}class S$l{constructor(Tt){this.value=Tt}}class x$p{constructor(Tt){this.value=Tt}}class b$A{constructor(Tt){this.fn=Tt}}class T$g{constructor(Tt,Mt){this.paramCount=Mt,this.fn=Tt}}const N$g=b$A,k$d=x$p,D$g=S$l,M$m=T$g,j$w={type:"VOID"},A$c={type:"BREAK"},R$d={type:"CONTINUE"};function F$g(_t,Tt,Mt){return Tt===""||Tt==null||Tt===Mt||Tt===Mt?_t:_t=_t.split(Tt).join(Mt)}function v$D(_t){return _t instanceof b$A||_t instanceof t$10||_t instanceof T$g}function C$d(_t){return!!w$w(_t)||!!O$g(_t)||!!z$g(_t)||!!_$i(_t)||_t===null||_t===j$w||typeof _t=="number"}function I$h(_t,Tt){return _t===void 0?Tt:_t}function w$w(_t){return typeof _t=="string"||_t instanceof String}function _$i(_t){return typeof _t=="boolean"}function O$g(_t){return typeof _t=="number"}function Z$4(_t){return typeof _t=="number"&&isFinite(_t)&&Math.floor(_t)===_t}function L$g(_t){return _t instanceof Array}function Y$3(_t){return(_t==null?void 0:_t.arcadeDeclaredClass)==="esri.arcade.Feature"}function J$8(_t){return(_t&&_t.declaredRootClass&&_t.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function P$d(_t){return(_t&&_t.declaredRootClass&&_t.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function E$p(_t){return _t instanceof t$$}function z$g(_t){return _t instanceof Date}function G$b(_t,Tt,Mt){if(_t.length<Tt||_t.length>Mt)throw new Error("Function called with wrong number of Parameters")}function V$i(_t){return _t<0?-Math.round(-_t):Math.round(_t)}function H$8(){let _t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Tt){const Mt=(_t+16*Math.random())%16|0;return _t=Math.floor(_t/16),(Tt==="x"?Mt:3&Mt|8).toString(16)})}function U$i(_t,Tt){return isNaN(_t)===!1?Tt==null||Tt===""?_t.toString():(Tt=F$g(Tt,"\u2030",""),Tt=F$g(Tt,"\xA4",""),s$13(_t,{pattern:Tt})):_t.toString()}function q$9(_t,Tt){const Mt=DateTime.fromJSDate(_t);return Tt==null||Tt===""?Mt.toISO({suppressMilliseconds:!0}):Mt.toFormat($$6(Tt),{locale:l$2q(),numberingSystem:"latn"})}function $$6(_t){_t=_t.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let Tt="";const Mt=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const Pt of _t.match(Mt))switch(Pt){case"D":Tt+="d";break;case"DD":Tt+="dd";break;case"DDD":Tt+="o";break;case"d":Tt+="c";break;case"ddd":Tt+="ccc";break;case"dddd":Tt+="cccc";break;case"M":Tt+="L";break;case"MM":Tt+="LL";break;case"MMM":Tt+="LLL";break;case"MMMM":Tt+="LLLL";break;case"YY":Tt+="yy";break;case"Y":case"YYYY":Tt+="yyyy";break;case"Q":Tt+="q";break;case"Z":Tt+="ZZ";break;case"ZZ":Tt+="ZZZ";break;case"S":Tt+="'S'";break;case"SS":Tt+="'SS'";break;case"SSS":Tt+="u";break;case"A":case"a":Tt+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":Tt+=Pt;break;default:Pt.length>=2&&Pt.slice(0,1)==="["&&Pt.slice(-1)==="]"?Tt+=`'${Pt.slice(1,-1)}'`:Tt+=`'${Pt}'`}return Tt}function B$c(_t,Tt,Mt){switch(Mt){case">":return _t>Tt;case"<":return _t<Tt;case">=":return _t>=Tt;case"<=":return _t<=Tt}return!1}function W$5(_t,Tt,Mt){if(_t===null){if(Tt===null||Tt===j$w)return B$c(null,null,Mt);if(O$g(Tt))return B$c(0,Tt,Mt);if(w$w(Tt)||_$i(Tt))return B$c(0,ne$1(Tt),Mt);if(z$g(Tt))return B$c(0,Tt.getTime(),Mt)}if(_t===j$w){if(Tt===null||Tt===j$w)return B$c(null,null,Mt);if(O$g(Tt))return B$c(0,Tt,Mt);if(w$w(Tt)||_$i(Tt))return B$c(0,ne$1(Tt),Mt);if(z$g(Tt))return B$c(0,Tt.getTime(),Mt)}else if(O$g(_t)){if(O$g(Tt))return B$c(_t,Tt,Mt);if(_$i(Tt))return B$c(_t,ne$1(Tt),Mt);if(Tt===null||Tt===j$w)return B$c(_t,0,Mt);if(w$w(Tt))return B$c(_t,ne$1(Tt),Mt);if(z$g(Tt))return B$c(_t,Tt.getTime(),Mt)}else if(w$w(_t)){if(w$w(Tt))return B$c(X$4(_t),X$4(Tt),Mt);if(z$g(Tt))return B$c(ne$1(_t),Tt.getTime(),Mt);if(O$g(Tt))return B$c(ne$1(_t),Tt,Mt);if(Tt===null||Tt===j$w)return B$c(ne$1(_t),0,Mt);if(_$i(Tt))return B$c(ne$1(_t),ne$1(Tt),Mt)}else if(z$g(_t)){if(z$g(Tt))return B$c(_t,Tt,Mt);if(Tt===null||Tt===j$w)return B$c(_t.getTime(),0,Mt);if(O$g(Tt))return B$c(_t.getTime(),Tt,Mt);if(_$i(Tt)||w$w(Tt))return B$c(_t.getTime(),ne$1(Tt),Mt)}else if(_$i(_t)){if(_$i(Tt))return B$c(_t,Tt,Mt);if(O$g(Tt))return B$c(ne$1(_t),ne$1(Tt),Mt);if(z$g(Tt))return B$c(ne$1(_t),Tt.getTime(),Mt);if(Tt===null||Tt===j$w)return B$c(ne$1(_t),0,Mt);if(w$w(Tt))return B$c(ne$1(_t),ne$1(Tt),Mt)}return!!Q$6(_t,Tt)&&(Mt==="<="||Mt===">=")}function Q$6(_t,Tt){if(_t===Tt||_t===null&&Tt===j$w||Tt===null&&_t===j$w)return!0;if(z$g(_t)&&z$g(Tt))return _t.getTime()===Tt.getTime();if(_t instanceof h$P||_t instanceof i$1p)return _t.equalityTest(Tt);if(_t instanceof j$Z&&Tt instanceof j$Z){const Mt=_t.cache._arcadeCacheId,Pt=Tt.cache._arcadeCacheId;if(Mt!=null)return Mt===Pt}return _t!==void 0&&Tt!==void 0&&_t!==null&&Tt!==null&&typeof _t=="object"&&typeof Tt=="object"&&(_t._arcadeCacheId===Tt._arcadeCacheId&&_t._arcadeCacheId!==void 0&&_t._arcadeCacheId!==null||_t._underlyingGraphic===Tt._underlyingGraphic&&_t._underlyingGraphic!==void 0&&_t._underlyingGraphic!==null)}function X$4(_t,Tt){if(w$w(_t))return _t;if(_t===null)return"";if(O$g(_t))return U$i(_t,Tt);if(_$i(_t))return _t.toString();if(z$g(_t))return q$9(_t,Tt);if(_t instanceof p$3q)return JSON.stringify(_t.toJSON());if(L$g(_t)){const Mt=[];for(let Pt=0;Pt<_t.length;Pt++)Mt[Pt]=te$2(_t[Pt]);return"["+Mt.join(",")+"]"}if(_t instanceof t$$){const Mt=[];for(let Pt=0;Pt<_t.length();Pt++)Mt[Pt]=te$2(_t.get(Pt));return"["+Mt.join(",")+"]"}return _t!==null&&typeof _t=="object"&&_t.castToText!==void 0?_t.castToText():v$D(_t)?"object, Function":""}function K$5(_t){const Tt=[];if(L$g(_t)===!1)return null;if(_t instanceof t$$){for(let Mt=0;Mt<_t.length();Mt++)Tt[Mt]=ne$1(_t.get(Mt));return Tt}for(let Mt=0;Mt<_t.length;Mt++)Tt[Mt]=ne$1(_t[Mt]);return Tt}function ee$2(_t,Tt){if(w$w(_t))return _t;if(_t===null)return"";if(O$g(_t))return U$i(_t,Tt);if(_$i(_t))return _t.toString();if(z$g(_t))return q$9(_t,Tt);if(_t instanceof p$3q)return _t instanceof M$K?'{"xmin":'+_t.xmin.toString()+',"ymin":'+_t.ymin.toString()+","+(_t.hasZ?'"zmin":'+_t.zmin.toString()+",":"")+(_t.hasM?'"mmin":'+_t.mmin.toString()+",":"")+'"xmax":'+_t.xmax.toString()+',"ymax":'+_t.ymax.toString()+","+(_t.hasZ?'"zmax":'+_t.zmax.toString()+",":"")+(_t.hasM?'"mmax":'+_t.mmax.toString()+",":"")+'"spatialReference":'+de$1(_t.spatialReference)+"}":de$1(_t.toJSON(),(Mt,Pt)=>Mt.key===Pt.key?0:Mt.key==="spatialReference"?1:Pt.key==="spatialReference"||Mt.key<Pt.key?-1:Mt.key>Pt.key?1:0);if(L$g(_t)){const Mt=[];for(let Pt=0;Pt<_t.length;Pt++)Mt[Pt]=te$2(_t[Pt]);return"["+Mt.join(",")+"]"}if(_t instanceof t$$){const Mt=[];for(let Pt=0;Pt<_t.length();Pt++)Mt[Pt]=te$2(_t.get(Pt));return"["+Mt.join(",")+"]"}return _t!==null&&typeof _t=="object"&&_t.castToText!==void 0?_t.castToText():v$D(_t)?"object, Function":""}function te$2(_t){if(_t===null)return"null";if(_$i(_t)||O$g(_t)||w$w(_t))return JSON.stringify(_t);if(_t instanceof p$3q||_t instanceof t$$||_t instanceof Array)return ee$2(_t);if(_t instanceof Date)return JSON.stringify(q$9(_t,""));if(_t!==null&&typeof _t=="object"){if(_t.castToText!==void 0)return _t.castToText()}else if(_t===j$w)return"null";return"null"}function ne$1(_t,Tt){return O$g(_t)?_t:_t===null||_t===""?0:z$g(_t)?NaN:_$i(_t)?_t?1:0:L$g(_t)||_t===""||_t===void 0?NaN:Tt!==void 0&&w$w(_t)?(Tt=F$g(Tt,"\u2030",""),Tt=F$g(Tt,"\xA4",""),p$1W(_t,{pattern:Tt})):_t===j$w?0:Number(_t)}function re$2(_t){if(z$g(_t))return _t;if(w$w(_t)){const Tt=ae$1(_t);if(Tt)return Tt.toJSDate()}return null}function ie$1(_t){return z$g(_t)?DateTime.fromJSDate(_t):w$w(_t)?ae$1(_t):null}function ae$1(_t){const Tt=/ (\d\d)/;let Mt=DateTime.fromISO(_t);return Mt.isValid||Tt.test(_t)&&(_t=_t.replace(Tt,"T$1"),Mt=DateTime.fromISO(_t),Mt.isValid)?Mt:null}function oe$1(_t){return _$i(_t)?_t:w$w(_t)?(_t=_t.toLowerCase())==="true":!!O$g(_t)&&_t!==0&&!isNaN(_t)}function se$1(_t,Tt){return t$2e(_t)?null:(_t.spatialReference!==null&&_t.spatialReference!==void 0||(_t.spatialReference=Tt),_t)}function ue$1(_t){if(_t===null)return null;if(_t instanceof j$Z)return _t.x==="NaN"||_t.x===null||isNaN(_t.x)?null:_t;if(_t instanceof v$V){if(_t.rings.length===0)return null;for(const Tt of _t.rings)if(Tt.length>0)return _t;return null}if(_t instanceof m$1R){if(_t.paths.length===0)return null;for(const Tt of _t.paths)if(Tt.length>0)return _t;return null}return _t instanceof m$1T?_t.points.length===0?null:_t:_t instanceof M$K?_t.xmin==="NaN"||_t.xmin===null||isNaN(_t.xmin)?null:_t:null}function le(_t,Tt){if(!_t||!_t.domain)return Tt;let Mt=null;if(_t.field.type==="string"||_t.field.type==="esriFieldTypeString")Tt=X$4(Tt);else{if(Tt==null)return null;if(Tt==="")return Tt;Tt=ne$1(Tt)}for(let Pt=0;Pt<_t.domain.codedValues.length;Pt++){const Ft=_t.domain.codedValues[Pt];Ft.code===Tt&&(Mt=Ft)}return Mt===null?Tt:Mt.name}function fe$1(_t,Tt){if(!_t||!_t.domain)return Tt;let Mt=null;Tt=X$4(Tt);for(let Pt=0;Pt<_t.domain.codedValues.length;Pt++){const Ft=_t.domain.codedValues[Pt];Ft.name===Tt&&(Mt=Ft)}return Mt===null?Tt:Mt.code}function ce$1(_t,Tt,Mt=null,Pt=null){if(!Tt||!Tt.fields)return null;let Ft,Dt,Nt=null;for(let Vt=0;Vt<Tt.fields.length;Vt++){const zt=Tt.fields[Vt];zt.name.toLowerCase()===_t.toString().toLowerCase()&&(Nt=zt)}if(Nt===null)throw new Error("Field not found");return Pt===null&&Mt&&Tt.typeIdField&&(Pt=Mt.hasField(Tt.typeIdField)?Mt.field(Tt.typeIdField):null),Pt!=null&&Tt.types.some(function(Vt){return Vt.id===Pt&&(Ft=Vt.domains&&Vt.domains[Nt.name],Ft&&Ft.type==="inherited"&&(Ft=me$1(Nt.name,Tt),Dt=!0),!0)}),Dt||Ft||(Ft=me$1(_t,Tt)),{field:Nt,domain:Ft}}function me$1(_t,Tt){let Mt;return Tt.fields.some(function(Pt){return Pt.name.toLowerCase()===_t.toLowerCase()&&(Mt=Pt.domain),!!Mt}),Mt}function de$1(_t,Tt){Tt||(Tt={}),typeof Tt=="function"&&(Tt={cmp:Tt});const Mt=typeof Tt.cycles=="boolean"&&Tt.cycles,Pt=Tt.cmp&&(Ft=Tt.cmp,function(Nt){return function(Vt,zt){const Xt={key:Vt,value:Nt[Vt]},Ht={key:zt,value:Nt[zt]};return Ft(Xt,Ht)}});var Ft;const Dt=[];return function Nt(Vt){if(Vt&&Vt.toJSON&&typeof Vt.toJSON=="function"&&(Vt=Vt.toJSON()),Vt===void 0)return;if(typeof Vt=="number")return isFinite(Vt)?""+Vt:"null";if(typeof Vt!="object")return JSON.stringify(Vt);let zt,Xt;if(Array.isArray(Vt)){for(Xt="[",zt=0;zt<Vt.length;zt++)zt&&(Xt+=","),Xt+=Nt(Vt[zt])||"null";return Xt+"]"}if(Vt===null)return"null";if(Dt.includes(Vt)){if(Mt)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const Ht=Dt.push(Vt)-1,Wt=Object.keys(Vt).sort(Pt&&Pt(Vt));for(Xt="",zt=0;zt<Wt.length;zt++){const Qt=Wt[zt],Zt=Nt(Vt[Qt]);Zt&&(Xt&&(Xt+=","),Xt+=JSON.stringify(Qt)+":"+Zt)}return Dt.splice(Ht,1),"{"+Xt+"}"}(_t)}function ye$1(_t){if(_t===null)return null;const Tt=[];for(const Mt of _t)Mt&&Mt.arcadeDeclaredClass&&Mt.arcadeDeclaredClass==="esri.arcade.Feature"?Tt.push(Mt.geometry()):Tt.push(Mt);return Tt}function pe$1(_t,Tt){if(!(Tt instanceof j$Z))throw new Error("Invalid Argument");_t.push(Tt.hasZ?Tt.hasM?[Tt.x,Tt.y,Tt.z,Tt.m]:[Tt.x,Tt.y,Tt.z]:[Tt.x,Tt.y])}function ge$1(_t,Tt){if(L$g(_t)||E$p(_t)){let Mt=!1,Pt=!1,Ft=[],Dt=Tt;if(L$g(_t)){for(const Nt of _t)pe$1(Ft,Nt);Ft.length>0&&(Dt=_t[0].spatialReference,Mt=_t[0].hasZ,Pt=_t[0].hasM)}else if(_t instanceof i$1p)Ft=_t._elements,Ft.length>0&&(Mt=_t._hasZ,Pt=_t._hasM,Dt=_t.get(0).spatialReference);else{if(!E$p(_t))throw new Error("Invalid Argument");for(const Nt of _t.toArray())pe$1(Ft,Nt);Ft.length>0&&(Dt=_t.get(0).spatialReference,Mt=_t.get(0).hasZ===!0,Pt=_t.get(0).hasM===!0)}return Ft.length===0?null:(f$1n(Ft,Pt,Mt)===!1&&(Ft=Ft.slice(0).reverse()),new v$V({rings:[Ft],spatialReference:Dt,hasZ:Mt,hasM:Pt}))}return _t}function he$1(_t,Tt){if(L$g(_t)||E$p(_t)){let Mt=!1,Pt=!1,Ft=[],Dt=Tt;if(L$g(_t)){for(const Nt of _t)pe$1(Ft,Nt);Ft.length>0&&(Dt=_t[0].spatialReference,Mt=_t[0].hasZ===!0,Pt=_t[0].hasM===!0)}else if(_t instanceof i$1p)Ft=_t._elements,Ft.length>0&&(Mt=_t._hasZ,Pt=_t._hasM,Dt=_t.get(0).spatialReference);else if(E$p(_t)){for(const Nt of _t.toArray())pe$1(Ft,Nt);Ft.length>0&&(Dt=_t.get(0).spatialReference,Mt=_t.get(0).hasZ===!0,Pt=_t.get(0).hasM===!0)}return Ft.length===0?null:new m$1R({paths:[Ft],spatialReference:Dt,hasZ:Mt,hasM:Pt})}return _t}function Se$1(_t,Tt){if(L$g(_t)||E$p(_t)){let Mt=!1,Pt=!1,Ft=[],Dt=Tt;if(L$g(_t)){for(const Nt of _t)pe$1(Ft,Nt);Ft.length>0&&(Dt=_t[0].spatialReference,Mt=_t[0].hasZ===!0,Pt=_t[0].hasM===!0)}else if(_t instanceof i$1p)Ft=_t._elements,Ft.length>0&&(Mt=_t._hasZ,Pt=_t._hasM,Dt=_t.get(0).spatialReference);else if(E$p(_t)){for(const Nt of _t.toArray())pe$1(Ft,Nt);Ft.length>0&&(Dt=_t.get(0).spatialReference,Mt=_t.get(0).hasZ===!0,Pt=_t.get(0).hasM===!0)}return Ft.length===0?null:new m$1T({points:Ft,spatialReference:Dt,hasZ:Mt,hasM:Pt})}return _t}function xe(_t,Tt=!1){const Mt=[];if(_t===null)return Mt;if(L$g(_t)===!0){for(let Pt=0;Pt<_t.length;Pt++){const Ft=X$4(_t[Pt]);Ft===""&&Tt!==!0||Mt.push(Ft)}return Mt}if(_t instanceof t$$){for(let Pt=0;Pt<_t.length();Pt++){const Ft=X$4(_t.get(Pt));Ft===""&&Tt!==!0||Mt.push(Ft)}return Mt}if(C$d(_t)){const Pt=X$4(_t);return Pt===""&&Tt!==!0||Mt.push(Pt),Mt}return[]}let be=0;function Te$1(_t){return be++,be%100==0?(be=0,new Promise(Tt=>{setTimeout(()=>{Tt(_t)},0)})):_t}function Ne$1(_t,Tt,Mt){switch(Mt){case"&":return _t&Tt;case"|":return _t|Tt;case"^":return _t^Tt;case"<<":return _t<<Tt;case">>":return _t>>Tt;case">>>":return _t>>>Tt}}function ke$1(_t,Tt=null){return _t==null?null:_$i(_t)||O$g(_t)||w$w(_t)?_t:_t instanceof p$3q?(Tt==null?void 0:Tt.keepGeometryType)===!0?_t:_t.toJSON():_t instanceof t$$?_t.toArray().map(Mt=>ke$1(Mt,Tt)):_t instanceof Array?_t.map(Mt=>ke$1(Mt,Tt)):_t instanceof Date?_t:_t!==null&&typeof _t=="object"&&_t.castAsJson!==void 0?_t.castAsJson(Tt):null}async function De(_t,Tt,Mt,Pt,Ft){const Dt=await Me(_t,Tt,Mt);Ft[Pt]=Dt}async function Me(_t,Tt=null,Mt=null){if(_t instanceof t$$&&(_t=_t.toArray()),_t==null)return null;if(C$d(_t)||_t instanceof p$3q||_t instanceof Date)return ke$1(_t,Mt);if(_t instanceof Array){const Pt=[],Ft=[];for(const Dt of _t)Dt===null||C$d(Dt)||Dt instanceof p$3q||Dt instanceof Date?Ft.push(ke$1(Dt,Mt)):(Ft.push(null),Pt.push(De(Dt,Tt,Mt,Ft.length-1,Ft)));return Pt.length>0&&await Promise.all(Pt),Ft}return _t!==null&&typeof _t=="object"&&_t.castAsJsonAsync!==void 0?_t.castAsJsonAsync(Tt,Mt):null}function je$1(_t,Tt,Mt){const Pt=_t.fullSchema();return Pt===null||!Pt.fields?null:ce$1(Tt,Pt,_t,Mt)}function Ae(_t){const Tt=_t.fullSchema();return Tt===null?null:Tt.fields&&Tt.typeIdField?{subtypeField:Tt.typeIdField,subtypes:Tt.types?Tt.types.map(Mt=>({name:Mt.name,code:Mt.id})):[]}:null}function Re(_t,Tt,Mt,Pt){const Ft=_t.fullSchema();if(Ft===null||!Ft.fields)return null;const Dt=ce$1(Tt,Ft,_t,Pt);if(Mt===void 0)try{Mt=_t.field(Tt)}catch{return null}return le(Dt,Mt)}function Fe(_t,Tt,Mt,Pt){const Ft=_t.fullSchema();if(Ft===null||!Ft.fields)return null;if(Mt===void 0){try{Mt=_t.field(Tt)}catch{return null}return Mt}return fe$1(ce$1(Tt,Ft,_t,Pt),Mt)}function ve$1(_t){const Tt=_t.fullSchema();if(Tt===null||!Tt.fields)return null;const Mt=[];for(const Pt of Tt.fields)Mt.push(o$T(Pt));return{objectIdField:Tt.objectIdField,globalIdField:Tt.globalIdField,geometryType:v$E[Tt.geometryType]===void 0?"":v$E[Tt.geometryType],fields:Mt}}const Ce=Object.freeze(Object.defineProperty({__proto__:null,ReturnResultE:S$l,ImplicitResultE:x$p,NativeFunctionE:b$A,SizzleFunctionE:T$g,NativeFunction:N$g,ImplicitResult:k$d,ReturnResult:D$g,SizzleFunction:M$m,voidOperation:j$w,breakResult:A$c,continueResult:R$d,multiReplace:F$g,isFunctionParameter:v$D,isSimpleType:C$d,defaultUndefined:I$h,isString:w$w,isBoolean:_$i,isNumber:O$g,isInteger:Z$4,isArray:L$g,isFeature:Y$3,isFeatureSet:J$8,isFeatureSetCollection:P$d,isImmutableArray:E$p,isDate:z$g,pcCheck:G$b,absRound:V$i,generateUUID:H$8,formatNumber:U$i,formatDate:q$9,standardiseDateFormat:$$6,greaterThanLessThan:W$5,equalityTest:Q$6,toString:X$4,toNumberArray:K$5,toStringExplicit:ee$2,toNumber:ne$1,toDate:re$2,toDateTime:ie$1,toBoolean:oe$1,fixSpatialReference:se$1,fixNullGeometry:ue$1,getDomainValue:le,getDomainCode:fe$1,getDomain:ce$1,stableStringify:de$1,autoCastFeatureToGeometry:ye$1,autoCastArrayOfPointsToPolygon:ge$1,autoCastArrayOfPointsToPolyline:he$1,autoCastArrayOfPointsToMultiPoint:Se$1,toStringArray:xe,tick:Te$1,binaryOperator:Ne$1,castAsJson:ke$1,castAsJsonAsync:Me,featureFullDomain:je$1,featureSubtypes:Ae,featureDomainValueLookup:Re,featureDomainCodeLookup:Fe,featureSchema:ve$1},Symbol.toStringTag,{value:"Module"}));var t$Z;let p$1U=t$Z=class extends l$2v{constructor(_t){super(_t),this.minValue=0,this.maxValue=0}clone(){return new t$Z({minValue:this.minValue,maxValue:this.maxValue})}};e$2a([d$25({type:Number,json:{write:!0}})],p$1U.prototype,"minValue",void 0),e$2a([d$25({type:Number,json:{write:!0}})],p$1U.prototype,"maxValue",void 0),p$1U=t$Z=e$2a([n$2L("esri.renderer.support.AuthoringInfoClassBreakInfo")],p$1U);var n$1p;let p$1T=n$1p=class extends l$2v{constructor(_t){super(_t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new n$1p({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:m$2e(this.classBreakInfos)})}};e$2a([d$25({type:String,json:{write:!0}})],p$1T.prototype,"field",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1T.prototype,"normalizationField",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1T.prototype,"label",void 0),e$2a([d$25({type:[p$1U],json:{write:!0}})],p$1T.prototype,"classBreakInfos",void 0),p$1T=n$1p=e$2a([n$2L("esri.renderers.support.AuthoringInfoFieldInfo")],p$1T);var n$1o;const l$1d=new s$1_({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),p$1S=new s$1_({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),a$1u={key:_t=>typeof _t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},u$10=["high-to-low","above-and-below","centered-on","extremes"],m$13=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],y$Q=["seconds","minutes","hours","days","months","years"];let c$1E=n$1o=class extends l$2v{constructor(_t){super(_t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(_t){return typeof _t=="string"||typeof _t=="number"?_t:null}castStartTime(_t){return typeof _t=="string"||typeof _t=="number"?_t:null}get style(){return this.type==="color"?this._get("style"):null}set style(_t){this._set("style",_t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(_t){this._set("theme",_t)}clone(){return new n$1o({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};e$2a([d$25({types:a$1u,json:{write:!0}})],c$1E.prototype,"endTime",void 0),e$2a([s$23("endTime")],c$1E.prototype,"castEndTime",null),e$2a([d$25({type:String,json:{write:!0}})],c$1E.prototype,"field",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$1E.prototype,"maxSliderValue",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$1E.prototype,"minSliderValue",void 0),e$2a([d$25({types:a$1u,json:{write:!0}})],c$1E.prototype,"startTime",void 0),e$2a([s$23("startTime")],c$1E.prototype,"castStartTime",null),e$2a([d$25({type:l$1d.apiValues,value:null,json:{type:l$1d.jsonValues,read:l$1d.read,write:l$1d.write}})],c$1E.prototype,"style",null),e$2a([d$25({type:m$13,value:null,json:{type:m$13,origins:{"web-scene":{type:u$10,write:{writer:(_t,Tt)=>{u$10.includes(_t)&&(Tt.theme=_t)}}}},write:!0}})],c$1E.prototype,"theme",null),e$2a([d$25({type:p$1S.apiValues,json:{type:p$1S.jsonValues,read:p$1S.read,write:p$1S.write}})],c$1E.prototype,"type",void 0),e$2a([d$25({type:y$Q,json:{type:y$Q,write:!0}})],c$1E.prototype,"units",void 0),c$1E=n$1o=e$2a([n$2L("esri.renderers.support.AuthoringInfoVisualVariable")],c$1E);const d$11=c$1E;let e$Y=class extends l$2v{constructor(_t){super(_t),this.type=null}};e$2a([d$25({readOnly:!0,json:{read:!1,write:!0}})],e$Y.prototype,"type",void 0),e$Y=e$2a([n$2L("esri.rest.support.ColorRamp")],e$Y);const p$1R=e$Y;var m$12;let c$1D=m$12=class extends p$1R{constructor(_t){super(_t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new m$12({fromColor:m$2e(this.fromColor),toColor:m$2e(this.toColor),algorithm:this.algorithm})}};e$2a([r$1r({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],c$1D.prototype,"algorithm",void 0),e$2a([d$25({type:l$2f,json:{type:[S$Q],write:!0}})],c$1D.prototype,"fromColor",void 0),e$2a([d$25({type:l$2f,json:{type:[S$Q],write:!0}})],c$1D.prototype,"toColor",void 0),e$2a([d$25({type:["algorithmic"]})],c$1D.prototype,"type",void 0),c$1D=m$12=e$2a([n$2L("esri.rest.support.AlgorithmicColorRamp")],c$1D);const a$1t=c$1D;var c$1C;let m$11=c$1C=class extends p$1R{constructor(_t){super(_t),this.colorRamps=null,this.type="multipart"}clone(){return new c$1C({colorRamps:m$2e(this.colorRamps)})}};e$2a([d$25({type:[a$1t],json:{write:!0}})],m$11.prototype,"colorRamps",void 0),e$2a([d$25({type:["multipart"]})],m$11.prototype,"type",void 0),m$11=c$1C=e$2a([n$2L("esri.rest.support.MultipartColorRamp")],m$11);const a$1s=m$11,m$10={key:"type",base:p$1R,typeMap:{algorithmic:a$1t,multipart:a$1s}};function p$1Q(_t){return _t&&_t.type?_t.type==="algorithmic"?a$1t.fromJSON(_t):_t.type==="multipart"?a$1s.fromJSON(_t):null:null}var d$10;const h$O=new s$1_({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),m$$=new s$1_({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),y$P=new s$1_({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),f$P=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],v$C=["high-to-low","above-and-below","above","below","90-10"],w$v=["flow-line","wave-front"],b$z=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let g$D=d$10=class extends l$2v{constructor(_t){super(_t),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const _t=this._get("classificationMethod"),Tt=this.type;return Tt&&Tt!=="relationship"?Tt==="class-breaks-size"||Tt==="class-breaks-color"?_t||"manual":null:_t}set classificationMethod(_t){this._set("classificationMethod",_t)}readColorRamp(_t){if(_t)return p$1Q(_t)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(_t){this._set("fields",_t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(_t){this._set("field1",_t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(_t){this._set("field2",_t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(_t){this._set("flowTheme",_t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(_t){this._set("focus",_t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(_t){this._set("numClasses",_t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(_t){this._set("statistics",_t)}get standardDeviationInterval(){const _t=this.type;return _t&&_t!=="relationship"&&_t!=="class-breaks-size"&&_t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(_t){this._set("standardDeviationInterval",_t)}get type(){return this._get("type")}set type(_t){let Tt=_t;_t==="classed-size"?Tt="class-breaks-size":_t==="classed-color"&&(Tt="class-breaks-color"),this._set("type",Tt)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(_t){this._set("univariateSymbolStyle",_t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(_t){this._set("univariateTheme",_t)}clone(){return new d$10({classificationMethod:this.classificationMethod,colorRamp:m$2e(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:m$2e(this.field1),field2:m$2e(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(_t=>_t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};e$2a([d$25({type:h$O.apiValues,value:null,json:{type:h$O.jsonValues,read:h$O.read,write:h$O.write,origins:{"web-document":{default:"manual",type:h$O.jsonValues,read:h$O.read,write:h$O.write}}}})],g$D.prototype,"classificationMethod",null),e$2a([d$25({types:m$10,json:{write:!0}})],g$D.prototype,"colorRamp",void 0),e$2a([o$1U("colorRamp")],g$D.prototype,"readColorRamp",null),e$2a([d$25({type:[String],value:null,json:{write:!0}})],g$D.prototype,"fields",null),e$2a([d$25({type:p$1T,value:null,json:{write:!0}})],g$D.prototype,"field1",null),e$2a([d$25({type:p$1T,value:null,json:{write:!0}})],g$D.prototype,"field2",null),e$2a([d$25({type:w$v,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],g$D.prototype,"flowTheme",null),e$2a([d$25({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],g$D.prototype,"focus",null),e$2a([d$25({type:Number,value:null,json:{type:S$Q,write:!0}})],g$D.prototype,"numClasses",null),e$2a([d$25({type:f$P,json:{type:f$P,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],g$D.prototype,"lengthUnit",void 0),e$2a([d$25({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],g$D.prototype,"maxSliderValue",void 0),e$2a([d$25({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],g$D.prototype,"minSliderValue",void 0),e$2a([d$25({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],g$D.prototype,"statistics",null),e$2a([d$25({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],g$D.prototype,"standardDeviationInterval",null),e$2a([d$25({type:m$$.apiValues,value:null,json:{type:m$$.jsonValues,read:m$$.read,write:m$$.write,origins:{"web-scene":{type:y$P.jsonValues,write:{writer:y$P.write,overridePolicy:_t=>({enabled:_t!=="flow"})}}}}})],g$D.prototype,"type",null),e$2a([d$25({type:[d$11],json:{write:!0}})],g$D.prototype,"visualVariables",void 0),e$2a([d$25({type:b$z,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],g$D.prototype,"univariateSymbolStyle",null),e$2a([d$25({type:v$C,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],g$D.prototype,"univariateTheme",null),g$D=d$10=e$2a([n$2L("esri.renderers.support.AuthoringInfo")],g$D);const j$v=g$D,n$1n=new s$1_({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let a$1r=class extends l$2v{constructor(_t){super(_t),this.authoringInfo=null,this.type=null}async getRequiredFields(_t){if(!this.collectRequiredFields)return[];const Tt=new Set;return await this.collectRequiredFields(Tt,_t),Array.from(Tt).sort()}getSymbol(_t,Tt){}async getSymbolAsync(_t,Tt){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};e$2a([d$25({type:j$v,json:{write:!0}})],a$1r.prototype,"authoringInfo",void 0),e$2a([d$25({type:n$1n.apiValues,readOnly:!0,json:{type:n$1n.jsonValues,read:!1,write:{writer:n$1n.write,ignoreOrigin:!0}}})],a$1r.prototype,"type",void 0),a$1r=e$2a([n$2L("esri.renderers.Renderer")],a$1r);const p$1P=a$1r;var s$12;let p$1O=s$12=class extends l$2v{constructor(){super(...arguments),this.title=null}clone(){return new s$12({title:this.title})}};e$2a([d$25({type:String,json:{write:!0}})],p$1O.prototype,"title",void 0),p$1O=s$12=e$2a([n$2L("esri.renderers.support.LegendOptions")],p$1O);var t$Y;let p$1N=t$Y=class extends p$1O{constructor(){super(...arguments),this.showLegend=null}clone(){return new t$Y({title:this.title,showLegend:this.showLegend})}};e$2a([d$25({type:Boolean,json:{write:!0}})],p$1N.prototype,"showLegend",void 0),p$1N=t$Y=e$2a([n$2L("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],p$1N);const i$1m=p$1N,a$1q=s$2l.getLogger("esri.renderers.visualVariables.VisualVariable"),u$$=new s$1_({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let c$1B=class extends l$2v{constructor(_t){super(_t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(_t){return _t==null?_t:typeof _t=="function"?(a$1q.error(".field: field must be a string value"),null):u$2b(_t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};e$2a([d$25()],c$1B.prototype,"index",void 0),e$2a([d$25({type:u$$.apiValues,readOnly:!0,json:{read:u$$.read,write:u$$.write}})],c$1B.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$1B.prototype,"field",void 0),e$2a([s$23("field")],c$1B.prototype,"castField",null),e$2a([d$25({type:String,json:{write:!0}})],c$1B.prototype,"valueExpression",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$1B.prototype,"valueExpressionTitle",void 0),e$2a([d$25({readOnly:!0})],c$1B.prototype,"arcadeRequired",null),e$2a([d$25({type:i$1m,json:{write:!0}})],c$1B.prototype,"legendOptions",void 0),c$1B=e$2a([n$2L("esri.renderers.visualVariables.VisualVariable")],c$1B);const d$$=c$1B;var i$1l;let p$1M=i$1l=class extends d$${constructor(_t){super(_t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(_t){_t&&Array.isArray(_t)&&(_t=_t.filter(Tt=>!!Tt)).sort((Tt,Mt)=>Tt.value-Mt.value),this._set("stops",_t)}clone(){return new i$1l({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(_t=>_t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(_t=>_t.value||0)}};e$2a([d$25({readOnly:!0})],p$1M.prototype,"cache",null),e$2a([d$25({type:["color"],json:{type:["colorInfo"]}})],p$1M.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1M.prototype,"normalizationField",void 0),e$2a([d$25({type:[a$1M],json:{write:!0}})],p$1M.prototype,"stops",null),p$1M=i$1l=e$2a([n$2L("esri.renderers.visualVariables.ColorVariable")],p$1M);const a$1p=p$1M;var l$1c;let u$_=l$1c=class extends l$2v{constructor(_t){super(_t),this.label=null,this.opacity=null,this.value=null}readOpacity(_t,Tt){return r$1q(Tt.transparency)}writeOpacity(_t,Tt,Mt){Tt[Mt]=n$2v(_t)}clone(){return new l$1c({label:this.label,opacity:this.opacity,value:this.value})}};e$2a([d$25({type:String,json:{write:!0}})],u$_.prototype,"label",void 0),e$2a([d$25({type:Number,json:{type:S$Q,write:{target:"transparency"}}})],u$_.prototype,"opacity",void 0),e$2a([o$1U("opacity",["transparency"])],u$_.prototype,"readOpacity",null),e$2a([r$1C("opacity")],u$_.prototype,"writeOpacity",null),e$2a([d$25({type:Number,json:{write:!0}})],u$_.prototype,"value",void 0),u$_=l$1c=e$2a([n$2L("esri.renderers.visualVariables.support.OpacityStop")],u$_);const y$O=u$_;var i$1k;let p$1L=i$1k=class extends d$${constructor(_t){super(_t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(_t){_t&&Array.isArray(_t)&&(_t=_t.filter(Tt=>!!Tt)).sort((Tt,Mt)=>Tt.value-Mt.value),this._set("stops",_t)}clone(){return new i$1k({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(_t=>_t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(_t=>_t.value||0)}};e$2a([d$25({readOnly:!0})],p$1L.prototype,"cache",null),e$2a([d$25({type:["opacity"],json:{type:["transparencyInfo"]}})],p$1L.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1L.prototype,"normalizationField",void 0),e$2a([d$25({type:[y$O],json:{write:!0}})],p$1L.prototype,"stops",null),p$1L=i$1k=e$2a([n$2L("esri.renderers.visualVariables.OpacityVariable")],p$1L);const a$1o=p$1L;var p$1K;let a$1n=p$1K=class extends d$${constructor(_t){super(_t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(_t,Tt,Mt,Pt){if(Pt&&Pt.messages){const Ft=`visualVariables[${this.index}]`;Pt.messages.push(new s$2i("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:Ft+".valueExpressionTitle",context:Pt}))}}clone(){return new p$1K({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};e$2a([d$25({readOnly:!0})],a$1n.prototype,"cache",null),e$2a([d$25({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],a$1n.prototype,"axis",void 0),e$2a([d$25({type:["rotation"],json:{type:["rotationInfo"]}})],a$1n.prototype,"type",void 0),e$2a([d$25({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],a$1n.prototype,"rotationType",void 0),e$2a([d$25({type:String,json:{write:!0}})],a$1n.prototype,"valueExpressionTitle",void 0),e$2a([r$1C("web-scene","valueExpressionTitle")],a$1n.prototype,"writeValueExpressionTitleWebScene",null),a$1n=p$1K=e$2a([n$2L("esri.renderers.visualVariables.RotationVariable")],a$1n);const n$1m=a$1n;var p$1J;let i$1j=p$1J=class extends l$2v{constructor(_t){super(_t),this.label=null,this.size=null,this.value=null}clone(){return new p$1J({label:this.label,size:this.size,value:this.value})}};e$2a([d$25({type:String,json:{write:!0}})],i$1j.prototype,"label",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],i$1j.prototype,"size",void 0),e$2a([d$25({type:Number,json:{write:!0}})],i$1j.prototype,"value",void 0),i$1j=p$1J=e$2a([n$2L("esri.renderers.visualVariables.support.SizeStop")],i$1j);const l$1b=i$1j;var t$X;let i$1i=t$X=class extends i$1m{constructor(){super(...arguments),this.customValues=null}clone(){return new t$X({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};e$2a([d$25({type:[Number],json:{write:!0}})],i$1i.prototype,"customValues",void 0),i$1i=t$X=e$2a([n$2L("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],i$1i);const a$1m=i$1i;var n$1l,i$1h;function e$X(_t){return _t&&_t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function l$1a(_t){return _t!=null&&!isNaN(_t)&&isFinite(_t)}function t$W(_t){return _t.valueExpression?n$1l.Expression:_t.field&&typeof _t.field=="string"?n$1l.Field:n$1l.Unknown}function a$1l(_t,Tt){const Mt=Tt||t$W(_t),Pt=_t.valueUnit||"unknown";return Mt===n$1l.Unknown?i$1h.Constant:_t.stops?i$1h.Stops:_t.minSize!=null&&_t.maxSize!=null&&_t.minDataValue!=null&&_t.maxDataValue!=null?i$1h.ClampedLinear:Pt==="unknown"?_t.minSize!=null&&_t.minDataValue!=null?_t.minSize&&_t.minDataValue?i$1h.Proportional:i$1h.Additive:i$1h.Identity:i$1h.RealWorldSize}(function(_t){_t.Unknown="unknown",_t.Expression="expression",_t.Field="field"})(n$1l||(n$1l={})),function(_t){_t.Unknown="unknown",_t.Stops="stops",_t.ClampedLinear="clamped-linear",_t.Proportional="proportional",_t.Additive="additive",_t.Constant="constant",_t.Identity="identity",_t.RealWorldSize="real-world-size"}(i$1h||(i$1h={}));const m$_={inches:N$o(1,"meters","inches"),feet:N$o(1,"meters","feet"),"us-feet":N$o(1,"meters","us-feet"),yards:N$o(1,"meters","yards"),miles:N$o(1,"meters","miles"),"nautical-miles":N$o(1,"meters","nautical-miles"),millimeters:N$o(1,"meters","millimeters"),centimeters:N$o(1,"meters","centimeters"),decimeters:N$o(1,"meters","decimeters"),meters:N$o(1,"meters","meters"),kilometers:N$o(1,"meters","kilometers"),"decimal-degrees":1/G$f(1,"meters",s$22.radius)},f$O=s$2l.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),p$1I=new g$$,d$_=Math.PI,v$B=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function b$y(_t,Tt,Mt){const Pt="visualVariables"in _t&&_t.visualVariables?_t.visualVariables.find(Kt=>Kt.type==="color"):_t;if(!Pt)return;if(Pt.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void f$O.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const Ft=typeof Tt=="number",Dt=Ft?null:Tt,Nt=Dt&&Dt.attributes;let Vt=Ft?Tt:null;const zt=Pt.field,{ipData:Xt,hasExpression:Ht}=Pt.cache;let Wt=Pt.cache.compiledFunc;if(!zt&&!Ht){const Kt=Pt.stops;return Kt&&Kt[0]&&Kt[0].color}if(typeof Vt!="number")if(Ht){if(t$2e(Mt)||t$2e(Mt.arcade))return void f$O.error("Use of arcade expressions requires an arcade context");const Kt={viewingMode:Mt.viewingMode,scale:Mt.scale,spatialReference:Mt.spatialReference},er=Mt.arcade.arcadeUtils,Yt=er.getViewInfo(Kt),rr=er.createExecContext(Dt,Yt);if(!Wt){const ir=er.createSyntaxTree(Pt.valueExpression);Wt=er.createFunction(ir),Pt.cache.compiledFunc=Wt}Vt=er.executeFunction(Wt,rr)}else Nt&&(Vt=Nt[zt]);const Qt=Pt.normalizationField,Zt=Nt?parseFloat(Nt[Qt]):void 0;if(Vt!=null&&(!Qt||Ft||!isNaN(Zt)&&Zt!==0)){isNaN(Zt)||Ft||(Vt/=Zt);const Kt=R$c(Vt,Xt);if(Kt){const er=Kt[0],Yt=Kt[1],rr=er===Yt?Pt.stops[er].color:l$2f.blendColors(Pt.stops[er].color,Pt.stops[Yt].color,Kt[2],r$1P(Mt)?Mt.color:void 0);return new l$2f(rr)}}}function h$N(_t,Tt,Mt){const Pt="visualVariables"in _t&&_t.visualVariables?_t.visualVariables.find(Kt=>Kt.type==="opacity"):_t;if(!Pt)return;if(Pt.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void f$O.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const Ft=typeof Tt=="number",Dt=Ft?null:Tt,Nt=Dt&&Dt.attributes;let Vt=Ft?Tt:null;const zt=Pt.field,{ipData:Xt,hasExpression:Ht}=Pt.cache;let Wt=Pt.cache.compiledFunc;if(!zt&&!Ht){const Kt=Pt.stops;return Kt&&Kt[0]&&Kt[0].opacity}if(typeof Vt!="number")if(Ht){if(t$2e(Mt)||t$2e(Mt.arcade))return void f$O.error("Use of arcade expressions requires an arcade context");const Kt={viewingMode:Mt.viewingMode,scale:Mt.scale,spatialReference:Mt.spatialReference},er=Mt.arcade.arcadeUtils,Yt=er.getViewInfo(Kt),rr=er.createExecContext(Dt,Yt);if(!Wt){const ir=er.createSyntaxTree(Pt.valueExpression);Wt=er.createFunction(ir),Pt.cache.compiledFunc=Wt}Vt=er.executeFunction(Wt,rr)}else Nt&&(Vt=Nt[zt]);const Qt=Pt.normalizationField,Zt=Nt?parseFloat(Nt[Qt]):void 0;if(Vt!=null&&(!Qt||Ft||!isNaN(Zt)&&Zt!==0)){isNaN(Zt)||Ft||(Vt/=Zt);const Kt=R$c(Vt,Xt);if(Kt){const er=Kt[0],Yt=Kt[1];if(er===Yt)return Pt.stops[er].opacity;{const rr=Pt.stops[er].opacity;return rr+(Pt.stops[Yt].opacity-rr)*Kt[2]}}}}function m$Z(_t,Tt,Mt){const Pt="visualVariables"in _t&&_t.visualVariables?_t.visualVariables.find(Zt=>Zt.type==="rotation"):_t;if(!Pt)return;if(Pt.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void f$O.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const Ft=Pt.axis||"heading",Dt=Ft==="heading"&&Pt.rotationType==="arithmetic"?90:0,Nt=Ft==="heading"&&Pt.rotationType==="arithmetic"?-1:1,Vt=typeof Tt=="number"?null:Tt,zt=Vt&&Vt.attributes,Xt=Pt.field,{hasExpression:Ht}=Pt.cache;let Wt=Pt.cache.compiledFunc,Qt=0;if(!Xt&&!Ht)return Qt;if(Ht){if(t$2e(Mt)||t$2e(Mt.arcade))return void f$O.error("Use of arcade expressions requires an arcade context");const Zt={viewingMode:Mt.viewingMode,scale:Mt.scale,spatialReference:Mt.spatialReference},Kt=Mt.arcade.arcadeUtils,er=Kt.getViewInfo(Zt),Yt=Kt.createExecContext(Vt,er);if(!Wt){const rr=Kt.createSyntaxTree(Pt.valueExpression);Wt=Kt.createFunction(rr),Pt.cache.compiledFunc=Wt}Qt=Kt.executeFunction(Wt,Yt)}else zt&&(Qt=zt[Xt]||0);return Qt=typeof Qt!="number"||isNaN(Qt)?null:Dt+Nt*Qt,Qt}function V$h(_t,Tt,Mt){const Pt=typeof Tt=="number",Ft=Pt?null:Tt,Dt=Ft&&Ft.attributes;let Nt=Pt?Tt:null;const{isScaleDriven:Vt}=_t.cache;let zt=_t.cache.compiledFunc;if(Vt){const Ht=r$1P(Mt)?Mt.scale:void 0,Wt=r$1P(Mt)?Mt.view:void 0;Nt=Ht==null||Wt==="3d"?x$o(_t):Ht}else if(!Pt)switch(_t.inputValueType){case n$1l.Expression:{if(t$2e(Mt)||t$2e(Mt.arcade))return void f$O.error("Use of arcade expressions requires an arcade context");const Ht={viewingMode:Mt.viewingMode,scale:Mt.scale,spatialReference:Mt.spatialReference},Wt=Mt.arcade.arcadeUtils,Qt=Wt.getViewInfo(Ht),Zt=Wt.createExecContext(Ft,Qt);if(!zt){const Kt=Wt.createSyntaxTree(_t.valueExpression);zt=Wt.createFunction(Kt),_t.cache.compiledFunc=zt}Nt=Wt.executeFunction(zt,Zt);break}case n$1l.Field:Dt&&(Nt=Dt[_t.field]);break;case n$1l.Unknown:Nt=null}if(!l$1a(Nt))return null;if(Pt||!_t.normalizationField)return Nt;const Xt=Dt?parseFloat(Dt[_t.normalizationField]):null;return l$1a(Xt)&&Xt!==0?Nt/Xt:null}function x$o(_t){let Tt=null,Mt=null;const Pt=_t.stops;return Pt?(Tt=Pt[0].value,Mt=Pt[Pt.length-1].value):(Tt=_t.minDataValue||0,Mt=_t.maxDataValue||0),(Tt+Mt)/2}function y$N(_t,Tt,Mt){const Pt="visualVariables"in _t&&_t.visualVariables?_t.visualVariables.find(Dt=>Dt.type==="size"):_t;if(!Pt)return;if(Pt.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void f$O.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const Ft=M$l(V$h(Pt,Tt,Mt),Pt,Tt,Mt,Pt.cache.ipData);return Ft==null||isNaN(Ft)?0:Ft}function w$u(_t,Tt,Mt){return _t==null?null:e$X(_t)?y$N(_t,Tt,Mt):l$1a(_t)?_t:null}function g$C(_t,Tt,Mt){return l$1a(Mt)&&_t>Mt?Mt:l$1a(Tt)&&_t<Tt?Tt:_t}function z$f(_t,Tt,Mt,Pt){return _t+(w$u(Tt.minSize,Mt,Pt)||Tt.minDataValue)}function F$f(_t,Tt,Mt){const Pt=_t.stops;let Ft=Pt&&Pt.length&&Pt[0].size;return Ft==null&&(Ft=_t.minSize),w$u(Ft,Tt,Mt)}function S$k(_t,Tt,Mt,Pt){const Ft=(_t-Tt.minDataValue)/(Tt.maxDataValue-Tt.minDataValue),Dt=w$u(Tt.minSize,Mt,Pt),Nt=w$u(Tt.maxSize,Mt,Pt),Vt=r$1P(Pt)?Pt.shape:void 0;if(_t<=Tt.minDataValue)return Dt;if(_t>=Tt.maxDataValue)return Nt;if(Tt.scaleBy==="area"&&Vt){const zt=Vt==="circle",Xt=zt?d$_*(Dt/2)**2:Dt*Dt,Ht=Xt+Ft*((zt?d$_*(Nt/2)**2:Nt*Nt)-Xt);return zt?2*Math.sqrt(Ht/d$_):Math.sqrt(Ht)}return Dt+Ft*(Nt-Dt)}function E$o(_t,Tt,Mt,Pt){const Ft=r$1P(Pt)?Pt.shape:void 0,Dt=_t/Tt.minDataValue,Nt=w$u(Tt.minSize,Mt,Pt),Vt=w$u(Tt.maxSize,Mt,Pt);let zt=null;return zt=Ft==="circle"?2*Math.sqrt(Dt*(Nt/2)**2):Ft==="square"||Ft==="diamond"||Ft==="image"?Math.sqrt(Dt*Nt**2):Dt*Nt,g$C(zt,Nt,Vt)}function U$h(_t,Tt,Mt,Pt,Ft){const[Dt,Nt,Vt]=R$c(_t,Ft);if(Dt===Nt)return w$u(Tt.stops[Dt].size,Mt,Pt);{const zt=w$u(Tt.stops[Dt].size,Mt,Pt);return zt+(w$u(Tt.stops[Nt].size,Mt,Pt)-zt)*Vt}}function C$c(_t,Tt,Mt,Pt){const Ft=(r$1P(Pt)&&Pt.resolution?Pt.resolution:1)*m$_[Tt.valueUnit],Dt=w$u(Tt.minSize,Mt,Pt),Nt=w$u(Tt.maxSize,Mt,Pt),{valueRepresentation:Vt}=Tt;let zt=null;return zt=Vt==="area"?2*Math.sqrt(_t/d$_)/Ft:Vt==="radius"||Vt==="distance"?2*_t/Ft:_t/Ft,g$C(zt,Dt,Nt)}function D$f(_t){return _t}function M$l(_t,Tt,Mt,Pt,Ft){switch(Tt.transformationType){case i$1h.Additive:return z$f(_t,Tt,Mt,Pt);case i$1h.Constant:return F$f(Tt,Mt,Pt);case i$1h.ClampedLinear:return S$k(_t,Tt,Mt,Pt);case i$1h.Proportional:return E$o(_t,Tt,Mt,Pt);case i$1h.Stops:return U$h(_t,Tt,Mt,Pt,Ft);case i$1h.RealWorldSize:return C$c(_t,Tt,Mt,Pt);case i$1h.Identity:return _t;case i$1h.Unknown:return null}}function k$c(_t,Tt,Mt){const{isScaleDriven:Pt}=_t.cache;if(!(Pt&&Mt==="3d"||Tt))return null;const Ft={scale:Tt,view:Mt};let Dt=w$u(_t.minSize,p$1I,Ft),Nt=w$u(_t.maxSize,p$1I,Ft);if(Dt!=null||Nt!=null){if(Dt>Nt){const Vt=Nt;Nt=Dt,Dt=Vt}return{minSize:Dt,maxSize:Nt}}}function N$f(_t,Tt,Mt){if(!_t.visualVariables)return;const Pt=[],Ft=[],Dt=[],Nt=[],Vt=[];for(const zt of _t.visualVariables)switch(zt.type){case"color":Ft.push(zt);break;case"opacity":Dt.push(zt);break;case"rotation":Vt.push(zt);break;case"size":Nt.push(zt)}return Ft.forEach(zt=>{const Xt=b$y(zt,Tt,Mt);Pt.push({variable:zt,value:Xt})}),Dt.forEach(zt=>{const Xt=h$N(zt,Tt,Mt);Pt.push({variable:zt,value:Xt})}),Vt.forEach(zt=>{const Xt=m$Z(zt,Tt,Mt);Pt.push({variable:zt,value:Xt})}),Nt.forEach(zt=>{const Xt=y$N(zt,Tt,Mt);Pt.push({variable:zt,value:Xt})}),Pt.filter(zt=>zt.value!=null)}function R$c(_t,Tt){if(!Tt)return;let Mt=0,Pt=Tt.length-1;return Tt.some((Ft,Dt)=>_t<Ft?(Pt=Dt,!0):(Mt=Dt,!1)),[Mt,Pt,(_t-Tt[Mt])/(Tt[Pt]-Tt[Mt])]}function T$f(_t,Tt,Mt){const Pt=["proportional","proportional","proportional"];for(const Ft of _t){const Dt=Ft.useSymbolValue?"symbol-value":y$N(Ft,Tt,Mt);switch(Ft.axis){case"width":Pt[0]=Dt;break;case"depth":Pt[1]=Dt;break;case"height":Pt[2]=Dt;break;case"width-and-depth":Pt[0]=Dt,Pt[1]=Dt;break;case"all":case void 0:case null:Pt[0]=Dt,Pt[1]=Dt,Pt[2]=Dt;break;default:Ft.axis}}return Pt}const visualVariableUtils=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:T$f,getColor:b$y,getOpacity:h$N,getRotationAngle:m$Z,getSize:y$N,getSizeForValue:M$l,getSizeFromNumberOrVariable:w$u,getSizeRangeAtScale:k$c,getVisualVariableValues:N$f,viewScaleRE:v$B},Symbol.toStringTag,{value:"Module"}));var z$e;const v$A=s$2l.getLogger("esri.renderers.visualVariables.SizeVariable"),w$t=new s$1_({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),V$g=new s$1_({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function f$N(_t){if(_t!=null)return typeof _t=="string"||typeof _t=="number"?o$1v(_t):_t.type==="size"?e$X(_t)?_t:(delete(_t={..._t}).type,new b$x(_t)):void 0}function g$B(_t,Tt,Mt){if(typeof _t!="object")return _t;const Pt=new b$x;return Pt.read(_t,Mt),Pt}let b$x=z$e=class extends d$${constructor(_t){super(_t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:v$B.test(this.valueExpression)}}set expression(_t){v$A.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),_t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",_t)):this._set("expression",null)}set index(_t){e$X(this.maxSize)&&(this.maxSize.index=`visualVariables[${_t}].maxSize`),e$X(this.minSize)&&(this.minSize.index=`visualVariables[${_t}].minSize`),this._set("index",_t)}get inputValueType(){return t$W(this)}set maxDataValue(_t){_t&&this.stops&&(v$A.warn("cannot set maxDataValue when stops is not null."),_t=null),this._set("maxDataValue",_t)}set maxSize(_t){_t&&this.stops&&(v$A.warn("cannot set maxSize when stops is not null."),_t=null),this._set("maxSize",_t)}castMaxSize(_t){return f$N(_t)}readMaxSize(_t,Tt,Mt){return g$B(_t,Tt,Mt)}set minDataValue(_t){_t&&this.stops&&(v$A.warn("cannot set minDataValue when stops is not null."),_t=null),this._set("minDataValue",_t)}set minSize(_t){_t&&this.stops&&(v$A.warn("cannot set minSize when stops is not null."),_t=null),this._set("minSize",_t)}castMinSize(_t){return f$N(_t)}readMinSize(_t,Tt,Mt){return g$B(_t,Tt,Mt)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(_t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?_t&&Array.isArray(_t)&&(_t=_t.filter(Tt=>!!Tt)).sort((Tt,Mt)=>Tt.value-Mt.value):_t&&(v$A.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),_t=null),this._set("stops",_t)}get transformationType(){return a$1l(this,this.inputValueType)}readValueExpression(_t,Tt){return _t||Tt.expression&&"$view.scale"}writeValueExpressionWebScene(_t,Tt,Mt,Pt){if(_t==="$view.scale"){if(Pt&&Pt.messages){const Ft=this.index,Dt=typeof Ft=="string"?Ft:`visualVariables[${Ft}]`;Pt.messages.push(new s$2i("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:Dt+".valueExpression",context:Pt}))}}else Tt[Mt]=_t}readValueUnit(_t){return _t?V$g.read(_t):null}clone(){return new z$e({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:e$X(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:e$X(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(_t=>_t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===i$1h.ClampedLinear){const{minSize:_t,maxSize:Tt}=this;return this.minSize=Tt,this.maxSize=_t,this}if(this.transformationType===i$1h.Stops){const _t=this.stops,Tt=_t.map(Pt=>Pt.size).reverse(),Mt=_t.length;for(let Pt=0;Pt<Mt;Pt++)_t[Pt].size=Tt[Pt];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(_t=>_t.value||0)}};e$2a([d$25({readOnly:!0})],b$x.prototype,"cache",null),e$2a([d$25({type:w$t.apiValues,json:{type:w$t.jsonValues,origins:{"web-map":{read:!1}},read:w$t.read,write:w$t.write}})],b$x.prototype,"axis",void 0),e$2a([d$25({type:String,value:null,json:{read:!1}})],b$x.prototype,"expression",null),e$2a([d$25()],b$x.prototype,"index",null),e$2a([d$25({type:String,readOnly:!0})],b$x.prototype,"inputValueType",null),e$2a([d$25({type:a$1m,json:{write:!0}})],b$x.prototype,"legendOptions",void 0),e$2a([d$25({type:Number,value:null,json:{write:!0}})],b$x.prototype,"maxDataValue",null),e$2a([d$25({type:Number,value:null,json:{write:!0}})],b$x.prototype,"maxSize",null),e$2a([s$23("maxSize")],b$x.prototype,"castMaxSize",null),e$2a([o$1U("maxSize")],b$x.prototype,"readMaxSize",null),e$2a([d$25({type:Number,value:null,json:{write:!0}})],b$x.prototype,"minDataValue",null),e$2a([d$25({type:Number,value:null,json:{write:!0}})],b$x.prototype,"minSize",null),e$2a([s$23("minSize")],b$x.prototype,"castMinSize",null),e$2a([o$1U("minSize")],b$x.prototype,"readMinSize",null),e$2a([d$25({type:String,json:{write:!0}})],b$x.prototype,"normalizationField",void 0),e$2a([d$25({readOnly:!0})],b$x.prototype,"arcadeRequired",null),e$2a([d$25({type:String})],b$x.prototype,"scaleBy",void 0),e$2a([d$25({type:[l$1b],value:null,json:{write:!0}})],b$x.prototype,"stops",null),e$2a([d$25({type:["outline"],json:{write:!0}})],b$x.prototype,"target",void 0),e$2a([d$25({type:String,readOnly:!0})],b$x.prototype,"transformationType",null),e$2a([d$25({type:["size"],json:{type:["sizeInfo"]}})],b$x.prototype,"type",void 0),e$2a([d$25({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],b$x.prototype,"useSymbolValue",void 0),e$2a([d$25({type:String,json:{write:!0}})],b$x.prototype,"valueExpression",void 0),e$2a([o$1U("valueExpression",["valueExpression","expression"])],b$x.prototype,"readValueExpression",null),e$2a([r$1C("web-scene","valueExpression")],b$x.prototype,"writeValueExpressionWebScene",null),e$2a([d$25({type:["radius","diameter","area","width","distance"],json:{write:!0}})],b$x.prototype,"valueRepresentation",void 0),e$2a([d$25({type:V$g.apiValues,json:{write:V$g.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],b$x.prototype,"valueUnit",void 0),e$2a([o$1U("valueUnit")],b$x.prototype,"readValueUnit",null),b$x=z$e=e$2a([n$2L("esri.renderers.visualVariables.SizeVariable")],b$x);const j$u=b$x,u$Z=s$2l.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),b$w={color:a$1p,size:j$u,opacity:a$1o,rotation:n$1m},V$f=new s$1_({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),h$M=/^\[([^\]]+)\]$/i;let m$Y=class extends y$1E{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(_t){if(this._resetVariables(),(_t=_t&&_t.filter(Tt=>!!Tt))&&_t.length){for(const Tt of _t)switch(Tt.type){case"color":this.colorVariables.push(Tt);break;case"opacity":this.opacityVariables.push(Tt);break;case"rotation":this.rotationVariables.push(Tt);break;case"size":this.sizeVariables.push(Tt)}this.sizeVariables.length&&this.sizeVariables.some(Tt=>!!Tt.target)&&_t.sort((Tt,Mt)=>{let Pt=null;return Pt=Tt.target===Mt.target?0:Tt.target?1:-1,Pt});for(let Tt=0;Tt<_t.length;Tt++)_t[Tt].index=Tt;this._set("visualVariables",_t)}else this._set("visualVariables",_t)}readVariables(_t,Tt,Mt){const{rotationExpression:Pt,rotationType:Ft}=Tt,Dt=Pt&&Pt.match(h$M),Nt=Dt&&Dt[1];if(Nt&&(_t||(_t=[]),_t.push({type:"rotationInfo",rotationType:Ft,field:Nt})),_t)return _t.map(Vt=>{const zt=V$f.read(Vt.type),Xt=b$w[zt];Xt||(u$Z.warn(`Unknown variable type: ${zt}`),Mt&&Mt.messages&&Mt.messages.push(new t$1W("visual-variable:unsupported",`visualVariable of type '${zt}' is not supported`,{definition:Vt,context:Mt})));const Ht=new Xt;return Ht.read(Vt,Mt),Ht})}writeVariables(_t,Tt){const Mt=[];for(const Pt of _t){const Ft=Pt.toJSON(Tt);Ft&&Mt.push(Ft)}return Mt}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};e$2a([d$25()],m$Y.prototype,"visualVariables",null),m$Y=e$2a([n$2L("esri.renderers.visualVariables.VisualVariableFactory")],m$Y);const f$M=m$Y,b$v={base:d$$,key:"type",typeMap:{opacity:a$1o,color:a$1p,rotation:n$1m,size:j$u}},v$z=_t=>{let Tt=class extends _t{constructor(){super(...arguments),this._vvFactory=new f$M}set visualVariables(Mt){this._vvFactory.visualVariables=Mt,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(Mt,Pt,Ft){return this._vvFactory.readVariables(Mt,Pt,Ft)}writeVisualVariables(Mt,Pt,Ft,Dt){Pt[Ft]=this._vvFactory.writeVariables(Mt,Dt)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const Mt of this.visualVariables)if(Mt.arcadeRequired)return!0;return!1}hasVisualVariables(Mt,Pt){return Mt?this.getVisualVariablesForType(Mt,Pt).length>0:this.getVisualVariablesForType("size",Pt).length>0||this.getVisualVariablesForType("color",Pt).length>0||this.getVisualVariablesForType("opacity",Pt).length>0||this.getVisualVariablesForType("rotation",Pt).length>0}getVisualVariablesForType(Mt,Pt){const Ft=this.visualVariables;return Ft?Ft.filter(Dt=>Dt.type===Mt&&(typeof Pt=="string"?Dt.target===Pt:Pt!==!1||!Dt.target)):[]}async collectVVRequiredFields(Mt,Pt){let Ft=[];this.visualVariables&&(Ft=Ft.concat(this.visualVariables));for(const Dt of Ft)Dt&&(Dt.field&&F$t(Mt,Pt,Dt.field),Dt.normalizationField&&F$t(Mt,Pt,Dt.normalizationField),Dt.valueExpression&&await b$11(Mt,Pt,Dt.valueExpression))}};return e$2a([d$25({types:[b$v],value:null,json:{write:!0}})],Tt.prototype,"visualVariables",null),e$2a([o$1U("visualVariables",["visualVariables","rotationType","rotationExpression"])],Tt.prototype,"readVisualVariables",null),e$2a([r$1C("visualVariables")],Tt.prototype,"writeVisualVariables",null),Tt=e$2a([n$2L("esri.renderers.mixins.VisualVariablesMixin")],Tt),Tt},p$1H={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function a$1k(_t,Tt=p$1H){var Vt,zt;if(!_t)return{symbol:null};const{retainId:Mt=p$1H.retainId,ignoreDrivers:Pt=p$1H.ignoreDrivers,hasLabelingContext:Ft=p$1H.hasLabelingContext,retainCIM:Dt=p$1H.retainCIM}=Tt;let Nt;if(c$2h(_t)||_t instanceof b$W)Nt=_t.clone();else if(_t.type==="cim"){const Xt=(zt=(Vt=_t.data)==null?void 0:Vt.symbol)==null?void 0:zt.type;if(Xt!=="CIMPointSymbol")return{error:new s$2i("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${Xt||"unknown"}' is unsupported in 3D`,{symbol:_t})};Nt=Dt?_t.clone():h$1e.fromCIMSymbol(_t)}else if(_t instanceof m$1F)Nt=b$Y.fromSimpleLineSymbol(_t);else if(_t instanceof y$1g)Nt=h$1e.fromSimpleMarkerSymbol(_t);else if(_t instanceof n$27)Nt=h$1e.fromPictureMarkerSymbol(_t);else if(_t instanceof S$A)Nt=S$B.fromSimpleFillSymbol(_t);else{if(!(_t instanceof m$1s))return{error:new s$2i("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${_t.type||_t.declaredClass}' is unsupported in 3D`,{symbol:_t})};Nt=Ft?b$Z.fromTextSymbol(_t):h$1e.fromTextSymbol(_t)}if(Mt&&Nt.type!=="cim"&&(Nt.id=_t.id),Pt&&c$2h(Nt))for(let Xt=0;Xt<Nt.symbolLayers.length;++Xt)Nt.symbolLayers.getItemAt(Xt)._ignoreDrivers=!0;return{symbol:Nt}}const l$19=["building-scene","integrated-mesh","point-cloud","scene"];function m$X(_t,Tt,Mt,Pt){const Ft=a$1j(_t,{},{context:Pt,isLabelSymbol:!1});r$1P(Ft)&&(Tt[Mt]=Ft)}function b$u(_t,Tt,Mt,Pt){const Ft=a$1j(_t,{},{context:Pt,isLabelSymbol:!0});r$1P(Ft)&&(Tt[Mt]=Ft)}function c$1A(_t){return _t instanceof A$p||_t instanceof b$W}function a$1j(_t,Tt,Mt){var Vt;if(t$2e(_t))return null;const{context:Pt,isLabelSymbol:Ft}=Mt,Dt=Pt==null?void 0:Pt.origin,Nt=Pt==null?void 0:Pt.messages;if(Dt==="web-scene"&&!c$1A(_t)){const zt=a$1k(_t,{retainCIM:!0,hasLabelingContext:Ft});return r$1P(zt.symbol)?zt.symbol.write(Tt,Pt):(Nt==null||Nt.push(new s$2i("symbol:unsupported",`Symbols of type '${_t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:_t,context:Pt,error:zt.error})),null)}return(Dt==="web-map"||Dt==="portal-item"&&!l$19.includes((Vt=Pt==null?void 0:Pt.layer)==null?void 0:Vt.type))&&c$1A(_t)?(Nt==null||Nt.push(new s$2i("symbol:unsupported",`Symbols of type '${_t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:_t,context:Pt})),null):_t.write(Tt,Pt)}function p$1G(_t,Tt){return k$r(_t,null,Tt)}const l$18={types:M$C,json:{write:{writer:m$X},origins:{"web-scene":{types:h$1b,write:{writer:m$X},read:{reader:s$2d({types:h$1b})}}}}},y$M={types:{base:a$2f,key:"type",typeMap:{"simple-fill":j$L.typeMap["simple-fill"],"picture-fill":j$L.typeMap["picture-fill"],"polygon-3d":j$L.typeMap["polygon-3d"]}},json:{write:{writer:m$X},origins:{"web-scene":{type:S$B,write:{writer:m$X}}}}};var i$1g;let l$17=i$1g=class extends l$2v{constructor(_t){super(_t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new i$1g({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const _t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${_t}`}};e$2a([d$25({type:String,json:{write:!0}})],l$17.prototype,"description",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$17.prototype,"label",void 0),e$2a([d$25({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],l$17.prototype,"minValue",void 0),e$2a([d$25({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],l$17.prototype,"maxValue",void 0),e$2a([d$25(l$18)],l$17.prototype,"symbol",void 0),l$17=i$1g=e$2a([n$2L("esri.renderers.support.ClassBreakInfo")],l$17);const a$1i=l$17;var F$e;const E$n=s$2l.getLogger("esri.renderers.ClassBreaksRenderer"),j$t="log",w$s="percent-of-total",z$d="field",T$e=new s$1_({esriNormalizeByLog:j$t,esriNormalizeByPercentOfTotal:w$s,esriNormalizeByField:z$d}),_$h=b$1b(a$1i);let C$b=F$e=class extends v$z(p$1P){constructor(_t){super(_t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(_t,Tt,Mt){if(!Array.isArray(_t))return;let Pt=Tt.minValue;return _t.map(Ft=>{const Dt=new a$1i;return Dt.read(Ft,Mt),Dt.minValue==null&&(Dt.minValue=Pt),Dt.maxValue==null&&(Dt.maxValue=Dt.minValue),Pt=Dt.maxValue,Dt})}writeClassBreakInfos(_t,Tt,Mt,Pt){const Ft=_t.map(Dt=>Dt.write({},Pt));this._areClassBreaksConsecutive()&&Ft.forEach(Dt=>delete Dt.classMinValue),Tt[Mt]=Ft}castField(_t){return _t==null?_t:typeof _t=="function"?(E$n.error(".field: field must be a string value"),null):u$2b(_t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let _t=this._get("normalizationType");const Tt=!!this.normalizationField,Mt=this.normalizationTotal!=null;return Tt||Mt?(_t=Tt&&z$d||Mt&&w$s||null,Tt&&Mt&&E$n.warn("warning: both normalizationField and normalizationTotal are set!")):_t!==z$d&&_t!==w$s||(_t=null),_t}set normalizationType(_t){this._set("normalizationType",_t)}addClassBreakInfo(_t,Tt,Mt){let Pt=null;Pt=typeof _t=="number"?new a$1i({minValue:_t,maxValue:Tt,symbol:g$10(Mt)}):_$h(m$2e(_t)),this.classBreakInfos.push(Pt),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(_t,Tt){const Mt=this.classBreakInfos.length;for(let Pt=0;Pt<Mt;Pt++){const Ft=[this.classBreakInfos[Pt].minValue,this.classBreakInfos[Pt].maxValue];if(Ft[0]===_t&&Ft[1]===Tt){this.classBreakInfos.splice(Pt,1);break}}}getBreakIndex(_t,Tt){return this.valueExpression&&(t$2e(Tt)||t$2e(Tt.arcade))&&E$n.warn(""),this.valueExpression?this._getBreakIndexForExpression(_t,Tt):this._getBreakIndexForField(_t)}async getClassBreakInfo(_t,Tt){let Mt=Tt;this.valueExpression&&(t$2e(Tt)||t$2e(Tt.arcade))&&(Mt={...Mt,arcade:await a$2t()});const Pt=this.getBreakIndex(_t,Mt);return Pt!==-1?this.classBreakInfos[Pt]:null}getSymbol(_t,Tt){if(this.valueExpression&&(t$2e(Tt)||t$2e(Tt.arcade)))return void E$n.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const Mt=this.getBreakIndex(_t,Tt);return Mt>-1?this.classBreakInfos[Mt].symbol:this.defaultSymbol}async getSymbolAsync(_t,Tt){let Mt=Tt;if(this.valueExpression&&(t$2e(Tt)||t$2e(Tt.arcade))){const Ft=await a$2t(),{arcadeUtils:Dt}=Ft;Dt.hasGeometryOperations(this.valueExpression)&&await Dt.enableGeometryOperations(),Mt={...Mt,arcade:Ft}}const Pt=this.getBreakIndex(_t,Mt);return Pt>-1?this.classBreakInfos[Pt].symbol:this.defaultSymbol}getSymbols(){const _t=[];return this.classBreakInfos.forEach(Tt=>{Tt.symbol&&_t.push(Tt.symbol)}),this.defaultSymbol&&_t.push(this.defaultSymbol),_t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((_t,Tt)=>_t+Tt.getAttributeHash(),"")}getMeshHash(){const _t=JSON.stringify(this.backgroundFillSymbol),Tt=JSON.stringify(this.defaultSymbol),Mt=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${_t}.${Tt}.${this.classBreakInfos.reduce((Pt,Ft)=>Pt+Ft.getMeshHash(),"")}.${Mt}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new F$e({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:m$2e(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:m$2e(this.visualVariables),legendOptions:m$2e(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(_t,Tt){const Mt=[this.collectVVRequiredFields(_t,Tt),this.collectSymbolFields(_t,Tt)];await Promise.all(Mt)}async collectSymbolFields(_t,Tt){const Mt=[...this.getSymbols().map(Pt=>Pt.collectRequiredFields(_t,Tt)),b$11(_t,Tt,this.valueExpression)];F$t(_t,Tt,this.field),F$t(_t,Tt,this.normalizationField),await Promise.all(Mt)}_getBreakIndexForExpression(_t,Tt){const{viewingMode:Mt,scale:Pt,spatialReference:Ft,arcade:Dt}=c$3r(Tt,{});let Nt=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const Vt=Dt.arcadeUtils;if(!Nt){const Xt=Vt.createSyntaxTree(this.valueExpression);Nt=Vt.createFunction(Xt),this._compiledValueExpression.compiledFunction=Nt}this._compiledValueExpression.valueExpression=this.valueExpression;const zt=Vt.executeFunction(Nt,Vt.createExecContext(_t,Vt.getViewInfo({viewingMode:Mt,scale:Pt,spatialReference:Ft})));return this._getBreakIndexfromInfos(zt)}_getBreakIndexForField(_t){const Tt=this.field,Mt=_t.attributes,Pt=this.normalizationType;let Ft=parseFloat(Mt[Tt]);if(Pt){const Dt=this.normalizationTotal,Nt=parseFloat(Mt[this.normalizationField]);if(Pt===j$t)Ft=Math.log(Ft)*Math.LOG10E;else if(Pt!==w$s||isNaN(Dt)){if(Pt===z$d&&!isNaN(Nt)){if(isNaN(Ft)||isNaN(Nt))return-1;Ft/=Nt}}else Ft=Ft/Dt*100}return this._getBreakIndexfromInfos(Ft)}_getBreakIndexfromInfos(_t){const Tt=this.isMaxInclusive;if(_t!=null&&typeof _t=="number"&&!isNaN(_t))for(let Mt=0;Mt<this.classBreakInfos.length;Mt++){const Pt=[this.classBreakInfos[Mt].minValue,this.classBreakInfos[Mt].maxValue];if(Pt[0]<=_t&&(Tt?_t<=Pt[1]:_t<Pt[1]))return Mt}return-1}_areClassBreaksConsecutive(){const _t=this.classBreakInfos,Tt=_t.length;for(let Mt=1;Mt<Tt;Mt++)if(_t[Mt-1].maxValue!==_t[Mt].minValue)return!1;return!0}};e$2a([d$25(y$M)],C$b.prototype,"backgroundFillSymbol",void 0),e$2a([d$25({type:[a$1i]})],C$b.prototype,"classBreakInfos",void 0),e$2a([o$1U("classBreakInfos")],C$b.prototype,"readClassBreakInfos",null),e$2a([r$1C("classBreakInfos")],C$b.prototype,"writeClassBreakInfos",null),e$2a([d$25({type:String,json:{write:!0}})],C$b.prototype,"defaultLabel",void 0),e$2a([d$25(l$18)],C$b.prototype,"defaultSymbol",void 0),e$2a([d$25({type:String,json:{write:!0}})],C$b.prototype,"field",void 0),e$2a([s$23("field")],C$b.prototype,"castField",null),e$2a([d$25({type:Boolean})],C$b.prototype,"isMaxInclusive",void 0),e$2a([d$25({type:p$1O,json:{write:!0}})],C$b.prototype,"legendOptions",void 0),e$2a([d$25({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],C$b.prototype,"minValue",null),e$2a([d$25({type:String,json:{write:!0}})],C$b.prototype,"normalizationField",void 0),e$2a([d$25({type:Number,cast:_t=>a$2Z(_t),json:{write:!0}})],C$b.prototype,"normalizationTotal",void 0),e$2a([d$25({type:T$e.apiValues,value:null,json:{type:T$e.jsonValues,read:T$e.read,write:T$e.write}})],C$b.prototype,"normalizationType",null),e$2a([r$1r({classBreaks:"class-breaks"})],C$b.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0}})],C$b.prototype,"valueExpression",void 0),e$2a([d$25({type:String,json:{write:!0}})],C$b.prototype,"valueExpressionTitle",void 0),C$b=F$e=e$2a([n$2L("esri.renderers.ClassBreaksRenderer")],C$b);const N$e=C$b;class e$W{constructor(Tt,Mt){this._storage=new h$Z,this._storage.maxSize=Tt,Mt&&this._storage.registerRemoveFunc("",Mt)}put(Tt,Mt,Pt){this._storage.put(Tt,Mt,Pt,1)}pop(Tt){return this._storage.pop(Tt)}get(Tt){return this._storage.get(Tt)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(Tt){this._storage.maxSize=Tt}}const f$L=s$2l.getLogger("esri.renderers.support.DictionaryLoader"),h$L={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};class y$L{constructor(Tt,Mt,Pt){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new e$W(100),this.url=Tt,this.config=Mt,this.fieldMap=Pt}getSymbolFields(){return this._symbolFields}async getSymbolAsync(Tt,Mt){let Pt;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(Mt));try{Pt=await this._dictionaryPromise}catch(Zt){if(g$1l(Zt))return this._dictionaryPromise=null,null}const Ft={};if(this.fieldMap)for(const Zt of this._symbolFields){const Kt=this.fieldMap[Zt];if(Kt&&Tt.attributes[Kt]!=null){const er=""+Tt.attributes[Kt];Ft[Zt]=er}else Ft[Zt]=""}const Dt=Pt(Ft,Mt);if(!Dt||typeof Dt!="string")return null;const Nt=c$3m(Dt).toString(),Vt=this._symbolCache.get(Nt);if(Vt)return Vt.catch(()=>{this._symbolCache.pop(Nt)}),Vt;const zt=Dt.split(";"),Xt=[],Ht=[];for(const Zt of zt)if(Zt)if(Zt.includes("po:")){const Kt=Zt.substr(3).split("|");if(Kt.length===3){const er=Kt[0],Yt=Kt[1];let rr=Kt[2];if(Yt==="DashTemplate")rr=rr.split(" ").map(ir=>Number(ir));else if(Yt==="Color"){const ir=new l$2f(rr).toRgba();rr=[ir[0],ir[1],ir[2],255*ir[3]]}else rr=Number(rr);Ht.push({primitiveName:er,propertyName:Yt,value:rr})}}else if(Zt.includes("|")){for(const Kt of Zt.split("|"))if(this._itemNames.has(Kt)){Xt.push(Kt);break}}else this._itemNames.has(Zt)&&Xt.push(Zt);const Wt=!r$1P(Tt.geometry)||!Tt.geometry.hasZ&&Tt.geometry.type==="point",Qt=this._cimPartsToCIMSymbol(Xt,Ht,Wt,Mt);return this._symbolCache.put(Nt,Qt,1),Qt}async fetchResources(Tt){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void f$L.error("no valid URL!");const Mt=U$v(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:r$1P(Tt)?Tt.signal:null}),[{data:Pt}]=await Promise.all([Mt,a$2t()]);if(!Pt)throw this._dictionaryPromise=null,new s$2i("esri.renderers.DictionaryRenderer","Bad dictionary data!");const Ft=Pt.expression,Dt=Pt.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+Pt.cimRefTemplateUrl,this._itemNames=new Set(Pt.itemsNames),this._symbolFields=Dt.symbol;const Nt={};if(this.config){const zt=this.config;for(const Xt in zt)Nt[Xt]=zt[Xt]}if(Dt.configuration)for(const zt of Dt.configuration)Nt.hasOwnProperty(zt.name)||(Nt[zt.name]=zt.value);const Vt=[];if(r$1P(Tt)&&Tt.fields&&this.fieldMap)for(const zt of this._symbolFields){const Xt=this.fieldMap[zt],Ht=Tt.fields.filter(Wt=>Wt.name===Xt);Ht.length>0&&Vt.push({...Ht[0],name:zt})}return this._dictionaryPromise=n$2r(Ft,r$1P(Tt)?Tt.spatialReference:null,Vt,Nt).then(zt=>{const Xt={scale:0};return(Ht,Wt)=>{const Qt=zt.repurposeFeature({geometry:null,attributes:Ht});return Xt.scale=r$1P(Wt)?Wt.scale:void 0,zt.evaluate({$feature:Qt,$view:Xt})}}).catch(zt=>(f$L.error("Creating dictinoary expression failed:",zt),null)),this._dictionaryPromise}async _cimPartsToCIMSymbol(Tt,Mt,Pt,Ft){const Dt=new Array(Tt.length);for(let zt=0;zt<Tt.length;zt++)Dt[zt]=this._getSymbolPart(Tt[zt],Ft);const Nt=await Promise.all(Dt),Vt=this.fieldMap;for(const zt of Nt)u$Y(zt,Vt);return new d$1H({data:this._combineSymbolParts(Nt,Mt,Pt)})}async _getSymbolPart(Tt,Mt){if(this._ongoingRequests.has(Tt))return this._ongoingRequests.get(Tt).then(Dt=>Dt.data);const Pt=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,Tt),Ft=U$v(Pt,{responseType:"json",query:{f:"json"},...Mt});this._ongoingRequests.set(Tt,Ft);try{return(await Ft).data}catch(Dt){throw this._ongoingRequests.delete(Tt),Dt}}_combineSymbolParts(Tt,Mt,Pt){if(!Tt||Tt.length===0)return null;const Ft={...Tt[0]};if(Tt.length>1){Ft.symbolLayers=[];for(const Dt of Tt){const Nt=Dt;Ft.symbolLayers.unshift(...Nt.symbolLayers)}}return Pt&&(Ft.callout=h$L),{type:"CIMSymbolReference",symbol:Ft,primitiveOverrides:Mt}}}function u$Y(_t,Tt){if(!_t)return;const Mt=_t.symbolLayers;if(!Mt)return;let Pt=Mt.length;for(;Pt--;){const Ft=Mt[Pt];Ft&&Ft.enable!==!1&&Ft.type==="CIMVectorMarker"&&p$1F(Ft,Tt)}}function p$1F(_t,Tt){const Mt=_t.markerGraphics;if(Mt)for(const Pt of Mt){if(!Pt)continue;const Ft=Pt.symbol;if(Ft)switch(Ft.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":u$Y(Ft,Tt);break;case"CIMTextSymbol":Ft.fieldMap=Tt}}}const DictionaryLoader=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:y$L},Symbol.toStringTag,{value:"Module"}));var p$1E;let c$1z=p$1E=class extends v$z(p$1P){constructor(_t){super(_t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new y$L(this.url,this.config,this.fieldMap)}writeData(_t,Tt){_t&&(Tt.scalingExpressionInfo={expression:_t,returnType:"number"})}writeVisualVariables(_t,Tt,Mt,Pt){Pt!=null&&Pt.origin||super.writeVisualVariables(_t,Tt,Mt,Pt)}clone(){return new p$1E({config:m$2e(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:m$2e(this.fieldMap),url:m$2e(this.url),visualVariables:m$2e(this.visualVariables)})}async getSymbolAsync(_t,Tt){return this._loader.getSymbolAsync(_t,Tt)}async collectRequiredFields(_t,Tt){await this.collectVVRequiredFields(_t,Tt),this.scaleExpression&&await b$11(_t,Tt,this.scaleExpression);for(const Mt in this.fieldMap){const Pt=this.fieldMap[Mt];Tt.has(Pt)&&_t.add(Pt)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((_t,Tt)=>_t+Tt.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};e$2a([d$25({type:y$L})],c$1z.prototype,"_loader",null),e$2a([d$25({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],c$1z.prototype,"config",void 0),e$2a([d$25({type:Object,json:{write:!0}})],c$1z.prototype,"fieldMap",void 0),e$2a([d$25({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],c$1z.prototype,"scaleExpression",void 0),e$2a([r$1C("scaleExpression")],c$1z.prototype,"writeData",null),e$2a([d$25({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(_t){return{enabled:!!_t&&!!this.scaleExpression}}}}})],c$1z.prototype,"scaleExpressionTitle",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$1z.prototype,"url",void 0),e$2a([r$1C("visualVariables")],c$1z.prototype,"writeVisualVariables",null),c$1z=p$1E=e$2a([n$2L("esri.renderers.DictionaryRenderer")],c$1z);const u$X=c$1z;var n$1k;const u$W=s$2l.getLogger("esri.renderers.support.AttributeColorInfo");let c$1y=n$1k=class extends l$2v{constructor(_t){super(_t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(_t){return _t==null?_t:typeof _t=="function"?(u$W.error(".field: field must be a string value"),null):u$2b(_t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new n$1k({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};e$2a([d$25({type:l$2f,json:{type:[Number],write:!0}})],c$1y.prototype,"color",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$1y.prototype,"field",void 0),e$2a([s$23("field")],c$1y.prototype,"castField",null),e$2a([d$25({type:String,json:{write:!0}})],c$1y.prototype,"label",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$1y.prototype,"valueExpression",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$1y.prototype,"valueExpressionTitle",void 0),c$1y=n$1k=e$2a([n$2L("esri.renderers.support.AttributeColorInfo")],c$1y);const a$1h=c$1y;var e$V;let p$1D=e$V=class extends l$2v{constructor(){super(...arguments),this.unit=null}clone(){return new e$V({unit:this.unit})}};e$2a([d$25({type:String,json:{write:!0}})],p$1D.prototype,"unit",void 0),p$1D=e$V=e$2a([n$2L("esri.renderers.support.DotDensityLegendOptions")],p$1D);const c$1x=p$1D;var m$W;let y$K=m$W=class extends v$z(p$1P){constructor(_t){super(_t),this.attributes=null,this.backgroundColor=new l$2f([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new m$1F,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(_t){if(this.referenceScale==null)return this.dotValue;const Tt=_t/this.referenceScale*this.dotValue;return Tt<1?1:Tt}getSymbol(){return new S$A({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((_t,Tt)=>_t+Tt.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new m$W({attributes:m$2e(this.attributes),backgroundColor:m$2e(this.backgroundColor),dotBlendingEnabled:m$2e(this.dotBlendingEnabled),dotShape:m$2e(this.dotShape),dotSize:m$2e(this.dotSize),dotValue:m$2e(this.dotValue),legendOptions:m$2e(this.legendOptions),outline:m$2e(this.outline),referenceScale:m$2e(this.referenceScale),visualVariables:m$2e(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(_t=>_t.field||_t.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(_t,Tt){await this.collectVVRequiredFields(_t,Tt);for(const Mt of this.attributes)Mt.valueExpression&&await b$11(_t,Tt,Mt.valueExpression),Mt.field&&_t.add(Mt.field)}};e$2a([d$25({type:[a$1h],json:{write:!0}})],y$K.prototype,"attributes",void 0),e$2a([d$25({type:l$2f,json:{write:!0}})],y$K.prototype,"backgroundColor",void 0),e$2a([d$25({type:Boolean}),o$1d("dotBlendingEnabled")],y$K.prototype,"blendDots",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],y$K.prototype,"dotBlendingEnabled",void 0),e$2a([d$25({type:String,json:{write:!1}})],y$K.prototype,"dotShape",void 0),e$2a([d$25({type:Number,json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1}}}})],y$K.prototype,"dotSize",void 0),e$2a([d$25({type:c$1x,json:{write:!0}})],y$K.prototype,"legendOptions",void 0),e$2a([d$25({type:m$1F,json:{default:null,write:!0}})],y$K.prototype,"outline",void 0),e$2a([d$25({type:Number,json:{write:!0}})],y$K.prototype,"dotValue",void 0),e$2a([d$25({type:Number}),o$1d("dotValue")],y$K.prototype,"referenceDotValue",void 0),e$2a([d$25({type:Number,json:{write:!0}})],y$K.prototype,"referenceScale",void 0),e$2a([d$25({type:Number,json:{write:!0}})],y$K.prototype,"seed",void 0),e$2a([r$1r({dotDensity:"dot-density"})],y$K.prototype,"type",void 0),y$K=m$W=e$2a([n$2L("esri.renderers.DotDensityRenderer")],y$K);const b$t=y$K;let p$1C=class extends l$1N(l$2v){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};e$2a([d$25({type:String,json:{write:!0}})],p$1C.prototype,"minLabel",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1C.prototype,"maxLabel",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1C.prototype,"title",void 0),p$1C=e$2a([n$2L("esri.renderers.support.HeatmapLegendOptions")],p$1C);function n$1j(){return[0,0,0,0]}function t$V(_t){return[_t[0],_t[1],_t[2],_t[3]]}function r$O(_t,Tt,Mt,Pt){return[_t,Tt,Mt,Pt]}function e$U(_t){const Tt=n$1j(),Mt=Math.min(4,_t.length);for(let Pt=0;Pt<Mt;++Pt)Tt[Pt]=_t[Pt];return Tt}function u$V(_t,Tt){return new Float64Array(_t,Tt,4)}function a$1g(){return n$1j()}function o$S(){return r$O(1,1,1,1)}function s$11(){return r$O(1,0,0,0)}function i$1f(){return r$O(0,1,0,0)}function c$1w(){return r$O(0,0,1,0)}function f$K(){return r$O(0,0,0,1)}const l$16=a$1g(),_$g=o$S(),N$d=s$11(),O$f=i$1f(),T$d=c$1w(),U$g=f$K();Object.freeze(Object.defineProperty({__proto__:null,create:n$1j,clone:t$V,fromValues:r$O,fromArray:e$U,createView:u$V,zeros:a$1g,ones:o$S,unitX:s$11,unitY:i$1f,unitZ:c$1w,unitW:f$K,ZEROS:l$16,ONES:_$g,UNIT_X:N$d,UNIT_Y:O$f,UNIT_Z:T$d,UNIT_W:U$g},Symbol.toStringTag,{value:"Module"}));const a$1f=2.4;function i$1e(_t){return e$1y(_t*a$1f)}function f$J(_t){return u$1E(_t)/a$1f}function c$1v(_t,Tt,Mt,Pt){let{color:Ft,ratio:Dt}=Tt,{color:Nt,ratio:Vt}=Mt;Vt===Dt&&(Vt===1?Dt-=1e-6:Vt+=1e-6);const zt=o$1H((Pt-Dt)/(Vt-Dt),0,1);j$W(_t,Ft.toArray(),Nt.toArray(),zt)}function s$10(_t){const Mt=new Uint8ClampedArray(2048);if(_t=_t.filter(({ratio:Vt})=>Vt>=0&&Vt<=1).sort((Vt,zt)=>Vt.ratio-zt.ratio).map(({color:Vt,ratio:zt})=>({color:Vt,ratio:Math.max(zt,.001)})),_t.length<1)return Mt;let Pt=_t[0],Ft=_t[0],Dt=1;const Nt=n$1j();for(let Vt=0;Vt<512;Vt++){const zt=(Vt+.5)/512;for(;zt>Ft.ratio&&Dt<_t.length;)Pt=Ft,Ft=_t[Dt++];c$1v(Nt,Pt,Ft,zt),Mt.set(Nt,4*Vt)}return Mt}function l$15(_t,Tt,Mt,Pt){const{radius:Ft,fieldOffset:Dt,field:Nt}=Tt,Vt=Math.round(u$1E(Ft)),zt=new Float64Array(Mt*Pt);let Xt,Ht=Number.NEGATIVE_INFINITY;const Wt=x$n(Nt,Dt),Qt=new Set;for(const Zt of _t){const Kt=Zt.getCursor();for(;Kt.next();){const er=Kt.getObjectId();if(Qt.has(er))continue;Qt.add(er);const Yt=Kt.readLegacyPointGeometry(),rr=128;if(Yt.x<-rr||Yt.x>=Mt+rr||Yt.y<-rr||Yt.y>Pt+rr)continue;const ir=+Wt(Kt),nr=Math.max(0,Math.round(Yt.x)-Vt),ar=Math.max(0,Math.round(Yt.y)-Vt),or=Math.min(Pt,Math.round(Yt.y)+Vt),ur=Math.min(Mt,Math.round(Yt.x)+Vt);for(let dr=ar;dr<or;dr++)for(let hr=nr;hr<ur;hr++){const gr=dr*Mt+hr,pr=y$J(Yt.x-hr,Yt.y-dr,Vt);Xt=zt[gr]+=pr*ir,Xt>Ht&&(Ht=Xt)}}}return{matrix:zt.buffer,max:Ht}}function m$V(_t,Tt,Mt,Pt,Ft,Dt){_t.canvas.width=_t.canvas.height=Tt,_t.clearRect(0,0,Tt,Tt);const Nt=_t.getImageData(0,0,Tt,Tt);Mt&&Pt&&Nt.data.set(new Uint8ClampedArray(h$K(Tt,Mt,Pt,Ft,Dt))),_t.putImageData(Nt,0,0)}function h$K(_t,Tt,Mt,Pt,Ft){const Dt=new Uint32Array(_t*_t),Nt="buffer"in Tt?Tt:new Float64Array(Tt),Vt="buffer"in Mt?new Uint32Array(Mt.buffer):new Uint32Array(new Uint8Array(Mt).buffer),zt=Vt.length/(Ft-Pt);for(let Xt=0;Xt<Nt.length;Xt++){const Ht=Nt[Xt],Wt=Math.floor((Ht-Pt)*zt);Dt[Xt]=Vt[o$1H(Wt,0,Vt.length-1)]}return Dt.buffer}function y$J(_t,Tt,Mt){const Pt=Math.sqrt(_t**2+Tt**2)/Mt;return Pt>1?0:3/(Math.PI*Mt**2)*(1-Pt**2)**2}function d$Z(_t,Tt){return typeof _t=="function"?_t:_t?typeof Tt=="string"?Mt=>-1*+Mt[_t]:Mt=>+Mt[_t]+Tt:()=>1}function x$n(_t,Tt){return _t!=null?typeof Tt=="string"?Mt=>-1*+Mt.readAttribute(_t):Mt=>+Mt.readAttribute(_t)+Tt:Mt=>1}var D$e;const S$j=s$2l.getLogger("esri.renderers.HeatmapRenderer");function v$y(_t){if(_t!=null){const{maxDensity:Tt,minDensity:Mt,radius:Pt}=_t;if(Tt!=null||Mt!=null||Pt!=null){const{blurRadius:Ft,maxPixelIntensity:Dt,minPixelIntensity:Nt,...Vt}=_t;return Vt}}return _t}let I$g=D$e=class extends p$1P{constructor(_t){super(_t),this.authoringInfo=null,this.colorStops=[new a$1G({ratio:0,color:new l$2f("rgba(255, 140, 0, 0)")}),new a$1G({ratio:.75,color:new l$2f("rgba(255, 140, 0, 1)")}),new a$1G({ratio:.9,color:new l$2f("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(_t){return v$y(_t)}get blurRadius(){return f$J(this.radius)}set blurRadius(_t){const Tt=this.maxPixelIntensity,Mt=this.minPixelIntensity;this._set("radius",i$1e(_t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",Tt*this._pixelIntensityToDensity),this._set("minDensity",Mt*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(_t){this._set("maxDensity",_t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(_t){this._set("minDensity",_t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(a$1f**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(_t,Tt){this._warnedProps[_t]||e$28(this).getDefaultOrigin()==="user"&&(this._warnedProps[_t]=!0,v$15(()=>{r$1I(S$j,_t,{replacement:`${String(Tt)} (suggested value: ${this._get(Tt)})`,version:"4.24"})}))}read(_t,Tt){_t=v$y(_t),super.read(_t,Tt)}getSymbol(){const _t=this.referenceScale!==0?5:1,Tt=Math.min(this.radius*_t,e$1y(256));return new y$1g({size:Tt})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(_t,Tt){const Mt=this.field,Pt=this.valueExpression;Mt&&typeof Mt=="string"&&await F$t(_t,Tt,Mt),Pt&&typeof Pt=="string"&&await b$11(_t,Tt,Pt)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new D$e({colorStops:m$2e(this.colorStops),field:this.field,legendOptions:m$2e(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};e$2a([d$25({type:j$v,json:{write:!1}})],I$g.prototype,"authoringInfo",void 0),e$2a([d$25({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],I$g.prototype,"blurRadius",null),e$2a([d$25({type:[a$1G],json:{write:!0}})],I$g.prototype,"colorStops",void 0),e$2a([d$25({type:String,json:{write:!0}})],I$g.prototype,"field",void 0),e$2a([d$25({type:Number,json:{write:{overridePolicy:(_t,Tt,Mt)=>({enabled:Mt==null})},origins:{"web-scene":{write:!1}}}})],I$g.prototype,"fieldOffset",void 0),e$2a([d$25({type:p$1C,json:{write:!0}})],I$g.prototype,"legendOptions",void 0),e$2a([d$25({type:Number,json:{write:!0}})],I$g.prototype,"maxDensity",void 0),e$2a([d$25({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],I$g.prototype,"maxPixelIntensity",null),e$2a([d$25({type:Number,json:{write:!0}})],I$g.prototype,"minDensity",void 0),e$2a([d$25({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],I$g.prototype,"minPixelIntensity",null),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],I$g.prototype,"radius",void 0),e$2a([d$25({type:Number,range:{min:0},json:{default:0,write:!0}})],I$g.prototype,"referenceScale",void 0),e$2a([r$1r({heatmap:"heatmap"})],I$g.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],I$g.prototype,"valueExpression",void 0),e$2a([d$25({type:String})],I$g.prototype,"valueExpressionTitle",void 0),e$2a([d$25({readOnly:!0})],I$g.prototype,"_pixelIntensityToDensity",null),I$g=D$e=e$2a([n$2L("esri.renderers.HeatmapRenderer")],I$g);const P$c=I$g;let i$1d=class extends l$1N(l$2v){constructor(){super(...arguments),this.color=new l$2f([0,0,0,0]),this.label=null,this.threshold=0}};e$2a([d$25({type:l$2f,json:{write:!0}})],i$1d.prototype,"color",void 0),e$2a([d$25({type:String,json:{write:!0}})],i$1d.prototype,"label",void 0),e$2a([d$25({type:Number,range:{min:0,max:1},json:{write:!0}})],i$1d.prototype,"threshold",void 0),i$1d=e$2a([n$2L("esri.renderers.support.OthersCategory")],i$1d);let p$1B=class extends l$1N(l$2v){constructor(){super(...arguments),this.title=null}};e$2a([d$25({type:String,json:{write:!0}})],p$1B.prototype,"title",void 0),p$1B=e$2a([n$2L("esri.renderers.support.PieChartLegendOptions")],p$1B);let b$s=class extends v$z(l$1N(p$1P)){constructor(_t){super(_t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new l$2f([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new i$1d,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var _t;return new y$1g({size:this.size?this.size/2+(((_t=this.outline)==null?void 0:_t.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((_t,Tt)=>_t+Tt.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((_t,Tt)=>_t+JSON.stringify(Tt),"")}async collectRequiredFields(_t,Tt){await this.collectVVRequiredFields(_t,Tt);for(const Mt of this.attributes)Mt.valueExpression&&await b$11(_t,Tt,Mt.valueExpression),Mt.field&&_t.add(Mt.field)}};e$2a([d$25({type:[a$1h],json:{write:!0}})],b$s.prototype,"attributes",void 0),e$2a([d$25({type:S$A,json:{default:null,write:!0}})],b$s.prototype,"backgroundFillSymbol",void 0),e$2a([d$25({type:l$2f,json:{write:!0}})],b$s.prototype,"defaultColor",void 0),e$2a([d$25({type:String,json:{write:!0}})],b$s.prototype,"defaultLabel",void 0),e$2a([d$25({type:Number,range:{min:0,max:1},json:{write:!0}})],b$s.prototype,"holePercentage",void 0),e$2a([d$25({type:i$1d,json:{write:!0}})],b$s.prototype,"othersCategory",void 0),e$2a([d$25({type:p$1B,json:{write:!0}})],b$s.prototype,"legendOptions",void 0),e$2a([d$25({type:m$1F,json:{default:null,write:!0}})],b$s.prototype,"outline",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],b$s.prototype,"size",void 0),e$2a([r$1r({pieChart:"pie-chart"})],b$s.prototype,"type",void 0),b$s=e$2a([n$2L("esri.renderers.PieChartRenderer")],b$s);const f$I=b$s;var c$1u;let n$1i=c$1u=class extends v$z(p$1P){constructor(_t){super(_t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(_t,Tt){await Promise.all([this.collectSymbolFields(_t,Tt),this.collectVVRequiredFields(_t,Tt)])}async collectSymbolFields(_t,Tt){await Promise.all(this.getSymbols().map(Mt=>Mt.collectRequiredFields(_t,Tt)))}getSymbol(_t,Tt){return this.symbol}async getSymbolAsync(_t,Tt){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((_t,Tt)=>_t+Tt.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((_t,Tt)=>_t+JSON.stringify(Tt),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new c$1u({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:m$2e(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};e$2a([d$25({type:String,json:{write:!0}})],n$1i.prototype,"description",void 0),e$2a([d$25({type:String,json:{write:!0}})],n$1i.prototype,"label",void 0),e$2a([d$25(l$18)],n$1i.prototype,"symbol",void 0),e$2a([r$1r({simple:"simple"})],n$1i.prototype,"type",void 0),n$1i=c$1u=e$2a([n$2L("esri.renderers.SimpleRenderer")],n$1i);const p$1A=n$1i,f$H=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function i$1c(_t){return _t instanceof y$1E}function c$1t(_t){return _t instanceof j$11?Object.keys(_t.items):i$1c(_t)?e$28(_t).keys():_t?Object.keys(_t):[]}function l$14(_t,Tt){return _t instanceof j$11?_t.items[Tt]:_t[Tt]}function u$U(_t,Tt){return!(!Array.isArray(_t)||!Array.isArray(Tt))&&_t.length!==Tt.length}function s$$(_t){return _t?_t.declaredClass:null}function p$1z(_t,Tt){const Mt=_t.diff;if(Mt&&typeof Mt=="function")return Mt(_t,Tt);const Pt=c$1t(_t),Ft=c$1t(Tt);if(Pt.length===0&&Ft.length===0)return;if(!Pt.length||!Ft.length||u$U(_t,Tt))return{type:"complete",oldValue:_t,newValue:Tt};const Dt=Ft.filter(Wt=>!Pt.includes(Wt)),Nt=Pt.filter(Wt=>!Ft.includes(Wt)),Vt=Pt.filter(Wt=>Ft.includes(Wt)&&l$14(_t,Wt)!==l$14(Tt,Wt)).concat(Dt,Nt).sort(),zt=s$$(_t);if(zt&&f$H.includes(zt)&&Vt.length)return{type:"complete",oldValue:_t,newValue:Tt};let Xt;const Ht=i$1c(_t)&&i$1c(Tt);for(const Wt of Vt){const Qt=l$14(_t,Wt),Zt=l$14(Tt,Wt);let Kt;if((Ht||typeof Qt!="function"&&typeof Zt!="function")&&Qt!==Zt&&(Qt!=null||Zt!=null)){if(Mt&&Mt[Wt]&&typeof Mt[Wt]=="function")Kt=Mt[Wt](Qt,Zt);else if(Qt instanceof Date&&Zt instanceof Date){if(Qt.getTime()===Zt.getTime())continue;Kt={type:"complete",oldValue:Qt,newValue:Zt}}else Kt=typeof Qt=="object"&&typeof Zt=="object"&&s$$(Qt)===s$$(Zt)?p$1z(Qt,Zt):{type:"complete",oldValue:Qt,newValue:Zt};r$1P(Kt)&&(r$1P(Xt)?Xt.diff[Wt]=Kt:Xt={type:"partial",diff:{[Wt]:Kt}})}}return Xt}function a$1e(_t,Tt){if(t$2e(_t))return!1;const Mt=Tt.split(".");let Pt=_t;for(const Ft of Mt){if(Pt.type==="complete")return!0;if(Pt.type!=="partial")return!1;{const Dt=Pt.diff[Ft];if(!Dt)return!1;Pt=Dt}}return!0}function y$I(_t,Tt){for(const Mt of Tt)if(a$1e(_t,Mt))return!0;return!1}function m$U(_t,Tt){if(!(typeof _t=="function"||typeof Tt=="function"||t$2e(_t)&&t$2e(Tt)))return t$2e(_t)||t$2e(Tt)||typeof _t=="object"&&typeof Tt=="object"&&s$$(_t)!==s$$(Tt)?{type:"complete",oldValue:_t,newValue:Tt}:p$1z(_t,Tt)}function d$Y(_t){if(t$2e(_t))return!0;switch(_t.type){case"complete":return!1;case"collection":{const Tt=_t;for(const Mt of Tt.added)if(!d$Y(Mt))return!1;for(const Mt of Tt.removed)if(!d$Y(Mt))return!1;for(const Mt of Tt.changed)if(!d$Y(Mt))return!1;return!0}case"partial":for(const Tt in _t.diff)if(!d$Y(_t.diff[Tt]))return!1;return!0}}var l$13;let p$1y=l$13=class extends l$2v{constructor(_t){super(_t),this.description=null,this.label=null,this.symbol=null,this.value=null}castValue(_t){return _t==null||typeof _t=="string"||typeof _t=="number"?_t:`${_t}`}clone(){return new l$13({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const _t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${_t}`}};e$2a([d$25({type:String,json:{write:!0}})],p$1y.prototype,"description",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1y.prototype,"label",void 0),e$2a([d$25(l$18)],p$1y.prototype,"symbol",void 0),e$2a([d$25({json:{type:String,write:{writer:(_t,Tt)=>{Tt.value=_t==null?void 0:_t.toString()}}}})],p$1y.prototype,"value",void 0),e$2a([s$23("value")],p$1y.prototype,"castValue",null),p$1y=l$13=e$2a([n$2L("esri.renderers.support.UniqueValueInfo")],p$1y);const n$1h=p$1y,r$N=()=>!!a$32("enable-feature:force-wosr"),i$1b={};async function u$T(_t,Tt){try{return{data:(await j$s(_t,Tt)).data,baseUrl:Ot(_t),styleUrl:_t}}catch(Mt){return w$18(Mt),null}}function y$H(_t,Tt,Mt){const Pt=r$1P(Tt.portal)?Tt.portal:B$q.getDefault();let Ft;const Dt=`${Pt.url} - ${Pt.user&&Pt.user.username} - ${_t}`;return i$1b[Dt]||(i$1b[Dt]=m$T(_t,Pt,Mt).then(Nt=>(Ft=Nt,Nt.fetchData())).then(Nt=>({data:Nt,baseUrl:Ft.itemUrl,styleName:_t}))),i$1b[Dt]}function m$T(_t,Tt,Mt){return Tt.load(Mt).then(()=>{const Pt=new d$1U({disableExtraQuery:!0,query:`owner:${w$r} AND type:${h$J} AND typekeywords:"${_t}"`});return Tt.queryItems(Pt,Mt)}).then(({results:Pt})=>{let Ft=null;const Dt=_t.toLowerCase();if(Pt&&Array.isArray(Pt)){for(const Nt of Pt)if(Nt.typeKeywords.some(Vt=>Vt.toLowerCase()===Dt)&&Nt.type===h$J&&Nt.owner===w$r){Ft=Nt;break}}if(!Ft)throw new s$2i("symbolstyleutils:style-not-found",`The style '${_t}' could not be found`,{styleName:_t});return Ft.load(Mt)})}function c$1s(_t,Tt,Mt){return _t.styleUrl?u$T(_t.styleUrl,Mt):_t.styleName?y$H(_t.styleName,Tt,Mt):Promise.reject(new s$2i("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function p$1x(_t){return _t===null||_t.type==="CIMSymbolReference"?_t:{type:"CIMSymbolReference",symbol:_t}}function d$X(_t,Tt){if(Tt==="cimRef")return _t.cimRef;if(_t.formatInfos&&!r$N()){for(const Mt of _t.formatInfos)if(Mt.type==="gltf")return Mt.href}return _t.webRef}function j$s(_t,Tt){const Mt={responseType:"json",query:{f:"json"},...Tt};return U$v(F$x(_t),Mt)}const w$r="esri_en",h$J="Style",U$f="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var E$m;const M$k=s$2l.getLogger("esri.renderers.UniqueValueRenderer"),N$c=b$1b(n$1h);let R$b=E$m=class extends v$z(p$1P){constructor(_t){super(_t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(Tt,Mt){if(!Tt&&!Mt)return;if(!Tt||!Mt)return{type:"complete",oldValue:Tt,newValue:Mt};let Pt=!1;const Ft={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let Dt=0;Dt<Mt.length;Dt++){const Nt=Tt.find(Vt=>Vt.value===Mt[Dt].value);Nt?m$U(Nt,Mt[Dt])?(Ft.changed.push({type:"complete",oldValue:Nt,newValue:Mt[Dt]}),Pt=!0):Ft.unchanged.push({oldValue:Nt,newValue:Mt[Dt]}):(Ft.added.push(Mt[Dt]),Pt=!0)}for(let Dt=0;Dt<Tt.length;Dt++)Mt.find(Nt=>Nt.value===Tt[Dt].value)||(Ft.removed.push(Tt[Dt]),Pt=!0);return Pt?Ft:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(_t){return _t==null||typeof _t=="function"?_t:u$2b(_t)}writeField(_t,Tt,Mt,Pt){typeof _t=="string"?Tt[Mt]=_t:Pt&&Pt.messages?Pt.messages.push(new s$2i("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):M$k.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(_t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",_t)}readPortal(_t,Tt,Mt){return Mt.portal||B$q.getDefault()}readStyleOrigin(_t,Tt,Mt){if(Tt.styleName)return Object.freeze({styleName:Tt.styleName});if(Tt.styleUrl){const Pt=i$1_(Tt.styleUrl,Mt);return Object.freeze({styleUrl:Pt})}}writeStyleOrigin(_t,Tt,Mt,Pt){_t.styleName?Tt.styleName=_t.styleName:_t.styleUrl&&(Tt.styleUrl=c$2r(_t.styleUrl,Pt))}set uniqueValueInfos(_t){this.styleOrigin?M$k.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",_t),this._updateValueInfoMap())}addUniqueValueInfo(_t,Tt){if(this.styleOrigin)return void M$k.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let Mt;Mt=typeof _t=="object"?N$c(_t):new n$1h({value:_t,symbol:g$10(Tt)}),this.uniqueValueInfos.push(Mt),this._valueInfoMap[Mt.value]=Mt}removeUniqueValueInfo(_t){if(this.styleOrigin)M$k.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let Tt=0;Tt<this.uniqueValueInfos.length;Tt++)if(this.uniqueValueInfos[Tt].value===_t+""){delete this._valueInfoMap[_t],this.uniqueValueInfos.splice(Tt,1);break}}async getUniqueValueInfo(_t,Tt){let Mt=Tt;return this.valueExpression&&(t$2e(Tt)||t$2e(Tt.arcade))&&(Mt={...Mt,arcade:await a$2t()}),this._getUniqueValueInfo(_t,Mt)}getSymbol(_t,Tt){if(this.valueExpression&&(t$2e(Tt)||t$2e(Tt.arcade)))return void M$k.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const Mt=this._getUniqueValueInfo(_t,Tt);return Mt&&Mt.symbol||this.defaultSymbol}async getSymbolAsync(_t,Tt){let Mt=Tt;if(this.valueExpression&&(t$2e(Mt)||t$2e(Mt.arcade))){const Ft=await a$2t(),{arcadeUtils:Dt}=Ft;Dt.hasGeometryOperations(this.valueExpression)&&await Dt.enableGeometryOperations(),Mt={...Mt,arcade:Ft}}const Pt=this._getUniqueValueInfo(_t,Mt);return Pt&&Pt.symbol||this.defaultSymbol}getSymbols(){const _t=[];for(const Tt of this.uniqueValueInfos)Tt.symbol&&_t.push(Tt.symbol);return this.defaultSymbol&&_t.push(this.defaultSymbol),_t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((_t,Tt)=>_t+Tt.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((_t,Tt)=>_t+Tt.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const _t=new E$m({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:m$2e(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:m$2e(this.visualVariables),legendOptions:m$2e(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:m$2e(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(_t._isDefaultSymbolDerived=!0),_t._set("portal",this.portal);const Tt=m$2e(this.uniqueValueInfos);return this.styleOrigin&&(_t._set("styleOrigin",Object.freeze(m$2e(this.styleOrigin))),Object.freeze(Tt)),_t._set("uniqueValueInfos",Tt),_t._updateValueInfoMap(),_t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(_t,Tt){const Mt=[this.collectVVRequiredFields(_t,Tt),this.collectSymbolFields(_t,Tt)];await Promise.all(Mt)}async collectSymbolFields(_t,Tt){const Mt=[...this.getSymbols().map(Pt=>Pt.collectRequiredFields(_t,Tt)),b$11(_t,Tt,this.valueExpression)];F$t(_t,Tt,this.field),F$t(_t,Tt,this.field2),F$t(_t,Tt,this.field3),await Promise.all(Mt)}populateFromStyle(){return c$1s(this.styleOrigin,{portal:this.portal}).then(_t=>{const Tt=[];return this._valueInfoMap={},_t&&_t.data&&Array.isArray(_t.data.items)&&_t.data.items.forEach(Mt=>{const Pt=new b$W({styleUrl:_t.styleUrl,styleName:_t.styleName,portal:this.portal,name:Mt.name});this.defaultSymbol||Mt.name!==_t.data.defaultItem||(this.defaultSymbol=Pt,this._isDefaultSymbolDerived=!0);const Ft=new n$1h({value:Mt.name,symbol:Pt});Tt.push(Ft),this._valueInfoMap[Mt.name]=Ft}),this._set("uniqueValueInfos",Object.freeze(Tt)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(_t=>this._valueInfoMap[_t.value+""]=_t)}_getUniqueValueInfo(_t,Tt){return this.valueExpression?this._getUnqiueValueInfoForExpression(_t,Tt):this._getUnqiueValueInfoForFields(_t)}_getUnqiueValueInfoForExpression(_t,Tt){const{viewingMode:Mt,scale:Pt,spatialReference:Ft,arcade:Dt}=c$3r(Tt,{});let Nt=this._cache.compiledFunc;const Vt=Dt.arcadeUtils;if(!Nt){const Xt=Vt.createSyntaxTree(this.valueExpression);Nt=Vt.createFunction(Xt),this._cache.compiledFunc=Nt}const zt=Vt.executeFunction(Nt,Vt.createExecContext(_t,Vt.getViewInfo({viewingMode:Mt,scale:Pt,spatialReference:Ft})));return this._valueInfoMap[zt+""]}_getUnqiueValueInfoForFields(_t){const Tt=this.field,Mt=_t.attributes;let Pt;if(typeof Tt!="function"&&this.field2){const Ft=this.field2,Dt=this.field3,Nt=[];Tt&&Nt.push(Mt[Tt]),Ft&&Nt.push(Mt[Ft]),Dt&&Nt.push(Mt[Dt]),Pt=Nt.join(this.fieldDelimiter||"")}else typeof Tt=="function"?Pt=Tt(_t):Tt&&(Pt=Mt[Tt]);return this._valueInfoMap[Pt+""]}static fromPortalStyle(_t,Tt){const Mt=new E$m(Tt&&Tt.properties);Mt._set("styleOrigin",Object.freeze({styleName:_t})),Mt._set("portal",Tt&&Tt.portal||B$q.getDefault());const Pt=Mt.populateFromStyle();return Pt.catch(Ft=>{M$k.error(`#fromPortalStyle('${_t}'[, ...])`,"Failed to create unique value renderer from style name",Ft)}),Pt}static fromStyleUrl(_t,Tt){const Mt=new E$m(Tt&&Tt.properties);Mt._set("styleOrigin",Object.freeze({styleUrl:_t}));const Pt=Mt.populateFromStyle();return Pt.catch(Ft=>{M$k.error(`#fromStyleUrl('${_t}'[, ...])`,"Failed to create unique value renderer from style URL",Ft)}),Pt}};e$2a([d$25({readOnly:!0})],R$b.prototype,"_cache",null),e$2a([r$1r({uniqueValue:"unique-value"})],R$b.prototype,"type",void 0),e$2a([d$25(y$M)],R$b.prototype,"backgroundFillSymbol",void 0),e$2a([d$25({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],R$b.prototype,"field",void 0),e$2a([s$23("field")],R$b.prototype,"castField",null),e$2a([r$1C("field")],R$b.prototype,"writeField",null),e$2a([d$25({type:String,json:{write:!0}})],R$b.prototype,"field2",void 0),e$2a([d$25({type:String,json:{write:!0}})],R$b.prototype,"field3",void 0),e$2a([d$25({type:String,json:{write:!0}})],R$b.prototype,"valueExpression",void 0),e$2a([d$25({type:String,json:{write:!0}})],R$b.prototype,"valueExpressionTitle",void 0),e$2a([d$25({type:p$1O,json:{write:!0}})],R$b.prototype,"legendOptions",void 0),e$2a([d$25({type:String,json:{write:!0}})],R$b.prototype,"defaultLabel",void 0),e$2a([d$25(n$2Y({...l$18},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],R$b.prototype,"defaultSymbol",null),e$2a([d$25({type:String,json:{write:!0}})],R$b.prototype,"fieldDelimiter",void 0),e$2a([d$25({type:B$q,readOnly:!0})],R$b.prototype,"portal",void 0),e$2a([o$1U("portal",["styleName"])],R$b.prototype,"readPortal",null),e$2a([d$25({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],R$b.prototype,"styleOrigin",void 0),e$2a([o$1U("styleOrigin",["styleName","styleUrl"])],R$b.prototype,"readStyleOrigin",null),e$2a([r$1C("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],R$b.prototype,"writeStyleOrigin",null),e$2a([d$25({type:[n$1h],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],R$b.prototype,"uniqueValueInfos",null),R$b=E$m=e$2a([n$2L("esri.renderers.UniqueValueRenderer")],R$b);const P$b=R$b,p$1w={key:"type",base:p$1P,typeMap:{heatmap:P$c,simple:p$1A,"unique-value":P$b,"class-breaks":N$e,"dot-density":b$t,dictionary:u$X,"pie-chart":f$I},errorContext:"renderer"},n$1g={key:"type",base:p$1P,typeMap:{simple:p$1A,"unique-value":P$b,"class-breaks":N$e,heatmap:P$c},errorContext:"renderer"};function t$U(_t,Tt){return o$R(_t,null,Tt)}const s$_=s$2d({types:p$1w});function o$R(_t,Tt,Mt){return _t?_t&&(_t.styleName||_t.styleUrl)&&_t.type!=="uniqueValue"?(Mt&&Mt.messages&&Mt.messages.push(new t$1W("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+_t.type+"'",{definition:_t,context:Mt})),null):s$_(_t,Tt,Mt):null}class i$1a{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(E$L),this._values=new Map,this.multipleOriginsSupported=!0}clone(Tt){const Mt=new i$1a,Pt=this._originStores[r$1K.DEFAULTS];Pt&&Pt.forEach((Ft,Dt)=>{Mt.set(Dt,m$2e(Ft),r$1K.DEFAULTS)});for(let Ft=r$1K.SERVICE;Ft<E$L;Ft++){const Dt=this._originStores[Ft];Dt&&Dt.forEach((Nt,Vt)=>{Tt&&Tt.has(Vt)||Mt.set(Vt,m$2e(Nt),Ft)})}return Mt}get(Tt,Mt){const Pt=Mt===void 0?this._values:this._originStores[Mt];return Pt?Pt.get(Tt):void 0}keys(Tt){const Mt=Tt==null?this._values:this._originStores[Tt];return Mt?[...Mt.keys()]:[]}set(Tt,Mt,Pt=r$1K.USER){let Ft=this._originStores[Pt];if(Ft||(Ft=new Map,this._originStores[Pt]=Ft),Ft.set(Tt,Mt),!this._values.has(Tt)||this._propertyOriginMap.get(Tt)<=Pt){const Dt=this._values.get(Tt);return this._values.set(Tt,Mt),this._propertyOriginMap.set(Tt,Pt),Dt!==Mt}return!1}delete(Tt,Mt=r$1K.USER){const Pt=this._originStores[Mt];if(!Pt)return;const Ft=Pt.get(Tt);if(Pt.delete(Tt),this._values.has(Tt)&&this._propertyOriginMap.get(Tt)===Mt){this._values.delete(Tt);for(let Dt=Mt-1;Dt>=0;Dt--){const Nt=this._originStores[Dt];if(Nt&&Nt.has(Tt)){this._values.set(Tt,Nt.get(Tt)),this._propertyOriginMap.set(Tt,Dt);break}}}return Ft}has(Tt,Mt){const Pt=Mt===void 0?this._values:this._originStores[Mt];return!!Pt&&Pt.has(Tt)}revert(Tt,Mt){for(;Mt>0&&!this.has(Tt,Mt);)--Mt;const Pt=this._originStores[Mt],Ft=Pt&&Pt.get(Tt),Dt=this._values.get(Tt);return this._values.set(Tt,Ft),this._propertyOriginMap.set(Tt,Mt),Dt!==Ft}originOf(Tt){return this._propertyOriginMap.get(Tt)||r$1K.DEFAULTS}forEach(Tt){this._values.forEach(Tt)}}const a$1d=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt);const Pt=e$28(this),Ft=Pt.store,Dt=new i$1a;Pt.store=Dt,e$1V(Pt,Ft,Dt)}read(Mt,Pt){u$27(this,Mt,Pt)}getAtOrigin(Mt,Pt){const Ft=m$S(this),Dt=t$26(Pt);if(typeof Mt=="string")return Ft.get(Mt,Dt);const Nt={};return Mt.forEach(Vt=>{Nt[Vt]=Ft.get(Vt,Dt)}),Nt}originOf(Mt){return n$2T(this.originIdOf(Mt))}originIdOf(Mt){return m$S(this).originOf(Mt)}revert(Mt,Pt){const Ft=m$S(this),Dt=t$26(Pt),Nt=e$28(this);let Vt;Vt=typeof Mt=="string"?Mt==="*"?Ft.keys(Dt):[Mt]:Mt,Vt.forEach(zt=>{Nt.invalidate(zt),Ft.revert(zt,Dt),Nt.commit(zt)})}};return Tt=e$2a([n$2L("esri.core.ReadOnlyMultiOriginJSONSupport")],Tt),Tt};function m$S(_t){return e$28(_t).store}let f$G=class extends a$1d(y$1E){};f$G=e$2a([n$2L("esri.core.ReadOnlyMultiOriginJSONSupport")],f$G);const u$S=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt)}clear(Mt,Pt="user"){return l$12(this).delete(Mt,t$26(Pt))}write(Mt={},Pt){return d$20(this,Mt=Mt||{},Pt),Mt}setAtOrigin(Mt,Pt,Ft){e$28(this).setAtOrigin(Mt,Pt,t$26(Ft))}removeOrigin(Mt){const Pt=l$12(this),Ft=t$26(Mt),Dt=Pt.keys(Ft);for(const Nt of Dt)Pt.originOf(Nt)===Ft&&Pt.set(Nt,Pt.get(Nt,Ft),r$1K.USER)}updateOrigin(Mt,Pt){const Ft=l$12(this),Dt=t$26(Pt),Nt=this.get(Mt);for(let Vt=Dt+1;Vt<E$L;++Vt)Ft.delete(Mt,Vt);Ft.set(Mt,Nt,Dt)}toJSON(Mt){return this.write({},Mt)}};return Tt=e$2a([n$2L("esri.core.WriteableMultiOriginJSONSupport")],Tt),Tt.prototype.toJSON.isDefaultToJSON=!0,Tt};function l$12(_t){return e$28(_t).store}const O$e=_t=>{let Tt=class extends u$S(a$1d(_t)){constructor(...Mt){super(...Mt)}};return Tt=e$2a([n$2L("esri.core.MultiOriginJSONSupport")],Tt),Tt};let S$i=class extends O$e(y$1E){};S$i=e$2a([n$2L("esri.core.MultiOriginJSONSupport")],S$i);async function r$M(_t,Tt){const{WhereClause:Mt}=await __vitePreload(()=>Promise.resolve().then(()=>WhereClause),void 0);return Mt.create(_t,Tt)}function t$T(_t,Tt){return r$1P(_t)?r$1P(Tt)?`(${_t}) AND (${Tt})`:_t:Tt}var s$Z;let p$1v=s$Z=class extends l$2v{constructor(_t){super(_t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new s$Z({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};e$2a([d$25({type:String,json:{write:!0}})],p$1v.prototype,"expression",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1v.prototype,"name",void 0),e$2a([d$25({type:["boolean","date","number","string"],json:{write:!0}})],p$1v.prototype,"returnType",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1v.prototype,"title",void 0),p$1v=s$Z=e$2a([n$2L("esri.form.ExpressionInfo")],p$1v);const i$19=p$1v;let e$T=class extends l$2v{constructor(_t){super(_t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};e$2a([d$25({type:String,json:{write:!0}})],e$T.prototype,"description",void 0),e$2a([d$25({type:String,json:{write:!0}})],e$T.prototype,"label",void 0),e$2a([d$25()],e$T.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0}})],e$T.prototype,"visibilityExpression",void 0),e$T=e$2a([n$2L("esri.form.elements.Element")],e$T);const i$18=e$T;var s$Y;let p$1u=s$Y=class extends l$2v{constructor(_t){super(_t),this.type=null}clone(){return new s$Y({type:this.type})}};e$2a([d$25({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],p$1u.prototype,"type",void 0),p$1u=s$Y=e$2a([n$2L("esri.form.elements.inputs.AttachmentInput")],p$1u);const c$1r=p$1u;var i$17;let p$1t=i$17=class extends i$18{constructor(_t){super(_t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new i$17({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};e$2a([d$25({type:String,json:{write:!0}})],p$1t.prototype,"attachmentKeyword",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],p$1t.prototype,"editable",void 0),e$2a([d$25({type:c$1r,json:{read:{source:"inputType"},write:{target:"inputType"}}})],p$1t.prototype,"input",void 0),e$2a([d$25({type:["attachment"],json:{read:!1,write:!0}})],p$1t.prototype,"type",void 0),p$1t=i$17=e$2a([n$2L("esri.form.elements.AttachmentElement")],p$1t);const n$1f=p$1t;let e$S=class extends l$2v{constructor(_t){super(_t),this.type=null}};e$2a([d$25()],e$S.prototype,"type",void 0),e$S=e$2a([n$2L("esri.form.elements.inputs.Input")],e$S);const p$1s=e$S;let e$R=class extends p$1s{constructor(_t){super(_t),this.maxLength=null,this.minLength=0}};e$2a([d$25({type:Number,json:{write:!0}})],e$R.prototype,"maxLength",void 0),e$2a([d$25({type:Number,json:{write:!0}})],e$R.prototype,"minLength",void 0),e$R=e$2a([n$2L("esri.form.elements.inputs.TextInput")],e$R);const p$1r=e$R;var o$Q;let c$1q=o$Q=class extends p$1r{constructor(_t){super(_t),this.type="barcode-scanner"}clone(){return new o$Q({maxLength:this.maxLength,minLength:this.minLength})}};e$2a([d$25({type:["barcode-scanner"],json:{read:!1,write:!0}})],c$1q.prototype,"type",void 0),c$1q=o$Q=e$2a([n$2L("esri.form.elements.inputs.BarcodeScannerInput")],c$1q);const p$1q=c$1q;var s$X;let p$1p=s$X=class extends p$1s{constructor(_t){super(_t),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new s$X({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};e$2a([d$25({type:String,json:{write:!0}})],p$1p.prototype,"noValueOptionLabel",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],p$1p.prototype,"showNoValueOption",void 0),e$2a([d$25({type:["combo-box"],json:{read:!1,write:!0}})],p$1p.prototype,"type",void 0),p$1p=s$X=e$2a([n$2L("esri.form.elements.inputs.ComboBoxInput")],p$1p);const i$16=p$1p;var s$W;function n$1e(_t){return _t!=null?new Date(_t):null}function a$1c(_t){return _t?_t.getTime():null}let m$R=s$W=class extends p$1s{constructor(_t){super(_t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(_t,Tt){return n$1e(Tt.max)}writeMax(_t,Tt){Tt.max=a$1c(_t)}readMin(_t,Tt){return n$1e(Tt.min)}writeMin(_t,Tt){Tt.min=a$1c(_t)}clone(){return new s$W({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};e$2a([d$25({type:Boolean,json:{write:!0}})],m$R.prototype,"includeTime",void 0),e$2a([d$25({type:Date,json:{type:Number,write:!0}})],m$R.prototype,"max",void 0),e$2a([o$1U("max")],m$R.prototype,"readMax",null),e$2a([r$1C("max")],m$R.prototype,"writeMax",null),e$2a([d$25({type:Date,json:{type:Number,write:!0}})],m$R.prototype,"min",void 0),e$2a([o$1U("min")],m$R.prototype,"readMin",null),e$2a([r$1C("min")],m$R.prototype,"writeMin",null),e$2a([d$25({type:["datetime-picker"],json:{read:!1,write:!0}})],m$R.prototype,"type",void 0),m$R=s$W=e$2a([n$2L("esri.form.elements.inputs.DateTimePickerInput")],m$R);const c$1p=m$R;var s$V;let p$1o=s$V=class extends p$1s{constructor(_t){super(_t),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new s$V({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};e$2a([d$25({type:String,json:{write:!0}})],p$1o.prototype,"noValueOptionLabel",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],p$1o.prototype,"showNoValueOption",void 0),e$2a([d$25({type:["radio-buttons"],json:{read:!1,write:!0}})],p$1o.prototype,"type",void 0),p$1o=s$V=e$2a([n$2L("esri.form.elements.inputs.RadioButtonsInput")],p$1o);const i$15=p$1o;var s$U;let p$1n=s$U=class extends p$1s{constructor(_t){super(_t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new s$U({offValue:this.offValue,onValue:this.onValue})}};e$2a([d$25({type:[String,Number],json:{write:!0}})],p$1n.prototype,"offValue",void 0),e$2a([d$25({type:[String,Number],json:{write:!0}})],p$1n.prototype,"onValue",void 0),e$2a([d$25({type:["switch"],json:{read:!1,write:!0}})],p$1n.prototype,"type",void 0),p$1n=s$U=e$2a([n$2L("esri.form.elements.inputs.SwitchInput")],p$1n);const i$14=p$1n;var o$P;let p$1m=o$P=class extends p$1r{constructor(_t){super(_t),this.type="text-area"}clone(){return new o$P({maxLength:this.maxLength,minLength:this.minLength})}};e$2a([d$25({type:["text-area"],json:{read:!1,write:!0}})],p$1m.prototype,"type",void 0),p$1m=o$P=e$2a([n$2L("esri.form.elements.inputs.TextAreaInput")],p$1m);const a$1b=p$1m;var s$T;let p$1l=s$T=class extends p$1r{constructor(_t){super(_t),this.type="text-box"}clone(){return new s$T({maxLength:this.maxLength,minLength:this.minLength})}};e$2a([d$25({type:["text-box"],json:{read:!1,write:!0}})],p$1l.prototype,"type",void 0),p$1l=s$T=e$2a([n$2L("esri.form.elements.inputs.TextBoxInput")],p$1l);const c$1o=p$1l,m$Q={base:p$1s,key:"type",typeMap:{"barcode-scanner":p$1q,"combo-box":i$16,"datetime-picker":c$1p,"radio-buttons":i$15,switch:i$14,"text-area":a$1b,"text-box":c$1o}};var n$1d;let l$11=n$1d=class extends i$18{constructor(_t){super(_t),this.domain=null,this.editable=!0,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new n$1d({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};e$2a([d$25({types:n$1C,json:{read:{reader:t$15},write:!0}})],l$11.prototype,"domain",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],l$11.prototype,"editable",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$11.prototype,"editableExpression",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$11.prototype,"fieldName",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$11.prototype,"hint",void 0),e$2a([d$25({types:m$Q,json:{read:{source:"inputType"},write:{target:"inputType"}}})],l$11.prototype,"input",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$11.prototype,"requiredExpression",void 0),e$2a([d$25({type:String,json:{read:!1,write:!0}})],l$11.prototype,"type",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$11.prototype,"valueExpression",void 0),l$11=n$1d=e$2a([n$2L("esri.form.elements.FieldElement")],l$11);const a$1a=l$11;var p$1k;let l$10=p$1k=class extends i$18{constructor(_t){super(_t),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new p$1k({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:m$2e(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};e$2a([d$25({type:Number,json:{write:!0}})],l$10.prototype,"displayCount",void 0),e$2a([d$25({type:["list"],json:{write:!0}})],l$10.prototype,"displayType",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],l$10.prototype,"editable",void 0),e$2a([d$25({type:[c$2H],json:{write:!0}})],l$10.prototype,"orderByFields",void 0),e$2a([d$25({type:Number,json:{write:!0}})],l$10.prototype,"relationshipId",void 0),e$2a([d$25({type:["relationship"],json:{read:!1,write:!0}})],l$10.prototype,"type",void 0),l$10=p$1k=e$2a([n$2L("esri.form.elements.RelationshipElement")],l$10);const d$W=l$10;function n$1c(_t){return{typesWithGroup:{base:i$18,key:"type",typeMap:{attachment:n$1f,field:a$1a,group:_t,relationship:d$W}},typesWithoutGroup:{base:i$18,key:"type",typeMap:{attachment:n$1f,field:a$1a,relationship:d$W}}}}function i$13(_t,Tt,Mt=!0){if(!_t)return null;const Pt=Mt?Tt.typesWithGroup.typeMap:Tt.typesWithoutGroup.typeMap;return _t.filter(Ft=>Pt[Ft.type]).map(Ft=>Pt[Ft.type].fromJSON(Ft))}function u$R(_t,Tt,Mt=!0){if(!_t)return null;const Pt=Mt?Tt.typesWithGroup.typeMap:Tt.typesWithoutGroup.typeMap;return _t.filter(Ft=>Pt[Ft.type]).map(Ft=>Ft.toJSON())}function s$S(_t,Tt,Mt=!0){return _t?_t.map(Pt=>N$v(Mt?Tt.typesWithGroup:Tt.typesWithoutGroup,Pt)):null}var d$V;let u$Q=d$V=class extends i$18{constructor(_t){super(_t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(_t){return s$S(_t,f$F,!1)}readElements(_t,Tt){return i$13(Tt.formElements,f$F,!1)}writeElements(_t,Tt){Tt.formElements=u$R(_t,f$F,!1)}clone(){return new d$V({description:this.description,elements:m$2e(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};e$2a([d$25({json:{write:!0}})],u$Q.prototype,"elements",void 0),e$2a([s$23("elements")],u$Q.prototype,"castElements",null),e$2a([o$1U("elements",["formElements"])],u$Q.prototype,"readElements",null),e$2a([r$1C("elements")],u$Q.prototype,"writeElements",null),e$2a([d$25({type:["collapsed","expanded"],json:{write:!0}})],u$Q.prototype,"initialState",void 0),e$2a([d$25({type:String,json:{read:!1,write:!0}})],u$Q.prototype,"type",void 0),u$Q=d$V=e$2a([n$2L("esri.form.elements.GroupElement")],u$Q);const f$F=n$1c(u$Q),y$G=u$Q;var d$U;const j$r=n$1c(y$G);let y$F=d$U=class extends l$2v{constructor(_t){super(_t),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(_t){return s$S(_t,j$r)}readElements(_t,Tt){return i$13(Tt.formElements,j$r)}writeElements(_t,Tt){Tt.formElements=u$R(_t,j$r)}clone(){return new d$U({description:this.description,expressionInfos:m$2e(this.expressionInfos),elements:m$2e(this.elements),title:this.title})}};e$2a([d$25({type:String,json:{write:!0}})],y$F.prototype,"description",void 0),e$2a([d$25({json:{write:!0}})],y$F.prototype,"elements",void 0),e$2a([s$23("elements")],y$F.prototype,"castElements",null),e$2a([o$1U("elements",["formElements"])],y$F.prototype,"readElements",null),e$2a([r$1C("elements")],y$F.prototype,"writeElements",null),e$2a([d$25({type:[i$19],json:{write:!0}})],y$F.prototype,"expressionInfos",void 0),e$2a([d$25({type:String,json:{write:!0}})],y$F.prototype,"title",void 0),y$F=d$U=e$2a([n$2L("esri.form.FormTemplate")],y$F);const E$l=y$F;var d$T;const p$1j=o$1O()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),u$P=p$1j.jsonValues.slice();A$F(u$P,"orthometric");const g$A=o$1O()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let m$P=d$T=class extends l$2v{constructor(_t){super(_t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(_t,Tt,Mt){return p$1j.write(_t,Tt,Mt)}readHeightModel(_t,Tt,Mt){return p$1j.read(_t)||(Mt&&Mt.messages&&Mt.messages.push(f$E(_t,{context:Mt})),null)}readHeightUnit(_t,Tt,Mt){return g$A.read(_t)||(Mt&&Mt.messages&&Mt.messages.push(y$E(_t,{context:Mt})),null)}readHeightUnitService(_t,Tt,Mt){return H$e(_t)||g$A.read(_t)||(Mt&&Mt.messages&&Mt.messages.push(y$E(_t,{context:Mt})),null)}readVertCRS(_t,Tt){return Tt.vertCRS||Tt.ellipsoid||Tt.geoid}clone(){return new d$T({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(_t){return!!_t&&(this===_t||this.heightModel===_t.heightModel&&this.heightUnit===_t.heightUnit&&this.vertCRS===_t.vertCRS)}static deriveUnitFromSR(_t,Tt){const Mt=$$f(Tt);return new d$T({heightModel:_t.heightModel,heightUnit:Mt,vertCRS:_t.vertCRS})}write(_t,Tt){return Tt={origin:"web-scene",...Tt},super.write(_t,Tt)}static fromJSON(_t){if(!_t)return null;const Tt=new d$T;return Tt.read(_t,{origin:"web-scene"}),Tt}};function y$E(_t,Tt){return new t$1W("height-unit:unsupported",`Height unit of value '${_t}' is not supported`,Tt)}function f$E(_t,Tt){return new t$1W("height-model:unsupported",`Height model of value '${_t}' is not supported`,Tt)}e$2a([d$25({type:p$1j.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:u$P,default:"ellipsoidal"}}}})],m$P.prototype,"heightModel",void 0),e$2a([r$1C("web-scene","heightModel")],m$P.prototype,"writeHeightModel",null),e$2a([o$1U(["web-scene","service"],"heightModel")],m$P.prototype,"readHeightModel",null),e$2a([d$25({type:g$A.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:g$A.jsonValues,write:g$A.write}}}})],m$P.prototype,"heightUnit",void 0),e$2a([o$1U("web-scene","heightUnit")],m$P.prototype,"readHeightUnit",null),e$2a([o$1U("service","heightUnit")],m$P.prototype,"readHeightUnitService",null),e$2a([d$25({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],m$P.prototype,"vertCRS",void 0),e$2a([o$1U("service","vertCRS",["vertCRS","ellipsoid","geoid"])],m$P.prototype,"readVertCRS",null),m$P=d$T=e$2a([n$2L("esri.geometry.HeightModelInfo")],m$P);const v$x=m$P;function t$S(_t,Tt,Mt){if(_t.hasM==null||_t.hasZ)for(const Pt of Tt)for(const Ft of Pt)Ft.length>2&&(Ft[2]*=Mt)}function i$12(_t,Tt,Mt){if(!_t&&!Tt||!Mt)return;const Pt=W$8(Mt);s$R(_t,Mt,Pt),s$R(Tt,Mt,Pt)}function s$R(_t,Tt,Mt){if(_t)for(const Pt of _t)f$D(Pt.geometry,Tt,Mt)}function f$D(_t,Tt,Mt){if(t$2e(_t)||!_t.spatialReference||E$G(_t.spatialReference,Tt))return;const Pt=W$8(_t.spatialReference)/Mt;if(Pt!==1){if("x"in _t)_t.z!=null&&(_t.z*=Pt);else if("rings"in _t)t$S(_t,_t.rings,Pt);else if("paths"in _t)t$S(_t,_t.paths,Pt);else if("points"in _t&&(_t.hasM==null||_t.hasZ))for(const Ft of _t.points)Ft.length>2&&(Ft[2]*=Pt)}}let T$c=0;const F$d=s$2l.getLogger("esri.layers.graphics.sources.MemorySource");let G$a=class extends m$25.LoadableMixin(m$26(a$2B(j$11))){constructor(_t){super(_t),this._idToClientGraphic=null,this.type="memory"}load(_t){const Tt=r$1P(_t)?_t.signal:null;return this.addResolvingPromise(this._startWorker(Tt)),Promise.resolve(this)}destroy(){var _t;(_t=this._connection)==null||_t.close(),this._connection=null}get workerGeometryType(){var Tt;const _t=(Tt=this.layer)==null?void 0:Tt.geometryType;return _t?this._geometryTypeRequiresClientGraphicMapping(_t)?"polygon":_t:null}applyEdits(_t){return this.load().then(()=>this._applyEdits(_t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(_t,Tt={}){await this.load(Tt);const Mt=await this._connection.invoke("queryFeatures",_t?_t.toJSON():null,Tt);r$R(_t,this.layer.spatialReference,Mt);const Pt=x$s.fromJSON(Mt);if(!this._requiresClientGraphicMapping())return Pt;const Ft=this.layer.objectIdField;for(const Dt of Pt.features){const Nt=Dt.attributes[Ft],Vt=this._idToClientGraphic.get(Nt);Vt&&(Dt.geometry=Vt.geometry)}return Pt.geometryType=this.layer.geometryType,Pt}async queryFeaturesJSON(_t,Tt={}){if(this._requiresClientGraphicMapping())throw new s$2i("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(Tt);const Mt=await this._connection.invoke("queryFeatures",_t?_t.toJSON():null,Tt);return r$R(_t,this.layer.spatialReference,Mt),Mt}queryFeatureCount(_t,Tt={}){return this.load(Tt).then(()=>this._connection.invoke("queryFeatureCount",_t?_t.toJSON():null,Tt))}queryObjectIds(_t,Tt={}){return this.load(Tt).then(()=>this._connection.invoke("queryObjectIds",_t?_t.toJSON():null,Tt))}queryExtent(_t,Tt={}){return this.load(Tt).then(()=>this._connection.invoke("queryExtent",_t?_t.toJSON():null,Tt)).then(Mt=>({count:Mt.count,extent:M$K.fromJSON(Mt.extent)}))}querySnapping(_t,Tt={}){return this.load(Tt).then(()=>this._connection.invoke("querySnapping",_t,Tt))}async _applyEdits(_t){if(!this._connection)throw new s$2i("feature-layer-source:edit-failure","Memory source not loaded");const Tt=this.layer.objectIdField;let Mt=null;const Pt=[],Ft=[];await Promise.all([this._prepareClientMapping(_t.addFeatures,null),this._prepareClientMapping(_t.updateFeatures,null)]);const Dt=Xt=>"objectId"in Xt&&Xt.objectId!=null?Xt.objectId:"attributes"in Xt&&Xt.attributes[Tt]!=null?Xt.attributes[Tt]:null;if(_t.addFeatures&&(Mt=this._prepareAddFeatures(_t.addFeatures)),_t.deleteFeatures)for(const Xt of _t.deleteFeatures){const Ht=Dt(Xt);Ht!=null&&Pt.push(Ht)}const Nt=_t.updateFeatures&&this._idToClientGraphic?new Map:null;if(_t.updateFeatures){for(const Xt of _t.updateFeatures)if(Ft.push(this._serializeFeature(Xt)),Nt){const Ht=Dt(Xt);Ht!=null&&Nt.set(Ht,Xt)}}i$12(Mt?Mt.features:null,Ft,this.layer.spatialReference);const{fullExtent:Vt,featureEditResults:zt}=await this._connection.invoke("applyEdits",{adds:Mt?Mt.features:[],updates:Ft,deletes:Pt});return this.fullExtent=Vt,Mt&&Mt.finish(zt.uidToObjectId),this._updateClientGraphicIds(Nt,zt),this._createEditsResult(zt)}async _prepareClientMapping(_t,Tt){if(this.layerOrSourceGeometryType!=="mesh"||t$2e(_t))return;const Mt=[];for(const{geometry:Pt}of _t)!r$1P(Pt)||Pt.type!=="mesh"||Pt.hasExtent||Pt.loaded||Mt.push(Pt.load({signal:Tt}));Mt.length&&await Promise.all(Mt)}_updateClientGraphicIds(_t,Tt){if(this._idToClientGraphic){if(_t)for(const Mt of Tt.updateResults){if(!Mt.success)continue;const Pt=_t.get(Mt.objectId);Pt!=null&&this._addIdToClientGraphic(Pt)}for(const Mt of Tt.deleteResults)Mt.success&&this._idToClientGraphic.delete(Mt.objectId)}}_createEditsResult(_t){return{addFeatureResults:_t.addResults?_t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:_t.updateResults?_t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:_t.deleteResults?_t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(_t){const Tt=_t.success===!0?null:_t.error||{code:void 0,description:void 0};return{objectId:_t.objectId,globalId:_t.globalId,error:Tt?new s$2i("feature-layer-source:edit-failure",Tt.description,{code:Tt.code}):null}}_prepareAddFeatures(_t){const Tt=new Map,Mt=new Array(_t.length);let Pt=null;for(let Dt=0;Dt<_t.length;Dt++){const Nt=_t[Dt],Vt=this._serializeFeature(Nt);!Pt&&r$1P(Nt.geometry)&&(Pt=Nt.geometry.type),Mt[Dt]=Vt,Tt.set(`${Vt.uid}`,Nt)}const Ft=this;return{features:Mt,inferredGeometryType:Pt,finish(Dt){const Nt=Ft.sourceJSON.objectIdField;for(const Vt in Dt){const zt=Dt[Vt],Xt=Tt.get(Vt);Xt&&(Xt.attributes||(Xt.attributes={}),zt===-1?delete Xt.attributes[Nt]:Xt.attributes[Nt]=zt,Ft._addIdToClientGraphic(Xt))}}}}_addIdToClientGraphic(_t){if(!this._idToClientGraphic)return;const Tt=this.sourceJSON.objectIdField,Mt=_t.attributes&&_t.attributes[Tt];Mt!=null&&this._idToClientGraphic.set(Mt,_t)}get layerOrSourceGeometryType(){var _t,Tt,Mt;return(Mt=(_t=this.layer)==null?void 0:_t.geometryType)!=null?Mt:(Tt=this.sourceJSON)==null?void 0:Tt.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(_t){return this._geometryTypeRequiresClientGraphicMapping(_t.type)}_geometryTypeRequiresClientGraphicMapping(_t){return _t==="mesh"||_t==="multipatch"||_t==="extent"}_serializeFeature(_t){const{attributes:Tt}=_t,Mt=this._geometryForSerialization(_t),Pt=(T$c++).toString();return Mt?{uid:Pt,geometry:Mt.toJSON(),attributes:Tt}:{uid:Pt,attributes:Tt}}_geometryForSerialization(_t){const{geometry:Tt}=_t;return t$2e(Tt)?null:this._geometryRequiresClientGraphicMapping(Tt)?Tt.extent?v$V.fromExtent(Tt.extent):null:Tt}async _startWorker(_t){this._connection=await u$1m("MemorySourceWorker",{strategy:a$32("feature-layers-workers")?"dedicated":"local",signal:_t});const{fields:Tt,spatialReference:Mt,objectIdField:Pt,hasM:Ft,hasZ:Dt,timeInfo:Nt}=this.layer,Vt=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,_t);const zt=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",Qt=>{F$d.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),Qt.preventDefault()}));const Xt={features:zt.features,fields:Tt&&Tt.map(Qt=>Qt.toJSON()),geometryType:t$1F.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&Ft,hasZ:this.layerOrSourceGeometryType==="mesh"||Dt,objectIdField:Pt,spatialReference:Vt?null:Mt&&Mt.toJSON(),timeInfo:Nt?Nt.toJSON():null},Ht=await this._connection.invoke("load",Xt,{signal:_t});for(const Qt of Ht.warnings)F$d.warn(Qt.message,{layer:this.layer,warning:Qt});Ht.featureErrors.length&&F$d.warn(`Encountered ${Ht.featureErrors.length} validation errors while loading features`,Ht.featureErrors);const Wt=Ht.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(zt.inferredGeometryType)&&(Wt.geometryType=t$1F.toJSON(zt.inferredGeometryType)),this.sourceJSON=Wt,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),zt.finish(Ht.assignedObjectIds)}};e$2a([n$2J({Type:g$$,ensureType:b$1b(g$$)})],G$a.prototype,"itemType",void 0),e$2a([d$25()],G$a.prototype,"type",void 0),e$2a([d$25({constructOnly:!0})],G$a.prototype,"layer",void 0),e$2a([d$25({readOnly:!0})],G$a.prototype,"workerGeometryType",null),e$2a([d$25()],G$a.prototype,"sourceJSON",void 0),G$a=e$2a([n$2L("esri.layers.graphics.sources.MemorySource")],G$a);function t$R(_t){return"portalItem"in _t}const i$11=_t=>{let Tt=class extends _t{get apiKey(){var Mt;return this._isOverridden("apiKey")?this._get("apiKey"):t$R(this)?(Mt=this.portalItem)==null?void 0:Mt.apiKey:null}set apiKey(Mt){Mt!=null?this._override("apiKey",Mt):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return e$2a([d$25({type:String})],Tt.prototype,"apiKey",null),Tt=e$2a([n$2L("esri.layers.mixins.APIKeyMixin")],Tt),Tt},c$1n={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},a$19=Object.values(c$1n),f$C=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${a$19.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),v$w=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${a$19.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),p$1i=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function d$S(_t){return!!f$C.test(_t)}function m$O(_t){if(t$2e(_t))return null;const Tt=j$10(_t),Mt=Tt.path.match(f$C)||Tt.path.match(v$w);if(!Mt)return null;const[,Pt,Ft,Dt,Nt]=Mt,Vt=Ft.indexOf("/");return{title:h$I(Vt!==-1?Ft.slice(Vt+1):Ft),serverType:c$1n[Dt.toLowerCase()],sublayer:Nt!=null&&Nt!==""?parseInt(Nt,10):null,url:{path:Pt}}}function w$q(_t){const Tt=j$10(_t).path.match(p$1i);return Tt?{serviceUrl:Tt[1],sublayerId:Number(Tt[2])}:null}function h$I(_t){return(_t=_t.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+_t.slice(1)}function y$D(_t,Tt){const Mt=[];if(_t){const Pt=m$O(_t);r$1P(Pt)&&Pt.title&&Mt.push(Pt.title)}if(Tt){const Pt=h$I(Tt);Mt.push(Pt)}if(Mt.length===2){if(Mt[0].toLowerCase().includes(Mt[1].toLowerCase()))return Mt[0];if(Mt[1].toLowerCase().includes(Mt[0].toLowerCase()))return Mt[1]}return Mt.join(" - ")}function g$z(_t){if(!_t)return!1;const Tt=".arcgis.com/",Mt="//services",Pt="//tiles",Ft="//features",Dt=(_t=_t.toLowerCase()).includes(Tt),Nt=_t.includes(Mt)||_t.includes(Pt)||_t.includes(Ft);return Dt&&Nt}function S$h(_t,Tt){return _t&&Ct(At$1(_t,Tt))}function L$f(_t){let{url:Tt}=_t;if(!Tt)return{url:Tt};Tt=At$1(Tt,_t.logger);const Mt=j$10(Tt),Pt=m$O(Mt.path);let Ft;if(r$1P(Pt))Pt.sublayer!=null&&_t.layer.layerId==null&&(Ft=Pt.sublayer),Tt=Pt.url.path;else if(_t.nonStandardUrlAllowed){const Dt=w$q(Mt.path);r$1P(Dt)&&(Tt=Dt.serviceUrl,Ft=Dt.sublayerId)}return{url:Ct(Tt),layerId:Ft}}function b$r(_t,Tt,Mt,Pt,Ft){p$2B(Tt,Pt,"url",Ft),Pt.url&&_t.layerId!=null&&(Pt.url=G$q(Pt.url,Mt,_t.layerId.toString()))}function I$f(_t){if(!_t)return!1;const Tt=_t.toLowerCase(),Mt=Tt.includes("/services/"),Pt=Tt.includes("/mapserver/wmsserver"),Ft=Tt.includes("/imageserver/wmsserver"),Dt=Tt.includes("/wmsserver");return Mt&&(Pt||Ft||Dt)}const p$1h=_t=>{let Tt=class extends _t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const Mt=m$O(this.url);if(r$1P(Mt)&&Mt.title)return Mt.title}return this._get("title")||""}set title(Mt){this._set("title",Mt)}set url(Mt){this._set("url",S$h(Mt,s$2l.getLogger(this.declaredClass)))}};return e$2a([d$25()],Tt.prototype,"title",null),e$2a([d$25({type:String})],Tt.prototype,"url",null),Tt=e$2a([n$2L("esri.layers.mixins.ArcGISService")],Tt),Tt},i$10={read:{reader:n$1H},write:{allowNull:!0,writer:a$1K}},a$18=_t=>{let Tt=class extends _t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return e$2a([d$25({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],Tt.prototype,"blendMode",void 0),e$2a([d$25({json:{read:!1,write:!1,origins:{"web-map":i$10,"portal-item":i$10}}})],Tt.prototype,"effect",void 0),Tt=e$2a([n$2L("esri.layers.mixins.BlendLayer")],Tt),Tt},o$O=_t=>{let Tt=class extends _t{constructor(){super(...arguments),this.customParameters=null}};return e$2a([d$25({type:Object,json:{write:{overridePolicy:Mt=>({enabled:!!(Mt&&Object.keys(Mt).length>0)})}}})],Tt.prototype,"customParameters",void 0),Tt=e$2a([n$2L("esri.layers.mixins.CustomParametersMixin")],Tt),Tt};var c$1m;const m$N=new s$1_({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),u$O=new s$1_({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let d$R=c$1m=class extends l$2v{constructor(_t){super(_t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(_t={}){const{where:Tt,geometry:Mt,spatialRelationship:Pt,timeExtent:Ft,objectIds:Dt,units:Nt,distance:Vt}=this;return new b$H({geometry:m$2e(Mt),objectIds:m$2e(Dt),spatialRelationship:Pt,timeExtent:m$2e(Ft),where:Tt,units:Nt,distance:Vt,..._t})}clone(){const{where:_t,geometry:Tt,spatialRelationship:Mt,timeExtent:Pt,objectIds:Ft,units:Dt,distance:Nt}=this;return new c$1m({geometry:m$2e(Tt),objectIds:m$2e(Ft),spatialRelationship:Mt,timeExtent:m$2e(Pt),where:_t,units:Dt,distance:Nt})}};e$2a([d$25({type:String,json:{write:!0}})],d$R.prototype,"where",void 0),e$2a([d$25({types:i$2i,json:{write:!0}})],d$R.prototype,"geometry",void 0),e$2a([d$25({type:m$N.apiValues,json:{name:"spatialRel",read:{reader:m$N.read},write:{allowNull:!1,writer:m$N.write,overridePolicy(){return{enabled:r$1P(this.geometry)}}}}})],d$R.prototype,"spatialRelationship",void 0),e$2a([d$25({type:Number,json:{write:{overridePolicy(_t){return{enabled:_t!=null&&this.geometry!=null}}}}})],d$R.prototype,"distance",void 0),e$2a([d$25({type:[Number],json:{write:!0}})],d$R.prototype,"objectIds",void 0),e$2a([d$25({type:u$O.apiValues,json:{read:u$O.read,write:{writer:u$O.write,overridePolicy(_t){return{enabled:_t!=null&&this.geometry!=null}}}}})],d$R.prototype,"units",void 0),e$2a([d$25({type:y$X,json:{write:!0}})],d$R.prototype,"timeExtent",void 0),d$R=c$1m=e$2a([n$2L("esri.layers.support.FeatureFilter")],d$R);const y$C=d$R;var d$Q;const n$1b={read:{reader:n$1H},write:{writer:a$1K,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},a$17={read:{reader:n$1H},write:{writer:a$1K,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},p$1g={name:"showExcludedLabels",default:!0};let m$M=d$Q=class extends l$2v{constructor(_t){super(_t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(_t,Tt){var Pt,Ft;const Mt=super.write(_t,Tt);if(Tt!=null&&Tt.origin){if(Mt.filter){const Dt=Object.keys(Mt.filter);if(Dt.length>1||Dt[0]!=="where")return(Pt=Tt.messages)==null||Pt.push(new s$2i("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:Tt.layer,effect:this})),null}if("showExcludedLabels"in Mt)return(Ft=Tt.messages)==null||Ft.push(new s$2i("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:Tt.layer,effect:this})),null}return Mt}clone(){return new d$Q({filter:r$1P(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};e$2a([d$25({type:y$C,json:{write:{allowNull:!0,writer(_t,Tt,Mt,Pt){const Ft=_t==null?void 0:_t.write({},Pt);Ft&&Object.keys(Ft).length!==0?o$2d(Mt,Ft,Tt):o$2d(Mt,null,Tt)}}}})],m$M.prototype,"filter",void 0),e$2a([d$25({json:{write:!0,origins:{"web-map":n$1b,"portal-item":n$1b}}})],m$M.prototype,"includedEffect",void 0),e$2a([d$25({json:{write:!0,origins:{"web-map":a$17,"portal-item":a$17}}})],m$M.prototype,"excludedEffect",void 0),e$2a([d$25({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":p$1g,"portal-item":p$1g}}})],m$M.prototype,"excludedLabelsVisible",void 0),m$M=d$Q=e$2a([n$2L("esri.layers.support.FeatureEffect")],m$M);const w$p=m$M,t$Q={write:{allowNull:!0}},p$1f=_t=>{let Tt=class extends _t{constructor(){super(...arguments),this.featureEffect=null}};return e$2a([d$25({type:w$p,json:{origins:{"web-map":t$Q,"portal-item":t$Q}}})],Tt.prototype,"featureEffect",void 0),Tt=e$2a([n$2L("esri.layers.mixins.FeatureEffectLayer")],Tt),Tt},e$Q={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function a$16(_t){if(!_t)return _t;const{start:Tt,end:Mt}=_t;return new y$X({start:r$1P(Tt)?n$1w(Tt,-Tt.getTimezoneOffset(),"minutes"):Tt,end:r$1P(Mt)?n$1w(Mt,-Mt.getTimezoneOffset(),"minutes"):Mt})}function f$B(_t){if(!_t)return _t;const{start:Tt,end:Mt}=_t;return new y$X({start:r$1P(Tt)?n$1w(Tt,Tt.getTimezoneOffset(),"minutes"):Tt,end:r$1P(Mt)?n$1w(Mt,Mt.getTimezoneOffset(),"minutes"):Mt})}var i$$;let p$1e=i$$=class extends l$2v{async collectRequiredFields(_t,Tt){return b$11(_t,Tt,this.expression)}clone(){return new i$$({expression:this.expression,title:this.title})}equals(_t){return this.expression===_t.expression&&this.title===_t.title}};e$2a([d$25({type:String,json:{write:!0}})],p$1e.prototype,"expression",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$1e.prototype,"title",void 0),p$1e=i$$=e$2a([n$2L("esri.layers.support.FeatureExpressionInfo")],p$1e);const c$1l=p$1e;function n$1a(_t){return m$_[_t]!=null}function r$L(_t){return 1/(m$_[_t]||1)}function e$P(){const _t=Object.keys(m$_);return _t.sort(),_t}const o$N=e$P();var m$L;const d$P=o$1O()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),c$1k=new s$1_({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let h$H=m$L=class extends l$2v{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(_t,Tt){return _t!=null?_t:Tt.featureExpression&&Tt.featureExpression.value===0?{expression:"0"}:void 0}writeFeatureExpressionInfo(_t,Tt,Mt,Pt){Tt[Mt]=_t.write({},Pt),_t.expression==="0"&&(Tt.featureExpression={value:0})}get mode(){const{offset:_t,featureExpressionInfo:Tt}=this;return this._isOverridden("mode")?this._get("mode"):r$1P(_t)||Tt?"relative-to-ground":"on-the-ground"}set mode(_t){this._override("mode",_t)}set unit(_t){this._set("unit",_t)}write(_t,Tt){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(_t,Tt):null}clone(){return new m$L({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(_t){return this.mode===_t.mode&&this.offset===_t.offset&&this.unit===_t.unit&&w$1a(this.featureExpressionInfo,_t.featureExpressionInfo)}};e$2a([d$25({type:c$1l,json:{write:!0}})],h$H.prototype,"featureExpressionInfo",void 0),e$2a([o$1U("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],h$H.prototype,"readFeatureExpressionInfo",null),e$2a([r$1C("featureExpressionInfo",{featureExpressionInfo:{type:c$1l},"featureExpression.value":{type:[0]}})],h$H.prototype,"writeFeatureExpressionInfo",null),e$2a([d$25({type:d$P.apiValues,nonNullable:!0,json:{type:d$P.jsonValues,read:d$P.read,write:{writer:d$P.write,isRequired:!0}}})],h$H.prototype,"mode",null),e$2a([d$25({type:Number,json:{write:!0}})],h$H.prototype,"offset",void 0),e$2a([d$25({type:o$N,json:{type:String,read:c$1k.read,write:c$1k.write}})],h$H.prototype,"unit",null),h$H=m$L=e$2a([n$2L("esri.layers.support.ElevationInfo")],h$H);const x$m=h$H,l$$={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},p$1d={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(_t,Tt)=>!Tt.disablePopup},write:{enabled:!0,writer(_t,Tt,Mt){Tt[Mt]=!_t}}}},m$K={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},f$A={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:p$2B}}},c$1j={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},d$O={value:null,type:x$m,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function y$B(_t){return{type:_t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const w$o={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},u$N={...w$o,json:{...w$o.json,origins:{"web-document":{...w$o.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(_t,Tt,Mt)=>Mt&&Mt.origin!=="service"||!Tt.drawingInfo||Tt.drawingInfo.transparency===void 0?Tt.layerDefinition&&Tt.layerDefinition.drawingInfo&&Tt.layerDefinition.drawingInfo.transparency!==void 0?r$1q(Tt.layerDefinition.drawingInfo.transparency):void 0:r$1q(Tt.drawingInfo.transparency)}}},g$y={type:y$X,readOnly:!0,get(){var Vt,zt;if(!((Vt=this.layer)!=null&&Vt.timeInfo))return null;const{datesInUnknownTimezone:_t,timeOffset:Tt,useViewTime:Mt}=this.layer,Pt=(zt=this.view)==null?void 0:zt.timeExtent;let Ft=this.layer.timeExtent;_t&&(Ft=f$B(Ft));let Dt=Mt?Pt&&Ft?Pt.intersection(Ft):Pt||Ft:Ft;if(!Dt||Dt.isEmpty||Dt.isAllTime)return Dt;Tt&&(Dt=Dt.offset(-Tt.value,Tt.unit)),_t&&(Dt=a$16(Dt));const Nt=this._get("timeExtent");return Dt.equals(Nt)?Nt:Dt}},j$q={type:M$K,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(_t,Tt)=>{const Mt=M$K.fromJSON(_t);return Tt.spatialReference!=null&&typeof Tt.spatialReference=="object"&&(Mt.spatialReference=k$y.fromJSON(Tt.spatialReference)),Mt}}}},read:!1}},v$v={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},b$q={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},I$e={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},D$d={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},c$1i=_t=>{let Tt=class extends _t{constructor(){super(...arguments),this.title=null}writeListMode(Mt,Pt,Ft,Dt){(Dt&&Dt.layerContainerType==="ground"||Mt&&g$1f(this,Ft,{},Dt))&&(Pt[Ft]=Mt)}writeOperationalLayerType(Mt,Pt,Ft,Dt){!Mt||Dt&&Dt.layerContainerType==="tables"||(Pt.layerType=Mt)}writeTitle(Mt,Pt){Pt.title=Mt||"Layer"}read(Mt,Pt){Pt&&(Pt.layer=this),d$21(this,Mt,Ft=>super.read(Mt,Ft),Pt)}write(Mt,Pt){var Nt,Vt;if(Pt!=null&&Pt.origin){const zt=`${Pt.origin}/${Pt.layerContainerType||"operational-layers"}`,Xt=e$Q[zt];let Ht=Xt&&Xt[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&zt==="web-scene/operational-layers"&&(Ht=!1),!Ht)return(Nt=Pt.messages)==null||Nt.push(new s$2i("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${zt}'`,{layer:this})),null}const Ft=super.write(Mt,{...Pt,layer:this}),Dt=!!Pt&&!!Pt.messages&&!!Pt.messages.filter(zt=>zt instanceof s$2i&&zt.name==="web-document-write:property-required").length;return V$o(Ft==null?void 0:Ft.url)?((Vt=Pt==null?void 0:Pt.messages)==null||Vt.push(new s$2i("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&Dt?null:Ft}beforeSave(){}};return e$2a([d$25({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],Tt.prototype,"id",void 0),e$2a([d$25(D$d)],Tt.prototype,"listMode",void 0),e$2a([r$1C("listMode")],Tt.prototype,"writeListMode",null),e$2a([d$25({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],Tt.prototype,"operationalLayerType",void 0),e$2a([r$1C("operationalLayerType")],Tt.prototype,"writeOperationalLayerType",null),e$2a([d$25(w$o)],Tt.prototype,"opacity",void 0),e$2a([d$25({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],Tt.prototype,"title",void 0),e$2a([r$1C([void 0,"web-scene"],"title")],Tt.prototype,"writeTitle",null),e$2a([d$25({type:Boolean,json:{name:"visibility"}})],Tt.prototype,"visible",void 0),Tt=e$2a([n$2L("esri.layers.mixins.OperationalLayer")],Tt),Tt};var i$_;const p$1c=new s$1_({asc:"ascending",desc:"descending"});let n$19=i$_=class extends l$2v{constructor(_t){super(_t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new i$_({field:this.field,valueExpression:this.valueExpression,order:this.order})}};e$2a([d$25({type:String,json:{write:!0}})],n$19.prototype,"field",void 0),e$2a([d$25({type:String,json:{write:!0}})],n$19.prototype,"valueExpression",void 0),e$2a([d$25({type:p$1c.apiValues,json:{read:p$1c.read,write:p$1c.write}})],n$19.prototype,"order",void 0),n$19=i$_=e$2a([n$2L("esri.layers.support.OrderByInfo")],n$19);const c$1h=n$19;function n$18(_t,Tt,Mt){if(!_t)return null;const Pt=_t.find(Dt=>!!Dt.field);if(!Pt)return null;const Ft=new c$1h;return Ft.read(Pt,Mt),[Ft]}function c$1g(_t,Tt,Mt,Pt){const Ft=_t.find(Dt=>!!Dt.field);Ft&&o$2d(Mt,[Ft.toJSON()],Tt)}const p$1b=_t=>{let Tt=class extends _t{constructor(){super(...arguments),this.orderBy=null}};return e$2a([d$25({type:[c$1h],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:n$18},write:{target:"layerDefinition.orderBy",writer:c$1g}}})],Tt.prototype,"orderBy",void 0),Tt=e$2a([n$2L("esri.layers.mixins.OrderedLayer")],Tt),Tt},w$n=s$2l.getLogger("esri.layers.mixins.PortalLayer"),v$u=_t=>{let Tt=class extends _t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var Mt;(Mt=this.portalItem)==null||Mt.destroy(),this.portalItem=null}set portalItem(Mt){Mt!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",Mt))}readPortalItem(Mt,Pt,Ft){if(Pt.itemId)return new b$17({id:Pt.itemId,portal:Ft&&Ft.portal})}writePortalItem(Mt,Pt){Mt&&Mt.id&&(Pt.itemId=Mt.id)}async loadFromPortal(Mt,Pt){if(this.portalItem&&this.portalItem.id)try{const Ft=await __vitePreload(()=>import("./layersLoader.e91b56e4.js").then(Dt=>Dt.l),["assets/layersLoader.e91b56e4.js","assets/lazyLayerLoader.c995b154.js","assets/jsonContext.2a8214cb.js"]);return f$1M(Pt),await Ft.load({instance:this,supportedTypes:Mt.supportedTypes,validateItem:Mt.validateItem,supportsData:Mt.supportsData},Pt)}catch(Ft){throw g$1l(Ft)||w$n.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${Ft}`),Ft}}async finishLoadEditablePortalLayer(Mt){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(Mt).catch(Pt=>(w$18(Pt),!0)))}async _fetchUserHasEditingPrivileges(Mt){const Pt=this.url?n$2D==null?void 0:n$2D.findCredential(this.url):null;if(!Pt)return!0;const Ft=P$a.credential===Pt?P$a.user:await this._fetchEditingUser(Mt);return P$a.credential=Pt,P$a.user=Ft,t$2e(Ft)||Ft.privileges==null||Ft.privileges.includes("features:user:edit")}async _fetchEditingUser(Mt){var Ht,Wt;const Pt=(Wt=(Ht=this.portalItem)==null?void 0:Ht.portal)==null?void 0:Wt.user;if(Pt)return Pt;const Ft=n$2D.findServerInfo(this.url);if(!(Ft!=null&&Ft.owningSystemUrl))return null;const Dt=`${Ft.owningSystemUrl}/sharing/rest`,Nt=B$q.getDefault();if(Nt&&Nt.loaded&&F$x(Nt.restUrl)===F$x(Dt))return Nt.user;const Vt=`${Dt}/community/self`,zt=r$1P(Mt)?Mt.signal:null,Xt=await a$2S(U$v(Vt,{authMode:"no-prompt",query:{f:"json"},signal:zt}));return Xt.ok?p$3k.fromJSON(Xt.value.data):null}read(Mt,Pt){Pt&&(Pt.layer=this),super.read(Mt,Pt)}write(Mt,Pt){const Ft=Pt&&Pt.portal,Dt=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||B$q.getDefault());return Ft&&Dt&&!N$u(Dt.restUrl,Ft.restUrl)?(Pt.messages&&Pt.messages.push(new s$2i("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(Mt,{...Pt,layer:this})}};return e$2a([d$25({type:b$17})],Tt.prototype,"portalItem",null),e$2a([o$1U("web-document","portalItem",["itemId"])],Tt.prototype,"readPortalItem",null),e$2a([r$1C("web-document","portalItem",{itemId:{type:String}})],Tt.prototype,"writePortalItem",null),e$2a([d$25({clonable:!1})],Tt.prototype,"resourceReferences",void 0),e$2a([d$25({readOnly:!0})],Tt.prototype,"userHasEditingPrivileges",void 0),Tt=e$2a([n$2L("esri.layers.mixins.PortalLayer")],Tt),Tt},P$a={credential:null,user:null},t$P=new j$11,o$M=new WeakMap;function n$17(_t){c$1f(_t)&&t$P.push(_t)}function s$Q(_t){c$1f(_t)&&t$P.includes(_t)&&t$P.remove(_t)}function c$1f(_t){return _t&&typeof _t=="object"&&"refreshInterval"in _t&&"refresh"in _t}function i$Z(_t,Tt){return Number.isFinite(_t)&&Number.isFinite(Tt)?Tt<=0?_t:i$Z(Tt,_t%Tt):0}let f$z=0,a$15=0;function l$_(){var Tt;const _t=Date.now();for(const Mt of t$P)Mt.refreshInterval&&_t-((Tt=o$M.get(Mt))!=null?Tt:0)+5>=6e4*Mt.refreshInterval&&(o$M.set(Mt,_t),Mt.refresh(_t))}l$2A(()=>{const _t=Date.now();let Tt=0;for(const Mt of t$P)Tt=i$Z(Math.round(6e4*Mt.refreshInterval),Tt),Mt.refreshInterval?o$M.get(Mt)||o$M.set(Mt,_t):o$M.delete(Mt);if(Tt!==a$15){if(a$15=Tt,clearInterval(f$z),a$15===0)return void(f$z=0);f$z=setInterval(l$_,a$15)}});const n$16=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=x$V(()=>this.hasDataChanged()),this.when().then(()=>{n$17(this)},()=>{})}destroy(){s$Q(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(Mt=Date.now()){j$17(this._debounceHasDataChanged()).then(Pt=>{Pt&&this._set("refreshTimestamp",Mt),this.emit("refresh",{dataChanged:Pt})},Pt=>{s$2l.getLogger(this.declaredClass).error(Pt),this.emit("refresh",{dataChanged:!1,error:Pt})})}async hasDataChanged(){return!0}};return e$2a([d$25({type:Number,cast:Mt=>Mt>=.1?Mt:Mt<=0?0:.1,json:{write:!0}})],Tt.prototype,"refreshInterval",void 0),e$2a([d$25({readOnly:!0})],Tt.prototype,"refreshTimestamp",void 0),e$2a([d$25()],Tt.prototype,"refreshParameters",null),Tt=e$2a([n$2L("esri.layers.mixins.RefreshableLayer")],Tt),Tt},t$O=_t=>{let Tt=class extends _t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const Mt={minScale:this.minScale,maxScale:this.maxScale},Pt=this.parent;Pt&&"effectiveScaleRange"in Pt&&r$K(Mt,Pt.effectiveScaleRange);const Ft=this._get("effectiveScaleRange");return Ft&&Ft.minScale===Mt.minScale&&Ft.maxScale===Mt.maxScale?Ft:Mt}};return e$2a([d$25({type:Number,nonNullable:!0,json:{write:!0}})],Tt.prototype,"minScale",void 0),e$2a([d$25({type:Number,nonNullable:!0,json:{write:!0}})],Tt.prototype,"maxScale",void 0),e$2a([d$25({readOnly:!0})],Tt.prototype,"effectiveScaleRange",null),Tt=e$2a([n$2L("esri.layers.mixins.ScaleRangeLayer")],Tt),Tt};function r$K(_t,Tt){return _t.minScale=_t.minScale>0?Tt.minScale>0?Math.min(_t.minScale,Tt.minScale):_t.minScale:Tt.minScale,_t.maxScale=_t.maxScale>0?Tt.maxScale>0?Math.max(_t.maxScale,Tt.maxScale):_t.maxScale:Tt.maxScale,_t}const e$O=o$1O()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var p$1a;let a$14=p$1a=class extends l$2v{constructor(_t){super(_t),this.value=0,this.unit="milliseconds"}toMilliseconds(){return g$J(this.value,this.unit,"milliseconds")}clone(){return new p$1a({value:this.value,unit:this.unit})}};e$2a([d$25({type:Number,json:{write:!0},nonNullable:!0})],a$14.prototype,"value",void 0),e$2a([d$25({type:e$O.apiValues,json:{type:e$O.jsonValues,read:e$O.read,write:e$O.write},nonNullable:!0})],a$14.prototype,"unit",void 0),a$14=p$1a=e$2a([n$2L("esri.TimeInterval")],a$14);const l$Z=a$14;var i$Y;let a$13=i$Y=class extends l$2v{constructor(_t){super(_t),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(_t,Tt){return Tt.respectsDaylightSaving!==void 0?Tt.respectsDaylightSaving:Tt.respectDaylightSaving!==void 0&&Tt.respectDaylightSaving}clone(){const{respectsDaylightSaving:_t,timezone:Tt}=this;return new i$Y({respectsDaylightSaving:_t,timezone:Tt})}};e$2a([d$25({type:Boolean,json:{write:!0}})],a$13.prototype,"respectsDaylightSaving",void 0),e$2a([o$1U("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],a$13.prototype,"readRespectsDaylightSaving",null),e$2a([d$25({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],a$13.prototype,"timezone",void 0),a$13=i$Y=e$2a([n$2L("esri.layers.support.TimeReference")],a$13);const p$19=a$13;var d$N;let c$1e=d$N=class extends l$2v{constructor(_t){super(_t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(_t,Tt){if(!Tt.timeExtent||!Array.isArray(Tt.timeExtent)||Tt.timeExtent.length!==2)return null;const Mt=new Date(Tt.timeExtent[0]),Pt=new Date(Tt.timeExtent[1]);return new y$X({start:Mt,end:Pt})}writeFullTimeExtent(_t,Tt){_t&&r$1P(_t.start)&&r$1P(_t.end)?Tt.timeExtent=[_t.start.getTime(),_t.end.getTime()]:Tt.timeExtent=null}readInterval(_t,Tt){return Tt.timeInterval&&Tt.timeIntervalUnits?new l$Z({value:Tt.timeInterval,unit:e$O.fromJSON(Tt.timeIntervalUnits)}):Tt.defaultTimeInterval&&Tt.defaultTimeIntervalUnits?new l$Z({value:Tt.defaultTimeInterval,unit:e$O.fromJSON(Tt.defaultTimeIntervalUnits)}):null}writeInterval(_t,Tt){if(_t){const Mt=_t.toJSON();Tt.timeInterval=Mt.value,Tt.timeIntervalUnits=Mt.unit}else Tt.timeInterval=null,Tt.timeIntervalUnits=null}clone(){const{cumulative:_t,endField:Tt,hasLiveData:Mt,interval:Pt,startField:Ft,timeReference:Dt,fullTimeExtent:Nt,trackIdField:Vt,useTime:zt}=this;return new d$N({cumulative:_t,endField:Tt,hasLiveData:Mt,interval:Pt,startField:Ft,timeReference:m$2e(Dt),fullTimeExtent:m$2e(Nt),trackIdField:Vt,useTime:zt})}};e$2a([d$25({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],c$1e.prototype,"cumulative",void 0),e$2a([d$25({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],c$1e.prototype,"endField",void 0),e$2a([d$25({type:y$X,json:{write:{enabled:!0,allowNull:!0}}})],c$1e.prototype,"fullTimeExtent",void 0),e$2a([o$1U("fullTimeExtent",["timeExtent"])],c$1e.prototype,"readFullTimeExtent",null),e$2a([r$1C("fullTimeExtent")],c$1e.prototype,"writeFullTimeExtent",null),e$2a([d$25({type:Boolean,json:{write:!0}})],c$1e.prototype,"hasLiveData",void 0),e$2a([d$25({type:l$Z,json:{write:{enabled:!0,allowNull:!0}}})],c$1e.prototype,"interval",void 0),e$2a([o$1U("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],c$1e.prototype,"readInterval",null),e$2a([r$1C("interval")],c$1e.prototype,"writeInterval",null),e$2a([d$25({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],c$1e.prototype,"startField",void 0),e$2a([d$25({type:p$19,json:{write:{enabled:!0,allowNull:!0}}})],c$1e.prototype,"timeReference",void 0),e$2a([d$25({type:String,json:{write:{enabled:!0,allowNull:!0}}})],c$1e.prototype,"trackIdField",void 0),e$2a([d$25({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],c$1e.prototype,"useTime",void 0),c$1e=d$N=e$2a([n$2L("esri.layers.support.TimeInfo")],c$1e);const v$t=c$1e,a$12=_t=>{let Tt=class extends _t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(Mt,Pt){const Ft=Pt.timeInfo.exportOptions;if(!Ft)return null;const Dt=Ft.timeOffset,Nt=e$O.fromJSON(Ft.timeOffsetUnits);return Dt&&Nt?new l$Z({value:Dt,unit:Nt}):null}set timeInfo(Mt){m$1P(Mt,this.fieldsIndex),this._set("timeInfo",Mt)}};return e$2a([d$25({type:y$X,json:{write:!1}})],Tt.prototype,"timeExtent",void 0),e$2a([d$25({type:l$Z})],Tt.prototype,"timeOffset",void 0),e$2a([o$1U("service","timeOffset",["timeInfo.exportOptions"])],Tt.prototype,"readOffset",null),e$2a([d$25({value:null,type:v$t,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Tt.prototype,"timeInfo",null),e$2a([d$25({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],Tt.prototype,"useViewTime",void 0),Tt=e$2a([n$2L("esri.layers.mixins.TemporalLayer")],Tt),Tt};var t$N;let c$1d=t$N=class extends l$2v{constructor(_t){super(_t)}clone(){const{name:_t,fields:Tt,isAscending:Mt,isUnique:Pt,description:Ft}=this;return new t$N({name:_t,fields:Tt,isAscending:Mt,isUnique:Pt,description:Ft})}};e$2a([d$25({constructOnly:!0})],c$1d.prototype,"name",void 0),e$2a([d$25({constructOnly:!0})],c$1d.prototype,"fields",void 0),e$2a([d$25({constructOnly:!0})],c$1d.prototype,"isAscending",void 0),e$2a([d$25({constructOnly:!0})],c$1d.prototype,"isUnique",void 0),e$2a([d$25({constructOnly:!0})],c$1d.prototype,"description",void 0),c$1d=t$N=e$2a([n$2L("esri.layers.support.FeatureIndex")],c$1d);let t$M=class extends l$2v{constructor(){super(...arguments),this.type=null}};e$2a([d$25({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],t$M.prototype,"type",void 0),t$M=e$2a([n$2L("esri.layers.support.FeatureReduction")],t$M);var r$J;let e$N=r$J=class extends l$2v{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new r$J({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};e$2a([d$25({type:String,json:{write:!0}})],e$N.prototype,"statisticType",void 0),e$2a([d$25({type:String,json:{write:!0}})],e$N.prototype,"onStatisticField",void 0),e$2a([d$25({type:String,json:{write:!0}})],e$N.prototype,"onStatisticValueExpression",void 0),e$N=r$J=e$2a([n$2L("esri.layers.support.OutStatistic")],e$N);const p$18=e$N;var i$X;let p$17=i$X=class extends l$2v{constructor(){super(...arguments),this.name=null,this.outStatistic=null}clone(){return new i$X({name:this.name,outStatistic:this.outStatistic.clone()})}};e$2a([d$25({type:String,json:{write:!0}})],p$17.prototype,"name",void 0),e$2a([d$25({type:p$18,json:{write:!0}})],p$17.prototype,"outStatistic",void 0),p$17=i$X=e$2a([n$2L("esri.layers.support.AggregateField")],p$17);const c$1c=p$17,n$15="__begin__",r$I="__end__",s$P=new RegExp(n$15,"ig"),t$L=new RegExp(r$I,"ig"),o$L=new RegExp("^"+n$15,"i"),i$W=new RegExp(r$I+"$","i"),l$Y='"',a$11=l$Y+" + ",c$1b=" + "+l$Y;function p$16(_t){return _t.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function u$M(_t){return _t.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function x$l(_t){const Tt={expression:"",type:"none"};return _t.labelExpressionInfo?_t.labelExpressionInfo.value?(Tt.expression=_t.labelExpressionInfo.value,Tt.type="conventional"):_t.labelExpressionInfo.expression&&(Tt.expression=_t.labelExpressionInfo.expression,Tt.type="arcade"):_t.labelExpression!=null&&(Tt.expression=p$16(_t.labelExpression),Tt.type="conventional"),Tt}function f$y(_t){const Tt=x$l(_t);if(!Tt)return null;switch(Tt.type){case"conventional":return w$m(Tt.expression);case"arcade":return Tt.expression}return null}function g$x(_t){const Tt=x$l(_t);if(!Tt)return null;switch(Tt.type){case"conventional":return $$5(Tt.expression);case"arcade":return _$f(Tt.expression)}return null}function w$m(_t){let Tt;return _t?(Tt=r$1L(_t,Mt=>n$15+'$feature["'+Mt+'"]'+r$I),Tt=o$L.test(Tt)?Tt.replace(o$L,""):l$Y+Tt,Tt=i$W.test(Tt)?Tt.replace(i$W,""):Tt+l$Y,Tt=Tt.replace(s$P,a$11).replace(t$L,c$1b)):Tt='""',Tt}const E$k=/^\s*\{([^}]+)\}\s*$/i;function $$5(_t){const Tt=_t.match(E$k);return Tt&&Tt[1].trim()||null}const b$p=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,m$J=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,R$a=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function _$f(_t){if(!_t)return null;let Tt=b$p.exec(_t)||m$J.exec(_t);return Tt?Tt[1]||Tt[3]:(Tt=R$a.exec(_t),Tt?Tt[2]:null)}var l$X;let n$14=l$X=class extends l$2v{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(_t,Tt){return Tt.value?w$m(Tt.value):_t}writeExpression(_t,Tt,Mt){this.value!=null&&(_t=w$m(this.value)),_t!=null&&(Tt[Mt]=_t)}clone(){return new l$X({expression:this.expression,title:this.title,value:this.value})}};e$2a([d$25({type:String,json:{write:{writerEnsuresNonNull:!0}}})],n$14.prototype,"expression",void 0),e$2a([o$1U("expression",["expression","value"])],n$14.prototype,"readExpression",null),e$2a([r$1C("expression")],n$14.prototype,"writeExpression",null),e$2a([d$25({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],n$14.prototype,"title",void 0),e$2a([d$25({json:{read:!1,write:!1}})],n$14.prototype,"value",void 0),n$14=l$X=e$2a([n$2L("esri.layers.support.LabelExpressionInfo")],n$14);const a$10=n$14,e$M=[252,146,31,255],i$V=[153,153,153,255],l$W={type:"esriSMS",style:"esriSMSCircle",size:6,color:e$M,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o$K={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e$M},S$g={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},t$K={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},r$H={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},s$O={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},y$A={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},c$1a=y$1g.fromJSON(l$W),u$L=m$1F.fromJSON(o$K),a$$=S$A.fromJSON(S$g),y$z=m$1s.fromJSON(t$K);function J$7(_t){if(t$2e(_t))return null;switch(_t.type){case"mesh":return null;case"point":case"multipoint":return c$1a;case"polyline":return u$L;case"polygon":case"extent":return a$$}return null}const N$b=y$1g.fromJSON(r$H),O$d=m$1F.fromJSON(s$O),j$p=S$A.fromJSON(y$A);var y$y;const d$M=new s$1_({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function x$k(_t){var Tt;return!_t||_t.origin!=="service"&&((Tt=_t.layer)==null?void 0:Tt.type)!=="map-image"}function L$e(_t){return(_t==null?void 0:_t.type)==="map-image"}function P$9(_t){var Tt,Mt;return!!L$e(_t)&&!!((Mt=(Tt=_t.capabilities)==null?void 0:Tt.exportMap)!=null&&Mt.supportsArcadeExpressionForLabeling)}function g$w(_t){return x$k(_t)||P$9(_t.layer)}let E$j=y$y=class extends l$2v{constructor(_t){super(_t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=y$z,this.useCodedValues=void 0,this.where=null}static evaluateWhere(_t,Tt){const Mt=(Pt,Ft,Dt)=>{switch(Ft){case"=":return Pt==Dt;case"<>":return Pt!=Dt;case">":return Pt>Dt;case">=":return Pt>=Dt;case"<":return Pt<Dt;case"<=":return Pt<=Dt}return!1};try{if(_t==null)return!0;const Pt=_t.split(" ");if(Pt.length===3)return Mt(Tt[Pt[0]],Pt[1],Pt[2]);if(Pt.length===7){const Ft=Mt(Tt[Pt[0]],Pt[1],Pt[2]),Dt=Pt[3],Nt=Mt(Tt[Pt[4]],Pt[5],Pt[6]);switch(Dt){case"AND":return Ft&&Nt;case"OR":return Ft||Nt}}return!1}catch{console.log("Error.: can't parse = "+_t)}}readLabelExpression(_t,Tt){const Mt=Tt.labelExpressionInfo;if(!Mt||!Mt.value&&!Mt.expression)return _t}writeLabelExpression(_t,Tt,Mt){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)_t=u$M(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const Pt=_$f(this.labelExpressionInfo.expression);Pt&&(_t="["+Pt+"]")}}_t!=null&&(Tt[Mt]=_t)}writeLabelExpressionInfo(_t,Tt,Mt,Pt){if(_t==null&&this.labelExpression!=null&&x$k(Pt))_t=new a$10({expression:this.getLabelExpressionArcade()});else if(!_t)return;const Ft=_t.toJSON(Pt);Ft.expression&&(Tt[Mt]=Ft)}writeMaxScale(_t,Tt){(_t||this.minScale)&&(Tt.maxScale=_t)}writeMinScale(_t,Tt){(_t||this.maxScale)&&(Tt.minScale=_t)}getLabelExpression(){return x$l(this)}getLabelExpressionArcade(){return f$y(this)}getLabelExpressionSingleField(){return g$x(this)}hash(){return JSON.stringify(this)}clone(){return new y$y({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:m$2e(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:m$2e(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};e$2a([d$25({type:String,json:{write:!0}})],E$j.prototype,"name",void 0),e$2a([d$25({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],E$j.prototype,"allowOverrun",void 0),e$2a([d$25({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],E$j.prototype,"deconflictionStrategy",void 0),e$2a([d$25({type:String,json:{write:{overridePolicy(_t,Tt,Mt){return this.labelExpressionInfo&&(Mt==null?void 0:Mt.origin)==="service"&&P$9(Mt.layer)?{enabled:!1}:{allowNull:!0}}}}})],E$j.prototype,"labelExpression",void 0),e$2a([o$1U("labelExpression")],E$j.prototype,"readLabelExpression",null),e$2a([r$1C("labelExpression")],E$j.prototype,"writeLabelExpression",null),e$2a([d$25({type:a$10,json:{write:{overridePolicy:(_t,Tt,Mt)=>g$w(Mt)?{allowNull:!0}:{enabled:!1}}}})],E$j.prototype,"labelExpressionInfo",void 0),e$2a([r$1C("labelExpressionInfo")],E$j.prototype,"writeLabelExpressionInfo",null),e$2a([d$25({type:d$M.apiValues,json:{type:d$M.jsonValues,read:d$M.read,write:d$M.write}})],E$j.prototype,"labelPlacement",void 0),e$2a([d$25({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],E$j.prototype,"labelPosition",void 0),e$2a([d$25({type:Number})],E$j.prototype,"maxScale",void 0),e$2a([r$1C("maxScale")],E$j.prototype,"writeMaxScale",null),e$2a([d$25({type:Number})],E$j.prototype,"minScale",void 0),e$2a([r$1C("minScale")],E$j.prototype,"writeMinScale",null),e$2a([d$25({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],E$j.prototype,"repeatLabel",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0,origins:{"web-scene":{write:!1}}}})],E$j.prototype,"repeatLabelDistance",void 0),e$2a([d$25({types:P$m,json:{origins:{"web-scene":{types:F$q,write:b$u,default:null}},write:b$u,default:null}})],E$j.prototype,"symbol",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],E$j.prototype,"useCodedValues",void 0),e$2a([d$25({type:String,json:{write:!0}})],E$j.prototype,"where",void 0),E$j=y$y=e$2a([n$2L("esri.layers.support.LabelClass")],E$j);const j$o=E$j;var u$K;let c$19=u$K=class extends t$M{constructor(_t){super(_t),this.type="binning",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}clone(){return new u$K({fields:m$2e(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:m$2e(this.labelingInfo),labelsVisible:this.labelsVisible,popupEnabled:this.popupEnabled,popupTemplate:m$2e(this.popupTemplate),renderer:m$2e(this.renderer)})}};e$2a([r$1r({binning:"binning"})],c$19.prototype,"type",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$19.prototype,"fixedBinLevel",void 0),e$2a([d$25({type:[j$o],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],c$19.prototype,"labelingInfo",void 0),e$2a([d$25(m$K)],c$19.prototype,"labelsVisible",void 0),e$2a([d$25(p$1d)],c$19.prototype,"popupEnabled",void 0),e$2a([d$25({type:B$m,json:{name:"popupInfo",write:!0}})],c$19.prototype,"popupTemplate",void 0),e$2a([d$25({type:[c$1c],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],c$19.prototype,"fields",void 0),e$2a([d$25({types:p$1w,json:{write:!0}})],c$19.prototype,"renderer",void 0),c$19=u$K=e$2a([n$2L("esri.layers.support.FeatureReductionBinning")],c$19);const f$x=c$19;var c$18;let y$x=c$18=class extends l$2v{constructor(_t){super(_t),this.type="cluster",this.clusterRadius=o$1v("80px"),this.clusterMinSize=o$1v("12px"),this.clusterMaxSize=o$1v("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new c$18({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:m$2e(this.labelingInfo),labelsVisible:this.labelsVisible,fields:m$2e(this.fields),renderer:m$2e(this.renderer),popupEnabled:this.popupEnabled,popupTemplate:m$2e(this.popupTemplate)})}};e$2a([d$25({type:["cluster"],readOnly:!0,json:{write:!0}})],y$x.prototype,"type",void 0),e$2a([d$25({type:Number,cast:_t=>_t==="auto"?_t:o$1v(_t),json:{write:!0}})],y$x.prototype,"clusterRadius",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],y$x.prototype,"clusterMinSize",void 0),e$2a([d$25({type:Number,cast:o$1v,json:{write:!0}})],y$x.prototype,"clusterMaxSize",void 0),e$2a([d$25(p$1d)],y$x.prototype,"popupEnabled",void 0),e$2a([d$25({type:B$m,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],y$x.prototype,"popupTemplate",void 0),e$2a([d$25({types:p$1w,json:{write:!0}})],y$x.prototype,"renderer",void 0),e$2a([d$25({types:D$q})],y$x.prototype,"symbol",void 0),e$2a([d$25({type:[j$o],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],y$x.prototype,"labelingInfo",void 0),e$2a([d$25(m$K)],y$x.prototype,"labelsVisible",void 0),e$2a([d$25({type:[c$1c],json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],y$x.prototype,"fields",void 0),y$x=c$18=e$2a([n$2L("esri.layers.support.FeatureReductionCluster")],y$x);const j$n=y$x;var t$J;let c$17=t$J=class extends t$M{constructor(_t){super(_t),this.type="selection"}clone(){return new t$J}};e$2a([d$25({type:["selection"]})],c$17.prototype,"type",void 0),c$17=t$J=e$2a([n$2L("esri.layers.support.FeatureReductionSelection")],c$17);const p$15=c$17,n$13={key:"type",base:t$M,typeMap:{selection:j$n}},p$14={types:{key:"type",base:t$M,typeMap:{selection:p$15,cluster:j$n,binning:f$x}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:n$13},"portal-item":{types:n$13},"web-scene":{types:{key:"type",base:t$M,typeMap:{selection:p$15}}}}}},l$V=new s$1_({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let a$_=class extends l$1N(l$2v){constructor(_t){super(_t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};e$2a([d$25({json:{write:!0}})],a$_.prototype,"name",void 0),e$2a([d$25({json:{write:!0}})],a$_.prototype,"description",void 0),e$2a([d$25({json:{read:l$V.read,write:l$V.write}})],a$_.prototype,"drawingTool",void 0),e$2a([d$25({json:{write:!0}})],a$_.prototype,"prototype",void 0),e$2a([d$25({json:{write:!0}})],a$_.prototype,"thumbnail",void 0),a$_=e$2a([n$2L("esri.layers.support.FeatureTemplate")],a$_);const p$13=a$_;let c$16=class extends l$1N(l$2v){constructor(_t){super(_t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(_t){const Tt={};for(const Mt of Object.keys(_t))Tt[Mt]=t$15(_t[Mt]);return Tt}writeDomains(_t,Tt){var Pt;const Mt={};for(const Ft of Object.keys(_t))_t[Ft]&&(Mt[Ft]=(Pt=_t[Ft])==null?void 0:Pt.toJSON());Tt.domains=Mt}};e$2a([d$25({json:{write:!0}})],c$16.prototype,"id",void 0),e$2a([d$25({json:{write:!0}})],c$16.prototype,"name",void 0),e$2a([d$25({json:{write:!0}})],c$16.prototype,"domains",void 0),e$2a([o$1U("domains")],c$16.prototype,"readDomains",null),e$2a([r$1C("domains")],c$16.prototype,"writeDomains",null),e$2a([d$25({type:[p$13],json:{write:!0}})],c$16.prototype,"templates",void 0),c$16=e$2a([n$2L("esri.layers.support.FeatureType")],c$16);const n$12=c$16;function t$I(_t){return _t.type==="date"||_t.type==="esriFieldTypeDate"}function s$N(_t){return _t.type==="oid"||_t.type==="esriFieldTypeOID"}function l$U(_t){return _t.type==="global-id"||_t.type==="esriFieldTypeGlobalID"}class d$L{constructor(Tt){if(this.fields=Tt,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!Tt)return;const Mt=[];for(const Pt of Tt){const Ft=Pt&&Pt.name;if(Ft){const Dt=r$G(Ft);this._fieldsMap.set(Ft,Pt),this._fieldsMap.set(Dt,Pt),Mt.push(Dt),t$I(Pt)?(this.dateFields.push(Pt),this._dateFieldsSet.add(Pt)):B$n(Pt)&&(this._numericFieldsSet.add(Pt),this.numericFields.push(Pt)),s$N(Pt)||l$U(Pt)||(Pt.editable=Pt.editable==null||!!Pt.editable,Pt.nullable=Pt.nullable==null||!!Pt.nullable)}}Mt.sort(),this.uid=Mt.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const Tt of this.fields)s$N(Tt)||l$U(Tt)||Tt.nullable||P$o(Tt)!==void 0||this._requiredFields.push(Tt)}return this._requiredFields}has(Tt){return this.get(Tt)!=null}get(Tt){return Tt!=null?this._fieldsMap.get(Tt)||this._fieldsMap.get(r$G(Tt)):void 0}isDateField(Tt){return this._dateFieldsSet.has(this.get(Tt))}isNumericField(Tt){return this._numericFieldsSet.has(this.get(Tt))}normalizeFieldName(Tt){const Mt=this.get(Tt);if(Mt)return Mt.name}}function r$G(_t){return _t.toLowerCase().trim()}const s$M=s$2l.getLogger("esri.layers.support.fieldProperties");function l$T(){return{fields:{type:[y$$],value:null},fieldsIndex:{readOnly:!0,get(){return new d$L(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(_t){this._userOutFields=_t,this.notifyChange("outFields")},get:function(){const _t=this._userOutFields;if(!_t||!_t.length)return null;if(_t.includes("*"))return["*"];if(!this.fields)return _t;for(const Tt of _t)this.fieldsIndex.has(Tt)||s$M.error("field-attributes-layer:invalid-field",`Invalid field ${Tt} found in outFields`,{layer:this,outFields:_t});return y$1o(this.fieldsIndex,_t)}}}}let a$Z=class extends l$1N(l$2v){constructor(_t){super(_t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};e$2a([d$25({type:String,json:{read:{source:"shapeAreaFieldName"}}})],a$Z.prototype,"shapeAreaField",void 0),e$2a([d$25({type:String,json:{read:{source:"shapeLengthFieldName"}}})],a$Z.prototype,"shapeLengthField",void 0),e$2a([d$25({type:String,json:{read:_t=>me$5.read(_t)||fe$5.read(_t)}})],a$Z.prototype,"units",void 0),a$Z=e$2a([n$2L("esri.layers.support.GeometryFieldsInfo")],a$Z);const c$15=a$Z,n$11=/\[([^\[\]]+)\]/gi;function r$F(_t,Tt,Mt){return _t?_t.map(Pt=>{const Ft=new j$o;if(Ft.read(Pt,Mt),Ft.labelExpression){const Dt=Tt.fields||Tt.layerDefinition&&Tt.layerDefinition.fields||this.fields;Ft.labelExpression=Ft.labelExpression.replace(n$11,(Nt,Vt)=>`[${t$H(Vt,Dt)}]`)}return Ft}):null}function t$H(_t,Tt){if(!Tt)return _t;const Mt=_t.toLowerCase();for(let Pt=0;Pt<Tt.length;Pt++){const Ft=Tt[Pt].name;if(Ft.toLowerCase()===Mt)return Ft}return _t}var l$S;let i$U=l$S=class extends l$2v{constructor(_t){super(_t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new j$11}clone(){return new l$S({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};e$2a([d$25({type:String,json:{write:!0}})],i$U.prototype,"floorField",void 0),e$2a([d$25({json:{read:!1,write:!1}})],i$U.prototype,"viewAllMode",void 0),e$2a([d$25({json:{read:!1,write:!1}})],i$U.prototype,"viewAllLevelIds",void 0),i$U=l$S=e$2a([n$2L("esri.layers.support.LayerFloorInfo")],i$U);const p$12=i$U,a$Y=new s$1_({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),n$10=new s$1_({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let l$R=class extends l$1N(l$2v){constructor(_t){super(_t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};e$2a([d$25({json:{read:a$Y.read,write:a$Y.write}})],l$R.prototype,"cardinality",void 0),e$2a([d$25({json:{read:!0,write:!0}})],l$R.prototype,"composite",void 0),e$2a([d$25({json:{read:!0,write:!0}})],l$R.prototype,"id",void 0),e$2a([d$25({json:{read:!0,write:!0}})],l$R.prototype,"keyField",void 0),e$2a([d$25({json:{read:!0,write:!0}})],l$R.prototype,"keyFieldInRelationshipTable",void 0),e$2a([d$25({json:{read:!0,write:!0}})],l$R.prototype,"name",void 0),e$2a([d$25({json:{read:!0,write:!0}})],l$R.prototype,"relatedTableId",void 0),e$2a([d$25({json:{read:!0,write:!0}})],l$R.prototype,"relationshipTableId",void 0),e$2a([d$25({json:{read:n$10.read,write:n$10.write}})],l$R.prototype,"role",void 0),l$R=e$2a([n$2L("esri.layers.support.Relationship")],l$R);const p$11=l$R,t$G=[];function e$L(_t,Tt){if(g$z(_t.url))return!0;const{wkid:Mt}=Tt;for(const Pt of t$G){if(_t.version>=Pt[0])return!0;if(typeof Pt[1]=="function"&&(Pt[1]=Pt[1]()),Pt[1].has(Mt))return!1}return!0}t$G.push([10.91,()=>{const _t=new Set([9709,9716,9741,9761,9766]);for(let Tt=9712;Tt<=9713;Tt++)_t.add(Tt);for(let Tt=9748;Tt<=9749;Tt++)_t.add(Tt);for(let Tt=20904;Tt<=20932;Tt++)_t.add(Tt);for(let Tt=21004;Tt<=21032;Tt++)_t.add(Tt);for(let Tt=21207;Tt<=21264;Tt++)_t.add(Tt);for(let Tt=21307;Tt<=21364;Tt++)_t.add(Tt);for(let Tt=102759;Tt<=102760;Tt++)_t.add(Tt);for(let Tt=102901;Tt<=102955;Tt++)_t.add(Tt);return _t}]),t$G.push([10.9,()=>{const _t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let Tt=9356;Tt<=9360;Tt++)_t.add(Tt);for(let Tt=9404;Tt<=9407;Tt++)_t.add(Tt);for(let Tt=9476;Tt<=9482;Tt++)_t.add(Tt);for(let Tt=9487;Tt<=9494;Tt++)_t.add(Tt);for(let Tt=9697;Tt<=9699;Tt++)_t.add(Tt);return _t}]),t$G.push([10.81,()=>{const _t=new Set([9265,9333,103598,103699]);for(let Tt=9248;Tt<=9254;Tt++)_t.add(Tt);for(let Tt=9271;Tt<=9273;Tt++)_t.add(Tt);for(let Tt=9284;Tt<=9285;Tt++)_t.add(Tt);for(let Tt=21453;Tt<=21463;Tt++)_t.add(Tt);return _t}]),t$G.push([10.8,()=>{const _t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let Tt=8035;Tt<=8036;Tt++)_t.add(Tt);for(let Tt=8455;Tt<=8456;Tt++)_t.add(Tt);for(let Tt=8518;Tt<=8529;Tt++)_t.add(Tt);for(let Tt=8533;Tt<=8536;Tt++)_t.add(Tt);for(let Tt=8538;Tt<=8540;Tt++)_t.add(Tt);for(let Tt=8677;Tt<=8679;Tt++)_t.add(Tt);for(let Tt=8902;Tt<=8903;Tt++)_t.add(Tt);for(let Tt=8907;Tt<=8910;Tt++)_t.add(Tt);for(let Tt=8949;Tt<=8951;Tt++)_t.add(Tt);for(let Tt=8972;Tt<=8987;Tt++)_t.add(Tt);for(let Tt=9039;Tt<=9040;Tt++)_t.add(Tt);for(let Tt=9068;Tt<=9069;Tt++)_t.add(Tt);for(let Tt=9140;Tt<=9141;Tt++)_t.add(Tt);for(let Tt=9148;Tt<=9150;Tt++)_t.add(Tt);for(let Tt=9153;Tt<=9159;Tt++)_t.add(Tt);for(let Tt=9205;Tt<=9218;Tt++)_t.add(Tt);for(let Tt=9221;Tt<=9222;Tt++)_t.add(Tt);for(let Tt=54098;Tt<=54101;Tt++)_t.add(Tt);return _t}]),t$G.push([10.71,()=>{const _t=new Set([6316]);for(let Tt=8351;Tt<=8353;Tt++)_t.add(Tt);for(let Tt=9294;Tt<=9297;Tt++)_t.add(Tt);for(let Tt=103586;Tt<=103594;Tt++)_t.add(Tt);for(let Tt=103696;Tt<=103698;Tt++)_t.add(Tt);return _t}]),t$G.push([10.7,()=>{const _t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let Tt=8065;Tt<=8068;Tt++)_t.add(Tt);for(let Tt=8082;Tt<=8083;Tt++)_t.add(Tt);for(let Tt=8379;Tt<=8385;Tt++)_t.add(Tt);for(let Tt=8836;Tt<=8840;Tt++)_t.add(Tt);for(let Tt=8857;Tt<=8860;Tt++)_t.add(Tt);for(let Tt=53035;Tt<=53037;Tt++)_t.add(Tt);for(let Tt=54090;Tt<=54091;Tt++)_t.add(Tt);for(let Tt=102498;Tt<=102499;Tt++)_t.add(Tt);return _t}]),t$G.push([10.61,()=>new Set([102497])]),t$G.push([10.6,()=>{const _t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let Tt=7755;Tt<=7787;Tt++)_t.add(Tt);for(let Tt=7791;Tt<=7795;Tt++)_t.add(Tt);for(let Tt=7799;Tt<=7801;Tt++)_t.add(Tt);for(let Tt=7825;Tt<=7831;Tt++)_t.add(Tt);for(let Tt=7877;Tt<=7878;Tt++)_t.add(Tt);for(let Tt=7882;Tt<=7883;Tt++)_t.add(Tt);for(let Tt=7991;Tt<=7992;Tt++)_t.add(Tt);for(let Tt=8042;Tt<=8043;Tt++)_t.add(Tt);for(let Tt=8058;Tt<=8059;Tt++)_t.add(Tt);for(let Tt=8311;Tt<=8348;Tt++)_t.add(Tt);for(let Tt=9060;Tt<=9067;Tt++)_t.add(Tt);for(let Tt=102562;Tt<=102568;Tt++)_t.add(Tt);for(let Tt=102799;Tt<=102900;Tt++)_t.add(Tt);return _t}]),t$G.push([10.51,()=>{const _t=new Set([7683,7881,7886,7899,8888,9e3]);for(let Tt=8013;Tt<=8032;Tt++)_t.add(Tt);for(let Tt=9053;Tt<=9057;Tt++)_t.add(Tt);for(let Tt=104017;Tt<=104018;Tt++)_t.add(Tt);for(let Tt=104971;Tt<=104974;Tt++)_t.add(Tt);return _t}]),t$G.push([10.5,()=>{const _t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let Tt=4087;Tt<=4088;Tt++)_t.add(Tt);for(let Tt=5896;Tt<=5899;Tt++)_t.add(Tt);for(let Tt=7005;Tt<=7007;Tt++)_t.add(Tt);for(let Tt=7057;Tt<=7070;Tt++)_t.add(Tt);for(let Tt=7073;Tt<=7082;Tt++)_t.add(Tt);for(let Tt=7109;Tt<=7128;Tt++)_t.add(Tt);for(let Tt=7844;Tt<=7859;Tt++)_t.add(Tt);return _t}]);async function t$F(_t,Tt,Mt){const Pt=_t&&_t.getAtOrigin&&_t.getAtOrigin("renderer",Tt.origin);if(Pt&&Pt.type==="unique-value"&&Pt.styleOrigin){const Ft=await a$2S(Pt.populateFromStyle());if(f$1M(Mt),Ft.ok===!1){const Dt=Ft.error;Tt&&Tt.messages&&Tt.messages.push(new t$1W("renderer:style-reference",`Failed to create unique value renderer from style reference: ${Dt.message}`,{error:Dt,context:Tt})),_t.clear("renderer",Tt.origin)}}}const l$Q=["oid","global-id"],a$X=["oid","global-id","guid"];function d$K({displayField:_t,editFieldsInfo:Tt,fields:Mt,objectIdField:Pt,title:Ft},Dt){if(!Mt)return null;const Nt=w$l({editFieldsInfo:Tt,fields:Mt,objectIdField:Pt},Dt);if(!Nt.length)return null;const Vt=j$m({titleBase:Ft,fields:Mt,displayField:_t}),zt=g$v();return new B$m({title:Vt,content:zt,fieldInfos:Nt})}const p$10=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],c$14=(_t,{editFieldsInfo:Tt,objectIdField:Mt,visibleFieldNames:Pt})=>Pt?Pt.has(_t.name):!f$w(_t.name,Tt)&&(!Mt||_t.name!==Mt)&&!l$Q.includes(_t.type)&&!p$10.some(Ft=>Ft.test(_t.name));function u$J(_t,Tt){const Mt=_t;return Tt&&(_t=_t.filter(Pt=>!Tt.includes(Pt.type))),_t===Mt&&(_t=_t.slice()),_t.sort(m$I),_t}function m$I(_t,Tt){return _t.type==="oid"?-1:Tt.type==="oid"?1:y$w(_t)?-1:y$w(Tt)?1:(_t.alias||_t.name).toLocaleLowerCase().localeCompare((Tt.alias||Tt.name).toLocaleLowerCase())}function f$w(_t,Tt){if(!_t||!Tt)return!1;const{creationDateField:Mt,creatorField:Pt,editDateField:Ft,editorField:Dt}=Tt;return[Mt&&Mt.toLowerCase(),Pt&&Pt.toLowerCase(),Ft&&Ft.toLowerCase(),Dt&&Dt.toLowerCase()].includes(_t.toLowerCase())}function F$c(_t,Tt){return _t.editable&&!a$X.includes(_t.type)&&!f$w(_t.name,Tt)}function w$l({editFieldsInfo:_t,fields:Tt,objectIdField:Mt},Pt){return u$J(Tt,(Pt==null?void 0:Pt.ignoreFieldTypes)||I$d).map(Ft=>new c$2N({fieldName:Ft.name,isEditable:F$c(Ft,_t),label:Ft.alias,format:C$a(Ft),visible:c$14(Ft,{editFieldsInfo:_t,objectIdField:Mt,visibleFieldNames:Pt==null?void 0:Pt.visibleFieldNames})}))}function C$a(_t){switch(_t.type){case"small-integer":case"integer":case"single":return new u$1G({digitSeparator:!0,places:0});case"double":return new u$1G({digitSeparator:!0,places:2});case"date":return new u$1G({dateFormat:"long-month-day-year"});default:return _t.type==="string"&&ye$3(_t.name)?new u$1G({digitSeparator:!0,places:0}):null}}function g$v(){return[new c$2M,new i$2g]}function j$m(_t){const Tt=h$1o(_t),{titleBase:Mt}=_t;return Tt?`${Mt}: {${Tt.trim()}}`:Mt}function y$w(_t){return(_t.name&&_t.name.toLowerCase())==="name"?!0:(_t.alias&&_t.alias.toLowerCase())==="name"||void 0}const I$d=["geometry","blob","raster","guid","xml"],qe=new s$1_({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Qe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},Ue="FeatureLayer",Ge=s$2l.getLogger("esri.layers.FeatureLayer");function Ve$1(_t,Tt){return new s$2i("layer:unsupported",`Layer (${_t.title}, ${_t.id}) of type '${_t.declaredClass}' ${Tt}`,{layer:_t})}function ze(_t){return _t&&_t instanceof j$11}function Be(_t,Tt,Mt){return!!(_t&&_t.hasOwnProperty(Tt)?_t[Tt]:Mt)}function ke(_t,Tt,Mt){return _t&&_t.hasOwnProperty(Tt)?_t[Tt]:Mt}function Ne(_t){var Mt;const Tt=(Mt=_t==null?void 0:_t.supportedSpatialAggregationStatistics)==null?void 0:Mt.map(Pt=>Pt.toLowerCase());return{envelope:!!(Tt!=null&&Tt.includes("envelopeaggregate")),centroid:!!(Tt!=null&&Tt.includes("centroidaggregate")),convexHull:!!(Tt!=null&&Tt.includes("convexhullaggregate"))}}function We(_t,Tt){var Pt;const Mt=(Pt=_t==null?void 0:_t.supportedOperationsWithCacheHint)==null?void 0:Pt.map(Ft=>Ft.toLowerCase());return!!(Mt!=null&&Mt.includes(Tt.toLowerCase()))}const He=l$T();function Je(_t,Tt,Mt){const Pt=!!(Mt!=null&&Mt.writeLayerSchema);return{enabled:Pt,ignoreOrigin:Pt}}let Ze=class extends p$1f(a$18(p$1b(a$12(t$O(n$16(p$1h(c$1i(v$u(O$e(o$O(i$11(l$1N(b$12))))))))))))){constructor(..._t){super(..._t),this._handles=new u$1P,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=k$y.WGS84,this.subtypeCode=null,this.subtypeField=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(j$11.ofType(c$1d)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var _t;(_t=this.source)==null||_t.destroy(),this._handles=l$2H(this._handles)}normalizeCtorArgs(_t,Tt){return typeof _t=="string"?{url:_t,...Tt}:_t}load(_t){const Tt=r$1P(_t)?_t.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(Tt).then(Pt=>this._initLayerProperties(Pt)));const Mt=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},_t).catch(w$18).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const Pt=await this._fetchFirstLayerId(Tt);Pt!=null&&(this.layerId=Pt)}if(!this.url&&!this._hasMemorySource())throw new s$2i("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(Tt))}).then(()=>this.finishLoadEditablePortalLayer(_t));return this.addResolvingPromise(Mt),Promise.resolve(this)}readCapabilities(_t,Tt){return Tt=Tt.layerDefinition||Tt,{analytics:this._readAnalyticsCapabilities(Tt),attachment:this._readAttachmentCapabilities(Tt),data:this._readDataCapabilities(Tt),metadata:this._readMetadataCapabilities(Tt),operations:this._readOperationsCapabilities(Tt.capabilities||_t,Tt),query:this._readQueryCapabilities(Tt),queryRelated:this._readQueryRelatedCapabilities(Tt),queryTopFeatures:this._readQueryTopFeaturesCapabilities(Tt),editing:this._readEditingCapabilities(Tt)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(_t){_t!=null?this._override("editingEnabled",_t):this._clearOverride("editingEnabled")}readEditingEnabled(_t,Tt){return this._readEditingEnabled(Tt,!1)}readEditingEnabledFromWebMap(_t,Tt,Mt){return this._readEditingEnabled(Tt,!0,Mt)}writeEditingEnabled(_t,Tt){this._writeEditingEnabled(_t,Tt,!1)}writeEditingEnabledToWebMap(_t,Tt,Mt,Pt){this._writeEditingEnabled(_t,Tt,!0,Pt)}readEditingInfo(_t,Tt){const{editingInfo:Mt}=Tt;return Mt?{lastEditDate:Mt.lastEditDate!=null?new Date(Mt.lastEditDate):null}:null}readIsTable(_t,Tt){return(Tt=Tt&&Tt.layerDefinition||Tt).type==="Table"||!Tt.geometryType}writeIsTable(_t,Tt,Mt,Pt){Pt!=null&&Pt.writeLayerSchema&&o$2d(Mt,_t?"Table":"Feature Layer",Tt)}readMinScale(_t,Tt){return Tt.effectiveMinScale||_t||0}readMaxScale(_t,Tt){return Tt.effectiveMaxScale||_t||0}readGlobalIdFieldFromService(_t,Tt){if((Tt=Tt.layerDefinition||Tt).globalIdField)return Tt.globalIdField;if(Tt.fields){for(const Mt of Tt.fields)if(Mt.type==="esriFieldTypeGlobalID")return Mt.name}}readObjectIdFieldFromService(_t,Tt){if((Tt=Tt.layerDefinition||Tt).objectIdField)return Tt.objectIdField;if(Tt.fields){for(const Mt of Tt.fields)if(Mt.type==="esriFieldTypeOID")return Mt.name}}get parsedUrl(){const _t=this.url?j$10(this.url):null;return _t!=null&&(this.dynamicDataSource!=null?_t.path=G$q(_t.path,"dynamicLayer"):this.layerId!=null&&(_t.path=G$q(_t.path,this.layerId.toString()))),_t}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(_t){c$2Q(_t,this.fieldsIndex),this._set("renderer",_t)}readRenderer(_t,Tt,Mt){const Pt=(Tt=Tt.layerDefinition||Tt).drawingInfo&&Tt.drawingInfo.renderer||void 0;if(Pt){const Ft=o$R(Pt,Tt,Mt)||void 0;return Ft||Ge.error("Failed to create renderer",{rendererDefinition:Tt.drawingInfo.renderer,layer:this,context:Mt}),Ft}if(Tt.defaultSymbol)return Tt.types&&Tt.types.length?new P$b({defaultSymbol:$e(Tt.defaultSymbol,Tt,Mt),field:Tt.typeIdField,uniqueValueInfos:Tt.types.map(Ft=>({id:Ft.id,symbol:$e(Ft.symbol,Ft,Mt)}))}):new p$1A({symbol:$e(Tt.defaultSymbol,Tt,Mt)})}set source(_t){const Tt=this._get("source");Tt!==_t&&(ze(Tt)&&this._resetMemorySource(Tt),ze(_t)&&this._initMemorySource(_t),this._set("source",_t))}castSource(_t){return _t?Array.isArray(_t)||_t instanceof j$11?new G$a({layer:this,items:_t}):_t:null}readSource(_t,Tt){const Mt=x$s.fromJSON(Tt.featureSet);return new G$a({layer:this,items:Mt&&Mt.features||[]})}readServiceDefinitionExpression(_t,Tt){return Tt.definitionQuery||Tt.definitionExpression}readTemplates(_t,Tt){const Mt=Tt.editFieldsInfo,Pt=Mt&&Mt.creatorField,Ft=Mt&&Mt.editorField;return _t=_t&&_t.map(Dt=>p$13.fromJSON(Dt)),this._fixTemplates(_t,Pt),this._fixTemplates(_t,Ft),_t}readTitle(_t,Tt){const Mt=Tt.layerDefinition&&Tt.layerDefinition.name||Tt.name,Pt=Tt.title||Tt.layerDefinition&&Tt.layerDefinition.title;if(Mt){const Ft=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?y$D(this.url,Mt):Mt;let Dt=Mt;if(!Dt&&this.url){const Nt=m$O(this.url);r$1P(Nt)&&(Dt=Nt.title)}return Dt?(this.sublayerTitleMode==="item-title-and-service-name"&&Ft&&Ft!==Dt&&(Dt=Ft+" - "+Dt),h$I(Dt)):void 0}if(this.sublayerTitleMode==="item-title"&&Pt)return Pt}readTitleFromWebMap(_t,Tt){return Tt.title||Tt.layerDefinition&&Tt.layerDefinition.name}readTypeIdField(_t,Tt){let Mt=(Tt=Tt.layerDefinition||Tt).typeIdField;if(Mt&&Tt.fields){Mt=Mt.toLowerCase();const Pt=Tt.fields.find(Ft=>Ft.name.toLowerCase()===Mt);Pt&&(Mt=Pt.name)}return Mt}readTypes(_t,Tt){_t=(Tt=Tt.layerDefinition||Tt).types;const Mt=Tt.editFieldsInfo,Pt=Mt&&Mt.creatorField,Ft=Mt&&Mt.editorField;return _t&&_t.map(Dt=>(Dt=n$12.fromJSON(Dt),this._fixTemplates(Dt.templates,Pt),this._fixTemplates(Dt.templates,Ft),Dt))}set url(_t){const Tt=L$f({layer:this,url:_t,nonStandardUrlAllowed:!0,logger:Ge});this._set("url",Tt.url),Tt.layerId!=null&&this._set("layerId",Tt.layerId)}writeUrl(_t,Tt,Mt,Pt){b$r(this,_t,null,Tt,Pt)}readVersion(_t,Tt){return Tt.currentVersion?Tt.currentVersion:Tt.hasOwnProperty("capabilities")||Tt.hasOwnProperty("drawingInfo")||Tt.hasOwnProperty("hasAttachments")||Tt.hasOwnProperty("htmlPopupType")||Tt.hasOwnProperty("relationships")||Tt.hasOwnProperty("timeInfo")||Tt.hasOwnProperty("typeIdField")||Tt.hasOwnProperty("types")?10:9.3}readVisible(_t,Tt){return Tt.layerDefinition&&Tt.layerDefinition.defaultVisibility!=null?!!Tt.layerDefinition.defaultVisibility:Tt.visibility!=null?!!Tt.visibility:void 0}addAttachment(_t,Tt){return this.load().then(()=>this._checkAttachmentSupport(_t)).then(()=>{if(!("addAttachment"in this.source))throw new s$2i(Ue,"Layer source does not support addAttachment capability");return this.source.addAttachment(_t,Tt)})}updateAttachment(_t,Tt,Mt){return this.load().then(()=>this._checkAttachmentSupport(_t)).then(()=>{if(!("updateAttachment"in this.source))throw new s$2i(Ue,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(_t,Tt,Mt)})}async applyEdits(_t,Tt){const Mt=await __vitePreload(()=>import("./editingSupport.46ddfc3e.js"),[]);return await this.load(),Mt.applyEdits(this,this.source,_t,Tt)}on(_t,Tt){return super.on(_t,Tt)}createPopupTemplate(_t){return d$K(this,_t)}async createGraphicsSource(_t){if(this._hasMemorySource())return this.source.load({signal:_t});const{default:Tt}=await y$1M(__vitePreload(()=>import("./FeatureLayerSource.4b1722c6.js"),["assets/FeatureLayerSource.4b1722c6.js","assets/clientSideDefaults.2ff9dd27.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/executeForIds.ec40c67d.js"]),_t);return new Tt({layer:this}).load({signal:_t})}createQuery(){const _t=new b$H,Tt=this.get("capabilities.data"),Mt=this.get("capabilities.query");_t.dynamicDataSource=this.dynamicDataSource,_t.historicMoment=this.historicMoment,_t.gdbVersion=this.gdbVersion,_t.returnGeometry=!0,Mt&&(_t.compactGeometryEnabled=Mt.supportsCompactGeometry,_t.defaultSpatialReferenceEnabled=Mt.supportsDefaultSpatialReference),Tt&&(Tt.supportsZ&&this.returnZ!=null&&(_t.returnZ=this.returnZ),Tt.supportsM&&this.returnM!=null&&(_t.returnM=this.returnM)),_t.outFields=["*"];const Pt=r$1P(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,Ft=t$T(this.definitionExpression,Pt);_t.where=Ft||"1=1";const{timeOffset:Dt,timeExtent:Nt}=this;return _t.timeExtent=Dt!=null&&Nt!=null?Nt.offset(-Dt.value,Dt.unit):Nt||null,_t.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,_t}deleteAttachments(_t,Tt){return this.load().then(()=>this._checkAttachmentSupport(_t)).then(()=>{if(!("deleteAttachments"in this.source))throw new s$2i(Ue,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(_t,Tt)})}fetchRecomputedExtents(_t){return this.load({signal:_t==null?void 0:_t.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(_t);throw new s$2i(Ue,"Layer source does not support fetchUpdates capability")})}getFeatureType(_t){const{typeIdField:Tt,types:Mt}=this;if(!Tt||!_t)return null;const Pt=_t.attributes?_t.attributes[Tt]:void 0;if(Pt==null)return null;let Ft=null;return Mt.some(Dt=>{const{id:Nt}=Dt;return Nt!=null&&(Nt.toString()===Pt.toString()&&(Ft=Dt),!!Ft)}),Ft}getFieldDomain(_t,Tt){const Mt=Tt&&Tt.feature,Pt=this.getFeatureType(Mt);if(Pt){const Ft=Pt.domains&&Pt.domains[_t];if(Ft&&Ft.type!=="inherited")return Ft}return this._getLayerDomain(_t)}getField(_t){return this.fieldsIndex.get(_t)}queryAttachments(_t,Tt){return _t=c$24.from(_t),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new s$2i(Ue,"this layer doesn't support attachments");const{attachmentTypes:Mt,objectIds:Pt,globalIds:Ft,num:Dt,size:Nt,start:Vt,where:zt}=_t;if(!this.get("capabilities.operations.supportsQueryAttachments")){const Xt=Pt&&Pt.length>1,Ht=Mt&&Mt.length,Wt=Ft&&Ft.length,Qt=Nt&&Nt.length;if(Xt||Ht||Wt||Qt||Dt||Vt||zt)throw new s$2i(Ue,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",_t)}if(!(Pt&&Pt.length||zt))throw new s$2i(Ue,"'objectIds' or 'where' are required to perform attachment query",_t);if(!("queryAttachments"in this.source))throw new s$2i(Ue,"Layer source does not support queryAttachments capability",_t);return this.source.queryAttachments(_t)})}queryFeatures(_t,Tt){return this.load().then(()=>this.source.queryFeatures(b$H.from(_t)||this.createQuery(),Tt)).then(Mt=>{if(Mt!=null&&Mt.features)for(const Pt of Mt.features)Pt.layer=Pt.sourceLayer=this;return Mt})}queryObjectIds(_t,Tt){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(b$H.from(_t)||this.createQuery(),Tt);throw new s$2i(Ue,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(_t,Tt){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(b$H.from(_t)||this.createQuery(),Tt);throw new s$2i(Ue,"Layer source does not support queryFeatureCount capability")})}queryExtent(_t,Tt){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(b$H.from(_t)||this.createQuery(),Tt);throw new s$2i(Ue,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(_t,Tt){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(d$15.from(_t),Tt);throw new s$2i(Ue,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(_t,Tt){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(d$15.from(_t),Tt);throw new s$2i(Ue,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(_t,Tt){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(S$o.from(_t),Tt).then(Mt=>{if(Mt!=null&&Mt.features)for(const Pt of Mt.features)Pt.layer=Pt.sourceLayer=this;return Mt});throw new s$2i(Ue,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(_t,Tt){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(S$o.from(_t),Tt);throw new s$2i(Ue,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(_t,Tt){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(S$o.from(_t),Tt);throw new s$2i(Ue,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(_t,Tt){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(S$o.from(_t),Tt);throw new s$2i(Ue,"Layer source does not support queryFeatureCount capability")})}read(_t,Tt){const Mt=_t.featureCollection;if(Mt){const Pt=Mt.layers;Pt&&Pt.length===1&&(super.read(Pt[0],Tt),Mt.showLegend!=null&&super.read({showLegend:Mt.showLegend},Tt))}super.read(_t,Tt),Tt&&Tt.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(_t,Tt){var Dt;Tt={...Tt,writeLayerSchema:(Dt=Tt==null?void 0:Tt.writeLayerSchema)!=null?Dt:this._hasMemorySource()};const{origin:Mt,layerContainerType:Pt,messages:Ft}=Tt;if(this.dynamicDataSource)return Ft==null||Ft.push(Ve$1(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(Mt==="web-scene"||Mt==="web-map"&&Pt!=="tables")return Ft==null||Ft.push(Ve$1(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return Ft==null||Ft.push(Ve$1(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&Mt==="web-map"&&Pt==="tables")return Ft==null||Ft.push(Ve$1(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(_t,Tt)}clone(){if(this._hasMemorySource())throw new s$2i(Ue,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(_t){return!!this.loaded&&(this.source.type==="memory"||e$L(this,_t))}async save(_t){return(await __vitePreload(()=>import("./featureLayerUtils.8ddc6dbe.js"),["assets/featureLayerUtils.8ddc6dbe.js","assets/originUtils.68552ec1.js","assets/multiOriginJSONSupportUtils.8128aa52.js","assets/arcgisLayers.6196dfbb.js","assets/lazyLayerLoader.c995b154.js","assets/jsonContext.2a8214cb.js","assets/portalItemUtils.8cfa2e15.js"])).save(this,_t)}async saveAs(_t,Tt){return(await __vitePreload(()=>import("./featureLayerUtils.8ddc6dbe.js"),["assets/featureLayerUtils.8ddc6dbe.js","assets/originUtils.68552ec1.js","assets/multiOriginJSONSupportUtils.8128aa52.js","assets/arcgisLayers.6196dfbb.js","assets/lazyLayerLoader.c995b154.js","assets/jsonContext.2a8214cb.js","assets/portalItemUtils.8cfa2e15.js"])).saveAs(this,_t,Tt)}_readEditingEnabled(_t,Tt,Mt){var Ft;let Pt=(Ft=_t.layerDefinition)==null?void 0:Ft.capabilities;return Pt?this._hasEditingCapability(Pt):(Pt=_t.capabilities,Tt&&(Mt==null?void 0:Mt.origin)==="web-map"&&!this._hasMemorySource()&&Pt?this._hasEditingCapability(Pt):void 0)}_hasEditingCapability(_t){return _t.toLowerCase().split(",").map(Tt=>Tt.trim()).includes("editing")}_writeEditingEnabled(_t,Tt,Mt,Pt){var Ft,Dt;if(!_t){const Nt=(Dt=(Ft=this.capabilities)==null?void 0:Ft.operations)!=null&&Dt.supportsSync?"Query,Sync":"Query";o$2d("layerDefinition.capabilities",Nt,Tt),Mt&&!(Pt!=null&&Pt.writeLayerSchema)&&(Tt.capabilities=Nt)}}_checkAttachmentSupport(_t){const{attributes:Tt}=_t,{objectIdField:Mt}=this;return this.get("capabilities.data.supportsAttachment")?_t?Tt?Tt[Mt]?void 0:Promise.reject(new s$2i(Ue,`feature is missing the identifying attribute ${Mt}`)):Promise.reject(new s$2i(Ue,"'attributes' are required on a feature to query attachments")):Promise.reject(new s$2i(Ue,"A feature is required to add/delete/update attachments")):Promise.reject(new s$2i(Ue,"this layer doesn't support attachments"))}_getLayerDomain(_t){const Tt=this.fieldsIndex.get(_t);return Tt?Tt.domain:null}_fetchFirstLayerId(_t){return U$v(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:_t}).then(Tt=>{const Mt=Tt.data;if(Mt)return Array.isArray(Mt.layers)&&Mt.layers.length>0?Mt.layers[0].id:Array.isArray(Mt.tables)&&Mt.tables.length>0?Mt.tables[0].id:void 0})}async _initLayerProperties(_t){return this._set("source",_t),_t.sourceJSON&&(this.sourceJSON=_t.sourceJSON,this.read(_t.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),c$2Q(this.renderer,this.fieldsIndex),m$1P(this.timeInfo,this.fieldsIndex),t$F(this,{origin:"service"})}async hasDataChanged(){var _t,Tt;if((_t=this.source)!=null&&_t.refresh)try{const{dataChanged:Mt,updates:Pt}=await((Tt=this.source)==null?void 0:Tt.refresh());if(r$1P(Pt)&&(this.sourceJSON={...this.sourceJSON,...Pt},this.read(Pt,{origin:"service",url:this.parsedUrl})),Mt)return!0}catch{}if(this.definitionExpression)try{return(await r$M(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){var Tt;const _t=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+_t+")"),this.isTable||this._hasMemorySource()||_t.search(/\/FeatureServer\//i)!==-1||((Tt=this.fields)==null?void 0:Tt.some(Mt=>Mt.type==="geometry"))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+_t+")")}_fixTemplates(_t,Tt){_t&&_t.forEach(Mt=>{const Pt=Mt.prototype&&Mt.prototype.attributes;Pt&&Tt&&delete Pt[Tt]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new s$2i("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new s$2i("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(_t){_t.forEach(Tt=>{Tt.layer=this,Tt.sourceLayer=this}),this._handles.add([_t.on("after-add",Tt=>{Tt.item.layer=this,Tt.item.sourceLayer=this}),_t.on("after-remove",Tt=>{Tt.item.layer=null,Tt.item.sourceLayer=null})],"fl-source")}_resetMemorySource(_t){_t.forEach(Tt=>{Tt.layer=null,Tt.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAnalyticsCapabilities(_t){return{supportsCacheHint:We(_t.advancedQueryCapabilities,"queryAnalytics")}}_readAttachmentCapabilities(_t){const Tt=_t.attachmentProperties,Mt={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:We(_t.advancedQueryCapabilities,"queryAttachments"),supportsResize:Be(_t,"supportsAttachmentsResizing",!1)};return Tt&&Array.isArray(Tt)&&Tt.forEach(Pt=>{const Ft=Qe[Pt.name];Ft&&(Mt[Ft]=!!Pt.isEnabled)}),Mt}_readDataCapabilities(_t){return{isVersioned:Be(_t,"isDataVersioned",!1),supportsAttachment:Be(_t,"hasAttachments",!1),supportsM:Be(_t,"hasM",!1),supportsZ:Be(_t,"hasZ",!1)}}_readMetadataCapabilities(_t){return{supportsAdvancedFieldProperties:Be(_t,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(_t,Tt){const Mt=_t?_t.toLowerCase().split(",").map(Wt=>Wt.trim()):[],Pt=this.url?m$O(this.url):null,Ft=Mt.includes(r$1P(Pt)&&Pt.serverType==="MapServer"?"data":"query"),Dt=Mt.includes("editing")&&!Tt.datesInUnknownTimezone;let Nt=Dt&&Mt.includes("create"),Vt=Dt&&Mt.includes("delete"),zt=Dt&&Mt.includes("update");const Xt=Mt.includes("changetracking"),Ht=Tt.advancedQueryCapabilities;return Dt&&!(Nt||Vt||zt)&&(Nt=Vt=zt=!0),{supportsCalculate:Be(Tt,"supportsCalculate",!1),supportsTruncate:Be(Tt,"supportsTruncate",!1),supportsValidateSql:Be(Tt,"supportsValidateSql",!1),supportsAdd:Nt,supportsDelete:Vt,supportsEditing:Dt,supportsChangeTracking:Xt,supportsQuery:Ft,supportsQueryAnalytics:Be(Ht,"supportsQueryAnalytic",!1),supportsQueryAttachments:Be(Ht,"supportsQueryAttachments",!1),supportsQueryTopFeatures:Be(Ht,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:Be(Tt,"supportsAttachmentsResizing",!1),supportsSync:Mt.includes("sync"),supportsUpdate:zt,supportsExceedsLimitStatistics:Be(Tt,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(_t){var zt;const Tt=_t.advancedQueryCapabilities,Mt=_t.ownershipBasedAccessControlForFeatures,Pt=_t.archivingInfo,Ft=(zt=this.url)==null?void 0:zt.includes("MapServer"),Dt=!a$32("mapserver-pbf-enabled")&&Ft&&this.version<10.81,Nt=g$z(this.url),Vt=(_t.supportedQueryFormats||"").split(",").reduce((Xt,Ht)=>{const Wt=Ht.toLowerCase().trim();return Wt&&Xt.add(Wt),Xt},new Set);return{supportsStatistics:Be(Tt,"supportsStatistics",_t.supportsStatistics),supportsPercentileStatistics:Be(Tt,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:Be(Tt,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:Ne(Tt),supportsCentroid:Be(Tt,"supportsReturningGeometryCentroid",!1),supportsDistance:Be(Tt,"supportsQueryWithDistance",!1),supportsDistinct:Be(Tt,"supportsDistinct",_t.supportsAdvancedQueries),supportsExtent:Be(Tt,"supportsReturningQueryExtent",!1),supportsGeometryProperties:Be(Tt,"supportsReturningGeometryProperties",!1),supportsHavingClause:Be(Tt,"supportsHavingClause",!1),supportsOrderBy:Be(Tt,"supportsOrderBy",_t.supportsAdvancedQueries),supportsPagination:Be(Tt,"supportsPagination",!1),supportsQuantization:Be(_t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:Be(_t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:Be(_t,"supportsReturningQueryGeometry",!1),supportsResultType:Be(Tt,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:Be(Tt,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:Be(Tt,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:Be(_t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:Be(Tt,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:Be(Mt,"allowOthersToQuery",!0),supportsHistoricMoment:Be(Pt,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!Dt&&Vt.has("pbf"),supportsDisjointSpatialRelationship:Be(Tt,"supportsDisjointSpatialRel",!1),supportsCacheHint:Be(Tt,"supportsQueryWithCacheHint",!1)||We(Tt,"query"),supportsDefaultSpatialReference:Be(Tt,"supportsDefaultSR",!1),supportsCompactGeometry:Nt,maxRecordCountFactor:ke(_t,"maxRecordCountFactor",void 0),maxRecordCount:ke(_t,"maxRecordCount",void 0),standardMaxRecordCount:ke(_t,"standardMaxRecordCount",void 0),tileMaxRecordCount:ke(_t,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(_t){const Tt=_t.advancedQueryCapabilities,Mt=Be(Tt,"supportsAdvancedQueryRelated",!1);return{supportsPagination:Be(Tt,"supportsQueryRelatedPagination",!1),supportsCount:Mt,supportsOrderBy:Mt,supportsCacheHint:We(Tt,"queryRelated")}}_readQueryTopFeaturesCapabilities(_t){return{supportsCacheHint:We(_t.advancedQueryCapabilities,"queryTopFilter")}}_readEditingCapabilities(_t){const Tt=_t.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:Be(_t,"allowGeometryUpdates",!0),supportsGlobalId:Be(_t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:Be(_t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:Be(_t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:Be(_t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:Be(_t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:Be(Tt,"allowAnonymousToDelete",!0),supportsDeleteByOthers:Be(Tt,"allowOthersToDelete",!0),supportsUpdateByAnonymous:Be(Tt,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:Be(Tt,"allowOthersToUpdate",!0)}}};e$2a([d$25({readOnly:!0,json:{read:!1}})],Ze.prototype,"capabilities",void 0),e$2a([o$1U("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Ze.prototype,"readCapabilities",null),e$2a([d$25({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ze.prototype,"charts",void 0),e$2a([d$25({readOnly:!0})],Ze.prototype,"createQueryVersion",null),e$2a([d$25({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Ze.prototype,"copyright",void 0),e$2a([d$25({type:Boolean})],Ze.prototype,"datesInUnknownTimezone",void 0),e$2a([d$25({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Ze.prototype,"displayField",void 0),e$2a([d$25({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Ze.prototype,"definitionExpression",void 0),e$2a([d$25({types:j$L,readOnly:!0})],Ze.prototype,"defaultSymbol",void 0),e$2a([d$25({type:K$7})],Ze.prototype,"dynamicDataSource",void 0),e$2a([d$25({readOnly:!0})],Ze.prototype,"editFieldsInfo",void 0),e$2a([d$25({type:Boolean})],Ze.prototype,"editingEnabled",null),e$2a([o$1U(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ze.prototype,"readEditingEnabled",null),e$2a([o$1U("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ze.prototype,"readEditingEnabledFromWebMap",null),e$2a([r$1C(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ze.prototype,"writeEditingEnabled",null),e$2a([r$1C("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ze.prototype,"writeEditingEnabledToWebMap",null),e$2a([d$25({readOnly:!0})],Ze.prototype,"editingInfo",void 0),e$2a([o$1U("editingInfo")],Ze.prototype,"readEditingInfo",null),e$2a([d$25((()=>{const _t=m$2e(d$O),Tt=_t.json.origins;return Tt["web-map"]={read:!1,write:!1},Tt["portal-item"]={read:!1,write:!1},_t})())],Ze.prototype,"elevationInfo",void 0),e$2a([d$25(p$14)],Ze.prototype,"featureReduction",void 0),e$2a([d$25({...He.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Je}}}}})],Ze.prototype,"fields",void 0),e$2a([d$25(He.fieldsIndex)],Ze.prototype,"fieldsIndex",void 0),e$2a([d$25({type:p$12,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],Ze.prototype,"floorInfo",void 0),e$2a([d$25({type:E$l,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ze.prototype,"formTemplate",void 0),e$2a([d$25({type:M$K,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Ze.prototype,"fullExtent",void 0),e$2a([d$25()],Ze.prototype,"gdbVersion",void 0),e$2a([d$25({readOnly:!0,type:c$15,json:{read:{source:"geometryProperties"}}})],Ze.prototype,"geometryFieldsInfo",void 0),e$2a([d$25({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:qe.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Je,writer(_t,Tt,Mt){const Pt=_t?qe.toJSON(_t):null;Pt&&o$2d(Mt,Pt,Tt)}}}},read:{source:"layerDefinition.geometryType",reader:qe.read}}})],Ze.prototype,"geometryType",void 0),e$2a([d$25({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Ze.prototype,"hasM",void 0),e$2a([d$25({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Ze.prototype,"hasZ",void 0),e$2a([d$25({readOnly:!0,type:v$x})],Ze.prototype,"heightModelInfo",void 0),e$2a([d$25({type:Date})],Ze.prototype,"historicMoment",void 0),e$2a([d$25(v$v)],Ze.prototype,"id",void 0),e$2a([d$25({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ze.prototype,"infoFor3D",void 0),e$2a([d$25({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ze.prototype,"isTable",void 0),e$2a([o$1U("service","isTable",["type","geometryType"]),o$1U("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ze.prototype,"readIsTable",null),e$2a([r$1C("web-map","isTable")],Ze.prototype,"writeIsTable",null),e$2a([d$25(m$K)],Ze.prototype,"labelsVisible",void 0),e$2a([d$25({type:[j$o],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:r$F},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:r$F},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ze.prototype,"labelingInfo",void 0),e$2a([d$25((()=>{const _t=m$2e(u$N);return _t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(Tt,Mt,Pt){o$2d(Pt,n$2v(Tt),Mt)}}},_t})())],Ze.prototype,"opacity",void 0),e$2a([d$25({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],Ze.prototype,"layerId",void 0),e$2a([d$25(c$1j)],Ze.prototype,"legendEnabled",void 0),e$2a([d$25({type:["show","hide"],json:(()=>{const _t=m$2e(D$d.json);return _t.origins["portal-item"]={read:!1,write:!1},_t})()})],Ze.prototype,"listMode",void 0),e$2a([d$25(b$q)],Ze.prototype,"minScale",void 0),e$2a([o$1U("service","minScale",["minScale","effectiveMinScale"])],Ze.prototype,"readMinScale",null),e$2a([d$25(I$e)],Ze.prototype,"maxScale",void 0),e$2a([o$1U("service","maxScale",["maxScale","effectiveMaxScale"])],Ze.prototype,"readMaxScale",null),e$2a([d$25({type:String})],Ze.prototype,"globalIdField",void 0),e$2a([o$1U("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),o$1U("service","globalIdField",["globalIdField","fields"])],Ze.prototype,"readGlobalIdFieldFromService",null),e$2a([d$25({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Je}}}}})],Ze.prototype,"objectIdField",void 0),e$2a([o$1U("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),o$1U("service","objectIdField",["objectIdField","fields"])],Ze.prototype,"readObjectIdFieldFromService",null),e$2a([d$25({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ze.prototype,"operationalLayerType",void 0),e$2a([d$25(He.outFields)],Ze.prototype,"outFields",void 0),e$2a([d$25({readOnly:!0})],Ze.prototype,"parsedUrl",null),e$2a([d$25({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ze.prototype,"path",void 0),e$2a([d$25(p$1d)],Ze.prototype,"popupEnabled",void 0),e$2a([d$25({type:B$m,json:{name:"popupInfo",write:!0}})],Ze.prototype,"popupTemplate",void 0),e$2a([d$25({readOnly:!0})],Ze.prototype,"defaultPopupTemplate",null),e$2a([d$25({type:[p$11],readOnly:!0})],Ze.prototype,"relationships",void 0),e$2a([d$25({types:p$1w,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:n$1g,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(_t,Tt,Mt)=>({ignoreOrigin:Mt==null?void 0:Mt.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(_t,Tt,Mt)=>({ignoreOrigin:Mt==null?void 0:Mt.writeLayerSchema})}}})],Ze.prototype,"renderer",null),e$2a([o$1U("service","renderer",["drawingInfo.renderer","defaultSymbol"]),o$1U("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ze.prototype,"readRenderer",null),e$2a([d$25()],Ze.prototype,"sourceJSON",void 0),e$2a([d$25({type:Boolean})],Ze.prototype,"returnM",void 0),e$2a([d$25({type:Boolean})],Ze.prototype,"returnZ",void 0),e$2a([d$25((()=>{const _t=m$2e(l$$);return _t.json.origins["portal-item"]={read:!1,write:!1},_t})())],Ze.prototype,"screenSizePerspectiveEnabled",void 0),e$2a([d$25({clonable:!1})],Ze.prototype,"source",null),e$2a([s$23("source")],Ze.prototype,"castSource",null),e$2a([o$1U("portal-item","source",["featureSet"]),o$1U("web-map","source",["featureSet"])],Ze.prototype,"readSource",null),e$2a([d$25({readOnly:!0})],Ze.prototype,"serviceDefinitionExpression",void 0),e$2a([o$1U("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Ze.prototype,"readServiceDefinitionExpression",null),e$2a([d$25({type:k$y,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Ze.prototype,"spatialReference",void 0),e$2a([d$25({type:Number})],Ze.prototype,"subtypeCode",void 0),e$2a([d$25({type:String,json:{origins:{service:{read:!0}}}})],Ze.prototype,"subtypeField",void 0),e$2a([d$25({type:[p$13]})],Ze.prototype,"templates",void 0),e$2a([o$1U("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ze.prototype,"readTemplates",null),e$2a([d$25({type:v$t})],Ze.prototype,"timeInfo",void 0),e$2a([d$25()],Ze.prototype,"title",void 0),e$2a([o$1U("service","title",["name"]),o$1U("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ze.prototype,"readTitle",null),e$2a([o$1U("web-map","title",["layerDefinition.name","title"])],Ze.prototype,"readTitleFromWebMap",null),e$2a([d$25({type:String})],Ze.prototype,"sublayerTitleMode",void 0),e$2a([d$25({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Ze.prototype,"trackIdField",void 0),e$2a([d$25({json:{read:!1}})],Ze.prototype,"type",void 0),e$2a([d$25({type:String})],Ze.prototype,"typeIdField",void 0),e$2a([o$1U("service","typeIdField"),o$1U("typeIdField",["layerDefinition.typeIdField"])],Ze.prototype,"readTypeIdField",null),e$2a([d$25({type:[n$12]})],Ze.prototype,"types",void 0),e$2a([o$1U("service","types",["types"]),o$1U("types",["layerDefinition.types"])],Ze.prototype,"readTypes",null),e$2a([d$25({readOnly:!0,json:{write:!1}})],Ze.prototype,"serverGens",void 0),e$2a([d$25({type:j$11.ofType(c$1d),readOnly:!0})],Ze.prototype,"indexes",void 0),e$2a([d$25(f$A)],Ze.prototype,"url",null),e$2a([r$1C("url")],Ze.prototype,"writeUrl",null),e$2a([d$25({readOnly:!0})],Ze.prototype,"userIsAdmin",void 0),e$2a([d$25({json:{origins:{service:{read:!0}},read:!1}})],Ze.prototype,"version",void 0),e$2a([o$1U("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Ze.prototype,"readVersion",null),e$2a([d$25({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ze.prototype,"visible",void 0),e$2a([o$1U("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ze.prototype,"readVisible",null),Ze=e$2a([n$2L("esri.layers.FeatureLayer")],Ze);const $e=s$2d({types:M$C}),Ke=Ze,FeatureLayer=Object.freeze(Object.defineProperty({__proto__:null,default:Ke},Symbol.toStringTag,{value:"Module"})),s$L=["$datastore","$map","$layer","$aggregatedfeatures"],n$$="esri.widgets.Feature.support.arcadeFeatureUtils",o$J=s$2l.getLogger(n$$);function c$13(_t){return typeof _t=="string"?te$4(ee$4(_t)):Array.isArray(_t)?p$$(_t):(_t==null?void 0:_t.declaredClass)==="esri.arcade.Dictionary"?l$P(_t):_t}function p$$(_t){return`<ul class="esri-widget__list">${_t.map(Tt=>`<li>${typeof Tt=="string"?te$4(ee$4(Tt)):Tt}</li>`).join("")}</ul>`}function l$P(_t){return`<table class="esri-widget__table">${_t.keys().map(Tt=>{const Mt=_t.field(Tt);return`<tr><th>${Tt}</th><td>${typeof Mt=="string"?te$4(ee$4(Mt)):Mt}</td></tr>`}).join("")}</table>`}function u$I({aggregatedFeatures:_t,arcadeUtils:Tt,featureSetVars:Mt,context:Pt,viewInfo:Ft,map:Dt,graphic:Nt,interceptor:Vt}){Mt.forEach(zt=>{const Xt=zt.toLowerCase(),Ht={map:Dt,spatialReference:Ft.sr,interceptor:Vt};if(Xt==="$map"&&(Pt.vars[Xt]=Tt.convertMapToFeatureSetCollection(Ht)),Xt==="$layer"&&(Pt.vars[Xt]=Tt.convertFeatureLayerToFeatureSet({layer:Nt.sourceLayer,spatialReference:Ft.sr,interceptor:Vt})),Xt==="$datastore"&&(Pt.vars[Xt]=Tt.convertServiceUrlToWorkspace({url:Nt.sourceLayer.url,spatialReference:Ft.sr,interceptor:Vt})),Xt==="$aggregatedfeatures"){const Wt=Nt.layer,{fields:Qt,objectIdField:Zt,geometryType:Kt,spatialReference:er,displayField:Yt}=Wt,rr=new Ke({fields:Qt,objectIdField:Zt,geometryType:Kt,spatialReference:er,displayField:Yt,...Wt.type==="feature"?{templates:Wt.templates,typeIdField:Wt.typeIdField,types:Wt.types}:null,source:_t});Pt.vars[Xt]=Tt.convertFeatureLayerToFeatureSet({layer:rr,spatialReference:Ft.sr,interceptor:Vt})}})}function f$v(){return __vitePreload(()=>import("./arcadeUtils.3ece5147.js").then(_t=>_t.t),[])}async function g$u({graphic:_t,view:Tt}){const{isAggregate:Mt,layer:Pt}=_t;if(!Mt||!Pt||(Tt==null?void 0:Tt.type)!=="2d")return[];const Ft=await Tt.whenLayerView(Pt);if(!Ft.createQuery||!Ft.queryFeatures)return[];const Dt=Ft.createQuery();Dt.aggregateIds=[_t.getObjectId()];const{features:Nt}=await Ft.queryFeatures(Dt);return Nt}async function y$v({expressionInfo:_t,arcadeUtils:Tt,interceptor:Mt,spatialReference:Pt,map:Ft,graphic:Dt,view:Nt}){if(!_t||!_t.expression)return null;const Vt=Tt.createSyntaxTree(_t.expression),zt=s$L.filter(Zt=>Tt.hasVariable(Vt,Zt)),[Xt]=await Promise.all([g$u({graphic:Dt,view:Nt}),Tt.loadScriptDependencies(Vt,!0,zt)]),Ht=Tt.getViewInfo({spatialReference:Pt}),Wt=Tt.createExecContext(Dt,Ht);Wt.interceptor=Mt,Wt.useAsync=!0,u$I({aggregatedFeatures:Xt,arcadeUtils:Tt,featureSetVars:zt,context:Wt,viewInfo:Ht,map:Ft,graphic:Dt,interceptor:Mt});const Qt=Tt.createFunction(Vt,Wt);return Tt.executeAsyncFunction(Qt,Wt).catch(Zt=>o$J.error("arcade-execution-error",{error:Zt,graphic:Dt,expressionInfo:_t}))}async function d$J({expressionInfos:_t,spatialReference:Tt,graphic:Mt,interceptor:Pt,map:Ft,view:Dt}){if(!_t||!_t.length)return{};const Nt=await f$v(),Vt={};for(const Ht of _t)Vt[`expression/${Ht.name}`]=y$v({expressionInfo:Ht,arcadeUtils:Nt,interceptor:Pt,spatialReference:Tt,map:Ft,graphic:Mt,view:Dt});const zt=await E$K(Vt),Xt={};for(const Ht in zt)Xt[Ht]=c$13(zt[Ht].value);return Xt}const j$l=1;let v$s=class extends a$2B(y$1E){constructor(_t){super(_t),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:Tt}=this;Tt&&Tt.abort(),this._abortController=null},this._createVM=()=>{var Pt,Ft;const Tt=(Pt=this.contentElement)==null?void 0:Pt.type;(Ft=this.contentElementViewModel)==null||Ft.destroy();const Mt=Tt==="fields"?new n$1L:Tt==="media"?new b$E:Tt==="text"?new l$1s:null;this._set("contentElementViewModel",Mt)},this._compile=async()=>{this._cancelQuery();const Tt=new AbortController;this._abortController=Tt,await this._compileExpression(),this._abortController===Tt&&(this._abortController=null)},this._compileThrottled=e$1m(this._compile,j$l,this),this._compileExpression=async()=>{const{expressionInfo:Tt,graphic:Mt,interceptor:Pt,spatialReference:Ft,map:Dt,view:Nt,_abortController:Vt}=this;if(!(Tt&&Mt&&Ft&&Dt))return void this._set("contentElement",null);const zt=await f$v();if(Vt!==this._abortController)return;const Xt=await y$v({arcadeUtils:zt,expressionInfo:Tt,graphic:Mt,interceptor:Pt,map:Dt,spatialReference:Ft,view:Nt});if(!Xt||Xt.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const Ht=await Me(Xt,Vt.signal),Wt=Ht==null?void 0:Ht.type,Qt=Wt==="media"?I$x.fromJSON(Ht):Wt==="text"?c$2I.fromJSON(Ht):Wt==="fields"?c$2M.fromJSON(Ht):null;this._set("contentElement",Qt)},this.handles.add([l$2e(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),h$1w),l$2e(()=>[this.contentElement],()=>this._createVM(),h$1w)])}destroy(){var _t;this._cancelQuery(),(_t=this.contentElementViewModel)==null||_t.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var _t;return((_t=this.view)==null?void 0:_t.spatialReference)||null}set spatialReference(_t){_t!==void 0?this._override("spatialReference",_t):this._clearOverride("spatialReference")}get state(){const{_abortController:_t,contentElement:Tt,contentElementViewModel:Mt}=this;return _t?"loading":Tt||Mt?"ready":"disabled"}get map(){var _t;return((_t=this.view)==null?void 0:_t.map)||null}set map(_t){_t!==void 0?this._override("map",_t):this._clearOverride("map")}};e$2a([d$25()],v$s.prototype,"_abortController",void 0),e$2a([d$25({type:i$2e})],v$s.prototype,"expressionInfo",void 0),e$2a([d$25({type:g$$})],v$s.prototype,"graphic",void 0),e$2a([d$25({readOnly:!0})],v$s.prototype,"contentElement",void 0),e$2a([d$25({readOnly:!0})],v$s.prototype,"contentElementViewModel",void 0),e$2a([d$25()],v$s.prototype,"interceptor",void 0),e$2a([d$25()],v$s.prototype,"spatialReference",null),e$2a([d$25({readOnly:!0})],v$s.prototype,"state",null),e$2a([d$25()],v$s.prototype,"map",null),e$2a([d$25()],v$s.prototype,"view",void 0),v$s=e$2a([n$2L("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],v$s);const E$i=v$s,c$12={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let u$H=class extends O$l{constructor(_t,Tt){super(_t,Tt),this.viewModel=new E$i}initialize(){this.own(l$2e(()=>{var _t;return(_t=this.viewModel)==null?void 0:_t.contentElementViewModel},()=>this._setupExpressionWidget(),h$1w))}destroy(){this._destroyContentWidget()}renderLoading(){return n$1Q("div",{key:"loading-container",class:c$12.loadingSpinnerContainer},n$1Q("span",{class:this.classes(c$12.iconLoading,c$12.spinner)}))}render(){var Tt;const{state:_t}=this.viewModel;return n$1Q("div",{class:c$12.base},_t==="loading"?this.renderLoading():_t==="disabled"?null:(Tt=this._contentWidget)==null?void 0:Tt.render())}_destroyContentWidget(){const{_contentWidget:_t}=this;_t&&(_t.viewModel=null,_t.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:_t,contentElement:Tt}=this.viewModel,Mt=Tt==null?void 0:Tt.type;this._destroyContentWidget();const Pt=_t?Mt==="fields"?new c$1$({viewModel:_t}):Mt==="media"?new F$i({viewModel:_t}):Mt==="text"?new l$1r({viewModel:_t}):null:null;this._contentWidget=Pt,this.scheduleRender()}};e$2a([d$25({type:E$i})],u$H.prototype,"viewModel",void 0),u$H=e$2a([n$2L("esri.widgets.Feature.FeatureExpression")],u$H);const m$H=u$H;class e$K{constructor(Tt,Mt){this.preLayerQueryCallback=Tt,this.preRequestCallback=Mt,this.preLayerQueryCallback||(this.preLayerQueryCallback=Pt=>{}),this.preRequestCallback||(this.preLayerQueryCallback=Pt=>{})}}var q$8;const D$c=1,Q$5="content-view-models",B$b="esri.widgets.FeatureViewModel",G$9=s$2l.getLogger(B$b),H$7={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let z$c=q$8=class extends y$1E{constructor(_t){super(_t),this._handles=new u$1P,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=e$1m(this._graphicChanged,D$c,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...H$7},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=Tt=>{const{abilities:Mt}=this;return Tt.type==="attachments"&&Mt.attachmentsContent||Tt.type==="custom"&&Mt.customContent||Tt.type==="fields"&&Mt.fieldsContent||Tt.type==="media"&&Mt.mediaContent||Tt.type==="text"&&Mt.textContent||Tt.type==="expression"&&Mt.expressionContent},this._handles.add(l$2e(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this.graphicChangedThrottled(),h$1w))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return r$1P(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return X$6(Y$5(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return j$F(this.graphic)}castAbilities(_t){return{...H$7,..._t}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(_t){this._set("graphic",_t?_t.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(_t){_t!==void 0?this._override("spatialReference",_t):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(_t){_t!==void 0?this._override("map",_t):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(_t,Tt){const Mt=this.contentViewModels[_t];Mt instanceof b$E&&Mt.setActiveMedia(Tt)}nextMedia(_t){const Tt=this.contentViewModels[_t];Tt instanceof b$E&&Tt.next()}previousMedia(_t){const Tt=this.contentViewModels[_t];Tt instanceof b$E&&Tt.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:_t}=this;if(!_t)return;const Tt=new AbortController;this._featureAbortController=Tt;try{await this._queryFeature({signal:Tt.signal})}catch(Mt){g$1l(Mt)||(this._error=Mt,G$9.error("error","The popupTemplate could not be displayed for this feature.",{error:Mt,graphic:_t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===Tt&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:_t}=this;_t&&_t.abort(),this._featureAbortController=null}_compileContentElement(_t,Tt){return _t.type==="attachments"?this._compileAttachments(_t,Tt):_t.type==="custom"?this._compileCustom(_t,Tt):_t.type==="fields"?this._compileFields(_t,Tt):_t.type==="media"?this._compileMedia(_t,Tt):_t.type==="text"?this._compileText(_t,Tt):_t.type==="expression"?this._compileExpression(_t,Tt):void 0}_compileContent(_t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(_t)?_t.filter(this._isAllowedContentType).map((Tt,Mt)=>this._compileContentElement(Tt,Mt)):typeof _t=="string"?this._compileText(new c$2I({text:_t}),0).text:_t}_destroyContentViewModels(){var _t;(_t=this._handles)==null||_t.remove(Q$5),this.contentViewModels.forEach(Tt=>Tt&&!Tt.destroyed&&Tt.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(_t,Tt){const{formattedAttributes:Mt}=this,{contentElement:Pt,contentElementViewModel:Ft}=_t,Dt=Pt==null?void 0:Pt.type;Ft&&Dt&&(Dt==="fields"&&(this._createFieldsFormattedAttributes({contentElement:Pt,contentElementIndex:Tt,formattedAttributes:Mt}),Ft.set(this._createFieldsVMParams(Pt,Tt))),Dt==="media"&&(this._createMediaFormattedAttributes({contentElement:Pt,contentElementIndex:Tt,formattedAttributes:Mt}),Ft.set(this._createMediaVMParams(Pt,Tt))),Dt==="text"&&Ft.set(this._createTextVMParams(Pt)))}_compileExpression(_t,Tt){const{expressionInfo:Mt}=_t,{graphic:Pt,map:Ft,spatialReference:Dt,view:Nt}=this,Vt=new E$i({expressionInfo:Mt,graphic:Pt,interceptor:q$8.interceptor,map:Ft,spatialReference:Dt,view:Nt});return this.contentViewModels[Tt]=Vt,this._handles.add(l$2e(()=>Vt.contentElementViewModel,()=>this._setExpressionContentVM(Vt,Tt),h$1w),Q$5),_t}_compileAttachments(_t,Tt){const{graphic:Mt}=this,{description:Pt,title:Ft}=_t;return this.contentViewModels[Tt]=new c$23({graphic:Mt,...this._compileTitleAndDesc({title:Ft,description:Pt})}),_t}_compileCustom(_t,Tt){const{graphic:Mt}=this,{creator:Pt,destroyer:Ft}=_t;return this.contentViewModels[Tt]=new l$1s({graphic:Mt,creator:Pt,destroyer:Ft}),_t}_compileTitleAndDesc({title:_t,description:Tt}){const{_fieldInfoMap:Mt,_sourceLayer:Pt,graphic:Ft,formattedAttributes:Dt,_expressionAttributes:Nt}=this,{attributes:Vt}=Ft,zt=Dt.global;return{title:$$b({attributes:Vt,fieldInfoMap:Mt,globalAttributes:zt,expressionAttributes:Nt,layer:Pt,text:_t}),description:$$b({attributes:Vt,fieldInfoMap:Mt,globalAttributes:zt,expressionAttributes:Nt,layer:Pt,text:Tt})}}_createFieldsVMParams(_t,Tt){var Xt;const{_effectivePopupTemplate:Mt,formattedAttributes:Pt}=this,Ft={...Pt.global,...Pt.content[Tt]},Dt=(Xt=(_t==null?void 0:_t.fieldInfos)||(Mt==null?void 0:Mt.fieldInfos))==null?void 0:Xt.filter(({fieldName:Ht})=>C$k(Ht)||ue$3(Ht)||Ft.hasOwnProperty(Ht)),Nt=Mt==null?void 0:Mt.expressionInfos,{description:Vt,title:zt}=_t;return{attributes:Ft,expressionInfos:Nt,fieldInfos:Dt,...this._compileTitleAndDesc({title:zt,description:Vt})}}_compileFields(_t,Tt){const Mt=_t.clone(),Pt=new n$1L(this._createFieldsVMParams(_t,Tt));return this.contentViewModels[Tt]=Pt,Mt.fieldInfos=Pt.formattedFieldInfos.slice(0),Mt}_createMediaVMParams(_t,Tt){const{abilities:Mt,graphic:Pt,_fieldInfoMap:Ft,formattedAttributes:Dt,_effectivePopupTemplate:Nt,relatedInfos:Vt,_sourceLayer:zt,_expressionAttributes:Xt}=this,{attributes:Ht}=Pt,{description:Wt,mediaInfos:Qt,title:Zt}=_t;return{abilities:{chartAnimation:Mt.chartAnimation},activeMediaInfoIndex:_t.activeMediaInfoIndex||0,attributes:Ht,layer:zt,fieldInfoMap:Ft,formattedAttributes:{...Dt.global,...Dt.content[Tt]},expressionAttributes:Xt,mediaInfos:Qt,popupTemplate:Nt,relatedInfos:Vt,...this._compileTitleAndDesc({title:Zt,description:Wt})}}_compileMedia(_t,Tt){const Mt=_t.clone(),Pt=new b$E(this._createMediaVMParams(_t,Tt));return Mt.mediaInfos=Pt.formattedMediaInfos.slice(0),this.contentViewModels[Tt]=Pt,Mt}_createTextVMParams(_t){const{graphic:Tt,_fieldInfoMap:Mt,_sourceLayer:Pt,_expressionAttributes:Ft}=this;if(_t&&_t.text){const{attributes:Dt}=Tt,Nt=this.formattedAttributes.global;_t.text=$$b({attributes:Dt,fieldInfoMap:Mt,globalAttributes:Nt,expressionAttributes:Ft,layer:Pt,text:_t.text})}return{graphic:Tt,creator:_t.text}}_compileText(_t,Tt){const Mt=_t.clone();return this.contentViewModels[Tt]=new l$1s(this._createTextVMParams(Mt)),Mt}_compileLastEditInfo(){const{_effectivePopupTemplate:_t,_sourceLayer:Tt,graphic:Mt}=this;if(!_t)return;const{lastEditInfoEnabled:Pt}=_t,Ft=Tt==null?void 0:Tt.editFieldsInfo;return Pt&&Ft?W$7(Ft,Mt.attributes):void 0}_compileTitle(_t){const{_fieldInfoMap:Tt,_sourceLayer:Mt,graphic:Pt,_expressionAttributes:Ft}=this,{attributes:Dt}=Pt,Nt=this.formattedAttributes.global;return $$b({attributes:Dt,fieldInfoMap:Tt,globalAttributes:Nt,expressionAttributes:Ft,layer:Mt,text:_t})}async _getTitle(){const{_effectivePopupTemplate:_t,graphic:Tt}=this,Mt=_t==null?void 0:_t.title;return x$z(Mt,{graphic:Tt})}async _getContent(){const{_effectivePopupTemplate:_t,graphic:Tt}=this,Mt=_t==null?void 0:_t.content;return x$z(Mt,{graphic:Tt})}async _queryFeature(_t){const{_featureAbortController:Tt,_sourceLayer:Mt,graphic:Pt,_effectivePopupTemplate:Ft,spatialReference:Dt,map:Nt,view:Vt}=this,{content:{value:zt},title:{value:Xt}}=await E$K({content:this._getContent(),title:this._getTitle()});if(Tt!==this._featureAbortController||!Pt)return;await ae$3({graphic:Pt,popupTemplate:Ft,layer:Mt,spatialReference:Dt},_t);const{expressionAttributes:{value:Ht}}=await E$K({checkForRelatedFeatures:this._checkForRelatedFeatures(_t),expressionAttributes:d$J({expressionInfos:Ft==null?void 0:Ft.expressionInfos,spatialReference:Dt,graphic:Pt,map:Nt,interceptor:q$8.interceptor,view:Vt})});Tt===this._featureAbortController&&Pt&&(this._expressionAttributes=Ht,this._graphicExpressionAttributes={...Pt.attributes,...Ht},this._set("formattedAttributes",this._createFormattedAttributes(zt)),this._set("title",this._compileTitle(Xt)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(zt)||null))}_createMediaFormattedAttributes({contentElement:_t,contentElementIndex:Tt,formattedAttributes:Mt}){const{_effectivePopupTemplate:Pt,graphic:Ft,relatedInfos:Dt,_sourceLayer:Nt,_fieldInfoMap:Vt,_graphicExpressionAttributes:zt}=this;Mt.content[Tt]=ne$3({fieldInfos:Pt==null?void 0:Pt.fieldInfos,graphic:Ft,attributes:{...zt,..._t.attributes},layer:Nt,fieldInfoMap:Vt,relatedInfos:Dt})}_createFieldsFormattedAttributes({contentElement:_t,contentElementIndex:Tt,formattedAttributes:Mt}){if(_t.fieldInfos){const{graphic:Pt,relatedInfos:Ft,_sourceLayer:Dt,_fieldInfoMap:Nt,_graphicExpressionAttributes:Vt}=this;Mt.content[Tt]=ne$3({fieldInfos:_t.fieldInfos,graphic:Pt,attributes:{...Vt,..._t.attributes},layer:Dt,fieldInfoMap:Nt,relatedInfos:Ft})}}_createFormattedAttributes(_t){const{_effectivePopupTemplate:Tt,graphic:Mt,relatedInfos:Pt,_sourceLayer:Ft,_fieldInfoMap:Dt,_graphicExpressionAttributes:Nt}=this,Vt=Tt==null?void 0:Tt.fieldInfos,zt={global:ne$3({fieldInfos:Vt,graphic:Mt,attributes:Nt,layer:Ft,fieldInfoMap:Dt,relatedInfos:Pt}),content:[]};return Array.isArray(_t)&&_t.forEach((Xt,Ht)=>{Xt.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:Xt,contentElementIndex:Ht,formattedAttributes:zt}),Xt.type==="media"&&this._createMediaFormattedAttributes({contentElement:Xt,contentElementIndex:Ht,formattedAttributes:zt})}),zt}_checkForRelatedFeatures(_t){const{graphic:Tt,_effectivePopupTemplate:Mt}=this;return this._queryRelatedInfos(Tt,Y$5(Mt),_t)}async _queryRelatedInfos(_t,Tt,Mt){const{relatedInfos:Pt,_sourceLayer:Ft}=this;Pt.clear();const Dt=r$1P(Ft.associatedLayer)?await Ft.associatedLayer.load(Mt):Ft;if(!Dt)return;const Nt=Tt.filter(Xt=>Xt&&ue$3(Xt.fieldName));if(!Nt||!Nt.length)return;Tt.forEach(Xt=>this._configureRelatedInfo(Xt,Dt));const Vt=await b$F({relatedInfos:Pt,layer:Dt},Mt);Object.keys(Vt).forEach(Xt=>{var Qt;const Ht=Pt.get(Xt.toString()),Wt=(Qt=Vt[Xt])==null?void 0:Qt.value;Ht&&Wt&&(Ht.layerInfo=Wt.data)});const zt=await R$e({graphic:_t,relatedInfos:Pt,layer:Dt},Mt);Object.keys(zt).forEach(Xt=>{var Ht;F$j((Ht=zt[Xt])==null?void 0:Ht.value,Pt.get(Xt.toString()))})}_configureRelatedInfo(_t,Tt){const{relatedInfos:Mt}=this,Pt=d$14(_t.fieldName);if(!Pt)return;const{layerId:Ft,fieldName:Dt}=Pt;if(!Ft)return;const Nt=Mt.get(Ft.toString())||h$R(Ft,Tt);Nt&&($$7({relatedInfo:Nt,fieldName:Dt,fieldInfo:_t}),this.relatedInfos.set(Ft,Nt))}};z$c.interceptor=new e$K(pe$2,me$3),e$2a([d$25()],z$c.prototype,"_error",void 0),e$2a([d$25()],z$c.prototype,"_featureAbortController",void 0),e$2a([d$25({readOnly:!0})],z$c.prototype,"_effectivePopupTemplate",null),e$2a([d$25({readOnly:!0})],z$c.prototype,"_fieldInfoMap",null),e$2a([d$25({readOnly:!0})],z$c.prototype,"_sourceLayer",null),e$2a([d$25()],z$c.prototype,"abilities",void 0),e$2a([s$23("abilities")],z$c.prototype,"castAbilities",null),e$2a([d$25({readOnly:!0})],z$c.prototype,"content",void 0),e$2a([d$25({readOnly:!0})],z$c.prototype,"contentViewModels",void 0),e$2a([d$25({type:Boolean})],z$c.prototype,"defaultPopupTemplateEnabled",void 0),e$2a([d$25({readOnly:!0})],z$c.prototype,"state",null),e$2a([d$25({readOnly:!0})],z$c.prototype,"formattedAttributes",void 0),e$2a([d$25({type:g$$,value:null})],z$c.prototype,"graphic",null),e$2a([d$25({readOnly:!0})],z$c.prototype,"lastEditInfo",void 0),e$2a([d$25({readOnly:!0})],z$c.prototype,"relatedInfos",void 0),e$2a([d$25()],z$c.prototype,"spatialReference",null),e$2a([d$25({readOnly:!0})],z$c.prototype,"title",void 0),e$2a([d$25()],z$c.prototype,"map",null),e$2a([d$25({readOnly:!0})],z$c.prototype,"waitingForContent",null),e$2a([d$25()],z$c.prototype,"view",void 0),z$c=q$8=e$2a([n$2L(B$b)],z$c);const J$6=z$c,i$T=_t=>{let Tt=class extends _t{constructor(){super(...arguments),this.renderNodeContent=Mt=>e$1b(Mt)&&!Mt.destroyed?n$1Q("div",{key:Mt},Mt.render()):Mt instanceof HTMLElement?n$1Q("div",{key:Mt,bind:Mt,afterCreate:this._attachToNode}):t$1b(Mt)?n$1Q("div",{key:Mt,bind:Mt.domNode,afterCreate:this._attachToNode}):null}_attachToNode(Mt){const Pt=this;Mt.appendChild(Pt)}};return Tt=e$2a([n$2L("esri.widgets.Feature.ContentMixin")],Tt),Tt},_$e={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},w$k={title:!0,content:!0,lastEditedInfo:!0};let M$j=class extends i$T(O$l){constructor(_t,Tt){super(_t,Tt),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...w$k},this.map=null,this.view=null,this.viewModel=new J$6}initialize(){this.own(l$2e(()=>{var _t;return(_t=this.viewModel)==null?void 0:_t.contentViewModels},()=>this._setupContentWidgets(),h$1w))}loadDependencies(){return __vitePreload(()=>import("./calcite-notice.3b818b94.js"),["assets/calcite-notice.3b818b94.js","assets/dom.6d780cb1.js","assets/conditionalSlot.14b9b076.js","assets/observers.e1b59ee4.js","assets/icon.b8676875.js"])}destroy(){this._destroyContentWidgets()}castVisibleElements(_t){return{...w$k,..._t}}render(){const{state:_t}=this.viewModel,Tt=n$1Q("div",{class:_$e.container,key:"container"},this.renderTitle(),_t==="error"?this.renderError():_t==="loading"?this.renderLoading():this.renderContentContainer());return n$1Q("div",{class:this.classes(_$e.base,_$e.esriWidget)},Tt)}setActiveMedia(_t,Tt){this.viewModel.setActiveMedia(_t,Tt)}nextMedia(_t){this.viewModel.nextMedia(_t)}previousMedia(_t){this.viewModel.previousMedia(_t)}renderError(){const{messagesCommon:_t,messages:Tt,visibleElements:Mt}=this;return n$1Q("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},Mt.title?n$1Q("div",{key:"error-title",slot:"title"},_t.errorMessage):null,n$1Q("div",{key:"error-message",slot:"message"},Tt.loadingError))}renderLoading(){return n$1Q("div",{key:"loading-container",class:_$e.loadingSpinnerContainer},n$1Q("span",{class:this.classes(_$e.iconLoading,_$e.spinner)}))}renderContentContainer(){const{visibleElements:_t}=this;return _t.content?n$1Q("div",{class:_$e.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:_t,title:Tt}=this;return _t.title?n$1Q(n$1P,{level:this.headingLevel,class:_$e.title,innerHTML:Tt}):null}renderContent(){const _t=this.viewModel.content,Tt="content";if(!_t)return null;if(Array.isArray(_t))return _t.length?n$1Q("div",{key:`${Tt}-content-elements`},_t.map(this.renderContentElement,this)):null;if(typeof _t=="string"){const Mt=this._contentWidgets[0];return!Mt||Mt.destroyed?null:n$1Q("div",{key:`${Tt}-content`},Mt.render())}return this.renderNodeContent(_t)}renderContentElement(_t,Tt){const{visibleElements:Mt}=this;if(typeof Mt.content!="boolean"&&!Mt.content[_t.type])return null;switch(_t.type){case"attachments":return this.renderAttachments(Tt);case"custom":return this.renderCustom(_t,Tt);case"fields":return this.renderFields(Tt);case"media":return this.renderMedia(Tt);case"text":return this.renderText(_t,Tt);case"expression":return this.renderExpression(Tt);default:return null}}renderAttachments(_t){const Tt=this._contentWidgets[_t];if(!Tt||Tt.destroyed)return null;const{state:Mt,attachmentInfos:Pt}=Tt.viewModel;return Mt==="loading"||Pt.length>0?n$1Q("div",{key:this._buildKey("attachments-element",_t),class:this.classes(_$e.contentElement)},Tt.render()):null}renderExpression(_t){const Tt=this._contentWidgets[_t];return!Tt||Tt.destroyed?null:n$1Q("div",{key:this._buildKey("expression-element",_t),class:_$e.contentElement},Tt.render())}renderCustom(_t,Tt){const{creator:Mt}=_t,Pt=this._contentWidgets[Tt];return!Pt||Pt.destroyed?null:Mt?n$1Q("div",{key:this._buildKey("custom-element",Tt),class:_$e.contentElement},Pt.render()):null}renderFields(_t){const Tt=this._contentWidgets[_t];return!Tt||Tt.destroyed?null:n$1Q("div",{key:this._buildKey("fields-element",_t),class:_$e.contentElement},Tt.render())}renderMedia(_t){const Tt=this._contentWidgets[_t];return!Tt||Tt.destroyed?null:n$1Q("div",{key:this._buildKey("media-element",_t),class:_$e.contentElement},Tt.render())}renderLastEditInfo(){const{visibleElements:_t,messages:Tt}=this,{lastEditInfo:Mt}=this.viewModel;if(!Mt||!_t.lastEditedInfo)return null;const{date:Pt,user:Ft}=Mt,Dt=Mt.type==="edit"?Ft?Tt.lastEditedByUser:Tt.lastEdited:Ft?Tt.lastCreatedByUser:Tt.lastCreated,Nt=s$1y(Dt,{date:Pt,user:Ft});return n$1Q("div",{key:"edit-info-element",class:this.classes(_$e.lastEditedInfo,_$e.contentElement)},Nt)}renderText(_t,Tt){const Mt=_t.text,Pt=this._contentWidgets[Tt];return!Pt||Pt.destroyed?null:Mt?n$1Q("div",{key:this._buildKey("text-element",Tt),class:this.classes(_$e.contentElement,_$e.text)},Pt.render()):null}_buildKey(_t,...Tt){return`${_t}__${this.get("viewModel.graphic.uid")||"0"}-${Tt.join("-")}`}_destroyContentWidget(_t){_t&&(_t.viewModel=null,!_t.destroyed&&_t.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(_t=>this._destroyContentWidget(_t)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:_t,visibleElements:Tt}=this,Mt=this.get("viewModel.content"),{contentViewModels:Pt}=this.viewModel;if(Array.isArray(Mt))Mt.forEach((Ft,Dt)=>{Ft.type==="attachments"&&(this._contentWidgets[Dt]=new m$1j({displayType:Ft.displayType,headingLevel:Tt.title?_t+1:_t,viewModel:Pt[Dt]})),Ft.type==="fields"&&(this._contentWidgets[Dt]=new c$1$({viewModel:Pt[Dt]})),Ft.type==="media"&&(this._contentWidgets[Dt]=new F$i({viewModel:Pt[Dt]})),Ft.type==="text"&&(this._contentWidgets[Dt]=new l$1r({viewModel:Pt[Dt]})),Ft.type==="custom"&&(this._contentWidgets[Dt]=new l$1r({viewModel:Pt[Dt]})),Ft.type==="expression"&&(this._contentWidgets[Dt]=new m$H({viewModel:Pt[Dt]}))},this);else{const Ft=Pt[0];Ft&&!Ft.destroyed&&(this._contentWidgets[0]=new l$1r({viewModel:Ft}))}this.scheduleRender()}};e$2a([o$1d("viewModel.graphic")],M$j.prototype,"graphic",void 0),e$2a([o$1d("viewModel.defaultPopupTemplateEnabled")],M$j.prototype,"defaultPopupTemplateEnabled",void 0),e$2a([d$25()],M$j.prototype,"headingLevel",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],M$j.prototype,"label",void 0),e$2a([d$25(),e$1f("esri/widgets/Feature/t9n/Feature")],M$j.prototype,"messages",void 0),e$2a([d$25(),e$1f("esri/t9n/common")],M$j.prototype,"messagesCommon",void 0),e$2a([d$25(),e$1f("esri/widgets/support/t9n/uriUtils")],M$j.prototype,"messagesURIUtils",void 0),e$2a([o$1d("viewModel.spatialReference")],M$j.prototype,"spatialReference",void 0),e$2a([o$1d("viewModel.title")],M$j.prototype,"title",void 0),e$2a([d$25()],M$j.prototype,"visibleElements",void 0),e$2a([s$23("visibleElements")],M$j.prototype,"castVisibleElements",null),e$2a([o$1d("viewModel.map")],M$j.prototype,"map",void 0),e$2a([o$1d("viewModel.view")],M$j.prototype,"view",void 0),e$2a([d$25({type:J$6})],M$j.prototype,"viewModel",void 0),M$j=e$2a([n$2L("esri.widgets.Feature")],M$j);const E$h=M$j;var l$O;const d$I=Symbol("anchorHandles");let m$G=class extends n$2K.EventedAccessor{constructor(_t){super(_t),this[l$O]=new u$1P,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[d$I].add([f$1p(()=>o$2f(this.screenLocationEnabled?this.view:null,Tt=>[Tt.size,Tt.type==="3d"?Tt.camera:Tt.viewpoint]),()=>this.notifyChange("screenLocation")),l$2e(()=>this.screenLocation,(Tt,Mt)=>{r$1P(Tt)&&r$1P(Mt)&&this.emit("view-change")})])}destroy(){this.view=null,this[d$I]=l$2H(this[d$I])}get screenLocation(){const{location:_t,view:Tt,screenLocationEnabled:Mt}=this;return Mt&&r$1P(_t)&&r$1P(Tt)&&Tt.ready?Tt.toScreen(_t):null}};l$O=d$I,e$2a([d$25()],m$G.prototype,"location",void 0),e$2a([d$25()],m$G.prototype,"screenLocation",null),e$2a([d$25()],m$G.prototype,"screenLocationEnabled",void 0),e$2a([d$25()],m$G.prototype,"view",void 0),m$G=e$2a([n$2L("esri.widgets.support.AnchorElementViewModel")],m$G);const h$G=m$G,t$E="esri.widgets.CompassViewModel";let p$_=class extends h$G{constructor(_t){super(_t),this.visible=!1}};e$2a([d$25()],p$_.prototype,"visible",void 0),p$_=e$2a([n$2L(t$E)],p$_);const c$11=p$_,c$10={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let h$F=class extends O$l{constructor(_t,Tt){super(_t,Tt),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new c$11,this.visible=!1}initialize(){this.own([l$2e(()=>this.visible,_t=>this._visibleChange(_t))])}destroy(){this._animationPromise=null}show(_t){const{location:Tt,promise:Mt}=_t;Tt&&(this.viewModel.location=Tt),this.visible=!0;const Pt=()=>this.hide();Mt&&Mt.catch(()=>{}).then(Pt)}hide(){this.visible=!1}render(){const{visible:_t}=this,{screenLocation:Tt}=this.viewModel,Mt=!!Tt,Pt=_t&&Mt,Ft=!_t&&Mt,Dt={[c$10.spinnerStart]:Pt,[c$10.spinnerFinish]:Ft},Nt=this._getPositionStyles();return n$1Q("div",{class:this.classes(c$10.base,Dt),styles:Nt})}_visibleChange(_t){if(_t)return void(this.viewModel.screenLocationEnabled=!0);const Tt=L$y(this._animationDelay);this._animationPromise=Tt,Tt.catch(()=>{}).then(()=>{this._animationPromise===Tt&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:_t,view:Tt}=this.viewModel;if(t$2e(Tt)||t$2e(_t))return{};const{padding:Mt}=Tt;return{left:_t.x-Mt.left+"px",top:_t.y-Mt.top+"px"}}};e$2a([o$1d("viewModel.location")],h$F.prototype,"location",void 0),e$2a([o$1d("viewModel.view")],h$F.prototype,"view",void 0),e$2a([d$25({type:c$11})],h$F.prototype,"viewModel",void 0),e$2a([o$1d("viewModel.visible")],h$F.prototype,"visible",void 0),h$F=e$2a([n$2L("esri.widgets.Spinner")],h$F);const m$F=h$F;var t$D;(function(_t){_t[_t.size=22]="size",_t[_t.lineWidth=50]="lineWidth",_t[_t.maxSize=120]="maxSize",_t[_t.maxOutlineSize=80]="maxOutlineSize",_t[_t.tallSymbolWidth=20]="tallSymbolWidth"})(t$D||(t$D={}));const e$J={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function m$E(_t,Tt,Mt){const Pt=t$D.size;let Ft=Pt,Dt=Pt;_t<1?Ft*=.75:_t>1&&(Dt*=1.25);const Nt=0,Vt=0;let zt=Pt,Xt=Pt;return Tt&&Mt&&(Ft=Dt=zt=Xt=0),[{type:"path",path:[{command:"M",values:[zt,Nt]},{command:"L",values:[Mt?zt:.875*zt,Nt]},{command:"L",values:[Mt?Ft-.5*zt:Vt,Dt-.5*Xt]},{command:"L",values:[Ft-.5*zt,Dt-.5*Xt]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[zt,Nt]},{command:"L",values:[zt,Tt?Nt:.125*Xt]},{command:"L",values:[Ft-.5*zt,Tt?Dt-.5*Xt:Xt]},{command:"L",values:[Ft-.5*zt,Dt-.5*Xt]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[Ft-.5*zt,Dt-.5*Xt]},{command:"L",values:[Mt?Ft-.5*zt:Vt,Dt-.5*Xt]},{command:"L",values:[Mt?Ft-.5*zt:Vt,Tt?Dt-.5*Xt:Xt]},{command:"L",values:[Ft-.5*zt,Tt?Dt-.5*Xt:Xt]},{command:"Z",values:[]}]}]}function c$$(_t){const Tt=t$D.size,Mt=.5*_t,Pt=0,Ft=0;return[{type:"path",path:[{command:"M",values:[Ft,.7*Tt*.5]},{command:"L",values:[.3*Tt,.7*Tt]},{command:"L",values:[.3*Tt,.7*Tt+Mt]},{command:"L",values:[Ft,.7*Tt+Mt-.7*Tt*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*Tt,.7*Tt]},{command:"L",values:[.3*Tt,.7*Tt+Mt]},{command:"L",values:[Tt,Mt]},{command:"L",values:[Tt,Pt]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*Tt,Pt]},{command:"L",values:[Tt,Pt]},{command:"L",values:[.3*Tt,.7*Tt]},{command:"L",values:[Ft,.7*Tt*.5]},{command:"Z",values:[]}]}]}function p$Z(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function n$_(_t,Tt){let Mt=Tt?t$D.tallSymbolWidth:_t;const Pt=_t,Ft=Tt?4:6;Mt<=t$D.size?Mt-=.5*Ft:Mt-=Ft;const Dt=0,Nt=0,Vt=Tt?.35*Mt:.5*Mt;return[{type:"path",path:[{command:"M",values:[.5*Mt,Dt]},{command:"L",values:[Mt,.5*Vt]},{command:"L",values:[.5*Mt,Vt]},{command:"L",values:[Nt,.5*Vt]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[Dt,.5*Vt]},{command:"L",values:[.5*Mt,Vt]},{command:"L",values:[.5*Mt,Pt]},{command:"L",values:[Nt,Pt-.5*Vt]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*Mt,Vt]},{command:"L",values:[.5*Mt,Pt]},{command:"L",values:[Mt,Pt-.5*Vt]},{command:"L",values:[Mt,.5*Vt]},{command:"Z",values:[]}]}]}function L$d(_t,Tt){let Mt=Tt?t$D.tallSymbolWidth:_t;const Pt=_t,Ft=Tt?4:6;Mt<=t$D.size?Mt-=.5*Ft:Mt-=Ft;const Dt=.5*Mt,Nt=.15*Mt,Vt=0,zt=Pt-Nt;return[{type:"ellipse",cx:.5*Mt,cy:zt,rx:Dt,ry:Nt},{type:"path",path:[{command:"M",values:[Vt,Nt]},{command:"L",values:[Vt,zt]},{command:"L",values:[Mt,zt]},{command:"L",values:[Mt,Nt]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*Mt,cy:Nt,rx:Dt,ry:Nt}]}function l$N(_t,Tt){let Mt=Tt?t$D.tallSymbolWidth:_t;const Pt=_t,Ft=Tt?4:6;Mt<=t$D.size?Mt-=.5*Ft:Mt-=Ft;const Dt=.15*Mt,Nt=Pt-Dt;return[{type:"ellipse",cx:.5*Mt,cy:Nt,rx:.5*Mt,ry:Dt},{type:"path",path:[{command:"M",values:[.5*Mt,0]},{command:"L",values:[Mt,Nt]},{command:"L",values:[0,Nt]},{command:"Z",values:[]}]}]}function o$I(_t){let Tt=_t;const Mt=_t,Pt=6;Tt<t$D.size?Tt-=.5*Pt:Tt-=Pt;const Ft=.15*Tt,Dt=0;return[{type:"path",path:[{command:"M",values:[0,Dt]},{command:"L",values:[Tt,Dt]},{command:"L",values:[.5*Tt,Mt-Ft]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*Tt,cy:Dt,rx:.5*Tt,ry:Ft}]}function s$K(_t){let Tt=_t;const Mt=_t,Pt=4;Tt<t$D.size?Tt-=.5*Pt:Tt-=Pt;const Ft=0,Dt=0,Nt=Tt,Vt=Mt,zt=Math.floor(_t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*Nt,Ft]},{command:"L",values:[Nt,.5*Vt-zt]},{command:"L",values:[.45*Nt-zt,.5*Vt+zt]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*Nt,Ft]},{command:"L",values:[.45*Nt-zt,.5*Vt+zt]},{command:"L",values:[Dt,.5*Vt-zt]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[Dt,.5*Vt-zt]},{command:"L",values:[.45*Nt-zt,.5*Vt+zt]},{command:"L",values:[.45*Nt,Mt]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*Nt,Mt]},{command:"L",values:[Nt,.5*Vt-zt]},{command:"L",values:[.45*Nt-zt,.5*Vt+zt]},{command:"Z",values:[]}]}]}function u$G(_t){const Tt=_t,Mt=2;let Pt=_t;Pt<t$D.size?Pt-=.5*Mt:Pt-=Mt;const Ft=0,Dt=0;return[{type:"path",path:[{command:"M",values:[.45*Tt,Ft]},{command:"L",values:[Tt,Pt]},{command:"L",values:[.45*Tt,.6*Pt]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*Tt,Ft]},{command:"L",values:[.45*Tt,.6*Pt]},{command:"L",values:[Dt,Pt]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[Dt,Pt]},{command:"L",values:[.45*Tt,.6*Pt]},{command:"L",values:[Tt,Pt]},{command:"Z",values:[]}]}]}function h$E(_t,Tt){return Math.round(Math.min(Math.max(_t+255*Tt*.75,0),255))}function d$H(_t,Tt){if("type"in _t&&(_t.type==="linear"||_t.type==="pattern"))return _t;const Mt=new l$2f(_t);return new l$2f([h$E(Mt.r,Tt),h$E(Mt.g,Tt),h$E(Mt.b,Tt),Mt.a])}function n$Z(_t){return"r"in _t&&"g"in _t&&"b"in _t}function t$C(_t){return"h"in _t&&"s"in _t&&"v"in _t}function r$E(_t){return"l"in _t&&"a"in _t&&"b"in _t}function u$F(_t){return"l"in _t&&"c"in _t&&"h"in _t}function o$H(_t){return"x"in _t&&"y"in _t&&"z"in _t}const e$I=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],c$_=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function i$S(_t,Tt){const Mt=[];let Pt,Ft;if(_t[0].length!==Tt.length)throw"dimensions do not match";const Dt=_t.length,Nt=_t[0].length;let Vt=0;for(Pt=0;Pt<Dt;Pt++){for(Vt=0,Ft=0;Ft<Nt;Ft++)Vt+=_t[Pt][Ft]*Tt[Ft];Mt.push(Vt)}return Mt}function a$W(_t){const Tt=[_t.r/255,_t.g/255,_t.b/255].map(Pt=>Pt<=.04045?Pt/12.92:((Pt+.055)/1.055)**2.4),Mt=i$S(e$I,Tt);return{x:100*Mt[0],y:100*Mt[1],z:100*Mt[2]}}function h$D(_t){const Tt=i$S(c$_,[_t.x/100,_t.y/100,_t.z/100]).map(Mt=>{const Pt=Mt<=.0031308?12.92*Mt:1.055*Mt**.4166666666666667-.055;return Math.min(1,Math.max(Pt,0))});return{r:Math.round(255*Tt[0]),g:Math.round(255*Tt[1]),b:Math.round(255*Tt[2])}}function s$J(_t){const Tt=[_t.x/95.047,_t.y/100,_t.z/108.883].map(Mt=>Mt>.008856451679035631?Mt**.3333333333333333:7.787037037037035*Mt+.13793103448275862);return{l:116*Tt[1]-16,a:500*(Tt[0]-Tt[1]),b:200*(Tt[1]-Tt[2])}}function f$u(_t){const Tt=_t.l,Mt=[(Tt+16)/116+_t.a/500,(Tt+16)/116,(Tt+16)/116-_t.b/200].map(Pt=>Pt>6/29?Pt**3:3*(6/29)**2*(Pt-4/29));return{x:95.047*Mt[0],y:100*Mt[1],z:108.883*Mt[2]}}function b$o(_t){const Tt=_t.l,Mt=_t.a,Pt=_t.b,Ft=Math.sqrt(Mt*Mt+Pt*Pt);let Dt=Math.atan2(Pt,Mt);return Dt=Dt>0?Dt:Dt+2*Math.PI,{l:Tt,c:Ft,h:Dt}}function l$M(_t){const Tt=_t.l,Mt=_t.c,Pt=_t.h;return{l:Tt,a:Mt*Math.cos(Pt),b:Mt*Math.sin(Pt)}}function g$t(_t){return s$J(a$W(_t))}function M$i(_t){return h$D(f$u(_t))}function m$D(_t){return b$o(s$J(a$W(_t)))}function d$G(_t){return h$D(f$u(l$M(_t)))}function x$j(_t){const Tt=_t.r,Mt=_t.g,Pt=_t.b,Ft=Math.max(Tt,Mt,Pt),Dt=Ft-Math.min(Tt,Mt,Pt);let Nt=Ft,Vt=Dt===0?0:Ft===Tt?(Mt-Pt)/Dt%6:Ft===Mt?(Pt-Tt)/Dt+2:(Tt-Mt)/Dt+4,zt=Dt===0?0:Dt/Nt;return Vt<0&&(Vt+=6),Vt*=60,zt*=100,Nt*=100/255,{h:Vt,s:zt,v:Nt}}function k$b(_t){const Tt=(_t.h+360)%360/60,Mt=_t.s/100,Pt=_t.v/100*255,Ft=Pt*Mt,Dt=Ft*(1-Math.abs(Tt%2-1));let Nt;switch(Math.floor(Tt)){case 0:Nt={r:Ft,g:Dt,b:0};break;case 1:Nt={r:Dt,g:Ft,b:0};break;case 2:Nt={r:0,g:Ft,b:Dt};break;case 3:Nt={r:0,g:Dt,b:Ft};break;case 4:Nt={r:Dt,g:0,b:Ft};break;case 5:case 6:Nt={r:Ft,g:0,b:Dt};break;default:Nt={r:0,g:0,b:0}}return Nt.r=Math.round(Nt.r+Pt-Ft),Nt.g=Math.round(Nt.g+Pt-Ft),Nt.b=Math.round(Nt.b+Pt-Ft),Nt}function p$Y(_t){return n$Z(_t)?_t:u$F(_t)?d$G(_t):r$E(_t)?M$i(_t):o$H(_t)?h$D(_t):t$C(_t)?k$b(_t):_t}function y$u(_t){return t$C(_t)?_t:x$j(p$Y(_t))}function z$b(_t){return r$E(_t)?_t:g$t(p$Y(_t))}function v$r(_t){return u$F(_t)?_t:m$D(p$Y(_t))}function q$7(_t,Tt){const Mt=g$t(_t);return Mt.l*=1-Tt,M$i(Mt)}function n$Y(){const _t=new Float32Array(6);return _t[0]=1,_t[3]=1,_t}function t$B(_t){const Tt=new Float32Array(6);return Tt[0]=_t[0],Tt[1]=_t[1],Tt[2]=_t[2],Tt[3]=_t[3],Tt[4]=_t[4],Tt[5]=_t[5],Tt}function r$D(_t,Tt,Mt,Pt,Ft,Dt){const Nt=new Float32Array(6);return Nt[0]=_t,Nt[1]=Tt,Nt[2]=Mt,Nt[3]=Pt,Nt[4]=Ft,Nt[5]=Dt,Nt}function e$H(_t,Tt){return new Float32Array(_t,Tt,6)}function o$G(_t,Tt,Mt,Pt){const Ft=Tt[Pt],Dt=Tt[Pt+1];_t[Pt]=Mt[0]*Ft+Mt[2]*Dt+Mt[4],_t[Pt+1]=Mt[1]*Ft+Mt[3]*Dt+Mt[5]}function a$V(_t,Tt,Mt,Pt=0,Ft=0,Dt=2){const Nt=Ft||Tt.length/Dt;for(let Vt=Pt;Vt<Nt;Vt++)o$G(_t,Tt,Mt,Vt*Dt)}Object.freeze(Object.defineProperty({__proto__:null,create:n$Y,clone:t$B,fromValues:r$D,createView:e$H,transform:o$G,transformMany:a$V},Symbol.toStringTag,{value:"Module"}));function a$U(_t,Tt){return _t[0]=Tt[0],_t[1]=Tt[1],_t[2]=Tt[2],_t[3]=Tt[3],_t[4]=Tt[4],_t[5]=Tt[5],_t}function n$X(_t){return _t[0]=1,_t[1]=0,_t[2]=0,_t[3]=1,_t[4]=0,_t[5]=0,_t}function s$I(_t,Tt,Mt,Pt,Ft,Dt,Nt){return _t[0]=Tt,_t[1]=Mt,_t[2]=Pt,_t[3]=Ft,_t[4]=Dt,_t[5]=Nt,_t}function r$C(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[3],Nt=Tt[4],Vt=Tt[5];let zt=Mt*Dt-Pt*Ft;return zt?(zt=1/zt,_t[0]=Dt*zt,_t[1]=-Pt*zt,_t[2]=-Ft*zt,_t[3]=Mt*zt,_t[4]=(Ft*Vt-Dt*Nt)*zt,_t[5]=(Pt*Nt-Mt*Vt)*zt,_t):null}function u$E(_t){return _t[0]*_t[3]-_t[1]*_t[2]}function o$F(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Tt[3],Vt=Tt[4],zt=Tt[5],Xt=Mt[0],Ht=Mt[1],Wt=Mt[2],Qt=Mt[3],Zt=Mt[4],Kt=Mt[5];return _t[0]=Pt*Xt+Dt*Ht,_t[1]=Ft*Xt+Nt*Ht,_t[2]=Pt*Wt+Dt*Qt,_t[3]=Ft*Wt+Nt*Qt,_t[4]=Pt*Zt+Dt*Kt+Vt,_t[5]=Ft*Zt+Nt*Kt+zt,_t}function e$G(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Tt[3],Vt=Tt[4],zt=Tt[5],Xt=Math.sin(Mt),Ht=Math.cos(Mt);return _t[0]=Pt*Ht+Dt*Xt,_t[1]=Ft*Ht+Nt*Xt,_t[2]=Pt*-Xt+Dt*Ht,_t[3]=Ft*-Xt+Nt*Ht,_t[4]=Vt,_t[5]=zt,_t}function c$Z(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Tt[3],Vt=Tt[4],zt=Tt[5],Xt=Mt[0],Ht=Mt[1];return _t[0]=Pt*Xt,_t[1]=Ft*Xt,_t[2]=Dt*Ht,_t[3]=Nt*Ht,_t[4]=Vt,_t[5]=zt,_t}function i$R(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Tt[3],Vt=Tt[4],zt=Tt[5],Xt=Mt[0],Ht=Mt[1];return _t[0]=Pt,_t[1]=Ft,_t[2]=Dt,_t[3]=Nt,_t[4]=Pt*Xt+Dt*Ht+Vt,_t[5]=Ft*Xt+Nt*Ht+zt,_t}function h$C(_t,Tt){const Mt=Math.sin(Tt),Pt=Math.cos(Tt);return _t[0]=Pt,_t[1]=Mt,_t[2]=-Mt,_t[3]=Pt,_t[4]=0,_t[5]=0,_t}function M$h(_t,Tt){return _t[0]=Tt[0],_t[1]=0,_t[2]=0,_t[3]=Tt[1],_t[4]=0,_t[5]=0,_t}function f$t(_t,Tt){return _t[0]=1,_t[1]=0,_t[2]=0,_t[3]=1,_t[4]=Tt[0],_t[5]=Tt[1],_t}function b$n(_t){return"mat2d("+_t[0]+", "+_t[1]+", "+_t[2]+", "+_t[3]+", "+_t[4]+", "+_t[5]+")"}function l$L(_t){return Math.sqrt(_t[0]**2+_t[1]**2+_t[2]**2+_t[3]**2+_t[4]**2+_t[5]**2+1)}function m$C(_t,Tt,Mt){return _t[0]=Tt[0]+Mt[0],_t[1]=Tt[1]+Mt[1],_t[2]=Tt[2]+Mt[2],_t[3]=Tt[3]+Mt[3],_t[4]=Tt[4]+Mt[4],_t[5]=Tt[5]+Mt[5],_t}function d$F(_t,Tt,Mt){return _t[0]=Tt[0]-Mt[0],_t[1]=Tt[1]-Mt[1],_t[2]=Tt[2]-Mt[2],_t[3]=Tt[3]-Mt[3],_t[4]=Tt[4]-Mt[4],_t[5]=Tt[5]-Mt[5],_t}function p$X(_t,Tt,Mt){return _t[0]=Tt[0]*Mt,_t[1]=Tt[1]*Mt,_t[2]=Tt[2]*Mt,_t[3]=Tt[3]*Mt,_t[4]=Tt[4]*Mt,_t[5]=Tt[5]*Mt,_t}function x$i(_t,Tt,Mt,Pt){return _t[0]=Tt[0]+Mt[0]*Pt,_t[1]=Tt[1]+Mt[1]*Pt,_t[2]=Tt[2]+Mt[2]*Pt,_t[3]=Tt[3]+Mt[3]*Pt,_t[4]=Tt[4]+Mt[4]*Pt,_t[5]=Tt[5]+Mt[5]*Pt,_t}function y$t(_t,Tt){return _t[0]===Tt[0]&&_t[1]===Tt[1]&&_t[2]===Tt[2]&&_t[3]===Tt[3]&&_t[4]===Tt[4]&&_t[5]===Tt[5]}function S$f(_t,Tt){const Mt=_t[0],Pt=_t[1],Ft=_t[2],Dt=_t[3],Nt=_t[4],Vt=_t[5],zt=Tt[0],Xt=Tt[1],Ht=Tt[2],Wt=Tt[3],Qt=Tt[4],Zt=Tt[5];return Math.abs(Mt-zt)<=t$1M*Math.max(1,Math.abs(Mt),Math.abs(zt))&&Math.abs(Pt-Xt)<=t$1M*Math.max(1,Math.abs(Pt),Math.abs(Xt))&&Math.abs(Ft-Ht)<=t$1M*Math.max(1,Math.abs(Ft),Math.abs(Ht))&&Math.abs(Dt-Wt)<=t$1M*Math.max(1,Math.abs(Dt),Math.abs(Wt))&&Math.abs(Nt-Qt)<=t$1M*Math.max(1,Math.abs(Nt),Math.abs(Qt))&&Math.abs(Vt-Zt)<=t$1M*Math.max(1,Math.abs(Vt),Math.abs(Zt))}const g$s=o$F,j$k=d$F;Object.freeze(Object.defineProperty({__proto__:null,copy:a$U,identity:n$X,set:s$I,invert:r$C,determinant:u$E,multiply:o$F,rotate:e$G,scale:c$Z,translate:i$R,fromRotation:h$C,fromScaling:M$h,fromTranslation:f$t,str:b$n,frob:l$L,add:m$C,subtract:d$F,multiplyScalar:p$X,multiplyScalarAndAdd:x$i,exactEquals:y$t,equals:S$f,mul:g$s,sub:j$k},Symbol.toStringTag,{value:"Module"}));const h$B="http://www.w3.org/2000/svg";let f$s=0,c$Y=0;const d$E=a$32("android"),u$D=a$32("chrome")||d$E&&d$E>=4?"auto":"optimizeLegibility",y$s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},p$W=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let g$r={},x$h={};const m$B={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},w$j=Math.PI;let k$a=1;function b$m(_t,Tt){const Mt=_t*(w$j/180);return Math.abs(Tt*Math.sin(Mt))+Math.abs(Tt*Math.cos(Mt))}function j$j(_t){return _t.map(Tt=>`${Tt.command} ${Tt.values.join(" ")}`).join(" ").trim()}function v$q(_t,Tt,Mt,Pt){if(_t){if(_t.type==="circle")return n$1Q("circle",{fill:Tt,"fill-rule":"evenodd",stroke:Mt.color,"stroke-width":Mt.width,"stroke-linecap":Mt.cap,"stroke-linejoin":Mt.join,"stroke-dasharray":Mt.dashArray,"stroke-dashoffset":Mt.dashOffset,"stroke-miterlimit":"4",cx:_t.cx,cy:_t.cy,r:_t.r});if(_t.type==="ellipse")return n$1Q("ellipse",{fill:Tt,"fill-rule":"evenodd",stroke:Mt.color,"stroke-width":Mt.width,"stroke-linecap":Mt.cap,"stroke-linejoin":Mt.join,"stroke-dasharray":Mt.dashArray,"stroke-miterlimit":"4",cx:_t.cx,cy:_t.cy,rx:_t.rx,ry:_t.ry});if(_t.type==="rect")return n$1Q("rect",{fill:Tt,"fill-rule":"evenodd",stroke:Mt.color,"stroke-width":Mt.width,"stroke-linecap":Mt.cap,"stroke-linejoin":Mt.join,"stroke-dasharray":Mt.dashArray,"stroke-miterlimit":"4",x:_t.x,y:_t.y,width:_t.width,height:_t.height});if(_t.type==="image")return n$1Q("image",{href:_t.src,x:_t.x,y:_t.y,width:_t.width,height:_t.height,preserveAspectRatio:"none"});if(_t.type==="path"){const Ft=typeof _t.path!="string"?j$j(_t.path):_t.path;return n$1Q("path",{fill:Tt,"fill-rule":"evenodd",stroke:Mt.color,"stroke-width":Mt.width,"stroke-linecap":Mt.cap,"stroke-linejoin":Mt.join,"stroke-dasharray":Mt.dashArray,"stroke-miterlimit":"4",d:Ft})}if(_t.type==="text")return n$1Q("text",{"alignment-baseline":Pt.alignBaseline,fill:Tt,"fill-rule":"evenodd",stroke:Mt.color,"stroke-width":Mt.width,"stroke-linecap":Mt.cap,"stroke-linejoin":Mt.join,"stroke-dasharray":Mt.dashArray,"stroke-miterlimit":"4","text-anchor":Pt.align,"text-decoration":Pt.decoration,kerning:Pt.kerning,rotate:Pt.rotate,"text-rendering":u$D,"font-style":Pt.font.style,"font-variant":Pt.font.variant,"font-weight":Pt.font.weight,"font-size":Pt.font.size,"font-family":Pt.font.family,x:_t.x,y:_t.y},_t.text)}return null}function M$g(_t){const Tt={fill:"none",pattern:null,linearGradient:null};if(_t){if("type"in _t&&_t.type==="pattern"){const Mt="patternId-"+ ++f$s;Tt.fill=`url(#${Mt})`,Tt.pattern={id:Mt,x:_t.x,y:_t.y,width:_t.width,height:_t.height,image:{x:0,y:0,width:_t.width,height:_t.height,href:_t.src}}}else if("type"in _t&&_t.type==="linear"){const Mt="linearGradientId-"+ ++c$Y;Tt.fill=`url(#${Mt})`,Tt.linearGradient={id:Mt,x1:_t.x1,y1:_t.y1,x2:_t.x2,y2:_t.y2,stops:_t.colors.map(Pt=>({offset:Pt.offset,color:Pt.color&&new l$2f(Pt.color).toString()}))}}else if(_t){const Mt=new l$2f(_t);Tt.fill=Mt.toString()}}return Tt}function A$b(_t){const Tt={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(_t&&(_t.width!=null&&(Tt.width=_t.width),_t.cap&&(Tt.cap=_t.cap),_t.join&&(Tt.join=_t.join.toString()),_t.color&&(Tt.color=new l$2f(_t.color).toString()),_t.dashArray&&(Tt.dashArray=_t.dashArray),_t.dashArray&&(Tt.dashOffset=_t.dashoffset),_t.style)){let Mt=null;if(_t.style in m$B&&(Mt=m$B[_t.style]),Array.isArray(Mt)){Mt=Mt.slice(0);for(let Pt=0;Pt<Mt.length;++Pt)Mt[Pt]*=_t.width;if(_t.cap!=="butt"){for(let Pt=0;Pt<Mt.length;Pt+=2)Mt[Pt]-=_t.width,Mt[Pt]<1&&(Mt[Pt]=1);for(let Pt=1;Pt<Mt.length;Pt+=2)Mt[Pt]+=_t.width}Mt=Mt.join(",")}Tt.dashArray=Mt}return Tt}function S$e(_t,Tt){const Mt={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return _t&&(Mt.align=_t.align,Mt.alignBaseline=_t.alignBaseline,Mt.decoration=_t.decoration,Mt.kerning=_t.kerning?"auto":"0",Mt.rotate=_t.rotated?"90":"0",Mt.font.style=Tt.style||"normal",Mt.font.variant=Tt.variant||"normal",Mt.font.weight=Tt.weight||"normal",Mt.font.size=Tt.size&&Tt.size.toString()||"10pt",Mt.font.family=Tt.family||"serif"),Mt}function $$4(_t){const{pattern:Tt,linearGradient:Mt}=_t;if(Tt)return n$1Q("pattern",{id:Tt.id,patternUnits:"userSpaceOnUse",x:Tt.x,y:Tt.y,width:Tt.width,height:Tt.height},n$1Q("image",{x:Tt.image.x,y:Tt.image.y,width:Tt.image.width,height:Tt.image.height,href:Tt.image.href}));if(Mt){const Pt=Mt.stops.map((Ft,Dt)=>n$1Q("stop",{key:`${Dt}-stop`,offset:Ft.offset,"stop-color":Ft.color}));return n$1Q("linearGradient",{id:Mt.id,gradientUnits:"userSpaceOnUse",x1:Mt.x1,y1:Mt.y1,x2:Mt.x2,y2:Mt.y2},Pt)}return null}function N$a(_t,Tt){if(!_t)return null;const Mt=[];for(const Pt of _t){const{shape:Ft,fill:Dt,stroke:Nt,font:Vt}=Pt,zt=M$g(Dt),Xt=A$b(Nt),Ht=Ft.type==="text"?S$e(Ft,Vt):null;Mt.push(v$q(Ft,zt.fill,Xt,Ht))}return n$1Q("mask",{id:Tt,maskUnits:"userSpaceOnUse"},n$1Q("g",null,Mt))}function G$8(_t,Tt,Mt){return i$R(_t,n$X(_t),[Tt,Mt])}function I$c(_t,Tt,Mt,Pt,Ft){return c$Z(_t,n$X(_t),[Tt,Mt]),_t[4]=_t[4]*Tt-Pt*Tt+Pt,_t[5]=_t[5]*Mt-Ft*Mt+Ft,_t}function z$a(_t,Tt,Mt,Pt){const Ft=Tt%360*Math.PI/180;e$G(_t,n$X(_t),Ft);const Dt=Math.cos(Ft),Nt=Math.sin(Ft),Vt=_t[4],zt=_t[5];return _t[4]=Vt*Dt-zt*Nt+Pt*Nt-Mt*Dt+Mt,_t[5]=zt*Dt+Vt*Nt-Mt*Nt-Pt*Dt+Pt,_t}function B$a(_t,Tt){g$r&&"left"in g$r?(g$r.left>_t&&(g$r.left=_t),g$r.right<_t&&(g$r.right=_t),g$r.top>Tt&&(g$r.top=Tt),g$r.bottom<Tt&&(g$r.bottom=Tt)):g$r={left:_t,bottom:Tt,right:_t,top:Tt}}function U$e(_t){const Tt=_t.args,Mt=Tt.length;let Pt;switch(_t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(Pt=0;Pt<Mt;Pt+=2)B$a(Tt[Pt],Tt[Pt+1]);x$h.x=Tt[Mt-2],x$h.y=Tt[Mt-1];break;case"H":for(Pt=0;Pt<Mt;++Pt)B$a(Tt[Pt],x$h.y);x$h.x=Tt[Mt-1];break;case"V":for(Pt=0;Pt<Mt;++Pt)B$a(x$h.x,Tt[Pt]);x$h.y=Tt[Mt-1];break;case"m":{let Ft=0;for(("x"in x$h)||(B$a(x$h.x=Tt[0],x$h.y=Tt[1]),Ft=2),Pt=Ft;Pt<Mt;Pt+=2)B$a(x$h.x+=Tt[Pt],x$h.y+=Tt[Pt+1]);break}case"l":case"t":for(Pt=0;Pt<Mt;Pt+=2)B$a(x$h.x+=Tt[Pt],x$h.y+=Tt[Pt+1]);break;case"h":for(Pt=0;Pt<Mt;++Pt)B$a(x$h.x+=Tt[Pt],x$h.y);break;case"v":for(Pt=0;Pt<Mt;++Pt)B$a(x$h.x,x$h.y+=Tt[Pt]);break;case"c":for(Pt=0;Pt<Mt;Pt+=6)B$a(x$h.x+Tt[Pt],x$h.y+Tt[Pt+1]),B$a(x$h.x+Tt[Pt+2],x$h.y+Tt[Pt+3]),B$a(x$h.x+=Tt[Pt+4],x$h.y+=Tt[Pt+5]);break;case"s":case"q":for(Pt=0;Pt<Mt;Pt+=4)B$a(x$h.x+Tt[Pt],x$h.y+Tt[Pt+1]),B$a(x$h.x+=Tt[Pt+2],x$h.y+=Tt[Pt+3]);break;case"A":for(Pt=0;Pt<Mt;Pt+=7)B$a(Tt[Pt+5],Tt[Pt+6]);x$h.x=Tt[Mt-2],x$h.y=Tt[Mt-1];break;case"a":for(Pt=0;Pt<Mt;Pt+=7)B$a(x$h.x+=Tt[Pt+5],x$h.y+=Tt[Pt+6])}}function F$b(_t,Tt,Mt){const Pt=y$s[_t.toLowerCase()];let Ft;typeof Pt=="number"&&(Pt?Tt.length>=Pt&&(Ft={action:_t,args:Tt.slice(0,Tt.length-Tt.length%Pt)},Mt.push(Ft),U$e(Ft)):(Ft={action:_t,args:[]},Mt.push(Ft),U$e(Ft)))}function O$c(_t){const Tt=(typeof _t.path!="string"?j$j(_t.path):_t.path).match(p$W),Mt=[];if(g$r={},x$h={},!Tt)return null;let Pt="",Ft=[];const Dt=Tt.length;for(let Vt=0;Vt<Dt;++Vt){const zt=Tt[Vt],Xt=parseFloat(zt);isNaN(Xt)?(Pt&&F$b(Pt,Ft,Mt),Ft=[],Pt=zt):Ft.push(Xt)}F$b(Pt,Ft,Mt);const Nt={x:0,y:0,width:0,height:0};return g$r&&"left"in g$r&&(Nt.x=g$r.left,Nt.y=g$r.top,Nt.width=g$r.right-g$r.left,Nt.height=g$r.bottom-g$r.top),Nt}function T$b(_t){const Tt={x:0,y:0,width:0,height:0};if(_t.type==="circle")Tt.x=_t.cx-_t.r,Tt.y=_t.cy-_t.r,Tt.width=2*_t.r,Tt.height=2*_t.r;else if(_t.type==="ellipse")Tt.x=_t.cx-_t.rx,Tt.y=_t.cy-_t.ry,Tt.width=2*_t.rx,Tt.height=2*_t.ry;else if(_t.type==="image"||_t.type==="rect")Tt.x=_t.x,Tt.y=_t.y,Tt.width=_t.width,Tt.height=_t.height;else if(_t.type==="path"){const Mt=O$c(_t);Tt.x=Mt.x,Tt.y=Mt.y,Tt.width=Mt.width,Tt.height=Mt.height}return Tt}function E$g(_t){const Tt={x:0,y:0,width:0,height:0};let Mt=null,Pt=Number.NEGATIVE_INFINITY,Ft=Number.NEGATIVE_INFINITY;for(const Dt of _t)Mt?(Mt.x=Math.min(Mt.x,Dt.x),Mt.y=Math.min(Mt.y,Dt.y),Pt=Math.max(Pt,Dt.x+Dt.width),Ft=Math.max(Ft,Dt.y+Dt.height)):(Mt=Tt,Mt.x=Dt.x,Mt.y=Dt.y,Pt=Dt.x+Dt.width,Ft=Dt.y+Dt.height);return Mt&&(Mt.width=Pt-Mt.x,Mt.height=Ft-Mt.y),Mt}function V$e(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt){let Xt=(Nt&&Dt?b$m(Dt,Tt):Tt)/2,Ht=(Nt&&Dt?b$m(Dt,Mt):Mt)/2;if(zt){const ir=zt[0],nr=zt[1];Xt=(Nt&&Dt?b$m(Dt,ir):ir)/2,Ht=(Nt&&Dt?b$m(Dt,nr):nr)/2}const Wt=_t.width+Pt,Qt=_t.height+Pt,Zt=n$Y(),Kt=n$Y();let er=!1;if(Ft&&Wt!==0&&Qt!==0){const ir=Tt!==Mt?Tt/Mt:Wt/Qt,nr=Tt>Mt?Tt:Mt;let ar=1,or=1;isNaN(nr)||(ir>1?(ar=nr/Wt,or=nr/ir/Qt):(or=nr/Qt,ar=nr*ir/Wt)),o$F(Kt,Kt,I$c(Zt,ar,or,Xt,Ht)),er=!0}const Yt=_t.x+(Wt-Pt)/2,rr=_t.y+(Qt-Pt)/2;if(o$F(Kt,Kt,G$8(Zt,Xt-Yt,Ht-rr)),!er&&(Wt>Tt||Qt>Mt)){const ir=Wt/Tt>Qt/Mt,nr=(ir?Tt:Mt)/(ir?Wt:Qt);o$F(Kt,Kt,I$c(Zt,nr,nr,Yt,rr))}return Dt&&o$F(Kt,Kt,z$a(Zt,Dt,Yt,rr)),Vt&&o$F(Kt,Kt,G$8(Zt,Vt[0],Vt[1])),`matrix(${Kt[0]},${Kt[1]},${Kt[2]},${Kt[3]},${Kt[4]},${Kt[5]})`}function C$9(_t,Tt,Mt){const Pt=_t==null?void 0:_t.effects.find(Xt=>Xt.type==="bloom");if(!Pt)return null;const{strength:Ft,radius:Dt}=Pt,Nt=Ft>0?Dt:0,Vt=(Ft+Nt)*Tt,zt=4*Ft+1;return n$1Q("filter",{id:`bloom${Mt}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},n$1Q("feMorphology",{operator:"dilate",radius:(Ft+.5*Nt)*(5**(Tt/100)*(.4+Tt/100)),in:"SourceGraphic",result:"dilate"}),n$1Q("feGaussianBlur",{in:"dilate",stdDeviation:Vt/25,result:"blur"}),n$1Q("feGaussianBlur",{in:"blur",stdDeviation:Vt/50,result:"intensityBlur"}),n$1Q("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},n$1Q("feFuncR",{type:"linear",slope:zt}),n$1Q("feFuncG",{type:"linear",slope:zt}),n$1Q("feFuncB",{type:"linear",slope:zt})),n$1Q("feMerge",null,n$1Q("feMergeNode",{in:"intensityBlur"}),n$1Q("feMergeNode",{in:"intensityBrightness"}),n$1Q("feGaussianBlur",{stdDeviation:Ft/10})))}function D$b(_t,Tt,Mt,Pt={}){var Xt;const Ft=[],Dt=[],Nt=++k$a,Vt=C$9(Pt.effectView,Tt,Nt);let zt=null;if(Vt){const Ht=(Xt=Pt.effectView)==null?void 0:Xt.effects.find(Kt=>Kt.type==="bloom"),Wt=(Ht.strength?Ht.strength+Ht.radius/2:0)/3,Qt=Tt+Tt*Wt,Zt=Mt+Mt*Wt;zt=[Math.max(Qt,10),Math.max(Zt,10)]}for(let Ht=0;Ht<_t.length;Ht++){const Wt=_t[Ht],Qt=[],Zt=[];let Kt=0,er=0,Yt=0;for(const nr of Wt){const{shape:ar,fill:or,stroke:ur,font:dr,offset:hr}=nr;Pt.ignoreStrokeWidth||(Kt+=ur&&ur.width||0);const gr=M$g(or),pr=A$b(ur),mr=ar.type==="text"?S$e(ar,dr):null;Ft.push($$4(gr)),Qt.push(v$q(ar,gr.fill,pr,mr)),Zt.push(T$b(ar)),hr&&(er+=hr[0],Yt+=hr[1])}const rr=V$e(E$g(Zt),Tt,Mt,Kt,Pt.scale,Pt.rotation,Pt.useRotationSize,[er,Yt],zt);let ir=null;if(Pt.masking){const nr=`mask-${Ht}`,ar=Pt.masking[Ht];Ft.push(N$a(ar,nr)),ir=`url(#${nr})`}Dt.push(ir?n$1Q("g",{mask:ir},n$1Q("g",{transform:rr},Qt)):n$1Q("g",{transform:rr},Qt))}return Pt.useRotationSize&&Pt.rotation&&(Tt=b$m(Pt.rotation,Tt),Mt=b$m(Pt.rotation,Mt)),Vt&&(Tt=zt[0],Mt=zt[1]),n$1Q("svg",{xmlns:h$B,width:Tt,height:Mt,style:"display: block;"},Vt,n$1Q("defs",null,Ft),Vt?n$1Q("g",{filter:`url(#bloom${Nt})`},Dt):Dt)}const h$A=i$1K();function l$K(_t,Tt,Mt){const Pt=Math.ceil(Tt[0]),Ft=Math.ceil(Tt[1]);if(!_t.some(Nt=>!!Nt.length))return null;const Dt=Mt&&Mt.node||document.createElement("div");return Mt.opacity!=null&&(Dt.style.opacity=Mt.opacity.toString()),Mt.effectView!=null&&(Dt.style.filter=q$c(Mt.effectView)),h$A.append(Dt,D$b.bind(null,_t,Pt,Ft,Mt)),Dt}function m$A(_t,Tt){_t=Math.ceil(_t),Tt=Math.ceil(Tt);const Mt=document.createElement("canvas");Mt.width=_t,Mt.height=Tt,Mt.style.width=_t+"px",Mt.style.height=Tt+"px";const Pt=Mt.getContext("2d");return Pt.clearRect(0,0,_t,Tt),Pt}function g$q(_t,Tt,Mt){return _t?U$v(_t,{responseType:"image"}).then(Pt=>{const Ft=Pt.data,Dt=Ft.width,Nt=Ft.height,Vt=Dt/Nt;let zt=Tt;if(Mt){const Xt=Math.max(Dt,Nt);zt=Math.min(zt,Xt)}return{image:Ft,width:Vt<=1?Math.ceil(zt*Vt):zt,height:Vt<=1?zt:Math.ceil(zt/Vt)}}):Promise.reject(new s$2i("renderUtils: imageDataSize","href not provided."))}function u$C(_t,Tt){return!(!_t||Tt==="ignore")&&(Tt!=="multiply"||_t.r!==255||_t.g!==255||_t.b!==255||_t.a!==1)}function d$D(_t,Tt,Mt,Pt,Ft){switch(Ft){case"multiply":_t[Tt+0]*=Mt[0],_t[Tt+1]*=Mt[1],_t[Tt+2]*=Mt[2],_t[Tt+3]*=Mt[3];break;default:{const Dt=y$u({r:_t[Tt+0],g:_t[Tt+1],b:_t[Tt+2]});Dt.h=Pt.h,Dt.s=Pt.s,Dt.v=Dt.v/100*Pt.v;const Nt=p$Y(Dt);_t[Tt+0]=Nt.r,_t[Tt+1]=Nt.g,_t[Tt+2]=Nt.b,_t[Tt+3]*=Mt[3];break}}}function f$r(_t,Tt,Mt,Pt,Ft){return g$q(_t,Tt,Ft).then(Dt=>{const Nt=Dt.width?Dt.width:Tt,Vt=Dt.height?Dt.height:Tt;if(Dt.image&&u$C(Mt,Pt)){let zt=Dt.image.width,Xt=Dt.image.height;a$32("edge")&&/\.svg$/i.test(_t)&&(zt-=1,Xt-=1);const Ht=m$A(Nt,Vt);Ht.drawImage(Dt.image,0,0,zt,Xt,0,0,Nt,Vt);const Wt=Ht.getImageData(0,0,Nt,Vt),Qt=[Mt.r/255,Mt.g/255,Mt.b/255,Mt.a],Zt=y$u(Mt);for(let Kt=0;Kt<Wt.data.length;Kt+=4)d$D(Wt.data,Kt,Qt,Zt,Pt);Ht.putImageData(Wt,0,0),_t=Ht.canvas.toDataURL("image/png")}else{const zt=n$2D&&n$2D.findCredential(_t);if(zt&&zt.token){const Xt=_t.includes("?")?"&":"?";_t=`${_t}${Xt}token=${zt.token}`}}return{url:_t,width:Nt,height:Vt}}).catch(()=>({url:_t,width:Tt,height:Tt}))}let y$r=null;const p$V=[255,255,255];function d$C(_t,Tt){return Math.floor(Math.random()*(Tt-_t+1)+_t)}function m$z(_t,Tt,Mt){const{backgroundColor:Pt,outline:Ft,dotSize:Dt}=_t,Nt=Mt&&Mt.swatchSize||t$D.size,Vt=.8,zt=Math.round(Nt*Nt/Dt**2*Vt),Xt=window.devicePixelRatio,Ht=document.createElement("canvas"),Wt=Nt*Xt;Ht.width=Wt,Ht.height=Wt,Ht.style.width=Ht.width/Xt+"px",Ht.style.height=Ht.height/Xt+"px";const Qt=Ht.getContext("2d");if(Pt&&(Qt.fillStyle=Pt.toCss(!0),Qt.fillRect(0,0,Wt,Wt),Qt.fill()),Qt.fillStyle=Tt.toCss(!0),y$r&&y$r.length/2===zt)for(let Kt=0;Kt<2*zt;Kt+=2){const er=y$r[Kt],Yt=y$r[Kt+1];Qt.fillRect(er,Yt,Dt*Xt,Dt*Xt),Qt.fill()}else{y$r=[];for(let Kt=0;Kt<2*zt;Kt+=2){const er=d$C(0,Wt),Yt=d$C(0,Wt);y$r.push(er,Yt),Qt.fillRect(er,Yt,Dt*Xt,Dt*Xt),Qt.fill()}}Ft&&(Ft.color&&(Qt.strokeStyle=Ft.color.toCss(!0)),Qt.lineWidth=Ft.width,Qt.strokeRect(0,0,Wt,Wt));const Zt=new Image(Nt,Nt);return Zt.src=Ht.toDataURL(),Zt}function b$l(_t,Tt={}){const Mt=Tt.radius||40,Pt=2*Math.PI*Mt,Ft=_t.length,Dt=Pt/Ft,Nt=[],Vt=j$D(Tt.outline);Vt&&(Vt.width*=2),(Vt||Tt.backgroundColor)&&Nt.push({shape:{type:"circle",cx:Mt,cy:Mt,r:Mt},fill:Tt.backgroundColor,stroke:Vt,offset:[0,0]});const zt=Tt.values,Xt=zt&&zt.length===Ft&&zt.reduce((Kt,er)=>Kt+er,0)===100,Ht=[0];for(let Kt=0;Kt<Ft;Kt++){const er=Xt?zt[Kt]*Pt/100:null;Xt&&Ht.push(er+Ht[Kt]),Nt.push({shape:{type:"circle",cx:Mt,cy:Mt,r:Mt/2},fill:[0,0,0,0],stroke:{width:Mt,dashArray:`${er||Dt} ${Pt}`,dashoffset:"-"+(Xt?Ht[Kt]/2:Kt*(Dt/2)),color:_t[Kt]},offset:[0,0]})}let Wt=null;const Qt=2*Mt+((Vt==null?void 0:Vt.width)||0),Zt=Tt.holePercentage;if(Zt){Vt&&Nt.push({shape:{type:"circle",cx:Mt,cy:Mt,r:Mt*Zt},fill:null,stroke:Vt,offset:[0,0]});const Kt=Qt/2;Wt=[[{shape:{type:"circle",cx:Kt,cy:Kt,r:Kt},fill:p$V,stroke:Vt?{...Vt,color:p$V}:null,offset:[0,0]},{shape:{type:"circle",cx:Kt,cy:Kt,r:Mt*Zt},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return l$K([Nt],[Qt,Qt],{effectView:Tt.effectList,ignoreStrokeWidth:!0,masking:Wt,rotation:-90})}function g$p(_t,Tt={}){const Ft=Tt.align==="horizontal",Dt=Ft?75:24,Nt=Ft?24:75,{width:Vt=Dt,height:zt=Nt,gradient:Xt=!0}=Tt,Ht=window.devicePixelRatio,Wt=Vt*Ht,Qt=zt*Ht,Zt=document.createElement("canvas");Zt.width=Wt,Zt.height=Qt,Zt.style.width=`${Vt}px`,Zt.style.height=`${zt}px`;const Kt=Zt.getContext("2d"),er=Ft?Wt:0,Yt=Ft?0:Qt;if(Xt){const ir=Kt.createLinearGradient(0,0,er,Yt),nr=_t.length,ar=nr===1?0:1/(nr-1);_t.forEach((or,ur)=>ir.addColorStop(ur*ar,or.toString())),Kt.fillStyle=ir,Kt.fillRect(0,0,Wt,Qt)}else{const ir=Ft?Wt/_t.length:Wt,nr=Ft?Qt:Qt/_t.length;let ar=0,or=0;for(const ur of _t)Kt.fillStyle=ur.toString(),Kt.fillRect(ar,or,ir,nr),ar=Ft?ar+ir:0,or=Ft?0:or+nr}const rr=document.createElement("div");return rr.style.width=`${Vt}px`,rr.style.height=`${zt}px`,w$i(rr,Tt==null?void 0:Tt.effectList),rr.appendChild(Zt),rr}function w$i(_t,Tt){if(!Tt)return;_t.style.filter=q$c(Tt);const Mt=Tt.effects;if(Mt){for(const Pt of Mt)if((Pt==null?void 0:Pt.type)==="drop-shadow"){Pt.offsetX<0?_t.style.marginLeft=`${Math.abs(Pt.offsetX)}px`:_t.style.marginRight=`${Pt.offsetX}px`;break}}}async function S$d(_t,Tt){switch(_t.type){case"web-style":{const{previewWebStyleSymbol:Mt}=await __vitePreload(()=>import("./previewWebStyleSymbol.f7df6ab3.js"),[]);return Mt(_t,S$d,Tt)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:Mt}=await __vitePreload(()=>import("./previewSymbol3D.955b997c.js"),["assets/previewSymbol3D.955b997c.js","assets/webStyleSymbolUtils.20127335.js","assets/devEnvironmentUtils.8c6e6b72.js"]);return Mt(_t,Tt)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:Mt}=await __vitePreload(()=>import("./previewSymbol2D.543856f8.js"),[]);return Mt(_t,Tt)}case"cim":{const{previewCIMSymbol:Mt}=await __vitePreload(()=>import("./previewCIMSymbol.e635f310.js"),["assets/previewCIMSymbol.e635f310.js","assets/CIMSymbolRasterizer.598fa6c8.js","assets/cimAnalyzer.8ff78478.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/enums.05a6ea95.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/number.08b65821.js","assets/GeometryUtils.814cb798.js","assets/callExpressionWithFeature.30f2ad17.js","assets/Rasterizer.2859baa8.js"]);return Mt(_t,Tt)}default:return}}function v$p(_t){return _t&&"opacity"in _t?_t.opacity*v$p(_t.parent):1}async function x$g(_t,Tt){var Yt;if(!_t)return;const Mt=_t.sourceLayer,Pt=(Yt=r$1P(Tt)&&Tt.useSourceLayer?Mt:_t.layer)!=null?Yt:Mt,Ft=v$p(Pt);if(r$1P(_t.symbol)&&(!r$1P(Tt)||Tt.ignoreGraphicSymbol!==!0)){const rr=_t.symbol.type==="web-style"?await _t.symbol.fetchSymbol({...Tt,cache:r$1P(Tt)?Tt.webStyleCache:null}):_t.symbol.clone();return x$v(rr,null,Ft),rr}const Dt=r$1P(Tt)&&Tt.renderer||Pt&&"renderer"in Pt&&Pt.renderer;let Nt=Dt&&"getSymbolAsync"in Dt?await Dt.getSymbolAsync(_t,Tt):null;if(!Nt)return;if(Nt=Nt.type==="web-style"?await Nt.fetchSymbol({...Tt,cache:r$1P(Tt)?Tt.webStyleCache:null}):Nt.clone(),!("visualVariables"in Dt)||!Dt.visualVariables||!Dt.visualVariables.length)return x$v(Nt,null,Ft),Nt;if("arcadeRequiredForVisualVariables"in Dt&&Dt.arcadeRequiredForVisualVariables&&(t$2e(Tt)||t$2e(Tt.arcade))){const rr={...Tt};rr.arcade=await a$2t(),Tt=rr}const Vt=await __vitePreload(()=>Promise.resolve().then(()=>visualVariableUtils),void 0),zt=[],Xt=[],Ht=[],Wt=[];for(const rr of Dt.visualVariables)switch(rr.type){case"color":zt.push(rr);break;case"opacity":Xt.push(rr);break;case"rotation":Wt.push(rr);break;case"size":rr.target||Ht.push(rr)}const Qt=!!zt.length&&zt[zt.length-1],Zt=Qt?Vt.getColor(Qt,_t,Tt):null,Kt=!!Xt.length&&Xt[Xt.length-1];let er=Kt?Vt.getOpacity(Kt,_t,Tt):null;if(Ft!=null&&(er=er!=null?er*Ft:Ft),x$v(Nt,Zt,er),Ht.length){const rr=Vt.getAllSizes(Ht,_t,Tt);await M$q(Nt,rr)}for(const rr of Wt)N$i(Nt,Vt.getRotationAngle(rr,_t,Tt),rr.axis);return Nt}class o$E{constructor(Tt,Mt){this.owner=Mt,this.properties={},this.afterDispatchHandle=null;for(const Pt in Tt){const Ft=Tt[Pt],Dt=new t$24(Ft,null,null,2,2);this.properties[Pt]={pool:Dt,acquired:[]}}this.afterDispatchHandle=U$x(()=>this._release())}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const Tt in this.properties){const Mt=this.properties[Tt];for(const Pt of Mt.acquired)x$T(Pt)||Mt.pool.release(Pt);Mt.pool.destroy(),Mt.pool=null,Mt.acquired=null}this.properties=null,this.owner=null}get(Tt){const Mt=this.owner._get(Tt),Pt=this.properties[Tt];let Ft=Pt.pool.acquire();for(Pt.acquired.push(Ft);Ft===Mt;)Pt.acquired.push(Ft),Ft=Pt.pool.acquire();return Ft}_release(){for(const Tt in this.properties){const Mt=this.properties[Tt];let Pt=0;for(const Ft of Mt.acquired)x$T(Ft)?Mt.acquired[Pt++]=Ft:Mt.pool.release(Ft);Mt.acquired.length=Pt}}}const t$A=a$32("mac")?"Meta":"Ctrl",o$D={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let _t=48;_t<58;_t++)o$D[_t]=String.fromCharCode(_t);for(let _t=1;_t<25;_t++)o$D[111+_t]=`F${_t}`;for(let _t=65;_t<91;_t++)o$D[_t]=[String.fromCharCode(_t+32),String.fromCharCode(_t)];function a$T(_t){if(_t.key!==void 0)return i$2K(_t);const Tt=o$D[_t.keyCode];return Array.isArray(Tt)?_t.shiftKey?Tt[1]:Tt[0]:Tt}function n$W(_t){switch(_t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class e$F{constructor(Tt,Mt=[]){this.eventType=Tt,this.keyModifiers=Mt}matches(Tt){if(Tt.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const Mt=Tt.modifiers;for(const Pt of this.keyModifiers)if(!Mt.has(Pt))return!1;return!0}}const n$V=s$2l.getLogger("esri.views.input.InputHandler");class i$Q{constructor(Tt){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=Tt}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const Tt in this._incoming){const Mt=this._incoming[Tt];for(const Pt of Mt)this._incomingEventMatches.push(Pt.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(Tt=>Tt.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(Tt){this._manager?n$V.error("This InputHandler has already been registered with an InputManager"):(Tt.setEventCallback(Mt=>this._handleEvent(Mt)),Tt.setUninstallCallback(()=>this._onUninstall()),this._manager=Tt)}onUninstall(){}registerIncoming(Tt,Mt,Pt){let Ft;typeof Mt=="function"?(Pt=Mt,Ft=[]):Ft=Mt||[];const Dt=typeof Tt=="string"?new e$F(Tt,Ft):Tt,Nt=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},Vt=Ht=>{const Wt=this._incoming[Ht.match.eventType];if(Wt){const Qt=Wt.indexOf(Ht);Wt.splice(Qt,1),Nt(),this._manager&&this._manager.updateDependencies()}},zt=new s$H(Dt,Pt,{onPause:Vt,onRemove:Vt,onResume:Ht=>{const Wt=this._incoming[Ht.match.eventType];Wt&&!Wt.includes(Ht)&&(Wt.push(Ht),Nt(),this._manager&&this._manager.updateDependencies())}});let Xt=this._incoming[Dt.eventType];return Xt||(Xt=[],this._incoming[Dt.eventType]=Xt),Xt.push(zt),Nt(),this._manager&&this._manager.updateDependencies(),zt}registerOutgoing(Tt){if(this._outgoing[Tt])throw Error("There is already a callback registered for this outgoing InputEvent: "+Tt);const Mt=new a$S(Tt,{onEmit:(Pt,Ft,Dt,Nt)=>{this._manager.emit(Pt.eventType,Ft,Dt,Nt)},onRemove:Pt=>{delete this._outgoing[Pt.eventType],this._manager.updateDependencies()}});return this._outgoing[Tt]=Mt,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),Mt}startCapturingPointer(Tt){this._manager.setPointerCapture(Tt,!0)}stopCapturingPointer(Tt){this._manager.setPointerCapture(Tt,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):n$V.error("This InputHandler is not registered with an InputManager")}_handleEvent(Tt){const Mt=this._incoming[Tt.type];if(Mt){for(const Pt of Mt)if(Pt.match.matches(Tt)&&(Pt.callback(Tt),Tt.shouldStopPropagation()))break}}}class s$H{constructor(Tt,Mt,Pt){this.match=Tt,this._callback=Mt,this._handler=Pt}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class a$S{constructor(Tt,Mt){this.eventType=Tt,this._removed=!1,this._handler=Mt}emit(Tt,Mt,Pt){this._removed||this._handler.onEmit(this,Tt,Mt,Pt)}remove(){this._removed=!0,this._handler.onRemove(this)}}class s$G extends i$Q{constructor(Tt){super(!0),this._onChange=Tt,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",Mt=>{const Pt=Mt.data.native.pointerType==="touch";this._setValue(Pt?"touch":"mouse",Mt.data.x,Mt.data.y)})}_setValue(Tt,Mt,Pt){Tt===this._value&&this._x===Mt&&this._y===Pt||(this._value=Tt,this._x=Mt,this._y=Pt,this._onChange(Tt,Mt,Pt))}}const d$B=s$2l.getLogger("esri.views.input.InputManager");let c$X=class extends y$1E{constructor(_t){super(_t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=t$A,this.latestPointerType="mouse",this._propertiesPool=new o$E({latestPointerLocation:P$8},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const _t=Object.keys(this._nameToGroup);for(const Tt of _t)this.uninstallHandlers(Tt);this.eventSource=null,this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(_t=>_t.handler.hasPendingInputs)}installHandlers(_t,Tt,Mt=g$o.INTERNAL){if(this._nameToGroup[_t])return void d$B.error("There is already an InputHandler group registered under the name `"+_t+"`");if(Tt.length===0)return void d$B.error("Can't register a group of zero handlers");const Pt={name:_t,handlers:Tt.map(Ft=>({handler:Ft,active:!0,removed:!1,priorityIndex:0,groupPriority:Mt,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[_t]=Pt;for(let Ft=Pt.handlers.length-1;Ft>=0;Ft--){const Dt=Pt.handlers[Ft];this._handlers.push(Dt),Dt.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(Nt,Vt,zt,Xt,Ht)=>{this._emitInputEvent(Dt.priorityIndex+1,Nt,Vt,zt,Ht,Xt)},setPointerCapture:(Nt,Vt)=>{this._setPointerCapture(Pt,Dt,Nt,Vt)},setEventCallback:Nt=>{Dt.eventCallback=Nt},setUninstallCallback:Nt=>{Dt.uninstallCallback=Nt},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(_t){const Tt=this._nameToGroup[_t];Tt?(Tt.handlers.forEach(Mt=>{Mt.removed=!0,Mt.uninstallCallback()}),delete this._nameToGroup[_t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):d$B.error("There is no InputHandler group registered under the name `"+_t+"`")}hasHandlers(_t){return this._nameToGroup[_t]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const _t=new Set,Tt=new Set;this._handlersPriority=[];for(let Mt=this._handlers.length-1;Mt>=0;Mt--){const Pt=this._handlers[Mt];Pt.priorityIndex=Mt,this._handlersPriority.push(Pt)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let Mt=this._handlersPriority.length-1;Mt>=0;Mt--){const Pt=this._handlersPriority[Mt];Pt.priorityIndex=Mt;let Ft=Pt.handler.hasSideEffects;if(!Ft){for(const Dt of Pt.handler.outgoingEventTypes)if(_t.has(Dt)){Ft=!0;break}}if(Ft)for(const Dt of Pt.handler.incomingEventMatches){_t.add(Dt.eventType);for(const Nt of Dt.keyModifiers)n$W(Nt)||Tt.add(Nt)}Pt.active=Ft}this._sourceEvents=_t,this._keyModifiers=Tt,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(_t,Tt,Mt){this._get("latestPointerType")!==_t&&this._set("latestPointerType",_t);const Pt=this._get("latestPointerLocation");if(t$2e(Pt)||Pt.x!==Tt||Pt.y!==Mt){const Ft=this._propertiesPool.get("latestPointerLocation");Ft.x=Tt,Ft.y=Mt,this._set("latestPointerLocation",Ft)}}_onEventReceived(_t,Tt){if(_t==="pointer-capture-lost"){const Ft=Tt;this._pointerCaptures.delete(Ft.native.pointerId)}this._updateKeyModifiers(_t,Tt);const Mt=this.test.timestamp!=null?this.test.timestamp:Tt.native?Tt.native.timestamp:void 0,Pt=Tt.native?Tt.native.cancelable:void 0;this._emitInputEventFromSource(_t,Tt,Mt,Pt)}_updateKeyModifiers(_t,Tt){if(!Tt)return;let Mt=!1;const Pt=()=>{if(!Mt){const Nt=new Set;this._activeKeyModifiers.forEach(Vt=>{Nt.add(Vt)}),this._activeKeyModifiers=Nt,Mt=!0}},Ft=(Nt,Vt)=>{Vt&&!this._activeKeyModifiers.has(Nt)?(Pt(),this._activeKeyModifiers.add(Nt)):!Vt&&this._activeKeyModifiers.has(Nt)&&(Pt(),this._activeKeyModifiers.delete(Nt))};if(_t==="key-down"||_t==="key-up"){const Nt=Tt.key;this._keyModifiers.has(Nt)&&Ft(Nt,_t==="key-down")}const Dt=Tt.native;Ft("Alt",!(!Dt||!Dt.altKey)),Ft("Ctrl",!(!Dt||!Dt.ctrlKey)),Ft("Shift",!(!Dt||!Dt.shiftKey)),Ft("Meta",!(!Dt||!Dt.metaKey)),Ft("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new s$G((_t,Tt,Mt)=>this._setLatestPointer(_t,Tt,Mt)),this.installHandlers("input-manager-logic",[this._latestPointerHandler],g$o.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,g$o.INTERNAL)}_setPointerCapture(_t,Tt,Mt,Pt){const Ft=_t.name+"-"+Tt.priorityIndex,Dt=this._pointerCaptures.get(Mt.pointerId)||new Set;this._pointerCaptures.set(Mt.pointerId,Dt),Pt?(Dt.add(Ft),Dt.size===1&&this.eventSource&&this.eventSource.setPointerCapture(Mt,!0)):Dt.has(Ft)&&(Dt.delete(Ft),Dt.size===0&&(this._pointerCaptures.delete(Mt.pointerId),this.eventSource&&this.eventSource.setPointerCapture(Mt,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(_t=>!_t.removed),this.updateDependencies()}_emitInputEventFromSource(_t,Tt,Mt,Pt){this._emitInputEvent(0,_t,Tt,Mt,Pt)}_emitInputEvent(_t,Tt,Mt,Pt,Ft,Dt){const Nt=Pt!==void 0?Pt:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),Vt=Ft!==void 0&&Ft,zt={event:new u$B(Tt,Mt,Nt,Dt||this._activeKeyModifiers,Vt),priorityIndex:_t};this._currentPropagation?this._currentPropagation.events.push(zt):this._doNewPropagation(zt)}_doNewPropagation(_t){this._currentPropagation={events:new e$1s,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:_t.event.timestamp},this._currentPropagation.events.push(_t),this._continuePropagation()}_continuePropagation(){const _t=this._currentPropagation;if(_t){for(;this._currentPropagation.events.length>0;){const{event:Tt,priorityIndex:Mt}=this._currentPropagation.events.pop(),Pt=Tt.data&&Tt.data.eventId;if(!(Pt!=null&&this._stoppedPropagationEventIds.has(Pt)))for(_t.currentHandler=this._handlersPriority[Mt];_t.currentHandler;){if(_t.currentHandler.removed)_t.needsHandlerGarbageCollect=!0;else{if(_t.currentHandler.active&&!Tt.shouldStopPropagation()&&_t.currentHandler.eventCallback(Tt),Tt.shouldStopPropagation()){Pt!=null&&this._stoppedPropagationEventIds.add(Pt);break}if(Tt.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:Tt,priorityIndex:_t.currentHandler.priorityIndex+1})}_t.currentHandler=this._handlersPriority[_t.currentHandler.priorityIndex+1]}}_t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(_t){const Tt=new e$1s;for(Tt.push(_t);this._currentPropagation.events.length;)Tt.push(this._currentPropagation.events.pop());this._currentPropagation.events=Tt,this._currentPropagation.currentHandler=null}_compareHandlerPriority(_t,Tt){if(_t.handler.hasSideEffects!==Tt.handler.hasSideEffects)return _t.handler.hasSideEffects?1:-1;if(_t.groupPriority!==Tt.groupPriority)return _t.groupPriority>Tt.groupPriority?-1:1;for(const Mt of _t.handler.incomingEventMatches)for(const Pt of Tt.handler.incomingEventMatches){if(Mt.eventType!==Pt.eventType)continue;const Ft=Mt.keyModifiers.filter(Dt=>Pt.keyModifiers.includes(Dt));if(Ft.length===Mt.keyModifiers.length!=(Ft.length===Pt.keyModifiers.length))return Mt.keyModifiers.length>Pt.keyModifiers.length?-1:1}return _t.priorityIndex>Tt.priorityIndex?-1:1}_sortHandlersPriority(_t){const Tt=[];for(const Mt of _t){let Pt=0;for(;Pt<Tt.length&&this._compareHandlerPriority(Mt,Tt[Pt])>=0;)Pt++;Tt.splice(Pt,0,Mt)}return Tt}get debug(){const _t=Tt=>{const Mt=this._setPointerCapture;this._setPointerCapture=()=>{},Tt(),this._setPointerCapture=Mt};return{injectEvent:(Tt,Mt)=>{_t(()=>{this._onEventReceived(Tt,Mt)})},disablePointerCapture:_t}}};e$2a([d$25({readOnly:!0})],c$X.prototype,"hasPendingInputs",null),e$2a([d$25()],c$X.prototype,"eventSource",void 0),e$2a([d$25()],c$X.prototype,"recognizers",void 0),e$2a([d$25({readOnly:!0})],c$X.prototype,"latestPointerType",void 0),e$2a([d$25({readOnly:!0})],c$X.prototype,"latestPointerLocation",void 0),c$X=e$2a([n$2L("esri.views.input.InputManager")],c$X);class u$B{constructor(Tt,Mt,Pt,Ft,Dt){this.type=Tt,this.data=Mt,this.timestamp=Pt,this.modifiers=Ft,this.cancelable=Dt,this._propagationState=_$d.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=_$d.STOPPED}shouldStopPropagation(){return(this._propagationState&_$d.STOPPED)!=0}async(Tt){this._propagationState|=_$d.PAUSED;const Mt=(Pt,Ft)=>{this._propagationState&=~_$d.PAUSED;const Dt=this._resumeCallback;if(this._resumeCallback=null,Dt&&Dt(),Ft)throw Pt;return Pt};return(typeof Tt=="function"?Tt():Tt).then(Pt=>Mt(Pt,!1),Pt=>Mt(Pt,!0))}shouldPausePropagation(Tt){return!!(this._propagationState&_$d.PAUSED)&&(this._resumeCallback=Tt,!0)}preventDefault(){this.data.native.preventDefault()}}var _$d;(function(_t){_t[_t.NONE=0]="NONE",_t[_t.STOPPED=1]="STOPPED",_t[_t.PAUSED=2]="PAUSED"})(_$d||(_$d={}));const g$o={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};class P$8{}function e$E(_t){return _t&&typeof _t.highlight=="function"}function c$W(_t,Tt,Mt){return t$2e(_t)||_t>Mt&&(Tt===0||_t<Tt)}const s$F={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},o$C=new a$2h({id:"zoom-to-feature",title:"{messages.zoom}",className:s$F.iconZoom}),t$z=new a$2h({id:"remove-selected-feature",title:"{messages.remove}",className:s$F.iconTrash}),r$B=new a$2h({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:s$F.iconZoom}),i$P=new a$2h({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:s$F.iconBrowseClusteredFeatures}),s$E="esri.widgets.Popup.PopupViewModel",c$V=s$2l.getLogger(s$E),u$A=_t=>{const{event:Tt,view:Mt}=_t,{action:Pt}=Tt,Ft=Mt&&Mt.popup;if(!Pt)return Promise.reject(new s$2i("trigger-action:missing-arguments","Event has no action"));if(!Ft)return Promise.reject(new s$2i("trigger-action:missing-arguments","view.popup is missing"));const{disabled:Dt,id:Nt}=Pt;if(!Nt)return Promise.reject(new s$2i("trigger-action:invalid-action","action.id is missing"));if(Dt)return Promise.reject(new s$2i("trigger-action:invalid-action","Action is disabled"));if(Nt===o$C.id)return w$h(Ft.viewModel).catch(b$1e);if(Nt===r$B.id)return p$U(Ft.viewModel);if(Nt===i$P.id)return Ft.featureMenuOpen=!Ft.featureMenuOpen,Ft.viewModel.browseClusterEnabled=!Ft.viewModel.browseClusterEnabled,Promise.resolve();if(Ft.viewModel.browseClusterEnabled=!1,Nt===t$z.id){Ft.close();const{selectedFeature:Vt}=Ft;if(!Vt)return Promise.reject(new s$2i(`trigger-action:${t$z.id}`,"selectedFeature is required",{selectedFeature:Vt}));const{sourceLayer:zt}=Vt;return zt?zt.remove(Vt):Mt.graphics.remove(Vt),Promise.resolve()}return Promise.resolve()};function d$A(_t){const{selectedFeature:Tt,location:Mt,view:Pt}=_t;return Pt?Pt.type==="3d"?Tt||Mt:_t.get("selectedFeature.geometry")||Mt:null}function l$J(_t){var Tt,Mt;return(_t==null?void 0:_t.isAggregate)&&((Mt=(Tt=_t==null?void 0:_t.sourceLayer)==null?void 0:Tt.featureReduction)==null?void 0:Mt.type)==="cluster"}function g$n(_t,Tt){if((Tt==null?void 0:Tt.type)!=="3d"||!_t||_t.declaredClass!=="esri.Graphic")return!0;const Mt=Tt.getViewForGraphic(_t);if(Mt&&"whenGraphicBounds"in Mt){let Pt=!1;return Mt.whenGraphicBounds(_t,{useViewElevation:!0}).then(Ft=>{Pt=!Ft||!Ft.boundingBox||Ft.boundingBox[0]===Ft.boundingBox[3]&&Ft.boundingBox[1]===Ft.boundingBox[4]&&Ft.boundingBox[2]===Ft.boundingBox[5]}).catch(()=>{const Ft=new s$2i("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:_t});c$V.error(Ft)}),Pt}return!0}async function w$h(_t){const{location:Tt,selectedFeature:Mt,view:Pt,zoomFactor:Ft}=_t,Dt=d$A(_t);if(!Dt){const Xt=new s$2i("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:Dt,view:Pt});throw c$V.error(Xt),Xt}const Nt=Pt.scale/Ft,Vt=_t.get("selectedFeature.geometry")||Tt,zt=Vt&&Vt.type==="point"&&g$n(Mt,Pt);o$C.active=!0,o$C.disabled=!0;try{await _t.view.goTo({target:Dt,scale:zt?Nt:void 0})}finally{o$C.active=!1,o$C.disabled=!1,_t.zoomToLocation=null,zt&&(_t.location=Vt)}}async function p$U(_t){const{selectedFeature:Tt,view:Mt}=_t;if((Mt==null?void 0:Mt.type)!=="2d"){const Vt=new s$2i("zoomToCluster:invalid-view","View must be 2d MapView.",{view:Mt});throw c$V.error(Vt),Vt}if(!l$J(Tt)){const Vt=new s$2i("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:Tt});throw c$V.error(Vt),Vt}const Pt=Tt.sourceLayer,Ft=await Mt.whenLayerView(Pt),Dt=Ft.createQuery();Dt.aggregateIds=[Tt.getObjectId()],r$B.active=!0,r$B.disabled=!0;const{extent:Nt}=await Ft.queryExtent(Dt);await Mt.goTo({target:Nt}),r$B.active=!1,r$B.disabled=!1}async function f$q(_t){const{selectedFeature:Tt,view:Mt}=_t,Pt=Tt.sourceLayer,Ft=await Mt.whenLayerView(Pt),Dt=Ft.createQuery();Dt.aggregateIds=[Tt.getObjectId()];const{extent:Nt}=await Ft.queryExtent(Dt);_t.selectedClusterBoundaryFeature.geometry=Nt,Mt.graphics.add(_t.selectedClusterBoundaryFeature)}async function v$o(_t){const{selectedFeature:Tt,view:Mt}=_t,Pt=Tt.sourceLayer,Ft=await Mt.whenLayerView(Pt),Dt=Ft.createQuery();Dt.aggregateIds=[Tt.getObjectId()],i$P.active=!0,i$P.disabled=!0;const{features:Nt}=await Ft.queryFeatures(Dt);i$P.active=!1,i$P.disabled=!1,Mt.popup.open({features:[Tt].concat(Nt),featureMenuOpen:!0})}function m$y(_t){const Tt=_t.features.filter(Mt=>l$J(Mt));Tt.length&&(_t.features=Tt)}const e$D=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt),this.goToOverride=null,this.view=null}callGoTo(Mt){const{view:Pt}=this;return this.goToOverride?this.goToOverride(Pt,Mt):Pt.goTo(Mt.target,Mt.options)}};return e$2a([d$25()],Tt.prototype,"goToOverride",void 0),e$2a([d$25()],Tt.prototype,"view",void 0),Tt=e$2a([n$2L("esri.widgets.support.GoTo")],Tt),Tt},S$c=j$11.ofType({key:"type",defaultKeyValue:"button",base:c$2F,typeMap:{button:a$2h,toggle:a$2g}}),B$9=()=>[o$C.clone()],R$9=()=>[r$B.clone(),i$P.clone()],G$7="esri.widgets.Popup.PopupViewModel",z$9=s$2l.getLogger(G$7);let H$6=class extends e$D(h$G){constructor(_t){super(_t),this._handles=new u$1P,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new S$c,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new g$$({symbol:new S$A({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(_t=>_t.waitingForContent)}initialize(){this._handles.add([l$2e(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),l$2e(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),l$2e(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),l$2e(()=>{var _t,Tt;return(Tt=(_t=this.view)==null?void 0:_t.animation)==null?void 0:Tt.state},_t=>this._animationStateChange(_t)),l$2e(()=>this.location,_t=>this._locationChange(_t)),l$2e(()=>this.selectedFeature,_t=>this._selectedFeatureChange(_t)),l$2e(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),l$2e(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),l$2e(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",_t=>u$A({event:_t,view:this.view})),f$1p(()=>!this.waitingForResult,()=>this._waitingForResultChange(),U$r),l$2e(()=>{var _t,Tt;return[this.features,(_t=this.view)==null?void 0:_t.map,(Tt=this.view)==null?void 0:Tt.spatialReference]},()=>this._updateFeatureVMs()),l$2e(()=>{var _t;return(_t=this.view)==null?void 0:_t.scale},()=>this._viewScaleChange()),f$1p(()=>!this.visible,()=>this.browseClusterEnabled=!1),l$2e(()=>this.browseClusterEnabled,_t=>_t?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const _t=this._get("allActions")||new S$c;_t.removeAll();const{actions:Tt,defaultActions:Mt,defaultPopupTemplateEnabled:Pt,includeDefaultActions:Ft,selectedFeature:Dt}=this,Nt=Ft?Mt.concat(Tt):Tt,Vt=Dt&&(typeof Dt.getEffectivePopupTemplate=="function"&&Dt.getEffectivePopupTemplate(Pt)||Dt.popupTemplate),zt=Vt&&Vt.actions,Xt=Vt&&Vt.overwriteActions?zt:zt?zt.concat(Nt):Nt;return Xt&&Xt.filter(Boolean).forEach(Ht=>_t.add(Ht)),_t}get defaultActions(){const _t=this._get("defaultActions")||new S$c;return _t.removeAll(),_t.addMany(l$J(this.selectedFeature)?R$9():B$9()),_t}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(_t){const Tt=_t||[];this._set("features",Tt);const{pendingPromisesCount:Mt,promiseCount:Pt,selectedFeatureIndex:Ft}=this,Dt=Pt&&Tt.length;Dt&&Mt&&Ft===-1?this.selectedFeatureIndex=0:Dt&&Ft!==-1||(this.selectedFeatureIndex=Tt.length?0:-1)}get location(){return this._get("location")||null}set location(_t){const Tt=this.get("view.spatialReference.isWebMercator");_t&&_t.get("spatialReference.isWGS84")&&Tt&&(_t=R$v(_t)),this._set("location",_t)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(_t){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(_t)||!_t.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",_t),(_t=_t.slice(0)).forEach(Tt=>{this._pendingPromises.add(Tt);const Mt=Ft=>{this._pendingPromises.has(Tt)&&this._updateFeatures(Ft),this._updatePendingPromises(Tt)},Pt=()=>this._updatePendingPromises(Tt);Tt.then(Mt,Pt)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:_t,selectedFeatureIndex:Tt}=this;return Tt===-1?null:_t[Tt]||null}get selectedFeatureIndex(){const _t=this._get("selectedFeatureIndex");return typeof _t=="number"?_t:-1}set selectedFeatureIndex(_t){const{featureCount:Tt}=this;_t=isNaN(_t)||_t<-1||!Tt?-1:(_t+Tt)%Tt,this.activeFeature=null,this._set("selectedFeatureIndex",_t)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:_t}=this,Tt=d$A(this);if(!Tt){const Mt=new s$2i("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:Tt,view:_t});return z$9.error(Mt),Promise.reject(Mt)}return this.callGoTo({target:{target:Tt,scale:_t.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(_t,Tt){const{view:Mt}=this;if(!Mt||!_t){const Pt=new s$2i("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:_t,view:Mt});return z$9.error(Pt),Promise.reject(Pt)}return Mt.fetchPopupFeatures(_t,{event:Tt&&Tt.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:Tt&&Tt.signal})}open(_t){const Tt={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,..._t,visible:!0},{fetchFeatures:Mt}=Tt;delete Tt.fetchFeatures,Mt&&this._setFetchFeaturesPromises(Tt.location);const Pt=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const Ft of Pt)delete Tt[Ft];this.set(Tt)}triggerAction(_t){const Tt=this.allActions.getItemAt(_t);Tt&&!Tt.disabled&&this.emit("trigger-action",{action:Tt})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){m$y(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:_t,selectedFeature:Tt}=this;(_t==null?void 0:_t.type)==="2d"?l$J(Tt)?(await f$q(this),await v$o(this)):z$9.warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",Tt):z$9.warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",Tt)}_animationStateChange(_t){this.zoomToLocation||(o$C.disabled=_t==="waiting-for-target")}_clearBrowsedClusterGraphics(){var Tt;const _t=(Tt=this.view)==null?void 0:Tt.graphics;_t&&(_t.remove(this.selectedClusterBoundaryFeature),_t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(l$J(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=[this.selectedFeature])}_locationChange(_t){const{selectedFeature:Tt,updateLocationEnabled:Mt}=this;Mt&&_t&&(!Tt||Tt.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:_t,featureCount:Tt,featurePage:Mt,featuresPerPage:Pt,featureViewModels:Ft}=this;if(Mt===null)return;const Dt=((Mt-1)*Pt+Tt)%Tt,Nt=Dt+Pt;Ft.slice(Dt,Nt).forEach((Vt,zt)=>{Vt&&!Vt.graphic&&(Vt.graphic=_t[Dt+zt])})}async _selectedFeatureChange(_t){if(!_t)return;const{location:Tt,updateLocationEnabled:Mt,view:Pt}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(Pt.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),l$J(_t)?void 0:(_t.symbol=await x$g(_t),this._selectedClusterFeature=_t,void Pt.graphics.add(this._selectedClusterFeature));!Mt&&Tt||!_t.geometry?Mt&&!_t.geometry&&this.centerAtLocation().then(()=>{this.location=Pt.center.clone()}):this.location=this._getPointFromGeometry(_t.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(_t){return this._fetchFeaturesWithController(this._getScreenPoint(_t||this.location)).then(Tt=>{const{clientOnlyGraphics:Mt,promisesPerLayerView:Pt}=Tt,Ft=Promise.resolve(Mt),Dt=Pt.map(Nt=>Nt.promise);this.promises=[Ft,...Dt]})}_destroyFeatureVMs(){this.featureViewModels.forEach(_t=>_t&&!_t.destroyed&&_t.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:_t,features:Tt,featureViewModels:Mt}=this;if(l$J(_t)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!Tt||!Tt.length)return;const Pt=Mt.slice(0),Ft=[];Tt.forEach((Dt,Nt)=>{var zt,Xt;if(!Dt)return;let Vt=null;if(Pt.some((Ht,Wt)=>(Ht&&Ht.graphic===Dt&&(Vt=Ht,Pt.splice(Wt,1)),!!Vt)),Vt)Ft[Nt]=Vt;else{const Ht=new J$6({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(zt=this.view)==null?void 0:zt.spatialReference,graphic:Dt===_t?Dt:null,map:(Xt=this.view)==null?void 0:Xt.map,view:this.view});Ft[Nt]=Ht}}),Pt.forEach(Dt=>Dt&&!Dt.destroyed&&Dt.destroy()),this._set("featureViewModels",Ft)}_getScreenPoint(_t){const{view:Tt}=this;return Tt&&_t&&typeof Tt.toScreen=="function"?Tt.toScreen(_t):null}_autoOpenEnabledChange(){const _t="auto-fetch-features",{_handles:Tt,autoOpenEnabled:Mt}=this;if(Tt.remove(_t),Mt&&this.view){const Pt=this.view.on("click",Ft=>{Ft.pointerType==="mouse"&&Ft.button!==0||this._fetchFeaturesAndOpen(Ft)},g$o.WIDGET);Tt.add(Pt,_t)}}_cancelFetchingFeatures(){const _t=this._fetchFeaturesController;_t&&_t.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(_t,Tt){this._cancelFetchingFeatures();const Mt=new AbortController,{signal:Pt}=Mt;this._fetchFeaturesController=Mt,this.notifyChange("waitingForResult");const Ft=this.fetchFeatures(_t,{signal:Pt,event:Tt});return Ft.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),Ft}_fetchFeaturesAndOpen(_t){const{screenPoint:Tt,mapPoint:Mt}=_t,{view:Pt}=this;this._fetchFeaturesWithController(Tt,_t).then(Ft=>{const{clientOnlyGraphics:Dt,promisesPerLayerView:Nt,location:Vt}=Ft,zt=[Promise.resolve(Dt),...Nt.map(Xt=>Xt.promise)];return Pt.popup.open({location:Vt||Mt,promises:zt}),Ft})}_updatePendingPromises(_t){_t&&this._pendingPromises.has(_t)&&(this._pendingPromises.delete(_t),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(_t){return t$2e(_t)?null:_t.type==="point"?_t:_t.type==="extent"?_t.center:_t.type==="polygon"?_t.centroid:_t.type==="multipoint"||_t.type==="polyline"?_t.extent.center:null}async _getLayerView(_t,Tt){return await _t.when(),_t.whenLayerView(Tt)}_getHighlightLayer(_t){const{layer:Tt,sourceLayer:Mt}=_t;return(Mt==null?void 0:Mt.type)==="map-notes"||(Mt==null?void 0:Mt.type)==="subtype-group"?Mt:Tt}_getHighlightTarget(_t,Tt){const Mt=Tt.type==="imagery"?void 0:"objectIdField"in Tt&&Tt.objectIdField,Pt=_t.attributes;return Pt&&Mt&&Pt[Mt]||_t}async _highlightActiveFeature(){const _t="highlight-active-feature";this._handles.remove(_t);const{highlightEnabled:Tt,view:Mt,activeFeature:Pt,visible:Ft}=this;if(!(Pt&&Mt&&Tt&&Ft))return;const Dt=this._getHighlightLayer(Pt);if(!(Dt&&Dt instanceof b$12))return;const Nt=this._getLayerView(Mt,Dt);this._highlightActiveFeaturePromise=Nt;const Vt=await Nt;if(!(Vt&&e$E(Vt)&&this._highlightActiveFeaturePromise===Nt&&this.activeFeature&&this.highlightEnabled))return;const zt=Vt.highlight(this._getHighlightTarget(Pt,Dt));this._handles.add(zt,_t)}async _highlightSelectedFeature(){const _t="highlight-selected-feature";this._handles.remove(_t);const{selectedFeature:Tt,highlightEnabled:Mt,view:Pt,visible:Ft}=this;if(!(Tt&&Pt&&Mt&&Ft))return;const Dt=this._getHighlightLayer(Tt);if(!(Dt&&Dt instanceof b$12))return;const Nt=this._getLayerView(Pt,Dt);this._highlightSelectedFeaturePromise=Nt;const Vt=await Nt;if(!(Vt&&e$E(Vt)&&this._highlightSelectedFeaturePromise===Nt&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const zt=Vt.highlight(this._getHighlightTarget(Tt,Dt));this._handles.add(zt,_t)}_updateFeatures(_t){const{features:Tt}=this;if(!_t||!_t.length)return;if(!Tt.length)return void(this.features=_t);const Mt=_t.filter(Pt=>!Tt.includes(Pt));this.features=Tt.concat(Mt)}};e$2a([d$25()],H$6.prototype,"featurePage",void 0),e$2a([d$25()],H$6.prototype,"isLoadingFeature",null),e$2a([d$25({type:S$c})],H$6.prototype,"actions",void 0),e$2a([d$25({readOnly:!0})],H$6.prototype,"active",null),e$2a([d$25()],H$6.prototype,"activeFeature",void 0),e$2a([d$25({readOnly:!0})],H$6.prototype,"allActions",null),e$2a([d$25({type:Boolean})],H$6.prototype,"defaultPopupTemplateEnabled",void 0),e$2a([d$25()],H$6.prototype,"autoCloseEnabled",void 0),e$2a([d$25()],H$6.prototype,"autoOpenEnabled",void 0),e$2a([d$25()],H$6.prototype,"browseClusterEnabled",void 0),e$2a([d$25()],H$6.prototype,"content",void 0),e$2a([d$25({type:S$c,readOnly:!0})],H$6.prototype,"defaultActions",null),e$2a([d$25({readOnly:!0})],H$6.prototype,"featureCount",null),e$2a([d$25()],H$6.prototype,"features",null),e$2a([d$25()],H$6.prototype,"featuresPerPage",void 0),e$2a([d$25()],H$6.prototype,"featureViewModelAbilities",void 0),e$2a([d$25({readOnly:!0})],H$6.prototype,"featureViewModels",void 0),e$2a([d$25()],H$6.prototype,"highlightEnabled",void 0),e$2a([d$25()],H$6.prototype,"includeDefaultActions",void 0),e$2a([d$25({type:j$Z})],H$6.prototype,"location",null),e$2a([d$25({readOnly:!0})],H$6.prototype,"pendingPromisesCount",null),e$2a([d$25({readOnly:!0})],H$6.prototype,"selectedClusterBoundaryFeature",void 0),e$2a([d$25({readOnly:!0})],H$6.prototype,"waitingForResult",null),e$2a([d$25({readOnly:!0})],H$6.prototype,"promiseCount",null),e$2a([d$25()],H$6.prototype,"promises",null),e$2a([d$25({value:null,readOnly:!0})],H$6.prototype,"selectedFeature",null),e$2a([d$25({value:-1})],H$6.prototype,"selectedFeatureIndex",null),e$2a([d$25({readOnly:!0})],H$6.prototype,"selectedFeatureViewModel",null),e$2a([d$25({readOnly:!0})],H$6.prototype,"state",null),e$2a([d$25()],H$6.prototype,"title",void 0),e$2a([d$25()],H$6.prototype,"updateLocationEnabled",void 0),e$2a([d$25()],H$6.prototype,"view",void 0),e$2a([d$25()],H$6.prototype,"visible",void 0),e$2a([d$25()],H$6.prototype,"zoomFactor",void 0),e$2a([d$25()],H$6.prototype,"zoomToLocation",void 0),e$2a([d$25()],H$6.prototype,"centerAtLocation",null),H$6=e$2a([n$2L(G$7)],H$6);const U$d=H$6,N$9="selected-index",T$a=0,B$8="popup-spinner",D$a={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},E$f={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},P$7="esri-popup";function L$c(_t,Tt){return Tt===void 0?`${P$7}__${_t}`:`${P$7}__${_t}-${Tt}`}const S$b="esri.widgets.Popup",V$d=s$2l.getLogger(S$b),U$c={closeButton:!0,featureNavigation:!0};let R$8=class extends i$T(O$l){constructor(_t,Tt){super(_t,Tt),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new u$1P,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([Mt])=>{Mt!=null&&Mt.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=e$1m(()=>this._displaySpinner(),T$a),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new U$d,this.visible=null,this.visibleElements={...U$c},this._addSelectedFeatureIndexHandle(),this.own([l$2e(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.screenLocation},()=>this._positionContainer()),l$2e(()=>{var Mt;return[(Mt=this.viewModel)==null?void 0:Mt.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),l$2e(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.screenLocation},(Mt,Pt)=>{!!Mt!=!!Pt&&this.reposition()}),l$2e(()=>{var Mt,Pt,Ft,Dt,Nt,Vt;return[(Pt=(Mt=this.viewModel)==null?void 0:Mt.view)==null?void 0:Pt.padding,(Dt=(Ft=this.viewModel)==null?void 0:Ft.view)==null?void 0:Dt.size,(Nt=this.viewModel)==null?void 0:Nt.active,(Vt=this.viewModel)==null?void 0:Vt.location,this.alignment]},()=>this.reposition()),l$2e(()=>this.spinnerEnabled,Mt=>this._spinnerEnabledChange(Mt)),l$2e(()=>{var Mt,Pt;return(Pt=(Mt=this.viewModel)==null?void 0:Mt.view)==null?void 0:Pt.size},(Mt,Pt)=>this._updateDockEnabledForViewSize(Mt,Pt)),l$2e(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.view},(Mt,Pt)=>this._viewChange(Mt,Pt)),l$2e(()=>{var Mt,Pt;return(Pt=(Mt=this.viewModel)==null?void 0:Mt.view)==null?void 0:Pt.ready},(Mt,Pt)=>this._viewReadyChange(Mt,Pt)),l$2e(()=>{var Mt,Pt;return[(Mt=this.viewModel)==null?void 0:Mt.waitingForResult,(Pt=this.viewModel)==null?void 0:Pt.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),l$2e(()=>{var Mt,Pt,Ft,Dt;return[(Pt=(Mt=this.selectedFeatureWidget)==null?void 0:Mt.viewModel)==null?void 0:Pt.title,(Dt=(Ft=this.selectedFeatureWidget)==null?void 0:Ft.viewModel)==null?void 0:Dt.state]},()=>this._setTitleFromFeatureWidget()),l$2e(()=>{var Mt,Pt,Ft,Dt;return[(Pt=(Mt=this.selectedFeatureWidget)==null?void 0:Mt.viewModel)==null?void 0:Pt.content,(Dt=(Ft=this.selectedFeatureWidget)==null?void 0:Ft.viewModel)==null?void 0:Dt.state]},()=>this._setContentFromFeatureWidget()),f$1p(()=>!this.collapsed,()=>{var Mt,Pt;((Pt=(Mt=this.viewModel)==null?void 0:Mt.view)==null?void 0:Pt.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),a$2C(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.allActions},"change",()=>this._watchActions()),l$2e(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.allActions},()=>this._watchActions(),h$1w),l$2e(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.featureViewModels},()=>this._featureMenuViewportScrollTop())])}destroy(){var _t,Tt;this._destroySelectedFeatureWidget(),this._destroySpinner(),(_t=this._handles)==null||_t.destroy(),this._unobserveFeatureMenuObserver(),(Tt=this._featureMenuIntersectionObserver)==null||Tt.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var _t,Tt,Mt,Pt,Ft,Dt,Nt;return!!(this.selectedFeatureWidget?((Tt=(_t=this.selectedFeatureWidget)==null?void 0:_t.viewModel)==null?void 0:Tt.waitingForContent)||((Pt=(Mt=this.selectedFeatureWidget)==null?void 0:Mt.viewModel)==null?void 0:Pt.state)==="error"||((Dt=(Ft=this.selectedFeatureWidget)==null?void 0:Ft.viewModel)==null?void 0:Dt.content):(Nt=this.viewModel)==null?void 0:Nt.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(_t){this._set("actionsMenuOpen",!!_t)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||E$f}set dockOptions(_t){const Tt={...E$f},Mt=this.get("viewModel.view.breakpoints"),Pt={};Mt&&(Pt.width=Mt.xsmall,Pt.height=Mt.xsmall);const Ft={...Tt,..._t},Dt={...Tt.breakpoint,...Pt},{breakpoint:Nt}=Ft;Nt===!0?Ft.breakpoint=Dt:typeof Nt=="object"&&(Ft.breakpoint={...Dt,...Nt}),this._set("dockOptions",Ft),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:_t,visibleElements:Tt,headingLevel:Mt}=this,{selectedFeatureViewModel:Pt}=this.viewModel,Ft={...Tt,title:!1};return Pt?(_t?(_t.viewModel=Pt,_t.visibleElements=Ft):this._feature=new E$h({headingLevel:Mt+1,viewModel:Pt,visibleElements:Ft}),this._feature):null}castVisibleElements(_t){return{...U$c,..._t}}blur(){const{active:_t}=this.viewModel;_t||V$d.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(_t,Tt){return this.viewModel.fetchFeatures(_t,Tt)}focus(){const{active:_t}=this.viewModel;_t||V$d.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(_t){var Ft,Dt;this._handles.remove(N$9);const Tt=!!_t&&!!_t.featureMenuOpen,Mt=!!_t&&!!_t.actionsMenuOpen,Pt={collapsed:!!_t&&!!_t.collapsed,actionsMenuOpen:Mt,featureMenuOpen:Tt};((Dt=(Ft=this.viewModel)==null?void 0:Ft.view)==null?void 0:Dt.widthBreakpoint)==="xsmall"&&(Pt.collapsed=!0),this.set(Pt),this.viewModel.open(_t),this._shouldFocus(_t),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(_t){this.viewModel.triggerAction(_t)}render(){var Kt,er,Yt,rr;const{actionsMenuOpen:_t,dockEnabled:Tt,featureMenuVisible:Mt,dividedActions:Pt,currentAlignment:Ft,currentDockPosition:Dt}=this,{active:Nt}=this.viewModel,{menuActions:Vt}=Pt,zt=Nt&&Vt.length>1&&_t,Xt=Nt&&Tt,Ht=Nt&&!Tt,Wt=(er=(Kt=this.selectedFeature)==null?void 0:Kt.layer)==null?void 0:er.title,Qt=(rr=(Yt=this.selectedFeature)==null?void 0:Yt.layer)==null?void 0:rr.id,Zt={[D$a.alignTopCenter]:Ft==="top-center",[D$a.alignBottomCenter]:Ft==="bottom-center",[D$a.alignTopLeft]:Ft==="top-left",[D$a.alignBottomLeft]:Ft==="bottom-left",[D$a.alignTopRight]:Ft==="top-right",[D$a.alignBottomRight]:Ft==="bottom-right",[D$a.isDocked]:Xt,[D$a.shadow]:Ht,[D$a.isDockedTopLeft]:Dt==="top-left",[D$a.isDockedTopCenter]:Dt==="top-center",[D$a.isDockedTopRight]:Dt==="top-right",[D$a.isDockedBottomLeft]:Dt==="bottom-left",[D$a.isDockedBottomCenter]:Dt==="bottom-center",[D$a.isDockedBottomRight]:Dt==="bottom-right",[D$a.isFeatureMenuOpen]:Mt,[D$a.isActionsMenuOpen]:zt};return n$1Q("div",{class:this.classes(D$a.base,Zt),role:"presentation","data-layer-title":Wt,"data-layer-id":Qt,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},Nt?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return n$1Q("span",{"aria-hidden":"true",class:this.classes(D$a.icon,D$a.iconLoading,D$a.rotating)})}renderNavigationLoading(){const{messagesCommon:_t}=this;return this.viewModel.pendingPromisesCount?n$1Q("div",{key:L$c("loading-container"),role:"presentation",class:D$a.loadingContainer,"aria-label":_t.loading,title:_t.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const _t=f$10(this.container),Tt={[D$a.iconRightTriangleArrow]:_t,[D$a.paginationPreviousIconRTL]:_t,[D$a.iconLeftTriangleArrow]:!_t,[D$a.paginationPreviousIconLTR]:!_t};return n$1Q("span",{"aria-hidden":"true",class:this.classes(D$a.icon,Tt)})}renderPreviousButton(){const{messages:_t}=this;return n$1Q("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(D$a.button,D$a.paginationPrevious),"aria-label":_t.previous,title:_t.previous},this.renderPreviousIcon())}renderNextIcon(){const _t=f$10(this.container),Tt={[D$a.iconLeftTriangleArrow]:_t,[D$a.paginationNextIconRTL]:_t,[D$a.iconRightTriangleArrow]:!_t,[D$a.paginationNextIconLTR]:!_t};return n$1Q("span",{"aria-hidden":"true",class:this.classes(D$a.icon,Tt)})}renderNextButton(){const{messages:_t}=this;return n$1Q("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(D$a.button,D$a.paginationNext),"aria-label":_t.next,title:_t.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:_t,featureMenuId:Tt,messagesCommon:Mt}=this,{featureCount:Pt,selectedFeatureIndex:Ft}=this.viewModel;return n$1Q("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(D$a.button,D$a.featureMenuButton),"aria-haspopup":"true","aria-controls":Tt,"aria-expanded":_t.toString(),"aria-label":Mt.menu,title:Mt.menu},this._getPageText(Pt,Ft))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:_t}=this,Tt=this._wouldDockTo(),Mt={[D$a.iconUndock]:_t,[D$a.iconDock]:!_t,[D$a.iconDockToRight]:!_t&&(Tt==="top-right"||Tt==="bottom-right"),[D$a.iconDockToLeft]:!_t&&(Tt==="top-left"||Tt==="bottom-left"),[D$a.iconDockToTop]:!_t&&Tt==="top-center",[D$a.iconDockToBottom]:!_t&&Tt==="bottom-center"};return n$1Q("span",{"aria-hidden":"true",class:this.classes(Mt,D$a.icon)})}renderDockButton(){var Ft,Dt,Nt;const{dockEnabled:_t,messages:Tt}=this,Mt=(Dt=(Ft=this.viewModel)==null?void 0:Ft.view)==null?void 0:Dt.widthBreakpoint,Pt=_t?Tt.undock:Tt.dock;return Mt!=="xsmall"&&((Nt=this.dockOptions)==null?void 0:Nt.buttonEnabled)?n$1Q("div",{role:"button","aria-label":Pt,title:Pt,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(D$a.button,D$a.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:_t}=this.viewModel,{titleId:Tt,collapsible:Mt,contentCollapsed:Pt,messagesCommon:Ft}=this,Dt={[D$a.headerContainerButton]:Mt},Nt=n$1Q(n$1P,{level:this.headingLevel,class:D$a.headerTitle,innerHTML:_t}),Vt=Mt?n$1Q("button",{key:`${_t}--collapsible`,id:Tt,title:Pt?Ft.expand:Ft.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(D$a.headerContainer,Dt),"aria-expanded":Pt?"false":"true",onclick:this._toggleCollapsed,type:"button"},Nt):n$1Q("div",{key:_t,id:Tt,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(D$a.headerContainer,Dt)},Nt);return _t?Vt:null}renderCloseIcon(){return n$1Q("span",{"aria-hidden":"true",class:this.classes(D$a.icon,D$a.iconClose)})}renderCloseButton(){const{visibleElements:_t,messagesCommon:Tt}=this;return _t.closeButton?n$1Q("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:D$a.button,"aria-label":Tt.close,title:Tt.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return n$1Q("header",{class:D$a.header},this.renderTitle(),n$1Q("div",{class:D$a.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:_t,hasContent:Tt,contentCollapsed:Mt}=this,{content:Pt}=this.viewModel;return Tt&&!Mt?n$1Q("article",{key:Pt,enterAnimation:this._createFeatureUpdatedAnimation(),id:_t,class:D$a.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:_t,actionsMenuButtonId:Tt,actionsMenuOpen:Mt,dividedActions:Pt,messagesCommon:Ft}=this,Dt=Mt?Ft.close:Ft.open,{menuActions:Nt}=Pt;return Nt.length?n$1Q("div",{key:L$c("actions-menu-button"),class:this.classes(D$a.button,D$a.actionsMenuButton),role:"button",id:Tt,"aria-haspopup":"true","aria-controls":Mt?_t:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":Dt,title:Dt},n$1Q("span",{"aria-hidden":"true",class:D$a.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:_t,actionsMenuButtonId:Tt,actionsMenuOpen:Mt,dividedActions:Pt}=this,{menuActions:Ft}=Pt;return Ft.length&&Mt?n$1Q("ul",{id:_t,role:"menu","aria-labelledby":Tt,key:L$c("actions"),class:D$a.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},Ft.toArray().map(Dt=>this.renderAction({action:Dt,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:_t}=this.dividedActions;return!!_t.length&&_t.toArray().map(Tt=>this.renderAction({action:Tt,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:_t,menuActions:Tt}=this.dividedActions,Mt=!!_t.length,Pt=!!Tt.length;return Mt||Pt?n$1Q("div",{key:"inline-actions-container","data-inline-actions":Mt.toString(),"data-menu-actions":Pt.toString(),class:D$a.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?n$1Q("section",{key:L$c("navigation"),class:this.classes(D$a.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:_t,dividedActions:Tt}=this,{inlineActions:Mt,menuActions:Pt}=Tt,Ft=!!Mt.length,Dt=!!Pt.length,Nt={[D$a.footerHasPagination]:_t,[D$a.footerHasActions]:Ft,[D$a.footerHasActionsMenu]:Dt};return _t||Ft?n$1Q("div",{key:L$c("feature-buttons"),class:this.classes(D$a.footer,Nt)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:_t}=this,{featureViewModels:Tt,isLoadingFeature:Mt}=this.viewModel,Pt=s$1y(_t.selectedFeatures,{total:Tt.length});return n$1Q("section",{key:L$c("menu"),class:D$a.featureMenu},n$1Q("strong",{class:D$a.featureMenuHeader},Pt),n$1Q("nav",{bind:this,class:D$a.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:v$N},this.renderFeatureMenu(),n$1Q("div",{class:D$a.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),Mt?n$1Q("div",{class:D$a.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:n$1Q("div",{key:L$c("pointer"),class:D$a.pointer,role:"presentation"},n$1Q("div",{class:this.classes(D$a.pointerDirection,D$a.shadow)}))}renderMainContainer(){const{dockEnabled:_t,currentAlignment:Tt,currentDockPosition:Mt,titleId:Pt,contentId:Ft,collapsible:Dt,hasContent:Nt,contentCollapsed:Vt,visibleElements:zt}=this,{title:Xt}=this.viewModel,Ht=Tt==="bottom-left"||Tt==="bottom-center"||Tt==="bottom-right"||Mt==="top-left"||Mt==="top-center"||Mt==="top-right",Wt=Tt==="top-left"||Tt==="top-center"||Tt==="top-right"||Mt==="bottom-left"||Mt==="bottom-center"||Mt==="bottom-right",Qt={[D$a.shadow]:_t,[D$a.isCollapsible]:Dt,[D$a.isCollapsed]:Vt};return n$1Q("div",{class:this.classes(D$a.main,D$a.widget,Qt),tabIndex:zt.closeButton?null:-1,role:"dialog","aria-labelledby":Xt?Pt:"","aria-describedby":Nt&&!Vt?Ft:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},Ht?this.renderFooter():null,Ht?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),Wt?this.renderFooter():null,Wt?this.renderFeatureMenuContainer():null)}renderContent(){var Tt;const _t=(Tt=this.viewModel)==null?void 0:Tt.content;return _t?typeof _t=="string"?n$1Q("div",{key:_t,innerHTML:_t}):this.renderNodeContent(_t):null}renderActionText(_t){return n$1Q("span",{key:"text",class:D$a.actionText},_t)}renderActionIcon(_t){const Tt=this._getActionClass(_t),Mt=this._getActionImage(_t),Pt={[D$a.iconLoading]:_t.active,[D$a.rotating]:_t.active,[D$a.icon]:!!Tt,[D$a.actionImage]:!_t.active&&!!Mt};return Tt&&(Pt[Tt]=!_t.active),n$1Q("span",{key:"icon","aria-hidden":"true",class:this.classes(D$a.icon,Pt),styles:this._getIconStyles(Mt)})}renderAction(_t){const{action:Tt,type:Mt}=_t,Pt=this._getActionTitle(Tt),Ft={[D$a.action]:Tt.type!=="toggle",[D$a.actionToggle]:Tt.type==="toggle",[D$a.actionToggleOn]:Tt.type==="toggle"&&Tt.value,[D$a.buttonDisabled]:Tt.disabled},Dt=[this.renderActionIcon(Tt),this.renderActionText(Pt)],Nt=Mt==="menu-item"?n$1Q("li",{key:Tt.uid,role:"menuitem",tabIndex:0,title:Pt,"aria-label":Pt,class:this.classes(D$a.button,Ft),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":Tt.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},Dt):n$1Q("div",{key:Tt.uid,role:"button",tabIndex:0,title:Pt,"aria-label":Pt,class:this.classes(D$a.button,Ft),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":Tt.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},Dt);return Tt.visible?Nt:null}renderFeatureMenuItem(_t,Tt){const{messages:Mt,messagesCommon:Pt}=this,{selectedFeatureIndex:Ft,selectedFeatureViewModel:Dt}=this.viewModel,Nt=_t===Dt,Vt={[D$a.featureMenuSelected]:Nt},zt=Nt?n$1Q("span",{key:L$c(`feature-menu-selected-feature-${Ft}`),title:Mt.selectedFeature,"aria-label":Mt.selectedFeature,class:D$a.iconCheckMark}):null,Xt=n$1Q("span",{innerHTML:_t.title||Pt.untitled});return n$1Q("li",{role:"menuitem",tabIndex:-1,key:L$c(`feature-menu-feature-${Ft}`),class:this.classes(Vt,D$a.featureMenuItem),bind:this,"data-feature-index":Tt,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},n$1Q("span",{class:D$a.featureMenuTitle},Xt,zt))}renderFeatureMenu(){const{featureMenuId:_t}=this,{featureViewModels:Tt}=this.viewModel;return Tt.length>1?n$1Q("ol",{class:D$a.featureMenuList,id:_t,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},Tt.filter(Mt=>!!Mt.graphic).map((Mt,Pt)=>this.renderFeatureMenuItem(Mt,Pt))):null}_getActionTitle(_t){const{messages:Tt,selectedFeature:Mt,messagesCommon:Pt}=this,{id:Ft}=_t,Dt=Mt==null?void 0:Mt.attributes,Nt=Ft==="zoom-to-feature"?s$1y(_t.title,{messages:Tt}):Ft==="remove-selected-feature"?s$1y(_t.title,{messages:Pt}):Ft==="zoom-to-clustered-features"||Ft==="browse-clustered-features"?s$1y(_t.title,{messages:Tt}):_t.title;return Nt&&Dt?s$1y(Nt,Dt):Nt}_getActionClass(_t){const{selectedFeature:Tt}=this,Mt=Tt==null?void 0:Tt.attributes,{className:Pt,image:Ft}=_t,Dt=Ft||Pt?Pt:D$a.iconDefaultAction;return Dt&&Mt?s$1y(Dt,Mt):Dt}_getActionImage(_t){const{selectedFeature:Tt}=this,Mt=Tt==null?void 0:Tt.attributes,{image:Pt}=_t;return Pt&&Mt?s$1y(Pt,Mt):Pt}_createFeatureUpdatedAnimation(){return w$L("enter",D$a.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:_t,featureNavigationVisible:Tt}=this;if(typeof _t!="number")return null;const Mt=Math.round(_t);return Math.max(Tt?Mt-1:Mt,0)}_watchActions(){const{allActions:_t}=this.viewModel;this.notifyChange("dividedActions");const Tt="actions";this._handles.remove(Tt),_t&&_t.forEach(Mt=>{this._handles.add(l$2e(()=>[Mt.uid,Mt.active,Mt.className,Mt.disabled,Mt.id,Mt.title,Mt.image,Mt.visible],()=>this.scheduleRender()),Tt)})}_divideActions(){const{allActions:_t}=this.viewModel,Tt=_t.filter(Dt=>Dt.visible),Mt=this._getInlineActionCount(),Pt=Mt===null,Ft=Mt===0;return{inlineActions:Pt?Tt.slice(0):Ft?new j$11:Tt.slice(0,Mt),menuActions:Pt?new j$11:Ft?Tt.slice(0):Tt.slice(Mt)}}_featureMenuOpenChanged(_t){_t?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(_t){_t?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var Mt,Pt;const{selectedFeatureWidget:_t,messagesCommon:Tt}=this;_t&&(this.viewModel.title=((Mt=_t.viewModel)==null?void 0:Mt.state)==="error"?Tt.errorMessage:((Pt=_t.viewModel)==null?void 0:Pt.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:_t}=this;_t&&(this.viewModel.content=_t)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(_t){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(_t),this._featureMenuIntersectionObserverNode=_t}_handleFeatureMenuKeyup(_t){i$2K(_t)==="Escape"&&(_t.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(_t){i$2K(_t)==="Escape"&&(_t.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(_t){const{viewModel:Tt}=this,Mt=_t.currentTarget["data-feature-index"];Tt.activeFeature=Tt.features[Mt]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(_t){const Tt=i$2K(_t),{_featureMenuNode:Mt}=this,Pt=_t.currentTarget["data-feature-index"];if(!Mt)return;const Ft=Mt.querySelectorAll("li"),Dt=Ft.length;Tt!=="ArrowUp"?Tt!=="ArrowDown"?Tt!=="Home"?Tt!=="End"||(_t.stopPropagation(),Ft[Ft.length-1].focus()):(_t.stopPropagation(),Ft[0].focus()):(_t.stopPropagation(),Ft[(Pt+1+Dt)%Dt].focus()):(_t.stopPropagation(),Ft[(Pt-1+Dt)%Dt].focus())}_handleActionMenuItemKeyup(_t){const Tt=i$2K(_t),{_actionsMenuNode:Mt}=this,Pt=_t.currentTarget.dataset.actionUid,{menuActions:Ft}=this.dividedActions,Dt=Ft.findIndex(zt=>zt.uid===Pt);if(!Mt)return;const Nt=Mt.querySelectorAll("li"),Vt=Nt.length;Tt!=="ArrowUp"?Tt!=="ArrowDown"?Tt!=="Home"?Tt!=="End"||(_t.stopPropagation(),Nt[Nt.length-1].focus()):(_t.stopPropagation(),Nt[0].focus()):(_t.stopPropagation(),Nt[(Dt+1+Vt)%Vt].focus()):(_t.stopPropagation(),Nt[(Dt-1+Vt)%Vt].focus())}_handleMainKeyup(_t){const Tt=i$2K(_t);Tt==="ArrowLeft"&&(_t.stopPropagation(),this.previous()),Tt==="ArrowRight"&&(_t.stopPropagation(),this.next())}_spinnerEnabledChange(_t){if(this._destroySpinner(),!_t)return;const Tt=this.get("viewModel.view");this._createSpinner(Tt)}_hideSpinner(){const{_spinner:_t}=this;_t&&(_t.location=null,_t.hide())}_displaySpinner(){const{_spinner:_t}=this;if(!_t)return;const{location:Tt,waitingForResult:Mt}=this.viewModel;Mt?_t.show({location:Tt}):_t.hide()}_getIconStyles(_t){return{"background-image":_t?`url(${_t})`:""}}async _shouldFocus(_t){_t.shouldFocus&&(await j$U(()=>{var Tt;return((Tt=this.viewModel)==null?void 0:Tt.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const _t=l$2e(()=>{var Tt;return(Tt=this.viewModel)==null?void 0:Tt.selectedFeatureIndex},(Tt,Mt)=>this._selectedFeatureIndexUpdated(Tt,Mt));this._handles.add(_t,N$9)}_selectedFeatureIndexUpdated(_t,Tt){const{featureCount:Mt}=this;Mt&&_t!==Tt&&_t!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:_t}=this;_t&&(_t.viewModel=null,_t&&!_t.destroyed&&_t.destroy()),this._feature=null}_isScreenLocationWithinView(_t,Tt){return _t.x>-1&&_t.y>-1&&_t.x<=Tt.width&&_t.y<=Tt.height}_isOutsideView(_t){const{popupHeight:Tt,popupWidth:Mt,screenLocation:Pt,side:Ft,view:Dt}=_t;if(isNaN(Mt)||isNaN(Tt)||!Dt||!Pt)return!1;const Nt=Dt.padding;return Ft==="right"&&Pt.x+Mt/2>Dt.width-Nt.right||Ft==="left"&&Pt.x-Mt/2<Nt.left||Ft==="top"&&Pt.y-Tt<Nt.top||Ft==="bottom"&&Pt.y+Tt>Dt.height-Nt.bottom}_calculateAutoAlignment(_t){if(_t!=="auto")return _t;const{_pointerOffsetInPx:Tt,_containerNode:Mt,_mainContainerNode:Pt,viewModel:Ft}=this,{screenLocation:Dt,view:Nt}=Ft;if(t$2e(Dt)||!Nt||!Mt)return"top-center";if(!this._isScreenLocationWithinView(Dt,Nt))return this._get("currentAlignment")||"top-center";function Vt(nr){return parseInt(nr.replace(/[^-\d\.]/g,""),10)}const zt=Pt?window.getComputedStyle(Pt,null):null,Xt=zt?Vt(zt.getPropertyValue("max-height")):0,Ht=zt?Vt(zt.getPropertyValue("height")):0,{height:Wt,width:Qt}=Mt.getBoundingClientRect(),Zt=Qt+Tt,Kt=Math.max(Wt,Xt,Ht)+Tt,er=this._isOutsideView({popupHeight:Kt,popupWidth:Zt,screenLocation:Dt,side:"right",view:Nt}),Yt=this._isOutsideView({popupHeight:Kt,popupWidth:Zt,screenLocation:Dt,side:"left",view:Nt}),rr=this._isOutsideView({popupHeight:Kt,popupWidth:Zt,screenLocation:Dt,side:"top",view:Nt}),ir=this._isOutsideView({popupHeight:Kt,popupWidth:Zt,screenLocation:Dt,side:"bottom",view:Nt});return Yt?rr?"bottom-right":"top-right":er?rr?"bottom-left":"top-left":rr?ir?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(_t){return typeof _t=="function"?_t.call(this):_t}_getCurrentAlignment(){const{alignment:_t,dockEnabled:Tt}=this;return Tt||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(_t)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(_t){const Tt=["left","right"];return f$10(this.container)&&Tt.reverse(),_t.replace(/leading/gi,Tt[0]).replace(/trailing/gi,Tt[1])}_callDockPosition(_t){return typeof _t=="function"?_t.call(this):_t}_getDockPosition(){var _t;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((_t=this.dockOptions)==null?void 0:_t.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(_t){var Nt;if(_t!=="auto")return _t;const Tt=(Nt=this.viewModel)==null?void 0:Nt.view,Mt=f$10(this.container)?"top-left":"top-right";if(!Tt)return Mt;const Pt=Tt.padding||{left:0,right:0,top:0,bottom:0},Ft=Tt.width-Pt.left-Pt.right,{breakpoints:Dt}=Tt;return Dt&&Ft<=Dt.xsmall?"bottom-center":Mt}_positionContainer(_t=this._containerNode){if(_t&&(this._containerNode=_t),!_t)return;const{screenLocation:Tt}=this.viewModel,{width:Mt}=_t.getBoundingClientRect(),Pt=this._calculatePositionStyle(Tt,Mt);Pt&&(_t.style.top=Pt.top,_t.style.left=Pt.left,_t.style.bottom=Pt.bottom,_t.style.right=Pt.right)}_calculateFullWidth(_t){const{currentAlignment:Tt,_pointerOffsetInPx:Mt}=this;return Tt==="top-left"||Tt==="bottom-left"||Tt==="top-right"||Tt==="bottom-right"?_t+Mt:_t}_calculateAlignmentPosition(_t,Tt,Mt,Pt){const{currentAlignment:Ft,_pointerOffsetInPx:Dt}=this,Nt=Pt/2,Vt=Mt.height-Tt,zt=Mt.width-_t,{padding:Xt}=this.view;return Ft==="bottom-center"?{top:Tt+Dt-Xt.top,left:_t-Nt-Xt.left}:Ft==="top-left"?{bottom:Vt+Dt-Xt.bottom,right:zt+Dt-Xt.right}:Ft==="bottom-left"?{top:Tt+Dt-Xt.top,right:zt+Dt-Xt.right}:Ft==="top-right"?{bottom:Vt+Dt-Xt.bottom,left:_t+Dt-Xt.left}:Ft==="bottom-right"?{top:Tt+Dt-Xt.top,left:_t+Dt-Xt.left}:Ft==="top-center"?{bottom:Vt+Dt-Xt.bottom,left:_t-Nt-Xt.left}:void 0}_calculatePositionStyle(_t,Tt){const{dockEnabled:Mt,view:Pt}=this;if(!Pt)return;if(Mt)return{left:"",top:"",right:"",bottom:""};if(t$2e(_t)||!Tt)return;const Ft=this._calculateFullWidth(Tt),Dt=this._calculateAlignmentPosition(_t.x,_t.y,Pt,Ft);return Dt?{top:Dt.top!==void 0?`${Dt.top}px`:"auto",left:Dt.left!==void 0?`${Dt.left}px`:"auto",bottom:Dt.bottom!==void 0?`${Dt.bottom}px`:"auto",right:Dt.right!==void 0?`${Dt.right}px`:"auto"}:void 0}_viewChange(_t,Tt){_t&&Tt&&(this.close(),this.clear())}_viewReadyChange(_t,Tt){if(_t){const Mt=this.get("viewModel.view");this._wireUpView(Mt)}else Tt&&(this.close(),this.clear())}_wireUpView(_t){if(this._destroySpinner(),!_t)return;const{spinnerEnabled:Tt}=this;Tt&&this._createSpinner(_t),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(_t,Tt,Mt){const[Pt,Ft]=_t,[Dt,Nt]=Tt,{width:Vt,height:zt}=Mt;return Pt<=Vt&&Dt>Vt||Pt>Vt&&Dt<=Vt||Ft<=zt&&Nt>zt||Ft>zt&&Nt<=zt}_updateDockEnabledForViewSize(_t,Tt){if(!_t||!Tt)return;const Mt=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},Pt=Mt.left+Mt.right,Ft=Mt.top+Mt.bottom,Dt=[],Nt=[];Dt[0]=_t[0]-Pt,Dt[1]=_t[1]-Ft,Nt[0]=Tt[0]-Pt,Nt[1]=Tt[1]-Ft;const{dockOptions:Vt}=this,zt=Vt.breakpoint;this._dockingThresholdCrossed(Dt,Nt,zt)&&this._setDockEnabledForViewSize(Vt),this._setCurrentDockPosition()}_focusDockButtonNode(_t){this._focusDockButton&&(this._focusDockButton=!1,_t.focus())}_closeButtonNodeUpdated(_t){return this._focusClose?(this._focusClose=!1,void _t.focus()):this._blurClose?(this._blurClose=!1,void _t.blur()):void 0}_mainContainerNodeUpdated(_t){return this._mainContainerNode=_t,this._focusContainer?(this._focusContainer=!1,void _t.focus()):this._blurContainer?(this._blurContainer=!1,void _t.blur()):void 0}_featureMenuNodeUpdated(_t){if(this._featureMenuNode=_t,!_t||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const Tt=_t.querySelectorAll("li");Tt.length&&Tt[0].focus()}_actionsMenuNodeUpdated(_t){if(this._actionsMenuNode=_t,!_t||!this._focusFirstAction)return;this._focusFirstAction=!1;const Tt=_t.querySelectorAll("li");Tt.length&&Tt[0].focus()}_focusFeatureMenuButtonNode(_t){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,_t.focus())}_focusActionsMenuButtonNode(_t){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,_t.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:_t,viewModel:Tt}=this;if(!Tt)return;const Mt=Tt.active&&!_t;Tt.screenLocationEnabled=Mt}_shouldDockAtCurrentViewSize(_t){var Vt,zt;const Tt=_t.breakpoint,Mt=(zt=(Vt=this.viewModel)==null?void 0:Vt.view)==null?void 0:zt.ui;if(!Mt)return!1;const{width:Pt,height:Ft}=Mt;if(isNaN(Pt)||isNaN(Ft))return!1;const Dt=Tt.hasOwnProperty("width")&&Pt<=Tt.width,Nt=Tt.hasOwnProperty("height")&&Ft<=Tt.height;return Dt||Nt}_setDockEnabledForViewSize(_t){_t.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(_t))}_getPageText(_t,Tt){return this.featureNavigationVisible?s$1y(this.messages.pageText,{index:Tt+1,total:_t}):null}_destroySpinner(){const{_spinner:_t,view:Tt}=this;_t&&(Tt&&Tt.ui&&Tt.ui.remove(this._spinner,B$8),_t.destroy(),this._spinner=null)}_createSpinner(_t){_t&&(this._spinner=new m$F({view:_t}),_t.ui.add(this._spinner,{key:B$8,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const _t=!this.featureMenuOpen;this._featureMenuOpenChanged(_t),this.actionsMenuOpen=!1,this.featureMenuOpen=_t}_toggleActionsMenu(){const _t=!this.actionsMenuOpen;this._actionsMenuOpenChanged(_t),this.featureMenuOpen=!1,this.actionsMenuOpen=_t}_triggerAction(_t){const Tt=_t.currentTarget.dataset.actionUid,{allActions:Mt}=this.viewModel,Pt=Mt.findIndex(Dt=>Dt.uid===Tt),Ft=Mt.getItemAt(Pt);Ft&&Ft.type==="toggle"&&(Ft.value=!Ft.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(Pt)}_selectFeature(_t){const Tt=_t.currentTarget["data-feature-index"];isNaN(Tt)||(this.viewModel.selectedFeatureIndex=Tt),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};e$2a([d$25({readOnly:!0})],R$8.prototype,"actionsMenuId",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"actionsMenuButtonId",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"featureMenuId",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"titleId",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"contentId",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"hasContent",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"featureNavigationVisible",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"collapsible",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"featureMenuVisible",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"contentCollapsed",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"dividedActions",null),e$2a([o$1d("viewModel.actions")],R$8.prototype,"actions",void 0),e$2a([d$25()],R$8.prototype,"actionsMenuOpen",null),e$2a([d$25()],R$8.prototype,"alignment",void 0),e$2a([o$1d("viewModel.autoCloseEnabled")],R$8.prototype,"autoCloseEnabled",void 0),e$2a([o$1d("viewModel.autoOpenEnabled")],R$8.prototype,"autoOpenEnabled",void 0),e$2a([o$1d("viewModel.defaultPopupTemplateEnabled")],R$8.prototype,"defaultPopupTemplateEnabled",void 0),e$2a([o$1d("viewModel.content")],R$8.prototype,"content",void 0),e$2a([d$25()],R$8.prototype,"collapsed",void 0),e$2a([d$25()],R$8.prototype,"collapseEnabled",void 0),e$2a([d$25({readOnly:!0})],R$8.prototype,"currentAlignment",null),e$2a([d$25({readOnly:!0})],R$8.prototype,"currentDockPosition",null),e$2a([d$25()],R$8.prototype,"dockOptions",null),e$2a([d$25()],R$8.prototype,"dockEnabled",void 0),e$2a([o$1d("viewModel.featureCount")],R$8.prototype,"featureCount",void 0),e$2a([d$25()],R$8.prototype,"featureMenuOpen",void 0),e$2a([o$1d("viewModel.features")],R$8.prototype,"features",void 0),e$2a([o$1d("viewModel.goToOverride")],R$8.prototype,"goToOverride",void 0),e$2a([d$25()],R$8.prototype,"headingLevel",void 0),e$2a([o$1d("viewModel.highlightEnabled")],R$8.prototype,"highlightEnabled",void 0),e$2a([o$1d("viewModel.location")],R$8.prototype,"location",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],R$8.prototype,"label",void 0),e$2a([d$25()],R$8.prototype,"maxInlineActions",void 0),e$2a([d$25(),e$1f("esri/widgets/Popup/t9n/Popup")],R$8.prototype,"messages",void 0),e$2a([d$25(),e$1f("esri/t9n/common")],R$8.prototype,"messagesCommon",void 0),e$2a([o$1d("viewModel.promises")],R$8.prototype,"promises",void 0),e$2a([o$1d("viewModel.selectedFeature")],R$8.prototype,"selectedFeature",void 0),e$2a([o$1d("viewModel.selectedFeatureIndex")],R$8.prototype,"selectedFeatureIndex",void 0),e$2a([d$25({readOnly:!0})],R$8.prototype,"selectedFeatureWidget",null),e$2a([d$25()],R$8.prototype,"spinnerEnabled",void 0),e$2a([o$1d("viewModel.title")],R$8.prototype,"title",void 0),e$2a([o$1d("viewModel.updateLocationEnabled")],R$8.prototype,"updateLocationEnabled",void 0),e$2a([o$1d("viewModel.view")],R$8.prototype,"view",void 0),e$2a([d$25({type:U$d}),t$1d(["triggerAction","trigger-action"])],R$8.prototype,"viewModel",void 0),e$2a([o$1d("viewModel.visible")],R$8.prototype,"visible",void 0),e$2a([d$25()],R$8.prototype,"visibleElements",void 0),e$2a([s$23("visibleElements")],R$8.prototype,"castVisibleElements",null),e$2a([t$1e()],R$8.prototype,"_close",null),e$2a([t$1e()],R$8.prototype,"_toggleDockEnabled",null),e$2a([t$1e()],R$8.prototype,"_toggleFeatureMenu",null),e$2a([t$1e()],R$8.prototype,"_toggleActionsMenu",null),e$2a([t$1e()],R$8.prototype,"_triggerAction",null),e$2a([t$1e()],R$8.prototype,"_selectFeature",null),e$2a([t$1e()],R$8.prototype,"_next",null),e$2a([t$1e()],R$8.prototype,"_previous",null),R$8=e$2a([n$2L(S$b)],R$8);const j$i=R$8,l$I=[0,0];function p$T(_t){const Tt=(_t.ownerDocument||window.document).defaultView,Mt=_t.getBoundingClientRect();return l$I[0]=Mt.left+Tt.pageXOffset,l$I[1]=Mt.top+Tt.pageYOffset,l$I}function c$U(_t){_t&&(t$1n(_t),_t.parentNode&&_t.parentNode.removeChild(_t))}function m$x(_t){const Tt=document.createElement("div");return _t.appendChild(Tt),Tt}const f$p=16,y$q=750,v$n=512,_$c=2,g$m=_t=>{let Tt=class extends _t{constructor(...Mt){super(...Mt),this._freqInfo={freq:f$p,time:y$q},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([l$2e(()=>this.cursor,Pt=>{const{surface:Ft}=this;Ft&&Ft.setAttribute("data-cursor",Pt)}),l$2e(()=>this.interacting,Pt=>{const{surface:Ft}=this;Ft&&Ft.setAttribute("data-interacting",Pt.toString())})])}initialize(){this.handles.add(l$2e(()=>this.ui,(Mt,Pt)=>this._handleUIChange(Mt,Pt))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(Mt){const Pt=this._get("container");if(Pt===Mt)return;const Ft="dom-size";if(this.handles.remove(Ft),this._stopMeasuring(),Pt&&(Pt.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),c$U(this.root),this._set("root",null),r$16(this.userContent,Pt),c$U(this.userContent),this._set("userContent",null)),Mt){Mt.classList.add("esri-view");const Dt=document.createElement("div");Dt.className="esri-view-user-storage",r$16(Mt,Dt),Mt.appendChild(Dt),this._set("userContent",Dt);const Nt=document.createElement("div");Nt.className="esri-view-root",Mt.insertBefore(Nt,Mt.firstChild),this._set("root",Nt);const Vt=document.createElement("div");Vt.className="esri-view-surface",Vt.setAttribute("role","application"),Vt.tabIndex=0,Nt.appendChild(Vt),this._set("surface",Vt);const zt=new n$1X;Nt.appendChild(zt.surface),this._set("overlay",zt),l$2e(()=>zt.needsRender,Xt=>{Xt&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=A$B({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(l$2e(()=>this.size,Xt=>{const[Ht,Wt]=Xt,Qt="esri-view-surface--inset-outline";Ht>=document.body.clientWidth||Wt>=document.body.clientHeight?Vt.classList.add(Qt):Vt.classList.remove(Qt)},h$1w),Ft),this._set("container",Mt),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const Mt=document.activeElement===this.surface;return document.hasFocus()&&Mt}get popup(){return this._get("popup")||new j$i({view:this})}set popup(Mt){const Pt=this._get("popup");Pt&&Pt!==Mt&&Pt.destroy(),this._set("popup",Mt)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(Mt,Pt,Ft){const Dt=this.position;return Mt-=Dt[0],Pt-=Dt[1],Ft?(Ft[0]=Mt,Ft[1]=Pt):Ft=[Mt,Pt],Ft}containerToPage(Mt,Pt,Ft){const Dt=this.position;return Mt+=Dt[0],Pt+=Dt[1],Ft?(Ft[0]=Mt,Ft[1]=Pt):Ft=[Mt,Pt],Ft}_handleUIChange(Mt,Pt){Pt&&(this.handles.remove("ui"),Pt.destroy()),Mt&&this._wireUI(Mt),this._set("ui",Mt)}_wireUI(Mt){this.handles.remove("ui"),Mt&&(Mt.view=this,this.handles.add([l$2e(()=>this.root,Pt=>{Mt.container=Pt?m$x(Pt):null},h$1w),l$2e(()=>this.popup,(Pt,Ft)=>{const Dt="popup",Nt="manual";Ft&&Mt.remove(Ft,Dt),Pt&&(Pt.view=Mt.view,Mt.add(Pt,{key:Dt,position:Nt}))},h$1w)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const Mt=this._freqInfo;Mt.freq=f$p,Mt.time=y$q,this.handles.add([(()=>{const Pt=()=>{Mt.freq=f$p,Mt.time=y$q};return window.addEventListener("resize",Pt),{remove(){window.removeEventListener("resize",Pt)}}})(),A$B({prepare:Pt=>{const Ft=this._measure(),Dt=this._freqInfo;if(Dt.time+=Pt.deltaTime,Ft&&(Dt.freq=f$p,this._get("resizing")||this._set("resizing",!0)),Dt.time<Dt.freq)return;Dt.time=0;const Nt=this._position();Dt.freq=Nt||Ft?f$p:Math.min(y$q,Dt.freq*_$c),!Ft&&Dt.freq>=v$n&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const Mt=this.container,Pt=Mt?Mt.clientWidth:0,Ft=Mt?Mt.clientHeight:0;if(Pt===0||Ft===0)return this.suspended||this._set("suspended",!0),!1;const Dt=this.width,Nt=this.height;return Pt===Dt&&Ft===Nt?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",Pt),this._set("height",Ft),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:Dt,oldHeight:Nt,width:Pt,height:Ft}),!0)}_position(){const Mt=this.container,Pt=this.position,Ft=p$T(Mt);return(!Pt||Ft[0]!==Pt[0]||Ft[1]!==Pt[1])&&(this._set("position",[Ft[0],Ft[1]]),!0)}forceDOMReadyCycle(){}};return e$2a([d$25({value:null,cast:Mt=>e$1o(Mt)})],Tt.prototype,"container",null),e$2a([d$25({readOnly:!0})],Tt.prototype,"focused",null),e$2a([d$25({readOnly:!0})],Tt.prototype,"height",void 0),e$2a([d$25({type:j$i})],Tt.prototype,"popup",null),e$2a([d$25({type:n$1X})],Tt.prototype,"overlay",void 0),e$2a([d$25({readOnly:!0})],Tt.prototype,"position",void 0),e$2a([d$25({readOnly:!0})],Tt.prototype,"resizing",void 0),e$2a([d$25({readOnly:!0})],Tt.prototype,"root",void 0),e$2a([d$25({value:null,readOnly:!0})],Tt.prototype,"size",null),e$2a([d$25({readOnly:!0})],Tt.prototype,"surface",void 0),e$2a([d$25({readOnly:!0})],Tt.prototype,"suspended",void 0),e$2a([d$25()],Tt.prototype,"ui",void 0),e$2a([d$25({readOnly:!0})],Tt.prototype,"userContent",void 0),e$2a([d$25({readOnly:!0})],Tt.prototype,"width",void 0),e$2a([d$25()],Tt.prototype,"widthBreakpoint",void 0),Tt=e$2a([n$2L("esri.views.DOMContainer")],Tt),Tt};function w$g(_t){return _t&&"focus"in _t}const p$S=_t=>{let Tt=class extends _t{async fetchPopupFeatures(Mt,Pt){await this.when();const{location:Ft,queryArea:Dt,layerViewsAndGraphics:Nt,clientOnlyGraphics:Vt}=await this._prepareFetchPopupFeatures(Mt,Pt),zt=Promise.resolve(Vt),Xt=this._queryLayerPopupFeatures(Dt,Nt,Pt),Ht=Xt.map(Wt=>Wt.promise);return{location:Ft,clientOnlyGraphics:Vt,allGraphicsPromise:C$w([zt,...Ht]).then(Wt=>Array.from(new Set(Wt.flat()))),promisesPerLayerView:Xt}}_queryLayerPopupFeatures(Mt,Pt,Ft){return Pt.map(({layerView:Dt,graphics:Nt})=>{const Vt={clientGraphics:Nt,event:r$1P(Ft)?Ft.event:null,signal:r$1P(Ft)?Ft.signal:null,defaultPopupTemplateEnabled:!!r$1P(Ft)&&!!Ft.defaultPopupTemplateEnabled},zt=Dt.fetchPopupFeatures(Mt,Vt);return{layerView:Dt,promise:zt}})}_isValidPopupGraphic(Mt,Pt){return Mt&&!!Mt.getEffectivePopupTemplate(r$1P(Pt)&&Pt.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(Mt,Pt){const{clientGraphics:Ft,queryArea:Dt,location:Nt}=await this._popupHitTestGraphics(Mt,Pt),Vt=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:zt,clientOnlyGraphics:Xt}=this._graphicsPerFetchPopupLayerView(Ft,Vt);return{clientOnlyGraphics:Xt,layerViewsAndGraphics:zt,queryArea:Dt,location:Nt}}async _popupHitTestGraphics(Mt,Pt){const{results:Ft,mapPoint:Dt}=await this.popupHitTest(Mt),Nt=Ft.filter(zt=>zt.type==="graphic"&&this._isValidPopupGraphic(zt.graphic,Pt)),Vt=Nt.length?Nt[0].mapPoint:null;return{clientGraphics:Nt.map(zt=>zt.graphic),queryArea:Dt,location:Dt||Vt}}_getFetchPopupLayerViews(){const Mt=[];return this.allLayerViews.forEach(Pt=>{this._isValidPopupLayerView(Pt)&&Mt.push(Pt)}),r$1P(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&Mt.push(this.graphicsView),Mt.reverse()}_isValidPopupLayerView(Mt){return r$1P(Mt)&&(!("layer"in Mt)||!Mt.suspended)&&"fetchPopupFeatures"in Mt}_graphicsPerFetchPopupLayerView(Mt,Pt){const Ft=[],Dt=new Map,Nt=Pt.map(Vt=>{const zt=[];return"layer"in Vt?Dt.set(Vt.layer,zt):Dt.set(Vt.graphics,zt),{layerView:Vt,graphics:zt}});for(const Vt of Mt){const zt=Dt.get(Vt.layer)||Dt.get(Vt.sourceLayer)||null;zt?zt.push(Vt):Ft.push(Vt)}return{layerViewsAndGraphics:Nt,clientOnlyGraphics:Ft}}};return Tt=e$2a([n$2L("esri.views.PopupView")],Tt),Tt};s$2l.getLogger("esri.core.support.OwningCollection");let m$w=class extends a$2B(j$11){constructor(_t){super(_t),this.handles.add([this.on("before-add",Tt=>{t$2e(Tt.item)&&Tt.preventDefault()}),this.on("after-add",Tt=>this._own(Tt.item)),this.on("after-remove",Tt=>this._release(Tt.item))])}get owner(){return this._get("owner")}set owner(_t){_t!==this._get("owner")&&(this._releaseAll(),this._set("owner",_t),this._ownAll())}_ownAll(){for(const _t of this.items)this._own(_t)}_releaseAll(){for(const _t of this.items)this._release(_t)}_createNewInstance(_t){return this.itemType?new(j$11.ofType(this.itemType.Type))(_t):new j$11(_t)}};function a$R(_t,Tt){return{type:_t,cast:t$1V,set(Mt){const Pt=n$2I(Mt,this._get(Tt),_t);Pt.owner=this,this._set(Tt,Pt)}}}e$2a([d$25()],m$w.prototype,"owner",null),m$w=e$2a([n$2L("esri.core.support.OwningCollection")],m$w);const i$O=s$2l.getLogger("esri.support.AnalysesCollection");let n$U=class extends m$w{constructor(_t){super(_t),this.handles.add(this.on("before-add",Tt=>{t$2e(Tt.item)||Tt.item.parent===this.owner&&(i$O.warn("Analysis inside the collection must be unique. Not adding this element again."),Tt.preventDefault())}))}_own(_t){_t.parent=this.owner}_release(_t){_t.parent=null}};n$U=e$2a([n$2L("esri.support.AnalysesCollection")],n$U);let c$T=class extends m$w{_own(_t){_t.layer&&"remove"in _t.layer&&_t.layer!==this.owner&&_t.layer.remove(_t),_t.layer=this.owner}_release(_t){_t.layer===this.owner&&(_t.layer=null)}};e$2a([n$2J({Type:g$$,ensureType:b$1b(g$$)})],c$T.prototype,"itemType",void 0),c$T=e$2a([n$2L("esri.support.GraphicsCollection")],c$T);let p$R=class extends y$1E{constructor(_t){super(_t),this.view=null,this.baseLayerViews=new j$11,this.referenceLayerViews=new j$11,this._loadingHandle=l$2e(()=>{var Tt,Mt;return(Mt=(Tt=this.view)==null?void 0:Tt.map)==null?void 0:Mt.basemap},Tt=>{Tt&&Tt.load().catch(()=>{})},h$1w)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var Tt,Mt;if(this.view&&this.view.suspended)return!1;const _t=(Mt=(Tt=this.view)==null?void 0:Tt.map)==null?void 0:Mt.basemap;return!!_t&&!!_t.loaded&&(this.baseLayerViews.some(Pt=>Pt.updating)||this.referenceLayerViews.some(Pt=>Pt.updating))}};e$2a([d$25({constructOnly:!0})],p$R.prototype,"view",void 0),e$2a([d$25({readOnly:!0})],p$R.prototype,"baseLayerViews",void 0),e$2a([d$25({readOnly:!0})],p$R.prototype,"referenceLayerViews",void 0),e$2a([d$25({readOnly:!0})],p$R.prototype,"suspended",null),e$2a([d$25({type:Boolean,readOnly:!0})],p$R.prototype,"updating",null),p$R=e$2a([n$2L("esri.views.BasemapView")],p$R);const v$m=s$2l.getLogger("esri.views.LayerViewManager");class V$c{constructor(Tt,Mt,Pt){this.layer=Tt,this.view=Mt,this.layerViewImporter=Pt,this._controller=new AbortController,this._deferred=T$C(),this._started=!1,this.done=!1,v$16(this._controller.signal,()=>{const Ft=new s$2i("cancelled:layerview-create","layerview creation cancelled",{layer:Tt});this._deferred.reject(Ft)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:Tt}=this;if(!Tt)return;const{layer:Mt,view:Pt}=this;Mt.emit("layerview-destroy",{view:Pt,layerView:Tt}),Pt.emit("layerview-destroy",{layer:Mt,layerView:Tt}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var Ft,Dt;if(this._started)return;this._started=!0;const{_controller:{signal:Tt},layer:Mt,view:Pt}=this;this._map=Pt.map;try{let Nt,Vt;if(await Mt.load({signal:Tt}),"prefetchResources"in Mt&&await Mt.prefetchResources({signal:Tt}),Mt.createLayerView)Nt=await Mt.createLayerView(Pt,{signal:Tt});else{if(!this.layerViewImporter.hasLayerViewModule(Mt))throw new s$2i("layer:view-not-supported","No layerview implementation was found");const Ht=await this.layerViewImporter.importLayerView(Mt);f$1M(Tt),Nt="default"in Ht?new Ht.default({layer:Mt,view:Pt}):new Ht({layer:Mt,view:Pt})}const zt=()=>{Vt=a$31(Vt),Nt.destroyed||Nt.destroy(),Nt.layer=null,Nt.parent=null,Nt.view=null,this.done=!0};Vt=v$16(Tt,zt),f$1M(Tt);try{await Nt.when()}catch(Ht){throw zt(),Ht}if(!((Dt=(Ft=this._map)==null?void 0:Ft.allLayers)==null?void 0:Dt.includes(Mt)))return zt(),void this._deferred.reject(new s$2i("view:no-layerview-for-layer","The layer has been removed from the map",{layer:Mt}));this.layerView=Nt,Mt.emit("layerview-create",{view:Pt,layerView:Nt}),Pt.emit("layerview-create",{layer:Mt,layerView:Nt}),this.done=!0,this._deferred.resolve(Nt)}catch(Nt){Mt.emit("layerview-create-error",{view:Pt,error:Nt}),Pt.emit("layerview-create-error",{layer:Mt,error:Nt}),this.done=!0,this._deferred.reject(new s$2i("layerview:create-error","layerview creation failed",{layer:Mt,error:Nt}))}}}let L$b=class extends d$1O{constructor(_t){super(_t),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new c$2W,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var Mt;const Tt=(Mt=this.view.map)==null?void 0:Mt.allLayers;if(Tt)for(const Pt of Tt)this.layerViewImporter.hasLayerViewModule(Pt)&&this.layerViewImporter.importLayerView(Pt)},this._reschedule=()=>(t$2e(this._workPromise)&&(this._workPromise=T$C()),this.handles.remove("reschedule"),this.handles.add(v$15(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var Dt,Nt,Vt;const Tt=this.view.map;if(this._map!==Tt&&(this.clear(),this._map=Tt),t$2e(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const Mt=new p$3d({getCollections:()=>this._rootCollectionNames.map(zt=>this.get(zt)),getChildrenFunction:zt=>zt&&"layers"in zt?zt.layers:null});if(!Mt)return this._workPromise.resolve(),void(this._workPromise=null);for(const zt of Mt)this._createLayerView(zt);this._refreshCollections();for(const[zt,Xt]of this._layerLayerViewInfoMap)Mt.includes(zt)||(this._layerLayerViewInfoMap.delete(Xt.layer),Xt.destroy());const Pt=Mt.filter(zt=>zt.type==="group").map(zt=>zt.layers),Ft=[(Dt=Tt==null?void 0:Tt.ground)==null?void 0:Dt.layers,(Nt=Tt==null?void 0:Tt.basemap)==null?void 0:Nt.baseLayers,(Vt=Tt==null?void 0:Tt.basemap)==null?void 0:Vt.referenceLayers,Tt==null?void 0:Tt.layers,...Pt].filter(zt=>!!zt);this.handles.add(Ft.map(zt=>this._watchUpdatingTracking.addOnCollectionChange(()=>zt,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([a$2C(()=>{var _t,Tt;return(Tt=(_t=this.view)==null?void 0:_t.map)==null?void 0:Tt.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),l$2e(()=>{const _t=this.view,Tt=_t==null?void 0:_t.map;return[Tt==null?void 0:Tt.basemap,Tt==null?void 0:Tt.ground,Tt==null?void 0:Tt.layers,_t==null?void 0:_t.ready]},()=>this._reschedule(),w$X)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const _t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&_t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(_t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return r$1P(this._workPromise)||this._watchUpdatingTracking.updating||n$2O(this._layerLayerViewInfoMap,_t=>!_t.done)}get updatingRemaining(){let _t=0;for(const Tt of this._layerLayerViewInfoMap.values())Tt.done||++_t;return _t}clear(){if(!this.destroyed){for(const _t of this._layerLayerViewInfoMap.values())_t.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(_t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(_t))throw new s$2i("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:_t});return this._layerLayerViewInfoMap.get(_t).promise}_refreshCollections(){for(const[_t,Tt]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(_t),this.get(Tt),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(_t,Tt,Mt){if(!_t||!Tt)return void(Tt&&Tt.removeAll());let Pt=0;for(const Ft of _t){const Dt=this._layerLayerViewInfoMap.get(Ft);if(!Dt||!Dt.layerView)continue;const Nt=Dt.layerView;Nt.layer=Ft,Nt.parent=Mt,Tt.getItemAt(Pt)!==Nt&&Tt.splice(Pt,0,Nt),Ft.layers&&this._populateLayerViewsOwners(Ft.layers,Nt.layerViews,Nt),Pt+=1}Pt<Tt.length&&Tt.splice(Pt,Tt.length)}_createLayerView(_t){if(this._layerLayerViewInfoMap.has(_t))return this.view.ready&&this._layerLayerViewInfoMap.get(_t).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");_t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(_t)&&this.layerViewImporter.importLayerView(_t);const Tt=new V$c(_t,this.view,this.layerViewImporter);Tt.promise.then(()=>this._refreshCollections(),Mt=>{var Pt,Ft;Mt&&(g$1l(Mt)||Mt.name==="cancelled:layerview-create")||v$m.error(`Failed to create layerview for layer title:'${(Pt=_t.title)!=null?Pt:"no title"}', id:'${(Ft=_t.id)!=null?Ft:"no id"}' of type '${_t.type}'.`,{layer:_t,error:Mt}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(_t,Tt),this.view.ready&&Tt.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};e$2a([d$25()],L$b.prototype,"_workPromise",void 0),e$2a([d$25({readOnly:!0})],L$b.prototype,"_watchUpdatingTracking",void 0),e$2a([d$25({readOnly:!0})],L$b.prototype,"_layersToLayerViews",null),e$2a([d$25({readOnly:!0})],L$b.prototype,"_rootCollectionNames",null),e$2a([d$25()],L$b.prototype,"layerViewImporter",void 0),e$2a([d$25()],L$b.prototype,"supportsGround",void 0),e$2a([d$25({readOnly:!0})],L$b.prototype,"updating",null),e$2a([d$25({readOnly:!0})],L$b.prototype,"updatingRemaining",null),e$2a([d$25({constructOnly:!0})],L$b.prototype,"view",void 0),L$b=e$2a([n$2L("esri.views.LayerViewManager")],L$b);const M$f=L$b;let i$N=class extends y$1E{constructor(_t){super(_t),this.factor=1.5,this.offset=c$2D(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};e$2a([d$25({type:Number})],i$N.prototype,"factor",void 0),e$2a([d$25({nonNullable:!0})],i$N.prototype,"offset",void 0),e$2a([d$25()],i$N.prototype,"position",void 0),e$2a([d$25({type:Number,range:{min:0}})],i$N.prototype,"size",void 0),e$2a([d$25()],i$N.prototype,"maskUrl",void 0),e$2a([d$25()],i$N.prototype,"maskEnabled",void 0),e$2a([d$25()],i$N.prototype,"overlayUrl",void 0),e$2a([d$25()],i$N.prototype,"overlayEnabled",void 0),e$2a([d$25({readOnly:!0})],i$N.prototype,"version",null),e$2a([d$25({type:Boolean})],i$N.prototype,"visible",void 0),i$N=e$2a([n$2L("esri.views.Magnifier")],i$N);const p$Q=i$N;let i$M=class extends y$1E{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(_t){for(;!_t.done&&this._process(_t);)_t.madeProgress()}push(_t,Tt,Mt){return this.running=!0,new Promise((Pt,Ft)=>this._tasks.push(new a$Q(Pt,Ft,_t,Tt,Mt)))}unshift(_t,Tt,Mt){return this.running=!0,new Promise((Pt,Ft)=>this._tasks.unshift(new a$Q(Pt,Ft,_t,Tt,Mt)))}_process(_t){if(this._tasks.length===0)return!1;const Tt=this._tasks.shift();try{const Mt=p$3C(Tt.signal);if(Mt&&!Tt.abortCallback)Tt.reject(m$2b());else{const Pt=Mt?Tt.abortCallback(m$2b()):Tt.callback(_t);k$E(Pt)?Pt.then(Tt.resolve,Tt.reject):Tt.resolve(Pt)}}catch(Mt){Tt.reject(Mt)}return this.running=this._tasks.length>0,!0}cancelAll(){const _t=m$2b();for(const Tt of this._tasks)if(Tt.abortCallback){const Mt=Tt.abortCallback(_t);Tt.resolve(Mt)}else Tt.reject(_t);this._tasks.length=0,this.running=!1}};e$2a([d$25()],i$M.prototype,"running",void 0),i$M=e$2a([n$2L("esri.layers.support.PromiseQueue")],i$M);class a$Q{constructor(Tt,Mt,Pt,Ft,Dt){this.resolve=Tt,this.reject=Mt,this.callback=Pt,this.signal=Ft,this.abortCallback=Dt}}let t$y=class extends y$1E{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};e$2a([d$25()],t$y.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),e$2a([d$25()],t$y.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),t$y=e$2a([n$2L("esri.views.support.DebugFlags")],t$y);const p$P=new t$y,f$o=s$2l.getLogger("esri.views.support.Scheduler");var L$a;(function(_t){_t.RESOURCE_CONTROLLER="schedule",_t.SLIDE="slide",_t.STREAM_DATA_LOADER="stream loader",_t.ELEVATION_QUERY="elevation query",_t.TERRAIN_SURFACE="terrain",_t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",_t.GRAPHICS_CORE="Graphics3D",_t.I3S_CONTROLLER="I3S",_t.POINT_CLOUD_LAYER="point cloud",_t.FEATURE_TILE_FETCHER="feature fetcher",_t.OVERLAY="overlay",_t.STAGE="stage",_t.GRAPHICS_DECONFLICTOR="graphics deconflictor",_t.FILTER_VISIBILITY="Graphics3D filter visibility",_t.SCALE_VISIBILITY="Graphics3D scale visibility",_t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",_t.POINT_OF_INTEREST_FREQUENT="POI frequent",_t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",_t.LABELER="labeler",_t.FEATURE_QUERY_ENGINE="feature query",_t.FEATURE_TILE_TREE="feature tile tree",_t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",_t.ELEVATION_ALIGNMENT="elevation alignment",_t.TEXT_TEXTURE_ATLAS="text texture atlas",_t.TEXTURE_UNLOAD="texture unload",_t.LINE_OF_SIGHT_TOOL="line of sight tool",_t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",_t.ELEVATION_PROFILE="elevation profile",_t.SNAPPING="snapping",_t.SHADOW_ACCUMULATOR="shadow accumulator",_t.CLOUDS_GENERATOR="cloud generator",_t[_t.TEST_PRIO=1]="TEST_PRIO"})(L$a||(L$a={}));const S$a=0,b$k=new Map([[L$a.RESOURCE_CONTROLLER,S$a],[L$a.SLIDE,S$a],[L$a.STREAM_DATA_LOADER,S$a],[L$a.ELEVATION_QUERY,S$a],[L$a.TERRAIN_SURFACE,1],[L$a.SURFACE_GEOMETRY_UPDATES,1],[L$a.GRAPHICS_CORE,2],[L$a.I3S_CONTROLLER,2],[L$a.POINT_CLOUD_LAYER,2],[L$a.FEATURE_TILE_FETCHER,2],[L$a.OVERLAY,4],[L$a.STAGE,4],[L$a.GRAPHICS_DECONFLICTOR,4],[L$a.FILTER_VISIBILITY,4],[L$a.SCALE_VISIBILITY,4],[L$a.FRUSTUM_VISIBILITY,4],[L$a.POINT_OF_INTEREST_FREQUENT,6],[L$a.POINT_OF_INTEREST_INFREQUENT,30],[L$a.LABELER,8],[L$a.FEATURE_QUERY_ENGINE,8],[L$a.FEATURE_TILE_TREE,16],[L$a.FEATURE_TILE_TREE_ACTIVE,S$a],[L$a.ELEVATION_ALIGNMENT,12],[L$a.TEXT_TEXTURE_ATLAS,12],[L$a.CLOUDS_GENERATOR,12],[L$a.TEXTURE_UNLOAD,12],[L$a.LINE_OF_SIGHT_TOOL,16],[L$a.LINE_OF_SIGHT_TOOL_INTERACTIVE,S$a],[L$a.SNAPPING,S$a],[L$a.SHADOW_ACCUMULATOR,30]]);function k$9(_t){return b$k.has(_t)?b$k.get(_t):typeof _t=="number"?_t:1}var N$8;(function(_t){_t[_t.ANIMATING=0]="ANIMATING",_t[_t.INTERACTING=1]="INTERACTING",_t[_t.IDLE=2]="IDLE"})(N$8||(N$8={}));const O$b=6.5,U$b=1,P$6=30,y$p=1e3/30,C$8=100,F$a=.9;var D$9,G$6;(function(_t){let Tt=class extends y$1E{constructor(){super(),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new e$24("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new Pt,this._state=N$8.INTERACTING,this._tasks=new n$2R,this._runQueue=new n$2R,this._load=0,this._idleStateCallbacks=new n$2R,this._idleUpdatesStartFired=!1,this._maxReschedule=B$7,this._forceTask=!1,this._debug=!1,this._debugHandle=l$2e(()=>p$P.SCHEDULER_LOG_SLOW_TASKS,Nt=>this._debug=Nt,h$1w);for(const Nt of Object.keys(L$a))this.performanceInfo.tasks.set(L$a[Nt],new e$24(L$a[Nt]));let Ft;const Dt=this;this._test={get state(){return c$3r(Ft,Dt._state)},set state(Nt){Ft=Nt},FRAME_SAFETY_BUDGET:O$b,INTERACTING_BUDGET:y$p,IDLE_BUDGET:C$8,get availableBudget(){return Dt._budget.budget},usedBudget:0,getBudget:()=>Dt._budget,setBudget:Nt=>Dt._budget=Nt,updateTask:Nt=>this._updateTask(Nt),getState:Nt=>this._getState(Nt),getRuntime:Nt=>this._getRuntime(Nt),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(Ft=>Ft.remove()),this._tasks.clear(),a$31(this._debugHandle),this._microTaskQueued=!1,this.updating=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=B$7,this._schedule(),this.frame()))}))}registerTask(Ft,Dt){const Nt=k$9(Ft),Vt=new Mt(this,Ft,Dt,Nt);return this._tasks.push(Vt),this.performanceInfo.tasks.has(Ft)||this.performanceInfo.tasks.set(Ft,new e$24(Ft)),Vt}registerIdleStateCallbacks(Ft,Dt){const Nt={idleBegin:Ft,idleEnd:Dt};this._idleStateCallbacks.push(Nt),this.state===N$8.IDLE&&this._idleUpdatesStartFired&&Nt.idleBegin();const Vt=this;return{remove:()=>this._removeIdleStateCallbacks(Nt),set idleBegin(zt){Vt._idleUpdatesStartFired&&(Nt.idleEnd(),Vt._state===N$8.IDLE&&zt()),Nt.idleBegin=zt},set idleEnd(zt){Nt.idleEnd=zt}}}get load(){return this._load}set state(Ft){this._state!==Ft&&(this._state=Ft,this.state!==N$8.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(Dt=>Dt.idleEnd())))}get state(){return t$2e(this._test.state)?this._state:this._test.state}updateBudget(Ft){this._test.usedBudget=0;let Dt=O$b,Nt=Ft.frameDuration,Vt=U$b;switch(this.state){case N$8.IDLE:Dt=0,Nt=Math.max(C$8,Ft.frameDuration),Vt=P$6;break;case N$8.INTERACTING:Nt=Math.max(y$p,Ft.frameDuration);case N$8.ANIMATING:}return Nt=Nt-Ft.elapsedFrameTime-Dt,this.state!==N$8.IDLE&&Nt<U$b&&!this._forceTask?(this._forceTask=!0,!1):(Nt=Math.max(Nt,Vt),this._budget.reset(Nt,this.state),this._maxReschedule=B$7,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case N$8.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(Ft=>Ft.idleBegin())),this._runIdle();break;case N$8.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(Ft){this._idleUpdatesStartFired&&Ft.idleEnd(),this._idleStateCallbacks.removeUnordered(Ft)}removeTask(Ft){this._tasks.removeUnordered(Ft),this._runQueue.removeUnordered(Ft)}_updateTask(Ft){this._tasks.forAll(Dt=>{Dt.name===Ft&&Dt.setPriority(Ft)})}_getState(Ft){if(this._runQueue.some(Nt=>Nt.name===Ft))return G$6.SCHEDULED;let Dt=G$6.IDLE;return this._tasks.forAll(Nt=>{Nt.name===Ft&&Nt.needsUpdate&&(Nt.schedulePriority<=1?Dt=G$6.READY:Dt!==G$6.READY&&(Dt=G$6.WAITING))}),Dt}_getRuntime(Ft){let Dt=0;return this._tasks.forAll(Nt=>{Nt.name===Ft&&(Dt+=Nt.runtime)}),Dt}_resetRuntimes(){this._tasks.forAll(Ft=>Ft.runtime=0)}_getRunning(){const Ft=new Map;if(this._tasks.forAll(Nt=>{Nt.needsUpdate&&Ft.set(Nt.name,(Ft.get(Nt.name)||0)+1)}),Ft.size===0)return null;let Dt="";return Ft.forEach((Nt,Vt)=>{Dt+=Nt>1?` ${Nt}x ${Vt}`:` ${Vt}`}),Dt}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const Ft=this._tasks.reduce((Dt,Nt)=>Nt.needsUpdate?++Dt:Dt,0);this._load=this._load*F$a+Ft*(1-F$a)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(Ft=>!!Ft.needsUpdate||(Ft.schedulePriority=Ft.basePriority,!1)),this._tasks.forAll(Ft=>{Ft.basePriority===S$a&&Ft.needsUpdate&&!this._runQueue.includes(Ft)&&this._runQueue.unshift(Ft)});this._runQueue.length===0;){let Ft=!1,Dt=0;if(this._tasks.forAll(Nt=>{Nt.needsUpdate&&Nt.schedulePriority!==0&&Nt.basePriority!==S$a&&(Ft=!0,Dt=Math.max(Dt,Nt.basePriority),Nt.schedulePriority===1?(Nt.schedulePriority=0,this._runQueue.push(Nt)):--Nt.schedulePriority)}),!Ft)return this.updating=!1,!1;this._maxReschedule===B$7&&(this._maxReschedule=Dt),--this._maxReschedule}return this.updating=!0,!0}_run(){const Ft=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const Dt=this._budget.now(),Nt=this._runQueue.pop();this._budget.resetProgress();try{Nt.task.runTask(this._budget)}catch(zt){f$o.error(`Exception in task "${Nt.name}"`,zt)}Nt.schedulePriority=Nt.basePriority;const Vt=this._budget.now()-Dt;if(Nt.runtime+=Vt,this._frameTaskTimes.set(Nt.priority,this._frameTaskTimes.get(Nt.priority)+Vt),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",Nt.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this.updating=this._tasks.some(zt=>zt.needsUpdate),void this._recordFrameTaskTimes(this._budget.now()-Ft)}while(this._schedule());this.updating=this._tasks.some(Dt=>Dt.needsUpdate),this._recordFrameTaskTimes(this._budget.now()-Ft)}_startFrameTaskTimes(){for(const Ft of Object.keys(L$a))this._frameTaskTimes.set(L$a[Ft],0)}_recordFrameTaskTimes(Ft){this._frameTaskTimes.forEach((Dt,Nt)=>this.performanceInfo.tasks.get(Nt).record(Dt)),this.performanceInfo.total.record(Ft)}get test(){return this._test}};e$2a([d$25()],Tt.prototype,"updating",void 0),Tt=e$2a([n$2L("esri.views.support.Scheduler")],Tt),_t.Scheduler=Tt;let Mt=class extends y$1E{constructor(Ft,Dt,Nt,Vt){super({}),this._scheduler=Ft,this.name=Dt,this._basePriority=Vt,this.runtime=0,this._queue=new i$M,this._handles=new u$1P,this.schedulePriority=this._basePriority,this.task=r$1P(Nt)?Nt:this._queue,this._handles.add(f$1p(()=>this.task.running,()=>Ft.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(w$f),this._scheduler.removeTask(this),this.schedule=Q$4.schedule,this.reschedule=Q$4.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(Ft){this.name=Ft;const Dt=k$9(Ft);this._basePriority!==S$a&&this.schedulePriority===0||(this.schedulePriority=Dt),this._basePriority=Dt}get priority(){return this.name}set priority(Ft){this.setPriority(Ft)}get needsUpdate(){return this.updating||this.task.running}schedule(Ft,Dt,Nt){return this._queue.push(Ft,Dt,Nt)}reschedule(Ft,Dt,Nt){return this._queue.unshift(Ft,Dt,Nt)}processQueue(Ft){this._queue.runTask(Ft)}};e$2a([d$25({constructOnly:!0})],Mt.prototype,"task",void 0),e$2a([d$25({readOnly:!0})],Mt.prototype,"updating",null),Mt=e$2a([n$2L("esri.views.support.SchedulerTask")],Mt);class Pt{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=N$8.IDLE,this._didWork=!1,this._enabled=!0}run(Dt){return!this.done&&(Dt()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(Dt){this._enabled=Dt}reset(Dt,Nt){this._begin=this.now(),this._budget=Dt,this._state=Nt,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}_t.Budget=Pt})(D$9||(D$9={})),function(_t){_t.SCHEDULED="s",_t.READY="r",_t.WAITING="w",_t.IDLE="i"}(G$6||(G$6={}));const w$f=(()=>{const _t=new D$9.Budget;return _t.enabled=!1,_t})();class v$l{remove(){}processQueue(){}schedule(Tt,Mt,Pt){try{if(p$3C(Mt)){const Ft=m$2b();return Pt?Promise.resolve(Pt(Ft)):Promise.reject(Ft)}return $$j(Tt(w$f))}catch(Ft){return Promise.reject(Ft)}}reschedule(Tt,Mt,Pt){return this.schedule(Tt,Mt,Pt)}}const Q$4=new v$l,B$7=Number.MAX_SAFE_INTEGER;let i$L=class extends y$1E{constructor(_t,Tt){var Mt;super({}),this._stage=_t,this._textureRequests=new Map,this._frameTask=(Mt=Tt==null?void 0:Tt.registerTask(L$a.TEXTURE_UNLOAD))!=null?Mt:Q$4}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(_t=>this._releaseTextureRequest(_t)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(_t,Tt,Mt){const Pt=this.makeUid(_t);let Ft=this._textureRequests.get(Pt);return Ft||(Ft={referenceCount:0,texture:Tt(),textureAsync:null,abortController:null,onRemove:Mt},this._stage&&(this._stage.add(Ft.texture),this._stage.loadImmediate(Ft.texture)),this._textureRequests.set(Pt,Ft)),Ft.referenceCount++,{uid:Pt,texture:Ft.texture,release:()=>this._release(Pt)}}_release(_t){const Tt=this._textureRequests.get(_t);Tt?(Tt.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+_t),Tt.referenceCount--,Tt.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(_t))):console.warn(`TextureCollection: texture doesn't exist: '${_t}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(_t){if(!this._textureRequests)return;const Tt=this._textureRequests.get(_t);!Tt||Tt.referenceCount>0||(this._releaseTextureRequest(Tt),this._textureRequests.delete(_t))}_releaseTextureRequest(_t){var Tt;_t.onRemove&&_t.onRemove(),_t.texture?(Tt=this._stage)==null||Tt.remove(_t.texture):_t.abortController&&(_t.abortController.abort(),_t.abortController=null)}makeUid(_t,Tt=null){return r$1P(Tt)?`${_t}.${Tt}px`:_t}};e$2a([d$25()],i$L.prototype,"_frameTask",void 0),e$2a([d$25()],i$L.prototype,"updating",null),i$L=e$2a([n$2L("esri.views.3d.support.TextureCollection")],i$L);var t$x;(function(_t){_t[_t.Left=0]="Left",_t[_t.Middle=1]="Middle",_t[_t.Right=2]="Right"})(t$x||(t$x={}));const r$A=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],i$K={};function o$B(_t){return!!i$K[_t]}function s$D(_t){for(const Tt of _t)if(!o$B(Tt))return!1;return!0}r$A.forEach(_t=>{i$K[_t]=!0});class p$O{constructor(Tt){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=Tt,this.inputManager=null}connect(Tt){Tt&&this.disconnect(),this.inputManager=Tt,this.handlers.forEach(({handler:Mt,priority:Pt},Ft)=>this.inputManager.installHandlers(Ft,[Mt],Pt))}disconnect(){this.inputManager&&this.handlers.forEach((Tt,Mt)=>this.inputManager.uninstallHandlers(Mt)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(Tt,Mt,Pt,Ft){const Dt=Array.isArray(Tt)?Tt:Tt.split(",");if(!s$D(Dt))return Dt.some(o$B)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let Nt,Vt;Array.isArray(Mt)?Vt=Mt:(Nt=Mt,Vt=[]),typeof Pt=="function"?Nt=Pt:Ft=Pt,Ft=Ft!=null?Ft:g$o.DEFAULT;const zt=this._createUniqueGroupName(),Xt=new c$S(this.view,Dt,Vt,Nt);this.handlers.set(zt,{handler:Xt,priority:Ft});for(const Ht of Dt){const Wt=this.handlerCounts.get(Ht)||0;this.handlerCounts.set(Ht,Wt+1)}return this.inputManager&&this.inputManager.installHandlers(zt,[Xt],Ft),{remove:()=>this._removeHandler(zt,Dt)}}hasHandler(Tt){return!!this.handlerCounts.get(Tt)}_removeHandler(Tt,Mt){if(this.handlers.has(Tt)){this.handlers.delete(Tt);for(const Pt of Mt){const Ft=this.handlerCounts.get(Pt);Ft===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",Pt):Ft===1?this.handlerCounts.delete(Pt):this.handlerCounts.set(Pt,Ft-1)}}this.inputManager&&this.inputManager.uninstallHandlers(Tt)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class c$S extends i$Q{constructor(Tt,Mt,Pt,Ft){super(!0),this.view=Tt;for(const Dt of Mt)switch(Dt){case"click":this.registerIncoming("click",Pt,Nt=>Ft(this._wrapClick(Nt)));break;case"double-click":this.registerIncoming("double-click",Pt,Nt=>Ft(this._wrapDoubleClick(Nt)));break;case"immediate-click":this.registerIncoming("immediate-click",Pt,Nt=>Ft(this._wrapImmediateClick(Nt)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",Pt,Nt=>Ft(this._wrapImmediateDoubleClick(Nt)));break;case"hold":this.registerIncoming("hold",Pt,Nt=>Ft(this._wrapHold(Nt)));break;case"drag":this.registerIncoming("drag",Pt,Nt=>{const Vt=this._wrapDrag(Nt);Vt&&Ft(Vt)});break;case"key-down":this.registerIncoming("key-down",Pt,Nt=>Ft(this._wrapKeyDown(Nt)));break;case"key-up":this.registerIncoming("key-up",Pt,Nt=>Ft(this._wrapKeyUp(Nt)));break;case"pointer-down":this.registerIncoming("pointer-down",Pt,Nt=>Ft(this._wrapPointer(Nt,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",Pt,Nt=>Ft(this._wrapPointer(Nt,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",Pt,Nt=>Ft(this._wrapPointer(Nt,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",Pt,Nt=>Ft(this._wrapPointerDrag(Nt)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",Pt,Nt=>Ft(this._wrapMouseWheel(Nt)));break;case"pointer-enter":this.registerIncoming("pointer-enter",Pt,Nt=>Ft(this._wrapPointer(Nt,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",Pt,Nt=>Ft(this._wrapPointer(Nt,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",Pt,Nt=>{Ft(this._wrapGamepad(Nt))});break;case"focus":this.registerIncoming("focus",Pt,Nt=>{Ft(this._wrapFocus(Nt))});break;case"blur":this.registerIncoming("blur",Pt,Nt=>{Ft(this._wrapBlur(Nt))})}}_wrapFocus(Tt){return{type:"focus",timestamp:Tt.timestamp,native:Tt.data.native,cancelable:Tt.cancelable,stopPropagation:()=>Tt.stopPropagation(),async:Mt=>Tt.async(Mt),preventDefault:()=>Tt.preventDefault()}}_wrapBlur(Tt){return{type:"blur",timestamp:Tt.timestamp,native:Tt.data.native,cancelable:Tt.cancelable,stopPropagation:()=>Tt.stopPropagation(),async:Mt=>Tt.async(Mt),preventDefault:()=>Tt.preventDefault()}}_wrapClick(Tt){const{pointerType:Mt,button:Pt,buttons:Ft,x:Dt,y:Nt,native:Vt,eventId:zt}=Tt.data,{cancelable:Xt,timestamp:Ht}=Tt;return{type:"click",pointerType:Mt,button:Pt,buttons:Ft,x:Dt,y:Nt,native:Vt,timestamp:Ht,screenPoint:c$2D(Dt,Nt),mapPoint:this._getMapPoint(Dt,Nt),eventId:zt,cancelable:Xt,stopPropagation:()=>Tt.stopPropagation(),async:Wt=>Tt.async(Wt),preventDefault:()=>Tt.preventDefault()}}_wrapDoubleClick(Tt){const{pointerType:Mt,button:Pt,buttons:Ft,x:Dt,y:Nt,native:Vt,eventId:zt}=Tt.data,{cancelable:Xt,timestamp:Ht}=Tt;return{type:"double-click",pointerType:Mt,button:Pt,buttons:Ft,x:Dt,y:Nt,native:Vt,timestamp:Ht,mapPoint:this._getMapPoint(Dt,Nt),eventId:zt,cancelable:Xt,stopPropagation:()=>Tt.stopPropagation(),async:Wt=>Tt.async(Wt),preventDefault:()=>Tt.preventDefault()}}_wrapImmediateClick(Tt){const{pointerType:Mt,button:Pt,buttons:Ft,x:Dt,y:Nt,native:Vt,eventId:zt}=Tt.data,Xt=Vt.pointerId,{cancelable:Ht,timestamp:Wt}=Tt;return{type:"immediate-click",pointerId:Xt,pointerType:Mt,button:Pt,buttons:Ft,x:Dt,y:Nt,native:Vt,timestamp:Wt,mapPoint:this._getMapPoint(Dt,Nt),eventId:zt,cancelable:Ht,stopPropagation:()=>Tt.stopPropagation(),async:Qt=>Tt.async(Qt),preventDefault:()=>Tt.preventDefault()}}_wrapImmediateDoubleClick(Tt){const{pointerType:Mt,button:Pt,buttons:Ft,x:Dt,y:Nt,native:Vt,eventId:zt}=Tt.data,Xt=Vt.pointerId,{cancelable:Ht,timestamp:Wt}=Tt;return{type:"immediate-double-click",pointerId:Xt,pointerType:Mt,button:Pt,buttons:Ft,x:Dt,y:Nt,native:Vt,timestamp:Wt,mapPoint:this._getMapPoint(Dt,Nt),eventId:zt,cancelable:Ht,stopPropagation:()=>Tt.stopPropagation(),async:Qt=>Tt.async(Qt),preventDefault:()=>Tt.preventDefault()}}_wrapHold(Tt){const{pointerType:Mt,button:Pt,buttons:Ft,x:Dt,y:Nt,native:Vt}=Tt.data,{cancelable:zt,timestamp:Xt}=Tt;return{type:"hold",pointerType:Mt,button:Pt,buttons:Ft,x:Dt,y:Nt,native:Vt,timestamp:Xt,mapPoint:this._getMapPoint(Dt,Nt),cancelable:zt,stopPropagation:()=>Tt.stopPropagation(),async:Ht=>Tt.async(Ht),preventDefault:()=>Tt.preventDefault()}}_getMapPoint(Tt,Mt){return this.view.toMap(c$2D(Tt,Mt),{exclude:[]})}_wrapDrag(Tt){const Mt=Tt.data,{x:Pt,y:Ft}=Mt.center,{action:Dt,pointerType:Nt,button:Vt}=Mt;if(Dt==="start"&&(this.latestDragStart=Mt),!this.latestDragStart)return;const zt=Mt.pointer.native,Xt=Mt.buttons,{cancelable:Ht,timestamp:Wt}=Tt,Qt={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return Dt==="end"&&(this.latestDragStart=void 0),{type:"drag",action:Dt,x:Pt,y:Ft,origin:Qt,pointerType:Nt,button:Vt,buttons:Xt,radius:Mt.radius,angle:m$1X(Mt.angle),native:zt,timestamp:Wt,cancelable:Ht,stopPropagation:()=>Tt.stopPropagation(),async:Zt=>Tt.async(Zt),preventDefault:()=>Tt.preventDefault()}}_wrapKeyDown(Tt){const{key:Mt,repeat:Pt,native:Ft}=Tt.data,{cancelable:Dt,timestamp:Nt}=Tt;return{type:"key-down",key:Mt,repeat:Pt,native:Ft,timestamp:Nt,cancelable:Dt,stopPropagation:()=>Tt.stopPropagation(),async:Vt=>Tt.async(Vt),preventDefault:()=>Tt.preventDefault()}}_wrapKeyUp(Tt){const{key:Mt,native:Pt}=Tt.data,{cancelable:Ft,timestamp:Dt}=Tt;return{type:"key-up",key:Mt,native:Pt,timestamp:Dt,cancelable:Ft,stopPropagation:()=>Tt.stopPropagation(),async:Nt=>Tt.async(Nt),preventDefault:()=>Tt.preventDefault()}}_wrapPointer(Tt,Mt){const{x:Pt,y:Ft,button:Dt,buttons:Nt,native:Vt,eventId:zt}=Tt.data,Xt=Vt.pointerId,Ht=Vt.pointerType,{cancelable:Wt,timestamp:Qt}=Tt;return{type:Mt,x:Pt,y:Ft,pointerId:Xt,pointerType:Ht,button:Dt,buttons:Nt,native:Vt,timestamp:Qt,eventId:zt,cancelable:Wt,stopPropagation:()=>Tt.stopPropagation(),async:Zt=>Tt.async(Zt),preventDefault:()=>Tt.preventDefault()}}_wrapPointerDrag(Tt){const{x:Mt,y:Pt,buttons:Ft,native:Dt,eventId:Nt}=Tt.data.currentEvent,{button:Vt}=Tt.data.startEvent,zt=Tt.data.startEvent.native.pointerId,Xt=Tt.data.startEvent.native.pointerType,Ht=Tt.data.action,Wt={x:Tt.data.startEvent.x,y:Tt.data.startEvent.y},{cancelable:Qt,timestamp:Zt}=Tt;return{type:"pointer-drag",x:Mt,y:Pt,pointerId:zt,pointerType:Xt,button:Vt,buttons:Ft,action:Ht,origin:Wt,native:Dt,timestamp:Zt,eventId:Nt,cancelable:Qt,stopPropagation:()=>Tt.stopPropagation(),async:Kt=>Tt.async(Kt),preventDefault:()=>Tt.preventDefault()}}_wrapMouseWheel(Tt){const{cancelable:Mt,data:Pt,timestamp:Ft}=Tt,{x:Dt,y:Nt,deltaY:Vt,native:zt}=Pt;return{type:"mouse-wheel",x:Dt,y:Nt,deltaY:Vt,native:zt,timestamp:Ft,cancelable:Mt,stopPropagation:()=>Tt.stopPropagation(),async:Xt=>Tt.async(Xt),preventDefault:()=>Tt.preventDefault()}}_wrapGamepad(Tt){const{action:Mt,state:Pt,device:Ft}=Tt.data,{cancelable:Dt,timestamp:Nt}=Tt,{buttons:Vt,axes:zt}=Pt;return{type:"gamepad",device:Ft,timestamp:Nt,action:Mt,buttons:Vt,axes:zt,cancelable:Dt,stopPropagation:()=>Tt.stopPropagation(),async:Xt=>Tt.async(Xt),preventDefault:()=>Tt.preventDefault()}}}var o$A,t$w,u$z;(function(_t){_t[_t.USER=0]="USER",_t[_t.MANAGER=1]="MANAGER"})(o$A||(o$A={})),function(_t){_t[_t.None=0]="None",_t[_t.Unfocused=1]="Unfocused",_t[_t.Focused=2]="Focused",_t[_t.Unselected=4]="Unselected",_t[_t.Selected=8]="Selected",_t[_t.All=15]="All"}(t$w||(t$w={})),function(_t){_t[_t.None=0]="None",_t[_t.Custom1=16]="Custom1",_t[_t.Custom2=32]="Custom2",_t[_t.Custom3=64]="Custom3",_t[_t.Custom4=128]="Custom4",_t[_t.Custom5=256]="Custom5",_t[_t.Custom6=512]="Custom6",_t[_t.Custom7=1024]="Custom7",_t[_t.Custom8=2048]="Custom8",_t[_t.Custom9=4096]="Custom9",_t[_t.Custom10=8192]="Custom10",_t[_t.Custom11=16384]="Custom11",_t[_t.Custom12=32768]="Custom12",_t[_t.All=65520]="All"}(u$z||(u$z={}));const o$z=s$2l.getLogger("esri.views.interactive.interactiveToolUtils");function i$J(_t){return[_t.on("before-add",Tt=>{const Mt=Tt.item;if(Mt==null||_t.includes(Mt))return o$z.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void Tt.preventDefault();Mt.onAdd()}),_t.on("after-remove",Tt=>{const Mt=Tt.item;Mt.visible=!1,Mt.active&&(Mt.view.activeTool=null),Mt.destroy()})]}function r$z(_t){return _t.visible&&_t.getEditableFlag(o$A.USER)&&_t.getEditableFlag(o$A.MANAGER)}function n$T(_t){return c$2D(_t.x,_t.y)}function i$I(_t,Tt){const Mt=(_t instanceof HTMLElement?_t:_t.surface).getBoundingClientRect();return c$2D(Tt.clientX-Mt.left,Tt.clientY-Mt.top)}function r$y(_t,Tt){return Tt instanceof Event?i$I(_t,Tt):n$T(Tt)}function o$y(_t){if(_t instanceof Event)return!0;if(typeof _t=="object"&&"type"in _t)switch(_t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class p$N{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(Tt,Mt){const Pt=()=>Tt.stopPropagation();switch(Tt.type){case"pointer-move":c$R(Tt.pointerType)&&this._pointerLocations.set(Tt.pointerId,{x:Tt.x,y:Tt.y,pointerType:Tt.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(Pt(),Tt.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!u$y(Tt))break;const Ft=n$T(Tt),Dt=this._intersect(Ft,Tt.pointerType,Mt.forEachTool);if(t$2e(Dt))break;const Nt=this._findToolAndManipulatorByKey(Dt,Mt.forEachTool,h$z),Vt=o$2f(Nt,Xt=>Xt.manipulator),zt=o$2f(Nt,Xt=>Xt.tool);!(r$1P(Vt)&&r$1P(zt)&&Vt.interactive)||Vt.grabbable&&Vt.grabbableForEvent(Tt)||!Vt.grabbing||Vt.dragging||this._ungrabManipulatorBeforeDragging(Vt,zt,Tt),r$1P(Vt)&&Vt.interactive&&Vt.grabbable&&Vt.grabbableForEvent(Tt)&&!Vt.grabbing&&(this._grabbedManipulators.set(Tt.pointerId,{key:Dt,start:Ft,pointerType:Tt.pointerType}),this._grabbedManipulators.size===1&&Mt.activeTool!==Dt.tool&&(this._currentlyActiveTool=Mt.activeTool,this._revertToActiveTool=!0,Mt.setActiveTool(Dt.tool)),Vt.grabbing=!0,Vt.events.emit("grab-changed",{action:"start",pointerType:Tt.pointerType,screenPoint:Ft}),Pt());break}case"pointer-up":this._handlePointerEnd(Tt,Mt);break;case"pointer-drag":{if(!u$y(Tt))break;const Ft=this._grabbedManipulators.get(Tt.pointerId),Dt=this._draggedManipulators.get(Tt.pointerId),Nt=o$2f(Ft||Dt,({key:Ht})=>Ht),Vt=this._findManipulatorByKey(Nt,Mt.forEachTool);if(t$2e(Vt))break;const zt=n$T(Tt);zt.x=o$1H(zt.x,0,Mt.view.width),zt.y=o$1H(zt.y,0,Mt.view.height);const Xt=(Ft||Dt).start;switch(Tt.action){case"start":case"update":Tt.action!=="update"&&this._grabbedManipulators.size!==1||(Vt.dragging=!0,Dt?Vt.events.emit("drag",{action:"update",start:Xt,screenPoint:zt}):Vt.events.emit("drag",{action:"start",start:Xt,screenPoint:zt,pointerType:Tt.pointerType}),this._draggedManipulators.set(Tt.pointerId,{key:Nt,start:Xt}));break;case"end":Vt.dragging=!1,Dt&&Vt.events.emit("drag",{action:"end",start:Xt,screenPoint:zt}),this._draggedManipulators.delete(Tt.pointerId),this._handlePointerEnd(Tt,Mt)}Pt();break}case"immediate-click":{const Ft=n$T(Tt),Dt=this._intersect(Ft,Tt.pointerType,Mt.forEachTool),Nt=this._findToolAndManipulatorByKey(Dt,Mt.forEachTool,h$z);if(d$z(Tt)||Mt.forEachTool(Ht=>{if((!r$1P(Nt)||Nt.tool!==Ht||Ht.automaticManipulatorSelection)&&Ht.manipulators){let Wt=!1;Ht.manipulators.forEach(({manipulator:Qt})=>{Qt.selected&&(Qt.selected=!1,Wt=!0)}),Wt&&Ht.manipulatorSelectionChanged&&Ht.manipulatorSelectionChanged()}}),t$2e(Nt))break;const{manipulator:Vt,tool:zt}=Nt;if(!Vt.interactive)break;Vt.selectable&&zt.automaticManipulatorSelection&&(Vt.selected=!Vt.selected,zt.manipulatorSelectionChanged&&zt.manipulatorSelectionChanged());const Xt=Tt.native.shiftKey;Vt.events.emit("immediate-click",{screenPoint:Ft,button:Tt.button,pointerType:Tt.pointerType,shiftKey:Xt,stopPropagation:Pt});break}case"click":{const Ft=n$T(Tt),Dt=this._intersect(Ft,Tt.pointerType,Mt.forEachTool),Nt=this._findManipulatorByKey(Dt,Mt.forEachTool);if(t$2e(Nt)||!Nt.interactive)break;const Vt=Tt.native.shiftKey;Nt.events.emit(Tt.type,{screenPoint:Ft,button:Tt.button,pointerType:Tt.pointerType,shiftKey:Vt}),Pt();break}case"double-click":{const Ft=n$T(Tt),Dt=this._intersect(Ft,Tt.pointerType,Mt.forEachTool),Nt=this._findManipulatorByKey(Dt,Mt.forEachTool);if(t$2e(Nt)||!Nt.interactive)break;const Vt=Tt.native.shiftKey;Nt.events.emit("double-click",{screenPoint:Ft,button:Tt.button,pointerType:Tt.pointerType,shiftKey:Vt,stopPropagation:Pt});break}case"immediate-double-click":{const Ft=n$T(Tt),Dt=this._intersect(Ft,Tt.pointerType,Mt.forEachTool),Nt=this._findManipulatorByKey(Dt,Mt.forEachTool);if(t$2e(Nt)||!Nt.interactive)break;const Vt=Tt.native.shiftKey;Nt.events.emit("immediate-double-click",{screenPoint:Ft,button:Tt.button,pointerType:Tt.pointerType,shiftKey:Vt,stopPropagation:Pt});break}}this._onFocusChange(Mt.forEachTool)}_ungrabManipulatorBeforeDragging(Tt,Mt,Pt){Tt.grabbing=!1,Tt.events.emit("grab-changed",{action:"end",pointerType:Pt.pointerType,screenPoint:n$T(Pt)}),this._grabbedManipulators.forEach(({key:Ft},Dt)=>{Ft.tool===Mt&&Mt.manipulators.findById(Ft.manipulatorId)===Tt&&this._grabbedManipulators.delete(Dt)})}_handlePointerEnd(Tt,Mt){const Pt=o$2f(this._grabbedManipulators.get(Tt.pointerId),({key:Dt})=>Dt),Ft=this._findManipulatorByKey(Pt,Mt.forEachTool);r$1P(Ft)&&!Ft.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(Mt.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),Ft.grabbing&&(Ft.grabbing=!1,Ft.events.emit("grab-changed",{action:"end",pointerType:Tt.pointerType,screenPoint:n$T(Tt)})),this._grabbedManipulators.delete(Tt.pointerId))}_cursorFromMap(Tt,Mt){let Pt=null;return n$2O(Tt,({key:Ft})=>{const Dt=this._findManipulatorByKey(Ft,Mt);return!!(r$1P(Dt)&&Dt.interactive&&"cursor"in Dt&&Dt.cursor)&&(Pt=Dt.cursor,!0)}),Pt}_onFocusChange(Tt){this._updateCursor(Tt),this._updateFocusedManipulatorTools(Tt)}_updateCursor(Tt){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,Tt)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,Tt)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(Tt){const Mt=new Set;this._grabbedManipulators.forEach(({key:{tool:Pt}})=>{Mt.add(Pt)}),this._hoveredManipulators.forEach(({key:{tool:Pt}})=>{Mt.add(Pt)}),Tt(Pt=>{Pt.hasFocusedManipulators=Mt.has(Pt)})}clearPointers(Tt,Mt,Pt=!0,Ft){const Dt=Nt=>Nt.tool===Tt&&(t$2e(Ft)||Nt.manipulatorId===Ft);this._grabbedManipulators.forEach(({key:Nt,pointerType:Vt},zt)=>{if(Dt(Nt)){this._grabbedManipulators.delete(zt);const Xt=this._findManipulatorByKey(Nt,Mt);r$1P(Xt)&&(Xt.grabbing=!1,Xt.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:Vt}))}}),this._draggedManipulators.forEach(({key:Nt},Vt)=>{if(Dt(Nt)){this._draggedManipulators.delete(Vt);const zt=this._findManipulatorByKey(Nt,Mt);r$1P(zt)&&(zt.dragging=!1,zt.events.emit("drag",{action:"cancel"}))}}),Pt&&this._hoveredManipulators.forEach(({key:Nt},Vt)=>{if(Dt(Nt)){this._hoveredManipulators.delete(Vt);const zt=this._findManipulatorByKey(Nt,Mt);r$1P(zt)&&(zt.hovering=!1)}}),this._onFocusChange(Mt)}_intersect(Tt,Mt,Pt){let Ft=null;return Pt(Dt=>{if(Dt.manipulators==null||!r$z(Dt))return!1;const Nt=Dt.manipulators.intersect(Tt,Mt);return!t$2e(Nt)&&(Ft={manipulatorId:Nt.id,tool:Dt},!0)}),Ft}updateHoveredStateFromKnownPointers(Tt){this._pointerLocations.forEach((Mt,Pt)=>{this._updateHoveredStateForPointerAtScreenPosition(c$2D(Mt.x,Mt.y),Pt,Mt.pointerType,Tt)})}handleHoverEvent(Tt,Mt){Tt.type!=="pointer-up"&&Tt.type!=="immediate-click"&&Tt.type!=="pointer-move"||!c$R(Tt.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(n$T(Tt),Tt.pointerId,Tt.pointerType,Mt)}_updateHoveredStateForPointerAtScreenPosition(Tt,Mt,Pt,Ft){const Dt=this._intersect(Tt,Pt,Ft);let Nt=this._findManipulatorByKey(Dt,Ft);const Vt=o$2f(this._hoveredManipulators.get(Mt),({key:Xt})=>Xt),zt=this._findManipulatorByKey(Vt,Ft);r$1P(Nt)&&!Nt.interactive&&(Nt=null),zt!==Nt&&(r$1P(zt)&&(zt.hovering=!1),r$1P(Nt)?(Nt.hovering=!0,this._hoveredManipulators.set(Mt,{key:Dt})):this._hoveredManipulators.delete(Mt),this._onFocusChange(Ft))}_findManipulatorByKey(Tt,Mt){return this._findToolAndManipulatorByKey(Tt,Mt,h$z)?h$z.manipulator:null}_findToolAndManipulatorByKey(Tt,Mt,Pt){return t$2e(Tt)?null:(Pt.tool=null,Pt.manipulator=null,Mt(Ft=>{if(Ft!==Tt.tool||Ft.manipulators==null||!r$z(Ft))return!1;const Dt=Ft.manipulators.findById(Tt.manipulatorId);return!!r$1P(Dt)&&(Pt.manipulator=Dt,Pt.tool=Ft,!0)}),Pt.manipulator?Pt:null)}}function c$R(_t){return _t==="mouse"}function u$y(_t){return _t.pointerType!=="mouse"||_t.button===0}function d$z(_t){return!!_t.native.shiftKey}const h$z={manipulator:null,tool:null},E$e=s$2l.getLogger("esri.views.ToolViewManager"),g$l="attached",w$e="tools";let y$o=class extends d$1O{constructor(_t){super(_t),this._manipulatorState=new p$N,this.tools=new j$11,this.cursor=null,this._forEachTool=Tt=>{for(const Mt of this.tools.items)if(Tt(Mt))return}}initialize(){this.handles.add([this.view.on(r$A,_t=>{this._handleInputEvent(_t)},g$o.TOOL),...i$J(this.tools),this.tools.on("before-remove",({item:_t})=>{this._manipulatorState.clearPointers(_t,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}set activeTool(_t){if(r$1P(_t)&&!this.view.ready)return void E$e.error("Cannot set active tool while view is not ready.");if(_t===this.activeTool)return;const Tt=this.activeTool;this._set("activeTool",_t),r$1P(Tt)&&Tt.deactivate(),r$1P(_t)&&_t.activate(),this._removeIncompleteTools(_t);const Mt=t$2e(this.activeTool);for(const Pt of this.tools){Pt.setEditableFlag(o$A.MANAGER,Mt||Pt===this.activeTool);const Ft=r$z(Pt);!Mt&&Ft||this._manipulatorState.clearPointers(Pt,this._forEachTool,!Ft)}this._updateCursor()}get updating(){var _t,Tt;return this.updatingHandles.updating||this.tools.some(Mt=>Mt.updating)||((Tt=(_t=this.textures)==null?void 0:_t.updating)!=null?Tt:!1)}attach(){this.view.type==="3d"?(this._set("textures",new i$L(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([l$2e(()=>{const{state:_t}=this.view;return"camera"in _t&&_t.camera},()=>{this._forEachManipulator(_t=>{_t.onViewChange!=null&&_t.onViewChange()})}),this.view.elevationProvider.on("elevation-change",_t=>{this._forEachManipulator(Tt=>{Tt.onElevationChange!=null&&Tt.onElevationChange(_t)})}),n$2W(()=>this._set("textures",l$2H(this.textures)))],g$l)):this.handles.add(l$2e(()=>this.view.extent,()=>{this._forEachManipulator(_t=>{_t.onViewChange!=null&&_t.onViewChange()})}))}detach(){r$1P(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(g$l)}_forEachManipulator(_t){this._forEachTool(Tt=>{Tt.manipulators&&Tt.manipulators.forEach(({manipulator:Mt})=>_t(Mt,Tt))})}_handleInputEvent(_t){let Tt=!1;const Mt={..._t,stopPropagation:()=>{Tt=!0,_t.stopPropagation()}};r$1P(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(Mt):this._forEachTool(Pt=>{!Tt&&Pt.visible&&Pt.handleInputEvent(Mt)}),!Tt&&_t.type==="key-down"&&_t.key==="Escape"&&this.activeTool&&(_t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(Mt,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:Pt=>{this.activeTool=Pt},view:this.view}),!Tt&&r$1P(this.activeTool)&&this.activeTool.handleInputEventAfter(Mt),this._manipulatorState.handleHoverEvent(Mt,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(w$e),this._forEachTool(_t=>{if(_t instanceof y$1E){const Tt=l$2e(()=>[_t.cursor,_t.visible,_t.editable],()=>{r$z(_t)||this._manipulatorState.clearPointers(_t,this._forEachTool),this._updateCursor()});this.handles.add(Tt,w$e)}_t.manipulators&&this.handles.add(_t.manipulators.on("change",Tt=>{Tt.removed.forEach(({id:Mt})=>{this._manipulatorState.clearPointers(_t,this._forEachTool,!0,Mt)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),w$e)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){const _t=this._manipulatorState.cursor;let Tt=_t;this._forEachTool(Mt=>!(!r$1P(Mt.cursor)||!Mt.visible||!t$2e(_t)&&Mt.preferManipulatorCursor)&&(Tt=Mt.cursor,!0)),this._get("cursor")!==Tt&&this._set("cursor",Tt)}_removeIncompleteTools(_t){this.tools.filter(Tt=>(t$2e(_t)||Tt!==_t)&&!Tt.created&&Tt.removeIncompleteOnCancel).forEach(Tt=>{this.tools.remove(Tt)})}};e$2a([d$25({constructOnly:!0,nonNullable:!0})],y$o.prototype,"view",void 0),e$2a([d$25({readOnly:!0,nonNullable:!0})],y$o.prototype,"textures",void 0),e$2a([d$25({value:null})],y$o.prototype,"activeTool",null),e$2a([d$25({readOnly:!0,type:j$11})],y$o.prototype,"tools",void 0),e$2a([d$25({readOnly:!0})],y$o.prototype,"cursor",void 0),e$2a([d$25({readOnly:!0})],y$o.prototype,"updating",null),y$o=e$2a([n$2L("esri.views.ToolViewManager")],y$o);const j$h=y$o;let o$x=class extends y$1E{constructor(_t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",_t.mapping==="standard"?this._detectedDeviceType="standard":n$S.test(_t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=_t.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return a$P[this.deviceType]}};e$2a([d$25({nonNullable:!0,readOnly:!0})],o$x.prototype,"nativeIndex",void 0),e$2a([d$25({type:String,readOnly:!0})],o$x.prototype,"deviceType",null),e$2a([d$25({type:Number,readOnly:!0})],o$x.prototype,"axisThreshold",null),o$x=e$2a([n$2L("esri.views.input.gamepad.GamepadInputDevice")],o$x);const n$S=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),a$P={standard:.15,spacemouse:.025,unknown:0},i$H=o$x;let c$Q=class extends y$1E{constructor(..._t){super(..._t),this.devices=new j$11,this.enabledFocusMode="document"}};e$2a([d$25({type:j$11.ofType(i$H),readOnly:!0})],c$Q.prototype,"devices",void 0),e$2a([d$25({type:["document","view","none"]})],c$Q.prototype,"enabledFocusMode",void 0),c$Q=e$2a([n$2L("esri.views.input.gamepad.GamepadSettings")],c$Q);const i$G=c$Q;let p$M=class extends y$1E{constructor(){super(...arguments),this.gamepad=new i$G}};e$2a([d$25({readOnly:!0})],p$M.prototype,"gamepad",void 0),p$M=e$2a([n$2L("esri.views.input.Input")],p$M);const a$O=p$M;let s$C=class extends y$1E{constructor(_t){super(_t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};e$2a([d$25({type:Boolean,nonNullable:!0})],s$C.prototype,"enabled",void 0),e$2a([d$25({type:i$H})],s$C.prototype,"device",void 0),e$2a([d$25({type:["pan","zoom"],nonNullable:!0})],s$C.prototype,"mode",void 0),e$2a([d$25({type:["forward-down","forward-up"],nonNullable:!0})],s$C.prototype,"tiltDirection",void 0),e$2a([d$25({type:Number,nonNullable:!0})],s$C.prototype,"velocityFactor",void 0),s$C=e$2a([n$2L("esri.views.navigation.gamepad.GamepadSettings")],s$C);const a$N=s$C;let a$M=class extends y$1E{constructor(_t){super(_t),this.browserTouchPanEnabled=!0,this.gamepad=new a$N,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};e$2a([d$25({type:Boolean})],a$M.prototype,"browserTouchPanEnabled",void 0),e$2a([d$25({type:a$N,nonNullable:!0})],a$M.prototype,"gamepad",void 0),e$2a([d$25({type:Boolean})],a$M.prototype,"momentumEnabled",void 0),e$2a([d$25({type:Boolean})],a$M.prototype,"mouseWheelZoomEnabled",void 0),a$M=e$2a([n$2L("esri.views.navigation.Navigation")],a$M);const p$L=a$M;function o$w(_t,Tt,Mt){const Pt=h$y(_t),Ft=Tt,Dt=a$L(Pt,Ft,Mt);if(Pt){const Nt=v$x.deriveUnitFromSR(Pt,_t.spatialReference).heightUnit;if(!Mt&&Nt!==Pt.heightUnit){const Vt=new s$2i("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${Nt})`,{horizontalUnit:Nt});return new s$2i("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:Pt,error:Vt})}}if(!l$H(_t)||Dt===s$B.Unsupported)return new s$2i("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:Pt});switch(Dt){case s$B.Units:{const Nt=Pt.heightUnit||"unknown",Vt=Ft.heightUnit||"unknown",zt=new s$2i("layerview:incompatible-height-unit",`The vertical units of the layer (${Nt}) must match the vertical units of the scene (${Vt})`,{layerUnit:Nt,sceneUnit:Vt});return new s$2i("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:Pt,sceneHeightModelInfo:Ft,error:zt})}case s$B.HeightModel:{const Nt=Pt.heightModel||"unknown",Vt=Ft.heightModel||"unknown",zt=new s$2i("layerview:incompatible-height-model",`The height model of the layer (${Nt}) must match the height model of the scene (${Vt})`,{layerHeightModel:Nt,sceneHeightModel:Vt});return new s$2i("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:Pt,sceneHeightModelInfo:Ft,error:zt})}case s$B.CRS:{const Nt=Pt.vertCRS||"unknown",Vt=Ft.vertCRS||"unknown",zt=new s$2i("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${Nt}) must match the vertical datum of the scene (${Vt})`,{layerDatum:Nt,sceneDatum:Vt});return new s$2i("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:Pt,sceneHeightModelInfo:Ft,error:zt})}}return null}function a$L(_t,Tt,Mt){if(!c$P(_t)||!c$P(Tt))return s$B.Unsupported;if(_t==null||Tt==null)return s$B.Ok;if(!Mt&&_t.heightUnit!==Tt.heightUnit)return s$B.Units;if(_t.heightModel!==Tt.heightModel)return s$B.HeightModel;switch(_t.heightModel){case"gravity-related-height":return s$B.Ok;case"ellipsoidal":return _t.vertCRS===Tt.vertCRS?s$B.Ok:s$B.CRS;default:return s$B.Unsupported}}var s$B;function c$P(_t){return _t==null||_t.heightModel!=null&&_t.heightUnit!=null}function l$H(_t){return"heightModelInfo"in _t&&_t.heightModelInfo!=null||_t.spatialReference!=null||!d$y(_t)}function h$y(_t){const Tt=_t.url&&m$O(_t.url);return!((_t.spatialReference&&_t.spatialReference.vcsWkid)==null&&r$1P(Tt)&&Tt.serverType==="ImageServer")&&u$x(_t)&&_t.heightModelInfo?_t.heightModelInfo:d$y(_t)?v$x.deriveUnitFromSR(m$v,_t.spatialReference):null}function u$x(_t){return"heightModelInfo"in _t}function f$n(_t){if(_t.type==="unknown"||!("capabilities"in _t))return!1;switch(_t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function d$y(_t){return f$n(_t)?!!(_t.capabilities&&_t.capabilities.data&&_t.capabilities.data.supportsZ):p$K(_t)}function g$k(_t){return _t.layers!=null||p$K(_t)||f$n(_t)||u$x(_t)}function p$K(_t){switch(_t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"line-of-sight":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(_t){_t[_t.Ok=0]="Ok",_t[_t.Units=1]="Units",_t[_t.HeightModel=2]="HeightModel",_t[_t.CRS=3]="CRS",_t[_t.Unsupported=4]="Unsupported"})(s$B||(s$B={}));const m$v=new v$x({heightModel:"gravity-related-height"});var l$G;(function(_t){_t[_t.Global=1]="Global",_t[_t.Local=2]="Local"})(l$G||(l$G={}));let n$R,s$A=null;async function c$O(_t){s$A||(s$A=__vitePreload(()=>import("./geometryServiceUtils.654a7e26.js"),[]).then(Tt=>n$R=Tt)),await s$A,f$1M(_t)}async function p$J(_t,Tt,Mt,Pt){if(!_t)return null;const Ft=_t.spatialReference;return en()||An(Ft,Tt)?rn(_t,Tt):n$R?n$R.projectGeometry(_t,Tt,Mt,Pt):(await Promise.race([c$O(Pt),tn(Pt)]),p$J(_t,Tt,Mt,Pt))}let h$x=class extends y$1E{constructor(_t){super(_t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=h$1R(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return r$1P(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return t$2e(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var Mt,Pt,Ft,Dt;const _t=(Mt=this.map)==null?void 0:Mt.call(this),Tt=[];return r$1P(this.priorityCollection)&&Tt.push(this.priorityCollection),Tt.push({parent:_t==null?void 0:_t.basemap,layers:(Pt=_t==null?void 0:_t.basemap)==null?void 0:Pt.baseLayers},{layers:_t==null?void 0:_t.layers},{parent:_t==null?void 0:_t.ground,layers:(Ft=_t==null?void 0:_t.ground)==null?void 0:Ft.layers},{parent:_t==null?void 0:_t.basemap,layers:(Dt=_t==null?void 0:_t.basemap)==null?void 0:Dt.referenceLayers}),Tt}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){var Ft;if(this.suspended)return(Ft=this._get("_spatialReferenceTask"))!=null?Ft:{updating:!1};const{layers:_t,updating:Tt}=this._allLayers;let Mt=null;for(const Dt of _t){const Nt=this._getSupportedSpatialReferences(Dt);if(Nt.length>0){const Vt=this._narrowDownSpatialReferenceCandidates(Mt,Nt);r$1P(Vt)&&(Mt=Vt)}if(r$1P(Mt)&&Mt.length===1)break}if(Tt&&(t$2e(Mt)||Mt.length!==1))return{updating:!0};const Pt=this._pickSpatialReferenceCandidate(Mt);return{spatialReference:r$1P(Pt)?Pt.spatialReference:null,viewingMode:r$1P(Pt)?Pt.viewingMode:null,updating:!1}}get _tileInfoTask(){var Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt;if(!this.required.tileInfo)return(Mt=this._get("_tileInfoTask"))!=null?Mt:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:_t,updating:Tt}=this._collectLayers([{parent:(Ft=(Pt=this.map)==null?void 0:Pt.call(this))==null?void 0:Ft.basemap,layers:(Vt=(Nt=(Dt=this.map)==null?void 0:Dt.call(this))==null?void 0:Nt.basemap)==null?void 0:Vt.baseLayers},{layers:(Xt=(zt=this.map)==null?void 0:zt.call(this))==null?void 0:Xt.layers}]);if(_t&&_t.length>0&&"tileInfo"in _t[0]){const Ht=_t[0].tileInfo;return{tileInfo:Ht&&Ht.spatialReference.equals(this.spatialReference)?Ht:null,updating:!1}}return{updating:Tt}}get _heightModelInfoTask(){var Mt,Pt,Ft,Dt;if(!this.required.heightModelInfo||this.suspended&&((Mt=this._get("_heightModelInfoTask"))==null?void 0:Mt.heightModelInfo))return(Pt=this._get("_heightModelInfoTask"))!=null?Pt:{updating:!1};const{layers:_t,updating:Tt}=this._allLayers;for(const Nt of _t)if(g$k(Nt)){const Vt=h$y(Nt);if(Vt)return{heightModelInfo:Vt,vcsWkid:(Ft=Nt.spatialReference)==null?void 0:Ft.vcsWkid,latestVcsWkid:(Dt=Nt.spatialReference)==null?void 0:Dt.latestVcsWkid,updating:!1}}return{updating:Tt}}get _extentCandidatesTask(){var Pt,Ft;if(this.suspended||!this.required.extent)return(Pt=this._get("_extentCandidatesTask"))!=null?Pt:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const _t=this._allLayers,Tt=_t.updating,Mt=[];for(const Dt of _t.layers){const Nt="fullExtents"in Dt&&Dt.fullExtents||(r$1P(Dt.fullExtent)?[Dt.fullExtent]:[]),Vt=this.requiresExtentInSpatialReference?null:Nt[0],zt=(Ft=Nt.find(Xt=>Xt.spatialReference.equals(this.spatialReference)))!=null?Ft:Vt;if(zt)return{candidates:[{extent:zt,layer:Dt}],updating:!1};if(this._getSupportedSpatialReferences(Dt).length>0)for(const Xt of Nt)Mt.push({extent:Xt,layer:Dt})}return{candidates:Mt,updating:Tt}}get _extentTask(){const{candidates:_t,updating:Tt}=this._extentCandidatesTask;if(Tt)return{updating:Tt};if(t$2e(_t)||_t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const Mt=this._pickExtentCandidate(_t),Pt=this.spatialReference;return Mt.extent.equals(this._projectExtentTask.input)&&Pt.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:r$1P(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(r$1P(this._projectExtentTask.task)&&(this._projectExtentTask.task=h$1R(this._projectExtentTask.task)),this._projectExtentTask={input:Mt.extent.clone(),output:null,spatialReference:Pt.clone(),task:O$z(async Ft=>{try{const Dt=await p$J(Mt.extent,Pt,Mt.layer.portalItem,Ft);this._projectExtentTask={...this._projectExtentTask,task:null,output:Dt}}catch{if(p$3C(Ft))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(_t,Tt){if(t$2e(_t))return Tt;const Mt=[],Pt=(Ft,Dt)=>r$1P(Ft)?r$1P(Dt)?Ft===Dt&&Ft:Ft:Dt;for(const Ft of _t)for(const Dt of Tt){if(!Ft.spatialReference.equals(Dt.spatialReference))continue;const Nt=Pt(Ft.viewingMode,Dt.viewingMode);if(Nt!==!1){Mt.push({spatialReference:Ft.spatialReference,viewingMode:Nt});break}}return Mt.length>0?Mt:null}_pickSpatialReferenceCandidate(_t){const Tt=this.defaultSpatialReference;return t$2e(_t)||_t.length<1?r$1P(Tt)?{spatialReference:Tt,viewingMode:null}:null:(r$1P(Tt)&&_t.length>1&&_t.some(({spatialReference:Mt})=>Mt.equals(Tt))&&(_t=_t.filter(({spatialReference:Mt})=>Mt.equals(Tt))),_t.length>1&&_t.some(({viewingMode:Mt})=>Mt!==l$G.Local)&&(_t=_t.filter(({viewingMode:Mt})=>Mt!==l$G.Local)),_t[0])}_getSupportedSpatialReferences(_t){const Tt="supportedSpatialReferences"in _t&&_t.supportedSpatialReferences||(_t.spatialReference?[_t.spatialReference]:[]);if(Tt.length===0)return[];const Mt=[];for(const Pt of Tt){const Ft=this.getSpatialReferenceSupport({spatialReference:Pt,layer:_t});if(r$1P(Ft)){const Dt=r$1P(Ft.constraints)?Ft.constraints:[{spatialReference:Pt,viewingMode:null}];for(const{spatialReference:Nt,viewingMode:Vt}of Dt)(!this.requiresExtentInSpatialReference||t$2e(this.userSpatialReference)||Nt.equals(this.userSpatialReference))&&Mt.push({spatialReference:Nt,viewingMode:Vt})}}return Mt}_pickExtentCandidate(_t){const Tt=this.spatialReference;return _t.find(({extent:Mt})=>Tt.equals(Mt.spatialReference))||_t[0]}_collectLayers(_t){var Mt;if(this._loadMaybe((Mt=this.map)==null?void 0:Mt.call(this))!=="loaded")return{layers:[],updating:!0};const Tt={layers:[],preloading:-1,updating:!1};for(const Pt of _t)if(this._collectCollection(Pt,Tt),Tt.preloading===this.sourcePreloadCount)break;return{layers:Tt.layers,updating:Tt.updating}}_collectCollection(_t,Tt){if(_t.layers){switch(this._loadMaybe(_t.parent)){case"loading":return Tt.updating=!0,void++Tt.preloading;case"failed":return}for(const Mt of _t.layers){switch(this._loadMaybe(Mt)){case"failed":continue;case"loading":Tt.updating=!0,++Tt.preloading;break;case"loaded":Tt.updating||Tt.layers.push(Mt),"layers"in Mt&&this._collectCollection({layers:Mt.layers},Tt)}if(Tt.preloading===this.sourcePreloadCount)break}}}_loadMaybe(_t){return _t&&"loadStatus"in _t?_t.loadStatus==="not-loaded"?(_t.load(),"loading"):_t.loadStatus:"loaded"}};e$2a([d$25()],h$x.prototype,"required",void 0),e$2a([d$25({constructOnly:!0})],h$x.prototype,"map",void 0),e$2a([d$25({constructOnly:!0})],h$x.prototype,"getSpatialReferenceSupport",void 0),e$2a([d$25()],h$x.prototype,"defaultSpatialReference",void 0),e$2a([d$25()],h$x.prototype,"userSpatialReference",void 0),e$2a([d$25()],h$x.prototype,"sourcePreloadCount",void 0),e$2a([d$25()],h$x.prototype,"priorityCollection",void 0),e$2a([d$25()],h$x.prototype,"requiresExtentInSpatialReference",void 0),e$2a([d$25()],h$x.prototype,"suspended",void 0),e$2a([d$25({readOnly:!0})],h$x.prototype,"ready",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"heightModelInfoReady",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"spatialReference",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"extent",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"heightModelInfo",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"vcsWkid",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"latestVcsWkid",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"viewingMode",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"tileInfo",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"mapCollections",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"_allLayers",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"_spatialReferenceTask",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"_tileInfoTask",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"_heightModelInfoTask",null),e$2a([d$25({readOnly:!0})],h$x.prototype,"_extentCandidatesTask",null),e$2a([d$25()],h$x.prototype,"_extentTask",null),e$2a([d$25()],h$x.prototype,"_projectExtentTask",void 0),h$x=e$2a([n$2L("esri.views.support.DefaultsFromMap")],h$x);var U$a;const W$4=s$2l.getLogger("esri.views.View");let A$a=U$a=class extends a$2B(n$2K.EventedMixin(m$26(y$1E))){constructor(_t){super(_t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new p$3d({getCollections:()=>{var Tt,Mt,Pt;return[(Tt=this.basemapView)==null?void 0:Tt.baseLayerViews,(Mt=this.groundView)==null?void 0:Mt.layerViews,this.layerViews,(Pt=this.basemapView)==null?void 0:Pt.referenceLayerViews]},getChildrenFunction:Tt=>Tt.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new c$T,this.analyses=new n$U,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new j$11,this.magnifier=new p$Q,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new a$O,this.navigation=new p$L,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new p$O(this),this.persistableViewModels=new j$11,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(l$2e(()=>this.preconditionsReady,Tt=>{var Mt,Pt;Tt?(this._currentSpatialReference=this.spatialReference,U$a.views.add(this)):(this._currentSpatialReference=null,U$a.views.remove(this)),this.notifyChange("spatialReference"),!Tt&&this.ready?((Mt=this.layerViewManager)==null||Mt.clear(),(Pt=this.toolViewManager)==null||Pt.detach(),r$1P(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):Tt&&!this.ready&&(this._startup(),r$1P(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},U$r))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,j$U(()=>this.ready)))),this.basemapView=new p$R({view:this}),this.layerViewManager=new M$f({view:this,layerViewImporter:{importLayerView:_t=>this.importLayerView(_t),hasLayerViewModule:_t=>this.hasLayerViewModule(_t)},supportsGround:this.supportsGround}),this.toolViewManager=new j$h({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([l$2e(()=>this.initialExtentRequired,_t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:_t},{sync:!0,initial:!0}),l$2e(()=>this.ready,_t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=_t,this.defaultsFromMap.userSpatialReference=_t?this.spatialReference:this._userSpatialReference)},{sync:!0}),l$2e(()=>this._userSpatialReference,_t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=_t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let _t=null;this.handles.add([l$2e(()=>{var Tt;return(Tt=this.defaultsFromMap)==null?void 0:Tt.ready},Tt=>{var Pt;const Mt=((Pt=this.map)==null?void 0:Pt.allLayers.length)>0;if(Tt&&!this.spatialReference&&Mt){if(r$1P(_t))return;const Ft=n$2W(()=>_t=h$1R(_t));_t=O$z(async Dt=>{try{await L$y(this.spatialReferenceWarningDelay,null,Dt)}catch{return}finally{_t=null}W$4.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(Ft,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=l$2H(this.graphics),this.analyses=l$2H(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),l$2H(this.analysisViewManager),this.toolViewManager=l$2H(this.toolViewManager),this.layerViewManager=l$2H(this.layerViewManager),this.basemapView=l$2H(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const _t=this.map;this.map=null,_t==null||_t.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return W$4.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new h$x({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:_t=>this.getSpatialReferenceSupport(_t),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var _t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||m$25.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((_t=this.defaultsFromMap)!=null&&_t.ready)||!this.typeSpecificPreconditionsReady)}set map(_t){_t!==this._get("map")&&(_t!=null&&_t.destroyed&&(W$4.warn("#map","The provided map is already destroyed",{map:_t}),_t=null),m$25.isLoadable(_t)&&_t.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",_t))}get spatialReference(){var Tt,Mt;let _t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return _t&&((Mt=(Tt=this.defaultsFromMap)==null?void 0:Tt.required)==null?void 0:Mt.heightModelInfo)&&(_t=_t.clone(),_t.vcsWkid=this.defaultsFromMap.vcsWkid,_t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),_t}set spatialReference(_t){const Tt=!E$G(_t,this._get("spatialReference"));this._set("_userSpatialReference",_t),Tt&&(this._set("spatialReference",_t),this._spatialReferenceChanged(_t))}_spatialReferenceChanged(_t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var _t;return(_t=this.defaultsFromMap)==null?void 0:_t.extent}get cursor(){const _t=this.toolViewManager?this.toolViewManager.cursor:null;return r$1P(_t)?_t:this._cursor||"default"}set cursor(_t){this._cursor=_t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(_t){return this.layerViewManager.whenLayerView(_t)}getDefaultSpatialReference(){var _t;return(_t=this.defaultsFromMap)==null?void 0:_t.spatialReference}getDefaultHeightModelInfo(){var _t,Tt,Mt;return(Mt=(Tt=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?Tt:(_t=this.defaultsFromMap)==null?void 0:_t.heightModelInfo)!=null?Mt:null}importLayerView(_t){throw new s$2i("importLayerView() not implemented")}hasLayerViewModule(_t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(_t){return r$1P(this.getSpatialReferenceSupport({spatialReference:_t}))}when(_t,Tt){return this.isResolved()&&!this.ready&&W$4.warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(_t,Tt)}forceReadyCycle(){this.ready&&(f$1p(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(_t){this.toolViewManager.tools.add(_t),this.activeTool=_t}tryFatalErrorRecovery(){this.fatalError=null}};A$a.views=new j$11,e$2a([d$25()],A$a.prototype,"_userSpatialReference",void 0),e$2a([o$1d("toolViewManager.activeTool")],A$a.prototype,"activeTool",void 0),e$2a([d$25({readOnly:!0})],A$a.prototype,"allLayerViews",void 0),e$2a([d$25()],A$a.prototype,"groundView",void 0),e$2a([d$25()],A$a.prototype,"animation",void 0),e$2a([d$25()],A$a.prototype,"basemapView",void 0),e$2a([d$25({readOnly:!0})],A$a.prototype,"_defaultsFromMapSettings",null),e$2a([d$25()],A$a.prototype,"defaultsFromMap",null),e$2a([d$25()],A$a.prototype,"fatalError",void 0),e$2a([d$25({type:M$K})],A$a.prototype,"extent",void 0),e$2a([d$25(a$R(c$T,"graphics"))],A$a.prototype,"graphics",void 0),e$2a([d$25(a$R(n$U,"analyses"))],A$a.prototype,"analyses",void 0),e$2a([d$25({readOnly:!0,type:v$x})],A$a.prototype,"heightModelInfo",null),e$2a([d$25({readOnly:!0})],A$a.prototype,"interacting",null),e$2a([d$25({readOnly:!0})],A$a.prototype,"navigating",void 0),e$2a([d$25({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],A$a.prototype,"preconditionsReady",null),e$2a([d$25({readOnly:!0})],A$a.prototype,"typeSpecificPreconditionsReady",void 0),e$2a([d$25({type:j$11,readOnly:!0})],A$a.prototype,"layerViews",void 0),e$2a([d$25({type:p$Q})],A$a.prototype,"magnifier",void 0),e$2a([d$25({value:null,type:L$t})],A$a.prototype,"map",null),e$2a([d$25()],A$a.prototype,"padding",void 0),e$2a([d$25({readOnly:!0})],A$a.prototype,"ready",void 0),e$2a([d$25({type:k$y})],A$a.prototype,"spatialReference",null),e$2a([d$25()],A$a.prototype,"spatialReferenceWarningDelay",void 0),e$2a([d$25()],A$a.prototype,"stationary",null),e$2a([d$25({readOnly:!0})],A$a.prototype,"supportsGround",void 0),e$2a([d$25({type:y$X})],A$a.prototype,"timeExtent",void 0),e$2a([o$1d("toolViewManager.tools")],A$a.prototype,"tools",void 0),e$2a([d$25()],A$a.prototype,"toolViewManager",void 0),e$2a([d$25({readOnly:!0})],A$a.prototype,"type",void 0),e$2a([d$25({type:Number})],A$a.prototype,"scale",void 0),e$2a([d$25({readOnly:!0})],A$a.prototype,"updating",void 0),e$2a([d$25({readOnly:!0})],A$a.prototype,"initialExtentRequired",void 0),e$2a([d$25({readOnly:!0})],A$a.prototype,"initialExtent",null),e$2a([d$25()],A$a.prototype,"cursor",null),e$2a([d$25({readOnly:!0})],A$a.prototype,"input",void 0),e$2a([d$25({type:p$L,nonNullable:!0})],A$a.prototype,"navigation",void 0),e$2a([d$25()],A$a.prototype,"layerViewManager",void 0),e$2a([d$25()],A$a.prototype,"analysisViewManager",void 0),e$2a([d$25()],A$a.prototype,"width",void 0),e$2a([d$25()],A$a.prototype,"height",void 0),e$2a([d$25({readOnly:!0})],A$a.prototype,"resizing",void 0),e$2a([d$25({value:null,readOnly:!0})],A$a.prototype,"size",null),e$2a([d$25({readOnly:!0})],A$a.prototype,"suspended",void 0),e$2a([d$25({readOnly:!0})],A$a.prototype,"viewEvents",void 0),e$2a([d$25({readOnly:!0})],A$a.prototype,"persistableViewModels",void 0),e$2a([d$25()],A$a.prototype,"_isValid",void 0),e$2a([d$25()],A$a.prototype,"_readyCycleForced",void 0),e$2a([d$25()],A$a.prototype,"_currentSpatialReference",void 0),A$a=U$a=e$2a([n$2L("esri.views.View")],A$a);const G$5=A$a;let p$I=class extends _$B{constructor(_t){super(_t),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((_t,Tt)=>this._dfd={resolve:_t,reject:Tt}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new s$2i("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(_t,Tt){Tt||(Tt=k$E(_t)?"waiting-for-target":"running"),this._set("target",_t),this._set("state",Tt)}};e$2a([d$25({readOnly:!0})],p$I.prototype,"done",null),e$2a([d$25({readOnly:!0,type:String})],p$I.prototype,"state",void 0),e$2a([d$25()],p$I.prototype,"target",void 0),p$I=e$2a([n$2L("esri.views.ViewAnimation")],p$I),function(_t){_t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(p$I||(p$I={}));const n$Q=p$I;function e$C(_t,Tt,Mt,Pt){const Ft=3*_t,Dt=3*(Mt-_t)-Ft,Nt=1-Ft-Dt,Vt=3*Tt,zt=3*(Pt-Tt)-Vt,Xt=1-Vt-zt;function Ht(Kt){return((Nt*Kt+Dt)*Kt+Ft)*Kt}function Wt(Kt){return((Xt*Kt+zt)*Kt+Vt)*Kt}function Qt(Kt){return(3*Nt*Kt+2*Dt)*Kt+Ft}function Zt(Kt,er){let Yt,rr,ir,nr,ar,or;for(ir=Kt,or=0;or<8;or++){if(nr=Ht(ir)-Kt,Math.abs(nr)<er)return ir;if(ar=Qt(ir),Math.abs(ar)<1e-6)break;ir-=nr/ar}if(Yt=0,rr=1,ir=Kt,ir<Yt)return Yt;if(ir>rr)return rr;for(;Yt<rr;){if(nr=Ht(ir),Math.abs(nr-Kt)<er)return ir;Kt>nr?Yt=ir:rr=ir,ir=.5*(rr-Yt)+Yt}return ir}return function(Kt,er=1e-6){return Wt(Zt(Kt,er))}}const n$P=/^cubic-bezier\((.*)\)/,t$v={};function r$x(_t){let Tt=t$v[_t]||null;if(!Tt){const Mt=n$P.exec(_t);if(Mt){const Pt=Mt[1].split(",").map(Ft=>parseFloat(Ft.trim()));Pt.length!==4||Pt.some(Ft=>isNaN(Ft))||(Tt=e$C.apply(e$C,Pt))}}return Tt}t$v.ease=e$C(.25,.1,.25,1),t$v.linear=e$C(0,0,1,1),t$v.easeIn=t$v["ease-in"]=e$C(.42,0,1,1),t$v.easeOut=t$v["ease-out"]=e$C(0,0,.58,1),t$v.easeInOut=t$v["ease-in-out"]=e$C(.42,0,.58,1);function e$B(){return[1,0,0,1,0,0]}function r$w(_t){return[_t[0],_t[1],_t[2],_t[3],_t[4],_t[5]]}function t$u(_t,Tt,Mt,Pt,Ft,Dt){return[_t,Tt,Mt,Pt,Ft,Dt]}function n$O(_t,Tt){return new Float64Array(_t,Tt,6)}Object.freeze(Object.defineProperty({__proto__:null,create:e$B,clone:r$w,fromValues:t$u,createView:n$O},Symbol.toStringTag,{value:"Module"}));function a$K(_t,Tt){return _t[0]=Tt[0],_t[1]=Tt[1],_t}function r$v(_t,Tt,Mt){return _t[0]=Tt,_t[1]=Mt,_t}function s$z(_t,Tt,Mt){return _t[0]=Tt[0]+Mt[0],_t[1]=Tt[1]+Mt[1],_t}function o$v(_t,Tt,Mt){return _t[0]=Tt[0]-Mt[0],_t[1]=Tt[1]-Mt[1],_t}function u$w(_t,Tt,Mt){return _t[0]=Tt[0]*Mt[0],_t[1]=Tt[1]*Mt[1],_t}function e$A(_t,Tt,Mt){return _t[0]=Tt[0]/Mt[0],_t[1]=Tt[1]/Mt[1],_t}function c$N(_t,Tt){return _t[0]=Math.ceil(Tt[0]),_t[1]=Math.ceil(Tt[1]),_t}function i$F(_t,Tt){return _t[0]=Math.floor(Tt[0]),_t[1]=Math.floor(Tt[1]),_t}function f$m(_t,Tt,Mt){return _t[0]=Math.min(Tt[0],Mt[0]),_t[1]=Math.min(Tt[1],Mt[1]),_t}function M$e(_t,Tt,Mt){return _t[0]=Math.max(Tt[0],Mt[0]),_t[1]=Math.max(Tt[1],Mt[1]),_t}function h$w(_t,Tt){return _t[0]=Math.round(Tt[0]),_t[1]=Math.round(Tt[1]),_t}function l$F(_t,Tt,Mt){return _t[0]=Tt[0]*Mt,_t[1]=Tt[1]*Mt,_t}function d$x(_t,Tt,Mt,Pt){return _t[0]=Tt[0]+Mt[0]*Pt,_t[1]=Tt[1]+Mt[1]*Pt,_t}function m$u(_t,Tt){const Mt=Tt[0]-_t[0],Pt=Tt[1]-_t[1];return Math.sqrt(Mt*Mt+Pt*Pt)}function b$j(_t,Tt){const Mt=Tt[0]-_t[0],Pt=Tt[1]-_t[1];return Mt*Mt+Pt*Pt}function q$6(_t){const Tt=_t[0],Mt=_t[1];return Math.sqrt(Tt*Tt+Mt*Mt)}function p$H(_t){const Tt=_t[0],Mt=_t[1];return Tt*Tt+Mt*Mt}function x$f(_t,Tt){return _t[0]=-Tt[0],_t[1]=-Tt[1],_t}function g$j(_t,Tt){return _t[0]=1/Tt[0],_t[1]=1/Tt[1],_t}function v$k(_t,Tt){const Mt=Tt[0],Pt=Tt[1];let Ft=Mt*Mt+Pt*Pt;return Ft>0&&(Ft=1/Math.sqrt(Ft),_t[0]=Tt[0]*Ft,_t[1]=Tt[1]*Ft),_t}function j$g(_t,Tt){return _t[0]*Tt[0]+_t[1]*Tt[1]}function y$n(_t,Tt,Mt){const Pt=Tt[0]*Mt[1]-Tt[1]*Mt[0];return _t[0]=_t[1]=0,_t[2]=Pt,_t}function A$9(_t,Tt,Mt,Pt){const Ft=Tt[0],Dt=Tt[1];return _t[0]=Ft+Pt*(Mt[0]-Ft),_t[1]=Dt+Pt*(Mt[1]-Dt),_t}function P$5(_t,Tt){Tt=Tt||1;const Mt=2*a$2F()*Math.PI;return _t[0]=Math.cos(Mt)*Tt,_t[1]=Math.sin(Mt)*Tt,_t}function _$b(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1];return _t[0]=Mt[0]*Pt+Mt[2]*Ft,_t[1]=Mt[1]*Pt+Mt[3]*Ft,_t}function z$8(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1];return _t[0]=Mt[0]*Pt+Mt[2]*Ft+Mt[4],_t[1]=Mt[1]*Pt+Mt[3]*Ft+Mt[5],_t}function D$8(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1];return _t[0]=Mt[0]*Pt+Mt[3]*Ft+Mt[6],_t[1]=Mt[1]*Pt+Mt[4]*Ft+Mt[7],_t}function E$d(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1];return _t[0]=Mt[0]*Pt+Mt[4]*Ft+Mt[12],_t[1]=Mt[1]*Pt+Mt[5]*Ft+Mt[13],_t}function I$b(_t,Tt,Mt,Pt){const Ft=Tt[0]-Mt[0],Dt=Tt[1]-Mt[1],Nt=Math.sin(Pt),Vt=Math.cos(Pt);return _t[0]=Ft*Vt-Dt*Nt+Mt[0],_t[1]=Ft*Nt+Dt*Vt+Mt[1],_t}function L$9(_t,Tt){const Mt=_t[0],Pt=_t[1],Ft=Tt[0],Dt=Tt[1];let Nt=Mt*Mt+Pt*Pt;Nt>0&&(Nt=1/Math.sqrt(Nt));let Vt=Ft*Ft+Dt*Dt;Vt>0&&(Vt=1/Math.sqrt(Vt));const zt=(Mt*Ft+Pt*Dt)*Nt*Vt;return zt>1?0:zt<-1?Math.PI:Math.acos(zt)}function O$a(_t){return"vec2("+_t[0]+", "+_t[1]+")"}function S$9(_t,Tt){return _t[0]===Tt[0]&&_t[1]===Tt[1]}function k$8(_t,Tt){const Mt=_t[0],Pt=_t[1],Ft=Tt[0],Dt=Tt[1];return Math.abs(Mt-Ft)<=t$1M*Math.max(1,Math.abs(Mt),Math.abs(Ft))&&Math.abs(Pt-Dt)<=t$1M*Math.max(1,Math.abs(Pt),Math.abs(Dt))}function w$d(_t,Tt,Mt,Pt,Ft){let Dt=Tt[0]-Mt[0],Nt=Tt[1]-Mt[1];const Vt=(Pt[0]*Dt+Pt[1]*Nt)*(Ft-1);return Dt=Pt[0]*Vt,Nt=Pt[1]*Vt,_t[0]=Tt[0]+Dt,_t[1]=Tt[1]+Nt,_t}const B$6=q$6,C$7=o$v,F$9=u$w,G$4=e$A,H$5=m$u,J$5=b$j,K$4=p$H;Object.freeze(Object.defineProperty({__proto__:null,copy:a$K,set:r$v,add:s$z,subtract:o$v,multiply:u$w,divide:e$A,ceil:c$N,floor:i$F,min:f$m,max:M$e,round:h$w,scale:l$F,scaleAndAdd:d$x,distance:m$u,squaredDistance:b$j,length:q$6,squaredLength:p$H,negate:x$f,inverse:g$j,normalize:v$k,dot:j$g,cross:y$n,lerp:A$9,random:P$5,transformMat2:_$b,transformMat2d:z$8,transformMat3:D$8,transformMat4:E$d,rotate:I$b,angle:L$9,str:O$a,exactEquals:S$9,equals:k$8,projectAndScale:w$d,len:B$6,sub:C$7,mul:F$9,div:G$4,dist:H$5,sqrDist:J$5,sqrLen:K$4},Symbol.toStringTag,{value:"Module"}));function n$N(){return[0,0]}function t$t(_t){return[_t[0],_t[1]]}function r$u(_t,Tt){return[_t,Tt]}function e$z(_t){const Tt=n$N(),Mt=Math.min(2,_t.length);for(let Pt=0;Pt<Mt;++Pt)Tt[Pt]=_t[Pt];return Tt}function o$u(_t,Tt){return new Float64Array(_t,Tt,2)}function u$v(){return n$N()}function a$J(){return r$u(1,1)}function s$y(){return r$u(1,0)}function c$M(){return r$u(0,1)}const f$l=u$v(),i$E=a$J(),l$E=s$y(),_$a=c$M();Object.freeze(Object.defineProperty({__proto__:null,create:n$N,clone:t$t,fromValues:r$u,fromArray:e$z,createView:o$u,zeros:u$v,ones:a$J,unitX:s$y,unitY:c$M,ZEROS:f$l,ONES:i$E,UNIT_X:l$E,UNIT_Y:_$a},Symbol.toStringTag,{value:"Module"}));const Q$3=96,U$9=39.37,B$5=180/Math.PI;function D$7(_t){return _t.wkid?_t:_t.spatialReference||k$y.WGS84}function T$9(_t,Tt){return Tt.type?r$v(_t,Tt.x,Tt.y):a$K(_t,Tt)}function W$3(_t){return z$p(_t)}function H$4(_t,Tt){const Mt=Math.max(1,Tt[0]),Pt=Math.max(1,Tt[1]);return Math.max(_t.width/Mt,_t.height/Pt)*ct(_t.spatialReference)}async function J$4(_t,Tt,Mt,Pt){let Ft,Dt;if(!_t||Array.isArray(_t)&&!_t.length)return null;if(j$11.isCollection(_t)&&(_t=_t.toArray()),Array.isArray(_t)&&_t.length&&typeof _t[0]=="object"){const Vt=_t.every(Ht=>"attributes"in Ht),zt=_t.some(Ht=>!Ht.geometry);let Xt=_t;if(Vt&&zt&&Tt&&Tt.allLayerViews){const Ht=new Map;for(const Kt of _t){const er=Kt.layer,Yt=Ht.get(er)||[],rr=Kt.attributes[er.objectIdField];rr!=null&&Yt.push(rr),Ht.set(er,Yt)}const Wt=[];Ht.forEach((Kt,er)=>{const Yt=Tt.allLayerViews.find(rr=>rr.layer.id===er.id);if("queryFeatures"in Yt){const rr=er.createQuery();rr.objectIds=Kt,rr.returnGeometry=!0,Wt.push(Yt.queryFeatures(rr))}});const Qt=await Promise.all(Wt),Zt=[];for(const Kt of Qt)if(Kt&&Kt.features&&Kt.features.length)for(const er of Kt.features)r$1P(er.geometry)&&Zt.push(er.geometry);Xt=Zt}for(const Ht of Xt)Pt=await J$4(Ht,Tt,Mt,Pt);return Pt}if(Array.isArray(_t)&&_t.length===2&&typeof _t[0]=="number"&&typeof _t[1]=="number")Ft=new j$Z(_t);else if(_t instanceof p$3q)Ft=_t;else if("geometry"in _t){if(_t.geometry)Ft=_t.geometry;else if(_t.layer){const Vt=_t.layer,zt=Tt.allLayerViews.find(Xt=>Xt.layer.id===Vt.id);if("queryFeatures"in zt){const Xt=Vt.createQuery();Xt.objectIds=[_t.attributes[Vt.objectIdField]],Xt.returnGeometry=!0;const Ht=await zt.queryFeatures(Xt);Ft=m$2g(Ht,"features",0,"geometry")}}}if(t$2e(Ft)||(Dt=Ft.type==="point"?new M$K({xmin:Ft.x,ymin:Ft.y,xmax:Ft.x,ymax:Ft.y,spatialReference:Ft.spatialReference}):Ft.extent,!Dt))return null;en()||An(Dt.spatialReference,Mt)||await tn();const Nt=rn(Dt,Mt);return Nt?Pt=Pt?Pt.union(Nt):Nt:null}function K$3(_t){if(_t&&(!Array.isArray(_t)||typeof _t[0]!="number")&&(typeof _t=="object"||Array.isArray(_t)&&typeof _t[0]=="object")){if("layer"in _t&&_t.layer&&_t.layer.minScale&&_t.layer.maxScale){const Tt=_t.layer;return{min:Tt.minScale,max:Tt.maxScale}}if(Array.isArray(_t)&&_t.length&&_t.every(Tt=>"layer"in Tt)){let Tt=0,Mt=0;for(const Pt of _t){const Ft=Pt.layer;Ft&&Ft.minScale&&Ft.maxScale&&(Tt=Ft.minScale<Tt?Ft.minScale:Tt,Mt=Ft.maxScale>Mt?Ft.maxScale:Mt)}return Tt&&Mt?{min:Tt,max:Mt}:null}}}function X$3(_t,Tt){return E$G(D$7(_t),Tt)?_t:rn(_t,Tt)}async function Y$2(_t,Tt){if(!_t||!Tt)return new u$1q({targetGeometry:new j$Z,scale:0,rotation:0});let Mt=Tt.spatialReference;const{constraints:Pt,padding:Ft,viewpoint:Dt,size:Nt}=Tt,Vt=[Ft?Nt[0]-Ft.left-Ft.right:Nt[0],Ft?Nt[1]-Ft.top-Ft.bottom:Nt[1]];let zt=null;_t instanceof u$1q?zt=_t:_t.viewpoint?zt=_t.viewpoint:_t.target&&_t.target.declaredClass==="esri.Viewpoint"&&(zt=_t.target);let Xt=null;zt&&zt.targetGeometry?Xt=zt.targetGeometry:_t instanceof M$K?Xt=_t:(_t||_t&&("center"in _t||"extent"in _t||"target"in _t))&&(Xt=await J$4(_t.center,Tt,Mt)||await J$4(_t.extent,Tt,Mt)||await J$4(_t.target,Tt,Mt)||await J$4(_t,Tt,Mt)),!Xt&&Dt&&Dt.targetGeometry?Xt=Dt.targetGeometry:!Xt&&Tt.extent&&(Xt=Tt.extent),Mt||(Mt=D$7(Tt.spatialReference||Tt.extent||Xt)),en()||E$G(Xt.spatialReference,Mt)||An(Xt,Mt)||await tn();const Ht=X$3(Xt.center?Xt.center:Xt,Mt);let Wt=null;if(zt&&r$1P(zt.targetGeometry)&&zt.targetGeometry.type==="point")Wt=zt.scale;else if("scale"in _t&&_t.scale)Wt=_t.scale;else if("zoom"in _t&&_t.zoom!==-1&&Pt&&Pt.effectiveLODs)Wt=Pt.zoomToScale(_t.zoom);else if(Array.isArray(Xt)||Xt.type==="point"||Xt.type==="extent"&&Xt.width===0&&Xt.height===0){const er=X$3(Tt.extent,Mt);Wt=r$1P(er)?H$4(er,Vt):Tt.extent?H$4(Tt.extent,Vt):Dt.scale}else Wt=H$4(X$3(Xt.extent,Mt),Vt);const Qt=K$3(_t);Qt&&(Qt.min&&Qt.min>Wt?Wt=Qt.min:Qt.max&&Qt.max<Wt&&(Wt=Qt.max));let Zt=0;zt?Zt=zt.rotation:_t.hasOwnProperty("rotation")?Zt=_t.rotation:Dt&&(Zt=Dt.rotation);let Kt=new u$1q({targetGeometry:Ht,scale:Wt,rotation:Zt});return Pt&&(Kt=Pt.fit(Kt),Pt.constrainByGeometry(Kt),Pt.rotationEnabled||(Kt.rotation=Zt)),Kt}function Z$3(_t,Tt){const Mt=_t.targetGeometry,Pt=Tt.targetGeometry;return Mt.x=Pt.x,Mt.y=Pt.y,Mt.spatialReference=Pt.spatialReference,_t.scale=Tt.scale,_t.rotation=Tt.rotation,_t}function $$3(_t,Tt,Mt){return Mt?r$v(_t,.5*(Tt[0]-Mt.right+Mt.left),.5*(Tt[1]-Mt.bottom+Mt.top)):l$F(_t,Tt,.5)}const _$9=function(){const _t=n$N();return function(Tt,Mt,Pt){const Ft=Mt.targetGeometry;T$9(_t,Ft);const Dt=.5*ot(Mt);return Tt.xmin=_t[0]-Dt*Pt[0],Tt.ymin=_t[1]-Dt*Pt[1],Tt.xmax=_t[0]+Dt*Pt[0],Tt.ymax=_t[1]+Dt*Pt[1],Tt.spatialReference=Ft.spatialReference,Tt}}();function tt(_t,Tt,Mt,Pt,Ft){return xt(_t,Tt,Mt.center),_t.scale=H$4(Mt,Pt),Ft&&Ft.constraints&&Ft.constraints.constrain(_t),_t}function et(_t,Tt,Mt,Pt){return ft(_t,Tt,Mt,Pt),r$C(_t,_t)}const nt=function(){const _t=n$N();return function(Tt,Mt,Pt){return C$7(Tt,st(Tt,Mt),$$3(_t,Mt,Pt))}}(),rt=function(){const _t=e$B(),Tt=n$N();return function(Mt,Pt,Ft,Dt){const Nt=ot(Pt),Vt=it(Pt);return r$v(Tt,Nt,Nt),M$h(_t,Tt),e$G(_t,_t,Vt),i$R(_t,_t,nt(Tt,Ft,Dt)),i$R(_t,_t,[0,Dt.top-Dt.bottom]),r$v(Mt,_t[4],_t[5])}}();function ot(_t){return _t.scale*at(_t.targetGeometry)}function at(_t){return r$1P(_t)&&I$C(_t.spatialReference)?1/(W$3(_t.spatialReference)*U$9*Q$3):1}function it(_t){return o$1K(_t.rotation)||0}function ct(_t){return I$C(_t)?W$3(_t)*U$9*Q$3:1}function st(_t,Tt){return l$F(_t,Tt,.5)}const ut=function(){const _t=n$N(),Tt=n$N(),Mt=n$N();return function(Pt,Ft,Dt,Nt,Vt,zt){return x$f(_t,Ft),l$F(Tt,Dt,.5*zt),r$v(Mt,1/Nt*zt,-1/Nt*zt),f$t(Pt,Tt),Vt&&e$G(Pt,Pt,Vt),c$Z(Pt,Pt,Mt),i$R(Pt,Pt,_t),Pt}}(),ft=function(){const _t=n$N();return function(Tt,Mt,Pt,Ft){const Dt=ot(Mt),Nt=it(Mt);return T$9(_t,Mt.targetGeometry),ut(Tt,_t,Pt,Dt,Nt,Ft)}}(),lt=function(){const _t=n$N();return function(Tt,Mt,Pt,Ft){const Dt=ot(Mt);return T$9(_t,Mt.targetGeometry),ut(Tt,_t,Pt,Dt,0,Ft)}}();function mt(_t){const Tt=R$x(_t);return Tt?Tt.valid[1]-Tt.valid[0]:0}function yt(_t,Tt){return Math.round(mt(_t)/Tt)}const pt=function(){const _t=n$N(),Tt=n$N(),Mt=[0,0,0];return function(Pt,Ft,Dt){o$v(_t,Pt,Ft),v$k(_t,_t),o$v(Tt,Pt,Dt),v$k(Tt,Tt),y$n(Mt,_t,Tt);let Nt=Math.acos(j$g(_t,Tt)/(q$6(_t)*q$6(Tt)))*B$5;return Mt[2]<0&&(Nt=-Nt),isNaN(Nt)&&(Nt=0),Nt}}(),gt=function(){const _t=n$N();return function(Tt,Mt,Pt,Ft){const Dt=Tt.targetGeometry;return Z$3(Tt,Mt),rt(_t,Mt,Pt,Ft),Dt.x+=_t[0],Dt.y+=_t[1],Tt}}(),xt=function(_t,Tt,Mt){Z$3(_t,Tt);const Pt=_t.targetGeometry;return Pt.x=Mt.x,Pt.y=Mt.y,Pt.spatialReference=Mt.spatialReference,_t},ht=function(){const _t=n$N();return function(Tt,Mt,Pt,Ft,Dt){Dt||(Dt="center"),C$7(_t,Pt,Ft),l$F(_t,_t,.5);const Nt=_t[0],Vt=_t[1];switch(Dt){case"center":r$v(_t,0,0);break;case"left":r$v(_t,-Nt,0);break;case"top":r$v(_t,0,Vt);break;case"right":r$v(_t,Nt,0);break;case"bottom":r$v(_t,0,-Vt);break;case"top-left":r$v(_t,-Nt,Vt);break;case"bottom-left":r$v(_t,-Nt,-Vt);break;case"top-right":r$v(_t,Nt,Vt);break;case"bottom-right":r$v(_t,Nt,-Vt)}return St(Tt,Mt,_t),Tt}}();function bt(_t,Tt,Mt){return Z$3(_t,Tt),_t.rotation+=Mt,_t}function wt(_t,Tt,Mt){return Z$3(_t,Tt),_t.rotation=Mt,_t}const dt=function(){const _t=n$N();return function(Tt,Mt,Pt,Ft,Dt){return Z$3(Tt,Mt),isNaN(Pt)||Pt===0||(kt(_t,Ft,Mt,Dt),Tt.scale=Mt.scale*Pt,At(_t,_t,Tt,Dt),St(Tt,Tt,r$v(_t,_t[0]-Ft[0],Ft[1]-_t[1]))),Tt}}();function jt(_t,Tt,Mt){return Z$3(_t,Tt),_t.scale=Mt,_t}const Gt=function(){const _t=n$N();return function(Tt,Mt,Pt,Ft,Dt,Nt){return Z$3(Tt,Mt),isNaN(Pt)||Pt===0||(kt(_t,Dt,Mt,Nt),Tt.scale=Mt.scale*Pt,Tt.rotation+=Ft,At(_t,_t,Tt,Nt),St(Tt,Tt,r$v(_t,_t[0]-Dt[0],Dt[1]-_t[1]))),Tt}}(),Rt=function(){const _t=n$N(),Tt=n$N();return function(Mt,Pt,Ft,Dt,Nt,Vt,zt){return nt(Tt,Vt,zt),s$z(_t,Nt,Tt),Dt?Gt(Mt,Pt,Ft,Dt,_t,Vt):dt(Mt,Pt,Ft,_t,Vt)}}(),kt=function(){const _t=e$B();return function(Tt,Mt,Pt,Ft){return z$8(Tt,Mt,et(_t,Pt,Ft,1))}}(),At=function(){const _t=e$B();return function(Tt,Mt,Pt,Ft){return z$8(Tt,Mt,ft(_t,Pt,Ft,1))}}(),St=function(){const _t=n$N(),Tt=e$B();return function(Mt,Pt,Ft){Z$3(Mt,Pt);const Dt=ot(Pt),Nt=Mt.targetGeometry;return h$C(Tt,it(Pt)),c$Z(Tt,Tt,r$u(Dt,Dt)),z$8(_t,Ft,Tt),Nt.x+=_t[0],Nt.y+=_t[1],Mt}}();class m$t{constructor(Tt,Mt,Pt,Ft){const Dt=Tt.targetGeometry,Nt=Mt.targetGeometry;Ft?typeof Ft=="string"&&(Ft=r$x(Ft)||t$v.ease):Ft=t$v.ease,this.easing=Ft,this.duration=Pt,this.sCenterX=Dt.x,this.sCenterY=Dt.y,this.sScale=Tt.scale,this.sRotation=Tt.rotation,this.tCenterX=Nt.x,this.tCenterY=Nt.y,this.tScale=Mt.scale,this.tRotation=Mt.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(Tt,Mt){const Pt=this.easing(Mt);let Ft,Dt,Nt,Vt;Mt>=1?(Ft=this.tCenterX,Dt=this.tCenterY,Nt=this.tRotation,Vt=this.tScale):(Ft=this.sCenterX+Pt*this.dCenterX,Dt=this.sCenterY+Pt*this.dCenterY,Nt=this.sRotation+Pt*this.dRotation,Vt=this.sScale+Pt*this.dScale),Tt.targetGeometry.x=Ft,Tt.targetGeometry.y=Dt,Tt.scale=Vt,Tt.rotation=Nt}}let u$u=class extends y$1E{constructor(_t){super(_t),this.duration=200,this.transition=null,this.easing=t$v.ease,this.view=null,this.viewpoint=null,this.viewpoint=new u$1q({targetGeometry:new j$Z,scale:0,rotation:0}),this._updateTask=A$B({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(_t,Tt,Mt){this.stop();const Pt=this.viewpoint;Z$3(Pt,Tt),this.transition=new m$t(this.viewpoint,_t.target,Mt&&Mt.duration||this.duration,Mt&&Mt.easing||this.easing);const Ft=()=>{this.animation===_t&&this._updateTask&&(_t.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return _t.when(Ft,Ft),this._startTime=performance.now(),this._updateTask.resume(),this.animation=_t,_t}animateContinous(_t,Tt){this.stop(),this.updateFunction=Tt,this.viewpoint=_t;const Mt=new n$Q({target:_t.clone()}),Pt=()=>{this.animation===Mt&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return Mt.when(Pt,Pt),this._startTime=performance.now(),this._updateTask.resume(),this.animation=Mt,Mt}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(_t){const Tt=this.animation;if(Tt&&Tt.state!==n$Q.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,_t.deltaTime);else{const Mt=(performance.now()-this._startTime)/this.transition.duration,Pt=Mt>=1;this.transition.applyRatio(this.viewpoint,Mt),Pt&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};e$2a([d$25()],u$u.prototype,"animation",void 0),e$2a([d$25()],u$u.prototype,"duration",void 0),e$2a([d$25()],u$u.prototype,"transition",void 0),e$2a([d$25()],u$u.prototype,"easing",void 0),e$2a([d$25()],u$u.prototype,"view",void 0),e$2a([d$25()],u$u.prototype,"viewpoint",void 0),u$u=e$2a([n$2L("esri.views.2d.AnimationManager")],u$u);const d$w=u$u;class s$x{constructor(Tt){this.view=Tt,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:Mt,graphicsView:Pt,labelManager:Ft,layerViews:Dt,state:{id:Nt}}=this.view;Mt.baseLayerViews.forEach(this._updateLayerView,this),Dt.forEach(this._updateLayerView,this),Mt.referenceLayerViews.forEach(this._updateLayerView,this),r$1P(Ft)&&(Ft.lastUpdateId!==Nt&&(Ft.viewChange(),Ft.lastUpdateId=Nt),Ft.updateRequested&&Ft.processUpdate(this._updateParameters)),r$1P(Pt)&&(Pt.lastUpdateId!==Nt&&(Pt.viewChange(),Pt.lastUpdateId=Nt),Pt.updateRequested&&Pt.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const Tt=this.view;this.stationary=Tt.stationary,this._updateParameters={state:Tt.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:Tt.renderingOptions},this._stationaryHandle=l$2e(()=>Tt.stationary,Mt=>{this.stationary=Mt,this.requestFrame()}),this._frameTaskHandle=A$B(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(Tt){const Mt=this.view.state,Pt=Tt.lastUpdateId;Pt!=null&&(this.stationary||Tt.moving)||(Tt.moving=!0,Tt.moveStart()),Pt!==Mt.id&&Tt.viewChange(),this.stationary&&Tt.moving&&(Tt.moving=!1,Tt.moveEnd()),Tt.lastUpdateId=Mt.id,Tt.updateRequested&&Tt.processUpdate(this._updateParameters),"layerViews"in Tt&&Tt.layerViews.forEach(this._updateLayerView,this)}}function s$w(){return Promise.all([__vitePreload(()=>import("./webglDeps.be882777.js"),["assets/webglDeps.be882777.js","assets/VertexArrayObject.b7add78f.js","assets/Texture.7634927e.js","assets/enums.de935fa5.js","assets/ProgramTemplate.a2b1ea90.js","assets/programUtils.75c264d9.js","assets/NestedMap.21c7ee53.js"]),__vitePreload(()=>import("./mapViewDeps.2f5f4549.js"),["assets/mapViewDeps.2f5f4549.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/enums.05a6ea95.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/number.08b65821.js","assets/GeometryUtils.814cb798.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/VertexArrayObject.b7add78f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/enums.2a1fad7f.js","assets/programUtils.75c264d9.js","assets/NestedMap.21c7ee53.js","assets/Rasterizer.2859baa8.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/_commonjsHelpers.01f5fe30.js","assets/imageutils.0a7b9b7f.js","assets/Matcher.336089a0.js","assets/visualVariablesUtils.53aa19cb.js","assets/visualVariablesUtils.baa0fa5a.js","assets/tileUtils.a9ad5e9f.js","assets/TileClipper.99759c1f.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.b6786c8d.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/CircularArray.c3ac6658.js","assets/requestImageUtils.16628477.js","assets/ComputedAttributeStorage.11eabc3d.js","assets/centroid.296f6ecc.js","assets/BaseGraphicContainer.4e263d20.js","assets/normalizeUtilsSync.ca14d31b.js","assets/FeatureContainer.dae5c06c.js","assets/TileContainer.16d059f5.js","assets/schemaUtils.d87fe48b.js","assets/createSymbolSchema.2d8e0797.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/vec3f32.0772c8d8.js","assets/GraphicContainer.49102c35.js"])])}const a$I=()=>s$w().then(()=>__vitePreload(()=>import("./TileLayerView2D.1f2d112a.js"),["assets/TileLayerView2D.1f2d112a.js","assets/imageUtils.92c7006d.js","assets/BitmapTileContainer.da95e958.js","assets/Bitmap.a95cf8d5.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/TileContainer.16d059f5.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/VertexArrayObject.b7add78f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js"])),i$D=()=>s$w().then(()=>__vitePreload(()=>import("./FeatureLayerView2D.db2ee41c.js"),["assets/FeatureLayerView2D.db2ee41c.js","assets/EffectView.d573d8e0.js","assets/definitions.6dca4f7b.js","assets/LayerView2D.9ada509f.js","assets/utils.88e80f44.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/schemaUtils.d87fe48b.js","assets/visualVariablesUtils.baa0fa5a.js","assets/createSymbolSchema.2d8e0797.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.285f0701.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js"])),o$t={"base-dynamic":()=>s$w().then(()=>__vitePreload(()=>import("./BaseDynamicLayerView2D.08e602a6.js"),["assets/BaseDynamicLayerView2D.08e602a6.js","assets/BitmapContainer.03cf357d.js","assets/WGLContainer.3dee497f.js","assets/enums.de935fa5.js","assets/pixelUtils.2d74e066.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/VertexArrayObject.b7add78f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/ExportStrategy.a042f3e1.js","assets/Bitmap.a95cf8d5.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js"])),"base-tile":a$I,"bing-maps":a$I,csv:i$D,"geo-rss":()=>s$w().then(()=>__vitePreload(()=>import("./GeoRSSLayerView2D.c0563e75.js"),["assets/GeoRSSLayerView2D.c0563e75.js","assets/LayerView2D.9ada509f.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/GraphicContainer.49102c35.js","assets/BaseGraphicContainer.4e263d20.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.ca14d31b.js","assets/VertexArrayObject.b7add78f.js","assets/FeatureContainer.dae5c06c.js","assets/TileContainer.16d059f5.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.53aa19cb.js","assets/visualVariablesUtils.baa0fa5a.js","assets/Matcher.336089a0.js","assets/tileUtils.a9ad5e9f.js","assets/TileClipper.99759c1f.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d87fe48b.js","assets/createSymbolSchema.2d8e0797.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/ComputedAttributeStorage.11eabc3d.js","assets/centroid.296f6ecc.js","assets/vec3f32.0772c8d8.js","assets/LayerView.5d769fe2.js"])),feature:i$D,geojson:i$D,graphics:()=>s$w().then(()=>__vitePreload(()=>import("./GraphicsLayerView2D.3c450f17.js"),["assets/GraphicsLayerView2D.3c450f17.js","assets/LayerView2D.9ada509f.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/GraphicContainer.49102c35.js","assets/BaseGraphicContainer.4e263d20.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.ca14d31b.js","assets/VertexArrayObject.b7add78f.js","assets/FeatureContainer.dae5c06c.js","assets/TileContainer.16d059f5.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.53aa19cb.js","assets/visualVariablesUtils.baa0fa5a.js","assets/Matcher.336089a0.js","assets/tileUtils.a9ad5e9f.js","assets/TileClipper.99759c1f.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d87fe48b.js","assets/createSymbolSchema.2d8e0797.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/ComputedAttributeStorage.11eabc3d.js","assets/centroid.296f6ecc.js","assets/vec3f32.0772c8d8.js","assets/LayerView.5d769fe2.js"])),group:()=>s$w().then(()=>__vitePreload(()=>import("./GroupLayerView2D.2e9fc3b4.js"),["assets/GroupLayerView2D.2e9fc3b4.js","assets/GroupContainer.bf36251e.js","assets/WGLContainer.3dee497f.js","assets/enums.de935fa5.js","assets/pixelUtils.2d74e066.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/VertexArrayObject.b7add78f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/LayerView.5d769fe2.js"])),imagery:()=>s$w().then(()=>__vitePreload(()=>import("./ImageryLayerView2D.07c7ce46.js"),["assets/ImageryLayerView2D.07c7ce46.js","assets/RasterVFDisplayObject.7d7df0ba.js","assets/VertexArrayObject.b7add78f.js","assets/Texture.7634927e.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/dataUtils.9bc596a4.js","assets/pixelUtils.2d74e066.js","assets/WGLContainer.3dee497f.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/BaseGraphicContainer.4e263d20.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.ca14d31b.js","assets/FeatureContainer.dae5c06c.js","assets/TileContainer.16d059f5.js","assets/visualVariablesUtils.53aa19cb.js","assets/visualVariablesUtils.baa0fa5a.js","assets/Matcher.336089a0.js","assets/tileUtils.a9ad5e9f.js","assets/TileClipper.99759c1f.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d87fe48b.js","assets/createSymbolSchema.2d8e0797.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/ComputedAttributeStorage.11eabc3d.js","assets/centroid.296f6ecc.js","assets/vec3f32.0772c8d8.js","assets/HighlightGraphicContainer.e26264c2.js","assets/BitmapContainer.03cf357d.js","assets/Bitmap.a95cf8d5.js","assets/ExportStrategy.a042f3e1.js","assets/rasterProjectionHelper.074b5fd5.js","assets/popupUtils.285f0701.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js"])),"imagery-tile":()=>s$w().then(()=>__vitePreload(()=>import("./ImageryTileLayerView2D.e1d5fb76.js"),["assets/ImageryTileLayerView2D.e1d5fb76.js","assets/RasterVFDisplayObject.7d7df0ba.js","assets/VertexArrayObject.b7add78f.js","assets/Texture.7634927e.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/dataUtils.9bc596a4.js","assets/pixelUtils.2d74e066.js","assets/WGLContainer.3dee497f.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/TileContainer.16d059f5.js","assets/RawBlockCache.4952228a.js","assets/rasterProjectionHelper.074b5fd5.js","assets/util.7bf54bbf.js","assets/popupUtils.285f0701.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js"])),kml:()=>s$w().then(()=>__vitePreload(()=>import("./KMLLayerView2D.d67e2571.js"),["assets/KMLLayerView2D.d67e2571.js","assets/kmlUtils.cb1b4138.js","assets/Bitmap.a95cf8d5.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/BitmapContainer.03cf357d.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/VertexArrayObject.b7add78f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/GraphicContainer.49102c35.js","assets/BaseGraphicContainer.4e263d20.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.ca14d31b.js","assets/FeatureContainer.dae5c06c.js","assets/TileContainer.16d059f5.js","assets/visualVariablesUtils.53aa19cb.js","assets/visualVariablesUtils.baa0fa5a.js","assets/Matcher.336089a0.js","assets/tileUtils.a9ad5e9f.js","assets/TileClipper.99759c1f.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d87fe48b.js","assets/createSymbolSchema.2d8e0797.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/ComputedAttributeStorage.11eabc3d.js","assets/centroid.296f6ecc.js","assets/vec3f32.0772c8d8.js","assets/LayerView.5d769fe2.js"])),"map-image":()=>s$w().then(()=>__vitePreload(()=>import("./MapImageLayerView2D.129d3357.js"),["assets/MapImageLayerView2D.129d3357.js","assets/BitmapContainer.03cf357d.js","assets/WGLContainer.3dee497f.js","assets/enums.de935fa5.js","assets/pixelUtils.2d74e066.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/VertexArrayObject.b7add78f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/BaseGraphicContainer.4e263d20.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.ca14d31b.js","assets/FeatureContainer.dae5c06c.js","assets/TileContainer.16d059f5.js","assets/visualVariablesUtils.53aa19cb.js","assets/visualVariablesUtils.baa0fa5a.js","assets/Matcher.336089a0.js","assets/tileUtils.a9ad5e9f.js","assets/TileClipper.99759c1f.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d87fe48b.js","assets/createSymbolSchema.2d8e0797.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/ComputedAttributeStorage.11eabc3d.js","assets/centroid.296f6ecc.js","assets/vec3f32.0772c8d8.js","assets/HighlightGraphicContainer.e26264c2.js","assets/ExportStrategy.a042f3e1.js","assets/Bitmap.a95cf8d5.js","assets/LayerView.5d769fe2.js","assets/ExportImageParameters.21510e73.js","assets/floorFilterUtils.69500d62.js","assets/sublayerUtils.6d16b5d3.js","assets/popupUtils.285f0701.js","assets/RefreshableLayerView.1b2a9213.js"])),"map-notes":()=>s$w().then(()=>__vitePreload(()=>import("./MapNotesLayerView2D.f20f7cb4.js"),["assets/MapNotesLayerView2D.f20f7cb4.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/GroupContainer.bf36251e.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/VertexArrayObject.b7add78f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/GraphicContainer.49102c35.js","assets/BaseGraphicContainer.4e263d20.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.ca14d31b.js","assets/FeatureContainer.dae5c06c.js","assets/TileContainer.16d059f5.js","assets/visualVariablesUtils.53aa19cb.js","assets/visualVariablesUtils.baa0fa5a.js","assets/Matcher.336089a0.js","assets/tileUtils.a9ad5e9f.js","assets/TileClipper.99759c1f.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d87fe48b.js","assets/createSymbolSchema.2d8e0797.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/ComputedAttributeStorage.11eabc3d.js","assets/centroid.296f6ecc.js","assets/vec3f32.0772c8d8.js","assets/LayerView.5d769fe2.js"])),media:()=>s$w().then(()=>__vitePreload(()=>import("./MediaLayerView2D.5b262b83.js"),["assets/MediaLayerView2D.5b262b83.js","assets/normalizeUtilsSync.ca14d31b.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/VertexArrayObject.b7add78f.js","assets/vec3f32.0772c8d8.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/LayerView.5d769fe2.js"])),"ogc-feature":()=>s$w().then(()=>__vitePreload(()=>import("./OGCFeatureLayerView2D.3d58a9ac.js"),["assets/OGCFeatureLayerView2D.3d58a9ac.js","assets/FeatureLayerView2D.db2ee41c.js","assets/EffectView.d573d8e0.js","assets/definitions.6dca4f7b.js","assets/LayerView2D.9ada509f.js","assets/utils.88e80f44.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/schemaUtils.d87fe48b.js","assets/visualVariablesUtils.baa0fa5a.js","assets/createSymbolSchema.2d8e0797.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.285f0701.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js"])),"open-street-map":a$I,route:()=>s$w().then(()=>__vitePreload(()=>import("./RouteLayerView2D.ef486637.js"),["assets/RouteLayerView2D.ef486637.js","assets/Stop.a21d58f2.js","assets/LayerView2D.9ada509f.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/GraphicContainer.49102c35.js","assets/BaseGraphicContainer.4e263d20.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/normalizeUtilsSync.ca14d31b.js","assets/VertexArrayObject.b7add78f.js","assets/FeatureContainer.dae5c06c.js","assets/TileContainer.16d059f5.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/visualVariablesUtils.53aa19cb.js","assets/visualVariablesUtils.baa0fa5a.js","assets/Matcher.336089a0.js","assets/tileUtils.a9ad5e9f.js","assets/TileClipper.99759c1f.js","assets/Geometry.b68345ae.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/schemaUtils.d87fe48b.js","assets/createSymbolSchema.2d8e0797.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/ComputedAttributeStorage.11eabc3d.js","assets/centroid.296f6ecc.js","assets/vec3f32.0772c8d8.js","assets/LayerView.5d769fe2.js"])),stream:()=>s$w().then(()=>__vitePreload(()=>import("./StreamLayerView2D.7e8c82c2.js"),["assets/StreamLayerView2D.7e8c82c2.js","assets/FeatureLayerView2D.db2ee41c.js","assets/EffectView.d573d8e0.js","assets/definitions.6dca4f7b.js","assets/LayerView2D.9ada509f.js","assets/utils.88e80f44.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/schemaUtils.d87fe48b.js","assets/visualVariablesUtils.baa0fa5a.js","assets/createSymbolSchema.2d8e0797.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.285f0701.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js"])),"subtype-group":()=>s$w().then(()=>__vitePreload(()=>import("./SubtypeGroupLayerView2D.75e6aa59.js"),["assets/SubtypeGroupLayerView2D.75e6aa59.js","assets/FeatureLayerView2D.db2ee41c.js","assets/EffectView.d573d8e0.js","assets/definitions.6dca4f7b.js","assets/LayerView2D.9ada509f.js","assets/utils.88e80f44.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/schemaUtils.d87fe48b.js","assets/visualVariablesUtils.baa0fa5a.js","assets/createSymbolSchema.2d8e0797.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/GeometryUtils.814cb798.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/ExpandedCIM.b6786c8d.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/floorFilterUtils.69500d62.js","assets/popupUtils.285f0701.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js"])),tile:a$I,"vector-tile":()=>s$w().then(()=>__vitePreload(()=>import("./VectorTileLayerView2D.4535f728.js"),["assets/VectorTileLayerView2D.4535f728.js","assets/enums.2a1fad7f.js","assets/BidiEngine.ec67919b.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/CIMSymbolHelper.ae274396.js","assets/floatRGBA.5328f61e.js","assets/enums.05a6ea95.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/number.08b65821.js","assets/GeometryUtils.814cb798.js","assets/VertexArrayObject.b7add78f.js","assets/config.40d47db8.js","assets/TileContainer.16d059f5.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/StyleRepository.63d84b8c.js","assets/Geometry.b68345ae.js","assets/LayerView2D.9ada509f.js","assets/Bitmap.a95cf8d5.js","assets/BitmapContainer.03cf357d.js","assets/LayerView.5d769fe2.js"])),wcs:()=>s$w().then(()=>__vitePreload(()=>import("./ImageryTileLayerView2D.e1d5fb76.js"),["assets/ImageryTileLayerView2D.e1d5fb76.js","assets/RasterVFDisplayObject.7d7df0ba.js","assets/VertexArrayObject.b7add78f.js","assets/Texture.7634927e.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/dataUtils.9bc596a4.js","assets/pixelUtils.2d74e066.js","assets/WGLContainer.3dee497f.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/TileContainer.16d059f5.js","assets/RawBlockCache.4952228a.js","assets/rasterProjectionHelper.074b5fd5.js","assets/util.7bf54bbf.js","assets/popupUtils.285f0701.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js"])),"web-tile":a$I,wfs:i$D,wms:()=>s$w().then(()=>__vitePreload(()=>import("./WMSLayerView2D.1fc6476b.js"),["assets/WMSLayerView2D.1fc6476b.js","assets/BitmapContainer.03cf357d.js","assets/WGLContainer.3dee497f.js","assets/enums.de935fa5.js","assets/pixelUtils.2d74e066.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/VertexArrayObject.b7add78f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/ExportStrategy.a042f3e1.js","assets/Bitmap.a95cf8d5.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js","assets/ExportWMSImageParameters.8abf56fe.js"])),wmts:()=>s$w().then(()=>__vitePreload(()=>import("./WMTSLayerView2D.682a53cd.js"),["assets/WMTSLayerView2D.682a53cd.js","assets/imageUtils.92c7006d.js","assets/BitmapTileContainer.da95e958.js","assets/Bitmap.a95cf8d5.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/number.08b65821.js","assets/enums.05a6ea95.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/TileContainer.16d059f5.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/VertexArrayObject.b7add78f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/LayerView2D.9ada509f.js","assets/LayerView.5d769fe2.js","assets/RefreshableLayerView.1b2a9213.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function l$D(_t){const Tt=_t.declaredClass?_t.declaredClass.slice(_t.declaredClass.lastIndexOf(".")+1):"Unknown",Mt=Tt.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new s$2i(`${Mt}:view-not-supported`,`${Tt} is not supported in 2D`)}const n$M={hasLayerViewModule:_t=>r$1P(o$t[_t.type]),importLayerView:_t=>{const Tt=o$t[_t.type];if(t$2e(Tt))throw l$D(_t);return Tt(_t)}};function o$s(_t,Tt){const{spatialReference:Mt}=Tt,Pt=[Tt.x,Tt.y];let Ft=Number.POSITIVE_INFINITY,Dt=0,Nt=0;const Vt=[0,0],zt=_t.type==="extent"?[[[_t.xmin,_t.ymin],[_t.xmin,_t.ymax],[_t.xmax,_t.ymax],[_t.xmax,_t.ymin],[_t.xmin,_t.ymin]]]:_t.rings;for(const Xt of zt)for(let Ht=0;Ht<Xt.length-1;Ht++){o$1E(Vt,Pt,Xt,Ht);const Wt=m$u(Pt,Vt);Wt<Ft&&(Ft=Wt,Dt=Vt[0],Nt=Vt[1])}return{coordinate:new j$Z({x:Dt,y:Nt,spatialReference:Mt}),distance:Ft}}var p$G;const l$C=s$2l.getLogger("esri.views.MapView");let y$m=p$G=class extends y$1E{constructor(_t){super(_t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(t$2e(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return rn(this.geometry,this.spatialReference)}catch(_t){return l$C.error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:_t}),null}return this.geometry}constrain(_t,Tt){if(t$2e(this.normalizedGeometry))return _t;const Mt=_t.targetGeometry;if(this.normalizedGeometry.type==="extent"?r$1y(this.normalizedGeometry,Mt):c$34(this.normalizedGeometry,Mt))return _t;const{coordinate:Pt}=o$s(this.normalizedGeometry,Mt);return Pt&&(_t.targetGeometry=Pt),_t}clone(){var _t,Tt;return new p$G({geometry:(_t=this.geometry)==null?void 0:_t.clone(),spatialReference:(Tt=this.spatialReference)==null?void 0:Tt.clone()})}};e$2a([d$25({constructOnly:!0})],y$m.prototype,"geometry",void 0),e$2a([d$25({readOnly:!0})],y$m.prototype,"normalizedGeometry",null),e$2a([d$25({constructOnly:!0})],y$m.prototype,"spatialReference",void 0),y$m=p$G=e$2a([n$2L("esri.views.2d.constraints.GeometryConstraint")],y$m);var s$v;let a$H=s$v=class extends y$1E{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(_t,Tt){return this.enabled&&Tt&&(this.rotationEnabled||(_t.rotation=Tt.rotation)),_t}clone(){return new s$v({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};e$2a([d$25()],a$H.prototype,"enabled",void 0),e$2a([d$25()],a$H.prototype,"rotationEnabled",void 0),a$H=s$v=e$2a([n$2L("esri.views.2d.constraints.RotationConstraint")],a$H);const n$L=a$H;var i$C;let a$G=i$C=class extends y$1E{constructor(_t){super(_t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let _t,{lods:Tt,minScale:Mt,maxScale:Pt,minZoom:Ft,maxZoom:Dt}=this,Nt=-1,Vt=-1,zt=!1,Xt=!1;if(Mt!==0&&Pt!==0&&Mt<Pt&&([Mt,Pt]=[Pt,Mt]),!Tt||!Tt.length)return this._set("effectiveMinScale",Mt),void this._set("effectiveMaxScale",Pt);Tt=Tt.map(Ht=>Ht.clone()),Tt.sort((Ht,Wt)=>Wt.scale-Ht.scale),Tt.forEach((Ht,Wt)=>Ht.level=Wt);for(const Ht of Tt)!zt&&Mt>0&&Mt>=Ht.scale&&(Nt=Ht.level,zt=!0),!Xt&&Pt>0&&Pt>=Ht.scale&&(Vt=_t?_t.level:-1,Xt=!0),_t=Ht;Ft===-1&&(Ft=Mt===0?0:Nt),Dt===-1&&(Dt=Pt===0?Tt.length-1:Vt),Ft=Math.max(Ft,0),Ft=Math.min(Ft,Tt.length-1),Dt=Math.max(Dt,0),Dt=Math.min(Dt,Tt.length-1),Ft>Dt&&([Ft,Dt]=[Dt,Ft]),Mt=Tt[Ft].scale,Pt=Tt[Dt].scale,Tt.splice(0,Ft),Tt.splice(Dt-Ft+1,Tt.length),Tt.forEach((Ht,Wt)=>{this._lodByScale[Ht.scale]=Ht,this._scales[Wt]=Ht.scale}),this._set("effectiveLODs",Tt),this._set("effectiveMinZoom",Ft),this._set("effectiveMaxZoom",Dt),this._set("effectiveMinScale",Mt),this._set("effectiveMaxScale",Pt)}constrain(_t,Tt){if(Tt&&_t.scale===Tt.scale)return _t;const Mt=this.effectiveMinScale,Pt=this.effectiveMaxScale,Ft=_t.targetGeometry,Dt=Tt&&Tt.targetGeometry,Nt=Pt!==0&&_t.scale<Pt,Vt=Mt!==0&&_t.scale>Mt;if(Nt||Vt){const zt=Vt?Mt:Pt;if(Dt){const Xt=(zt-Tt.scale)/(_t.scale-Tt.scale);Ft.x=Dt.x+(Ft.x-Dt.x)*Xt,Ft.y=Dt.y+(Ft.y-Dt.y)*Xt}_t.scale=zt}return this.snapToZoom&&this.effectiveLODs&&(_t.scale=this._getClosestScale(_t.scale)),_t}fit(_t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(_t,null);const Tt=this.scaleToZoom(_t.scale),Mt=Math.abs(Tt-Math.floor(Tt));return _t.scale=this.zoomToScale(Mt>.99?Math.round(Tt):Math.floor(Tt)),_t}zoomToScale(_t){if(!this.effectiveLODs)return 0;_t-=this.effectiveMinZoom,_t=Math.max(0,_t);const Tt=this._scales;if(_t<=0)return Tt[0];if(_t>=Tt.length)return Tt[Tt.length-1];const Mt=Math.round(_t-.5),Pt=Math.round(_t);return Tt[Pt]+(Pt-_t)*(Tt[Mt]-Tt[Pt])}scaleToZoom(_t){if(!this.effectiveLODs)return-1;const Tt=this._scales;let Mt,Pt;if(_t>=Tt[0])return this.effectiveMinZoom;if(_t<=Tt[Tt.length-1])return this.effectiveMaxZoom;for(let Ft=0;Ft<Tt.length-1;Ft++){if(Mt=Tt[Ft],Pt=Tt[Ft+1],Pt===_t)return Ft+this.effectiveMinZoom+1;if(Mt>_t&&Pt<_t)return Ft+this.effectiveMinZoom+1-(_t-Pt)/(Mt-Pt)}}snapToClosestScale(_t){if(!this.effectiveLODs)return _t;const Tt=this.scaleToZoom(_t);return this.zoomToScale(Math.round(Tt))}snapToNextScale(_t,Tt=.5){if(!this.effectiveLODs)return _t*Tt;const Mt=Math.round(this.scaleToZoom(_t));return this.zoomToScale(Mt+1)}snapToPreviousScale(_t,Tt=2){if(!this.effectiveLODs)return _t*Tt;const Mt=Math.round(this.scaleToZoom(_t));return this.zoomToScale(Mt-1)}clone(){return new i$C({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(_t){return this._lodByScale[_t]||(_t=this._scales.reduce((Tt,Mt)=>Math.abs(Mt-_t)<=Math.abs(Tt-_t)?Mt:Tt,this._scales[0])),this._lodByScale[_t].scale}};e$2a([d$25({readOnly:!0})],a$G.prototype,"effectiveLODs",void 0),e$2a([d$25({readOnly:!0})],a$G.prototype,"effectiveMinZoom",void 0),e$2a([d$25({readOnly:!0})],a$G.prototype,"effectiveMaxZoom",void 0),e$2a([d$25({readOnly:!0})],a$G.prototype,"effectiveMinScale",void 0),e$2a([d$25({readOnly:!0})],a$G.prototype,"effectiveMaxScale",void 0),e$2a([d$25()],a$G.prototype,"lods",void 0),e$2a([d$25()],a$G.prototype,"minZoom",void 0),e$2a([d$25()],a$G.prototype,"maxZoom",void 0),e$2a([d$25()],a$G.prototype,"minScale",void 0),e$2a([d$25()],a$G.prototype,"maxScale",void 0),e$2a([d$25()],a$G.prototype,"snapToZoom",void 0),a$G=i$C=e$2a([n$2L("esri.views.2d.constraints.ZoomConstraint")],a$G);const c$L=a$G,p$F={base:null,key:"type",typeMap:{extent:M$K,polygon:v$V}};let c$K=class extends y$1E{constructor(_t){super(_t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null),this._set("_geometry",null)}set geometry(_t){_t?this._set("geometry",_t):this._set("geometry",null)}get version(){var _t;return this.commitProperty("_zoom"),this.commitProperty("_rotation"),this.commitProperty("_geometry"),((_t=this._get("version"))!=null?_t:0)+1}get _defaultLODs(){var Mt,Pt,Ft;const _t=(Pt=(Mt=this.view)==null?void 0:Mt.defaultsFromMap)==null?void 0:Pt.tileInfo,Tt=(Ft=this.view)==null?void 0:Ft.spatialReference;return _t&&Tt&&_t.spatialReference.equals(Tt)?_t.lods:null}get _geometry(){var _t;return new y$m({geometry:this.geometry,spatialReference:(_t=this.view)==null?void 0:_t.spatialReference})}get _rotation(){return new n$L({rotationEnabled:this.rotationEnabled})}get _zoom(){const _t=this._get("_zoom"),Tt=this.lods||this._defaultLODs,Mt=this.minZoom,Pt=this.maxZoom,Ft=this.minScale,Dt=this.maxScale,Nt=this.snapToZoom;return _t&&_t.lods===Tt&&_t.minZoom===Mt&&_t.maxZoom===Pt&&_t.minScale===Ft&&_t.maxScale===Dt&&_t.snapToZoom===Nt?_t:new c$L({lods:Tt,minZoom:Mt,maxZoom:Pt,minScale:Ft,maxScale:Dt,snapToZoom:Nt})}canZoomInTo(_t){const Tt=this.effectiveMaxScale;return Tt===0||_t>=Tt}canZoomOutTo(_t){const Tt=this.effectiveMinScale;return Tt===0||_t<=Tt}constrain(_t,Tt){return this._zoom.constrain(_t,Tt),this._rotation.constrain(_t,Tt),this._geometry.constrain(_t,Tt),_t}constrainByGeometry(_t){return this._geometry.constrain(_t)}fit(_t){return this._zoom.fit(_t)}zoomToScale(_t){return this._zoom.zoomToScale(_t)}scaleToZoom(_t){return this._zoom.scaleToZoom(_t)}snapScale(_t){return this._zoom.snapToClosestScale(_t)}snapToNextScale(_t){return this._zoom.snapToNextScale(_t)}snapToPreviousScale(_t){return this._zoom.snapToPreviousScale(_t)}};e$2a([d$25({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],c$K.prototype,"effectiveLODs",void 0),e$2a([d$25({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],c$K.prototype,"effectiveMinScale",void 0),e$2a([d$25({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],c$K.prototype,"effectiveMaxScale",void 0),e$2a([d$25({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],c$K.prototype,"effectiveMinZoom",void 0),e$2a([d$25({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],c$K.prototype,"effectiveMaxZoom",void 0),e$2a([d$25({types:p$F,value:null})],c$K.prototype,"geometry",null),e$2a([d$25({type:[p$2m]})],c$K.prototype,"lods",void 0),e$2a([d$25()],c$K.prototype,"minScale",void 0),e$2a([d$25()],c$K.prototype,"maxScale",void 0),e$2a([d$25()],c$K.prototype,"minZoom",void 0),e$2a([d$25()],c$K.prototype,"maxZoom",void 0),e$2a([d$25()],c$K.prototype,"rotationEnabled",void 0),e$2a([d$25()],c$K.prototype,"snapToZoom",void 0),e$2a([d$25()],c$K.prototype,"view",void 0),e$2a([d$25({readOnly:!0})],c$K.prototype,"version",null),e$2a([d$25()],c$K.prototype,"_defaultLODs",null),e$2a([d$25({type:y$m})],c$K.prototype,"_geometry",null),e$2a([d$25({type:n$L})],c$K.prototype,"_rotation",null),e$2a([d$25({readOnly:!0,type:c$L})],c$K.prototype,"_zoom",null),c$K=e$2a([n$2L("esri.views.2d.MapViewConstraints")],c$K);const y$l=c$K;function a$F(_t,Tt){return _t[0]=Tt[0],_t[1]=Tt[1],_t[2]=Tt[2],_t[3]=Tt[4],_t[4]=Tt[5],_t[5]=Tt[6],_t[6]=Tt[8],_t[7]=Tt[9],_t[8]=Tt[10],_t}function n$K(_t,Tt){return _t[0]=Tt[0],_t[1]=Tt[1],_t[2]=Tt[2],_t[3]=Tt[3],_t[4]=Tt[4],_t[5]=Tt[5],_t[6]=Tt[6],_t[7]=Tt[7],_t[8]=Tt[8],_t}function s$u(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt){return _t[0]=Tt,_t[1]=Mt,_t[2]=Pt,_t[3]=Ft,_t[4]=Dt,_t[5]=Nt,_t[6]=Vt,_t[7]=zt,_t[8]=Xt,_t}function r$t(_t){return _t[0]=1,_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=1,_t[5]=0,_t[6]=0,_t[7]=0,_t[8]=1,_t}function o$r(_t,Tt){if(_t===Tt){const Mt=Tt[1],Pt=Tt[2],Ft=Tt[5];_t[1]=Tt[3],_t[2]=Tt[6],_t[3]=Mt,_t[5]=Tt[7],_t[6]=Pt,_t[7]=Ft}else _t[0]=Tt[0],_t[1]=Tt[3],_t[2]=Tt[6],_t[3]=Tt[1],_t[4]=Tt[4],_t[5]=Tt[7],_t[6]=Tt[2],_t[7]=Tt[5],_t[8]=Tt[8];return _t}function u$t(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[3],Nt=Tt[4],Vt=Tt[5],zt=Tt[6],Xt=Tt[7],Ht=Tt[8],Wt=Ht*Nt-Vt*Xt,Qt=-Ht*Dt+Vt*zt,Zt=Xt*Dt-Nt*zt;let Kt=Mt*Wt+Pt*Qt+Ft*Zt;return Kt?(Kt=1/Kt,_t[0]=Wt*Kt,_t[1]=(-Ht*Pt+Ft*Xt)*Kt,_t[2]=(Vt*Pt-Ft*Nt)*Kt,_t[3]=Qt*Kt,_t[4]=(Ht*Mt-Ft*zt)*Kt,_t[5]=(-Vt*Mt+Ft*Dt)*Kt,_t[6]=Zt*Kt,_t[7]=(-Xt*Mt+Pt*zt)*Kt,_t[8]=(Nt*Mt-Pt*Dt)*Kt,_t):null}function c$J(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[3],Nt=Tt[4],Vt=Tt[5],zt=Tt[6],Xt=Tt[7],Ht=Tt[8];return _t[0]=Nt*Ht-Vt*Xt,_t[1]=Ft*Xt-Pt*Ht,_t[2]=Pt*Vt-Ft*Nt,_t[3]=Vt*zt-Dt*Ht,_t[4]=Mt*Ht-Ft*zt,_t[5]=Ft*Dt-Mt*Vt,_t[6]=Dt*Xt-Nt*zt,_t[7]=Pt*zt-Mt*Xt,_t[8]=Mt*Nt-Pt*Dt,_t}function e$y(_t){const Tt=_t[0],Mt=_t[1],Pt=_t[2],Ft=_t[3],Dt=_t[4],Nt=_t[5],Vt=_t[6],zt=_t[7],Xt=_t[8];return Tt*(Xt*Dt-Nt*zt)+Mt*(-Xt*Ft+Nt*Vt)+Pt*(zt*Ft-Dt*Vt)}function i$B(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Tt[3],Vt=Tt[4],zt=Tt[5],Xt=Tt[6],Ht=Tt[7],Wt=Tt[8],Qt=Mt[0],Zt=Mt[1],Kt=Mt[2],er=Mt[3],Yt=Mt[4],rr=Mt[5],ir=Mt[6],nr=Mt[7],ar=Mt[8];return _t[0]=Qt*Pt+Zt*Nt+Kt*Xt,_t[1]=Qt*Ft+Zt*Vt+Kt*Ht,_t[2]=Qt*Dt+Zt*zt+Kt*Wt,_t[3]=er*Pt+Yt*Nt+rr*Xt,_t[4]=er*Ft+Yt*Vt+rr*Ht,_t[5]=er*Dt+Yt*zt+rr*Wt,_t[6]=ir*Pt+nr*Nt+ar*Xt,_t[7]=ir*Ft+nr*Vt+ar*Ht,_t[8]=ir*Dt+nr*zt+ar*Wt,_t}function M$d(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Tt[3],Vt=Tt[4],zt=Tt[5],Xt=Tt[6],Ht=Tt[7],Wt=Tt[8],Qt=Mt[0],Zt=Mt[1];return _t[0]=Pt,_t[1]=Ft,_t[2]=Dt,_t[3]=Nt,_t[4]=Vt,_t[5]=zt,_t[6]=Qt*Pt+Zt*Nt+Xt,_t[7]=Qt*Ft+Zt*Vt+Ht,_t[8]=Qt*Dt+Zt*zt+Wt,_t}function h$v(_t,Tt,Mt){const Pt=Tt[0],Ft=Tt[1],Dt=Tt[2],Nt=Tt[3],Vt=Tt[4],zt=Tt[5],Xt=Tt[6],Ht=Tt[7],Wt=Tt[8],Qt=Math.sin(Mt),Zt=Math.cos(Mt);return _t[0]=Zt*Pt+Qt*Nt,_t[1]=Zt*Ft+Qt*Vt,_t[2]=Zt*Dt+Qt*zt,_t[3]=Zt*Nt-Qt*Pt,_t[4]=Zt*Vt-Qt*Ft,_t[5]=Zt*zt-Qt*Dt,_t[6]=Xt,_t[7]=Ht,_t[8]=Wt,_t}function f$k(_t,Tt,Mt){const Pt=Mt[0],Ft=Mt[1],Dt=Mt[2];return _t[0]=Pt*Tt[0],_t[1]=Pt*Tt[1],_t[2]=Pt*Tt[2],_t[3]=Ft*Tt[3],_t[4]=Ft*Tt[4],_t[5]=Ft*Tt[5],_t[6]=Dt*Tt[6],_t[7]=Dt*Tt[7],_t[8]=Dt*Tt[8],_t}function b$i(_t,Tt,Mt){const Pt=Mt[0],Ft=Mt[1];return _t[0]=Pt*Tt[0],_t[1]=Pt*Tt[1],_t[2]=Pt*Tt[2],_t[3]=Ft*Tt[3],_t[4]=Ft*Tt[4],_t[5]=Ft*Tt[5],_t}function l$B(_t,Tt){return _t[0]=1,_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=1,_t[5]=0,_t[6]=Tt[0],_t[7]=Tt[1],_t[8]=1,_t}function m$s(_t,Tt){const Mt=Math.sin(Tt),Pt=Math.cos(Tt);return _t[0]=Pt,_t[1]=Mt,_t[2]=0,_t[3]=-Mt,_t[4]=Pt,_t[5]=0,_t[6]=0,_t[7]=0,_t[8]=1,_t}function d$v(_t,Tt){return _t[0]=Tt[0],_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=Tt[1],_t[5]=0,_t[6]=0,_t[7]=0,_t[8]=1,_t}function x$e(_t,Tt){return _t[0]=Tt[0],_t[1]=Tt[1],_t[2]=0,_t[3]=Tt[2],_t[4]=Tt[3],_t[5]=0,_t[6]=Tt[4],_t[7]=Tt[5],_t[8]=1,_t}function p$E(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[3],Nt=Mt+Mt,Vt=Pt+Pt,zt=Ft+Ft,Xt=Mt*Nt,Ht=Pt*Nt,Wt=Pt*Vt,Qt=Ft*Nt,Zt=Ft*Vt,Kt=Ft*zt,er=Dt*Nt,Yt=Dt*Vt,rr=Dt*zt;return _t[0]=1-Wt-Kt,_t[3]=Ht-rr,_t[6]=Qt+Yt,_t[1]=Ht+rr,_t[4]=1-Xt-Kt,_t[7]=Zt-er,_t[2]=Qt-Yt,_t[5]=Zt+er,_t[8]=1-Xt-Wt,_t}function y$k(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[4],Nt=Tt[5],Vt=Tt[6],zt=Tt[8],Xt=Tt[9],Ht=Tt[10],Wt=Ht*Nt-Vt*Xt,Qt=-Ht*Dt+Vt*zt,Zt=Xt*Dt-Nt*zt,Kt=Mt*Wt+Pt*Qt+Ft*Zt;if(!Kt)return null;const er=1/Kt;return _t[0]=Wt*er,_t[1]=(-Ht*Pt+Ft*Xt)*er,_t[2]=(Vt*Pt-Ft*Nt)*er,_t[3]=Qt*er,_t[4]=(Ht*Mt-Ft*zt)*er,_t[5]=(-Vt*Mt+Ft*Dt)*er,_t[6]=Zt*er,_t[7]=(-Xt*Mt+Pt*zt)*er,_t[8]=(Nt*Mt-Pt*Dt)*er,_t}function j$f(_t,Tt){const Mt=Tt[0],Pt=Tt[1],Ft=Tt[2],Dt=Tt[3],Nt=Tt[4],Vt=Tt[5],zt=Tt[6],Xt=Tt[7],Ht=Tt[8],Wt=Tt[9],Qt=Tt[10],Zt=Tt[11],Kt=Tt[12],er=Tt[13],Yt=Tt[14],rr=Tt[15],ir=Mt*Vt-Pt*Nt,nr=Mt*zt-Ft*Nt,ar=Mt*Xt-Dt*Nt,or=Pt*zt-Ft*Vt,ur=Pt*Xt-Dt*Vt,dr=Ft*Xt-Dt*zt,hr=Ht*er-Wt*Kt,gr=Ht*Yt-Qt*Kt,pr=Ht*rr-Zt*Kt,mr=Wt*Yt-Qt*er,wr=Wt*rr-Zt*er,br=Qt*rr-Zt*Yt;let _r=ir*br-nr*wr+ar*mr+or*pr-ur*gr+dr*hr;return _r?(_r=1/_r,_t[0]=(Vt*br-zt*wr+Xt*mr)*_r,_t[1]=(zt*pr-Nt*br-Xt*gr)*_r,_t[2]=(Nt*wr-Vt*pr+Xt*hr)*_r,_t[3]=(Ft*wr-Pt*br-Dt*mr)*_r,_t[4]=(Mt*br-Ft*pr+Dt*gr)*_r,_t[5]=(Pt*pr-Mt*wr-Dt*hr)*_r,_t[6]=(er*dr-Yt*ur+rr*or)*_r,_t[7]=(Yt*ar-Kt*dr-rr*nr)*_r,_t[8]=(Kt*ur-er*ar+rr*ir)*_r,_t):null}function g$i(_t,Tt,Mt){return _t[0]=2/Tt,_t[1]=0,_t[2]=0,_t[3]=0,_t[4]=-2/Mt,_t[5]=0,_t[6]=-1,_t[7]=1,_t[8]=1,_t}function S$8(_t){return"mat3("+_t[0]+", "+_t[1]+", "+_t[2]+", "+_t[3]+", "+_t[4]+", "+_t[5]+", "+_t[6]+", "+_t[7]+", "+_t[8]+")"}function q$5(_t){return Math.sqrt(_t[0]**2+_t[1]**2+_t[2]**2+_t[3]**2+_t[4]**2+_t[5]**2+_t[6]**2+_t[7]**2+_t[8]**2)}function _$8(_t,Tt,Mt){return _t[0]=Tt[0]+Mt[0],_t[1]=Tt[1]+Mt[1],_t[2]=Tt[2]+Mt[2],_t[3]=Tt[3]+Mt[3],_t[4]=Tt[4]+Mt[4],_t[5]=Tt[5]+Mt[5],_t[6]=Tt[6]+Mt[6],_t[7]=Tt[7]+Mt[7],_t[8]=Tt[8]+Mt[8],_t}function v$j(_t,Tt,Mt){return _t[0]=Tt[0]-Mt[0],_t[1]=Tt[1]-Mt[1],_t[2]=Tt[2]-Mt[2],_t[3]=Tt[3]-Mt[3],_t[4]=Tt[4]-Mt[4],_t[5]=Tt[5]-Mt[5],_t[6]=Tt[6]-Mt[6],_t[7]=Tt[7]-Mt[7],_t[8]=Tt[8]-Mt[8],_t}function A$8(_t,Tt,Mt){return _t[0]=Tt[0]*Mt,_t[1]=Tt[1]*Mt,_t[2]=Tt[2]*Mt,_t[3]=Tt[3]*Mt,_t[4]=Tt[4]*Mt,_t[5]=Tt[5]*Mt,_t[6]=Tt[6]*Mt,_t[7]=Tt[7]*Mt,_t[8]=Tt[8]*Mt,_t}function E$c(_t,Tt,Mt,Pt){return _t[0]=Tt[0]+Mt[0]*Pt,_t[1]=Tt[1]+Mt[1]*Pt,_t[2]=Tt[2]+Mt[2]*Pt,_t[3]=Tt[3]+Mt[3]*Pt,_t[4]=Tt[4]+Mt[4]*Pt,_t[5]=Tt[5]+Mt[5]*Pt,_t[6]=Tt[6]+Mt[6]*Pt,_t[7]=Tt[7]+Mt[7]*Pt,_t[8]=Tt[8]+Mt[8]*Pt,_t}function F$8(_t,Tt){return _t[0]===Tt[0]&&_t[1]===Tt[1]&&_t[2]===Tt[2]&&_t[3]===Tt[3]&&_t[4]===Tt[4]&&_t[5]===Tt[5]&&_t[6]===Tt[6]&&_t[7]===Tt[7]&&_t[8]===Tt[8]}function O$9(_t,Tt){const Mt=_t[0],Pt=_t[1],Ft=_t[2],Dt=_t[3],Nt=_t[4],Vt=_t[5],zt=_t[6],Xt=_t[7],Ht=_t[8],Wt=Tt[0],Qt=Tt[1],Zt=Tt[2],Kt=Tt[3],er=Tt[4],Yt=Tt[5],rr=Tt[6],ir=Tt[7],nr=Tt[8];return Math.abs(Mt-Wt)<=t$1M*Math.max(1,Math.abs(Mt),Math.abs(Wt))&&Math.abs(Pt-Qt)<=t$1M*Math.max(1,Math.abs(Pt),Math.abs(Qt))&&Math.abs(Ft-Zt)<=t$1M*Math.max(1,Math.abs(Ft),Math.abs(Zt))&&Math.abs(Dt-Kt)<=t$1M*Math.max(1,Math.abs(Dt),Math.abs(Kt))&&Math.abs(Nt-er)<=t$1M*Math.max(1,Math.abs(Nt),Math.abs(er))&&Math.abs(Vt-Yt)<=t$1M*Math.max(1,Math.abs(Vt),Math.abs(Yt))&&Math.abs(zt-rr)<=t$1M*Math.max(1,Math.abs(zt),Math.abs(rr))&&Math.abs(Xt-ir)<=t$1M*Math.max(1,Math.abs(Xt),Math.abs(ir))&&Math.abs(Ht-nr)<=t$1M*Math.max(1,Math.abs(Ht),Math.abs(nr))}function z$7(_t){const Tt=t$1M,Mt=_t[0],Pt=_t[1],Ft=_t[2],Dt=_t[3],Nt=_t[4],Vt=_t[5],zt=_t[6],Xt=_t[7],Ht=_t[8];return Math.abs(1-(Mt*Mt+Dt*Dt+zt*zt))<=Tt&&Math.abs(1-(Pt*Pt+Nt*Nt+Xt*Xt))<=Tt&&Math.abs(1-(Ft*Ft+Vt*Vt+Ht*Ht))<=Tt}const B$4=i$B,T$8=v$j;Object.freeze(Object.defineProperty({__proto__:null,fromMat4:a$F,copy:n$K,set:s$u,identity:r$t,transpose:o$r,invert:u$t,adjoint:c$J,determinant:e$y,multiply:i$B,translate:M$d,rotate:h$v,scale:f$k,scaleByVec2:b$i,fromTranslation:l$B,fromRotation:m$s,fromScaling:d$v,fromMat2d:x$e,fromQuat:p$E,normalFromMat4Legacy:y$k,normalFromMat4:j$f,projection:g$i,str:S$8,frob:q$5,add:_$8,subtract:v$j,multiplyScalar:A$8,multiplyScalarAndAdd:E$c,exactEquals:F$8,equals:O$9,isOrthoNormal:z$7,mul:B$4,sub:T$8},Symbol.toStringTag,{value:"Module"}));function e$x(){const _t=new Float32Array(9);return _t[0]=1,_t[4]=1,_t[8]=1,_t}function r$s(_t){const Tt=new Float32Array(9);return Tt[0]=_t[0],Tt[1]=_t[1],Tt[2]=_t[2],Tt[3]=_t[3],Tt[4]=_t[4],Tt[5]=_t[5],Tt[6]=_t[6],Tt[7]=_t[7],Tt[8]=_t[8],Tt}function t$s(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt){const Xt=new Float32Array(9);return Xt[0]=_t,Xt[1]=Tt,Xt[2]=Mt,Xt[3]=Pt,Xt[4]=Ft,Xt[5]=Dt,Xt[6]=Nt,Xt[7]=Vt,Xt[8]=zt,Xt}function n$J(_t,Tt){return new Float32Array(_t,Tt,9)}Object.freeze(Object.defineProperty({__proto__:null,create:e$x,clone:r$s,fromValues:t$s,createView:n$J},Symbol.toStringTag,{value:"Module"}));function n$I(){return new Float32Array(2)}function r$r(_t){const Tt=new Float32Array(2);return Tt[0]=_t[0],Tt[1]=_t[1],Tt}function t$r(_t,Tt){const Mt=new Float32Array(2);return Mt[0]=_t,Mt[1]=Tt,Mt}function e$w(_t,Tt){return new Float32Array(_t,Tt,2)}function a$E(){return n$I()}function o$q(){return t$r(1,1)}function u$s(){return t$r(1,0)}function s$t(){return t$r(0,1)}const c$I=a$E(),i$A=o$q(),f$j=u$s(),l$A=s$t();Object.freeze(Object.defineProperty({__proto__:null,create:n$I,clone:r$r,fromValues:t$r,createView:e$w,zeros:a$E,ones:o$q,unitX:u$s,unitY:s$t,ZEROS:c$I,ONES:i$A,UNIT_X:f$j,UNIT_Y:l$A},Symbol.toStringTag,{value:"Module"}));function n$H(_t){return _t instanceof Float32Array&&_t.length>=2}function r$q(_t){return Array.isArray(_t)&&_t.length>=2}function t$q(_t){return n$H(_t)||r$q(_t)}var V$b;const G$3=[0,0];let O$8=V$b=class extends l$2v{constructor(_t){super(_t),this._viewpoint2D={center:n$N(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new M$K,this.id=0,this.inverseTransform=e$B(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=e$B(),this.transformNoRotation=e$B(),this.displayMat3=e$x(),this.displayViewMat3=e$x(),this.viewMat3=e$x(),this.viewMat2d=n$Y(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(_t){this._set("pixelRatio",_t),this._update()}set size(_t){this._set("size",_t),this._update()}set viewpoint(_t){if(_t){const Tt=this._viewpoint2D,Mt=_t.targetGeometry;Tt.center[0]=Mt.x,Tt.center[1]=Mt.y,Tt.rotation=_t.rotation,Tt.scale=_t.scale,Tt.spatialReference=Mt.spatialReference}this._update()}copy(_t){const Tt=this.size,Mt=this.viewpoint;return Mt&&Tt?(this.viewpoint=Z$3(Mt,_t.viewpoint),this._set("size",a$K(Tt,_t.size))):(this.viewpoint=_t.viewpoint.clone(),this._set("size",[_t.size[0],_t.size[1]])),this._set("pixelRatio",_t.pixelRatio),this}clone(){return new V$b({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(_t,Tt,Mt){return t$q(Tt)?z$8(_t,Tt,this.inverseTransform):(G$3[0]=Tt,G$3[1]=Mt,z$8(_t,G$3,this.inverseTransform))}toScreen(_t,Tt,Mt){return t$q(Tt)?z$8(_t,Tt,this.transform):(G$3[0]=Tt,G$3[1]=Mt,z$8(_t,G$3,this.transform))}toScreenNoRotation(_t,Tt,Mt){return t$q(Tt)?z$8(_t,Tt,this.transformNoRotation):(G$3[0]=Tt,G$3[1]=Mt,z$8(_t,G$3,this.transformNoRotation))}getScreenTransform(_t,Tt){const{center:Mt}=this._viewpoint2D,Pt=this._get("pixelRatio")||1,Ft=this._get("size");return ut(_t,Mt,Ft,Tt,0,Pt),_t}_update(){const{center:_t,spatialReference:Tt,scale:Mt,rotation:Pt}=this._viewpoint2D,Ft=this._get("pixelRatio")||1,Dt=this._get("size"),Nt=new u$1q({targetGeometry:new j$Z(_t[0],_t[1],Tt),scale:Mt,rotation:Pt});if(this._set("viewpoint",Nt),!Dt||!Tt||!Mt)return;this.resolution=ot(Nt),this.rotation=Pt,this.scale=Mt,this.spatialReference=Tt,a$K(this.center,_t);const Vt=Dt[0]!==0?2/Dt[0]:0,zt=Dt[1]!==0?-2/Dt[1]:0;s$u(this.displayMat3,Vt,0,0,0,zt,0,-1,1,1);const Xt=r$t(this.viewMat3),Ht=t$r(Dt[0]/2,Dt[1]/2),Wt=t$r(-Dt[0]/2,-Dt[1]/2),Qt=o$1K(Pt);M$d(Xt,Xt,Ht),h$v(Xt,Xt,Qt),M$d(Xt,Xt,Wt),i$B(this.displayViewMat3,this.displayMat3,Xt);const Zt=f$t(this.viewMat2d,Ht);return e$G(Zt,Zt,Qt),i$R(Zt,Zt,Wt),_$9(this.extent,Nt,Dt),ft(this.transform,Nt,Dt,Ft),r$C(this.inverseTransform,this.transform),lt(this.transformNoRotation,Nt,Dt,Ft),this.worldScreenWidth=yt(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};e$2a([d$25({readOnly:!0})],O$8.prototype,"id",void 0),e$2a([d$25({value:1,json:{write:!0}})],O$8.prototype,"pixelRatio",null),e$2a([d$25({json:{write:!0}})],O$8.prototype,"size",null),e$2a([d$25()],O$8.prototype,"spatialReference",void 0),e$2a([d$25({type:u$1q,json:{write:!0}})],O$8.prototype,"viewpoint",null),O$8=V$b=e$2a([n$2L("esri.views.2d.ViewState")],O$8);const U$8=O$8;var l$z,m$r;let w$c=l$z=class extends y$1E{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new l$z({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};e$2a([d$25()],w$c.prototype,"left",void 0),e$2a([d$25()],w$c.prototype,"top",void 0),e$2a([d$25()],w$c.prototype,"right",void 0),e$2a([d$25()],w$c.prototype,"bottom",void 0),w$c=l$z=e$2a([n$2L("esri.views.2d.PaddedViewState.Padding")],w$c);let u$r=m$r=class extends U$8{constructor(..._t){super(..._t),this.paddedViewState=new U$8,this._updateContent=(()=>{const Tt=n$N();return()=>{const Mt=this._get("size"),Pt=this._get("padding");if(!Mt||!Pt)return;const Ft=this.paddedViewState;r$v(Tt,Pt.left+Pt.right,Pt.top+Pt.bottom),o$v(Tt,Mt,Tt),a$K(Ft.size,Tt);const Dt=Ft.viewpoint;Dt&&(this.viewpoint=Dt)}})(),this.own(l$2e(()=>[this.size,this.padding],()=>this._updateContent(),U$r)),this.padding=new w$c,this.size=[0,0]}set padding(_t){this._set("padding",_t||new w$c)}set viewpoint(_t){if(_t){const Tt=_t.clone();this.paddedViewState.viewpoint=_t,gt(Tt,_t,this._get("size"),this._get("padding"));const Mt=this._viewpoint2D,Pt=Tt.targetGeometry;Mt.center[0]=Pt.x,Mt.center[1]=Pt.y,Mt.rotation=Tt.rotation,Mt.scale=Tt.scale,Mt.spatialReference=Pt.spatialReference,this._update()}}clone(){return new m$r({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};e$2a([d$25()],u$r.prototype,"paddedViewState",void 0),e$2a([d$25({type:w$c})],u$r.prototype,"padding",null),e$2a([d$25()],u$r.prototype,"viewpoint",null),u$r=m$r=e$2a([n$2L("esri.views.2d.PaddedViewState")],u$r);const g$h=u$r;class u$q{constructor(Tt,Mt){this.item=Tt,this.controller=Mt,this.promise=null}}class l$y{constructor(Tt){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,Tt.concurrency&&(this.concurrency=Tt.concurrency),this._queue=new e$1s(Tt.peeker),this.process=Tt.process;const Mt=Tt.scheduler;Tt.priority&&r$1P(Mt)&&(this._task=Mt.registerTask(Tt.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(Tt){const Mt=this._controllers.get(Tt);Mt&&Mt.abort()}clear(){this._queue.clear();const Tt=[];this._controllers.forEach(Mt=>Tt.push(Mt)),this._controllers.clear(),Tt.forEach(Mt=>Mt.abort()),this._processingItems.clear(),this._cancelNext()}forEach(Tt){this._deferreds.forEach((Mt,Pt)=>Tt(Pt))}get(Tt){const Mt=this._deferreds.get(Tt);return Mt?Mt.promise:void 0}isOngoing(Tt){return this._processingItems.has(Tt)}has(Tt){return this._deferreds.has(Tt)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(Tt,Mt){const Pt=this.get(Tt);if(Pt)return Pt;const Ft=new AbortController;let Dt=null;Mt&&(Dt=v$16(Mt,()=>Ft.abort()));const Nt=()=>{const Ht=this._processingItems.get(Tt);Ht&&Ht.controller.abort(),Vt(),Xt.reject(m$2b())},Vt=()=>{zt.remove(),r$1P(Dt)&&Dt.remove(),this._deferreds.delete(Tt),this._controllers.delete(Tt),this._queue.remove(Tt),this._processingItems.delete(Tt),this._scheduleNext()},zt=d$28(Ft.signal,Nt),Xt=T$C();return this._deferreds.set(Tt,Xt),this._controllers.set(Tt,Ft),Xt.promise.then(Vt,Vt),this._queue.push(Tt),this._scheduleNext(),Xt.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const Tt=[];this._processingItems.forEach(Mt=>Tt.push(Mt)),this._processingItems.clear();for(const Mt of Tt)this._queue.push(Mt.item),Mt.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const Tt=[];for(;this._queue.length;)Tt.push(this._queue.pop());return this.clear(),Tt}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(Tt){for(;!Tt.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),Tt.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=v$15(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(Tt,Mt){this._canProcessFulfillment(Tt)&&(this._scheduleNext(),this._deferreds.get(Tt.item).resolve(Mt))}_processError(Tt,Mt){this._canProcessFulfillment(Tt)&&(this._scheduleNext(),this._deferreds.get(Tt.item).reject(Mt))}_canProcessFulfillment(Tt){return!!this._deferreds.get(Tt.item)&&this._processingItems.get(Tt.item)===Tt}_process(Tt){if(t$2e(Tt))return;let Mt;const Pt=new AbortController,Ft=new u$q(Tt,Pt);this._processingItems.set(Tt,Ft);try{Mt=this.process(Tt,Pt.signal)}catch(Dt){this._processError(Ft,Dt)}k$E(Mt)?(Ft.promise=Mt,Mt.then(Dt=>this._processResult(Ft,Dt),Dt=>this._processError(Ft,Dt))):this._processResult(Ft,Mt)}get test(){return{update:Tt=>this.runTask(Tt)}}}function n$G(_t,Tt){return _t.length=0,Tt.forEach(Mt=>_t.push(Mt)),_t}const u$p=new Set,a$D=[],c$H=new Map,h$u=[0,0];let l$x=class extends y$1E{constructor(_t){super(_t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:_t,process:Tt}=this;this._queue=new l$y({concurrency:_t,process:(Mt,Pt)=>{const Ft=this._keyToItem.get(Mt);return Tt(Ft,{signal:Pt})},peeker:Mt=>Mt.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(_t){const Tt=typeof _t=="string"?_t:_t.id;this._queue.abort(Tt)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(_t){return typeof _t=="string"?this._keyToItem.has(_t):this._keyToItem.has(_t.id)}isOngoing(_t){const Tt=typeof _t=="string"?_t:_t.id;return this.has(Tt)&&this._queue.isOngoing(Tt)}pause(){this._queue.pause()}push(_t,Tt){const Mt=_t.key.id+"-"+Tt;if(this.has(Mt))return this.get(Mt);const Pt=this._queue.push(Mt),Ft=()=>{this._keyToItem.delete(Mt),this.notifyChange("updating")};return this._keyToItem.set(Mt,_t),Pt.then(Ft,Ft),this.notifyChange("updating"),Pt}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(_t){if(!this.state)return _t.values().next().value;const Tt=this.tileInfoView;let Mt=Number.NEGATIVE_INFINITY,Pt=Number.POSITIVE_INFINITY;_t.forEach(Xt=>{const Ht=this._keyToItem.get(Xt),Wt=this.tileInfoView.getTileScale(Ht.key);c$H.has(Wt)||(c$H.set(Wt,[]),Mt=Math.max(Wt,Mt),Pt=Math.min(Wt,Pt)),c$H.get(Wt).push(Ht.key),u$p.add(Wt)});let Ft=this.state.scale;c$H.has(Ft)||(n$G(a$D,u$p),a$D.sort((Xt,Ht)=>Xt-Ht),Ft=a$D.reduce((Xt,Ht)=>Math.abs(Ht-Ft)<Math.abs(Xt-Ft)?Ht:Xt,a$D[0])),Ft=Math.min(Ft,Mt),Ft=Math.max(Ft,Pt);const Dt=c$H.get(Ft),Nt=Tt.getClosestInfoForScale(Ft),Vt=Nt.getColumnForX(this.state.center[0]),zt=Nt.getRowForY(this.state.center[1]);return Dt.sort((Xt,Ht)=>{const Wt=Nt.denormalizeCol(Xt.col,Xt.world),Qt=Nt.denormalizeCol(Ht.col,Ht.world);return Math.sqrt((Vt-Wt)*(Vt-Wt)+(zt-Xt.row)*(zt-Xt.row))-Math.sqrt((Vt-Qt)*(Vt-Qt)+(zt-Ht.row)*(zt-Ht.row))}),u$p.clear(),c$H.clear(),Dt[0].id}_peekByCenterFirst(_t){if(!this.state)return _t.values().next().value;const Tt=this.tileInfoView,Mt=this.state.center;let Pt=Number.POSITIVE_INFINITY,Ft=null;return _t.forEach(Dt=>{const Nt=this._keyToItem.get(Dt);Tt.getTileCoords(h$u,Nt.key);const Vt=m$u(h$u,Mt);Vt<Pt&&(Pt=Vt,Ft=Nt.key)}),Ft.id}};e$2a([d$25({constructOnly:!0})],l$x.prototype,"concurrency",void 0),e$2a([d$25({constructOnly:!0})],l$x.prototype,"process",void 0),e$2a([d$25()],l$x.prototype,"state",void 0),e$2a([d$25({constructOnly:!0})],l$x.prototype,"strategy",void 0),e$2a([d$25({constructOnly:!0})],l$x.prototype,"tileInfoView",void 0),e$2a([d$25({readOnly:!0})],l$x.prototype,"updating",null),l$x=e$2a([n$2L("esri.views.2d.tiling.PagedTileQueue")],l$x);class e$v{constructor(Tt,Mt,Pt,Ft){this.set(Tt,Mt,Pt,Ft)}static getId(Tt,Mt,Pt,Ft){return typeof Tt=="object"?`${Tt.level}/${Tt.row}/${Tt.col}/${Tt.world}`:`${Tt}/${Mt}/${Pt}/${Ft}`}get key(){return this}get id(){return this.toString()}set id(Tt){this.set(Tt)}get hash(){const Tt=4095&this.row,Mt=4095&this.col,Pt=63&this.level;return(3&this.world)<<30|Mt<<22|Tt<<8|Pt}acquire(Tt,Mt,Pt,Ft){this.set(Tt,Mt,Pt,Ft)}contains(Tt){const Mt=Tt.level-this.level;return this.row===Tt.row>>Mt&&this.col===Tt.col>>Mt&&this.world===Tt.world}equals(Tt){return this.level===Tt.level&&this.row===Tt.row&&this.col===Tt.col&&this.world===Tt.world}clone(){return new e$v(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(Tt,Mt,Pt,Ft){if(Tt==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof Tt=="object")this.level=Tt.level||0,this.row=Tt.row||0,this.col=Tt.col||0,this.world=Tt.world||0;else if(typeof Tt=="string"){const[Dt,Nt,Vt,zt]=Tt.split("/");this.level=parseFloat(Dt),this.row=parseFloat(Nt),this.col=parseFloat(Vt),this.world=parseFloat(zt)}else this.level=+Tt,this.row=+Mt,this.col=+Pt,this.world=+Ft||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new e$v(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const Tt=this.level+1,Mt=this.row<<1,Pt=this.col<<1,Ft=this.world;return[new e$v(Tt,Mt,Pt,Ft),new e$v(Tt,Mt,Pt+1,Ft),new e$v(Tt,Mt+1,Pt,Ft),new e$v(Tt,Mt+1,Pt+1,Ft)]}compareRowMajor(Tt){return this.row<Tt.row?-1:this.row>Tt.row?1:this.col<Tt.col?-1:this.col>Tt.col?1:0}}e$v.pool=new e$29(e$v,null,null,25,50);function i$z(_t,Tt){return[_t,Tt]}function e$u(_t,Tt,Mt){return _t[0]=Tt,_t[1]=Mt,_t}function s$s(_t,Tt,Mt,Pt,Ft){return _t[0]=Tt,_t[1]=Mt,_t[2]=Pt,_t[3]=Ft,_t}const n$F=new e$v("0/0/0/0");class l$w{constructor(Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt,Qt){this.level=Tt,this.resolution=Mt,this.scale=Pt,this.origin=Ft,this.first=Dt,this.last=Nt,this.size=Vt,this.norm=zt,this.worldStart=Xt,this.worldEnd=Ht,this.worldSize=Wt,this.wrap=Qt}static create(Tt,Mt,Pt=null){const Ft=R$x(Tt.spatialReference),Dt=Mt.origin||i$z(Tt.origin.x,Tt.origin.y),Nt=i$z(Tt.size[0]*Mt.resolution,Tt.size[1]*Mt.resolution),Vt=i$z(-1/0,-1/0),zt=i$z(1/0,1/0),Xt=i$z(1/0,1/0);r$1P(Pt)&&(e$u(Vt,Math.max(0,Math.floor((Pt.xmin-Dt[0])/Nt[0])),Math.max(0,Math.floor((Dt[1]-Pt.ymax)/Nt[1]))),e$u(zt,Math.max(0,Math.floor((Pt.xmax-Dt[0])/Nt[0])),Math.max(0,Math.floor((Dt[1]-Pt.ymin)/Nt[1]))),e$u(Xt,zt[0]-Vt[0]+1,zt[1]-Vt[1]+1));const{cols:Ht,rows:Wt}=Mt;let Qt,Zt,Kt,er;return!Pt&&Ht&&Wt&&(e$u(Vt,Ht[0],Wt[0]),e$u(zt,Ht[1],Wt[1]),e$u(Xt,Ht[1]-Ht[0]+1,Wt[1]-Wt[0]+1)),Tt.isWrappable?(Qt=i$z(Math.ceil(Math.round((Ft.valid[1]-Ft.valid[0])/Mt.resolution)/Tt.size[0]),Xt[1]),Zt=i$z(Math.floor((Ft.origin[0]-Dt[0])/Nt[0]),Vt[1]),Kt=i$z(Qt[0]+Zt[0]-1,zt[1]),er=!0):(Zt=Vt,Kt=zt,Qt=Xt,er=!1),new l$w(Mt.level,Mt.resolution,Mt.scale,Dt,Vt,zt,Xt,Nt,Zt,Kt,Qt,er)}normalizeCol(Tt){if(!this.wrap)return Tt;const Mt=this.worldSize[0];return Tt<0?Mt-1-Math.abs((Tt+1)%Mt):Tt%Mt}denormalizeCol(Tt,Mt){return this.wrap?this.worldSize[0]*Mt+Tt:Tt}getWorldForColumn(Tt){return this.wrap?Math.floor(Tt/this.worldSize[0]):0}getFirstColumnForWorld(Tt){return Tt*this.worldSize[0]+this.first[0]}getLastColumnForWorld(Tt){return Tt*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(Tt){return(Tt-this.origin[0])/this.norm[0]}getXForColumn(Tt){return this.origin[0]+Tt*this.norm[0]}getRowForY(Tt){return(this.origin[1]-Tt)/this.norm[1]}getYForRow(Tt){return this.origin[1]-Tt*this.norm[1]}getTileBounds(Tt,Mt,Pt=!1){n$F.set(Mt);const Ft=Pt?n$F.col:this.denormalizeCol(n$F.col,n$F.world),Dt=n$F.row;return s$s(Tt,this.getXForColumn(Ft),this.getYForRow(Dt+1),this.getXForColumn(Ft+1),this.getYForRow(Dt)),Tt}getTileCoords(Tt,Mt,Pt=!1){n$F.set(Mt);const Ft=Pt?n$F.col:this.denormalizeCol(n$F.col,n$F.world);return Array.isArray(Tt)?e$u(Tt,this.getXForColumn(Ft),this.getYForRow(n$F.row)):(Tt.x=this.getXForColumn(Ft),Tt.y=this.getYForRow(n$F.row)),Tt}}class l$v{constructor(){this.spans=[]}acquire(Tt){this.lodInfo=Tt}release(){this.lodInfo=null,this.spans.length=0}forEach(Tt,Mt){const{spans:Pt,lodInfo:Ft}=this,{level:Dt}=Ft;if(Pt.length!==0)for(const{row:Nt,colFrom:Vt,colTo:zt}of Pt)for(let Xt=Vt;Xt<=zt;Xt++)Tt.call(Mt,Dt,Nt,Ft.normalizeCol(Xt),Ft.getWorldForColumn(Xt))}}l$v.pool=new e$29(l$v);class o$p{constructor(Tt,Mt,Pt){this.row=Tt,this.colFrom=Mt,this.colTo=Pt}}const i$y=new e$v("0/0/0/0");class n$E{constructor(Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt){this.x=Tt,this.ymin=Mt,this.ymax=Pt,this.invM=Ft,this.leftAdjust=Dt,this.rightAdjust=Nt,this.leftBound=Vt,this.rightBound=zt}static create(Tt,Mt){Tt[1]>Mt[1]&&([Tt,Mt]=[Mt,Tt]);const[Pt,Ft]=Tt,[Dt,Nt]=Mt,Vt=Dt-Pt,zt=Nt-Ft,Xt=zt!==0?Vt/zt:0,Ht=(Math.ceil(Ft)-Ft)*Xt,Wt=(Math.floor(Ft)-Ft)*Xt;return new n$E(Pt,Math.floor(Ft),Math.ceil(Nt),Xt,Vt<0?Ht:Wt,Vt<0?Wt:Ht,Vt<0?Dt:Pt,Vt<0?Pt:Dt)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const r$p=[[0,0],[0,0],[0,0],[0,0]],a$C=1e-6;class h$t{constructor(Tt,Mt=null){this.tileInfo=Tt,this.fullExtent=Mt,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const Pt=Tt.lods.slice();Pt.sort((Dt,Nt)=>Nt.scale-Dt.scale);const Ft=this._lodInfos=Pt.map(Dt=>l$w.create(Tt,Dt,Mt));Pt.forEach((Dt,Nt)=>{this._infoByLevel[Dt.level]=Ft[Nt],this._infoByScale[Dt.scale]=Ft[Nt],this.scales[Nt]=Dt.scale},this),this._wrap=Tt.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(Tt){return this._infoByLevel[typeof Tt=="number"?Tt:Tt.level]}getTileBounds(Tt,Mt,Pt=!1){i$y.set(Mt);const Ft=this._infoByLevel[i$y.level];return Ft?Ft.getTileBounds(Tt,i$y,Pt):Tt}getTileCoords(Tt,Mt,Pt=!1){i$y.set(Mt);const Ft=this._infoByLevel[i$y.level];return Ft?Ft.getTileCoords(Tt,i$y,Pt):Tt}getTileCoverage(Tt,Mt=192,Pt="closest"){const Ft=Pt==="closest"?this.getClosestInfoForScale(Tt.scale):this.getSmallestInfoForScale(Tt.scale),Dt=l$v.pool.acquire(Ft),Nt=this._wrap;let Vt,zt,Xt,Ht=1/0,Wt=-1/0;const Qt=Dt.spans;r$p[0][0]=r$p[0][1]=r$p[1][1]=r$p[3][0]=-Mt,r$p[1][0]=r$p[2][0]=Tt.size[0]+Mt,r$p[2][1]=r$p[3][1]=Tt.size[1]+Mt;for(const Yt of r$p)Tt.toMap(Yt,Yt),Yt[0]=Ft.getColumnForX(Yt[0]),Yt[1]=Ft.getRowForY(Yt[1]);const Zt=[];let Kt=3;for(let Yt=0;Yt<4;Yt++){if(r$p[Yt][1]===r$p[Kt][1]){Kt=Yt;continue}const rr=n$E.create(r$p[Yt],r$p[Kt]);Ht=Math.min(rr.ymin,Ht),Wt=Math.max(rr.ymax,Wt),Zt[rr.ymin]===void 0&&(Zt[rr.ymin]=[]),Zt[rr.ymin].push(rr),Kt=Yt}if(Ht==null||Wt==null||Wt-Ht>100)return null;let er=[];for(Vt=Ht;Vt<Wt;){Zt[Vt]!=null&&(er=er.concat(Zt[Vt])),zt=1/0,Xt=-1/0;for(let Yt=er.length-1;Yt>=0;Yt--){const rr=er[Yt];zt=Math.min(zt,rr.getLeftCol()),Xt=Math.max(Xt,rr.getRightCol())}if(zt=Math.floor(zt),Xt=Math.floor(Xt),Vt>=Ft.first[1]&&Vt<=Ft.last[1])if(Nt)if(Ft.size[0]<Ft.worldSize[0]){const Yt=Math.floor(Xt/Ft.worldSize[0]);for(let rr=Math.floor(zt/Ft.worldSize[0]);rr<=Yt;rr++)Qt.push(new o$p(Vt,Math.max(Ft.getFirstColumnForWorld(rr),zt),Math.min(Ft.getLastColumnForWorld(rr),Xt)))}else Qt.push(new o$p(Vt,zt,Xt));else zt>Ft.last[0]||Xt<Ft.first[0]||(zt=Math.max(zt,Ft.first[0]),Xt=Math.min(Xt,Ft.last[0]),Qt.push(new o$p(Vt,zt,Xt)));Vt+=1;for(let Yt=er.length-1;Yt>=0;Yt--){const rr=er[Yt];rr.ymax>=Vt?rr.incrRow():er.splice(Yt,1)}}return Dt}getTileParentId(Tt){i$y.set(Tt);const Mt=this._infoByLevel[i$y.level],Pt=this._lodInfos.indexOf(Mt)-1;return Pt<0?null:(this._getTileIdAtLOD(i$y,this._lodInfos[Pt],i$y),i$y.id)}getTileResolution(Tt){const Mt=this._infoByLevel[typeof Tt=="object"?Tt.level:Tt];return Mt?Mt.resolution:-1}getTileScale(Tt){const Mt=this._infoByLevel[Tt.level];return Mt?Mt.scale:-1}intersects(Tt,Mt){i$y.set(Mt);const Pt=this._infoByLevel[i$y.level],Ft=Tt.lodInfo;if(Ft.resolution>Pt.resolution){this._getTileIdAtLOD(i$y,Ft,i$y);const Nt=Ft.denormalizeCol(i$y.col,i$y.world);for(const Vt of Tt.spans)if(Vt.row===i$y.row&&Vt.colFrom<=Nt&&Vt.colTo>=Nt)return!0}if(Ft.resolution<Pt.resolution){const[Nt,Vt,zt,Xt]=Tt.spans.reduce((er,Yt)=>(er[0]=Math.min(er[0],Yt.row),er[1]=Math.max(er[1],Yt.row),er[2]=Math.min(er[2],Yt.colFrom),er[3]=Math.max(er[3],Yt.colTo),er),[1/0,-1/0,1/0,-1/0]),Ht=Pt.denormalizeCol(i$y.col,i$y.world),Wt=Ft.getColumnForX(Pt.getXForColumn(Ht)),Qt=Ft.getRowForY(Pt.getYForRow(i$y.row)),Zt=Ft.getColumnForX(Pt.getXForColumn(Ht+1))-1,Kt=Ft.getRowForY(Pt.getYForRow(i$y.row+1))-1;return!(Wt>Xt||Zt<zt||Qt>Vt||Kt<Nt)}const Dt=Ft.denormalizeCol(i$y.col,i$y.world);return Tt.spans.some(Nt=>Nt.row===i$y.row&&Nt.colFrom<=Dt&&Nt.colTo>=Dt)}normalizeBounds(Tt,Mt,Pt){if(Tt[0]=Mt[0],Tt[1]=Mt[1],Tt[2]=Mt[2],Tt[3]=Mt[3],this._wrap){const Ft=R$x(this.tileInfo.spatialReference),Dt=-Pt*(Ft.valid[1]-Ft.valid[0]);Tt[0]+=Dt,Tt[2]+=Dt}return Tt}getSmallestInfoForScale(Tt){const Mt=this.scales;if(this._infoByScale[Tt])return this._infoByScale[Tt];if(Tt>Mt[0])return this._infoByScale[Mt[0]];for(let Pt=1;Pt<Mt.length-1;Pt++)if(Tt>Mt[Pt]+a$C)return this._infoByScale[Mt[Pt-1]];return this._infoByScale[Mt[Mt.length-1]]}getClosestInfoForScale(Tt){const Mt=this.scales;return this._infoByScale[Tt]||(Tt=Mt.reduce((Pt,Ft)=>Math.abs(Ft-Tt)<Math.abs(Pt-Tt)?Ft:Pt,Mt[0])),this._infoByScale[Tt]}scaleToLevel(Tt){const Mt=this.scales;if(this._infoByScale[Tt])return this._infoByScale[Tt].level;for(let Pt=Mt.length-1;Pt>=0;Pt--)if(Tt<Mt[Pt])return Pt===Mt.length-1?this._infoByScale[Mt[Mt.length-1]].level:this._infoByScale[Mt[Pt]].level+(Mt[Pt]-Tt)/(Mt[Pt]-Mt[Pt+1]);return this._infoByScale[Mt[0]].level}scaleToZoom(Tt){return this.tileInfo.scaleToZoom(Tt)}_getTileIdAtLOD(Tt,Mt,Pt){const Ft=this._infoByLevel[Pt.level];return Tt.set(Pt),Mt.resolution<Ft.resolution?null:(Mt.resolution===Ft.resolution||(Tt.level=Mt.level,Tt.col=Math.floor(Pt.col*Ft.resolution/Mt.resolution+.01),Tt.row=Math.floor(Pt.row*Ft.resolution/Mt.resolution+.01)),Tt)}}function n$D(_t,Tt){return _t.length=0,Tt.forEach(Mt=>_t.push(Mt)),_t}const u$o=new Set,c$G=[],a$B=new Map,h$s=[0,0];let l$u=class extends y$1E{constructor(_t){super(_t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:_t,process:Tt,strategy:Mt}=this;this._queue=new l$y({concurrency:_t,process:(Pt,Ft)=>{const Dt=this._keyToItem.get(Pt);return Tt(Dt,{signal:Ft})},peeker:Mt==="scale-first"?Pt=>this._peekByScaleFirst(Pt):Pt=>this._peekByCenterFirst(Pt)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(_t){const Tt=typeof _t=="string"?_t:_t.id;this._queue.abort(Tt)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(_t){return typeof _t=="string"?this._keyToItem.has(_t):this._keyToItem.has(_t.id)}isOngoing(_t){const Tt=typeof _t=="string"?_t:_t.id;return this.has(Tt)&&this._queue.isOngoing(Tt)}pause(){this._queue.pause()}push(_t){const Tt=_t.key.id;if(this._queue.has(Tt))return this._queue.get(Tt);const Mt=this._queue.push(Tt),Pt=()=>{this._keyToItem.delete(Tt),this.notifyChange("updating")};return this._keyToItem.set(Tt,_t),Mt.then(Pt,Pt),this.notifyChange("updating"),Mt}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(_t){if(!this.state)return _t.values().next().value;const Tt=this.tileInfoView;let Mt=Number.NEGATIVE_INFINITY,Pt=Number.POSITIVE_INFINITY;_t.forEach(Xt=>{const Ht=this._keyToItem.get(Xt),Wt=this.tileInfoView.getTileScale(Ht.key);a$B.has(Wt)||(a$B.set(Wt,[]),Mt=Math.max(Wt,Mt),Pt=Math.min(Wt,Pt)),a$B.get(Wt).push(Ht.key),u$o.add(Wt)});let Ft=this.state.scale;a$B.has(Ft)||(n$D(c$G,u$o),c$G.sort((Xt,Ht)=>Xt-Ht),Ft=c$G.reduce((Xt,Ht)=>Math.abs(Ht-Ft)<Math.abs(Xt-Ft)?Ht:Xt,c$G[0])),Ft=Math.min(Ft,Mt),Ft=Math.max(Ft,Pt);const Dt=a$B.get(Ft),Nt=Tt.getClosestInfoForScale(Ft),Vt=Nt.getColumnForX(this.state.center[0]),zt=Nt.getRowForY(this.state.center[1]);return Dt.sort((Xt,Ht)=>{const Wt=Nt.denormalizeCol(Xt.col,Xt.world),Qt=Nt.denormalizeCol(Ht.col,Ht.world);return Math.sqrt((Vt-Wt)*(Vt-Wt)+(zt-Xt.row)*(zt-Xt.row))-Math.sqrt((Vt-Qt)*(Vt-Qt)+(zt-Ht.row)*(zt-Ht.row))}),u$o.clear(),a$B.clear(),Dt[0].id}_peekByCenterFirst(_t){if(!this.state)return _t.values().next().value;const Tt=this.tileInfoView,Mt=this.state.center;let Pt=Number.POSITIVE_INFINITY,Ft=null;return _t.forEach(Dt=>{const Nt=this._keyToItem.get(Dt);Tt.getTileCoords(h$s,Nt.key);const Vt=m$u(h$s,Mt);Vt<Pt&&(Pt=Vt,Ft=Nt.key)}),Ft.id}};e$2a([d$25({constructOnly:!0})],l$u.prototype,"concurrency",void 0),e$2a([d$25({constructOnly:!0})],l$u.prototype,"process",void 0),e$2a([d$25()],l$u.prototype,"state",void 0),e$2a([d$25({constructOnly:!0})],l$u.prototype,"strategy",void 0),e$2a([d$25({constructOnly:!0})],l$u.prototype,"tileInfoView",void 0),e$2a([d$25({readOnly:!0})],l$u.prototype,"updating",null),l$u=e$2a([n$2L("esri.views.2d.tiling.TileQueue")],l$u);const p$D=l$u;class t$p{constructor(Tt,Mt,Pt){this.maxSize=Tt,this.tileInfoView=Mt,this.removedFunc=Pt,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(Tt){return this._tilePerId.has(Tt)}get(Tt){return this._tilePerId.get(Tt)}pop(Tt){const Mt=this._tilePerId.get(Tt);if(!Mt)return null;const Pt=Mt.key.level,Ft=this._tileKeysPerLevel[Pt];i$x(this._tilePerId,Tt);for(let Dt=0;Dt<Ft.length;Dt++)if(Ft[Dt].id===Tt){Ft.splice(Dt,1);break}return Mt.visible=!0,Mt}add(Tt){Tt.visible=!1;const Mt=Tt.key,Pt=Mt.id;if(this._tilePerId.has(Pt))return;this._tilePerId.set(Pt,Tt);const Ft=Mt.level;this._tileKeysPerLevel[Ft]||(this._tileKeysPerLevel[Ft]=[]),this._tileKeysPerLevel[Ft].push(Mt)}prune(Tt,Mt,Pt){let Ft=this._tilePerId.size;if(Ft<=this.maxSize)return;let Dt=this._tileKeysPerLevel.length-1;for(;Ft>this.maxSize&&Dt>=0;)Dt!==Tt&&(Ft=this._pruneAroundCenterTile(Ft,Mt,Pt,Dt)),Dt--;Ft>this.maxSize&&(Ft=this._pruneAroundCenterTile(Ft,Mt,Pt,Tt))}_pruneAroundCenterTile(Tt,Mt,Pt,Ft){const Dt=this._tileKeysPerLevel[Ft];if(!Dt||Dt.length===0)return Tt;const{size:Nt,origin:Vt}=this.tileInfoView.tileInfo,zt=Pt*Nt[0],Xt=Pt*Nt[1],Ht=[0,0],Wt=[0,0];for(Dt.sort((Qt,Zt)=>(Ht[0]=Vt.x+zt*(Qt.col+.5),Ht[1]=Vt.y-Xt*(Qt.row+.5),Wt[0]=Vt.x+zt*(Zt.col+.5),Wt[1]=Vt.y-Xt*(Zt.row+.5),b$j(Ht,Mt)-b$j(Wt,Mt)));Dt.length>0;){const Qt=Dt.pop();if(this._removeTile(Qt.id),--Tt===this.maxSize)break}return Tt}_removeTile(Tt){const Mt=this._tilePerId.get(Tt);this.removedFunc&&this.removedFunc(Mt),i$x(this._tilePerId,Tt)}}function i$x(_t,Tt){_t.delete(Tt)}const a$A=new e$v(0,0,0,0),h$r=new Map,o$o=[],c$F=[];class r$o{constructor(Tt){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=Tt.acquireTile,this.releaseTile=Tt.releaseTile,this.tileInfoView=Tt.tileInfoView,this.resampling=Tt.resampling==null||!!Tt.resampling,Tt.cachePolicy&&(this.cachePolicy=Tt.cachePolicy),Tt.coveragePolicy&&(this.coveragePolicy=Tt.coveragePolicy),Tt.buffer!=null&&(this.buffer=Tt.buffer),Tt.cacheSize&&(this._tileCache=new t$p(Tt.cacheSize,this.tileInfoView,Mt=>{this.releaseTile(Mt)}))}destroy(){this.tileIndex.clear()}update(Tt){const{resampling:Mt,tileIndex:Pt}=this,Ft=this.tileInfoView.getTileCoverage(Tt.state,this.buffer,this.coveragePolicy);if(c$F.length=0,o$o.length=0,h$r.clear(),!Ft)return;const{minScale:Dt,maxScale:Nt}=this.tileInfoView.tileInfo,{spans:Vt,lodInfo:zt}=Ft,{level:Xt}=zt,{scale:Ht,center:Wt,resolution:Qt}=Tt.state,Zt=!Tt.stationary&&Ht>this._previousScale;if(this._previousScale=Ht,this.tiles.length=0,!Mt&&(Ht>Dt||Ht<Nt))return this.tiles.length=0,h$r.clear(),Pt.forEach(rr=>{this.releaseTile(rr)}),Pt.clear(),c$F.length=0,o$o.length=0,h$r.clear(),l$v.pool.release(Ft),!0;Pt.forEach(rr=>rr.visible=!0);let Kt=0,er=0;if(Vt.length>0)for(const{row:rr,colFrom:ir,colTo:nr}of Vt)for(let ar=ir;ar<=nr;ar++){Kt++;const or=a$A.set(Xt,rr,zt.normalizeCol(ar),zt.getWorldForColumn(ar)).id;if(Pt.has(or)){const ur=Pt.get(or);ur.isReady?(h$r.set(or,ur),er++):Zt||this._addParentTile(or,h$r)}else{let ur;if(this._tileCache&&this._tileCache.has(or)){if(ur=this._tileCache.pop(or),this.tileIndex.set(or,ur),ur.isReady){h$r.set(or,ur),er++;continue}}else ur=this.acquireTile(a$A),this.tileIndex.set(or,ur);Zt||this._addParentTile(or,h$r)}}const Yt=er===Kt;Pt.forEach((rr,ir)=>{if(a$A.set(ir),h$r.has(ir))return;const nr=this.tileInfoView.intersects(Ft,a$A),ar=this.cachePolicy==="purge"?a$A.level!==Xt:a$A.level>Xt;!nr||!Zt&&Yt?!ar&&nr||o$o.push(ir):rr.isReady?ar&&this.cachePolicy==="purge"&&this._hasReadyAncestor(a$A,Xt)?o$o.push(ir):c$F.push(ir):ar&&o$o.push(ir)});for(const rr of c$F){const ir=Pt.get(rr);ir&&ir.isReady&&h$r.set(rr,ir)}for(const rr of o$o){const ir=Pt.get(rr);this._tileCache?this._tileCache.add(ir):this.releaseTile(ir),Pt.delete(rr)}return h$r.forEach(rr=>this.tiles.push(rr)),Pt.forEach(rr=>{h$r.has(rr.key.id)||(rr.visible=!1)}),this._tileCache&&this._tileCache.prune(Xt,Wt,Qt),l$v.pool.release(Ft),h$r.clear(),Yt}clear(Tt=!0){const{tileIndex:Mt}=this;Tt&&Mt.forEach(Pt=>{this.releaseTile(Pt)}),Mt.clear()}updateCacheSize(Tt){this._tileCache&&(this._tileCache.maxSize=Tt)}_addParentTile(Tt,Mt){let Pt=Tt,Ft=null;for(;Pt=this.tileInfoView.getTileParentId(Pt),Pt;)if(this.tileIndex.has(Pt)){if(Ft=this.tileIndex.get(Pt),Ft&&Ft.isReady){Mt.has(Ft.key.id)||Mt.set(Ft.key.id,Ft);break}}else if(this._tileCache&&this._tileCache.has(Pt)&&(Ft=this._tileCache.pop(Pt),this.tileIndex.set(Pt,Ft),Ft&&Ft.isReady)){Mt.has(Ft.key.id)||Mt.set(Ft.key.id,Ft);break}}_hasReadyAncestor(Tt,Mt){const Pt=u$1C();this.tileInfoView.getTileBounds(Pt,Tt,!0);for(const Ft of this.tileIndex.values())if(Ft.isReady&&Ft.key.level>=Mt&&Ft.key.level<Tt.level){const Dt=u$1C();if(this.tileInfoView.getTileBounds(Dt,Ft.key,!0),R$r(Dt,Pt))return!0}return!1}}function t$o(_t,Tt){switch(Tt){case"primary":return _t.pointerType==="touch"||_t.button===0;case"secondary":return _t.pointerType!=="touch"&&_t.button===2;case"tertiary":return _t.pointerType!=="touch"&&_t.button===1}}class a$z extends i$Q{constructor(Tt,Mt){super(!0),this.view=Tt,this.registerIncoming("double-click",Mt,Pt=>this._handleDoubleClick(Pt,Mt))}_handleDoubleClick(Tt,Mt){t$o(Tt.data,"primary")&&(Tt.stopPropagation(),Mt?this.view.mapViewNavigation.zoomOut([Tt.data.x,Tt.data.y]):this.view.mapViewNavigation.zoomIn([Tt.data.x,Tt.data.y]))}}class e$t extends i$Q{constructor(Tt,Mt,Pt){super(!0),this.view=Tt,this.pointerType=Mt,this.registerIncoming("double-tap-drag",Pt,Ft=>this._handleDoubleTapDrag(Ft))}_handleDoubleTapDrag(Tt){const{data:Mt}=Tt,{pointerType:Pt}=Mt;if(Pt!==this.pointerType)return;Tt.stopPropagation();const{action:Ft,delta:Dt}=Mt,{view:Nt}=this,{mapViewNavigation:Vt}=Nt;switch(Ft){case"begin":{const{scale:zt}=Nt;this._startScale=zt,this._currentScale=zt,this._previousDelta=Dt,Vt.begin();break}case"update":{if(this._previousDelta.y===Dt.y)return;this._previousDelta=Dt;const zt=1.015**Dt.y,Xt=this._startScale*zt,Ht=Xt/this._currentScale;Vt.setViewpointImmediate(Ht),this._currentScale=Xt;break}case"end":{const{constraints:zt}=Nt,{effectiveLODs:Xt,snapToZoom:Ht}=zt;if(!Ht||!Xt)return void Vt.end();const Wt=zt.snapScale(this._currentScale),Qt=(Dt.y>0?Math.max(Wt,zt.snapToPreviousScale(this._startScale)):Math.min(Wt,zt.snapToNextScale(this._startScale)))/this._currentScale;Vt.zoom(Qt);break}}}}class t$n{constructor(Tt){this.callbacks=Tt,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(Tt){const Mt=Tt.data,Pt=Mt.pointers.size;switch(Mt.action){case"start":this.currentCount=Pt,this._emitStart(Tt);break;case"added":this._emitEnd(this.previousEvent),this.currentCount=Pt,this._emitStart(Tt);break;case"update":this._emitUpdate(Tt);break;case"removed":this.startEvent&&this._emitEnd(this.previousEvent),this.currentCount=Pt,this._emitStart(Tt);break;case"end":this._emitEnd(Tt),this.currentCount=0}this.previousEvent=Tt}_emitStart(Tt){this.startEvent=Tt,this.callbacks.condition(this.currentCount,Tt)&&this.callbacks.start(this.currentCount,Tt,this.startEvent)}_emitUpdate(Tt){this.callbacks.condition(this.currentCount,Tt)&&this.callbacks.update(this.currentCount,Tt,this.startEvent)}_emitEnd(Tt){this.callbacks.condition(this.currentCount,Tt)&&this.callbacks.end(this.currentCount,Tt,this.startEvent),this.startEvent=null}}class n$C extends i$Q{constructor(Tt,Mt,Pt){super(!0),this.view=Tt,this.pointerAction=Mt,this.registerIncoming("drag",Pt,Ft=>this._handleDrag(Ft)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(Tt){super.onInstall(Tt),this.dragEventSeparator=new t$n({start:(Mt,Pt)=>{this.view.mapViewNavigation.pan.begin(this.view,Pt.data),Pt.stopPropagation()},update:(Mt,Pt)=>{this.view.mapViewNavigation.pan.update(this.view,Pt.data),Pt.stopPropagation()},end:(Mt,Pt)=>{this.view.mapViewNavigation.pan.end(this.view,Pt.data),Pt.stopPropagation()},condition:(Mt,Pt)=>Mt===1&&t$o(Pt.data,this.pointerAction)})}_handleDrag(Tt){const Mt=this.view.mapViewNavigation;Mt.pinch.zoomMomentum||Mt.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(Tt)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class o$n extends i$Q{constructor(Tt,Mt,Pt){super(!0),this.view=Tt,this.pointerAction=Mt;const Ft=this.view.mapViewNavigation;this.dragEventSeparator=new t$n({start:(Dt,Nt)=>{Ft.rotate.begin(this.view,Nt.data),Nt.stopPropagation()},update:(Dt,Nt)=>{Ft.rotate.update(this.view,Nt.data),Nt.stopPropagation()},end:(Dt,Nt)=>{Ft.rotate.end(),Nt.stopPropagation()},condition:(Dt,Nt)=>Dt===1&&t$o(Nt.data,this.pointerAction)}),this.registerIncoming("drag",Pt,Dt=>this.dragEventSeparator.handle(Dt))}}function n$B(_t){let Tt=_t*_t;return _t<0&&(Tt*=-1),Tt}function a$y(_t){return _t.translation[0]=0,_t.translation[1]=0,_t.translation[2]=0,_t.heading=0,_t.tilt=0,_t}function i$w(_t,Tt,Mt){const Pt=Mt,Ft=_t.state,Dt=_t.device,Nt=Tt.tiltDirection==="forward-down"?1:-1,Vt=1;return Dt.deviceType==="standard"?(Pt.translation[0]=n$B(Ft.axes[0]),Pt.translation[1]=n$B(Ft.axes[1]),Pt.translation[2]=n$B(Ft.buttons[7])-n$B(Ft.buttons[6]),Pt.heading=n$B(Ft.axes[2]),Pt.tilt=n$B(Ft.axes[3])):Dt.deviceType==="spacemouse"&&(Pt.translation[0]=1.2*n$B(Ft.axes[0]),Pt.translation[1]=1.2*n$B(Ft.axes[1]),Pt.translation[2]=2*-n$B(Ft.axes[2]),Pt.heading=1.2*n$B(Ft.axes[5]),Pt.tilt=1.2*n$B(Ft.axes[3])),Pt.tilt*=Nt,q$l(Pt.translation,Pt.translation,Vt),Pt}function s$r(_t){return _t.translation[0]===0&&_t.translation[1]===0&&_t.translation[2]===0&&_t.heading===0&&_t.tilt===0&&_t.zoom===0}class d$u extends i$Q{constructor(Tt){super(!0),this.view=Tt,this.frameTask=null,this.watchHandles=new u$1P,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",Mt=>this._handleGamePadEvent(Mt)),this.handle.pause()}onInstall(Tt){super.onInstall(Tt),this.watchHandles.add([l$2e(()=>{var Mt;return(Mt=this.view.navigation.gamepad)==null?void 0:Mt.enabled},Mt=>{Mt?(this.handle.resume(),this.frameTask||(this.frameTask=A$B({update:Pt=>this._frameUpdate(Pt.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))},h$1w)])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}_handleGamePadEvent(Tt){const Mt=this.view.navigation.gamepad.device;Mt&&Tt.data.device!==Mt||this.currentDevice&&this.currentDevice!==Tt.data.device||(Tt.data.action==="end"?(this.currentDevice=null,a$y(this.transformation)):(this.currentDevice=Tt.data.device,i$w(Tt.data,this.view.navigation.gamepad,this.transformation)))}_frameUpdate(Tt){const Mt=this.transformation;if(s$r(Mt))return;const Pt=this.view.viewpoint.clone(),Ft=this.view.navigation.gamepad.velocityFactor,Dt=c$E*Ft*Tt;St(Pt,Pt,[Mt.translation[0]*Dt,-Mt.translation[1]*Dt]);const Nt=1+Mt.translation[2]*v$i*Tt,Vt=this.view.constraints.rotationEnabled?-Mt.heading*m$q*Tt:0,zt=this.view.size,Xt=[zt[0]/2,zt[1]];Gt(Pt,Pt,Nt,Vt,Xt,zt);const Ht=this.view.constraints.constrain(Pt,this.view.viewpoint);this.view.viewpoint=Ht}}const m$q=.06,c$E=.7,v$i=6e-4;class i$v extends i$Q{constructor(Tt,Mt,Pt){super(!0),this.view=Tt,this.keys=Mt,this._pressed=!1,this._keyMap={[Mt.left]:"left",[Mt.right]:"right",[Mt.up]:"up",[Mt.down]:"down"},this.registerIncoming("key-down",Pt,Ft=>this._handleKeyDown(Ft)),this.registerIncoming("key-up",Pt,Ft=>this._handleKeyUp(Ft)),this.registerIncoming("blur",Pt,()=>this._handleBlur())}_handleKeyDown(Tt){Tt.data.repeat||this._handleKey(Tt,!0)}_handleKeyUp(Tt){this._handleKey(Tt,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(Tt,Mt){const Pt=this._keyMap[Tt.data.key];if(this._pressed=Pt!=null,this._pressed){if(Mt)switch(this.view.mapViewNavigation.begin(),Pt){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();Tt.stopPropagation()}}}class i$u extends i$Q{constructor(Tt,Mt,Pt){super(!0),this.view=Tt,this.keys=Mt,this._pressed=!1,this._keyToDirection={[Mt.clockwiseOption1]:"clockwise",[Mt.clockwiseOption2]:"clockwise",[Mt.counterClockwiseOption1]:"counterClockwise",[Mt.counterClockwiseOption2]:"counterClockwise",[Mt.resetOption1]:"reset",[Mt.resetOption2]:"reset"},this.registerIncoming("key-down",Pt,Ft=>this._handleKeyDown(Ft)),this.registerIncoming("key-up",Pt,Ft=>this._handleKeyUp(Ft)),this.registerIncoming("blur",Pt,()=>this._handleBlur())}_handleKeyDown(Tt){Tt.data.repeat||this._handleKey(Tt,!0)}_handleKeyUp(Tt){this._handleKey(Tt,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(Tt,Mt){const Pt=Tt.modifiers;if(Pt.size>0&&!Pt.has("Shift")||!this.view.constraints.rotationEnabled)return;const Ft=this._keyToDirection[Tt.data.key];if(this._pressed=Ft!=null,this._pressed){if(Mt)switch(this.view.mapViewNavigation.begin(),Ft){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();Tt.stopPropagation()}}}var t$m;(function(_t){_t[_t.IN=0]="IN",_t[_t.OUT=1]="OUT"})(t$m||(t$m={}));class e$s extends i$Q{constructor(Tt,Mt,Pt){super(!0),this.view=Tt,this.keys=Mt,this._keysToZoomAction={},this.registerIncoming("key-down",Pt,Ft=>this._handleKeyDown(Ft)),Mt.zoomIn.forEach(Ft=>this._keysToZoomAction[Ft]=t$m.IN),Mt.zoomOut.forEach(Ft=>this._keysToZoomAction[Ft]=t$m.OUT)}_handleKeyDown(Tt){this._handleKey(Tt)}_handleKey(Tt){const Mt=Tt.modifiers;if(Mt.size>0&&!Mt.has("Shift"))return;const{key:Pt}=Tt.data;if(!(Pt in this._keysToZoomAction))return;const Ft=this._keysToZoomAction[Pt],{mapViewNavigation:Dt}=this.view;let Nt=null;switch(Ft){case t$m.IN:Nt=Dt.zoomIn();break;case t$m.OUT:Nt=Dt.zoomOut();break;default:return}Dt.begin(),Nt.then(()=>Dt.end()),Tt.stopPropagation()}}const t$l=.6;class o$m extends i$Q{constructor(Tt,Mt){super(!0),this.view=Tt,this._canZoom=!0,this.registerIncoming("mouse-wheel",Mt,Pt=>this._handleMouseWheel(Pt))}_handleMouseWheel(Tt){if(!this.view.navigation.mouseWheelZoomEnabled||(Tt.preventDefault(),Tt.stopPropagation(),!this._canZoom))return;const Mt=this.view.mapViewNavigation,{x:Pt,y:Ft,deltaY:Dt}=Tt.data,Nt=1/t$l**(1/60*Dt),Vt=Mt.zoom(Nt,[Pt,Ft]);Vt&&(this._canZoom=!1,Vt.catch(()=>{}).then(()=>{this._canZoom=!0,Mt.end()}))}}class a$x extends i$Q{constructor(Tt){super(!0),this.view=Tt,this.registerIncoming("drag",Pt=>this._handleDrag(Pt)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const Mt=this.view.mapViewNavigation;this.dragEventSeparator=new t$n({start:(Pt,Ft)=>{Mt.pinch.begin(this.view,Ft.data),Ft.stopPropagation()},update:(Pt,Ft)=>{Mt.pinch.update(this.view,Ft.data),Ft.stopPropagation()},end:(Pt,Ft)=>{Mt.pinch.end(this.view),Ft.stopPropagation()},condition:Pt=>Pt>=2})}_handleDrag(Tt){this.dragEventSeparator.handle(Tt)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function t$k(_t){const Tt=_t.native;return Tt?{buttons:Tt.buttons.map(Mt=>Mt.pressed?Mt.value?Mt.value:1:0),axes:Tt.axes.map(Mt=>s$q(Mt,_t.axisThreshold))}:{buttons:[],axes:[]}}function n$A(_t,Tt){if(_t.axes.length!==Tt.axes.length||_t.buttons.length!==Tt.buttons.length)return!1;for(let Mt=0;Mt<_t.axes.length;Mt++)if(_t.axes[Mt]!==Tt.axes[Mt])return!1;for(let Mt=0;Mt<_t.buttons.length;Mt++)if(_t.buttons[Mt]!==Tt.buttons[Mt])return!1;return!0}function e$r(_t){for(let Tt=0;Tt<_t.axes.length;Tt++)if(_t.axes[Tt]!==0)return!1;for(let Tt=0;Tt<_t.buttons.length;Tt++)if(_t.buttons[Tt]!==0)return!1;return!0}function s$q(_t,Tt){const Mt=Math.abs(_t);return Mt<Tt?0:Math.sign(_t)*(Mt-Tt)/(1-Tt)}class a$w{constructor(Tt,Mt){this.element=Tt,this.input=Mt,this._hasEventListeners=!1,this._onConnectGamepad=Dt=>{this._connectGamepad(Dt.gamepad)},this._onDisconnectGamepad=Dt=>{const Nt=Dt.gamepad,Vt=Nt.index,zt=this.inputDevices[Vt];zt&&(this._emitGamepadEvent(Nt,t$k(zt),!1),this.inputDevices.splice(Vt,1),this.latestUpdate.splice(Vt,1),this.input.gamepad.devices.remove(zt),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const Pt="getGamepads"in window.navigator,Ft=window.isSecureContext;this.supported=Pt&&Ft,this.supported&&(this._forEachGamepad(Dt=>this._connectGamepad(Dt)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(Tt){this._hasEventListeners!==Tt&&(this._hasEventListeners=Tt,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(Tt){this.callback=Tt}_connectGamepad(Tt){const Mt=new i$H(Tt);Mt.deviceType!=="unknown"&&(this.inputDevices[Tt.index]=Mt,this.input.gamepad.devices.add(Mt)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this.frameTask==null&&(this.frameTask=A$B({update:()=>this._readGamepadState()}))}_stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}_readGamepadState(){const Tt=document.hasFocus(),Mt=this.element.contains(document.activeElement),Pt=this.input.gamepad.enabledFocusMode==="document"&&!Tt||this.input.gamepad.enabledFocusMode==="view"&&!Mt;this._forEachGamepad(Ft=>{const Dt=this.inputDevices[Ft.index];if(!Dt)return;const Nt=this.latestUpdate[Ft.index],Vt=t$k(Dt),zt=Pt||e$r(Vt);Nt&&(Nt.timestamp===Ft.timestamp||!Nt.active&&zt||n$A(Nt.state,Vt))||this._emitGamepadEvent(Ft,Vt,!zt)})}_forEachGamepad(Tt){const Mt=window.navigator.getGamepads();for(let Pt=0;Pt<Mt.length;Pt++){const Ft=Mt[Pt];this._validate(Ft)&&Tt(Ft)}}_emitGamepadEvent(Tt,Mt,Pt){const Ft=this.latestUpdate[Tt.index],Dt=Ft&&Ft.active;if(!Dt&&!Pt)return;const Nt=!Dt&&Pt?"start":Dt&&Pt?"update":"end";this.latestUpdate[Tt.index]={timestamp:Tt.timestamp,state:Mt,active:Pt},this.callback&&this.callback({device:this.inputDevices[Tt.index],state:Mt,action:Nt})}_validate(Tt){if(!Tt||!Tt.connected)return!1;for(let Mt=0;Mt<Tt.axes.length;Mt++)if(isNaN(Tt.axes[Mt]))return!1;return!0}}const o$l=a$32("trident"),a$v=a$32("edge"),s$p=a$32("chrome"),r$n=a$32("ff"),h$q=a$32("safari"),l$t={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class u$n{constructor(Tt,Mt){this.input=Mt,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=Tt,Tt.getAttribute("tabindex")||Tt.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new a$w(Tt,this.input),this._gamepadSource.onEvent=Pt=>this._callback("gamepad",Pt)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(Tt=>{this._releasePointerCaptureSafe(Tt)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(Tt){this._browserTouchPanningEnabled=Tt,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(Tt){this._callback=Tt}set activeEvents(Tt){for(const Mt in this._active)if(!Tt||!Tt.has(Mt)){const Pt=this._active[Mt];this._element.removeEventListener(c$D[Mt],Pt),delete this._active[Mt]}Tt&&Tt.forEach(Mt=>{if(!this._active[Mt]&&c$D[Mt]){const Pt=(this._eventHandlers[Mt]||this._handleDefault).bind(this,Mt);this._element.addEventListener(c$D[Mt],Pt),this._active[Mt]=Pt}}),this._gamepadSource.hasEventListeners=Tt&&Tt.has("gamepad")}setPointerCapture(Tt,Mt){Mt?(this._element.setPointerCapture(Tt.pointerId),this._activePointerCaptures.add(Tt.pointerId)):(this._releasePointerCaptureSafe(Tt.pointerId),this._activePointerCaptures.delete(Tt.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?l$t.touchNone:l$t.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?l$t.touchPan:l$t.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(l$t.touchNone),this._element.classList.remove(l$t.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(Tt){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(Tt))return;this._element.releasePointerCapture(Tt)}catch{}}_updateNormalizedPointerLikeEvent(Tt,Mt){const Pt=i$I(this._element,Tt);return u$n.test.disableSubpixelCoordinates&&(Pt.x=Math.round(Pt.x),Pt.y=Math.round(Pt.y)),Mt.x=Pt.x,Mt.y=Pt.y,Mt}_handleKey(Tt,Mt){const Pt=a$T(Mt);Pt&&Tt==="key-up"&&this._keyDownState.delete(Pt);const Ft={native:Mt,key:Pt,repeat:Pt&&this._keyDownState.has(Pt)};Pt&&Tt==="key-down"&&this._keyDownState.add(Ft.key),this._callback(Tt,Ft)}_handlePointer(Tt,Mt){const Pt=this._updateNormalizedPointerLikeEvent(Mt,{native:Mt,x:0,y:0,pointerType:Mt.pointerType,button:Mt.button,buttons:Mt.buttons,eventId:this._eventId++});this._callback(Tt,Pt)}_handlePointerPreventDefault(Tt,Mt){const Pt=this._updateNormalizedPointerLikeEvent(Mt,{native:Mt,x:0,y:0,pointerType:Mt.pointerType,button:Mt.button,buttons:Mt.buttons,eventId:this._eventId++});Mt.preventDefault(),this._callback(Tt,Pt)}_handleMouseWheel(Tt,Mt){let Pt=Mt.deltaY;switch(Mt.deltaMode){case 0:(o$l||a$v)&&(Pt=Pt/document.documentElement.clientHeight*600);break;case 1:Pt*=30;break;case 2:Pt*=900}o$l||a$v?Pt*=.7:s$p||h$q?Pt*=.6:r$n&&(Pt*=1.375);const Ft=100,Dt=Math.abs(Pt);Dt>Ft&&(Pt=Pt/Dt*200/(1+Math.exp(-.02*(Dt-Ft))));const Nt=this._updateNormalizedPointerLikeEvent(Mt,{native:Mt,x:0,y:0,deltaY:Pt});this._callback(Tt,Nt)}_handlePointerCaptureLost(Tt,Mt){this._activePointerCaptures.delete(Mt.pointerId),this._handleDefault(Tt,Mt)}_handleDefault(Tt,Mt){const Pt={native:Mt};Mt.preventDefault(),this._callback(Tt,Pt)}_preventAltKeyDefault(Tt){Tt.key==="Alt"&&Tt.preventDefault()}_preventMultiTouchPanning(Tt){Tt.touches.length>1&&Tt.preventDefault()}}u$n.test={disableSubpixelCoordinates:!1};const c$D={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class e$q extends i$Q{constructor(){super(!0),this.registerIncoming("context-menu",Tt=>{Tt.data.native.preventDefault()})}}function e$p(_t,Tt){return Math.abs(Tt.x-_t.x)+Math.abs(Tt.y-_t.y)}function n$z(_t,Tt){const Mt=Tt.x-_t.x,Pt=Tt.y-_t.y;return Math.sqrt(Mt*Mt+Pt*Pt)}function r$m(_t,Tt){if(Tt?(Tt.radius=0,Tt.center.x=0,Tt.center.y=0):Tt={radius:0,center:c$2D()},_t.length===0)return Tt;if(_t.length===1)return Tt.center.x=_t[0].x,Tt.center.y=_t[0].y,Tt;if(_t.length===2){const[nr,ar]=_t,[or,ur]=[ar.x-nr.x,ar.y-nr.y];return Tt.radius=Math.sqrt(or*or+ur*ur)/2,Tt.center.x=(nr.x+ar.x)/2,Tt.center.y=(nr.y+ar.y)/2,Tt}let Mt=0,Pt=0;for(let nr=0;nr<_t.length;nr++)Mt+=_t[nr].x,Pt+=_t[nr].y;Mt/=_t.length,Pt/=_t.length;const Ft=_t.map(nr=>nr.x-Mt),Dt=_t.map(nr=>nr.y-Pt);let Nt=0,Vt=0,zt=0,Xt=0,Ht=0,Wt=0,Qt=0;for(let nr=0;nr<Ft.length;nr++){const ar=Ft[nr],or=Dt[nr],ur=ar*ar,dr=or*or;Nt+=ur,Vt+=dr,zt+=ar*or,Xt+=ur*ar,Ht+=dr*or,Wt+=ar*dr,Qt+=or*ur}const Zt=.5*(Xt+Wt),Kt=.5*(Ht+Qt),er=Nt*Vt-zt*zt,Yt=(Zt*Vt-Kt*zt)/er,rr=(Nt*Kt-zt*Zt)/er,ir=c$2D(Yt+Mt,rr+Pt);return{radius:Math.sqrt(Yt*Yt+rr*rr+(Nt+Vt)/_t.length),center:ir}}const s$o={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class a$u extends i$Q{constructor(Tt=s$o.maximumDoubleClickDelay,Mt=s$o.maximumDoubleClickDistance,Pt=s$o.maximumDoubleTouchDelay,Ft=s$o.maximumDoubleTouchDistance,Dt=t$20){super(!1),this.maximumDoubleClickDelay=Tt,this.maximumDoubleClickDistance=Mt,this.maximumDoubleTouchDelay=Pt,this.maximumDoubleTouchDistance=Ft,this._clock=Dt,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(Tt=>Tt.doubleClickTimeout=a$31(Tt.doubleClickTimeout))}get hasPendingInputs(){return n$2O(this._pointerState,Tt=>Tt.doubleClickTimeout!=null)}_pointerId(Tt){const Mt=Tt.native;return Mt.pointerType==="mouse"?`${Mt.pointerId}:${Mt.button}`:`${Mt.pointerType}`}_handleImmediateClick(Tt){const Mt=Tt.data,Pt=this._pointerId(Mt),Ft=this._pointerState.get(Pt);if(Ft){const Dt=Mt.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e$p(Ft.event.data,Mt)>Dt?(this._clearDoubleClickTimeout(Pt,!0),this._startClick(Tt)):(this._clearDoubleClickTimeout(Pt,!1),this._doubleClick.emit(Ft.event.data,void 0,Ft.event.modifiers))}else this._startClick(Tt)}_startClick(Tt){const Mt=this._pointerId(Tt.data),Pt=Tt.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(Mt,{event:Tt,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(Mt),Pt)}),this.refreshHasPendingInputs()}_handlePointerDrag(Tt){const Mt=this._pointerId(Tt.data.currentEvent);this._clearDoubleClickTimeout(Mt,!0)}_handleDrag(Tt){const Mt=this._pointerId(Tt.data.pointer);this._clearDoubleClickTimeout(Mt,!0)}_clearDoubleClickTimeout(Tt,Mt){const Pt=this._pointerState.get(Tt);Pt&&(Pt.doubleClickTimeout.remove(),Pt.doubleClickTimeout=null,Mt&&this._doubleClickTimeoutExceeded(Tt),this._pointerState.delete(Tt),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(Tt){const Mt=this._pointerState.get(Tt);this._click.emit(Mt.event.data,void 0,Mt.event.modifiers),Mt.doubleClickTimeout=null,this._pointerState.delete(Tt),this.refreshHasPendingInputs()}}class s$n extends i$Q{constructor(Tt=s$o.maximumDoubleClickDelay,Mt=s$o.maximumDoubleClickDistance,Pt=s$o.maximumDoubleTouchDelay,Ft=s$o.maximumDoubleTouchDistance,Dt=t$20){super(!1),this.maximumDoubleClickDelay=Tt,this.maximumDoubleClickDistance=Mt,this.maximumDoubleTouchDelay=Pt,this.maximumDoubleTouchDistance=Ft,this._clock=Dt,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=c$2D(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new t$n({start:(Nt,Vt)=>this._dragStart(Nt,Vt),update:(Nt,Vt)=>this._dragUpdate(Vt),end:(Nt,Vt)=>this._dragEnd(Vt)}),this.registerIncoming("drag",Nt=>this._dragEventSeparator.handle(Nt)),this.registerIncoming("pointer-down",Nt=>this._handlePointerDown(Nt)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(Tt=>{Tt.doubleTapTimeout!=null&&(Tt.doubleTapTimeout.remove(),Tt.doubleTapTimeout=null)})}get hasPendingInputs(){return n$2O(this._pointerState,Tt=>Tt.doubleTapTimeout!=null)}_clearPointerDown(Tt){const Mt=this._pointerState.get(Tt);Mt&&(Mt.doubleTapTimeout.remove(),Mt.doubleTapTimeout=null,this._pointerState.delete(Tt),this.refreshHasPendingInputs())}_createDoubleTapDragData(Tt,Mt,Pt){const{button:Ft,buttons:Dt,pointer:Nt,pointers:Vt,pointerType:zt,timestamp:Xt}=Pt;return{action:Tt,delta:Mt,button:Ft,buttons:Dt,pointer:Nt,pointers:Vt,pointerType:zt,timestamp:Xt}}_dragStart(Tt,Mt){if(!this._doubleTapDragReady||Tt!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:Pt,modifiers:Ft}=Mt,{center:Dt}=Pt;this._dragStartCenter=Dt;const Nt=this._createDoubleTapDragData("begin",c$2D(0,0),Pt);this._doubleTapDrag.emit(Nt,void 0,Ft),Mt.stopPropagation()}_dragUpdate(Tt){if(!this._doubleTapDragActive)return;const{data:Mt,modifiers:Pt}=Tt,{center:Ft}=Mt,Dt=c$2D(Ft.x-this._dragStartCenter.x,Ft.y-this._dragStartCenter.y),Nt=this._createDoubleTapDragData("update",Dt,Mt);this._doubleTapDrag.emit(Nt,void 0,Pt),Tt.stopPropagation()}_dragEnd(Tt){if(!this._doubleTapDragActive)return;const{data:Mt,modifiers:Pt}=Tt,{center:Ft}=Mt,Dt=c$2D(Ft.x-this._dragStartCenter.x,Ft.y-this._dragStartCenter.y),Nt=this._createDoubleTapDragData("end",Dt,Mt);this._doubleTapDrag.emit(Nt,void 0,Pt),this._doubleTapDragActive=!1,Tt.stopPropagation()}_handlePointerDown(Tt){const{data:Mt}=Tt,Pt=this._pointerId(Mt),Ft=this._pointerState.get(Pt),{pointerType:Dt}=Mt.native;if(Ft){const Nt=Dt==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(Pt),e$p(Ft.event.data,Mt)>Nt?this._storePointerDown(Tt):this._doubleTapDragReady=!0}else this._storePointerDown(Tt)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(Tt){const{native:Mt}=Tt,{pointerId:Pt,button:Ft,pointerType:Dt}=Mt;return Dt==="mouse"?`${Pt}:${Ft}`:`${Dt}`}_storePointerDown(Tt){const{data:Mt}=Tt,{pointerType:Pt}=Mt.native,Ft=this._pointerId(Mt),Dt=Pt==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,Nt=this._clock.setTimeout(()=>this._clearPointerDown(Ft),Dt);this._pointerState.set(Ft,{event:Tt,doubleTapTimeout:Nt}),this.refreshHasPendingInputs()}}class s$m extends i$Q{constructor(Tt){super(!1),this.navigationTouch=Tt,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(Tt,Mt,Pt,Ft){return{action:Tt,pointerType:this.pointerType,button:this.mouseButton,buttons:Mt.buttons,timestamp:Ft,pointers:o$k(this.activePointerMap),pointer:Mt,angle:Pt.angle,radius:Pt.radius,center:Pt.center}}_addPointer(Tt){const Mt=Tt.native.pointerId,Pt=a$t(this.activePointerMap).angle,Ft={event:Tt,initialAngle:0,lastAngle:0};this.activePointerMap.set(Mt,Ft);const Dt=h$p(Ft,r$l(this.activePointerMap));Ft.initialAngle=Dt,Ft.lastAngle=Dt,this._updatePointerAngles(Pt)}_updatePointer(Tt){if(Tt&&Tt.x==null&&Tt.y==null)return;const Mt=Tt.native.pointerId,Pt=this.activePointerMap.get(Mt);Pt?Pt.event=Tt:this._addPointer(Tt)}_removePointer(Tt){const Mt=a$t(this.activePointerMap).angle;this.activePointerMap.delete(Tt),this._updatePointerAngles(Mt)}_updatePointerAngles(Tt){const Mt=a$t(this.activePointerMap);this.activePointerMap.forEach(Pt=>{Pt.initialAngle=h$p(Pt,Mt)-Tt,Pt.lastAngle=h$p(Pt,Mt)-Tt})}_emitEvent(Tt,Mt,Pt){const Ft=a$t(this.activePointerMap);this.drag.emit(this._createPayload(Tt,Mt,Ft,Pt),void 0,this.startStateModifiers)}_handlePointerUpAndPointerLost(Tt){const Mt=Tt.data.native.pointerId,Pt=Tt.timestamp;this.activePointerMap.get(Mt)&&(this.activePointerMap.size===1?(this._updatePointer(Tt.data),!this.isCurrentDragSuppressed&&this._emitEvent("end",Tt.data,Pt),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this._removePointer(Mt)):(this._removePointer(Mt),this._emitEvent("removed",Tt.data,Tt.timestamp)))}_handlePointerDrag(Tt){const Mt=Tt.data,Pt=Mt.currentEvent,Ft=Tt.timestamp;switch(Mt.action){case"start":case"update":this.isDragging?this.activePointerMap.has(Pt.native.pointerId)?(this._updatePointer(Pt),!this.isCurrentDragSuppressed&&this._emitEvent("update",Pt,Ft)):(this._addPointer(Pt),this._emitEvent("added",Pt,Ft),this.isCurrentDragSuppressed=this.isSuppressed):(this._updatePointer(Pt),this.pointerType=Tt.data.startEvent.pointerType,this.mouseButton=Tt.data.startEvent.button,this.startStateModifiers=Tt.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this._emitEvent("start",Pt,Ft))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function r$l(_t){const Tt=[];return _t.forEach(Mt=>{Tt.push(c$2D(Mt.event.x,Mt.event.y))}),r$m(Tt)}function a$t(_t){const Tt=r$l(_t);let Mt=0;return _t.forEach(Pt=>{let Ft=h$p(Pt,Tt),Dt=Ft-Pt.lastAngle;for(;Dt>Math.PI;)Dt-=2*Math.PI;for(;Dt<-Math.PI;)Dt+=2*Math.PI;Ft=Pt.lastAngle+Dt,Pt.lastAngle=Ft,Mt+=Ft-Pt.initialAngle}),Mt/=_t.size||1,{angle:Mt,radius:Tt.radius,center:Tt.center}}function o$k(_t){const Tt=new Map;return _t.forEach((Mt,Pt)=>Tt.set(Pt,Mt.event)),Tt}function h$p(_t,Tt){const Mt=_t.event,Pt=Mt.x-Tt.center.x,Ft=Mt.y-Tt.center.y;return Math.atan2(Ft,Pt)}var p$C;(function(_t){_t[_t.Left=0]="Left",_t[_t.Middle=1]="Middle",_t[_t.Right=2]="Right",_t[_t.Back=3]="Back",_t[_t.Forward=4]="Forward",_t[_t.Undefined=-1]="Undefined"})(p$C||(p$C={}));class n$y extends i$Q{constructor(Tt=s$o.maximumDoubleClickDelay,Mt=s$o.maximumDoubleClickDistance,Pt=s$o.maximumDoubleTouchDelay,Ft=s$o.maximumDoubleTouchDistance,Dt=t$20){super(!1),this.maximumDoubleClickDelay=Tt,this.maximumDoubleClickDistance=Mt,this.maximumDoubleTouchDelay=Pt,this.maximumDoubleTouchDistance=Ft,this._clock=Dt,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",Nt=>{this._handlePointerLoss(Nt,"pointer-up")}),this.registerIncoming("pointer-capture-lost",Nt=>{this._handlePointerLoss(Nt,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",Nt=>{this._handlePointerLoss(Nt,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(Tt=>{Tt.immediateDoubleClick&&Tt.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(Tt){const Mt=Tt.data,Pt=this._pointerId(Mt);if(!this._pointerState.has(Pt)){const Ft={downButton:Mt.native.button,immediateDoubleClick:null};this._pointerState.set(Pt,Ft),this.startCapturingPointer(Mt.native)}}_handlePointerLoss(Tt,Mt){const Pt=Tt.data,Ft=this._pointerId(Pt),Dt=this._pointerState.get(Ft);if(Dt&&Mt==="pointer-up"&&Dt.downButton===Pt.native.button){const Nt=Dt.immediateDoubleClick;if(Nt){Nt.timeoutHandle.remove();const Vt=Tt.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e$p(Nt,Tt.data)>Vt?this._startImmediateDoubleClick(Tt,Dt):(this._immediateDoubleClick.emit(Tt.data,void 0,Nt.modifiers),this._removeState(Pt))}else this._startImmediateDoubleClick(Tt,Dt)}}_startImmediateDoubleClick(Tt,Mt){const Pt=Tt.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;Mt.immediateDoubleClick={x:Tt.data.x,y:Tt.data.y,modifiers:Tt.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(Tt.data),Pt)}}_pointerId(Tt){const Mt=Tt.native;return Mt.pointerType==="mouse"?`${Mt.pointerId}:${Mt.button}`:`${Mt.pointerType}`}_removeState(Tt){const Mt=this._pointerId(Tt);this._pointerState.delete(Mt),this.stopCapturingPointer(Tt.native),this.refreshHasPendingInputs()}}const n$x={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class o$j extends i$Q{constructor(Tt=n$x.maximumClickDelay,Mt=n$x.movementUntilMouseDrag,Pt=n$x.movementUntilPenDrag,Ft=n$x.movementUntilTouchDrag,Dt=n$x.holdDelay,Nt=t$20){super(!1),this.maximumClickDelay=Tt,this.movementUntilMouseDrag=Mt,this.movementUntilPenDrag=Pt,this.movementUntilTouchDrag=Ft,this.holdDelay=Dt,this._clock=Nt,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",Vt=>{this._handlePointerLoss(Vt,"pointer-up")}),this.registerIncoming("pointer-capture-lost",Vt=>{this._handlePointerLoss(Vt,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",Vt=>{this._handlePointerLoss(Vt,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(Tt=>{Tt.holdTimeout!=null&&(Tt.holdTimeout.remove(),Tt.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(Tt){const Mt=Tt.data,Pt=Mt.native.pointerId;let Ft=null;this._pointerState.size===0&&(Ft=this._clock.setTimeout(()=>{const Nt=this._pointerState.get(Pt);if(Nt){if(!Nt.isDragging){const Vt=Nt.previousEvent;this._pointerHold.emit(Vt,void 0,Tt.modifiers),Nt.holdEmitted=!0}Nt.holdTimeout=null}},this.holdDelay));const Dt={startEvent:Mt,previousEvent:Mt,startTimestamp:Tt.timestamp,isDragging:!1,downButton:Mt.native.button,holdTimeout:Ft,modifiers:new Set};this._pointerState.set(Pt,Dt),this.startCapturingPointer(Mt.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(Tt)}_createPointerDragData(Tt,Mt,Pt){return{action:Tt,startEvent:Mt.startEvent,previousEvent:Mt.previousEvent,currentEvent:Pt}}_handlePointerMove(Tt){const Mt=Tt.data,Pt=Mt.native.pointerId,Ft=this._pointerState.get(Pt);Ft&&(Ft.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",Ft,Mt),void 0,Ft.modifiers):n$z(Mt,Ft.startEvent)>this._getDragThreshold(Mt.native.pointerType)&&this._startDragging(Tt),Ft.previousEvent=Mt)}_getDragThreshold(Tt){switch(Tt){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}_startDragging(Tt){const Mt=Tt.data,Pt=Mt.native.pointerId;this._pointerState.forEach(Ft=>{Ft.holdTimeout!=null&&(Ft.holdTimeout.remove(),Ft.holdTimeout=null),Ft.isDragging||(Ft.modifiers=Tt.modifiers,Ft.isDragging=!0,Pt===Ft.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",Ft,Mt)):this._pointerDrag.emit(this._createPointerDragData("start",Ft,Ft.previousEvent),Tt.timestamp))})}_handlePointerLoss(Tt,Mt){const Pt=Tt.data,Ft=Pt.native.pointerId,Dt=this._pointerState.get(Ft);Dt&&(Dt.holdTimeout!=null&&(Dt.holdTimeout.remove(),Dt.holdTimeout=null),Dt.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",Dt,Mt==="pointer-up"?Pt:Dt.previousEvent),void 0,Dt.modifiers):Mt==="pointer-up"&&Dt.downButton===Pt.native.button&&Tt.timestamp-Dt.startTimestamp<=this.maximumClickDelay&&!Dt.holdEmitted&&this._immediateClick.emit(Pt),this._pointerState.delete(Ft),this.stopCapturingPointer(Pt.native),this._pointerState.size===0&&this._moveHandle.pause())}}const z$6={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let T$7=class extends y$1E{constructor(){super(...arguments),this._handles=new u$1P}initialize(){const _t=()=>{var Tt;return(Tt=this.view)==null?void 0:Tt.ready};this._handles.add([f$1p(()=>!_t(),()=>this._disconnect()),f$1p(_t,()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}get latestPointerType(){var _t;return(_t=this._inputManager)==null?void 0:_t.latestPointerType}get latestPointerLocation(){var _t;return(_t=this._inputManager)==null?void 0:_t.latestPointerLocation}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const _t=this.view.surface,Tt=new u$n(_t,this.view.input),Mt=[new n$y,new o$j,new a$u,new s$m(this.view.navigation),new s$n],Pt=new c$X({eventSource:Tt,recognizers:Mt});Pt.installHandlers("prevent-context-menu",[new e$q],g$o.INTERNAL),Pt.installHandlers("navigation",[new a$x(this.view),new d$u(this.view),new o$m(this.view),new a$z(this.view),new a$z(this.view,[z$6.counter]),new n$C(this.view,"primary"),new i$v(this.view,z$6.pan),new e$s(this.view,z$6.zoom),new i$u(this.view,z$6.rotate),new o$n(this.view,"secondary"),new e$t(this.view,"touch")],g$o.INTERNAL),this.view.viewEvents.connect(Pt),this._source=Tt,this._inputManager=Pt,l$2e(()=>{var Ft,Dt;return(Dt=(Ft=this.view)==null?void 0:Ft.navigation)==null?void 0:Dt.browserTouchPanEnabled},Ft=>{this._source&&(this._source.browserTouchPanningEnabled=!Ft)},h$1w)}get test(){return{inputManager:this._inputManager}}};e$2a([d$25()],T$7.prototype,"view",void 0),e$2a([d$25()],T$7.prototype,"latestPointerType",null),e$2a([d$25()],T$7.prototype,"latestPointerLocation",null),T$7=e$2a([n$2L("esri.views.2d.input.MapViewInputManager")],T$7);const k$7=T$7;var t$j,o$i,r$k,n$w={exports:{}};t$j=n$w,o$i=function(){function _t(Ft,Dt,Nt,Vt,zt){Tt(Ft,Dt,Nt||0,Vt||Ft.length-1,zt||Pt)}function Tt(Ft,Dt,Nt,Vt,zt){for(;Vt>Nt;){if(Vt-Nt>600){var Xt=Vt-Nt+1,Ht=Dt-Nt+1,Wt=Math.log(Xt),Qt=.5*Math.exp(2*Wt/3),Zt=.5*Math.sqrt(Wt*Qt*(Xt-Qt)/Xt)*(Ht-Xt/2<0?-1:1);Tt(Ft,Dt,Math.max(Nt,Math.floor(Dt-Ht*Qt/Xt+Zt)),Math.min(Vt,Math.floor(Dt+(Xt-Ht)*Qt/Xt+Zt)),zt)}var Kt=Ft[Dt],er=Nt,Yt=Vt;for(Mt(Ft,Nt,Dt),zt(Ft[Vt],Kt)>0&&Mt(Ft,Nt,Vt);er<Yt;){for(Mt(Ft,er,Yt),er++,Yt--;zt(Ft[er],Kt)<0;)er++;for(;zt(Ft[Yt],Kt)>0;)Yt--}zt(Ft[Nt],Kt)===0?Mt(Ft,Nt,Yt):Mt(Ft,++Yt,Vt),Yt<=Dt&&(Nt=Yt+1),Dt<=Yt&&(Vt=Yt-1)}}function Mt(Ft,Dt,Nt){var Vt=Ft[Dt];Ft[Dt]=Ft[Nt],Ft[Nt]=Vt}function Pt(Ft,Dt){return Ft<Dt?-1:Ft>Dt?1:0}return _t},(r$k=o$i())!==void 0&&(t$j.exports=r$k);const a$s=n$w.exports;function i$t(_t,Tt){if(!(this instanceof i$t))return new i$t(_t,Tt);this._maxEntries=Math.max(4,_t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),Tt&&(typeof Tt=="function"?this.toBBox=Tt:this._initFormat(Tt)),this.clear()}function n$v(_t,Tt,Mt){if(!Mt)return Tt.indexOf(_t);for(var Pt=0;Pt<Tt.length;Pt++)if(Mt(_t,Tt[Pt]))return Pt;return-1}function h$o(_t,Tt){a$r(_t,0,_t.children.length,Tt,_t)}function a$r(_t,Tt,Mt,Pt,Ft){Ft||(Ft=x$d(null)),Ft.minX=1/0,Ft.minY=1/0,Ft.maxX=-1/0,Ft.maxY=-1/0;for(var Dt,Nt=Tt;Nt<Mt;Nt++)Dt=_t.children[Nt],r$j(Ft,_t.leaf?Pt(Dt):Dt);return Ft}function r$j(_t,Tt){return _t.minX=Math.min(_t.minX,Tt.minX),_t.minY=Math.min(_t.minY,Tt.minY),_t.maxX=Math.max(_t.maxX,Tt.maxX),_t.maxY=Math.max(_t.maxY,Tt.maxY),_t}function e$o(_t,Tt){return _t.minX-Tt.minX}function o$h(_t,Tt){return _t.minY-Tt.minY}function s$l(_t){return(_t.maxX-_t.minX)*(_t.maxY-_t.minY)}function l$s(_t){return _t.maxX-_t.minX+(_t.maxY-_t.minY)}function m$p(_t,Tt){return(Math.max(Tt.maxX,_t.maxX)-Math.min(Tt.minX,_t.minX))*(Math.max(Tt.maxY,_t.maxY)-Math.min(Tt.minY,_t.minY))}function c$C(_t,Tt){var Mt=Math.max(_t.minX,Tt.minX),Pt=Math.max(_t.minY,Tt.minY),Ft=Math.min(_t.maxX,Tt.maxX),Dt=Math.min(_t.maxY,Tt.maxY);return Math.max(0,Ft-Mt)*Math.max(0,Dt-Pt)}function u$m(_t,Tt){return _t.minX<=Tt.minX&&_t.minY<=Tt.minY&&Tt.maxX<=_t.maxX&&Tt.maxY<=_t.maxY}function f$i(_t,Tt){return Tt.minX<=_t.maxX&&Tt.minY<=_t.maxY&&Tt.maxX>=_t.minX&&Tt.maxY>=_t.minY}function x$d(_t){return{children:_t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d$t(_t,Tt,Mt,Pt,Ft){for(var Dt,Nt=[Tt,Mt];Nt.length;)(Mt=Nt.pop())-(Tt=Nt.pop())<=Pt||(Dt=Tt+Math.ceil((Mt-Tt)/Pt/2)*Pt,a$s(_t,Dt,Tt,Mt,Ft),Nt.push(Tt,Dt,Dt,Mt))}i$t.prototype={all:function(){return this._all(this.data,[])},search:function(_t){var Tt=this.data,Mt=[],Pt=this.toBBox;if(!f$i(_t,Tt))return Mt;for(var Ft,Dt,Nt,Vt,zt=[];Tt;){for(Ft=0,Dt=Tt.children.length;Ft<Dt;Ft++)Nt=Tt.children[Ft],f$i(_t,Vt=Tt.leaf?Pt(Nt):Nt)&&(Tt.leaf?Mt.push(Nt):u$m(_t,Vt)?this._all(Nt,Mt):zt.push(Nt));Tt=zt.pop()}return Mt},collides:function(_t){var Tt=this.data,Mt=this.toBBox;if(!f$i(_t,Tt))return!1;for(var Pt,Ft,Dt,Nt,Vt=[];Tt;){for(Pt=0,Ft=Tt.children.length;Pt<Ft;Pt++)if(Dt=Tt.children[Pt],f$i(_t,Nt=Tt.leaf?Mt(Dt):Dt)){if(Tt.leaf||u$m(_t,Nt))return!0;Vt.push(Dt)}Tt=Vt.pop()}return!1},load:function(_t){if(!_t||!_t.length)return this;if(_t.length<this._minEntries){for(var Tt=0,Mt=_t.length;Tt<Mt;Tt++)this.insert(_t[Tt]);return this}var Pt=this._build(_t.slice(),0,_t.length-1,0);if(this.data.children.length)if(this.data.height===Pt.height)this._splitRoot(this.data,Pt);else{if(this.data.height<Pt.height){var Ft=this.data;this.data=Pt,Pt=Ft}this._insert(Pt,this.data.height-Pt.height-1,!0)}else this.data=Pt;return this},insert:function(_t){return _t&&this._insert(_t,this.data.height-1),this},clear:function(){return this.data=x$d([]),this},remove:function(_t,Tt){if(!_t)return this;for(var Mt,Pt,Ft,Dt,Nt=this.data,Vt=this.toBBox(_t),zt=[],Xt=[];Nt||zt.length;){if(Nt||(Nt=zt.pop(),Pt=zt[zt.length-1],Mt=Xt.pop(),Dt=!0),Nt.leaf&&(Ft=n$v(_t,Nt.children,Tt))!==-1)return Nt.children.splice(Ft,1),zt.push(Nt),this._condense(zt),this;Dt||Nt.leaf||!u$m(Nt,Vt)?Pt?(Mt++,Nt=Pt.children[Mt],Dt=!1):Nt=null:(zt.push(Nt),Xt.push(Mt),Mt=0,Pt=Nt,Nt=Nt.children[0])}return this},toBBox:function(_t){return _t},compareMinX:e$o,compareMinY:o$h,toJSON:function(){return this.data},fromJSON:function(_t){return this.data=_t,this},_all:function(_t,Tt){for(var Mt=[];_t;)_t.leaf?Tt.push.apply(Tt,_t.children):Mt.push.apply(Mt,_t.children),_t=Mt.pop();return Tt},_build:function(_t,Tt,Mt,Pt){var Ft,Dt=Mt-Tt+1,Nt=this._maxEntries;if(Dt<=Nt)return h$o(Ft=x$d(_t.slice(Tt,Mt+1)),this.toBBox),Ft;Pt||(Pt=Math.ceil(Math.log(Dt)/Math.log(Nt)),Nt=Math.ceil(Dt/Math.pow(Nt,Pt-1))),(Ft=x$d([])).leaf=!1,Ft.height=Pt;var Vt,zt,Xt,Ht,Wt=Math.ceil(Dt/Nt),Qt=Wt*Math.ceil(Math.sqrt(Nt));for(d$t(_t,Tt,Mt,Qt,this.compareMinX),Vt=Tt;Vt<=Mt;Vt+=Qt)for(d$t(_t,Vt,Xt=Math.min(Vt+Qt-1,Mt),Wt,this.compareMinY),zt=Vt;zt<=Xt;zt+=Wt)Ht=Math.min(zt+Wt-1,Xt),Ft.children.push(this._build(_t,zt,Ht,Pt-1));return h$o(Ft,this.toBBox),Ft},_chooseSubtree:function(_t,Tt,Mt,Pt){for(var Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt;Pt.push(Tt),!Tt.leaf&&Pt.length-1!==Mt;){for(Ht=Wt=1/0,Ft=0,Dt=Tt.children.length;Ft<Dt;Ft++)zt=s$l(Nt=Tt.children[Ft]),(Xt=m$p(_t,Nt)-zt)<Wt?(Wt=Xt,Ht=zt<Ht?zt:Ht,Vt=Nt):Xt===Wt&&zt<Ht&&(Ht=zt,Vt=Nt);Tt=Vt||Tt.children[0]}return Tt},_insert:function(_t,Tt,Mt){var Pt=this.toBBox,Ft=Mt?_t:Pt(_t),Dt=[],Nt=this._chooseSubtree(Ft,this.data,Tt,Dt);for(Nt.children.push(_t),r$j(Nt,Ft);Tt>=0&&Dt[Tt].children.length>this._maxEntries;)this._split(Dt,Tt),Tt--;this._adjustParentBBoxes(Ft,Dt,Tt)},_split:function(_t,Tt){var Mt=_t[Tt],Pt=Mt.children.length,Ft=this._minEntries;this._chooseSplitAxis(Mt,Ft,Pt);var Dt=this._chooseSplitIndex(Mt,Ft,Pt),Nt=x$d(Mt.children.splice(Dt,Mt.children.length-Dt));Nt.height=Mt.height,Nt.leaf=Mt.leaf,h$o(Mt,this.toBBox),h$o(Nt,this.toBBox),Tt?_t[Tt-1].children.push(Nt):this._splitRoot(Mt,Nt)},_splitRoot:function(_t,Tt){this.data=x$d([_t,Tt]),this.data.height=_t.height+1,this.data.leaf=!1,h$o(this.data,this.toBBox)},_chooseSplitIndex:function(_t,Tt,Mt){var Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht;for(zt=Xt=1/0,Pt=Tt;Pt<=Mt-Tt;Pt++)Nt=c$C(Ft=a$r(_t,0,Pt,this.toBBox),Dt=a$r(_t,Pt,Mt,this.toBBox)),Vt=s$l(Ft)+s$l(Dt),Nt<zt?(zt=Nt,Ht=Pt,Xt=Vt<Xt?Vt:Xt):Nt===zt&&Vt<Xt&&(Xt=Vt,Ht=Pt);return Ht},_chooseSplitAxis:function(_t,Tt,Mt){var Pt=_t.leaf?this.compareMinX:e$o,Ft=_t.leaf?this.compareMinY:o$h;this._allDistMargin(_t,Tt,Mt,Pt)<this._allDistMargin(_t,Tt,Mt,Ft)&&_t.children.sort(Pt)},_allDistMargin:function(_t,Tt,Mt,Pt){_t.children.sort(Pt);var Ft,Dt,Nt=this.toBBox,Vt=a$r(_t,0,Tt,Nt),zt=a$r(_t,Mt-Tt,Mt,Nt),Xt=l$s(Vt)+l$s(zt);for(Ft=Tt;Ft<Mt-Tt;Ft++)Dt=_t.children[Ft],r$j(Vt,_t.leaf?Nt(Dt):Dt),Xt+=l$s(Vt);for(Ft=Mt-Tt-1;Ft>=Tt;Ft--)Dt=_t.children[Ft],r$j(zt,_t.leaf?Nt(Dt):Dt),Xt+=l$s(zt);return Xt},_adjustParentBBoxes:function(_t,Tt,Mt){for(var Pt=Mt;Pt>=0;Pt--)r$j(Tt[Pt],_t)},_condense:function(_t){for(var Tt,Mt=_t.length-1;Mt>=0;Mt--)_t[Mt].children.length===0?Mt>0?(Tt=_t[Mt-1].children).splice(Tt.indexOf(_t[Mt]),1):this.clear():h$o(_t[Mt],this.toBBox)},_initFormat:function(_t){var Tt=["return a"," - b",";"];this.compareMinX=new Function("a","b",Tt.join(_t[0])),this.compareMinY=new Function("a","b",Tt.join(_t[1])),this.toBBox=new Function("a","return {minX: a"+_t[0]+", minY: a"+_t[1]+", maxX: a"+_t[2]+", maxY: a"+_t[3]+"};")}};class n$u{constructor(Tt,Mt){this.key=new e$v(0,0,0,0),this.bounds=u$1C(),this.objectIds=new Set,this.key.set(Mt);const Pt=Tt.getLODInfoAt(this.key);this.tileInfoView=Tt,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=Pt.resolution,this.scale=Pt.scale,this.level=Pt.level}get id(){return this.key.id}get extent(){return M$K.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const Tt=this.key.getChildKeys(),Mt=t$29.acquire();for(let Pt=0;Pt<Tt.length;Pt++)Mt[Pt]=new n$u(this.tileInfoView,Tt[Pt]);return Mt}getQuantizationParameters(){return a$1y.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const n$t={added:[],removed:[]},r$i=new Set,d$s=new e$v(0,0,0,0);class l$r extends n$2K{constructor(Tt){super(),this._tiles=new Map,this._index=i$t(9,a$32("esri-csp-restrictions")?Mt=>({minX:Mt.bounds[0],minY:Mt.bounds[1],maxX:Mt.bounds[2],maxY:Mt.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=Tt}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(Tt){return this._tiles.has(Tt)}get(Tt){return this._tiles.get(Tt)}boundsIntersections(Tt){return this._index.search({minX:Tt[0],minY:Tt[1],maxX:Tt[2],maxY:Tt[3]})}updateTiles(Tt){const Mt={added:[],removed:[]};for(const Pt of Tt.added)if(!this.has(Pt)){const Ft=new n$u(this.tileScheme,Pt);this._tiles.set(Pt,Ft),this._index.insert(Ft),Mt.added.push(Ft)}for(const Pt of Tt.removed)if(this.has(Pt)){const Ft=this.get(Pt);this._tiles.delete(Pt),this._index.remove(Ft),Mt.removed.push(Ft)}this.tiles.length=0,this._tiles.forEach(Pt=>this.tiles.push(Pt)),(Mt.added.length||Mt.removed.length)&&this.emit("update",Mt)}setViewState(Tt){const Mt=this.tileScheme.getTileCoverage(Tt,0);if(!Mt)return;const{spans:Pt,lodInfo:Ft}=Mt,{level:Dt}=Ft;if(Pt.length>0)for(const{row:Nt,colFrom:Vt,colTo:zt}of Pt)for(let Xt=Vt;Xt<=zt;Xt++){const Ht=d$s.set(Dt,Nt,Ft.normalizeCol(Xt),Ft.getWorldForColumn(Xt)).id;if(r$i.add(Ht),!this.has(Ht)){const Wt=new n$u(this.tileScheme,Ht);this._tiles.set(Ht,Wt),this._index.insert(Wt),this.tiles.push(Wt),n$t.added.push(Wt)}}for(let Nt=this.tiles.length-1;Nt>=0;Nt--){const Vt=this.tiles[Nt];r$i.has(Vt.id)||(this._tiles.delete(Vt.id),this.tiles.splice(Nt,1),this._index.remove(Vt),n$t.removed.push(Vt))}(n$t.added.length||n$t.removed.length)&&this.emit("update",n$t),l$v.pool.release(Mt),r$i.clear(),n$t.added.length=0,n$t.removed.length=0}}let p$B=0,i$s=class extends y$1E{constructor(){super(...arguments),this.color=new l$2f([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return p$B++}};e$2a([d$25({readOnly:!0})],i$s.prototype,"version",null),e$2a([d$25({type:l$2f})],i$s.prototype,"color",void 0),e$2a([d$25({type:l$2f})],i$s.prototype,"haloColor",void 0),e$2a([d$25()],i$s.prototype,"haloOpacity",void 0),e$2a([d$25()],i$s.prototype,"fillOpacity",void 0),i$s=e$2a([n$2L("esri.views.2d.support.HighlightOptions")],i$s);const c$B=i$s,s$k=_t=>_t.includes("Brush");class e$n{constructor(){this._names=new Map}begin(Tt){this._names.has(Tt)||(this._names.set(Tt,!1),s$k(Tt)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${Tt}.Start`))}end(Tt){this._names.has(Tt)&&!this._names.get(Tt)&&(this._names.set(Tt,!0),performance.mark(`Esri.${Tt}.End`))}record(Tt){this._names.has(Tt)||(this._names.set(Tt,!0),performance.mark(`Esri.${Tt}`))}}function t$i(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt){let zt;_t.ignorePadding&&(Pt={left:0,right:0,top:0,bottom:0}),_t.width!=null&&_t.height!=null?zt=[_t.width,_t.height]:_t.width==null&&_t.height!=null?zt=[_t.height,_t.height]:_t.width!=null&&_t.height==null?zt=[_t.width,_t.width]:_t.width==null&&_t.height==null&&(zt=null);const Xt=Mt[0]-(Pt.left+Pt.right),Ht=Mt[1]-(Pt.top+Pt.bottom);let Wt,Qt,Zt=_t.area||{x:0,y:0,width:Xt,height:Ht};if(zt){const Kt=Xt/Ht,er=zt[0]/zt[1];if(er>Kt){const Yt=Zt.width/er;Zt={x:Zt.x,y:Math.round(Zt.y+(Zt.height-Yt)/2),width:Zt.width,height:Math.round(Yt)}}else{const Yt=Zt.height*er;Zt={x:Math.round(Zt.x+(Zt.width-Yt)/2),y:Zt.y,width:Math.round(Yt),height:Zt.height}}}else zt=[Zt.width,Zt.height];return zt[0]>Zt.width?(Wt=Math.min(zt[0]/Zt.width,Tt),Qt=zt[0]/Zt.width/Wt):(Wt=1,Qt=zt[0]/Zt.width),{resolutionScale:Wt,cropArea:{x:Math.round((Zt.x+Pt.left)*Wt),y:Math.round((Zt.y+Pt.top)*Wt),width:Math.round(Zt.width*Wt),height:Math.round(Zt.height*Wt)},outputScale:Qt,format:Ft,quality:Dt,children:Nt,rotation:Vt}}function r$h(_t,Tt,Mt){const{ctx:Pt,canvas:Ft}=g$g(_t,Mt),Dt=Pt.getImageData(0,0,_t.width,_t.height),Nt=c$A(Ft,Tt);return u$l(Ft),{dataUrl:Nt,data:Dt}}function l$q(_t,Tt){const{ctx:Mt,canvas:Pt}=g$g(_t,Tt),Ft=Mt.getImageData(0,0,_t.width,_t.height);return u$l(Pt),Ft}function g$g(_t,Tt){const Mt=f$h();Tt.premultipliedAlpha&&E$b(_t),Mt.width=_t.width,Mt.height=_t.height;const Pt=Mt.getContext("2d");return Pt.putImageData(_t,0,0),Tt.flipY&&B$3(Pt),{ctx:Pt,canvas:Mt}}function u$l(_t){_t.width=0,_t.height=0}function f$h(){return t$2e(d$r)&&(d$r=document.createElement("canvas")),d$r}let d$r=null;function c$A(_t,Tt){const Mt=R$7[Tt.format],Pt=Tt.quality/100;return _t.toDataURL(Mt,Pt)}function s$j(_t,Tt){const Mt=k$6(_t),Pt=W$2[Mt];return{format:Mt,quality:o$1H(Tt!=null?Tt:Pt,0,100)}}function w$b(_t,Tt){return Tt/Math.max(_t[0],_t[1])}function m$o(_t,Tt,Mt){if(!_t||!Tt)throw new Error("Cannot construct image data without dimensions");if(j$e)try{return new ImageData(_t,Tt)}catch{j$e=!1}return x$c(_t,Tt,Mt)}function M$c(_t,Tt,Mt,Pt){if(!Tt||!Mt)throw new Error("Cannot construct image data without dimensions");if(j$e)try{return new ImageData(_t,Tt,Mt)}catch{j$e=!1}const Ft=x$c(Tt,Mt,Pt);return Ft.data.set(_t,0),Ft}function p$A(_t,Tt,Mt,Pt=0,Ft=0,Dt=_t.width-Pt,Nt=_t.height-Ft,Vt=!1){const{data:zt}=_t,{width:Xt,height:Ht,data:Wt}=Tt,Qt=Dt/Xt,Zt=Nt/Ht,Kt=Math.ceil(Qt/2),er=Math.ceil(Zt/2),Yt=_t.width;for(let rr=0;rr<Ht;rr++)for(let ir=0;ir<Xt;ir++){const nr=4*(ir+(Vt?Ht-rr-1:rr)*Xt);let ar=0,or=0,ur=0,dr=0,hr=0,gr=0;const pr=(rr+.5)*Zt;for(let mr=Math.floor(rr*Zt);mr<(rr+1)*Zt;mr++){const wr=Math.abs(pr-(mr+.5))/er,br=(ir+.5)*Qt,_r=wr*wr;for(let Mr=Math.floor(ir*Qt);Mr<(ir+1)*Qt;Mr++){const Ar=Math.abs(br-(Mr+.5))/Kt,xr=Math.sqrt(_r+Ar*Ar);if(xr>=1)continue;let yr=2*xr*xr*xr-3*xr*xr+1;const Er=4*(Pt+Mr+(Ft+mr)*Yt);gr+=yr*zt[Er+3],or+=yr,!Mt&&zt[Er+3]<255&&(yr=yr*zt[Er+3]/255),ur+=yr*zt[Er],dr+=yr*zt[Er+1],hr+=yr*zt[Er+2],ar+=yr}}Wt[nr]=ur/ar,Wt[nr+1]=dr/ar,Wt[nr+2]=hr/ar,Wt[nr+3]=gr/or}return Tt}function x$c(_t,Tt,Mt){return Mt||(Mt=D$6()),Mt.getContext("2d").createImageData(_t,Tt)}let b$h=null,j$e=!0;function D$6(){return b$h||(b$h=document.createElement("canvas"),b$h.width=1,b$h.height=1),b$h}function k$6(_t){switch(_t){case"png":case"jpg":case"jpeg":return _t;default:return U$7}}function B$3(_t){_t.save(),_t.globalCompositeOperation="copy",_t.scale(1,-1),_t.translate(0,-_t.canvas.height),_t.drawImage(_t.canvas,0,0),_t.restore()}function E$b(_t){const Tt=_t.data,Mt=Tt.length;for(let Pt=0;Pt<Mt;Pt+=4){const Ft=Tt[Pt+3];if(Ft!==255&&Ft>0){const Dt=255/Ft;Tt[Pt+0]=Tt[Pt+0]*Dt,Tt[Pt+1]=Tt[Pt+1]*Dt,Tt[Pt+2]=Tt[Pt+2]*Dt}}}const R$7={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},H$3=98,U$7="png",W$2={png:100,jpg:H$3,jpeg:H$3};var o$g;function n$s(_t,Tt,Mt={}){const Pt=i$r(_t);for(;Pt.length>1;){const Ft=l$p(Tt,Pt.shift(),Mt);if(r$1P(Ft))return Ft}return c$z(Tt,Pt.shift(),Mt)}function i$r(_t){const Tt=a$32("esri-force-webgl");if(Tt===o$g.WEBGL1||Tt===o$g.WEBGL2)return[Tt];switch(_t){case"2d":return a$32("mac")&&a$32("chrome")?[o$g.WEBGL1,o$g.WEBGL2]:[o$g.WEBGL2,o$g.WEBGL1];case"3d":return[o$g.WEBGL2,o$g.WEBGL1]}}function c$z(_t,Tt,Mt={}){if(!window.WebGLRenderingContext)return a$q(_t,s$i),null;const Pt=l$p(_t,Tt,Mt);return t$2e(Pt)&&a$q(_t,u$k),Pt}function l$p(_t,Tt,Mt={}){const Pt=Tt===o$g.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let Ft=null;for(const Dt of Pt){try{Ft=_t.getContext(Dt,Mt)}catch{}if(Ft)break}return Ft}function a$q(_t,Tt){const Mt=_t.parentNode;Mt&&(Mt.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+Tt+"</div></div></td></tr></table>")}(function(_t){_t[_t.WEBGL1=1]="WEBGL1",_t[_t.WEBGL2=2]="WEBGL2"})(o$g||(o$g={}));const s$i='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',u$k=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let n$r,a$p;function l$o(_t){const Tt=i$r(_t);for(;Tt.length>1;){const Mt=u$j(Tt.shift());if(Mt.available)return Mt}return u$j(Tt.shift())}function u$j(_t){switch(_t){case o$g.WEBGL1:return i$q();case o$g.WEBGL2:return p$z()}}function i$q(){return n$r||(n$r=x$b()),n$r}function p$z(){return a$p||(a$p=d$q()),a$p}class f$g{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}}class c$y extends f$g{constructor(){super(...arguments),this.type=o$g.WEBGL1}}class E$a extends f$g{constructor(){super(...arguments),this.type=o$g.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}}function _$7(_t,Tt){var Dt;if(_t===o$g.WEBGL1&&typeof WebGLRenderingContext===void 0||_t===o$g.WEBGL2&&typeof WebGL2RenderingContext===void 0)return null;const Mt=document.createElement("canvas");if(!Mt)return null;let Pt=l$p(Mt,_t,{failIfMajorPerformanceCaveat:!0});if(t$2e(Pt)&&(Pt=l$p(Mt,_t),r$1P(Pt)&&(Tt.majorPerformanceCaveat=!0)),t$2e(Pt))return Pt;if(_t===o$g.WEBGL1){const Nt=(Dt=Pt.getParameter(Pt.VERSION))==null?void 0:Dt.match(/^WebGL\s+([\d.]*)/);if(Nt){const Vt=parseFloat(Nt[1]);Tt.available=Vt>=.94}}else Tt.available=!0;Tt.maxTextureSize=Pt.getParameter(Pt.MAX_TEXTURE_SIZE),Tt.supportsVertexShaderSamplers=Pt.getParameter(Pt.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const Ft=Pt.getShaderPrecisionFormat(Pt.FRAGMENT_SHADER,Pt.HIGH_FLOAT);return Ft&&(Tt.supportsHighPrecisionFragment=Ft.precision>0),Pt}function x$b(){const _t=new c$y,Tt=_$7(o$g.WEBGL1,_t);return t$2e(Tt)||(_t.supportsElementIndexUint=Tt.getExtension("OES_element_index_uint")!==null,_t.supportsStandardDerivatives=Tt.getExtension("OES_standard_derivatives")!==null,_t.supportsInstancedArrays=Tt.getExtension("ANGLE_instanced_arrays")!==null,_t.supportsTextureFloat=Tt.getExtension("OES_texture_float")!==null,_t.supportsTextureHalfFloat=Tt.getExtension("OES_texture_half_float")!==null,_t.supportsColorBufferFloat=Tt.getExtension("WEBGL_color_buffer_float")!==null,_t.supportsColorBufferFloatBlend=Tt.getExtension("EXT_float_blend")!==null,_t.supportsColorBufferHalfFloat=Tt.getExtension("EXT_color_buffer_half_float")!==null),_t}function d$q(){const _t=new E$a,Tt=_$7(o$g.WEBGL2,_t);return t$2e(Tt)||(_t.supportsColorBufferFloat=Tt.getExtension("EXT_color_buffer_float")!==null,_t.supportsColorBufferFloatBlend=Tt.getExtension("EXT_float_blend")!==null,_t.supportsColorBufferHalfFloat=_t.supportsColorBufferFloat||Tt.getExtension("EXT_color_buffer_half_float")!==null),_t}function i$p(_t){const Tt=l$o(_t);if(!Tt.available)return new s$2i("webgl:required","WebGL is required but not supported.");if(_t==="3d"&&Tt.majorPerformanceCaveat)return new s$2i("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!Tt.supportsHighPrecisionFragment)return new s$2i("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!Tt.supportsVertexShaderSamplers)return new s$2i("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(Tt.type===o$g.WEBGL1){if(!Tt.supportsElementIndexUint)return new s$2i("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!Tt.supportsStandardDerivatives)return new s$2i("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!Tt.supportsInstancedArrays)return new s$2i("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function i$o(_t){return _t&&"nodeType"in _t}function d$p(_t){return _t&&typeof _t.render=="function"}const c$x={component:"esri-component"};let p$y=class extends y$1E{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(_t){const Tt=this._get("node");_t!==Tt&&(_t&&_t.classList.add(c$x.component),Tt&&Tt.classList.remove(c$x.component),this._set("node",_t))}castNode(_t){return _t?typeof _t=="string"||i$o(_t)?(this._set("widget",null),e$1o(_t)):(d$p(_t)&&!_t.domNode&&(_t.domNode=document.createElement("div")),this._set("widget",_t),_t.domNode):(this._set("widget",null),null)}};e$2a([d$25({dependsOn:[]})],p$y.prototype,"id",null),e$2a([d$25()],p$y.prototype,"node",null),e$2a([s$23("node")],p$y.prototype,"castNode",null),e$2a([d$25({readOnly:!0})],p$y.prototype,"widget",void 0),p$y=e$2a([n$2L("esri.views.ui.Component")],p$y);const l$n=p$y,m$n={left:0,top:0,bottom:0,right:0},u$i={bottom:30,top:15,right:15,left:15},f$f="manual",_$6={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function g$f(_t){return _t&&!_t._started&&typeof _t.postMixInProperties=="function"&&typeof _t.buildRendering=="function"&&typeof _t.postCreate=="function"&&typeof _t.startup=="function"}function y$j(_t){const Tt=_t,Mt=typeof Tt=="object"&&Tt!==null&&Object.getPrototypeOf(Tt);return(Mt===null||Mt===Object.prototype)&&("component"in Tt||"index"in Tt||"position"in Tt)?_t:null}function C$6(_t,{top:Tt,bottom:Mt,left:Pt,right:Ft}){_t.style.top=Tt,_t.style.bottom=Mt,_t.style.left=Pt,_t.style.right=Ft}let v$h=class extends n$2K.EventedAccessor{constructor(_t){super(_t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new u$1P,this.view=null,this._applyViewPadding=()=>{const Tt=this.container;Tt&&C$6(Tt,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const Tt=this._innerContainer;Tt&&C$6(Tt,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this._handles.add([l$2e(()=>{var _t;return[(_t=this.view)==null?void 0:_t.padding,this.container]},this._applyViewPadding,h$1w),l$2e(()=>this.padding,this._applyUIPadding,h$1w)])}destroy(){this.container=null;for(const _t of this._components)_t.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(_t){const Tt=this._get("container");_t!==Tt&&(_t&&(_t.classList.add(_$6.ui),n$1M(_t),this._attachContainers(_t)),Tt&&(Tt.classList.remove(_$6.ui),C$6(Tt,{top:"",bottom:"",left:"",right:""}),t$1n(Tt)),this._set("container",_t))}get height(){const _t=this.get("view.height")||0;if(_t===0)return _t;const Tt=this._getViewPadding(),Mt=Tt.top+Tt.bottom;return Math.max(_t-Mt,0)}get padding(){return this._get("padding")}set padding(_t){_t?this._override("padding",_t):this._clearOverride("padding")}castPadding(_t){return typeof _t=="number"?{bottom:_t,top:_t,right:_t,left:_t}:{...u$i,..._t}}get width(){const _t=this.get("view.width")||0;if(_t===0)return _t;const Tt=this._getViewPadding(),Mt=Tt.left+Tt.right;return Math.max(_t-Mt,0)}add(_t,Tt){let Mt,Pt;if(Array.isArray(_t))return void _t.forEach(Dt=>this.add(Dt,Tt));const Ft=y$j(_t);Ft&&({index:Mt,position:Tt,component:_t,key:Pt}=Ft),Tt&&typeof Tt=="object"&&({index:Mt,key:Pt,position:Tt}=Tt),!_t||Tt&&!this._isValidPosition(Tt)||this._add(_t,Tt,Mt,Pt)}remove(_t,Tt){if(!_t)return;if(Array.isArray(_t))return _t.map(Pt=>this.remove(Pt,Tt));const Mt=this._find(_t);if(Mt){const Pt=this._componentToKey;if(Pt.has(_t)&&Pt.get(_t)!==Tt)return;const Ft=this._components.indexOf(Mt);return Mt.node.parentNode&&Mt.node.parentNode.removeChild(Mt.node),this._componentToKey.delete(_t),this._components.splice(Ft,1)[0]}}empty(_t){return Array.isArray(_t)?_t.map(Tt=>this.empty(Tt)).reduce((Tt,Mt)=>Tt.concat(Mt)):(_t=_t||f$f)===f$f?Array.prototype.slice.call(this._manualContainer.children).filter(Tt=>!Tt.classList.contains(_$6.corner)).map(Tt=>this.remove(Tt)):this._isValidPosition(_t)?Array.prototype.slice.call(this._cornerNameToContainerLookup[_t].children).map(this.remove,this):null}move(_t,Tt){if(Array.isArray(_t)&&_t.forEach(Dt=>this.move(Dt,Tt)),!_t)return;let Mt;const Pt=y$j(_t)||y$j(Tt);if(Pt&&(Mt=Pt.index,Tt=Pt.position,_t=Pt.component||_t),Tt&&!this._isValidPosition(Tt))return;const Ft=this.remove(_t);Ft&&this.add(Ft,{position:Tt,index:Mt})}find(_t){if(!_t)return null;const Tt=this._findById(_t);return Tt&&(Tt.widget||Tt.node)}getPosition(_t){for(const Tt in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[Tt].contains(_t))return Tt;return null}_add(_t,Tt,Mt,Pt){_t instanceof l$n||(_t=new l$n({node:_t})),this._place({component:_t,position:Tt,index:Mt}),this._components.push(_t),Pt&&this._componentToKey.set(_t,Pt)}_find(_t){return _t?_t instanceof l$n?this._findByComponent(_t):typeof _t=="string"?this._findById(_t):this._findByNode(_t.domNode||_t):null}_getViewPadding(){return this.get("view.padding")||m$n}_attachContainers(_t){_t.appendChild(this._innerContainer),_t.appendChild(this._manualContainer)}_initContainers(){const _t=document.createElement("div");_t.classList.add(_$6.innerContainer),_t.classList.add(_$6.cornerContainer);const Tt=document.createElement("div");Tt.classList.add(_$6.innerContainer),Tt.classList.add(_$6.manualContainer);const Mt=document.createElement("div");Mt.classList.add(_$6.topLeft),Mt.classList.add(_$6.corner),_t.appendChild(Mt);const Pt=document.createElement("div");Pt.classList.add(_$6.topRight),Pt.classList.add(_$6.corner),_t.appendChild(Pt);const Ft=document.createElement("div");Ft.classList.add(_$6.bottomLeft),Ft.classList.add(_$6.corner),_t.appendChild(Ft);const Dt=document.createElement("div");Dt.classList.add(_$6.bottomRight),Dt.classList.add(_$6.corner),_t.appendChild(Dt),this._innerContainer=_t,this._manualContainer=Tt;const Nt=f$10();this._cornerNameToContainerLookup={"top-left":Mt,"top-right":Pt,"bottom-left":Ft,"bottom-right":Dt,"top-leading":Nt?Pt:Mt,"top-trailing":Nt?Mt:Pt,"bottom-leading":Nt?Dt:Ft,"bottom-trailing":Nt?Ft:Dt},this._positionNameToContainerLookup={manual:Tt,...this._cornerNameToContainerLookup}}_isValidPosition(_t){return!!this._positionNameToContainerLookup[_t]}_place(_t){const Tt=_t.component,Mt=_t.position||f$f,Pt=_t.index,Ft=this._positionNameToContainerLookup[Mt],Dt=Pt>-1;if(g$f(Tt.widget)&&Tt.widget.startup(),!Dt)return void Ft.appendChild(Tt.node);const Nt=Array.prototype.slice.call(Ft.children);if(Pt===0)return void(Ft.firstChild?o$1i(Tt.node,Ft.firstChild):Ft.appendChild(Tt.node));Pt>=Nt.length?Ft.appendChild(Tt.node):o$1i(Tt.node,Nt[Pt])}_toPxPosition(_t){return{top:this._toPxUnit(_t.top),left:this._toPxUnit(_t.left),right:this._toPxUnit(_t.right),bottom:this._toPxUnit(_t.bottom)}}_toPxUnit(_t){return _t===0?"0":_t+"px"}_findByComponent(_t){let Tt,Mt=null;return this._components.some(Pt=>(Tt=Pt===_t,Tt&&(Mt=Pt),Tt)),Mt}_findById(_t){let Tt,Mt=null;return this._components.some(Pt=>(Tt=Pt.id===_t,Tt&&(Mt=Pt),Tt)),Mt}_findByNode(_t){let Tt,Mt=null;return this._components.some(Pt=>(Tt=Pt.node===_t,Tt&&(Mt=Pt),Tt)),Mt}};e$2a([d$25()],v$h.prototype,"container",null),e$2a([d$25()],v$h.prototype,"height",null),e$2a([d$25({value:u$i})],v$h.prototype,"padding",null),e$2a([s$23("padding")],v$h.prototype,"castPadding",null),e$2a([d$25()],v$h.prototype,"view",void 0),e$2a([d$25()],v$h.prototype,"width",null),v$h=e$2a([n$2L("esri.views.ui.UI")],v$h);const L$8=v$h;function d$o(_t,Tt){return _t&&"copyright"in _t&&(!Tt||typeof _t.originOf=="function"&&_t.originOf("copyright")==="user")}function m$m(_t,Tt){return _t.length!==Tt.length||_t.some((Mt,Pt)=>Mt.text!==Tt[Pt].text)}function f$e(_t,Tt,Mt){!Mt||!Tt||_t.find(Pt=>Pt.layerView===Tt&&Pt.text===Mt)||_t.push({text:Mt,layerView:Tt})}function y$i(_t){return _t.type==="bing-maps"}const b$g=[];let g$e=class extends d$1O{constructor(_t){super(_t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new j$11,this.view=null,this._allLayerViewsChange=Tt=>{this.handles.remove("suspension");const Mt=this.get("view.allLayerViews");Mt&&this.handles.add(Mt.map(Pt=>l$2e(()=>{var Ft;return[Pt.suspended,(Ft=Pt.layer)==null?void 0:Ft.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),Tt&&Tt.removed&&Tt.removed.forEach(Pt=>{this._pendingAttributions.delete(Pt),this._fetchedAttributionData.delete(Pt)}),this._updateAttributionItems()},this.handles.add([a$2C(()=>{var Tt;return(Tt=this.view)==null?void 0:Tt.allLayerViews},"change",Tt=>this._allLayerViewsChange(Tt),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),f$1p(()=>{var Tt;return((Tt=this.view)==null?void 0:Tt.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const _t=this.get("view.allLayerViews");b$g.length=0,_t?(_t.forEach(Tt=>{var Ft;if(Tt.suspended||!((Ft=Tt.layer)!=null&&Ft.attributionVisible))return;const Mt=Tt.layer;if(d$o(Mt,"user"))return void f$e(b$g,Tt,Mt.copyright);if(Mt.hasAttributionData){if(this._fetchedAttributionData.has(Tt)){const Dt=this._fetchedAttributionData.get(Tt);return void(Dt?f$e(b$g,Tt,this._getDynamicAttribution(Dt,this.view,Mt)):d$o(Mt)&&f$e(b$g,Tt,Mt.copyright))}return void this._fetchAttributionData(Tt)}const Pt=Mt.get("portalItem.accessInformation");f$e(b$g,Tt,Pt||Mt.copyright)}),m$m(this.items,b$g)&&(this.items.removeAll(),this.items.addMany(b$g)),b$g.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(_t){if(this._pendingAttributions.has(_t))return;this._pendingAttributions.add(_t);const Tt=await a$2S(_t.layer.fetchAttributionData());if(this._pendingAttributions.has(_t)){const Mt=Tt.ok?this._createContributionIndex(Tt.value,y$i(_t.layer)):null;this._pendingAttributions.delete(_t),this._fetchedAttributionData.set(_t,Mt)}this._updateAttributionItems()}_createContributionIndex(_t,Tt){const Mt=_t.contributors,Pt={};if(!Mt)return Pt;for(let Ft=0;Ft<Mt.length;Ft++){const Dt=Mt[Ft],Nt=Dt.coverageAreas;if(!Nt)return;for(const Vt of Nt){const zt=Vt.bbox,Xt=Vt.zoomMin-(Tt&&Vt.zoomMin?1:0),Ht=Vt.zoomMax-(Tt&&Vt.zoomMax?1:0),Wt={xmin:zt[1],ymin:zt[0],xmax:zt[3],ymax:zt[2],spatialReference:k$y.WGS84},Qt={extent:R$v(Wt),attribution:Dt.attribution||"",score:Vt.score!=null?Vt.score:100,id:Ft};for(let Zt=Xt;Zt<=Ht;Zt++)Pt[Zt]=Pt[Zt]||[],Pt[Zt].push(Qt)}}return Pt.maxKey=Math.max.apply(null,Object.keys(Pt)),Pt}_getDynamicAttribution(_t,Tt,Mt){const{extent:Pt,scale:Ft}=Tt;let Dt=Mt.tileInfo.scaleToZoom(Ft);if(Dt=Math.min(_t.maxKey,Math.round(Dt)),!Pt||Dt==null||Dt<=-1)return"";const Nt=_t[Dt],Vt=M$L(Pt.center.clone().normalize(),Tt.spatialReference),zt={};return Nt?Nt.filter(Xt=>{const Ht=!zt[Xt.id]&&Vt&&r$1y(Xt.extent,Vt);return Ht&&(zt[Xt.id]=!0),Ht}).sort((Xt,Ht)=>Ht.score-Xt.score||Xt.objectId-Ht.objectId).map(Xt=>Xt.attribution).join(", "):""}};e$2a([d$25({readOnly:!0,type:j$11})],g$e.prototype,"items",void 0),e$2a([d$25({readOnly:!0})],g$e.prototype,"state",null),e$2a([d$25()],g$e.prototype,"view",void 0),g$e=e$2a([n$2L("esri.widgets.Attribution.AttributionViewModel")],g$e);const _$5=g$e,d$n={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let l$m=class extends O$l{constructor(_t,Tt){super(_t,Tt),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(Mt=>Mt.forEach(({target:Pt})=>this._checkSourceTextOverflow(Pt))),this.iconClass=d$n.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new _$5}initialize(){this.own(a$2C(()=>{var _t;return(_t=this.viewModel)==null?void 0:_t.items},"change",()=>this.scheduleRender()))}destroy(){var _t;(_t=this._resizeObserver)==null||_t.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((_t,Tt)=>(_t.includes(Tt.text)||_t.push(Tt.text),_t),[]).join(this.itemDelimiter)}render(){const _t={[d$n.open]:this._isOpen};return n$1Q("div",{bind:this,class:this.classes(d$n.base,_t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return n$1Q("div",{class:d$n.poweredBy},"Powered by"," ",n$1Q("a",{class:d$n.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const _t=this._isOpen,Tt=this._isInteractive,Mt=Tt?"0":"",{attributionText:Pt}=this,Ft={[d$n.sourcesOpen]:_t,[d$n.interactive]:Tt};return n$1Q("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(d$n.sources,Ft),innerHTML:Pt,tabindex:Mt})}_afterSourcesNodeCreate(_t){this._prevSourceNodeHeight=_t.clientWidth,this._resizeObserver.observe(_t)}_checkSourceTextOverflow(_t){let Tt=!1;const{clientHeight:Mt,clientWidth:Pt,scrollWidth:Ft}=_t,Dt=Ft>Pt,Nt=this._attributionTextOverflowed!==Dt;if(this._attributionTextOverflowed=Dt,Nt&&(Tt=!0),this._isOpen){const Vt=Mt<this._prevSourceNodeHeight;this._prevSourceNodeHeight=Mt,Vt&&(this._isOpen=!1,Tt=!0)}Tt&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};e$2a([d$25()],l$m.prototype,"_isOpen",void 0),e$2a([d$25()],l$m.prototype,"_isInteractive",null),e$2a([d$25()],l$m.prototype,"_attributionTextOverflowed",void 0),e$2a([d$25()],l$m.prototype,"_prevSourceNodeHeight",void 0),e$2a([d$25({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],l$m.prototype,"attributionText",null),e$2a([d$25()],l$m.prototype,"iconClass",void 0),e$2a([d$25()],l$m.prototype,"itemDelimiter",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l$m.prototype,"label",void 0),e$2a([d$25(),e$1f("esri/widgets/Attribution/t9n/Attribution")],l$m.prototype,"messages",void 0),e$2a([o$1d("viewModel.view")],l$m.prototype,"view",void 0),e$2a([d$25({type:_$5})],l$m.prototype,"viewModel",void 0),e$2a([t$1e()],l$m.prototype,"_toggleState",null),l$m=e$2a([n$2L("esri.widgets.Attribution")],l$m);const u$h=l$m,p$x="esri.widgets.CompassViewModel";let d$m=class extends e$D(y$1E){constructor(_t){super(_t),this._handles=new u$1P,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(l$2e(()=>this.view,this._updateRotationWatcher,h$1w))}destroy(){this._handles=a$31(this._handles),this.view=null}get canShowNorth(){const _t=this.get("view.spatialReference");return!(!_t||!_t.isWebMercator&&!_t.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const _t={};this.view.type==="2d"?_t.rotation=0:_t.heading=0,this.callGoTo({target:_t})}_updateForRotation(_t){_t!=null&&(this.orientation={z:_t})}_updateForCamera(_t){if(!_t)return;const Tt=-_t.heading;this.orientation={x:0,y:0,z:Tt}}_updateRotationWatcher(_t){this._handles.removeAll(),_t&&this._handles.add(_t.type==="2d"?l$2e(()=>_t==null?void 0:_t.rotation,this._updateForRotation,h$1w):l$2e(()=>_t==null?void 0:_t.camera,this._updateForCamera,h$1w))}};e$2a([d$25({readOnly:!0})],d$m.prototype,"canShowNorth",null),e$2a([d$25()],d$m.prototype,"orientation",void 0),e$2a([d$25({readOnly:!0})],d$m.prototype,"state",null),e$2a([d$25()],d$m.prototype,"view",void 0),d$m=e$2a([n$2L(p$x)],d$m);const c$w=d$m,p$w={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let l$l=class extends O$l{constructor(_t,Tt){super(_t,Tt),this.goToOverride=null,this.iconClass=p$w.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new c$w}reset(){return this.viewModel.reset()}render(){const{orientation:_t,state:Tt}=this.viewModel,Mt=Tt==="disabled",Pt=(Tt==="rotation"?"rotation":"compass")=="compass",Ft=Mt?-1:0,Dt={[p$w.disabled]:Mt,[p$w.interactive]:!Mt},Nt={[p$w.northIcon]:Pt,[p$w.rotationIcon]:!Pt},{messages:Vt}=this;return n$1Q("div",{bind:this,class:this.classes(p$w.base,Dt),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:Ft,"aria-label":Vt.reset,title:Vt.reset},n$1Q("span",{"aria-hidden":"true",class:this.classes(p$w.icon,Nt),styles:this._toRotationTransform(_t)}),n$1Q("span",{class:p$w.text},Vt.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(_t){return{transform:`rotateZ(${_t.z}deg)`}}};e$2a([o$1d("viewModel.goToOverride")],l$l.prototype,"goToOverride",void 0),e$2a([d$25()],l$l.prototype,"iconClass",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],l$l.prototype,"label",void 0),e$2a([d$25(),e$1f("esri/widgets/Compass/t9n/Compass")],l$l.prototype,"messages",void 0),e$2a([o$1d("viewModel.view")],l$l.prototype,"view",void 0),e$2a([d$25({type:c$w})],l$l.prototype,"viewModel",void 0),e$2a([t$1e()],l$l.prototype,"_reset",null),l$l=e$2a([n$2L("esri.widgets.Compass")],l$l);const d$l=l$l;let a$o=class extends y$1E{constructor(_t){super(_t),this._handles=new u$1P,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(f$1p(()=>{var _t;return(_t=this.view)==null?void 0:_t.inputManager},()=>this._setNavigationMode()))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};e$2a([d$25({readOnly:!0})],a$o.prototype,"state",null),e$2a([d$25()],a$o.prototype,"navigationMode",void 0),e$2a([d$25()],a$o.prototype,"view",void 0),a$o=e$2a([n$2L("esri.widgets.NavigationToggleViewModel")],a$o);const n$q=a$o,g$d={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let p$v=class extends O$l{constructor(_t,Tt){super(_t,Tt),this.iconClass=g$d.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new n$q}set layout(_t){_t!=="horizontal"&&(_t="vertical"),this._set("layout",_t)}toggle(){return this.viewModel.toggle()}render(){const _t=this.get("viewModel.state")==="disabled",Tt=this.get("viewModel.navigationMode")==="pan",Mt={[g$d.disabled]:_t,[g$d.isLayoutHorizontal]:this.layout==="horizontal"},Pt={[g$d.activeButton]:Tt},Ft={[g$d.activeButton]:!Tt},Dt=_t?-1:0,Nt=this.messages.toggle;return n$1Q("div",{bind:this,class:this.classes(g$d.base,Mt),onclick:this._toggle,onkeydown:this._toggle,tabIndex:Dt,"aria-label":Nt,title:Nt},n$1Q("div",{class:this.classes(g$d.button,g$d.panButton,Pt)},n$1Q("span",{class:g$d.panIcon})),n$1Q("div",{class:this.classes(g$d.button,g$d.rotateButton,Ft)},n$1Q("span",{class:g$d.rotationIcon})))}_toggle(){this.toggle()}};e$2a([d$25()],p$v.prototype,"iconClass",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],p$v.prototype,"label",void 0),e$2a([d$25({value:"vertical"})],p$v.prototype,"layout",null),e$2a([d$25(),e$1f("esri/widgets/NavigationToggle/t9n/NavigationToggle")],p$v.prototype,"messages",void 0),e$2a([o$1d("viewModel.view")],p$v.prototype,"view",void 0),e$2a([d$25({type:n$q})],p$v.prototype,"viewModel",void 0),e$2a([t$1e()],p$v.prototype,"_toggle",null),p$v=e$2a([n$2L("esri.widgets.NavigationToggle")],p$v);const c$v=p$v,c$u={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let n$p=class extends O$l{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const _t=this.enabled?0:-1,Tt={[c$u.disabled]:!this.enabled,[c$u.interactive]:this.enabled},Mt={[this.iconClass]:!!this.iconClass};return n$1Q("div",{bind:this,class:this.classes(c$u.button,Tt),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:_t,title:this.title},n$1Q("span",{"aria-hidden":"true",role:"presentation",class:this.classes(c$u.icon,Mt)}),n$1Q("span",{class:c$u.iconText},this.title))}_triggerAction(){this.action.call(this)}};e$2a([d$25()],n$p.prototype,"action",void 0),e$2a([d$25()],n$p.prototype,"enabled",void 0),e$2a([d$25()],n$p.prototype,"iconClass",void 0),e$2a([d$25()],n$p.prototype,"title",void 0),e$2a([t$1e()],n$p.prototype,"_triggerAction",null),n$p=e$2a([n$2L("esri.widgets.IconButton")],n$p);const a$n=n$p;let s$h=class extends y$1E{get canZoomIn(){if(!this.get("view.ready"))return!1;const _t=this.get("view.animation.target.scale")||this.get("view.scale"),Tt=this.get("view.constraints.effectiveMaxScale");return Tt===0||_t>Tt}get canZoomOut(){if(!this.get("view.ready"))return!1;const _t=this.get("view.animation.target.scale")||this.get("view.scale"),Tt=this.get("view.constraints.effectiveMinScale");return Tt===0||_t<Tt}};e$2a([d$25({readOnly:!0})],s$h.prototype,"canZoomIn",null),e$2a([d$25({readOnly:!0})],s$h.prototype,"canZoomOut",null),e$2a([d$25()],s$h.prototype,"view",void 0),s$h=e$2a([n$2L("esri.widgets.Zoom.ZoomConditions2D")],s$h);const i$n=s$h;let s$g=class extends y$1E{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};e$2a([d$25({readOnly:!0})],s$g.prototype,"canZoomIn",null),e$2a([d$25({readOnly:!0})],s$g.prototype,"canZoomOut",null),e$2a([d$25()],s$g.prototype,"view",void 0),s$g=e$2a([n$2L("esri.widgets.Zoom.ZoomConditions3D")],s$g);const c$t=s$g;let m$l=class extends y$1E{constructor(_t){super(_t),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(_t){_t?_t.type==="2d"?this._zoomConditions=new i$n({view:_t}):_t.type==="3d"&&(this._zoomConditions=new c$t({view:_t})):this._zoomConditions=null,this._set("view",_t)}zoomIn(){if(!this.canZoomIn)return;const _t=this.view;_t.type==="2d"?_t.mapViewNavigation.zoomIn():j$17(_t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const _t=this.view;_t.type==="2d"?_t.mapViewNavigation.zoomOut():j$17(_t.goTo({zoomFactor:.5}))}};e$2a([d$25()],m$l.prototype,"_zoomConditions",void 0),e$2a([d$25({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],m$l.prototype,"canZoomIn",void 0),e$2a([d$25({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],m$l.prototype,"canZoomOut",void 0),e$2a([d$25({readOnly:!0})],m$l.prototype,"state",null),e$2a([d$25()],m$l.prototype,"view",null),m$l=e$2a([n$2L("esri.widgets.Zoom.ZoomViewModel")],m$l);const a$m=m$l,l$k={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let u$g=class extends O$l{constructor(_t,Tt){super(_t,Tt),this.iconClass=l$k.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new a$m}initialize(){this._zoomInButton=new a$n({action:this.zoomIn.bind(this),iconClass:l$k.zoomInIcon}),this._zoomOutButton=new a$n({action:this.zoomOut.bind(this),iconClass:l$k.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(_t){_t!=="horizontal"&&(_t="vertical"),this._set("layout",_t)}render(){const _t=this.viewModel,Tt={[l$k.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=_t.state==="ready"&&_t.canZoomIn,this._zoomOutButton.enabled=_t.state==="ready"&&_t.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,n$1Q("div",{class:this.classes(l$k.base,Tt)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};e$2a([d$25()],u$g.prototype,"iconClass",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],u$g.prototype,"label",void 0),e$2a([d$25({value:"vertical"})],u$g.prototype,"layout",null),e$2a([d$25(),e$1f("esri/widgets/Zoom/t9n/Zoom")],u$g.prototype,"messages",void 0),e$2a([o$1d("viewModel.view")],u$g.prototype,"view",void 0),e$2a([d$25({type:a$m})],u$g.prototype,"viewModel",void 0),u$g=e$2a([n$2L("esri.widgets.Zoom")],u$g);const c$s=u$g,h$n="esri.views.ui.DefaultUI";function u$f(_t){return _t&&_t.view!==void 0}s$2l.getLogger(h$n);let g$c=class extends L$8{constructor(_t){super(_t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this._handles.add([l$2e(()=>this.components,this._componentsWatcher.bind(this),h$1w),l$2e(()=>this.view,this._updateViewAwareWidgets.bind(this),h$1w)])}_add(_t,Tt,Mt,Pt){if(typeof _t=="string"&&this._defaultPositionLookup[_t]){if(this._find(_t))return;_t=this._createComponent(_t)}super._add(_t,Tt,Mt,Pt)}_removeComponents(_t){_t.forEach(Tt=>{const Mt=this._find(Tt);Mt&&(this.remove(Mt),Mt.destroy())})}_updateViewAwareWidgets(_t){this.components.forEach(Tt=>{const Mt=this._find(Tt),Pt=Mt&&Mt.widget;u$f(Pt)&&(Pt.view=_t)})}_componentsWatcher(_t,Tt){this._removeComponents(Tt),this._addComponents(_t),this._adjustPadding(_t)}_adjustPadding(_t){if(!_t.includes("attribution")&&!this._isOverridden("padding")){const{top:Tt}=this.padding;this.padding=Tt}}_addComponents(_t){this.initialized&&_t.forEach(Tt=>this.add(this._createComponent(Tt),this._defaultPositionLookup[Tt]))}_createComponent(_t){const Tt=this._createWidget(_t);if(Tt)return new l$n({id:_t,node:Tt})}_createWidget(_t){return _t==="attribution"?this._createAttribution():_t==="compass"?this._createCompass():_t==="navigation-toggle"?this._createNavigationToggle():_t==="zoom"?this._createZoom():void 0}_createAttribution(){return new u$h({view:this.view})}_createCompass(){return new d$l({view:this.view})}_createNavigationToggle(){return new c$v({view:this.view})}_createZoom(){return new c$s({view:this.view})}};e$2a([d$25()],g$c.prototype,"components",void 0),g$c=e$2a([n$2L(h$n)],g$c);const _$4=g$c;let e$m=class extends _$4{constructor(_t){super(_t),this.components=["attribution","zoom"]}};e$2a([d$25()],e$m.prototype,"components",void 0),e$m=e$2a([n$2L("esri.views.ui.2d.DefaultUI2D")],e$m);const p$u=e$m;var p$t;let a$l=p$t=class extends l$2v{constructor(_t){super(_t),this.color=new l$2f([0,0,0,1])}clone(){return new p$t(m$2e({color:this.color}))}};e$2a([d$25({type:l$2f,json:{write:!0}})],a$l.prototype,"color",void 0),a$l=p$t=e$2a([n$2L("esri.webmap.background.ColorBackground")],a$l);const m$k=a$l,he=s$2l.getLogger("esri.views.MapView");let ce,de,ue,me,ge,fe;async function ye(){const[,{GraphicsView2D:_t,GraphicContainer:Tt,LabelManager:Mt,MapViewNavigation:Pt,MagnifierView2D:Ft,Stage:Dt}]=await Promise.all([__vitePreload(()=>import("./webglDeps.be882777.js"),["assets/webglDeps.be882777.js","assets/VertexArrayObject.b7add78f.js","assets/Texture.7634927e.js","assets/enums.de935fa5.js","assets/ProgramTemplate.a2b1ea90.js","assets/programUtils.75c264d9.js","assets/NestedMap.21c7ee53.js"]),__vitePreload(()=>import("./mapViewDeps.2f5f4549.js"),["assets/mapViewDeps.2f5f4549.js","assets/CIMSymbolHelper.ae274396.js","assets/BidiEngine.ec67919b.js","assets/floatRGBA.5328f61e.js","assets/enums.05a6ea95.js","assets/alignmentUtils.63b4d661.js","assets/definitions.6dca4f7b.js","assets/number.08b65821.js","assets/GeometryUtils.814cb798.js","assets/utils.88e80f44.js","assets/EffectView.d573d8e0.js","assets/Utils.e2c1ea7d.js","assets/enums.de935fa5.js","assets/Texture.7634927e.js","assets/VertexElementDescriptor.d386088d.js","assets/MaterialKey.60b69a2c.js","assets/WGLContainer.3dee497f.js","assets/pixelUtils.2d74e066.js","assets/VertexArrayObject.b7add78f.js","assets/vec4f32.8f10672a.js","assets/ProgramTemplate.a2b1ea90.js","assets/StyleDefinition.5774ff26.js","assets/config.40d47db8.js","assets/GeometryUtils.8166011b.js","assets/earcut.d30cbec0.js","assets/enums.2a1fad7f.js","assets/programUtils.75c264d9.js","assets/NestedMap.21c7ee53.js","assets/Rasterizer.2859baa8.js","assets/cimAnalyzer.8ff78478.js","assets/callExpressionWithFeature.30f2ad17.js","assets/_commonjsHelpers.01f5fe30.js","assets/imageutils.0a7b9b7f.js","assets/Matcher.336089a0.js","assets/visualVariablesUtils.53aa19cb.js","assets/visualVariablesUtils.baa0fa5a.js","assets/tileUtils.a9ad5e9f.js","assets/TileClipper.99759c1f.js","assets/Geometry.b68345ae.js","assets/ExpandedCIM.b6786c8d.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/CircularArray.c3ac6658.js","assets/requestImageUtils.16628477.js","assets/ComputedAttributeStorage.11eabc3d.js","assets/centroid.296f6ecc.js","assets/BaseGraphicContainer.4e263d20.js","assets/normalizeUtilsSync.ca14d31b.js","assets/FeatureContainer.dae5c06c.js","assets/TileContainer.16d059f5.js","assets/schemaUtils.d87fe48b.js","assets/createSymbolSchema.2d8e0797.js","assets/MD5.97b39efc.js","assets/util.7bf54bbf.js","assets/vec3f32.0772c8d8.js","assets/GraphicContainer.49102c35.js"])]);de=_t,ue=Tt,me=Mt,ge=Pt,fe=Ft,ce=Dt}const we=160;function _e(_t){return _t&&_t.declaredClass==="esri.Viewpoint"}let ve=class extends w$M(g$m(p$S(G$5))){constructor(_t){super(_t),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new p$3d({getCollections:()=>{var Tt,Mt;return[(Tt=this.basemapView)==null?void 0:Tt.baseLayerViews,this.layerViews,(Mt=this.basemapView)==null?void 0:Mt.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!1,this.supportsGround=!1,this._stationaryTimer=null,this.frameTask=new s$x(this),this._pePromise=null,this.floors=new j$11,this.highlightOptions=new c$B,this.inputManager=new k$7({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new e$n,this.type="2d",this.ui=new p$u,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new y$l,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([l$2e(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(we)},U$r),this.on("resize",Tt=>this._resizeHandler(Tt)),l$2e(()=>{var Tt;return(Tt=this.animationManager)==null?void 0:Tt.animation},Tt=>{this.animation=Tt})]),c$2d()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new l$r(this.featuresTilingScheme)}get initialExtentRequired(){var Nt;const{scale:_t,constraints:Tt,center:Mt,viewpoint:Pt,extent:Ft}=this;let Dt=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((Nt=this.map.initialViewProperties)==null?void 0:Nt.viewpoint))&&!Ft&&(Tt!=null&&Tt.effectiveLODs||(Dt=-1),(!Mt||_t===0&&Dt===-1)&&(!Pt||!r$1P(Pt.targetGeometry)||Pt.targetGeometry.type!=="extent"&&!Pt.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!en()||(this._pePromise||(this._pePromise=tn().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const _t=this._getDefaultViewpoint();if(!_t)return!1;const Tt=this.spatialReference,Mt=_t.targetGeometry;return!!An(Mt.spatialReference,Tt)||this._projectionEngineLoaded}set animation(_t){const Tt=this._get("animation");if(_t===Tt)return;if(Tt&&Tt.stop(),!_t||_t.isFulfilled())return void this._set("animation",null);this._set("animation",_t),this.frameTask.animationInProgress=!0;const Mt=()=>{_t===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};_t.when(Mt,Mt)}get background(){return this.get("map.initialViewProperties.background")||null}set background(_t){_t===void 0?this._clearOverride("background"):this._override("background",_t)}get center(){if(!this.ready)return this._get("center");const{center:_t,spatialReference:Tt}=this.state.paddedViewState;return new j$Z({x:_t[0],y:_t[1],spatialReference:Tt})}set center(_t){if(_t==null)return;if(!this.ready)return this._set("center",_t),void this.notifyChange("initialExtentRequired");let Tt;try{Tt=this._project(_t,this.spatialReference)}catch(Pt){return void he.error(new s$2i("mapview:invalid-center","could not project the value in the view's spatial reference",{input:_t,error:Pt}))}const Mt=this.viewpoint;xt(Mt,Mt,Tt),this.viewpoint=Mt}set constraints(_t){const Tt=this._get("constraints");Tt&&(this.handles.remove("map-view-constraints"),Tt.destroy()),this._set("constraints",_t),_t&&(_t.view=this,this.ready&&(this.state.viewpoint=_t.fit(this.state.paddedViewState.viewpoint)),this.handles.add(l$2e(()=>_t.version,()=>{this.ready&&this.state&&(this.state.viewpoint=_t.fit(this.state.paddedViewState.viewpoint))},U$r),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(_t){if(_t==null)return;if(!_t.width||!_t.height)return void he.error(new s$2i("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",_t),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let Tt;try{Tt=this._project(_t,this.spatialReference)}catch(Pt){return void he.error(new s$2i("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:Pt}))}const Mt=this.viewpoint;tt(Mt,Mt,Tt,this.size,{constraints:this.constraints}),this.viewpoint=Mt}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(_t){this.ready?(this.state.padding=_t,this._set("padding",this.state.padding)):this._set("padding",_t)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(_t){if(isNaN(_t))return;if(!this.ready)return void this._set("rotation",_t);const Tt=this.viewpoint;wt(Tt,Tt,_t),this.viewpoint=Tt}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(_t){if(!_t||isNaN(_t))return;if(!this.ready){this._set("scale",_t),this._set("zoom",-1);const Mt=this._get("extent");return Mt&&(this._set("extent",null),this._set("center",Mt.center)),void this.notifyChange("initialExtentRequired")}const Tt=this.viewpoint;jt(Tt,Tt,_t),this.viewpoint=Tt}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){return!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(_t=>!_t.destroyed&&!("layerViews"in _t)&&_t.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const _t=this.state.paddedViewState;return _t&&_t.viewpoint.clone()}set viewpoint(_t){if(_t==null)return;if(!this.ready)return this._set("viewpoint",_t),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let Tt,Mt;try{Tt=this._project(_t,this.spatialReference),!_t.scale||isNaN(_t.scale)?Mt=new s$2i("mapview:invalid-viewpoint",`invalid scale value of ${_t.scale}`):t$2e(_t.targetGeometry)&&(Mt=new s$2i("mapview:invalid-viewpoint","geometry not defined"))}catch(Ft){Mt=new s$2i("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:Ft})}if(Mt)return void he.error(Mt);this._scaleBeforeChangingSpatialReference=null;const Pt=new u$1q({targetGeometry:new j$Z,scale:0,rotation:0});Z$3(Pt,Tt),this.constraints.constrain(Pt,this.state.paddedViewState.viewpoint),this.state.viewpoint=Pt,this.frameTask.requestFrame(),this._set("viewpoint",Pt)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(_t){if(_t==null)return;if(!this.ready){this._set("zoom",_t),this._set("scale",0);const Mt=this._get("extent");return Mt&&(this._set("extent",null),this._set("center",Mt.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const Tt=this.viewpoint;jt(Tt,Tt,this.constraints.zoomToScale(_t)),this.viewpoint=Tt,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(_t,Tt){if(_t)return this.animation&&(this.animation=null),this._createAnimation(),j$U(()=>this.ready,Tt).then(()=>{const Mt={animate:!0,...Tt},Pt=Y$2(_t,this);return this.animation.update(Pt),this._gotoTask={},Mt.animate?this._gotoAnimated(Pt,Mt):this._gotoImmediate(Pt,Mt)});he.error("#goTo()","target cannot be null or undefined")}async hitTest(_t,Tt){const Mt=o$y(_t)?r$y(this,_t):_t;if(!this.ready||isNaN(Mt.x)||isNaN(Mt.y))return{screenPoint:Mt,results:[]};let Pt=new Set,Ft=!1,Dt=null,Nt=null;Tt!=null&&Tt.include?Te(Tt.include,je(this,Ht=>Pt.add(Ht),Ht=>{Dt||(Dt=new Set),Dt.add(Ht)},Ht=>Pt.add(Ht),()=>Ft=!0)):(Ft=!0,Pt=new Set(this.allLayerViews)),Tt!=null&&Tt.exclude&&Te(Tt.exclude,je(this,Ht=>Pt.delete(Ht),Ht=>{Nt||(Nt=new Set),Nt.add(Ht)}));const Vt=this.allLayerViews.filter(Ht=>!Ht.suspended&&Pt.has(Ht)).reverse(),zt=this.toMap(Mt);let Xt=[...Ft?this.graphicsView.hitTest(zt).map(Ht=>({type:"graphic",graphic:Ht,layer:null,mapPoint:zt})):[],...await Promise.all(Vt.map(Ht=>Ht.hitTest(zt,Mt)).toArray())].filter(r$1P).flat().filter(r$1P);return Dt&&(Xt=Xt.filter(Ht=>!("graphic"in Ht)||!Ht.graphic||Dt.has(Se(Ht.graphic)))),Nt&&(Xt=Xt.filter(Ht=>!("graphic"in Ht)||!Ht.graphic||Nt.has(Se(Ht.graphic)))),{screenPoint:Mt,results:Xt}}async takeScreenshot(_t){const Tt=this._createScreenshotPlan(_t),Mt=await this._stage.takeScreenshot(Tt);return r$h(Mt,{format:Tt.format,quality:Tt.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(_t){const Tt=this._createScreenshotPlan(_t),Mt=await this._stage.takeScreenshot(Tt);return l$q(Mt,this._pixelFormat)}_createScreenshotPlan(_t){_t=_t||{};const Tt=this.supersampleScreenshotsEnabled?Math.min(4,w$b(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let Mt;_t.layers?(Mt=[],_t.layers.forEach(Dt=>{const Nt=this.allLayerViews.find(Vt=>Vt.layer.id===Dt.id);Nt&&"container"in Nt&&Nt.container&&Mt.push(Nt.container)})):Mt=this._stage.children;const{format:Pt,quality:Ft}=s$j(_t.format,_t.quality);return t$i(_t,Tt,this.size,this.padding,Pt,Ft,Mt,_t.rotation)}get test(){return{takeScreenshot:_t=>this._takeScreenshot(_t)}}toMap(_t){if(!this.ready)return null;const Tt=o$y(_t)?r$y(this,_t):_t,Mt=[0,0],[Pt,Ft]=this.state.toMap(Mt,[Tt.x,Tt.y]),Dt=this.spatialReference;return new j$Z({x:Pt,y:Ft,spatialReference:Dt})}toScreen(_t){if(!this.ready)return null;const Tt=this._project(_t,this.spatialReference),Mt=[Tt.x,Tt.y];return this.state.toScreen(Mt,Mt),c$2D(Mt[0],Mt[1])}on(_t,Tt,Mt,Pt){return this.inputManager&&this.viewEvents.on(_t,Tt,Mt,Pt)||super.on(_t,Tt)}hasEventListener(_t){return super.hasEventListener(_t)||this.viewEvents.hasHandler(_t)}whenLayerView(_t){return super.whenLayerView(_t)}graphicChanged(_t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(_t)}whenReady(){return new Promise(_t=>{this.ready?_t(this):this._resolveWhenReady.push(_t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var _t,Tt,Mt;return this.map&&"initialViewProperties"in this.map&&((Tt=(_t=this.map)==null?void 0:_t.initialViewProperties)==null?void 0:Tt.spatialReference)||((Mt=this.defaultsFromMap)==null?void 0:Mt.spatialReference)||null}hasLayerViewModule(_t){return n$M.hasLayerViewModule(_t)}importLayerView(_t){return n$M.importLayerView(_t)}pixelSizeAt(){return this.ready?this.state.resolution:(he.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(_t){return this.hitTest(_t).then(Tt=>({...Tt,mapPoint:this.toMap(_t)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let _t=i$p(this.type);return a$32("safari")&&a$32("safari")<9&&(_t=new s$2i("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:a$32("safari")})),r$1P(_t)?(he.warn("#validate()",_t.message),Promise.reject(_t)):ye()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new n$Q),this.animation}_cancellableGoTo(_t,Tt,Mt){const Pt=()=>_t===this._gotoTask,Ft=Mt.then(()=>{Pt()&&(this.animation=null)}).catch(Nt=>{throw Pt()&&(this.animation=null,Tt.done||(Tt.stop(),this.frameTask.animationInProgress=!1)),Nt}),Dt=new Promise(Nt=>Nt(Ft));return Tt.when().catch(()=>{Pt()&&Dt.cancel&&Dt.cancel()}),Dt}_gotoImmediate(_t,Tt){const Mt=this._gotoTask,Pt=this.animation,Ft=_t.then(Dt=>{if(f$1M(Tt),Mt!==this._gotoTask)throw new s$2i("view:goto-interrupted","Goto was interrupted");this.viewpoint=Pt.target=Dt,Pt.finish()});return this._cancellableGoTo(Mt,Pt,Ft)}_flipStationary(_t){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const Tt=performance.now()-this._lastStationaryEventTimestamp;Tt<we&&(this._stationaryTimer=this._flipStationary(Tt))},_t)),this._stationaryTimer}_getDefaultViewpoint(){var Yt,rr,ir,nr;const{constraints:_t,initialExtent:Tt,map:Mt,padding:Pt,size:Ft}=this;if(!_t)return null;const Dt=Mt&&"initialViewProperties"in Mt&&Mt.initialViewProperties,Nt={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};_t.effectiveLODs?Nt.zoom!==-1&&(Nt.scale=_t.zoomToScale(Nt.zoom)):Nt.zoom=-1;let Vt=null,zt=null,Xt=0;const Ht=Nt.viewpoint&&Nt.viewpoint.rotation,Wt=Nt.viewpoint&&Nt.viewpoint.targetGeometry;r$1P(Wt)&&(Wt.type==="extent"?Vt=Wt:Wt.type==="point"&&(zt=Wt,Xt=Nt.viewpoint.scale));const Qt=Nt.extent||Vt||((rr=(Yt=Dt==null?void 0:Dt.viewpoint)==null?void 0:Yt.targetGeometry)==null?void 0:rr.extent)||Tt,Zt=Nt.center||zt||(Qt==null?void 0:Qt.center),Kt=Nt.scale||Xt||((ir=Dt==null?void 0:Dt.viewpoint)==null?void 0:ir.scale)||Qt&&H$4(Qt,[Ft[0]-Pt.left-Pt.right,Ft[1]-Pt.top-Pt.bottom]),er=Nt.rotation||Ht||((nr=Dt==null?void 0:Dt.viewpoint)==null?void 0:nr.rotation)||0;return Zt&&Kt?new u$1q({targetGeometry:Zt,scale:Kt,rotation:er}):null}_gotoAnimated(_t,Tt){const Mt=this._gotoTask,Pt=this.animation,Ft=_t.then(Dt=>{if(f$1M(Tt),Mt!==this._gotoTask)throw new s$2i("view:goto-interrupted","Goto was interrupted");return Pt.update(Dt),this.animationManager.animate(Pt,this.viewpoint,Tt),Pt.when().then(()=>{},()=>{})});return this._cancellableGoTo(Mt,Pt,Ft)}_project(_t,Tt){var Ft;const Mt=_t&&_t.targetGeometry||_t;if(!Tt)return _t;if(!Mt)return null;if(Tt.imageCoordinateSystem||((Ft=Mt.spatialReference)==null?void 0:Ft.imageCoordinateSystem)||E$G(Tt,Mt.spatialReference))return _t;const Pt=rn(Mt,Tt);if(!Pt)throw new s$2i("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:Mt,spatialReference:Tt});return _e(_t)?(_t.targetGeometry=Pt,_t):Pt}_resizeHandler(_t){if(!this.ready)return;const Tt=this.state;let Mt=this.state.paddedViewState.viewpoint;const Pt=this.state.paddedViewState.size.concat();Tt.size=[_t.width,_t.height],ht(Mt,Mt,Pt,this.state.paddedViewState.size,this.resizeAlign),Mt=this.constraints.constrain(Mt,null),this.state.viewpoint=Mt}_startup(){var Vt,zt;this.timeline.begin("MapView Startup");const _t=this._getDefaultViewpoint(),Tt=_t.targetGeometry;try{this._project(_t,this.spatialReference)}catch(Xt){he.warn(new t$1W("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:Tt.toJSON(),spatialReference:this.spatialReference,error:Xt})),_t.targetGeometry=((Vt=this.defaultsFromMap.extent)==null?void 0:Vt.center)||new j$Z({x:0,y:0,spatialReference:this.spatialReference})}(zt=this.constraints)==null||zt.fit(_t),this._set("state",new g$h({padding:this._get("padding"),size:this.size,viewpoint:_t})),this.graphics.owner=this;const Mt=new ce(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=Mt,this._magnifierView=new fe,this._magnifierView.magnifier=this.magnifier;const Pt=new me({view:this});this._set("labelManager",Pt);const Ft=new d$w({view:this});this._set("animationManager",Ft);const Dt=new ge({view:this,animationManager:Ft});this._set("mapViewNavigation",Dt),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),Mt.on("post-render",()=>this._set("rendering",Mt.renderRequested)),Mt.on("will-render",()=>this._set("rendering",Mt.renderRequested)),Mt.on("webgl-error",Xt=>this.fatalError=Xt.error),l$2e(()=>this.stationary,Xt=>Mt.stationary=Xt,w$X),l$2e(()=>this.background,Xt=>{Mt.background=Xt,this._magnifierView.background=Xt},w$X),l$2e(()=>this.magnifier,Xt=>this._magnifierView.magnifier=Xt,w$X),l$2e(()=>this.renderingOptions,Xt=>Mt.renderingOptions=Xt,w$X),l$2e(()=>this.highlightOptions,Xt=>Mt.highlightOptions=Xt,w$X),l$2e(()=>this.state.id,()=>Mt.state=this.state,w$X)],"map-view"),this._updateStageChildren();const Nt=this._resolveWhenReady;this._resolveWhenReady=[],Nt.forEach(Xt=>Xt(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[_t,Tt],spatialReference:Mt,rotation:Pt,scale:Ft}=this.state.paddedViewState,Dt=new j$Z({x:_t,y:Tt,spatialReference:Mt});this._set("viewpoint",null),this._set("extent",null),this._set("center",Dt),this._set("zoom",-1),this._set("rotation",Pt),this._set("scale",Ft),this._set("spatialReference",Mt),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(Tt=>{this._stage.addChild(Tt.container)});const _t=this.graphicsView;this._stage.addChild(_t.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const _t=new h$t(S$w.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",_t);const Tt=new de({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new ue(_t)});this.frameTask.graphicsView=Tt,this._set("graphicsView",Tt)}_destroySpatialReferenceDependentProperties(){const _t=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,_t.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(_t){if(!this.ready)return;this.frameTask.stop();for(const Vt of this.allLayerViews)Vt.processDetach();this._destroySpatialReferenceDependentProperties();const Tt=this.state.paddedViewState.clone();if(t$2e(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=Tt.scale;else{const Vt=Tt.viewpoint.clone();Vt.scale=this._scaleBeforeChangingSpatialReference,Tt.viewpoint=Vt}const Mt=Tt.clone(),[Pt,Ft]=Tt.center;let Dt=null;try{Dt=this._project(new j$Z({x:Pt,y:Ft,spatialReference:Tt.spatialReference}),_t)}catch(Vt){en()||he.warn(new t$1W("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:Dt.toJSON(),spatialReference:_t,error:Vt}))}Dt||(Dt=new j$Z({x:0,y:0,spatialReference:_t}));const Nt=xt(new u$1q({targetGeometry:new j$Z,scale:0,rotation:0}),Tt.viewpoint,Dt);Mt.viewpoint=Nt;try{const zt=[Tt.size[0]/2,Tt.size[1]/2],Xt=[zt[0]+20,zt[1]],Ht=Tt.toMap([0,0],Xt),{x:Wt,y:Qt}=this._project(new j$Z({x:Ht[0],y:Ht[1],spatialReference:Tt.spatialReference}),_t);Ht[0]=Wt,Ht[1]=Qt,Mt.toScreen(Ht,Ht);const Zt=pt(zt,Ht,Xt),Kt=Math.hypot(Ht[0]-zt[0],Ht[1]-zt[1])/20;!Number.isFinite(Kt)||Math.abs(Kt)>4?(Nt.rotation=0,Nt.targetGeometry=new j$Z({x:0,y:0,spatialReference:_t})):(Nt.scale*=Kt,Nt.scale>a$32("mapview-srswitch-adjust-rotation-scale-threshold")?Nt.rotation=0:Nt.rotation+=Number.isFinite(Zt)?Zt:0)}catch{}this._get("constraints").constrain(Nt,null),this._get("state").viewpoint=Nt,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const Vt of this.allLayerViews)Vt.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};ve.type="2d",e$2a([d$25({readOnly:!0})],ve.prototype,"animationManager",void 0),e$2a([d$25({constructOnly:!0})],ve.prototype,"deactivatedWebGLExtensions",void 0),e$2a([d$25({constructOnly:!0})],ve.prototype,"debugWebGLExtensions",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"featuresTilingScheme",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"fullOpacity",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"graphicsTileStore",null),e$2a([d$25()],ve.prototype,"graphicsView",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"state",void 0),e$2a([d$25()],ve.prototype,"initialExtentRequired",null),e$2a([d$25()],ve.prototype,"labelManager",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"resourceManager",null),e$2a([d$25({readOnly:!0})],ve.prototype,"textureManager",null),e$2a([d$25({readOnly:!0})],ve.prototype,"mapViewNavigation",void 0),e$2a([d$25({constructOnly:!0})],ve.prototype,"renderCanvas",void 0),e$2a([d$25()],ve.prototype,"renderingOptions",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"rendering",void 0),e$2a([d$25({constructOnly:!0})],ve.prototype,"supersampleScreenshotsEnabled",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"supportsGround",void 0),e$2a([d$25()],ve.prototype,"_stationaryTimer",void 0),e$2a([d$25()],ve.prototype,"_defaultsFromMapSettings",null),e$2a([d$25()],ve.prototype,"_pePromise",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"typeSpecificPreconditionsReady",null),e$2a([d$25()],ve.prototype,"animation",null),e$2a([d$25({type:m$k})],ve.prototype,"background",null),e$2a([d$25({value:null,type:j$Z,dependsOn:["state.id","ready"]})],ve.prototype,"center",null),e$2a([d$25({type:y$l})],ve.prototype,"constraints",null),e$2a([d$25({value:null,type:M$K,dependsOn:["state.id","ready"]})],ve.prototype,"extent",null),e$2a([d$25()],ve.prototype,"floors",void 0),e$2a([d$25({type:c$B})],ve.prototype,"highlightOptions",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"inputManager",void 0),e$2a([d$25()],ve.prototype,"map",void 0),e$2a([d$25({value:{top:0,right:0,bottom:0,left:0},cast:_t=>({top:0,right:0,bottom:0,left:0,..._t})})],ve.prototype,"padding",null),e$2a([d$25()],ve.prototype,"resizeAlign",void 0),e$2a([d$25({readOnly:!0,dependsOn:["state.id"]})],ve.prototype,"resolution",null),e$2a([d$25({value:0,type:Number,dependsOn:["state.id","ready"]})],ve.prototype,"rotation",null),e$2a([d$25({value:0,type:Number,dependsOn:["state.id","ready"]})],ve.prototype,"scale",null),e$2a([d$25({constructOnly:!0})],ve.prototype,"spatialReferenceLocked",void 0),e$2a([d$25()],ve.prototype,"stationary",null),e$2a([d$25({type:e$n,readOnly:!0})],ve.prototype,"timeline",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"type",void 0),e$2a([d$25({readOnly:!0})],ve.prototype,"updating",null),e$2a([d$25({value:null,type:u$1q,dependsOn:["state.id","ready"]})],ve.prototype,"viewpoint",null),e$2a([d$25({value:-1,dependsOn:["state.id","ready"]})],ve.prototype,"zoom",null),e$2a([d$25({type:Boolean})],ve.prototype,"navigating",null),e$2a([d$25({type:p$u})],ve.prototype,"ui",void 0),ve=e$2a([n$2L("esri.views.MapView")],ve);const Ve=ve;function Se(_t){var Mt,Pt,Ft,Dt;const Tt=_t.getObjectId();return Tt?`${(Dt=(Ft=(Mt=_t.layer)==null?void 0:Mt.uid)!=null?Ft:(Pt=_t.sourceLayer)==null?void 0:Pt.uid)!=null?Dt:"MapView"}/${Tt}`:`"MapView/${_t.uid}`}function je(_t,Tt,Mt,Pt,Ft){return Dt=>{if(Dt instanceof g$$){if(Dt.layer===_t)Ft==null||Ft();else{const Nt=_t.allLayerViews.find(Vt=>Vt.layer===Dt.layer);Nt&&(Pt==null||Pt(Nt))}Mt(Se(Dt))}else{const Nt=_t.allLayerViews.find(Vt=>Vt.layer===Dt);Nt&&Tt(Nt)}}}function Te(_t,Tt){if(_t)if(t$28(_t))for(const Mt of _t)if(t$28(Mt))for(const Pt of Mt)Tt(Pt);else Tt(Mt);else Tt(_t)}let p$s=class extends s$1P(l$2v){constructor(_t){super(_t),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};e$2a([d$25()],p$s.prototype,"autoNavigate",void 0),e$2a([d$25()],p$s.prototype,"filter",void 0),e$2a([d$25()],p$s.prototype,"getResults",void 0),e$2a([d$25()],p$s.prototype,"getSuggestions",void 0),e$2a([d$25()],p$s.prototype,"maxResults",void 0),e$2a([d$25()],p$s.prototype,"maxSuggestions",void 0),e$2a([d$25()],p$s.prototype,"minSuggestCharacters",void 0),e$2a([d$25()],p$s.prototype,"outFields",void 0),e$2a([d$25()],p$s.prototype,"placeholder",void 0),e$2a([d$25()],p$s.prototype,"popupEnabled",void 0),e$2a([d$25()],p$s.prototype,"popupTemplate",void 0),e$2a([d$25()],p$s.prototype,"prefix",void 0),e$2a([d$25()],p$s.prototype,"resultGraphicEnabled",void 0),e$2a([d$25()],p$s.prototype,"resultSymbol",void 0),e$2a([d$25()],p$s.prototype,"suggestionsEnabled",void 0),e$2a([d$25()],p$s.prototype,"suffix",void 0),e$2a([d$25()],p$s.prototype,"withinViewEnabled",void 0),e$2a([d$25()],p$s.prototype,"zoomScale",void 0),p$s=e$2a([n$2L("esri.widgets.Search.SearchSource")],p$s);const i$m=p$s,e$l=96;function r$g(_t,Tt){const Mt=Tt||_t.extent,Pt=_t.width,Ft=z$p(Mt&&Mt.spatialReference);return Mt&&Pt?Mt.width/Pt*Ft*d$1u*e$l:0}function i$l(_t,Tt){return _t/(z$p(Tt)*d$1u*e$l)}function c$r(_t,Tt){const Mt=_t.extent,Pt=_t.width,Ft=i$l(Tt,Mt.spatialReference);return Mt.clone().expand(Ft*Pt/Mt.width)}const o$f=s$2l.getLogger("esri.widgets.Search.support.geometryUtils");function s$f(_t,Tt){var Pt,Ft;if(!Tt)return o$f.error("missing-parameter: view is missing."),Promise.reject(new s$2i("searchgeometryutils:missing-parameter","view is missing."));if(!_t)return o$f.error("missing-parameter: point is missing."),Promise.reject(new s$2i("searchgeometryutils:missing-parameter","point is missing."));if(_t.hasZ||Tt.type==="2d")return Promise.resolve(_t);const Mt=(Pt=Tt==null?void 0:Tt.map)==null?void 0:Pt.ground;return Mt&&Mt.layers.length?Mt.queryElevation(_t,{cache:(Ft=Tt.basemapTerrain)==null?void 0:Ft.elevationQueryCache}).then(Dt=>Dt.geometry):Promise.resolve(_t)}function m$j(_t){if(t$2e(_t))return null;switch(_t.type){case"point":return _t;case"extent":return _t.center;case"polygon":return _t.centroid;case"multipoint":return _t.getPoint(0);case"polyline":return _t.getPoint(0,0)}return null}function a$k(_t,Tt,Mt){return t$2e(_t)?null:_t.type==="extent"?_t:_t.type==="multipoint"||_t.type==="polygon"||_t.type==="polyline"?_t.extent:_t.type==="point"?c$q(_t,Tt,Mt):void 0}function p$r(_t,Tt,Mt){return t$2e(_t)||t$2e(Tt)?null:c$q(_t.center,Tt,Mt)}function c$q(_t,Tt,Mt){const Pt=_t.hasZ?_t.z:void 0;return Tt&&Tt.map?(Mt?c$r(Tt,Mt):Tt.extent).clone().centerAt(_t).set({zmax:Pt,zmin:Pt}):new M$K({xmin:_t.x-.25,ymin:_t.y-.25,xmax:_t.x+.25,ymax:_t.y+.25,spatialReference:_t.spatialReference,zmin:Pt,zmax:Pt})}const c$p=/https?:\/\/services.*\.arcgis\.com/i,d$k=/(?:\{([^}]+)\})/g,f$d=s$2l.getLogger("esri.widgets.Search.support.layerSearchUtils");function m$i(_t,Tt){const{exactMatch:Mt=!1,location:Pt,maxResults:Ft,spatialReference:Dt,source:Nt,sourceIndex:Vt,suggestResult:zt,view:Xt}=_t,{layer:Ht,filter:Wt,zoomScale:Qt}=Nt,Zt=Xt&&Xt.scale,Kt=p$q(Nt,Xt),er=Tt&&Tt.signal;return h$m(Ht).then(()=>{const Yt=Ht.popupTemplate;return Yt?Yt.getRequiredFields(Ht.fieldsIndex):null}).then(Yt=>{var mr,wr,br;const{objectIdField:rr,returnZ:ir}=Ht,nr=x$a(Nt);if(!$$2(Ht,nr))throw f$d.error("invalid-field: displayField is invalid."),new s$2i("getResults():invalid-field","displayField is invalid.");const ar=Yt&&Yt.length?Yt:[nr],or=Nt.outFields||ar,ur=y$h(or);if(or.includes(rr)||ur||or.push(rr),(mr=Ht.floorInfo)!=null&&mr.floorField&&or.push(Ht.floorInfo.floorField),!(ur||w$a(Ht,or)))throw f$d.error("invalid-field: outField is invalid."),new s$2i("getResults():invalid-field","outField is invalid.");const dr=Ht.createQuery(),{orderByFields:hr}=Nt;if(hr&&(dr.orderByFields=hr),Dt){dr.outSpatialReference=Dt;const _r=1/z$p(Dt);_r&&(dr.maxAllowableOffset=_r)}const gr=Ht.geometryType==="mesh"||Ht.geometryType==="multipatch",pr=((br=(wr=Ht.capabilities)==null?void 0:wr.data)==null?void 0:br.supportsZ)&&!gr;if(dr.returnZ=pr&&ir!==!1,dr.returnGeometry=!0,dr.multipatchOption=gr?"xyFootprint":null,or&&(dr.outFields=or),Pt)dr.geometry=Pt;else if(zt.key)dr.objectIds=[zt.key];else{const _r=Nt.searchFields||[nr];if(!w$a(Ht,_r))throw f$d.error("invalid-field: search field is invalid."),new s$2i("getResults():invalid-field","search field is invalid.");if(F$7(Ht)&&(dr.num=Ft),Kt&&(dr.geometry=Kt),!zt.text.trim())return[];const{prefix:Mr="",suffix:Ar=""}=Nt,xr=L$7({searchTerm:I$a(`${Mr}${zt.text}${Ar}`),layer:Ht,searchFields:_r,filter:Wt,exactMatch:Mt,type:"search"});if(!xr)return[];dr.where=xr}return Ht.queryFeatures(dr,{signal:er}).then(_r=>U$6(_r,Xt,Nt,Vt,nr,Zt,Qt))})}function g$b(_t,Tt){const{source:Mt,spatialReference:Pt,view:Ft,suggestTerm:Dt,maxSuggestions:Nt,sourceIndex:Vt,exactMatch:zt}=_t,{layer:Xt,filter:Ht}=Mt,Wt=Tt&&Tt.signal,Qt=p$q(Mt,Ft);return h$m(Xt).then(()=>{if(!F$7(Xt))return[];const Zt=x$a(Mt),Kt=Mt.searchFields||[Zt],er=[];Mt.suggestionTemplate?Mt.suggestionTemplate.replace(d$k,(gr,pr)=>(er.push(pr),gr)):er.push(Zt);const Yt=y$h(er);er.includes(Xt.objectIdField)||Yt||er.push(Xt.objectIdField);const rr=$$2(Xt,Zt),ir=Yt||w$a(Xt,er),nr=w$a(Xt,Kt);if(!rr)throw f$d.error("invalid-field: displayField is invalid."),new s$2i("getSuggestions():invalid-field","displayField is invalid.");if(!ir)throw f$d.error("invalid-field: outField is invalid."),new s$2i("getSuggestions():invalid-field","outField is invalid.");if(!nr)throw f$d.error("invalid-field: search field is invalid."),new s$2i("getSuggestions():invalid-field","search field is invalid.");const ar=Xt.createQuery(),{orderByFields:or}=Mt;if(or&&(ar.orderByFields=or),ar.outSpatialReference=Pt,ar.returnGeometry=!1,ar.num=Nt,ar.outFields=er,Qt&&(ar.geometry=Qt),!Dt.trim())return[];const{prefix:ur="",suffix:dr=""}=Mt,hr=L$7({searchTerm:I$a(`${ur}${Dt}${dr}`),layer:Xt,searchFields:Kt,filter:Ht,exactMatch:zt,type:"suggest"});return hr?(ar.where=hr,Xt.queryFeatures(ar,{signal:Wt}).then(gr=>N$7(gr,Mt,Vt,Zt))):[]})}function p$q(_t,Tt){const{filter:Mt,withinViewEnabled:Pt}=_t,Ft=Tt&&Tt.extent;return Mt&&Mt.geometry||(Pt&&Ft?Ft:void 0)}function y$h(_t){return _t&&_t.includes("*")}async function h$m(_t){_t&&await _t.load()}function F$7(_t){var Tt,Mt,Pt;return(Pt=(Mt=(Tt=_t==null?void 0:_t.capabilities)==null?void 0:Tt.query)==null?void 0:Mt.supportsPagination)!=null?Pt:!1}function v$g(_t){var Tt,Mt,Pt,Ft;return(Ft=(Pt=(Mt=(Tt=_t==null?void 0:_t.fieldsIndex)==null?void 0:Tt.fields)==null?void 0:Mt.find(Dt=>Dt.type==="string"))==null?void 0:Pt.name)!=null?Ft:""}function x$a(_t){return _t.displayField||_t.layer.displayField||v$g(_t.layer)}function w$a(_t,Tt){return!(!_t||!Tt)&&Tt.every(Mt=>$$2(_t,Mt))}function $$2(_t,Tt){return!!_t.getField(Tt)}function b$f(_t){for(let Tt=0;Tt<_t.length;Tt++)if(_t.charCodeAt(Tt)>255)return!0;return!1}function j$d(_t,Tt,Mt){let Pt=null;const{codedValues:Ft}=_t;return Ft&&Ft.some(Dt=>{const Nt=Dt.name,Vt=Mt?Nt:Nt.toLowerCase();return(Mt?Tt:Tt.toLowerCase())===Vt&&(Pt=Dt.code.toString(),!0)}),Pt}function I$a(_t){return _t.replace(/\'/g,"''")}function T$6(_t,Tt){const Mt=Tt&&Tt.where;return Mt?`(${_t}) AND (${Mt})`:_t}function R$6({currentTerm:_t,field:Tt,filter:Mt,exactMatch:Pt,url:Ft,type:Dt}){const Nt=Tt.type,Vt=Tt.name;if(Nt==="string"||Nt==="date"||Nt==="global-id"){const zt=c$p.test(Ft),Xt=zt&&b$f(_t)?"N":"";if(Pt&&Dt==="search")return T$6(`${Vt} = ${Xt}'${_t}'`,Mt);const Ht=zt?Vt:`UPPER(${Vt})`,Wt=zt?_t:_t.toUpperCase();return T$6(`${Ht} LIKE ${Xt}${Pt?`'${Wt}%'`:`'%${Wt}%'`}`,Mt)}if(Nt==="oid"||Nt==="small-integer"||Nt==="integer"||Nt==="single"||Nt==="double"){const zt=Number(_t);return isNaN(zt)?null:T$6(`${Vt} = ${zt}`,Mt)}return T$6(`${Vt} = ${_t}`,Mt)}function S$7(_t,Tt){return _t?` OR (${Tt})`:`(${Tt})`}function L$7({searchTerm:_t,layer:Tt,searchFields:Mt,filter:Pt,exactMatch:Ft,type:Dt}){const{definitionExpression:Nt,url:Vt}=Tt;let zt="";return _t&&Mt&&Mt.forEach(Xt=>{const Ht=Tt.getField(Xt),Wt=typeof Tt.getFieldDomain=="function"&&Tt.getFieldDomain(Xt),Qt=(Wt&&Wt.type==="coded-value"?j$d(Wt,_t,Ft):null)||_t||null;if(Qt!==null){const Zt=R$6({currentTerm:Qt,field:Ht,filter:Pt,exactMatch:Ft,url:Vt,type:Dt});Zt&&(zt+=S$7(zt,Zt))}}),Nt?`(${Nt}) AND (${zt})`:zt}function D$5(_t,Tt){let Mt=null;const{codedValues:Pt}=_t;return Pt&&Pt.length&&Pt.some(Ft=>Ft.code===Tt&&(Mt=Ft.name,!0)),Mt}function E$9(_t,Tt){return _t[Object.keys(_t).find(Mt=>Mt.toLowerCase()===Tt.toLowerCase())]}function M$b(_t,Tt,Mt){const Pt=_t.sourceLayer,{attributes:Ft}=_t,Dt=typeof Pt.getFieldDomain=="function"&&Pt.getFieldDomain(Mt);if(Tt)return s$1y(Tt,Ft);if(Mt&&Ft){const Nt=Pt.getField(Mt),Vt=E$9(Ft,Mt);return Vt==null?"":Dt&&Dt.type==="coded-value"?D$5(Dt,Vt):(Nt==null?void 0:Nt.type)==="date"?L$r(new Date(Vt)):typeof Vt=="number"?Vt.toString():typeof Vt!="string"?"":Vt.trim()}return""}function C$5(_t,Tt,Mt,Pt){const Ft=_t.sourceLayer,{attributes:Dt}=_t,{objectIdField:Nt}=Ft,Vt=Dt[Nt];return{text:M$b(_t,Tt.suggestionTemplate,Pt),key:Vt,sourceIndex:Mt}}function N$7(_t,Tt,Mt,Pt){return _t.features.map(Ft=>C$5(Ft,Tt,Mt,Pt))}function k$5(_t,Tt,Mt,Pt,Ft,Dt,Nt){const Vt=_t.clone(),zt=_t.sourceLayer,Xt=zt&&zt.objectIdField,Ht=Xt&&_t.attributes[Xt],Wt=M$b(_t,Mt.searchTemplate,Ft),Qt=a$k(Vt.geometry,Tt,Dt),Zt=typeof Nt=="number"?p$r(m$2e(Qt),Tt,Nt):Qt,Kt=_t.clone();return r$1P(Zt)&&(Kt.geometry=v$V.fromExtent(Zt)),{extent:Zt,target:Kt,feature:Vt,key:Ht,name:Wt,sourceIndex:Pt}}function U$6(_t,Tt,Mt,Pt,Ft,Dt,Nt){return _t.features.map(Vt=>k$5(Vt,Tt,Mt,Pt,Ft,Dt,Nt))}var o$e;let h$l=o$e=class extends i$m{constructor(_t){super(_t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(Tt,Mt)=>m$i({source:this,...Tt},Mt),this.getSuggestions=(Tt,Mt)=>g$b({source:this,...Tt},Mt)}set layer(_t){this._set("layer",_t),_t&&_t.load().catch(()=>{})}get name(){return this._getLayerTitle()||""}set name(_t){_t!==void 0?this._override("name",_t):this._clearOverride("name")}clone(){return new o$e({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?m$2e(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?m$2e(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var _t,Tt;return(Tt=(_t=this.layer.fieldsIndex.fields.find(Mt=>Mt.type==="string"))==null?void 0:_t.name)!=null?Tt:""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:_t,searchFields:Tt}=this;return _t.loaded?`: ${(Tt||[this._getDisplayField()]).map(Mt=>{const Pt=_t.getField(Mt);return Pt&&Pt.alias||Mt}).join(", ")}`:""}_getLayerTitle(){const{layer:_t}=this;if(!_t)return;const{title:Tt}=_t;return Tt?`${Tt}${this._getSearchFieldsString()}`:void 0}};e$2a([d$25({json:{read:{source:"field.name"},write:{target:"field.name"}}})],h$l.prototype,"displayField",void 0),e$2a([d$25({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],h$l.prototype,"exactMatch",void 0),e$2a([d$25({value:null})],h$l.prototype,"layer",null),e$2a([d$25()],h$l.prototype,"name",null),e$2a([d$25({type:[String],json:{write:!0}})],h$l.prototype,"orderByFields",void 0),e$2a([d$25()],h$l.prototype,"searchFields",void 0),e$2a([d$25()],h$l.prototype,"searchTemplate",void 0),e$2a([d$25()],h$l.prototype,"suggestionTemplate",void 0),h$l=o$e=e$2a([n$2L("esri.widgets.Search.LayerSearchSource")],h$l);const n$o=h$l;function n$n(_t){return _t&&typeof _t.x=="number"&&typeof _t.y=="number"}function e$k(_t){return _t&&typeof _t.xmin=="number"&&typeof _t.ymin=="number"&&typeof _t.xmax=="number"&&typeof _t.ymax=="number"}let i$k=class extends l$2v{constructor(_t){super(_t),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};e$2a([d$25({type:String,json:{write:!0}})],i$k.prototype,"address",void 0),e$2a([d$25({type:Object,json:{write:!0}})],i$k.prototype,"attributes",void 0),e$2a([d$25({type:M$K,json:{write:!0}})],i$k.prototype,"extent",void 0),e$2a([d$25({type:j$Z,json:{write:!0}})],i$k.prototype,"location",void 0),e$2a([d$25({type:Number,json:{write:!0}})],i$k.prototype,"score",void 0),i$k=e$2a([n$2L("esri.rest.support.AddressCandidate")],i$k);const c$o=i$k,t$h={type:String,json:{read:{source:"token"},write:{target:"token"}}};let l$j=class extends l$2v{constructor(_t){super(_t),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};e$2a([d$25({type:Object,json:{write:!0}})],l$j.prototype,"address",void 0),e$2a([d$25(t$h)],l$j.prototype,"apiKey",void 0),e$2a([d$25({type:[String],json:{read:{source:"category",reader:_t=>_t?_t.split(","):null},write:{target:"category",writer:(_t,Tt)=>{Tt.category=_t?_t.join(","):null}}}})],l$j.prototype,"categories",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$j.prototype,"countryCode",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],l$j.prototype,"forStorage",void 0),e$2a([d$25({type:j$Z,json:{write:{writer:(_t,Tt)=>{Tt.location=_t?_t.clone().normalize():null}}}})],l$j.prototype,"location",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$j.prototype,"locationType",void 0),e$2a([d$25({type:String,json:{write:!0}})],l$j.prototype,"magicKey",void 0),e$2a([d$25({type:Number,json:{write:!0}})],l$j.prototype,"maxLocations",void 0),e$2a([d$25({type:[String],json:{write:{writer:(_t,Tt)=>{Tt.outFields=_t?_t.join(","):null}}}})],l$j.prototype,"outFields",void 0),e$2a([d$25({type:k$y,json:{read:{source:"outSR"},write:{target:"outSR"}}})],l$j.prototype,"outSpatialReference",void 0),e$2a([d$25({type:M$K,json:{write:{writer:(_t,Tt)=>{const Mt=_t?_t.shiftCentralMeridian():null;Tt.searchExtent=Mt}}}})],l$j.prototype,"searchExtent",void 0),l$j=e$2a([n$2L("esri.rest.support.AddressToLocationsParameters")],l$j),l$j.from=b$1b(l$j);const c$n=l$j;async function d$j(_t,Tt,Mt){Tt=c$n.from(Tt);const Pt=n$1B(_t),{address:Ft,...Dt}=Tt.toJSON(),Nt={...Ft,...Dt,f:"json"},Vt=o$_({...Pt.query,...Nt}),zt=e$13(Vt,Mt),Xt=`${Pt.path}/findAddressCandidates`;return U$v(Xt,zt).then(f$c)}function f$c({data:_t}){if(!_t)return[];const{candidates:Tt,spatialReference:Mt}=_t;return Tt?Tt.map(Pt=>{if(!Pt)return;const{extent:Ft,location:Dt}=Pt,Nt=!Ft||e$k(Ft);return n$n(Dt)&&Nt?(Ft&&(Ft.spatialReference=Mt),Dt.spatialReference=Mt,c$o.fromJSON(Pt)):void 0}):[]}let a$j=class extends l$2v{constructor(_t){super(_t),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};e$2a([d$25(t$h)],a$j.prototype,"apiKey",void 0),e$2a([d$25({type:j$Z,json:{write:{writer:(_t,Tt)=>{const Mt=_t?_t.clone().normalize():null,Pt=Mt!==void 0;Tt.location=Pt?Mt:null}}}})],a$j.prototype,"location",void 0),e$2a([d$25({type:String,json:{write:!0}})],a$j.prototype,"locationType",void 0),e$2a([d$25({type:k$y,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a$j.prototype,"outSpatialReference",void 0),a$j=e$2a([n$2L("esri.rest.support.LocationToAddressParameters")],a$j),a$j.from=b$1b(a$j);const n$m=a$j;async function n$l(_t,Tt,Mt){Tt=n$m.from(Tt);const Pt=n$1B(_t),Ft={...Tt.toJSON(),f:"json"},Dt=o$_({...Pt.query,...Ft}),Nt=e$13(Dt,Mt),Vt=`${Pt.path}/reverseGeocode`;return U$v(Vt,Nt).then(d$i)}function d$i({data:_t}){if(!_t)return;const{address:Tt,location:Mt}=_t,Pt=Tt&&Tt.Match_addr||"";return c$o.fromJSON({address:Pt,attributes:Tt||{},location:Mt,score:100})}let e$j=class extends l$2v{constructor(_t){super(_t),this.isCollection=null,this.magicKey=null,this.text=null}};e$2a([d$25({type:Boolean,json:{write:!0}})],e$j.prototype,"isCollection",void 0),e$2a([d$25({type:String,json:{write:!0}})],e$j.prototype,"magicKey",void 0),e$2a([d$25({type:String,json:{write:!0}})],e$j.prototype,"text",void 0),e$j=e$2a([n$2L("esri.rest.support.SuggestionCandidate")],e$j);const p$p=e$j;let c$m=class extends l$2v{constructor(_t){super(_t),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};e$2a([d$25(t$h)],c$m.prototype,"apiKey",void 0),e$2a([d$25({type:[String],json:{read:{source:"category",reader:_t=>_t?_t.split(","):null},write:{target:"category",writer:(_t,Tt)=>{Tt.category=_t?_t.join(","):null}}}})],c$m.prototype,"categories",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$m.prototype,"countryCode",void 0),e$2a([d$25({type:j$Z,json:{write:{writer:(_t,Tt)=>{Tt.location=_t?_t.clone().normalize():null}}}})],c$m.prototype,"location",void 0),e$2a([d$25({type:Number,json:{write:!0}})],c$m.prototype,"maxSuggestions",void 0),e$2a([d$25({type:k$y,json:{read:{source:"outSR"},write:{target:"outSR"}}})],c$m.prototype,"outSpatialReference",void 0),e$2a([d$25({type:M$K,json:{write:{writer:(_t,Tt)=>{const Mt=_t?_t.shiftCentralMeridian():null;Tt.searchExtent=JSON.stringify(Mt)}}}})],c$m.prototype,"searchExtent",void 0),e$2a([d$25({type:String,json:{write:!0}})],c$m.prototype,"text",void 0),c$m=e$2a([n$2L("esri.rest.support.SuggestLocationsParameters")],c$m),c$m.from=b$1b(c$m);const l$i=c$m;async function u$e(_t,Tt,Mt){const Pt=n$1B(_t),Ft={...(Tt=l$i.from(Tt)).toJSON(),f:"json"},Dt=o$_({...Pt.query,...Ft}),Nt=e$13(Dt,Mt),Vt=`${Pt.path}/suggest`;return U$v(Vt,Nt).then(i$j)}function i$j(_t){const{data:Tt}=_t;if(!Tt)return[];const{suggestions:Mt}=Tt;return Mt?Mt.map(Pt=>new p$p(Pt)):[]}const f$b="Single Line Input",d$h=3e5;function g$a(_t,Tt){return _t.location?h$k(_t,Tt):I$9(_t,Tt)}function p$o(_t,Tt){if(Tt.localSearchDisabled)return null;const Mt=_t==null?void 0:_t.scale;return typeof Mt=="number"&&Mt<=d$h?_t.get("extent.center"):null}function y$g(_t,Tt){const{source:Mt,spatialReference:Pt,view:Ft,suggestTerm:Dt,maxSuggestions:Nt,sourceIndex:Vt}=_t,zt=new l$i,{apiKey:Xt,url:Ht}=Mt,Wt=j$c(Mt,Ft),Qt=Tt&&Tt.signal;if(!Ht)return Promise.resolve(null);Xt&&(zt.apiKey=Xt),Mt.categories&&(zt.categories=Mt.categories),Pt&&(zt.outSpatialReference=Pt);const Zt=p$o(Ft,Mt);if(Zt&&(zt.location=Zt),!Dt.trim())return Promise.resolve(null);const{prefix:Kt="",suffix:er=""}=Mt,Yt=`${Kt}${Dt}${er}`;return zt.text=Yt,Wt&&(zt.searchExtent=Wt),zt.maxSuggestions=Nt,Mt.countryCode&&(zt.countryCode=Mt.countryCode),u$e(Ht,zt,{signal:Qt}).then(rr=>b$e(rr,Vt))}function x$9(_t){return!!_t&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(_t)}function v$f(_t){return!!_t&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(_t)}function S$6(_t){return!!_t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(_t)}const w$9="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function h$k(_t,Tt){const{source:Mt,spatialReference:Pt,location:Ft,sourceIndex:Dt,view:Nt}=_t,{apiKey:Vt,url:zt,zoomScale:Xt,defaultZoomScale:Ht}=Mt,Wt=Nt&&Nt.scale,Qt=Tt&&Tt.signal,Zt=new n$m;return Zt.location=Ft,Vt&&(Zt.apiKey=Vt),Pt&&(Zt.outSpatialReference=Pt),n$l(zt,Zt,{signal:Qt}).then(Kt=>L$6([Kt],{sourceIndex:Dt,scale:Wt,view:Nt,zoomScale:Xt,defaultZoomScale:Ht})).catch(()=>[])}function j$c(_t,Tt){const{filter:Mt,withinViewEnabled:Pt}=_t,Ft=Tt&&Tt.scale,Dt=Tt&&Tt.extent,Nt=Mt&&Mt.geometry;return a$k(Nt,Tt,Ft)||(Pt&&Dt?Dt:void 0)}function I$9(_t,Tt){const{source:Mt,suggestResult:Pt,spatialReference:Ft,view:Dt,maxResults:Nt,sourceIndex:Vt}=_t,zt=Mt&&Mt.zoomScale,Xt=Mt&&Mt.defaultZoomScale;if(!Pt.text.trim())return Promise.resolve(null);const Ht=!Pt.key&&Mt.prefix?Mt.prefix:"",Wt=!Pt.key&&Mt.suffix?Mt.suffix:"",Qt=`${Ht}${Pt.text}${Wt}`,Zt=new c$n,{apiKey:Kt,url:er}=Mt,Yt=Dt&&Dt.scale,rr=j$c(Mt,Dt),ir=Tt&&Tt.signal;if(Kt&&(Zt.apiKey=Kt),!er)return Promise.resolve(null);Mt.categories&&(Zt.categories=Mt.categories),Mt.locationType&&(Zt.locationType=Mt.locationType),Ft&&(Zt.outSpatialReference=Ft);const nr=p$o(Dt,Mt);nr&&(Zt.location=nr),Zt.maxLocations=Nt,rr&&(Zt.searchExtent=rr),Mt.countryCode&&(Zt.countryCode=Mt.countryCode);const{key:ar}=Pt,or=`${ar}`;return ar&&(Zt.magicKey=or),Zt.address={},Zt.address[Mt.singleLineFieldName||f$b]=Qt,Mt.outFields&&(Zt.outFields=Mt.outFields),d$j(er,Zt,{signal:ir}).then(ur=>L$6(ur,{key:or,scale:Yt,sourceIndex:Vt,view:Dt,zoomScale:zt,defaultZoomScale:Xt}))}function $$1(_t,Tt){return{text:_t.text,key:_t.magicKey,sourceIndex:Tt}}function b$e(_t,Tt){return _t.map(Mt=>$$1(Mt,Tt))}function K$2(_t,Tt){const{key:Mt,scale:Pt,sourceIndex:Ft,view:Dt,zoomScale:Nt,defaultZoomScale:Vt}=Tt,{attributes:zt,extent:Xt,location:Ht,address:Wt}=_t,Qt=new g$$({geometry:Ht,attributes:zt}),Zt=Xt||Ht,Kt=a$k(Zt,Dt,Pt),er=typeof Nt=="number"?p$r(Kt,Dt,Nt):typeof Vt=="number"&&Zt.type==="point"?p$r(Kt,Dt,Vt):Kt,Yt=Ht?`${Ht.x},${Ht.y}`:"",rr=Wt||Yt,ir=Qt.clone();return r$1P(er)&&(ir.geometry=v$V.fromExtent(er)),{extent:er,feature:Qt,target:ir,key:Mt,name:rr,sourceIndex:Ft}}function L$6(_t,Tt){return _t.filter(Boolean).map(Mt=>K$2(Mt,Tt))}var a$i;const p$n="esri.widgets.Search.LocatorSearchSource";let n$k=a$i=class extends i$m{constructor(_t){super(_t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(Tt,Mt)=>g$a({source:this,...Tt},Mt),this.getSuggestions=(Tt,Mt)=>y$g({source:this,...Tt},Mt)}clone(){return new a$i({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?m$2e(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?m$2e(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};e$2a([d$25()],n$k.prototype,"apiKey",void 0),e$2a([d$25()],n$k.prototype,"categories",void 0),e$2a([d$25()],n$k.prototype,"countryCode",void 0),e$2a([d$25({json:{write:!0}})],n$k.prototype,"defaultZoomScale",void 0),e$2a([d$25()],n$k.prototype,"localSearchDisabled",void 0),e$2a([d$25()],n$k.prototype,"locationType",void 0),e$2a([d$25({json:{write:!0}})],n$k.prototype,"name",void 0),e$2a([d$25({json:{write:!0}})],n$k.prototype,"placeholder",void 0),e$2a([d$25()],n$k.prototype,"searchTemplate",void 0),e$2a([d$25({json:{write:!0}})],n$k.prototype,"singleLineFieldName",void 0),e$2a([d$25({json:{read:{source:"suggest"},write:{target:"suggest"}}})],n$k.prototype,"suggestionsEnabled",void 0),e$2a([d$25({json:{write:!0}})],n$k.prototype,"url",void 0),e$2a([d$25({json:{write:!0}})],n$k.prototype,"zoomScale",void 0),n$k=a$i=e$2a([n$2L(p$n)],n$k);const c$l=n$k;new s$1_({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new s$1_({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let p$m=class extends l$2v{constructor(_t){super(_t),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};e$2a([d$25({type:String,json:{write:!0}})],p$m.prototype,"deviationUnit",void 0),e$2a([d$25({json:{read:{reader:_t=>_t?_t.map(Tt=>d$1M(Tt)):null},write:{writer:(_t,Tt)=>{Tt.geometries=_t.map(Mt=>Mt.toJSON())}}}})],p$m.prototype,"geometries",void 0),e$2a([d$25({type:Number,json:{write:!0}})],p$m.prototype,"maxDeviation",void 0),p$m=e$2a([n$2L("esri.rest.support.GeneralizeParameters")],p$m),p$m.from=b$1b(p$m);new s$1_({preserveShape:"preserve-shape"});let l$h=class extends l$2v{constructor(_t){super(_t),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};e$2a([d$25({type:String,json:{write:!0}})],l$h.prototype,"calculationType",void 0),e$2a([d$25({type:Boolean,json:{write:!0}})],l$h.prototype,"geodesic",void 0),e$2a([d$25({json:{write:!0}})],l$h.prototype,"lengthUnit",void 0),e$2a([d$25({type:[m$1R],json:{read:{reader:_t=>_t?_t.map(Tt=>d$1M(Tt)):null},write:{writer:(_t,Tt)=>{Tt.polylines=_t.map(Mt=>Mt.toJSON())}}}})],l$h.prototype,"polylines",void 0),l$h=e$2a([n$2L("esri.rest.support.LengthsParameters")],l$h),l$h.from=b$1b(l$h);new s$1_({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new s$1_({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let i$i=class extends l$2v{constructor(_t){super(_t),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};e$2a([d$25({type:Number,json:{write:!0}})],i$i.prototype,"bevelRatio",void 0),e$2a([d$25({json:{read:{reader:_t=>_t?_t.map(Tt=>d$1M(Tt)):null},write:{writer:(_t,Tt)=>{Tt.geometries=_t.map(Mt=>Mt.toJSON())}}}})],i$i.prototype,"geometries",void 0),e$2a([d$25({type:Number,json:{write:!0}})],i$i.prototype,"offsetDistance",void 0),e$2a([d$25({type:String,json:{write:!0}})],i$i.prototype,"offsetHow",void 0),e$2a([d$25({type:String,json:{write:!0}})],i$i.prototype,"offsetUnit",void 0),i$i=e$2a([n$2L("esri.rest.support.OffsetParameters")],i$i),i$i.from=b$1b(i$i);function o$d(_t,Tt,Mt){const Pt=a$2x(Tt);return _t.map(Ft=>{const Dt=Pt.fromJSON(Ft);return Dt.spatialReference=Mt,Dt})}let i$h=class extends l$2v{constructor(_t){super(_t),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const _t=this.geometries.map(Pt=>Pt.toJSON()),Tt=this.geometries[0],Mt={};return Mt.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),Mt.inSR=Tt.spatialReference.wkid||JSON.stringify(Tt.spatialReference.toJSON()),Mt.geometries=JSON.stringify({geometryType:v$U(Tt),geometries:_t}),this.transformation&&(Mt.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(Mt.transformForward=this.transformForward),Mt}};e$2a([d$25()],i$h.prototype,"geometries",void 0),e$2a([d$25({json:{read:{source:"outSR"}}})],i$h.prototype,"outSpatialReference",void 0),e$2a([d$25()],i$h.prototype,"transformation",void 0),e$2a([d$25()],i$h.prototype,"transformForward",void 0),i$h=e$2a([n$2L("esri.rest.support.ProjectParameters")],i$h);const a$h=i$h,i$g=b$1b(a$h);async function n$j(_t,Tt,Mt){Tt=i$g(Tt);const Pt=n$1B(_t),Ft={...Pt.query,f:"json",...Tt.toJSON()},Dt=Tt.outSpatialReference,Nt=v$U(Tt.geometries[0]),Vt=e$13(Ft,Mt);return U$v(Pt.path+"/project",Vt).then(({data:{geometries:zt}})=>o$d(zt,Nt,Dt))}new s$1_({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let p$l=class extends l$2v{constructor(_t){super(_t),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};e$2a([d$25({json:{read:{reader:_t=>_t?_t.map(Tt=>d$1M(Tt)):null},write:{writer:(_t,Tt)=>{Tt.geometries1=_t.map(Mt=>Mt.toJSON())}}}})],p$l.prototype,"geometries1",void 0),e$2a([d$25({json:{read:{reader:_t=>_t?_t.map(Tt=>d$1M(Tt)):null},write:{writer:(_t,Tt)=>{Tt.geometries2=_t.map(Mt=>Mt.toJSON())}}}})],p$l.prototype,"geometries2",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$l.prototype,"relation",void 0),e$2a([d$25({type:String,json:{write:!0}})],p$l.prototype,"relationParameter",void 0),p$l=e$2a([n$2L("esri.rest.support.RelationParameters")],p$l),p$l.from=b$1b(p$l);new s$1_({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let m$h=class extends l$2v{constructor(_t){super(_t),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};e$2a([d$25({type:String,json:{write:!0}})],m$h.prototype,"extendHow",void 0),e$2a([d$25({type:[m$1R],json:{read:{reader:_t=>_t?_t.map(Tt=>d$1M(Tt)):null},write:{writer:(_t,Tt)=>{Tt.polylines=_t.map(Mt=>Mt.toJSON())}}}})],m$h.prototype,"polylines",void 0),e$2a([d$25({json:{read:{reader:_t=>_t?d$1M(_t):null},write:{writer:(_t,Tt)=>{Tt.trimExtendTo=_t.toJSON()}}}})],m$h.prototype,"trimExtendTo",void 0),m$h=e$2a([n$2L("esri.rest.support.TrimExtendParameters")],m$h),m$h.from=b$1b(m$h);const c$k=s$2l.getLogger("esri.widgets.support.geolocationUtils"),u$d={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function p$k(){const _t=a$32("esri-geolocation");return _t||c$k.warn("geolocation-unsupported","Geolocation unsupported."),_t}function l$g(){const _t=window.isSecureContext;return _t||c$k.warn("insecure-context","Geolocation requires a secure origin."),_t}function g$9(){return p$k()&&l$g()}function j$b(_t){return _t||(_t=u$d),new Promise((Mt,Pt)=>{setTimeout(()=>Pt(new s$2i("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(Mt,Pt,_t)})}function f$a(_t,Tt){const{position:Mt,view:Pt}=_t;return P$4(y$f(d$g(Mt)),Pt,Tt)}function d$g(_t){const Tt=_t&&_t.coords||{},Mt={accuracy:Tt.accuracy,altitude:Tt.altitude,altitudeAccuracy:Tt.altitudeAccuracy,heading:Tt.heading,latitude:Tt.latitude,longitude:Tt.longitude,speed:Tt.speed};return _t&&{coords:Mt,timestamp:_t.timestamp}}function y$f(_t){const Tt=_t&&_t.coords;return Tt?new j$Z({longitude:Tt.longitude,latitude:Tt.latitude,z:Tt.altitude||null,spatialReference:{wkid:4326}}):null}function P$4(_t,Tt,Mt){if(!Tt)return Promise.resolve(_t);const Pt=Tt.spatialReference;return Pt.isWGS84?Promise.resolve(_t):Pt.isWebMercator?Promise.resolve(R$v(_t)):w$8(Mt).then(Ft=>{if(!Ft)throw new s$2i("geometry-service:missing-url","Geometry service URL is missing");const Dt=new a$h({geometries:[_t],outSpatialReference:Pt});return n$j(Ft,Dt,Mt).then(Nt=>Nt[0])})}function w$8(_t){if(r$1O.geometryServiceUrl)return Promise.resolve(r$1O.geometryServiceUrl);const Tt=B$q.getDefault();return Tt.load(_t).catch(()=>{}).then(()=>Tt.get("helperServices.geometry.url"))}function Q$2(_t,Tt){return _t.hasOwnProperty(Tt)&&_t[Tt]!=null&&_t[Tt]!==""}const Z$2=()=>h$1B("esri/widgets/Search/t9n/Search"),q$4="esri.widgets.Search.SearchViewModel",z$5=s$2l.getLogger(q$4),K$1="highlight",W$1=j$11.ofType({key:_t=>_t.layer?"layer":"locator",base:i$m,typeMap:{layer:n$o,locator:c$l}}),X$2=k$y.WGS84,Y$1="esri/images/search/search-symbol-32.png",$=/<(?:.|\s)*?>/g,ee$1=-1;let te$1=class extends e$D(n$2K.EventedMixin(y$1E)){constructor(_t){super(_t),this._handles=new u$1P,this._gotoController=null,this._searching=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new W$1,this.defaultSymbols={point:new n$27({url:a$2M(Y$1),size:24,width:24,height:24}),polyline:new m$1F({color:[130,130,130,1],width:2}),polygon:new S$A({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=B$q.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new W$1,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const _t=async()=>{const Tt=await Z$2();this.messages=Tt,this.defaultPopupTemplate=new B$m({title:Tt.searchResult,content:"{Match_addr}"})};_t(),this._handles.add([l$2e(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),h$1w),s$1$(_t)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.getItemAt(this.activeSourceIndex)||null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:ee$1}set activeSourceIndex(_t){_t!==void 0?this._override("activeSourceIndex",_t):this._clearOverride("activeSourceIndex")}get allPlaceholder(){var _t;return(_t=this.messages)==null?void 0:_t.allPlaceholder}set allPlaceholder(_t){_t?this._override("allPlaceholder",_t):this._clearOverride("allPlaceholder")}get allSources(){const{sources:_t,defaultSources:Tt,includeDefaultSources:Mt}=this,Pt=typeof Mt=="function"?Mt.call(null,{sources:_t,defaultSources:Tt}):Mt?Tt.concat(_t):_t,Ft=this._get("allSources")||new W$1;return Ft.removeAll(),Ft.addMany(Pt.filter(Boolean)),Ft}get defaultSymbol(){return r$1I(z$5,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._get("defaultSymbol")}set defaultSymbol(_t){r$1I(z$5,"defaultSymbol",{replacement:"defaultSymbols",version:"4.22"}),this._set("defaultSymbol",_t)}get locationEnabled(){return this._get("locationEnabled")||g$9()}set locationEnabled(_t){if(_t===void 0)return void this._clearOverride("locationEnabled");const Tt=g$9();if(_t&&!Tt){const Mt=new s$2i("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});z$5.error(Mt)}this._override("locationEnabled",_t&&Tt)}get placeholder(){const{allSources:_t,activeSourceIndex:Tt,allPlaceholder:Mt}=this;if(Tt===ee$1)return Mt;const Pt=_t.getItemAt(Tt);return Pt?Pt.placeholder:""}set searchTerm(_t){this._set("searchTerm",_t||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==_t&&this._set("selectedSuggestion",null),_t===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(_t,Tt){this.emit("search-start"),this.clearGraphics();const Mt=this._createSuggestionForSearch(_t),Pt=this.when().then(()=>this._getResultsFromSources(Mt,Tt).then(Ft=>{var zt;if((zt=Tt==null?void 0:Tt.signal)!=null&&zt.aborted)return null;const Dt={activeSourceIndex:this.activeSourceIndex,searchTerm:Mt.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(Dt,Ft,Mt);const Nt=this._getFirstResult(Dt.results),Vt=(Mt.location&&Nt?Nt.name:Mt.text).replace($,"");return this._set("searchTerm",Vt),(Mt.key&&typeof Mt.sourceIndex=="number"||Mt.location)&&this._set("selectedSuggestion",Mt),this._set("results",Dt.results),this._set("resultCount",Dt.results.reduce((Xt,Ht)=>Xt+Ht.results.length,0)),this.emit("search-complete",Dt),this._selectFirstResult(Nt).then(()=>Dt)})).then(Ft=>(this._clearSearching(),Ft),Ft=>{throw this._clearSearching(),Ft});return this._searching=Pt,Pt}searchNearby(_t){if(!this.locationEnabled){const Mt=new s$2i("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return z$5.error(Mt),Promise.reject(Mt)}const Tt=j$b().then(Mt=>f$a({position:Mt,view:this.view},_t)).then(Mt=>this.search(Mt,_t));return this._searching=Tt,Tt.catch(()=>{}).then(()=>this._clearSearching()),Tt}select(_t){if(this.clearGraphics(),!_t){const rr=new s$2i("select:missing-parameter","Cannot select without a searchResult.",{searchResult:_t});return z$5.error(rr),Promise.reject(rr)}const{view:Tt}=this,Mt=Q$2(_t,"sourceIndex")?_t.sourceIndex:this._getSourceIndexOfResult(_t),Pt=this.allSources.getItemAt(Mt);if(!Pt){const rr=new s$2i("select:missing-source","Cannot select without a source.",{source:Pt});return z$5.error(rr),Promise.reject(rr)}const Ft=Pt instanceof n$o?this._getLayerSourcePopupTemplate(Pt):Pt.popupTemplate,Dt=Pt.resultSymbol||this._getDefaultSymbol(_t),Nt=Q$2(Pt,"resultGraphicEnabled")?Pt.resultGraphicEnabled:this.resultGraphicEnabled,Vt=Q$2(Pt,"autoNavigate")?Pt.autoNavigate:this.autoNavigate,zt=Q$2(Pt,"popupEnabled")?Pt.popupEnabled:this.popupEnabled,Xt=zt?Ft||this.popupTemplate||this.defaultPopupTemplate:null,{feature:Ht}=_t;if(!Ht){const rr=new s$2i("select:missing-feature","Cannot select without a feature.",{feature:Ht});return z$5.error(rr),Promise.reject(rr)}const{attributes:Wt,geometry:Qt,layer:Zt,sourceLayer:Kt}=Ht,er=m$j(Qt),Yt={layerViewQuery:this._getLayerView(Ht),elevationQuery:Tt&&r$1P(er)?s$f(er,Tt).catch(()=>er):Promise.resolve(er)};return E$K(Yt).then(rr=>{const ir=rr.layerViewQuery.value,nr=rr.elevationQuery.value;Dt instanceof m$1s&&(Dt.text=_t.name);const ar=Tt&&Vt?_t.target||_t.extent:null;return(r$1P(ar)?this._goToSearchResult(ar):Promise.resolve()).then(()=>{var hr;const or=ir?Ht:new g$$({geometry:Qt,symbol:Dt,attributes:Wt,layer:Zt,sourceLayer:Kt,popupTemplate:Xt}),ur=zt&&((hr=this.view)==null?void 0:hr.popup),dr=ur&&or.getEffectivePopupTemplate(ur.defaultPopupTemplateEnabled);return dr&&Tt.popup.open({features:[or],location:nr}),ir&&e$E(ir)&&!dr&&this._highlightFeature({graphic:or,layerView:ir}),!ir&&Nt&&Tt&&Tt.graphics.push(or),this._setResultFloor(_t),this._set("selectedResult",_t),this._set("resultGraphic",or),this.emit("select-result",{result:_t,source:Pt,sourceIndex:Mt}),_t})})}suggest(_t,Tt,Mt){const Pt=_t||this.searchTerm;return this.emit("suggest-start",{searchTerm:Pt}),this._suggestTimer(Tt,Mt).then(()=>this._suggestImmediate(Pt,Mt).then(Ft=>(this._set("suggestions",Ft.results),this._set("suggestionCount",Ft.results.reduce((Dt,Nt)=>Dt+Nt.results.length,0)),this.emit("suggest-complete",Ft),Ft)))}async when(){await j$U(()=>!this.updating)}async _update(){const{portal:_t,view:Tt}=this;if(this.includeDefaultSources){const Mt=this._updatingPromise=E$K([_t==null?void 0:_t.load(),Tt==null?void 0:Tt.when()]);if(this.destroyed||(await Mt,Mt!==this._updatingPromise))return}await j$U(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var Tt,Mt;const _t=(Mt=(Tt=this.portal)==null?void 0:Tt.helperServices)==null?void 0:Mt.geocode;return _t?_t.map(Pt=>{if(Pt.placefinding===!1)return;const Ft=r$1O.apiKey&&S$6(Pt.url)?{url:w$9}:null,Dt=c$l.fromJSON({...Pt,...Ft}),Nt=Dt.url;if(S$6(Nt)||v$f(Nt)||x$9(Nt)){const Vt=Dt.outFields||["Addr_type","Match_addr","StAddr","City"],zt=Dt.placeholder||this.messages.placeholder,Xt=typeof Dt.defaultZoomScale=="number"?Dt.defaultZoomScale:2500;Dt.set({singleLineFieldName:"SingleLine",outFields:Vt,placeholder:zt,defaultZoomScale:Xt})}return Dt.singleLineFieldName?Dt:void 0}).filter(Boolean):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(_t=>_t==null?void 0:_t.destroy()),this._createdFeatureLayers=[]}_getLayerSources(_t,Tt){var Pt;const Mt=(Pt=this.view)==null?void 0:Pt.map;return _t.map(Ft=>{const Dt=Mt.findLayerById(Ft.id);if(!Dt)return;const Nt=this._getLayerJSON(Ft),Vt=n$o.fromJSON(Nt);return Vt.placeholder=Tt,this._getLayer(Dt,Nt).then(zt=>{Vt.layer=zt}),Vt}).filter(Boolean).toArray()}_getTableSources(_t,Tt){var Pt;const Mt=(Pt=this.view)==null?void 0:Pt.map;return _t.map(Ft=>{const Dt=Mt.findTableById(Ft.id);if(!Dt)return;const Nt=this._getLayerJSON(Ft),Vt=n$o.fromJSON(Nt);return Vt.placeholder=Tt,this._getLayer(Dt,Nt).then(zt=>{Vt.layer=zt}),Vt}).filter(Boolean).toArray()}_convertApplicationProperties(){var Nt,Vt,zt;const _t=(Nt=this.view)==null?void 0:Nt.map,Tt=(zt=(Vt=_t==null?void 0:_t.applicationProperties)==null?void 0:Vt.viewing)==null?void 0:zt.search;if(!Tt)return[];const{enabled:Mt,hintText:Pt,layers:Ft,tables:Dt}=Tt;return Mt?[...this._getLayerSources(Ft,Pt),...this._getTableSources(Dt,Pt)]:[]}async _getSubLayer(_t,Tt){if(await _t.load(),!_t.allSublayers)throw new Error;const Mt=_t.allSublayers.find(Ft=>Ft.id===Tt.subLayer);if(!Mt)throw new Error;const Pt=await Mt.createFeatureLayer();return this._createdFeatureLayers.push(Pt),Pt}async _getBuildingSubLayer(_t,Tt){await _t.load();const Mt=_t.allSublayers.find(Pt=>Pt.id===Tt.subLayer);if((Mt==null?void 0:Mt.type)!=="building-component")throw new Error;if(await Mt.load(),Mt.associatedLayer==null)throw new Error;return await Mt.associatedLayer.load(),Mt}_getLayer(_t,Tt){return _t.type==="feature"||_t.type==="scene"||_t.type==="csv"||_t.type==="geojson"||_t.type==="ogc-feature"?Promise.resolve(_t):_t.type==="map-image"?this._getSubLayer(_t,Tt).catch(()=>{const Mt=new s$2i("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:_t});return z$5.error(Mt),null}):_t.type==="building-scene"?this._getBuildingSubLayer(_t,Tt):Promise.resolve(null)}_getLayerJSON(_t){return typeof _t.toJSON=="function"?_t.toJSON():_t}_updateDefaultSources(){const{defaultSources:_t,includeDefaultSources:Tt}=this;this._destroyFeatureLayers(),_t.removeAll(),Tt&&_t.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var Pt;const _t=(Pt=this.view)==null?void 0:Pt.popup,{resultGraphic:Tt}=this;if(!_t||!Tt)return;const{selectedFeature:Mt}=_t;Mt&&Mt===Tt&&_t.close()}_suggestTimer(_t,Tt){const Mt=_t!=null?_t:this.suggestionDelay;return L$y(Mt,null,Tt&&Tt.signal)}_createLocationForSearch(_t){return _t instanceof g$$?m$j(_t.geometry):_t instanceof j$Z?_t:Array.isArray(_t)&&_t.length===2?new j$Z({longitude:_t[0],latitude:_t[1]}):null}_createSuggestionForSearch(_t){if(_t&&Q$2(_t,"key")&&Q$2(_t,"text")&&Q$2(_t,"sourceIndex"))return _t;const Tt=this._createLocationForSearch(_t),Mt=typeof _t=="string"?_t:this.searchTerm,{selectedSuggestion:Pt,selectedResult:Ft}=this,Dt=!_t&&Pt&&Ft,Nt=Dt&&Pt.key===Ft.key&&Pt.sourceIndex===Ft.sourceIndex,Vt=Dt&&Pt.location;return Nt||Vt?Pt:{location:Tt,text:Tt?"":Mt,sourceIndex:null,key:null}}_getFirstResult(_t){let Tt=null;return _t&&_t.some(Mt=>{const{results:Pt}=Mt,Ft=Pt[0],Dt=!!Ft;return Dt&&(Tt=Ft),Dt}),Tt}_selectFirstResult(_t){return this.autoSelect&&_t?this.select(_t):Promise.resolve(null)}_suggestImmediate(_t,Tt){return this.when().then(()=>this._getSuggestionsFromSources(_t,Tt)).then(Mt=>{var Ft;if((Ft=Tt==null?void 0:Tt.signal)!=null&&Ft.aborted)return null;const Pt={activeSourceIndex:this.activeSourceIndex,searchTerm:_t,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(Pt,Mt),Pt})}_formatSourceResponse(_t,Tt,Mt){const Pt=Tt&&Tt.value||[],Ft=Tt&&Tt.error,Dt=this.allSources.getItemAt(Mt);if(Ft){const Nt={sourceIndex:Mt,source:Dt,error:Ft};_t.errors.push(Nt),z$5.error(Ft),_t.numErrors++}else{const Nt={sourceIndex:Mt,source:Dt,results:Pt};_t.results.push(Nt),_t.numResults+=Pt.length}}_formatResponse(_t,Tt,Mt){if(Tt)if(_t.activeSourceIndex===ee$1){const Pt=Mt&&Q$2(Mt,"sourceIndex")&&Mt.sourceIndex!==-1?Mt.sourceIndex:void 0;Tt.forEach((Ft,Dt)=>{const Nt=Pt!==void 0?Pt:Dt;this._formatSourceResponse(_t,Ft,Nt)})}else this._formatSourceResponse(_t,Tt[0],_t.activeSourceIndex)}_getResultsFromSources(_t,Tt){const{allSources:Mt}=this,Pt=!_t.location&&Q$2(_t,"sourceIndex")?_t.sourceIndex:this.activeSourceIndex,Ft=[];if(!Mt.length){const Dt=new s$2i("search:no-sources-defined","At least one source is required.",{allSources:Mt});return z$5.error(Dt),Promise.reject(Dt)}return Pt===ee$1?Mt.forEach((Dt,Nt)=>{Ft.push(this._getResultsFromSource(_t,Nt,Tt))}):Ft.push(this._getResultsFromSource(_t,Pt,Tt)),E$K(Ft)}_getSuggestionsFromSources(_t,Tt){const{allSources:Mt,activeSourceIndex:Pt}=this,Ft=[];if(!Mt.length){const Dt=new s$2i("suggest:no-sources-defined","At least one source is required.",{allSources:Mt});return z$5.error(Dt),Promise.reject(Dt)}return Pt===ee$1?Mt.forEach((Dt,Nt)=>{Ft.push(this._getSuggestionsFromSource(_t,Nt,Tt))}):Ft.push(this._getSuggestionsFromSource(_t,Pt,Tt)),E$K(Ft)}_getResultsFromSource(_t,Tt,Mt){var Xt;const Pt=this.allSources.getItemAt(Tt),{location:Ft=null}=_t,Dt=((Xt=this.view)==null?void 0:Xt.spatialReference)||X$2,Nt=Q$2(Pt,"maxResults")?Pt.maxResults:this.maxResults,Vt=!!(Pt instanceof n$o&&Q$2(Pt,"exactMatch"))&&Pt.exactMatch,{view:zt}=this;return Pt.getResults({view:zt,sourceIndex:Tt,location:Ft,suggestResult:_t,spatialReference:Dt,exactMatch:Vt,maxResults:Nt},Mt)}_getSuggestionsFromSource(_t,Tt,Mt){var Vt;const Pt=this.allSources.getItemAt(Tt),Ft=Q$2(Pt,"suggestionsEnabled")?Pt.suggestionsEnabled:this.suggestionsEnabled,Dt=_t.length,Nt=Q$2(Pt,"minSuggestCharacters")?Pt.minSuggestCharacters:this.minSuggestCharacters;if(Ft&&_t.trim()&&Dt>=Nt){const zt=((Vt=this.view)==null?void 0:Vt.spatialReference)||X$2,Xt=Q$2(Pt,"maxSuggestions")?Pt.maxSuggestions:this.maxSuggestions,{view:Ht}=this,Wt=!!(Pt instanceof n$o&&Q$2(Pt,"exactMatch"))&&Pt.exactMatch;return Pt.getSuggestions({view:Ht,sourceIndex:Tt,suggestTerm:_t,spatialReference:zt,maxSuggestions:Xt,exactMatch:Wt},Mt)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(_t){const{layer:Tt}=_t;if(Tt)return Q$2(_t,"popupTemplate")?_t.popupTemplate:Tt.popupTemplate}_getSourceIndexOfResult(_t){const Tt=this.results;let Mt=null;return Tt.some(Pt=>Pt.results.some(Ft=>Ft===_t&&(Mt=Pt.sourceIndex,!0))),Mt}async _goToSearchResult(_t){const Tt=!!_t;this._abortGoTo();const Mt=new AbortController;this._gotoController=Mt;const Pt={target:{target:_t},options:{animate:Tt,signal:Mt.signal}};await this.callGoTo(Pt),this._gotoController=null}_getDefaultSymbol(_t){var Ft;const{defaultSymbols:Tt}=this,Mt=(Ft=_t.feature)==null?void 0:Ft.geometry;if(t$2e(Mt))return null;const Pt=this._get("defaultSymbol");if(Pt&&(Mt.type==="point"||Mt.type==="multipoint"))return Pt;switch(Mt.type){case"point":case"multipoint":return Tt.point;case"polyline":return Tt.polyline;case"extent":case"polygon":return Tt.polygon;default:return null}}_removeHighlight(){this._handles.remove(K$1)}async _getLayerView(_t){const{view:Tt}=this;if(!_t||!Tt||_t.layer.type==="building-component"||_t.layer.type==="subtype-sublayer")return null;const{layer:Mt}=_t;return await Tt.when(),Tt.whenLayerView(Mt)}_highlightFeature(_t){const{graphic:Tt,layerView:Mt}=_t,{attributes:Pt,layer:Ft}=Tt,{objectIdField:Dt}=Ft,Nt=Pt&&Pt[Dt],Vt=Mt.highlight(Nt||Tt);this._handles.add(Vt,K$1)}_setResultFloor(_t){var Ft,Dt,Nt;const{view:Tt}=this,Mt=(Ft=_t.feature)==null?void 0:Ft.attributes,Pt=(Dt=_t.feature)==null?void 0:Dt.sourceLayer;if(Pt&&"floorInfo"in Pt&&((Nt=Pt==null?void 0:Pt.floorInfo)==null?void 0:Nt.floorField)&&Mt){const Vt=Mt[Pt.floorInfo.floorField];Tt.emit("select-result-floor",Vt)}}};te$1.ALL_INDEX=ee$1,e$2a([d$25()],te$1.prototype,"_searching",void 0),e$2a([d$25()],te$1.prototype,"_updatingPromise",void 0),e$2a([d$25({readOnly:!0,value:null})],te$1.prototype,"activeSource",null),e$2a([d$25()],te$1.prototype,"activeSourceIndex",null),e$2a([d$25()],te$1.prototype,"allPlaceholder",null),e$2a([d$25({readOnly:!0})],te$1.prototype,"allSources",null),e$2a([d$25()],te$1.prototype,"autoNavigate",void 0),e$2a([d$25()],te$1.prototype,"autoSelect",void 0),e$2a([d$25()],te$1.prototype,"defaultPopupTemplate",void 0),e$2a([d$25({readOnly:!0})],te$1.prototype,"defaultSources",void 0),e$2a([d$25()],te$1.prototype,"defaultSymbol",null),e$2a([d$25()],te$1.prototype,"defaultSymbols",void 0),e$2a([d$25()],te$1.prototype,"includeDefaultSources",void 0),e$2a([d$25()],te$1.prototype,"locationEnabled",null),e$2a([d$25()],te$1.prototype,"maxInputLength",void 0),e$2a([d$25()],te$1.prototype,"maxResults",void 0),e$2a([d$25()],te$1.prototype,"maxSuggestions",void 0),e$2a([d$25()],te$1.prototype,"messages",void 0),e$2a([d$25()],te$1.prototype,"minSuggestCharacters",void 0),e$2a([d$25({readOnly:!0})],te$1.prototype,"placeholder",null),e$2a([d$25()],te$1.prototype,"popupEnabled",void 0),e$2a([d$25({type:B$m})],te$1.prototype,"popupTemplate",void 0),e$2a([d$25({type:B$q})],te$1.prototype,"portal",void 0),e$2a([d$25()],te$1.prototype,"resultCount",void 0),e$2a([d$25()],te$1.prototype,"resultGraphicEnabled",void 0),e$2a([d$25({readOnly:!0})],te$1.prototype,"resultGraphic",void 0),e$2a([d$25({readOnly:!0})],te$1.prototype,"results",void 0),e$2a([d$25({readOnly:!0})],te$1.prototype,"selectedSuggestion",void 0),e$2a([d$25()],te$1.prototype,"searchAllEnabled",void 0),e$2a([d$25({readOnly:!0})],te$1.prototype,"selectedResult",void 0),e$2a([d$25()],te$1.prototype,"searchTerm",null),e$2a([d$25({type:W$1})],te$1.prototype,"sources",void 0),e$2a([d$25({readOnly:!0})],te$1.prototype,"state",null),e$2a([d$25()],te$1.prototype,"suggestionDelay",void 0),e$2a([d$25()],te$1.prototype,"suggestionCount",void 0),e$2a([d$25({readOnly:!0})],te$1.prototype,"suggestions",void 0),e$2a([d$25()],te$1.prototype,"suggestionsEnabled",void 0),e$2a([d$25({readOnly:!0})],te$1.prototype,"updating",null),e$2a([d$25()],te$1.prototype,"view",void 0),e$2a([d$25()],te$1.prototype,"clear",null),te$1=e$2a([n$2L(q$4)],te$1);const re$1=te$1,n$i={base:"esri-search-result-renderer esri-widget",anchor:"esri-widget__anchor",showMoreResults:"esri-search-result-renderer__more-results--show-more-results",moreResults:"esri-search-result-renderer__more-results",moreResultsList:"esri-search-result-renderer__more-results-list",moreResultsHeader:"esri-search-result-renderer__more-results-header",moreResultsItem:"esri-search-result-renderer__more-results-item",moreResultsListHeader:"esri-search-result-renderer__more-results-list-header"};let c$j=class extends O$l{constructor(_t,Tt){super(_t,Tt),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const _t={[n$i.showMoreResults]:this.showMoreResultsOpen};return n$1Q("div",{class:n$i.base},n$1Q("div",{key:"esri-search-renderer__container",class:this.classes(n$i.moreResults,_t)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return n$1Q("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var Mt;const _t=(Mt=this.viewModel)==null?void 0:Mt.selectedResult,Tt=_t&&_t.name||"";return n$1Q("div",{key:"esri-search-renderer__result-name",class:n$i.moreResultsItem},Tt)}renderMoreResultsLists(){var Pt;const _t=(Pt=this.viewModel)==null?void 0:Pt.results,{resultCount:Tt}=this.viewModel;if(Tt<2)return null;const Mt=_t.map(Ft=>this.renderMoreResultsList(Ft));return n$1Q("div",{key:"esri-search-renderer__more-results-container",class:n$i.moreResultsList},Mt)}renderMoreResultsButton(){const{messages:_t}=this,{resultCount:Tt}=this.viewModel;return Tt<2?null:n$1Q("div",{key:"esri-search-renderer__more-results-button",class:n$i.moreResultsItem},n$1Q("a",{class:n$i.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?_t.hideMoreResults:_t.showMoreResults))}renderMoreResultsHeader(_t,Tt){return n$1Q("div",{key:`esri-search-result-renderer__header-${Tt}`,class:n$i.moreResultsListHeader},_t)}renderMoreResultsList(_t){var Ht,Wt;const{results:Tt}=_t,Mt=Tt.length,Pt=!!Mt,Ft=(Ht=this.viewModel)==null?void 0:Ht.selectedResult,Dt=Mt===1&&Tt[0]===Ft,Nt=this._getSourceName(_t.source,_t.sourceIndex),Vt=((Wt=this.viewModel)==null?void 0:Wt.results.length)>1&&!Dt?this.renderMoreResultsHeader(Nt,_t.sourceIndex):null,zt=Pt&&Tt.map((Qt,Zt)=>this.renderMoreResultsListItem(Qt,Zt)),Xt=Pt&&!Dt?n$1Q("ul",{key:`esri-search-result-renderer__list-${_t.sourceIndex}`},zt):null;return Pt?n$1Q("div",{key:`esri-search-result-renderer__results-${_t.sourceIndex}`},Vt,Xt):null}renderMoreResultsListItem(_t,Tt){return _t!==this.get("viewModel.selectedResult")?n$1Q("li",{key:`esri-search-result-renderer__list-item-${Tt}`},n$1Q("a",{class:n$i.anchor,href:"#",tabindex:"0",bind:this,"data-result":_t,onclick:this._selectResultClick,onkeydown:this._selectResultClick},_t.name)):null}_showMoreResultsClick(_t){_t.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const Tt=this.get("viewModel.view.popup");Tt&&Tt.reposition()}_selectResultClick(_t){_t.preventDefault();const Tt=_t.currentTarget["data-result"];this.viewModel&&this.viewModel.select(Tt)}_getSourceName(_t,Tt){return Tt===re$1.ALL_INDEX?this.messages.all:_t.name}};e$2a([d$25(),e$1f("esri/widgets/Search/t9n/Search")],c$j.prototype,"messages",void 0),e$2a([d$25()],c$j.prototype,"showMoreResultsOpen",void 0),e$2a([d$25()],c$j.prototype,"viewModel",void 0),e$2a([t$1e()],c$j.prototype,"_showMoreResultsClick",null),e$2a([t$1e()],c$j.prototype,"_selectResultClick",null),c$j=e$2a([n$2L("esri.widgets.Search.SearchResultRenderer")],c$j);const d$f=c$j,S$5={base:"esri-search esri-widget",loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:"esri-search--multiple-sources",isLoading:"esri-search--loading",isSearching:"esri-search--searching",showSuggestions:"esri-search--show-suggestions",showSources:"esri-search--sources",showWarning:"esri-search--warning",container:"esri-search__container",input:"esri-search__input",inputContainer:"esri-search__input-container",form:"esri-search__form",submitButton:"esri-search__submit-button",sourcesButton:"esri-search__sources-button",clearButton:"esri-search__clear-button",sourceName:"esri-search__source-name",suggestionsMenu:"esri-search__suggestions-menu",suggestionList:"esri-search__suggestions-list",suggestionListCurrentLocation:"esri-search__suggestions-list--current-location",sourcesMenu:"esri-search__sources-menu",source:"esri-search__source",warningMenu:"esri-search__warning-menu",warningMenuBody:"esri-search__warning-body",warningMenuHeader:"esri-search__warning-header",warningMenuText:"esri-search__warning-text",noValueText:"esri-search__no-value-text",esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},w$7=/<[a-z/][\s\S]*>/i;let b$d=class extends O$l{constructor(_t,Tt){super(_t,Tt),this._activeMenuItemIndex=-1,this._handles=new u$1P,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new d$f,this._locateFailed=null,this._container=null,this.activeMenu="none",this.activeSource=null,this.activeSourceIndex=null,this.allPlaceholder=null,this.allSources=null,this.autoNavigate=null,this.autoSelect=null,this.defaultSources=null,this.disabled=!1,this.goToOverride=null,this.iconClass=S$5.widgetIcon,this.includeDefaultSources=null,this.label=void 0,this.locationEnabled=null,this.maxResults=null,this.maxSuggestions=null,this.messages=null,this.messagesCommon=null,this.minSuggestCharacters=null,this.popupEnabled=null,this.popupTemplate=null,this.portal=null,this.resultGraphic=null,this.resultGraphicEnabled=null,this.results=null,this.searchAllEnabled=null,this.searchTerm=null,this.selectedResult=null,this.sources=null,this.suggestions=null,this.suggestionsEnabled=null,this.view=null,this.viewModel=new re$1,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=Mt=>{var Ft;const Pt=Mt.relatedTarget;Pt&&((Ft=this._container)==null?void 0:Ft.contains(Pt))||this._clearActiveMenu()},this.own([l$2e(()=>this.searchTerm,Mt=>{(Mt&&this.activeMenu==="warning"||!Mt&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),a$2C(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.allSources},"change",()=>this._watchSourceChanges()),l$2e(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),h$1w),l$2e(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.defaultPopupTemplate},Mt=>{Mt&&(Mt.content=this._renderSearchResultsContent.bind(this))},h$1w)])}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}clear(){}focus(){var _t;(_t=this._inputNode)==null||_t.focus(),this.emit("search-focus")}blur(){var _t;(_t=this._inputNode)==null||_t.blur(),this.emit("search-blur")}search(_t){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const Tt=new AbortController,{signal:Mt}=Tt;return this._searchController=Tt,this.viewModel.search(_t,{signal:Mt}).catch(Pt=>{if(this._searchController===Tt)return this._clearActiveMenu(),this._searchController=null,Pt}).then(Pt=>{if(this._searchController===Tt)return this.activeMenu=Pt.numResults?"none":"warning",this._searchController=null,Pt})}suggest(_t){this._cancelSuggest();const Tt=new AbortController,{signal:Mt}=Tt;return this._suggestController=Tt,this.viewModel.suggest(_t,null,{signal:Mt}).then(Pt=>{if(this._suggestController===Tt)return this._suggestController=null,Pt.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),Pt}).catch(()=>{if(this._suggestController===Tt)return this._suggestController=null,null})}render(){const{state:_t}=this.viewModel,Tt={[S$5.disabled]:_t==="disabled",[S$5.esriWidgetDisabled]:this.disabled};return n$1Q("div",{class:this.classes(S$5.base,Tt)},_t==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:_t,disabled:Tt}=this;return n$1Q("button",{"aria-label":_t.searchButtonTitle,bind:this,disabled:Tt,class:this.classes(S$5.submitButton,S$5.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:_t.searchButtonTitle,type:"button"},n$1Q("span",{"aria-hidden":"true",class:S$5.searchIcon}))}renderWarningMenu(){return n$1Q("div",{key:"esri-search__error-menu",class:this.classes(S$5.menu,S$5.warningMenu)},n$1Q("div",{class:S$5.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:_t,activeMenu:Tt,sourceMenuId:Mt,sourceMenuButtonId:Pt,disabled:Ft}=this,{activeSourceIndex:Dt,allSources:Nt}=this.viewModel;return Nt.length>1?n$1Q("button",{id:Pt,key:"esri-search__source-menu-button",bind:this,disabled:Ft,"aria-label":_t.searchIn,title:_t.searchIn,"aria-haspopup":"true","aria-expanded":(Tt==="source").toString(),"aria-controls":Mt,class:this.classes(S$5.sourcesButton,S$5.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:v$N,"data-node-ref":"_sourceMenuButtonNode",type:"button"},n$1Q("span",{"aria-hidden":"true",class:S$5.dropdownIcon}),n$1Q("span",{"aria-hidden":"true",class:S$5.dropupIcon}),n$1Q("span",{class:S$5.sourceName},this._getSourceName(Dt))):null}renderSourcesList(){const{allSources:_t,searchAllEnabled:Tt}=this.viewModel,{_activeMenuItemIndex:Mt,activeMenu:Pt,sourceMenuId:Ft,sourceMenuButtonId:Dt}=this,Nt=Pt==="source"&&Mt>-1?this._buildId("source-item",Mt):null;return _t.length>1?n$1Q("ul",{"aria-activedescendant":Nt,"aria-labelledby":Dt,id:Ft,role:"menu",bind:this,afterCreate:v$N,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:S$5.menuList,tabIndex:-1},Tt?this.renderSource(re$1.ALL_INDEX):null,_t.map((Vt,zt)=>this.renderSource(zt)).toArray()):null}renderSourcesMenu(){const{allSources:_t}=this.viewModel;return _t.length>1?n$1Q("div",{key:"esri-search__source-menu",class:this.classes(S$5.menu,S$5.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:_t,messagesCommon:Tt,disabled:Mt}=this;return n$1Q("div",{class:S$5.loader,key:"base-loader",tabIndex:Mt?-1:null},n$1Q("span",{"aria-hidden":"true",class:S$5.loaderAnimation}),n$1Q("span",{class:S$5.fallbackText},_t.searchButtonTitle),n$1Q("span",{class:S$5.loaderText},Tt.loading))}renderContainer(){const{allSources:_t,state:Tt}=this.viewModel,{activeMenu:Mt}=this,Pt={[S$5.hasMultipleSources]:_t.length>1,[S$5.isLoading]:Tt==="loading",[S$5.isSearching]:Tt==="searching",[S$5.showWarning]:Mt==="warning",[S$5.showSources]:Mt==="source",[S$5.showSuggestions]:Mt==="suggestion"};return n$1Q("div",{tabIndex:-1,afterCreate:Ft=>{this._container=Ft,Ft.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:Ft=>{Ft.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(Pt,S$5.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?n$1Q("button",{bind:this,disabled:this.disabled,class:this.classes(S$5.clearButton,S$5.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},n$1Q("span",{"aria-hidden":"true",class:S$5.clearIcon})):null}renderLocationGroup(){const{messages:_t,locationEnabled:Tt,displayedSearchTerm:Mt}=this,Pt=Tt&&!Mt,Ft=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return Pt?n$1Q("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(S$5.menuList,S$5.suggestionList,S$5.suggestionListCurrentLocation)},n$1Q("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(S$5.menuItem,Ft?S$5.menuItemFocus:null)},n$1Q("span",{"aria-hidden":"true",class:S$5.locate})," ",_t.useCurrentLocation)):null}renderInput(){const{activeMenu:_t,locationEnabled:Tt,displayedSearchTerm:Mt,messages:Pt,suggestionsMenuId:Ft,inputId:Dt,_activeMenuItemIndex:Nt,disabled:Vt}=this,{maxInputLength:zt,placeholder:Xt,searchTerm:Ht,suggestionCount:Wt}=this.viewModel,Qt=!(!(Tt&&!Mt)&&!Wt),Zt=_t==="suggestion"&&Nt>-1?this._buildId("suggestion-item",Nt):null;return n$1Q("input",{"aria-activedescendant":Zt,"aria-autocomplete":"list","aria-expanded":(Qt&&_t==="suggestion").toString(),"aria-controls":Qt?Ft:null,"aria-haspopup":"listbox","aria-label":Pt.searchButtonTitle,bind:this,disabled:Vt,placeholder:Xt,maxlength:zt,autocomplete:"off",type:"text",class:this.classes(S$5.esriInput,S$5.input),value:Ht,id:Dt,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:v$N,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:Ht?"":Xt})}renderForm(){return n$1Q("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:S$5.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(_t){const{sourceIndex:Tt}=_t,Mt=_t.results.length,Pt=_t.results;return Mt?n$1Q("ul",{role:"group",key:`esri-search__suggestion-list-${Tt}`,class:this.classes(S$5.menuList,S$5.suggestionList)},Pt.map(Ft=>this.renderSuggestion(Ft,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:_t}=this.viewModel;return _t?_t.map(Tt=>[this.renderSuggestionHeader(Tt),this.renderSuggestList(Tt)]):null}renderSuggestionsMenu(){const{displayedSearchTerm:_t,locationEnabled:Tt,suggestionsMenuId:Mt,inputId:Pt}=this,{suggestionCount:Ft}=this.viewModel,Dt=Tt&&!_t||Ft;return this._menuItemCount=0,Dt?n$1Q("div",{id:Mt,key:"esri-search__suggestions-menu",class:this.classes(S$5.menu,S$5.suggestionsMenu),role:"listbox","aria-labelledby":Pt,bind:this,afterCreate:v$N,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return n$1Q("div",{key:"esri-search__input-container",class:S$5.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(_t){const{allSources:Tt,activeSourceIndex:Mt}=this.viewModel,{sourceIndex:Pt}=_t,Ft=_t.results.length,Dt=Tt.length>1&&Mt===re$1.ALL_INDEX;return Ft&&Dt?n$1Q("div",{key:`esri-search__suggestion-header-${Pt}`,class:S$5.menuHeader},this._getSourceName(Pt)):null}renderSuggestion(_t,Tt){const{_activeMenuItemIndex:Mt,messages:Pt}=this,{searchTerm:Ft}=this.viewModel;if(Ft){const{text:Dt}=_t,Nt=Dt||Pt.untitledResult,Vt=w$7.test(Nt),zt=[];if(Vt)zt.push(n$1Q("div",{innerHTML:Nt}));else{const Ht=this._splitResult(Nt,Ft),Wt=Ft.toLowerCase();Ht.forEach((Qt,Zt)=>{Qt&&Qt.length&&(Qt.toLowerCase()===Wt?zt.push(n$1Q("strong",{key:Zt},Qt)):zt.push(Qt))})}const Xt=this.activeMenu==="suggestion"&&Mt===Tt;return n$1Q("li",{bind:this,id:this._buildId("suggestion-item",Tt),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===Tt).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${Tt}`,"data-suggestion":_t,role:"option",class:this.classes(S$5.menuItem,Xt?S$5.menuItemFocus:null)},zt)}}renderSource(_t){const{activeSourceIndex:Tt,searchAllEnabled:Mt}=this.viewModel,Pt={[S$5.menuItemActive]:_t===Tt,[S$5.menuItemFocus]:this.activeMenu==="source"&&_t===(Mt?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},Ft=Mt?_t+1:_t;return n$1Q("li",{bind:this,key:`esri-search__source-${_t}`,id:this._buildId("source-item",Ft),"aria-checked":(_t===Tt).toString(),onclick:this._handleSourceClick,"data-source-index":_t,role:"menuitemradio",class:this.classes(S$5.source,S$5.menuItem,Pt)},this._getSourceName(_t))}renderNoResultsWarning(_t){const{messages:Tt}=this,Mt=_t?s$1y(Tt.noResultsFoundForValue,{value:`"${_t}"`}):Tt.noResultsFound;return n$1Q("div",{key:"esri-search__no_results"},n$1Q("div",{class:S$5.warningMenuHeader},Tt.noResults),n$1Q("div",{class:S$5.warningMenuText},Mt))}renderEmptySearchWarning(){const{messages:_t}=this;return n$1Q("div",{key:"esri-search__empty-search"},n$1Q("span",{"aria-hidden":"true",class:S$5.noticeIcon}),n$1Q("span",{class:S$5.noValueText},_t.emptyValue))}renderLocateWarning(){const{messages:_t}=this;return n$1Q("div",{key:"esri-search__locate-error"},n$1Q("span",{"aria-hidden":"true",class:S$5.noticeIcon}),n$1Q("span",{class:S$5.noValueText},_t.locateError))}renderWarning(){var Pt;const{displayedSearchTerm:_t,_locateFailed:Tt}=this,{viewModel:Mt}=this;return Tt?this.renderLocateWarning():((Pt=Mt.selectedSuggestion)==null?void 0:Pt.location)||_t?this.renderNoResultsWarning(_t):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(_t,Tt){return`${this.id}-${_t}${Tt===void 0?"":`-${Tt}`}`}_watchSourceChanges(){const{_handles:_t,viewModel:{allSources:Tt}}=this,Mt="sources";_t.remove(Mt),Tt.forEach(Pt=>_t.add(l$2e(()=>Pt.name,()=>this.scheduleRender()),Mt))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var Tt;const _t=this.activeMenu==="source";this.activeMenu=_t?"none":"source",this.renderNow(),this.activeMenu==="source"&&((Tt=this._sourceListNode)==null||Tt.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(_t){const Tt=_t.currentTarget["data-suggestion"];Tt&&(this._focus(),this.search(Tt))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const _t=new AbortController,{signal:Tt}=_t;this._searchController=_t,this.viewModel.searchNearby({signal:Tt}).then(Mt=>{this.activeMenu=Mt.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0,this.activeMenu="warning"}).then(()=>{this._searchController=null})}_handleSourceClick(_t){this._setSourceFromMenuItem(_t.currentTarget)}_setSourceFromMenuItem(_t){var Mt;if(!_t)return;const Tt=_t["data-source-index"];this.viewModel.activeSourceIndex=Tt,this._clearActiveMenu(),(Mt=this._sourceMenuButtonNode)==null||Mt.focus()}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(_t){var Ft;const Tt=i$2K(_t);if(_t.ctrlKey||_t.metaKey||Tt==="Copy"||Tt==="ArrowLeft"||Tt==="ArrowRight"||Tt==="Shift")return;if(Tt==="Tab"||Tt==="Escape"||_t.shiftKey&&Tt==="Tab")return this._cancelSuggest(),void(Tt==="Escape"&&this._clearActiveMenu());const Mt=Tt==="Home"||Tt==="End"||Tt==="ArrowUp"||Tt==="ArrowDown";if(Tt==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const Pt=(Ft=this._suggestionListNode)==null?void 0:Ft.getElementsByTagName("li");if(Pt!=null&&Pt.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),Mt)return _t.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(Tt,Pt,this._suggestionListNode);const Dt=Pt[this._activeMenuItemIndex];if(Tt==="Enter"&&Dt){const Nt=Dt["data-suggestion"];return void(Nt?(this._focus(),this.search(Nt)):Dt["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(_t,Tt,Mt){const Pt=this._activeMenuItemIndex;_t==="Home"&&(this._activeMenuItemIndex=0),_t==="End"&&(this._activeMenuItemIndex=Tt.length-1),_t==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?Tt.length-1:this._activeMenuItemIndex-1),_t==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===Tt.length-1?0:this._activeMenuItemIndex+1),Pt!==this._activeMenuItemIndex&&A$l(Tt[this._activeMenuItemIndex],Mt)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(_t){const Tt=_t.target;this.viewModel.searchTerm!==Tt.value&&(this.viewModel.searchTerm=Tt.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(_t){const Tt=i$2K(_t);if(k$m(Tt)){_t.preventDefault();const Mt=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(Mt)}else Tt!=="ArrowUp"&&Tt!=="ArrowDown"&&Tt!=="End"&&Tt!=="Home"||_t.preventDefault()}_handleSourceMenuKeyup(_t){var Ft,Dt;const Tt=i$2K(_t),Mt=Tt==="ArrowUp"||Tt==="ArrowDown"||Tt==="End"||Tt==="Home";if(Mt&&_t.preventDefault(),Tt==="Escape")return this._clearActiveMenu(),void((Ft=this._sourceMenuButtonNode)==null?void 0:Ft.focus());const Pt=(Dt=this._sourceListNode)==null?void 0:Dt.getElementsByTagName("li");return Pt&&Pt.length!==0&&Mt?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(Tt,Pt,this._sourceListNode.parentElement)):void 0}_focus(_t){this.focus(),_t&&(this.activeMenu=_t)}_formSubmit(_t){_t.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(_t){const{messages:Tt}=this,Mt=this.viewModel,{allSources:Pt}=Mt,Ft=Pt.getItemAt(_t);return _t===re$1.ALL_INDEX?Tt.all:Ft&&Ft.name||Tt.untitledSource}_splitResult(_t,Tt){const Mt=o$26(Tt);return _t.replace(new RegExp(`(^|)(${Mt})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};e$2a([d$25()],b$d.prototype,"_activeMenuItemIndex",void 0),e$2a([d$25()],b$d.prototype,"displayedSearchTerm",null),e$2a([d$25({readOnly:!0})],b$d.prototype,"inputId",null),e$2a([d$25({readOnly:!0})],b$d.prototype,"suggestionsMenuId",null),e$2a([d$25({readOnly:!0})],b$d.prototype,"sourceMenuId",null),e$2a([d$25({readOnly:!0})],b$d.prototype,"sourceMenuButtonId",null),e$2a([d$25()],b$d.prototype,"activeMenu",void 0),e$2a([o$1d("viewModel.activeSource")],b$d.prototype,"activeSource",void 0),e$2a([o$1d("viewModel.activeSourceIndex")],b$d.prototype,"activeSourceIndex",void 0),e$2a([o$1d("viewModel.allPlaceholder")],b$d.prototype,"allPlaceholder",void 0),e$2a([o$1d("viewModel.allSources")],b$d.prototype,"allSources",void 0),e$2a([o$1d("viewModel.autoNavigate")],b$d.prototype,"autoNavigate",void 0),e$2a([o$1d("viewModel.autoSelect")],b$d.prototype,"autoSelect",void 0),e$2a([o$1d("viewModel.defaultSources")],b$d.prototype,"defaultSources",void 0),e$2a([d$25()],b$d.prototype,"disabled",void 0),e$2a([o$1d("viewModel.goToOverride")],b$d.prototype,"goToOverride",void 0),e$2a([d$25()],b$d.prototype,"iconClass",void 0),e$2a([o$1d("viewModel.includeDefaultSources")],b$d.prototype,"includeDefaultSources",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b$d.prototype,"label",void 0),e$2a([o$1d("viewModel.locationEnabled")],b$d.prototype,"locationEnabled",void 0),e$2a([o$1d("viewModel.maxResults")],b$d.prototype,"maxResults",void 0),e$2a([o$1d("viewModel.maxSuggestions")],b$d.prototype,"maxSuggestions",void 0),e$2a([d$25(),e$1f("esri/widgets/Search/t9n/Search")],b$d.prototype,"messages",void 0),e$2a([d$25(),e$1f("esri/t9n/common")],b$d.prototype,"messagesCommon",void 0),e$2a([o$1d("viewModel.minSuggestCharacters")],b$d.prototype,"minSuggestCharacters",void 0),e$2a([o$1d("viewModel.popupEnabled")],b$d.prototype,"popupEnabled",void 0),e$2a([o$1d("viewModel.popupTemplate")],b$d.prototype,"popupTemplate",void 0),e$2a([o$1d("viewModel.portal")],b$d.prototype,"portal",void 0),e$2a([o$1d("viewModel.resultGraphic")],b$d.prototype,"resultGraphic",void 0),e$2a([o$1d("viewModel.resultGraphicEnabled")],b$d.prototype,"resultGraphicEnabled",void 0),e$2a([o$1d("viewModel.results")],b$d.prototype,"results",void 0),e$2a([o$1d("viewModel.searchAllEnabled")],b$d.prototype,"searchAllEnabled",void 0),e$2a([o$1d("viewModel.searchTerm")],b$d.prototype,"searchTerm",void 0),e$2a([o$1d("viewModel.selectedResult")],b$d.prototype,"selectedResult",void 0),e$2a([o$1d("viewModel.sources")],b$d.prototype,"sources",void 0),e$2a([o$1d("viewModel.suggestions")],b$d.prototype,"suggestions",void 0),e$2a([o$1d("viewModel.suggestionsEnabled")],b$d.prototype,"suggestionsEnabled",void 0),e$2a([o$1d("viewModel.view")],b$d.prototype,"view",void 0),e$2a([t$1d(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),d$25({type:re$1})],b$d.prototype,"viewModel",void 0),e$2a([o$1d("viewModel.clear")],b$d.prototype,"clear",null),b$d=e$2a([n$2L("esri.widgets.Search")],b$d);const y$e=b$d;let t$g=class extends y$1E{constructor(_t){super(_t),this.enabled=!1}};e$2a([d$25({type:Boolean,nonNullable:!0})],t$g.prototype,"enabled",void 0),t$g=e$2a([n$2L("esri.views.interactive.sketch.SketchLabelOptions")],t$g);const c$i=t$g;let l$f=class extends y$1E{constructor(_t){super(_t),this.mode="absolute-height"}};e$2a([d$25({type:String,nonNullable:!0})],l$f.prototype,"mode",void 0),l$f=e$2a([n$2L("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],l$f);let i$f=class extends y$1E{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0}};e$2a([d$25({type:Boolean,nonNullable:!0})],i$f.prototype,"distance",void 0),e$2a([d$25({type:Boolean,nonNullable:!0})],i$f.prototype,"elevation",void 0),e$2a([d$25({type:Boolean,nonNullable:!0})],i$f.prototype,"size",void 0),e$2a([d$25({type:Boolean,nonNullable:!0})],i$f.prototype,"scale",void 0),e$2a([d$25({type:Boolean,nonNullable:!0})],i$f.prototype,"rotation",void 0),e$2a([d$25({type:Boolean,nonNullable:!0})],i$f.prototype,"orientation",void 0),e$2a([d$25({type:Boolean,nonNullable:!0})],i$f.prototype,"totalLength",void 0),e$2a([d$25({type:Boolean,nonNullable:!0})],i$f.prototype,"area",void 0),e$2a([d$25({type:Boolean,nonNullable:!0})],i$f.prototype,"radius",void 0),i$f=e$2a([n$2L("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],i$f);let n$h=class extends y$1E{constructor(_t){super(_t),this.enabled=!1,this.elevation=new l$f,this.visibleElements=new i$f,this.visualVariables=null}};e$2a([d$25({type:Boolean,nonNullable:!0})],n$h.prototype,"enabled",void 0),e$2a([d$25({type:l$f,nonNullable:!0})],n$h.prototype,"elevation",void 0),e$2a([d$25({type:i$f,nonNullable:!0})],n$h.prototype,"visibleElements",void 0),e$2a([d$25()],n$h.prototype,"visualVariables",void 0),n$h=e$2a([n$2L("esri.widgets.Sketch.SketchTooltipOptions")],n$h);const r$f=n$h;let e$i=class extends y$1E{constructor(_t){super(_t),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};e$2a([d$25({constructOnly:!0})],e$i.prototype,"layer",void 0),e$2a([d$25()],e$i.prototype,"enabled",void 0),e$2a([d$25()],e$i.prototype,"updating",void 0),e$2a([d$25()],e$i.prototype,"availability",void 0),e$i=e$2a([n$2L("esri.views.interactive.snapping.SnappingLayerSource")],e$i);const p$j=e$i;let r$e=class extends l$2v{constructor(){super(...arguments),this.enabled=!0}};e$2a([d$25({type:Boolean})],r$e.prototype,"enabled",void 0),r$e=e$2a([n$2L("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],r$e);let l$e=class extends l$2v{constructor(_t){super(_t),this.lineSnapper=new r$e,this.parallelLineSnapper=new r$e,this.rightAngleSnapper=new r$e,this.rightAngleTriangleSnapper=new r$e,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new l$2f([255,127,0]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5}};e$2a([d$25({type:r$e,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l$e.prototype,"lineSnapper",void 0),e$2a([d$25({type:r$e,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l$e.prototype,"parallelLineSnapper",void 0),e$2a([d$25({type:r$e,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l$e.prototype,"rightAngleSnapper",void 0),e$2a([d$25({type:r$e,constructOnly:!0,nonNullable:!0,json:{write:!0}})],l$e.prototype,"rightAngleTriangleSnapper",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],l$e.prototype,"shortLineThreshold",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],l$e.prototype,"distance",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l$e.prototype,"pointThreshold",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l$e.prototype,"intersectionParallelLineThreshold",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l$e.prototype,"parallelLineThreshold",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l$e.prototype,"touchSensitivityMultiplier",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],l$e.prototype,"pointOnLineThreshold",void 0),e$2a([d$25({type:l$2f,nonNullable:!0})],l$e.prototype,"orange",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l$e.prototype,"lineHintWidthReference",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l$e.prototype,"lineHintWidthTarget",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],l$e.prototype,"lineHintFadedExtensions",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],l$e.prototype,"parallelLineHintWidth",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],l$e.prototype,"parallelLineHintLength",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],l$e.prototype,"parallelLineHintOffset",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],l$e.prototype,"rightAngleHintSize",void 0),e$2a([d$25({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],l$e.prototype,"rightAngleHintOutlineSize",void 0),l$e=e$2a([n$2L("esri.views.interactive.snapping.Settings.Defaults")],l$e);const p$i=new l$e;let p$h=class extends y$1E{constructor(_t){super(_t),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new j$11,this.distance=p$i.distance,this.touchSensitivityMultiplier=p$i.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};e$2a([d$25()],p$h.prototype,"enabled",void 0),e$2a([d$25()],p$h.prototype,"enabledToggled",void 0),e$2a([d$25()],p$h.prototype,"selfEnabled",void 0),e$2a([d$25()],p$h.prototype,"featureEnabled",void 0),e$2a([d$25({type:j$11.ofType(p$j)})],p$h.prototype,"featureSources",void 0),e$2a([d$25()],p$h.prototype,"distance",void 0),e$2a([d$25()],p$h.prototype,"touchSensitivityMultiplier",void 0),e$2a([d$25({readOnly:!0})],p$h.prototype,"effectiveEnabled",null),e$2a([d$25({readOnly:!0})],p$h.prototype,"effectiveSelfEnabled",null),e$2a([d$25({readOnly:!0})],p$h.prototype,"effectiveFeatureEnabled",null),p$h=e$2a([n$2L("esri.views.interactive.snapping.SnappingOptions")],p$h);const l$d=p$h;let t$f=class extends y$1E{constructor(_t){super(_t),this.maxValue=null,this.minValue=null}};e$2a([d$25()],t$f.prototype,"objectType",void 0),e$2a([d$25()],t$f.prototype,"maxValue",void 0),e$2a([d$25()],t$f.prototype,"minValue",void 0),e$2a([d$25()],t$f.prototype,"codedValue",void 0),t$f=e$2a([n$2L("esri.layers.support.ContingentValue")],t$f);const p$g=t$f;let t$e=class extends y$1E{constructor(_t){super(_t),this.isRetired=!1}};e$2a([d$25()],t$e.prototype,"id",void 0),e$2a([d$25()],t$e.prototype,"isRetired",void 0),e$2a([d$25()],t$e.prototype,"subtype",void 0),e$2a([d$25()],t$e.prototype,"values",void 0),t$e=e$2a([n$2L("esri.layers.support.Contingency")],t$e);const p$f=t$e;let e$h=class extends y$1E{constructor(_t){super(_t)}};e$2a([d$25()],e$h.prototype,"fieldGroup",void 0),e$2a([d$25()],e$h.prototype,"type",void 0),e$h=e$2a([n$2L("esri.layers.support.ContingencyConstraintViolation")],e$h);const p$e=e$h;let t$d=class extends y$1E{constructor(_t){super(_t)}};e$2a([d$25()],t$d.prototype,"contingentValuesAllGroups",void 0),e$2a([d$25()],t$d.prototype,"contingentValuesByFieldGroup",void 0),t$d=e$2a([n$2L("esri.layers.support.ContingentValuesResult")],t$d);const p$d=t$d;let e$g=class extends y$1E{constructor(_t){super(_t),this.fields=null,this.isEditingRestrictive=!1}};e$2a([d$25()],e$g.prototype,"name",void 0),e$2a([d$25()],e$g.prototype,"fields",void 0),e$2a([d$25()],e$g.prototype,"isEditingRestrictive",void 0),e$2a([d$25()],e$g.prototype,"contingencies",void 0),e$g=e$2a([n$2L("esri.layers.support.FieldGroup")],e$g);const i$e=e$g;let s$e=class extends l$2v{constructor(){super(...arguments),this.code=null,this.defaultValues={},this.domains={},this.name=null}};e$2a([d$25({type:Number,json:{write:!0}})],s$e.prototype,"code",void 0),e$2a([d$25({type:Object,json:{write:!0}})],s$e.prototype,"defaultValues",void 0),e$2a([d$25({type:Object,json:{write:!0}})],s$e.prototype,"domains",void 0),e$2a([d$25({type:String,json:{write:!0}})],s$e.prototype,"name",void 0),s$e=e$2a([n$2L("esri.layers.support.Subtype")],s$e);const p$c=s$e;var m$g;let h$j=m$g=class extends u$26(m$25){constructor(_t){super(_t),this.request=U$v,this.fieldGroups=null,this.fieldGroupDefinitions=null}initialize(){}static async createLoadedLayerContingentValuesCache(_t){await _t.load();const Tt=_t.sourceJSON;if(_t.layerId===void 0)return null;const Mt=Tt.hasContingentValuesDefinition;if(Mt)return new m$g({layer:_t}).load();if(Mt===void 0){const Pt=m$O(_t.url);if(t$2e(Pt))return null;const Ft=Pt.url.path;if((await m$g._staticFetchEnterpriseFeatureRoot(Ft)).supportsQueryDataElements){const Dt=_t.layerId.toString(),Nt=await m$g._staticFetchEnterpriseFieldGroup(Ft,Dt);if(Nt){const Vt=Nt.map(zt=>({name:zt.name,isEditingRestrictive:zt.isEditingRestrictive,fields:zt.fieldNames.names}));return new m$g({layer:_t,fieldGroupDefinitions:Vt}).load()}}}return null}async load(_t){const Tt=this.layer.load(_t).then(()=>this._initializeContingentValues(this.fieldGroupDefinitions,_t));return this.addResolvingPromise(Tt),this}validateContingencyConstraints(_t,Tt){const Mt=this.layer.typeIdField,Pt=Object.keys(_t),Ft=[],Dt=[];for(const Nt of this.fieldGroups){const Vt=Nt.isEditingRestrictive?"error":"warning";if(Tt&&!Nt.fields.some(Wt=>Tt.includes(Wt)))continue;if(!Nt.fields.every(Wt=>Pt.includes(Wt))){Dt.push(new p$e({fieldGroup:Nt,type:Vt}));continue}let zt=!1;const Xt=_t[Mt],Ht=Nt.contingencies.filter(Wt=>!(!Wt.isRetired&&Wt.subtype)||Wt.subtype.code===Xt);for(const Wt of Ht){let Qt=!0;for(const Zt in Wt.values){const Kt=Wt.values[Zt];if(Kt.objectType!=="any"){if(Kt.objectType==="null"){if(_t[Zt]!=null){Qt=!1;break}}else if(Kt.objectType==="code"){if(_t[Zt]!==Kt.codedValue.code){Qt=!1;break}}else if(Kt.objectType==="range"){const er=_t[Zt];if(er<Kt.minValue||er>Kt.maxValue){Qt=!1;break}}}}if(Qt){zt=!0;break}}zt||Ft.push(new p$e({fieldGroup:Nt,type:Vt}))}return{invalid:Ft,incomplete:Dt}}getContingentValues(_t,Tt,Mt=!1){const Pt=_t[this.layer.typeIdField],Ft=Pt!=null,Dt={};let Nt=[];const Vt=this.fieldGroups.filter(zt=>zt.fields.includes(Tt));Nt.push(new p$g({objectType:"any"}));for(const zt of Vt){let Xt=[];const Ht=zt.contingencies.filter(Zt=>!(Zt.isRetired||Zt.subtype&&Ft&&Zt.subtype.code!==Pt));let Wt=!1;const Qt={};for(const Zt of Ht){let Kt,er=!0;for(const Yt in Zt.values){const rr=Zt.values[Yt];if(Tt!==Yt){if(_t[Yt]!==void 0&&rr.objectType!=="any"){if(rr.objectType==="null")_t[Yt]!==null&&(er=!1);else if(rr.objectType==="code")_t[Yt]!==rr.codedValue.code&&(er=!1);else if(rr.objectType==="range"){const ir=_t[Yt];(ir<rr.minValue||ir>rr.maxValue)&&(er=!1)}}}else Kt=rr,Wt=Wt||rr.objectType==="range"}if(Kt&&er){if(Kt.objectType==="any"){Xt.length=0,Xt.push(Kt);break}const Yt=this._generateKey(Kt);Qt[Yt]||Xt.push(Kt),Qt[Yt]=!0}}Wt&&(Xt=this._joinRange(Xt)),Dt[zt.name]=Xt,Nt=Mt?this._filterIntersection(Nt,Xt):null}return Vt.length===1&&Mt&&(Nt=[]),new p$d({contingentValuesAllGroups:Nt,contingentValuesByFieldGroup:Dt})}_generateKey(_t){switch(_t.objectType){case"any":return"@any@";case"null":return"@null@";case"code":return _t.codedValue.name+_t.codedValue.code.toString();case"range":return _t.minValue.toString()+"-"+_t.maxValue.toString()}}_joinRange(_t){let Tt,Mt;_t.sort((Ft,Dt)=>Ft.objectType==="null"?-1:Dt.objectType==="null"?1:Ft.minValue-Dt.minValue);const Pt=[];for(const Ft of _t)Ft.objectType!=="null"?Tt!==void 0?Mt<Ft.minValue?(Pt.push(new p$g({objectType:"range",minValue:Tt,maxValue:Mt})),Tt=Ft.minValue,Mt=Ft.maxValue):Mt<Ft.maxValue&&(Mt=Ft.maxValue):(Tt=Ft.minValue,Mt=Ft.maxValue):Pt.push(Ft);return Pt.push(new p$g({objectType:"range",minValue:Tt,maxValue:Mt})),Pt}_filterIntersection(_t,Tt){var Ft,Dt;if(_t.length===0||Tt.length===0)return[];if(_t[0].objectType==="any")return Tt;if(Tt[0].objectType==="any")return _t;const Mt=_t[0].objectType==="range"||((Ft=_t[1])==null?void 0:Ft.objectType)==="range",Pt=Tt[0].objectType==="range"||((Dt=Tt[1])==null?void 0:Dt.objectType)==="range";return Mt||Pt?this._intersectRanges(_t,Tt):this._intersectValues(_t,Tt)}_intersectRanges(_t,Tt){const Mt=[];let Pt,Ft=0;for(const Dt of _t)for(;Ft<Tt.length;Ft++){const Nt=Tt[Ft];if(Dt.objectType==="null"&&Nt.objectType==="null")Mt.push(new p$g({objectType:"null"}));else{if(Dt.objectType==="null")break;if(Nt.objectType==="null")continue}if(Dt.maxValue<Nt.minValue)break;if(Dt.maxValue===Nt.minValue){Mt.push(new p$g({objectType:"range",minValue:Dt.maxValue,maxValue:Nt.minValue}));break}if(!(Dt.minValue>Nt.maxValue))if(Dt.minValue!==Nt.maxValue){if(Pt=Dt.minValue>Nt.minValue?Dt.minValue:Nt.minValue,Dt.maxValue<Nt.maxValue){Mt.push(new p$g({objectType:"range",minValue:Pt,maxValue:Dt.maxValue}));break}Mt.push(new p$g({objectType:"range",minValue:Pt,maxValue:Nt.maxValue}))}else Mt.push(new p$g({objectType:"range",minValue:Dt.minValue,maxValue:Nt.maxValue}))}return Mt}_intersectValues(_t,Tt){const Mt=[];for(const Pt of _t)Tt.some(Ft=>{if(Pt.objectType===Ft.objectType)switch(Pt.objectType){case"any":case"null":return!0;case"code":return Pt.codedValue.code===Ft.codedValue.code&&Pt.codedValue.name===Ft.codedValue.name}return!1})&&Mt.push(Pt);return Mt}static async _staticFetchEnterpriseFeatureRoot(_t,Tt){return U$v(_t,{responseType:"json",query:{f:"json"},...Tt}).then(Mt=>Mt.data)}static async _staticFetchEnterpriseFieldGroup(_t,Tt,Mt){return U$v(`${_t}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([Tt]),f:"json"},...Mt}).then(Pt=>{var Ft;return(Ft=Pt.data.layerDataElements)==null?void 0:Ft[0].dataElement.fieldGroups})}async _initializeContingentValues(_t,Tt){const Mt=_t||await this._fetchFieldGroupDefs(Tt);if(Mt.length===0)return void(this.fieldGroups=[]);const Pt=await this._fetchContingentValues(Mt,Tt);this.fieldGroups=Pt}async _fetchFieldGroupDefs(_t){if(this.layer.layerId===void 0)return[];const Tt=this.layer.sourceJSON,Mt=this.layer.layerId.toString(),Pt=m$O(this.layer.url).url.path;return Tt.hasContingentValuesDefinition?(await this._fetchAGOLFieldGroup(Pt,Mt,_t)).map(Ft=>({name:Ft.name,isEditingRestrictive:Ft.restrictive,fields:Ft.fields.map(Dt=>this.layer.fieldsIndex.normalizeFieldName(Dt))})):Tt.hasContingentValuesDefinition!==void 0?[]:this._fetchEnterpriseFeatureRoot(Pt,_t).then(async Ft=>Ft.supportsQueryDataElements?(await this._fetchEnterpriseFieldGroup(Pt,Mt,_t)).map(Dt=>({name:Dt.name,isEditingRestrictive:Dt.isEditingRestrictive,fields:Dt.fieldNames.names.map(Nt=>this.layer.fieldsIndex.normalizeFieldName(Nt))})):[])}async _fetchAGOLFieldGroup(_t,Tt,Mt){return U$v(`${_t}/${Tt}/fieldgroups`,{responseType:"json",query:{f:"json"},...Mt}).then(Pt=>Pt.data.fieldGroups)}async _fetchEnterpriseFieldGroup(_t,Tt,Mt){return m$g._staticFetchEnterpriseFieldGroup(_t,Tt,Mt)}async _fetchEnterpriseFeatureRoot(_t,Tt){return m$g._staticFetchEnterpriseFeatureRoot(_t,Tt)}async _fetchContingentValues(_t,Tt){if(this.layer.layerId===void 0)return[];const Mt=this.layer.sourceJSON,Pt=this.layer.layerId.toString(),Ft=m$O(this.layer.url).url.path;if(Mt.hasContingentValuesDefinition){const Nt=await this._fetchAGOLContingentValues(Ft,Pt,Tt);return this._constructFieldGroupsAGOL(_t,Nt)}const Dt=await this._fetchEnterpriseContingentValues(Ft,Pt,Tt);return this._constructFieldGroupsEnterprise(_t,Dt)}_constructFieldGroupsAGOL(_t,Tt){return _t.map(Mt=>{const Pt=Tt.contingentValuesDefinition.fieldGroups.find(Ft=>Ft.name===Mt.name);if(Pt){let Ft=[];return Ft=Tt.contingentValuesDefinition.hasSubType?this._parseAGOLFieldGroupSubtype(Mt,Tt,Pt.subTypes):this._parseAGOLFieldGroup(Mt,Tt,Pt.contingentValues),new i$e({name:Mt.name,isEditingRestrictive:Mt.isEditingRestrictive,fields:Mt.fields,contingencies:Ft})}return null}).filter(Mt=>Mt!==null)}_parseAGOLFieldGroupSubtype(_t,Tt,Mt){let Pt=[];return Mt.forEach(Ft=>{const Dt=this._getSubtypeAGOL(Ft.name);Pt=Pt.concat(this._parseAGOLFieldGroup(_t,Tt,Ft.contingentValues,Dt))}),Pt}_parseAGOLFieldGroup(_t,Tt,Mt,Pt=null){const Ft=[];for(const Dt of Mt){const Nt=this._parseAGOLContingency(Dt,_t,Tt,Pt);Ft.push(Nt)}return Ft}_parseAGOLContingency(_t,Tt,Mt,Pt){const Ft=_t.id,Dt=!!_t.retired&&_t.retired===1,Nt={};for(let Vt=0,zt=0;Vt<Tt.fields.length;Vt++){const Xt=Tt.fields[Vt],Ht=Mt.typeCodes[_t.types[Vt]];if(Ht==="Code"){let Wt=_t.values[zt];zt++;const Qt=this._getDomain(Pt,Xt);if(this.layer.getField(Xt).type==="string"){const er=Mt.stringDicts.find(Yt=>Yt.domain===Qt.name);er&&(Wt=er.entries[Wt])}const Zt=Qt.codedValues.find(er=>er.code===Wt),Kt=new p$g({codedValue:Zt,objectType:"code"});Nt[Xt]=Kt}else if(Ht==="Range"){const Wt=_t.values[zt];zt++;const Qt=Wt.range[0],Zt=Wt.range[1],Kt=new p$g({minValue:Qt,maxValue:Zt,objectType:"range"});Nt[Xt]=Kt}else if(Ht==="Any"){const Wt=new p$g({objectType:"any"});Nt[Xt]=Wt}else{const Wt=new p$g({objectType:"null"});Nt[Xt]=Wt}}return new p$f({id:Ft,isRetired:Dt,subtype:Pt,values:Nt})}_constructFieldGroupsEnterprise(_t,Tt){const Mt=Tt.fieldGroups;return _t.map(Pt=>{const Ft=Mt.find(Dt=>Dt.name===Pt.name);if(Ft){const Dt=Ft.contingencies.map(Nt=>{const Vt=Nt.id,zt=Nt.isRetired||!1,Xt=this._getSubtypeEnterprise(Nt.subtypeCode),Ht={};for(let Wt=0;Wt<Pt.fields.length;Wt++){const Qt=Pt.fields[Wt];let Zt=Nt.values[Wt];if(typeof Zt=="number"||typeof Zt=="string"){const Kt=this._getDomain(Xt,Qt),er=this.layer.getField(Qt);er.type==="string"?Zt=Tt.stringDictionary[Zt]:er.type==="date"&&(Zt=new Date(`${Zt}+00:00`).getTime());const Yt=Kt.codedValues.find(ir=>ir.code===Zt),rr=new p$g({codedValue:Yt,objectType:"code"});Ht[Qt]=rr}else if(typeof Zt=="object"){const Kt=Zt.minValue,er=Zt.maxValue,Yt=new p$g({minValue:Kt,maxValue:er,objectType:"range"});Ht[Qt]=Yt}else if(Zt){const Kt=new p$g({objectType:"any"});Ht[Qt]=Kt}else{const Kt=new p$g({objectType:"null"});Ht[Qt]=Kt}}return new p$f({id:Vt,isRetired:zt,subtype:Xt,values:Ht})});return new i$e({name:Pt.name,isEditingRestrictive:Pt.isEditingRestrictive,fields:Pt.fields,contingencies:Dt})}return null}).filter(Pt=>Pt!==null)}async _fetchEnterpriseContingentValues(_t,Tt,Mt){return U$v(`${_t}/queryContingentValues`,{responseType:"json",query:{layers:JSON.stringify([Tt]),f:"json"},...Mt}).then(Pt=>{var Ft;return(Ft=Pt.data.contingentValueSets)==null?void 0:Ft[0]})}async _fetchAGOLContingentValues(_t,Tt,Mt){return U$v(`${_t}/${Tt}/contingentValues`,{responseType:"json",query:{f:"json"},...Mt}).then(Pt=>Pt.data)}_getSubtypeEnterprise(_t){const Tt=this.layer.sourceJSON;let Mt;if(Tt.subtypes){const Pt=Tt.subtypes.find(Ft=>Ft.code===_t);Mt=p$c.fromJSON(Pt)}return Mt||null}_getSubtypeAGOL(_t){const Tt=this.layer.sourceJSON;let Mt;if(Tt.subtypes){const Pt=Tt.subtypes.find(Ft=>Ft.name===_t);Mt=p$c.fromJSON(Pt)}return Mt||null}_getDomain(_t,Tt){const Mt=_t?_t.domains[Tt]:this.layer.getFieldDomain(Tt);return Mt.type==="inherited"?this.layer.getFieldDomain(Tt):Mt}};e$2a([d$25({constructOnly:!0})],h$j.prototype,"layer",void 0),e$2a([d$25({constructOnly:!0})],h$j.prototype,"request",void 0),e$2a([d$25({type:[i$e]})],h$j.prototype,"fieldGroups",void 0),e$2a([d$25()],h$j.prototype,"fieldGroupDefinitions",void 0),h$j=m$g=e$2a([n$2L("esri.layers.support.LayerContingentValuesCache")],h$j);const g$8=h$j;var V$a,U$5;(function(_t){_t.Text="text",_t.Number="number",_t.Date="date",_t.Unsupported="unsupported"})(V$a||(V$a={})),function(_t){_t.TOO_SHORT="length-validation-error::too-short"}(U$5||(U$5={}));const O$7={type:"number"},R$5={type:"number",intlOptions:{notation:"scientific"}},j$a={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}};function D$4(_t){return _t>=1e7||_t<=-1e7}const A$7=["editable","required","value","visibility"];let w$6=class extends a$2B(y$1E){constructor(_t){super(_t),this._storedValue=null,this._expressionTrackingHandles=new Map,this.arcade=null,this.editableFunction=null,this.id=e$1$().toString(),this.requiredFunction=null,this.expressionTrackingProvider=null,this.valueFunction=null,this.visibilityFunction=null,this.feature=null,this.field=null,this.fieldElement=null,this.layer=null,this.description=null,this.inputType=null,this.error=null,this.group=null,this.hint=null,this.messages=null,this.name=null}initialize(){const _t=Mt=>Mt!=="value",Tt=A$7.filter(_t);this.own(Tt.map(Mt=>l$2e(()=>this.get(`${Mt}Function`),Pt=>{r$1P(Pt)?this._registerExpressionWithTrackingProvider(Mt):this._unregisterExpressionWithTrackingProvider(Mt)},w$X)))}destroy(){for(const _t of this._expressionTrackingHandles.values())_t.remove()}get _configAllowsEdits(){var Pt,Ft,Dt,Nt;const{fieldElement:_t,layer:Tt,name:Mt}=this;return r$1P(_t)?_t.editableExpression?this.evaluatedEditableExpression:_t.editable!==!1:(Nt=(Dt=(Tt==null?void 0:Tt.type)!=="subtype-group"?(Ft=(Pt=Tt==null?void 0:Tt.popupTemplate)==null?void 0:Pt.fieldInfos)==null?void 0:Ft.find(({fieldName:Vt})=>Vt===Mt):null)==null?void 0:Dt.isEditable)!=null?Nt:!0}get _layerFieldAllowsEdits(){const{field:_t,layer:Tt}=this;return(Tt==null?void 0:Tt.capabilities.operations.supportsEditing)&&(_t==null?void 0:_t.editable)}get isUsingValueExpression(){return this._shouldUseValueExpression()}get evaluatedEditableExpression(){const{editableFunction:_t,spatialReference:Tt}=this;if(t$2e(_t))return null;const{arcade:Mt}=this,Pt=Mt.arcadeUtils.getViewInfo({spatialReference:Tt});return Mt.arcadeUtils.executeFunction(_t,Mt.arcadeUtils.createExecContext(this.feature,Pt))}get evaluatedRequiredExpression(){const{requiredFunction:_t,spatialReference:Tt}=this;if(t$2e(_t))return null;const{arcade:Mt}=this,Pt=Mt.arcadeUtils.getViewInfo({spatialReference:Tt});return Mt.arcadeUtils.executeFunction(_t,Mt.arcadeUtils.createExecContext(this.feature,Pt))}get evaluatedVisibilityExpression(){const{visibilityFunction:_t,spatialReference:Tt}=this;if(t$2e(_t))return null;const{arcade:Mt}=this,Pt=Mt.arcadeUtils.getViewInfo({spatialReference:Tt});return Mt.arcadeUtils.executeFunction(_t,Mt.arcadeUtils.createExecContext(this.feature,Pt))}get evaluatedValueExpression(){const{valueFunction:_t,spatialReference:Tt}=this;if(t$2e(_t))return null;const{arcade:Mt}=this,Pt=Mt.arcadeUtils.getViewInfo({spatialReference:Tt});return Mt.arcadeUtils.executeFunction(_t,Mt.arcadeUtils.createExecContext(this.feature,Pt))}set initialFeature(_t){this._set("initialFeature",_t),this.notifyChange("valid")}get domain(){var Nt;const{typeIdField:_t}=this.layer,Tt=_t===this.name,Mt=(Nt=this.field)==null?void 0:Nt.domain;if(Tt&&!Mt){const{layer:Vt}=this,zt=Vt.type==="subtype-group"?Vt.sublayers.map(({subtypeCode:Xt,title:Ht})=>({id:Xt,name:Ht})):Vt.types.map(({id:Xt,name:Ht})=>({code:Xt,name:Ht}));return new u$17({name:"__internal-type-based-coded-value-domain__",codedValues:zt})}const{feature:Pt}=this,Ft=_t&&this.layer.getFieldDomain(this.name,{feature:Pt})||Mt,Dt=m$2g(this.fieldElement,"domain");return r$1P(Dt)&&this._isDomainCompatible(Dt)?Dt:Ft}get editable(){var _t;return!!this._layerFieldAllowsEdits&&((_t=this.evaluatedEditableExpression)!=null?_t:this._configAllowsEdits)}get errorMessage(){return this._toErrorMessage()}get includeTime(){var Mt;const{fieldElement:_t}=this,Tt=r$1P(_t)&&((Mt=_t.input)==null?void 0:Mt.type)==="datetime-picker"?_t.input.includeTime:void 0;return Tt===void 0||Tt}get label(){return r$1P(this.fieldElement)&&this.fieldElement.label||this.field.alias||this.field.name}get maxLength(){if(this.type===V$a.Date)return-1;const{field:Tt,fieldElement:Mt}=this,Pt=Tt==null?void 0:Tt.length,Ft=r$1P(Mt)&&N$6(Mt.input)?Mt.input.maxLength:NaN;return!isNaN(Ft)&&Ft>=-1&&(Pt===-1||Ft<=Pt)?Ft:Pt}get minLength(){if(this.type===V$a.Date)return-1;const{field:Tt,fieldElement:Mt}=this,Pt=Tt==null?void 0:Tt.length,Ft=r$1P(Mt)&&N$6(Mt.input)?Mt.input.minLength:NaN;return!isNaN(Ft)&&Ft>=-1&&(Pt===-1||Ft<=Pt)?Ft:-1}get required(){const{editable:_t,evaluatedRequiredExpression:Tt,field:Mt,visible:Pt}=this;return!!_t&&((Mt==null?void 0:Mt.nullable)===!1||!(!Pt||!r$1P(Tt))&&Tt)}set required(_t){t$2e(_t)?this._clearOverride("required"):this._override("required",_t)}get spatialReference(){var _t;return((_t=this.layer)==null?void 0:_t.spatialReference)||null}set spatialReference(_t){_t===void 0?this._clearOverride("spatialReference"):this._override("spatialReference",_t)}get submittable(){const{field:_t,required:Tt,valid:Mt,value:Pt}=this;return(!Tt||!t$2e(Pt))&&(!!Mt||this.initialFeature.getAttribute(_t.name)===Pt)}get type(){const{field:_t}=this;return B$n(_t)?V$a.Number:H$g(_t)?V$a.Text:K$c(_t)?V$a.Date:V$a.Unsupported}get valid(){const _t=this.editable?this._validate():null;return this._set("error",_t),_t===null}get value(){if(this._shouldUseValueExpression()){const _t=this.evaluatedValueExpression;return this.type===V$a.Date&&_t instanceof Date?_t.getTime():r$1P(_t)&&typeof _t=="object"?_t.toString():_t}return this.get("_storedValue")}set value(_t){this.notifyChange("evaluatedVisibilityExpression"),this.set("_storedValue",_t)}get visible(){var _t;return!this._isEditorField()&&(r$1P(this.fieldElement)?(_t=this.evaluatedVisibilityExpression)!=null?_t:!0:this._isVisibleByDefault())}_isDomainCompatible(_t){const{field:Tt}=this;if((_t==null?void 0:_t.type)==="coded-value"){const Mt=typeof _t.codedValues[0].code;if(Mt==="string"&&H$g(Tt)||Mt==="number"&&B$n(Tt))return!0}return!!((_t==null?void 0:_t.type)==="range"&&B$n(Tt)||K$c(Tt))}_validate(){const{domain:_t,field:Tt,initialFeature:Mt,minLength:Pt,required:Ft,type:Dt,valid:Nt,value:Vt}=this,zt=Ft&&Vt===null,Xt=Nt!==void 0;return!zt&&Mt.getAttribute(Tt.name)===Vt&&Xt?null:zt?ee$7.INVALID_TYPE:Dt==="text"&&Pt>-1&&typeof Vt=="string"&&Vt.length<Pt?U$5.TOO_SHORT:_t?Vt!==null||Ft?a$2u(_t,Vt):null:ie$6(Tt,Vt)}_isVisibleByDefault(){var Tt;const _t=(Tt=this.field)==null?void 0:Tt.type;return _t!=="oid"&&_t!=="global-id"&&!this._isGeometryField()}_isEditorField(){return L$s(this.layer).includes(this.name)}_isGeometryField(){return O$r(this.layer).includes(this.name)}_shouldUseValueExpression(){const _t=this._layerFieldAllowsEdits&&!this._configAllowsEdits&&r$1P(this.valueFunction);return _t?this._registerExpressionWithTrackingProvider("value"):this._unregisterExpressionWithTrackingProvider("value"),_t}_toErrorMessage(){const{domain:_t,field:Tt,messages:Mt,minLength:Pt,value:Ft,required:Dt,type:Nt}=this,Vt=this.error;if(Dt&&Ft===null)return Mt.validationErrors.cannotBeNull;if(Vt===e$1E.VALUE_OUT_OF_RANGE||Vt===Z$9.OUT_OF_RANGE){const zt=r$1l(_t)||re$7(Tt);return s$1y(Mt.validationErrors.outsideRange,zt,{format:{max:Nt==="date"?j$a:D$4(zt.max)?R$5:O$7,min:Nt==="date"?j$a:D$4(zt.min)?R$5:O$7}})}return Vt===e$1E.INVALID_CODED_VALUE?Mt.validationErrors.invalidCodedValue:Vt===ee$7.INVALID_TYPE?Mt.validationErrors.invalidType:Vt===U$5.TOO_SHORT?s$1y(Mt.validationErrors.tooShort,{min:Pt}):null}_registerExpressionWithTrackingProvider(_t){const{_expressionTrackingHandles:Tt,expressionTrackingProvider:Mt}=this;if(t$2e(Mt)||Tt.has(_t))return;const Pt=`evaluated${k$4(_t)}Expression`,Ft=Mt.registerExpression(()=>this.notifyChange(Pt));Tt.set(_t,Ft)}_unregisterExpressionWithTrackingProvider(_t){const{_expressionTrackingHandles:Tt}=this,Mt=Tt.get(_t);Mt&&(Mt.remove(),Tt.delete(_t))}};function N$6(_t){return!!_t&&"maxLength"in _t}e$2a([d$25()],w$6.prototype,"_storedValue",void 0),e$2a([d$25()],w$6.prototype,"_configAllowsEdits",null),e$2a([d$25()],w$6.prototype,"_layerFieldAllowsEdits",null),e$2a([d$25()],w$6.prototype,"arcade",void 0),e$2a([d$25()],w$6.prototype,"editableFunction",void 0),e$2a([d$25()],w$6.prototype,"requiredFunction",void 0),e$2a([d$25()],w$6.prototype,"expressionTrackingProvider",void 0),e$2a([d$25()],w$6.prototype,"valueFunction",void 0),e$2a([d$25()],w$6.prototype,"isUsingValueExpression",null),e$2a([d$25()],w$6.prototype,"visibilityFunction",void 0),e$2a([d$25()],w$6.prototype,"evaluatedEditableExpression",null),e$2a([d$25()],w$6.prototype,"evaluatedRequiredExpression",null),e$2a([d$25()],w$6.prototype,"evaluatedVisibilityExpression",null),e$2a([d$25()],w$6.prototype,"evaluatedValueExpression",null),e$2a([d$25()],w$6.prototype,"feature",void 0),e$2a([d$25()],w$6.prototype,"field",void 0),e$2a([d$25()],w$6.prototype,"fieldElement",void 0),e$2a([d$25()],w$6.prototype,"initialFeature",null),e$2a([d$25()],w$6.prototype,"layer",void 0),e$2a([d$25({aliasOf:"fieldElement.description"})],w$6.prototype,"description",void 0),e$2a([d$25()],w$6.prototype,"domain",null),e$2a([d$25()],w$6.prototype,"editable",null),e$2a([d$25({aliasOf:"fieldElement.input.type"})],w$6.prototype,"inputType",void 0),e$2a([d$25({readOnly:!0})],w$6.prototype,"error",void 0),e$2a([d$25({dependsOn:["error","messages","value"]})],w$6.prototype,"errorMessage",null),e$2a([d$25()],w$6.prototype,"group",void 0),e$2a([d$25({aliasOf:"fieldElement.hint"})],w$6.prototype,"hint",void 0),e$2a([d$25()],w$6.prototype,"includeTime",null),e$2a([d$25()],w$6.prototype,"label",null),e$2a([d$25()],w$6.prototype,"maxLength",null),e$2a([d$25()],w$6.prototype,"minLength",null),e$2a([d$25()],w$6.prototype,"messages",void 0),e$2a([d$25({aliasOf:"field.name"})],w$6.prototype,"name",void 0),e$2a([d$25()],w$6.prototype,"required",null),e$2a([d$25()],w$6.prototype,"spatialReference",null),e$2a([d$25()],w$6.prototype,"submittable",null),e$2a([d$25()],w$6.prototype,"type",null),e$2a([d$25()],w$6.prototype,"valid",null),e$2a([d$25({value:null})],w$6.prototype,"value",null),e$2a([d$25()],w$6.prototype,"visible",null),w$6=e$2a([n$2L("esri.widgets.FeatureForm.InputField")],w$6);const k$4=_t=>_t.charAt(0).toUpperCase()+_t.slice(1),q$3=w$6,u$c=["visibility"];let d$e=class extends a$2B(y$1E){constructor(_t){super(_t),this._expressionTrackingHandles=new Map,this.arcade=null,this.visibilityExpression=null,this.description=null,this.expressionTrackingProvider=null,this.feature=null,this.groupElement=null,this.label=null,this.spatialReference=null}initialize(){this.own([...u$c.map(_t=>l$2e(()=>this.get(`${_t}Function`),Tt=>{r$1P(Tt)?this._registerExpressionWithTrackingProvider(_t):this._unregisterExpressionWithTrackingProvider(_t)},w$X)),l$2e(()=>[this.visible,this.inputFields],([_t])=>{const{inputFields:Tt}=this,Mt=!!_t&&void 0;for(const Pt of Tt)Pt.required=Mt},{initial:!0,equals:(_t,Tt)=>Tt[0]===_t[0]&&Tt[1]===_t[1]})])}destroy(){for(const _t of this._expressionTrackingHandles.values())_t.remove()}set visibilityFunction(_t){this._set("visibilityFunction",_t),r$1P(_t)?this._registerExpressionWithTrackingProvider("visibility"):this._unregisterExpressionWithTrackingProvider("visibility")}get evaluatedVisibilityExpression(){const{visibilityFunction:_t,spatialReference:Tt}=this;if(t$2e(_t))return;const{arcade:Mt}=this,Pt=Mt.arcadeUtils.getViewInfo({spatialReference:Tt});return Mt.arcadeUtils.executeFunction(_t,Mt.arcadeUtils.createExecContext(this.feature,Pt))}get inputFields(){return this._get("inputFields")}set inputFields(_t){this.handles.removeAll(),_t&&this.handles.add(_t.map(Tt=>l$2e(()=>Tt.visible,()=>this._dirtyEvaluatedVisibilityExpression()))),this._set("inputFields",_t)}get state(){return r$1P(this.groupElement)&&this.groupElement.initialState||"expanded"}set state(_t){t$2e(_t)?this._clearOverride("state"):this._override("state",_t)}get visible(){return this.evaluatedVisibilityExpression!==!1&&this.inputFields&&this.inputFields.some(_t=>_t.visible)}_registerExpressionWithTrackingProvider(_t){const{_expressionTrackingHandles:Tt,expressionTrackingProvider:Mt}=this;if(t$2e(Mt)||Tt.has(_t))return;const Pt=`evaluated${h$i(_t)}Expression`,Ft=Mt.registerExpression(()=>this.notifyChange(Pt));Tt.set(_t,Ft)}_unregisterExpressionWithTrackingProvider(_t){const{_expressionTrackingHandles:Tt}=this,Mt=Tt.get(_t);Mt&&(Mt.remove(),Tt.delete(_t))}_dirtyEvaluatedVisibilityExpression(){const{groupElement:_t}=this;r$1P(_t)&&_t.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")}};e$2a([d$25()],d$e.prototype,"arcade",void 0),e$2a([o$1d("groupElement.visibilityExpression")],d$e.prototype,"visibilityExpression",void 0),e$2a([d$25()],d$e.prototype,"visibilityFunction",null),e$2a([d$25()],d$e.prototype,"evaluatedVisibilityExpression",null),e$2a([o$1d("groupElement.description")],d$e.prototype,"description",void 0),e$2a([d$25()],d$e.prototype,"expressionTrackingProvider",void 0),e$2a([d$25()],d$e.prototype,"feature",void 0),e$2a([d$25()],d$e.prototype,"groupElement",void 0),e$2a([d$25()],d$e.prototype,"inputFields",null),e$2a([o$1d("groupElement.label")],d$e.prototype,"label",void 0),e$2a([d$25()],d$e.prototype,"spatialReference",void 0),e$2a([d$25()],d$e.prototype,"state",null),e$2a([d$25()],d$e.prototype,"visible",null),d$e=e$2a([n$2L("esri.widgets.FeatureForm.InputFieldGroup")],d$e);const h$i=_t=>_t.charAt(0).toUpperCase()+_t.slice(1),v$e=d$e,v$d=new g$$({attributes:{}}),b$c="esri.widgets.FeatureForm.FeatureFormViewModel",E$8=s$2l.getLogger(b$c),V$9=["editable","required","value","visibility"],x$8="#JSAPI_CONTINGENT_VALUE_EMPTY_HASH",j$9="#JSAPI_CONTINGENT_VALUE_ANY_HASH",w$5="#JSAPI_CONTINGENT_VALUE_NULL_HASH";let I$8=class extends a$2B(m$26(n$2K.EventedAccessor)){constructor(_t){super(_t),this._arcade=null,this._compiledExpressionLookup=new Map,this._expressionLookup=new Map,this._expressionInvalidationCallbacks=new Set,this._contingentValuesCache=null,this._featureClone=v$d.clone(),this._initialFeature=v$d.clone(),this._arcadeGeometryOperationsEnabled=!1,this._inputFieldCache=[],this.contingencyConstraintViolations=new Map,this.messages=null,this.strict=!1}initialize(){const _t=async()=>this.messages=await h$1B("esri/widgets/FeatureForm/t9n/FeatureForm");_t();const Tt=l$2e(()=>this.layer,Pt=>{(Pt==null?void 0:Pt.type)==="feature"&&this.addResolvingPromise(g$8.createLoadedLayerContingentValuesCache(Pt).then(Ft=>{this._contingentValuesCache=Ft,this.notifyChange("fieldsWithContingentValues")}))},{initial:!0}),Mt=l$2e(()=>{var Pt;return(Pt=this.feature)==null?void 0:Pt.geometry},Pt=>{this._featureClone.geometry=Pt;for(const Ft of this._expressionInvalidationCallbacks)Ft()});this.handles.add([s$1$(_t),Tt,Mt])}destroy(){this.feature=null,this.layer=null,this._contingentValuesCache=l$2H(this._contingentValuesCache)}get allInputFields(){return this.inputFields.reduce((_t,Tt)=>T$5(Tt)?[..._t,...Tt.inputFields]:[..._t,Tt],[])}get _layerFieldsByName(){return new Map(this.layer.fields.map(_t=>[_t.name,_t]))}get feature(){return this._get("feature")}set feature(_t){this._featureClone=_t?_t.clone():v$d.clone(),this._initialFeature=this._featureClone.clone(),this.contingencyConstraintViolations.clear(),this._clearInputFieldCache(),this._set("feature",_t)}get fieldsWithContingentValues(){if(t$2e(this._contingentValuesCache))return new Set;const _t=this._contingentValuesCache.fieldGroups.flatMap(Tt=>Tt.fields);return new Set(_t)}get formTemplate(){return this.layer&&"formTemplate"in this.layer?this.layer.formTemplate:null}set formTemplate(_t){_t!=null?this._override("formTemplate",_t):this._clearOverride("formTemplate")}get inputFields(){const{_arcade:_t,_featureClone:Tt,_initialFeature:Mt,_inputFieldCache:Pt,formTemplate:Ft,messages:Dt,layer:Nt,state:Vt,spatialReference:zt}=this;if(Vt!=="ready")return[];const Xt={arcade:_t,feature:Tt,initialFeature:Mt,layer:Nt,messages:Dt,expressionTrackingProvider:{registerExpression:this._registerExpression.bind(this)},spatialReference:zt},Ht=r$1P(Ft)&&Ft.elements.length>0?this._updateInputFieldsFromElements(Pt,Ft.elements,Xt):this._updateInputFieldsFromLayerFields(Pt,Nt==null?void 0:Nt.fields,Xt);return this._inputFieldCache=Ht,Ht}get joinedContingentValues(){return this._joinContingentValues()}get layer(){var _t;return((_t=this.feature)==null?void 0:_t.sourceLayer)&&"applyEdits"in this.feature.sourceLayer?this.feature.sourceLayer:null}set layer(_t){_t?this._override("layer",_t):this._clearOverride("layer")}get spatialReference(){var _t;return((_t=this.layer)==null?void 0:_t.spatialReference)||null}set spatialReference(_t){_t===void 0?this._clearOverride("spatialReference"):this._override("spatialReference",_t)}get state(){return this.messages&&this.get("layer.loaded")?"ready":"disabled"}get submittable(){return!!this.valid||this.allInputFields.filter(_t=>!_t.valid).every(({submittable:_t})=>_t)}get valid(){const _t=this.allInputFields;return _t.length>0&&_t.every(({valid:Tt})=>Tt)}findField(_t){return this.allInputFields.find(Tt=>Tt.name===_t)}getValue(_t){var Ft;const{_featureClone:Tt,layer:Mt}=this,Pt=!!(Mt!=null&&Mt.getField(_t));return(Ft=Tt.getAttribute(_t))!=null?Ft:Pt?null:void 0}setValue(_t,Tt){const{_featureClone:Mt,strict:Pt}=this,Ft=this.findField(_t);Tt=Tt===""?null:Tt,Ft&&Mt.getAttribute(_t)!==Tt&&(Ft.value=Tt,Pt&&!Ft.valid||this._afterValueChange(Ft))}getValues(){return{...this._featureClone.attributes}}submit(){const _t=this.allInputFields,Tt=new Set(_t.filter(Ft=>Ft.valid).map(({name:Ft})=>Ft)),Mt=_t.filter(Ft=>!Ft.valid).map(({name:Ft})=>Ft),Pt=this.getValues();if(this.validateContingencyConstraints(Pt,{includeIncompleteViolations:!0}).length>0)for(const[Ft,Dt]of this.contingencyConstraintViolations.entries())Dt.type==="error"&&(Tt.delete(Ft),Mt.push(Ft));this.emit("submit",{valid:[...Tt],invalid:Mt,values:Pt})}validateContingencyConstraints(_t,Tt){const{_contingentValuesCache:Mt}=this,Pt=new Map;if(this.contingencyConstraintViolations=Pt,t$2e(Mt))return[];const{invalid:Ft,incomplete:Dt}=Mt.validateContingencyConstraints(_t),Nt=[...Ft,...Tt!=null&&Tt.includeIncompleteViolations?Dt:[]];for(const Vt of Nt)for(const zt of Vt.fieldGroup.fields)Pt.set(zt,Vt);return Nt}_emitChangeEvent({name:_t,valid:Tt,value:Mt}){this.emit("value-change",{layer:this.layer,feature:this.feature,fieldName:_t,value:Mt,valid:Tt})}_updateInputFieldsFromElements(_t,Tt,Mt){const Pt=new Map;for(const Dt of _t)if(T$5(Dt)){A$6(Pt,Dt.groupElement,Dt);for(const Nt of Dt.inputFields)A$6(Pt,Nt.fieldElement,Nt)}else A$6(Pt,Dt.fieldElement,Dt);const Ft=this._updateInputFieldsRecursive(Pt,Tt.filter(this._isSupportedElement),Mt);for(const[Dt,Nt]of Pt.entries())Pt.delete(Dt),Nt.destroy();return Ft}_updateInputFieldsRecursive(_t,Tt,Mt,Pt=null){const Ft=[];for(const Dt of Tt){const Nt=_t.has(Dt),Vt=Nt?_t.get(Dt):k$3(Dt)?this._makeInputFieldGroupFromGroupElement(Dt,Mt):this._makeInputFieldFromFieldElement(Dt,Mt,Pt);if(Ft.push(Vt),Nt)if(_t.delete(Dt),T$5(Vt)){const{arcade:zt,feature:Xt,expressionTrackingProvider:Ht,spatialReference:Wt}=Mt;Vt.set({arcade:zt,feature:Xt,expressionTrackingProvider:Ht,spatialReference:Wt})}else Vt.set(Mt);if(k$3(Dt)){const zt=Dt.elements.filter(Xt=>this._isSupportedElement(Xt));Vt.inputFields=this._updateInputFieldsRecursive(_t,zt,Mt,Vt)}}return Ft}_updateInputFieldsFromLayerFields(_t,Tt,Mt){var Ht;if(!Array.isArray(Tt))return E$8.warn(b$c,"No attribute fields found."),[];const Pt=new Map;for(const Wt of _t)if(T$5(Wt)){for(const Qt of Wt.inputFields)Qt.destroy();Wt.inputFields.length=0,Wt.destroy()}else Pt.set(Wt.field,Wt);const Ft=[],{feature:Dt,initialFeature:Nt,layer:Vt,messages:zt,spatialReference:Xt}=Mt;for(const Wt of Tt){const Qt=(Ht=Pt.get(Wt))!=null?Ht:new q$3({field:Wt,feature:Dt,initialFeature:Nt,layer:Vt,messages:zt,spatialReference:Xt,value:Dt.getAttribute(Wt.name)});Qt.set({fieldElement:null,requiredFunction:null,visibilityFunction:null,valueFunction:null,editableFunction:null}),Ft.push(Qt),Pt.delete(Wt)}for(const[Wt,Qt]of Pt.entries())Pt.delete(Wt),Qt.destroy();return Ft}_makeInputFieldFromFieldElement(_t,Tt,Mt=null){const{arcade:Pt,expressionTrackingProvider:Ft,feature:Dt,initialFeature:Nt,layer:Vt,messages:zt,spatialReference:Xt}=Tt,Ht=new q$3({fieldElement:_t,field:this._layerFieldsByName.get(_t.fieldName),requiredFunction:this._getCompiledExpression(_t.requiredExpression),visibilityFunction:this._getCompiledExpression(_t.visibilityExpression),valueFunction:this._getCompiledExpression(_t.valueExpression),editableFunction:this._getCompiledExpression(_t.editableExpression),group:Mt,arcade:Pt,expressionTrackingProvider:Ft,feature:Dt,initialFeature:Nt,layer:Vt,messages:zt,spatialReference:Xt,value:Dt.getAttribute(_t.fieldName)}),Wt=`watch-expression-field-${Ht.id}`,Qt=l$2e(()=>Ht.fieldElement,er=>{this.handles.remove(Wt),r$1P(er)&&this.handles.add(V$9.map(Yt=>l$2e(()=>er[`${Yt}Expression`],async rr=>{rr&&rr!==""&&(Ht[`${Yt}Function`]=await this._getOrMakeCompiledExpression(rr),Ht.arcade=this._arcade)},{initial:!0,sync:!0})),Wt)},{initial:!0,sync:!0}),Zt=n$2W(()=>this.handles.remove(Wt)),Kt=l$2e(()=>Ht.value,()=>this._afterValueChange(Ht));return Ht.own([Qt,Zt,Kt]),Ht}_makeInputFieldGroupFromGroupElement(_t,Tt){const{arcade:Mt,feature:Pt,expressionTrackingProvider:Ft,spatialReference:Dt}=Tt,Nt=new v$e({groupElement:_t,visibilityFunction:this._getCompiledExpression(_t.visibilityExpression),inputFields:[],arcade:Mt,feature:Pt,expressionTrackingProvider:Ft,spatialReference:Dt});return Nt.own(l$2e(()=>Nt.groupElement,Vt=>r$1P(Vt)&&Vt.own(l$2e(()=>Vt.visibilityExpression,async zt=>{zt&&zt!==""&&(Nt.visibilityFunction=await this._getOrMakeCompiledExpression(zt),Nt.arcade=this._arcade)},{initial:!0})),{initial:!0})),Nt}_clearInputFieldCache(){for(const _t of this._inputFieldCache){if(T$5(_t))for(const Tt of _t.inputFields)Tt.destroy();_t.destroy()}this._inputFieldCache=[]}_afterValueChange(_t){const{name:Tt,value:Mt}=_t;if(this.get("layer.typeIdField")===Tt&&"types"in this.layer){const Pt=new Set;this.layer.types.forEach(Ft=>Object.keys(Ft.domains).forEach(Dt=>Pt.add(Dt))),Pt.forEach(Ft=>{const Dt=this.findField(Ft);Dt&&Dt.notifyChange("domain")})}this._featureClone.setAttribute(Tt,Mt);for(const Pt of this._expressionInvalidationCallbacks)Pt();this._emitChangeEvent(_t)}_registerExpression(_t){const{_expressionInvalidationCallbacks:Tt}=this;return Tt.add(_t),n$2W(()=>Tt.delete(_t))}_getCompiledExpression(_t){return this._compiledExpressionLookup.get(this._expressionLookup.get(_t))}async _getOrMakeCompiledExpression(_t){var Tt;{if(t$2e(_t)||_t==="")return null;const Mt=(Tt=this._expressionLookup.get(_t))!=null?Tt:this._addToExpressionLookup(_t);if(this._compiledExpressionLookup.has(Mt))return this._compiledExpressionLookup.get(Mt);this._arcade||(this._arcade=await a$2t());const Pt=this._arcade.arcadeUtils;return!this._arcadeGeometryOperationsEnabled&&Pt.hasGeometryOperations(Mt)&&(await Pt.enableGeometryOperations(),this._arcadeGeometryOperationsEnabled=!0),this._addToCompiledExpressionLookup(Mt)}}_addToCompiledExpressionLookup(_t){const{_arcade:{arcadeUtils:Tt},_compiledExpressionLookup:Mt}=this,Pt=Tt.createFunction(_t);return Mt.set(_t,Pt),Pt}_addToExpressionLookup(_t){var Ft,Dt;const{_expressionLookup:Tt,formTemplate:Mt}=this,Pt=(Dt=(Ft=r$1P(Mt)&&r$1P(Mt.expressionInfos)?Object.values(Mt.expressionInfos).find(Nt=>Nt.name===_t):null)==null?void 0:Ft.expression)!=null?Dt:_t;return Tt.set(_t,Pt),_t!==Pt&&Tt.set(Pt,Pt),Pt}_isSupportedElement(_t){return _t.type==="field"||_t.type==="group"||(E$8.warn("form-info::unsupported-element-type","Only element types 'field' and 'group' are supported",`Element ${_t.label} has unsupported type '${_t.type}'`),!1)}_joinContingentValues(){const _t=this._contingentValuesCache;if(t$2e(_t))return[];const Tt="typeIdField"in this.layer?this.layer.typeIdField:null,Mt=Tt?this.getValue(Tt):null,Pt=[];for(const Nt of _t.fieldGroups){const{contingencies:Vt,fields:zt,name:Xt}=Nt,Ht=[];for(const Wt of Vt)Wt.isRetired||r$1P(Wt.subtype)&&Wt.subtype.code!==Mt||Ht.push({values:Wt.values});Ht.length>0&&Pt.push({name:Xt,fields:zt,contingencies:Ht})}const[Ft,Dt]=this._generateJoinPlan(Pt);return[...Ft.flatMap(Nt=>this._joinFieldGroupContingencies(Nt)),...Dt.flatMap(Nt=>Nt.contingencies)]}_generateJoinPlan(_t){const Tt=new Map,Mt=[],Pt=new Set;for(const zt of _t)for(const Xt of zt.fields)if(Tt.has(Xt)){const Ht=Tt.get(Xt),Wt=zt,Qt=[Ht.name,Wt.name].sort().join("|");if(Pt.has(Qt))continue;Mt.push([Ht,Wt]),Pt.add(Qt),Tt.set(Xt,Wt)}else Tt.set(Xt,zt);const Ft=new Set(Mt.flat()),Dt=new Set(_t);for(const zt of Ft)Dt.delete(zt);const Nt=new Map,Vt=new Map;for(const zt of new Set(Mt.flat())){const Xt=Symbol(zt.name);Nt.set(Xt,new Set([zt])),Vt.set(zt,Xt)}for(const[zt,Xt]of Mt){const Ht=Vt.get(zt),Wt=Vt.get(Xt);if(Ht===Wt)continue;const Qt=Nt.get(Ht),Zt=Nt.get(Wt);for(const Kt of Zt)Qt.add(Kt),Vt.set(Kt,Ht);Nt.delete(Wt)}return[[...Nt.values()].map(zt=>[...zt]),[...Dt]]}_joinFieldGroupContingencies(_t){const Tt=_t.slice(),Mt=Tt.shift();let Pt=Tt.shift(),Ft=this._generateJoinKey(Mt.fields,Pt.fields),Dt=new Set([...Mt.fields,...Pt.fields]),Nt=new Map;for(const zt of Mt.contingencies){const[Xt]=this._hashContingency(zt,Ft.codedValueFields,!0);Nt.has(Xt)?Nt.get(Xt).push(zt):Nt.set(Xt,[zt])}for(;Tt.length>0;){const zt=new Map,Xt=Tt.shift(),Ht=this._generateJoinKey(Dt,Xt.fields);for(const Wt of Pt.contingencies){const[Qt,Zt]=this._hashContingency(Wt,Ft.codedValueFields),Kt=Zt?this._findMatchingContingenciesWithAnyHashMask(Nt,Qt):Nt.get(Qt);if(Nt.has(j$9)&&Kt.push(...this._findMatchingContingenciesContainingAny(Wt,Nt.get(j$9),Ft.codedValueFields)),!t$2e(Kt))for(const er of Kt){const Yt=Ft.rangeFields.length>0?this._joinContingenciesWithRangeDomains(er,Wt,Ft.rangeFields):this._joinContingencies(er,Wt);if(t$2e(Yt))break;const[rr]=this._hashContingency(Yt,Ht.codedValueFields,!0);zt.has(rr)?zt.get(rr).push(Yt):zt.set(rr,[Yt])}}Nt=zt,Pt=Xt,Ft=Ht,Dt=new Set([...Dt,...Pt.fields])}const Vt=[];for(const zt of Pt.contingencies){const[Xt,Ht]=this._hashContingency(zt,Ft.codedValueFields),Wt=Ht?this._findMatchingContingenciesWithAnyHashMask(Nt,Xt):Nt.get(Xt);if(Nt.has(j$9)&&Wt.push(...this._findMatchingContingenciesContainingAny(zt,Nt.get(j$9),Ft.codedValueFields)),!t$2e(Wt))for(const Qt of Wt){const Zt=Ft.rangeFields.length>0?this._joinContingenciesWithRangeDomains(Qt,zt,Ft.rangeFields):this._joinContingencies(Qt,zt);r$1P(Zt)&&Vt.push(Zt)}}return Vt}_joinContingencies(_t,Tt){const Mt={values:{..._t.values,...Tt.values}};for(const[Pt,Ft]of Object.entries(Mt.values))Ft.objectType==="any"&&r$1P(_t.values[Pt])&&(Mt.values[Pt]=_t.values[Pt]);return Mt}_joinContingenciesWithRangeDomains(_t,Tt,Mt){const Pt=this._joinContingencies(_t,Tt);for(const Ft of Mt){const Dt=_t.values[Ft],Nt=Tt.values[Ft],{leftIsNull:Vt,rightIsNull:zt,bothAreNull:Xt,leftIsAny:Ht,rightIsAny:Wt,bothAreAny:Qt,leftIsRange:Zt,rightIsRange:Kt}=this._compareObjectTypes(Dt.objectType,Nt.objectType);if(Xt||Qt)continue;if(Vt&&Wt||zt&&Ht){Pt.values[Ft]=new p$g({objectType:"null"});continue}if(Vt&&Kt||zt&&Zt)return null;Ht?(Dt.minValue=-1/0,Dt.maxValue=1/0):Wt&&(Nt.minValue=-1/0,Nt.maxValue=1/0);const er=Math.max(Dt.minValue,Nt.minValue),Yt=Math.min(Dt.maxValue,Nt.maxValue);if(er>Yt)return null;Pt.values[Ft]=new p$g({objectType:"range",minValue:er,maxValue:Yt})}return Pt}_findMatchingContingenciesContainingAny(_t,Tt,Mt){return Tt.filter(Pt=>Mt.every(Ft=>{var Vt,zt;const Dt=Pt.values[Ft],Nt=_t.values[Ft];return Dt.objectType==="any"||Nt.objectType==="any"||((Vt=Dt.codedValue)==null?void 0:Vt.code)===((zt=Nt.codedValue)==null?void 0:zt.code)}))}_findMatchingContingenciesWithAnyHashMask(_t,Tt){const Mt=RegExp(`${Tt}$`),Pt=[];for(const[Ft,Dt]of _t){if(Ft===j$9)break;Mt.test(Ft)&&Pt.push(...Dt)}return Pt}_generateJoinKey(_t,Tt){const Mt=Array.isArray(_t)?new Set(_t):_t,Pt=Array.isArray(Tt)?new Set(Tt):Tt,Ft=Mt.size<Pt.size?Mt:Pt,Dt=Ft===Mt?Pt:Mt,Nt=new Set,Vt=new Set;for(const zt of Ft)if(Dt.has(zt)){const Xt=this.layer.getFieldDomain(zt,{feature:this.feature});if(t$2e(Xt))continue;switch(Xt.type){case"coded-value":Nt.add(zt);break;case"range":Vt.add(zt)}}return{codedValueFields:[...Nt],rangeFields:[...Vt]}}_hashContingency(_t,Tt,Mt=!1){var Dt;if(Tt.length<1)return[x$8,!1];const Pt=[];let Ft=!1;for(const Nt of Tt){const Vt=_t.values[Nt];if(Vt.objectType==="any"){if(Mt)return[j$9,!0];Ft=!0,Pt.push(`${Nt}:.*`)}else Vt.objectType==="null"?Pt.push(`${Nt}:${w$5}`):Pt.push(`${Nt}:${(Dt=Vt.codedValue)==null?void 0:Dt.code}`)}return[Pt.sort().join("&"),Ft]}_compareObjectTypes(_t,Tt){return{leftIsNull:_t==="null",rightIsNull:Tt==="null",bothAreNull:_t==="null"&&Tt==="null",leftIsAny:_t==="any",rightIsAny:Tt==="any",bothAreAny:_t==="any"&&Tt==="any",leftIsRange:_t==="range",rightIsRange:Tt==="range"}}};e$2a([d$25({readOnly:!0})],I$8.prototype,"allInputFields",null),e$2a([d$25()],I$8.prototype,"_layerFieldsByName",null),e$2a([d$25()],I$8.prototype,"_inputFieldCache",void 0),e$2a([d$25()],I$8.prototype,"contingencyConstraintViolations",void 0),e$2a([d$25()],I$8.prototype,"feature",null),e$2a([d$25()],I$8.prototype,"fieldsWithContingentValues",null),e$2a([d$25({type:E$l})],I$8.prototype,"formTemplate",null),e$2a([d$25({readOnly:!0})],I$8.prototype,"inputFields",null),e$2a([d$25()],I$8.prototype,"joinedContingentValues",null),e$2a([d$25()],I$8.prototype,"layer",null),e$2a([d$25()],I$8.prototype,"messages",void 0),e$2a([d$25()],I$8.prototype,"spatialReference",null),e$2a([d$25()],I$8.prototype,"state",null),e$2a([d$25()],I$8.prototype,"strict",void 0),e$2a([d$25()],I$8.prototype,"submittable",null),e$2a([d$25()],I$8.prototype,"valid",null),e$2a([d$25()],I$8.prototype,"getValues",null),e$2a([d$25()],I$8.prototype,"submit",null),I$8=e$2a([n$2L(b$c)],I$8);const T$5=_t=>!!_t.inputFields,k$3=_t=>_t.type==="group",A$6=(_t,Tt,Mt)=>{r$1P(Tt)&&_t.set(Tt,Mt)},M$a=I$8,b$b={base:"esri-feature-form",form:"esri-feature-form__form",formHeader:"esri-feature-form__form-header",label:"esri-feature-form__label",inputField:"esri-feature-form__input",inputDate:"esri-feature-form__input--date",inputTime:"esri-feature-form__input--time",inputRadioGroup:"esri-feature-form__input--radio-group",inputRadio:"esri-feature-form__input--radio",inputRadioLabel:"esri-feature-form__input--radio-label",inputDisabled:"esri-feature-form__input--disabled",inputSwitch:"esri-feature-form__input--switch",inputInvalid:"esri-feature-form__input--invalid",inputIconInvalid:"esri-feature-form__input-icon--invalid",errorMessage:"esri-feature-form__field-error-message",description:"esri-feature-form__description-text",dateInputPart:"esri-feature-form__date-input-part",loneDateInputPart:"esri-feature-form__date-input-part--lone",dateInputContainer:"esri-feature-form__date-input-container",dateFormatHint:"esri-feature-form__date-format-hint",group:"esri-feature-form__group",groupLabel:"esri-feature-form__group-label",groupHeader:"esri-feature-form__group-header",groupHeading:"esri-feature-form__group-header",groupTitle:"esri-feature-form__group-title",groupDescription:"esri-feature-form__group-description",groupToggleIcon:"esri-feature-form__group-toggle-icon",groupCollapsed:"esri-feature-form__group--collapsed",groupSequential:"esri-feature-form__group--sequential",groupActive:"esri-feature-form__group--active",collapseIcon:"esri-icon-up",errorIcon:"esri-icon-notice-triangle",expandIcon:"esri-icon-down",widget:"esri-widget",panel:"esri-widget--panel",input:"esri-input",select:"esri-select"},I$7={datePattern:"D",timePattern:"tt"};function F$6(_t){return _t&&_t.inputFields}const y$d="data-field-name";let w$4=class extends O$l{constructor(_t,Tt){super(_t,Tt),this._activeDateFieldEdit=null,this._activeInputName=null,this._activeNumberFieldEdit=null,this._fieldFocusNeeded=!1,this._fieldToInitialIncompatibleDomainValue=new Map,this._switchFieldsWithInitialIncompatibleValue=new Set,this._userUpdatedInputFieldNames=new Set,this.feature=null,this.formTemplate=null,this.groupDisplay="all",this.headingLevel=2,this.label=void 0,this.layer=null,this.messages=null,this.messagesTemplates=null,this.spatialReference=null,this.strict=null,this.viewModel=new M$a,this._handleRadioInputChange=Mt=>{this._commitInputValue(Mt.target)},this._handleInputInput=Mt=>{this._commitInputValue(Mt.currentTarget,!0)},this._handleFormKeyDown=this._handleFormKeyDown.bind(this),this._handleInputBlur=this._handleInputBlur.bind(this),this._handleInputFocus=this._handleInputFocus.bind(this),this._handleNumberInputMouseDown=this._handleNumberInputMouseDown.bind(this),this._handleInputKeyDown=this._handleInputKeyDown.bind(this),this._handleOptionChange=this._handleOptionChange.bind(this),this._handleGroupClick=this._handleGroupClick.bind(this),this._handleSubmit=this._handleSubmit.bind(this),this._afterInputCreateOrUpdate=this._afterInputCreateOrUpdate.bind(this)}initialize(){this.own([l$2e(()=>this.feature,()=>{const _t=this._getFocusableInput("forward");this._activeInputName=_t&&_t.name,this._userUpdatedInputFieldNames.clear(),this._fieldToInitialIncompatibleDomainValue.clear(),this._switchFieldsWithInitialIncompatibleValue.clear(),this._fieldFocusNeeded=!0}),this.on("submit",_t=>{if(_t.invalid.length>0){const[Tt]=_t.invalid;_t.invalid.forEach(Mt=>this._userUpdatedInputFieldNames.add(Mt)),this._activeInputName=Tt,this._fieldFocusNeeded=!0,this.scheduleRender()}})])}loadDependencies(){return Promise.all([__vitePreload(()=>import("./calcite-combobox.77198f5f.js"),["assets/calcite-combobox.77198f5f.js","assets/popper.28b8c32e.js","assets/dom.6d780cb1.js","assets/guid.d207555c.js","assets/utils2.36e07c02.js","assets/label.5b6684d1.js","assets/form.ec68f019.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js","assets/conditionalSlot.14b9b076.js","assets/icon.b8676875.js"]),__vitePreload(()=>import("./calcite-combobox-item.43406ca7.js"),["assets/calcite-combobox-item.43406ca7.js","assets/dom.6d780cb1.js","assets/guid.d207555c.js","assets/utils2.36e07c02.js","assets/conditionalSlot.14b9b076.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js","assets/icon.b8676875.js"]),__vitePreload(()=>import("./calcite-combobox-item-group.198d9761.js"),["assets/calcite-combobox-item-group.198d9761.js","assets/utils2.36e07c02.js","assets/dom.6d780cb1.js","assets/guid.d207555c.js"]),__vitePreload(()=>import("./calcite-input-message.f6c5e700.js"),["assets/calcite-input-message.f6c5e700.js","assets/dom.6d780cb1.js","assets/icon.b8676875.js","assets/observers.e1b59ee4.js"]),__vitePreload(()=>import("./calcite-switch.07e2de76.js"),["assets/calcite-switch.07e2de76.js","assets/dom.6d780cb1.js","assets/label.5b6684d1.js","assets/form.ec68f019.js","assets/interactive.890c7fc0.js"])])}destroy(){this._userUpdatedInputFieldNames.clear(),this._userUpdatedInputFieldNames=null}getValues(){return null}submit(){return null}render(){const{state:_t}=this.viewModel;return n$1Q("div",{class:this.classes(b$b.base,b$b.widget,b$b.panel)},_t==="ready"?this.renderForm():null)}renderForm(){var Pt,Ft;const _t=(Pt=this.formTemplate)!=null&&Pt.title?n$1Q(n$1P,{key:"title",level:this.headingLevel},this.formTemplate.title):null,Tt=(Ft=this.formTemplate)!=null&&Ft.description?n$1Q("p",{class:b$b.description,key:"description"},this.formTemplate.description):null,Mt=_t||Tt?n$1Q("div",{class:b$b.formHeader},_t,Tt):null;return n$1Q("form",{class:b$b.form,novalidate:!0,onsubmit:this._handleSubmit,onkeydown:this._handleFormKeyDown},Mt,this.renderFields())}renderFields(){const{viewModel:{inputFields:_t}}=this;return _t.filter(Tt=>Tt.visible).map((Tt,Mt)=>F$6(Tt)?this.renderGroup(Tt,Mt):this.renderLabeledField(Tt))}renderGroup(_t,Tt){var Yt;const{description:Mt,inputFields:Pt,label:Ft,state:Dt}=_t,Nt=Pt.filter(rr=>rr.visible),Vt=this.viewModel.findField(this._activeInputName),zt=!(!Vt||Vt.group!==_t),Xt=`${this.id}_group_${Tt}`,Ht=`${this.id}_group-label_${Tt}`,Wt=`${this.id}_group-description_${Tt}`,Qt=Mt?n$1Q("p",{class:this.classes(b$b.groupDescription,b$b.description),id:Wt},Mt):null,Zt=this.groupDisplay==="sequential",Kt=Zt?zt:Dt==="expanded",er=Kt?b$b.collapseIcon:b$b.expandIcon;return n$1Q("fieldset",{"aria-expanded":Kt.toString(),"aria-labelledby":Ht,"aria-describedby":Mt?Wt:"",class:this.classes(b$b.group,Zt?b$b.groupSequential:null,Kt?null:b$b.groupCollapsed,zt?b$b.groupActive:null),"data-group":_t,id:Xt,key:Tt,onclick:this._handleGroupClick},n$1Q("button",{role:Zt?"presentation":void 0,class:b$b.groupHeader,type:"button",tabIndex:Zt?-1:0},n$1Q("div",{class:b$b.groupTitle},n$1Q(n$1P,{class:b$b.groupLabel,id:Ht,level:(Yt=this.formTemplate)!=null&&Yt.title?l$1t(this.headingLevel):this.headingLevel},Ft),Qt),Zt?null:n$1Q("span",{class:this.classes(er,b$b.groupToggleIcon)})),Nt.map(rr=>this.renderLabeledField(rr)))}_getFocusableInput(_t,Tt){const Mt=this.viewModel.allInputFields,Pt=_t==="forward"?Mt:Mt.slice().reverse();let Ft;if(Tt)if(F$6(Tt))Ft=Pt.indexOf(Tt.inputFields[0]);else{let Dt;if(this._isInputFieldInGroup(Tt)&&Tt.group.state==="collapsed"){const{inputFields:Nt}=Tt.group;Dt=_t==="forward"?Nt[Nt.length-1]:Nt[0]}else Dt=Tt;Ft=Pt.indexOf(Dt)+1}else Ft=0;for(let Dt=Ft;Dt<Pt.length;Dt++){const Nt=Pt[Dt];if(Nt.visible)return Nt}return null}renderLabeledField(_t){const{feature:Tt,label:Mt,layer:Pt,type:Ft}=_t;return n$1Q("label",{key:`${Pt.id}-${Tt.uid}-${_t.name}`,class:b$b.label},[Mt,Ft!=="unsupported"?this.renderInputField(_t):this.renderUnsupportedField(_t),this.renderAuxiliaryText(_t)])}renderInputField(_t){const{domain:Tt,name:Mt,type:Pt,value:Ft}=_t,Dt=this.getCommonInputProps(_t);if((Tt==null?void 0:Tt.type)==="coded-value"){if(this._inputFieldHasInputType(_t,"switch")){const{fieldElement:Nt}=_t;if(!(this._switchFieldsWithInitialIncompatibleValue.has(Mt)||Ft==null||Nt.input.onValue!==Ft&&Nt.input.offValue!==Ft))return this.renderSwitchInputField(_t,Dt);this._switchFieldsWithInitialIncompatibleValue.add(Mt)}return _t.inputType==="radio-buttons"?this.renderRadioButtonsInputField(_t,Tt.codedValues.map(({code:Nt,name:Vt})=>({value:Nt,name:Vt})),Dt):this.renderSelectInputField(_t,this._getFieldValueOptions(Mt,Tt),Dt)}return _t.inputType==="datetime-picker"||Pt==="date"?this.renderDateInputField(_t,Dt):Pt==="number"?n$1Q("input",{type:"number",...Dt,value:r$1P(this._activeNumberFieldEdit)&&this._activeNumberFieldEdit.fieldName===_t.name?this._activeNumberFieldEdit.value:`${Dt.value}`}):_t.inputType==="text-area"?n$1Q("textarea",{...Dt}):n$1Q("input",{type:"text",...Dt})}_parseDateTime(_t,Tt,Mt){var Ft;if(Mt){let Dt=DateTime.fromJSDate(this._parseDate(_t,Mt));const Nt=DateTime.fromMillis((Ft=Tt.value)!=null?Ft:Date.now());return Dt=Mt==="date"?Dt.set({hour:Nt.hour,minute:Nt.minute,second:Nt.second}):Dt.set({day:Nt.day,month:Nt.month,year:Nt.year}),Dt.isValid?Dt.toMillis():null}const Pt=DateTime.fromJSDate(this._parseDate(_t));return Pt.isValid?Pt.toMillis():null}renderDateInputField(_t,Tt){var Qt,Zt,Kt,er;const{value:Mt,includeTime:Pt}=_t,{date:Ft,time:Dt}=this._formatDate(0),Nt=`${this.id}-${Tt.key}`,Vt=`${Nt}-date`,zt=`${Nt}-time`,{_activeDateFieldEdit:Xt}=this;let{date:Ht,time:Wt}=this._formatDate(Mt);return(Xt==null?void 0:Xt.fieldName)===_t.name&&(Ht=(Zt=(Qt=Xt.date.input)==null?void 0:Qt.value)!=null?Zt:Ht,Wt=(er=(Kt=Xt.time.input)==null?void 0:Kt.value)!=null?er:Wt),n$1Q("div",{key:`${Tt.key}-date`,class:b$b.dateInputContainer},n$1Q("div",{class:this.classes(b$b.dateInputPart,Pt?null:b$b.loneDateInputPart)},n$1Q("input",{"aria-label":_t.label,"aria-describedby":Vt,type:"text",...Tt,"data-date-part":"date",class:this.classes(Tt.class,b$b.inputDate),value:Ht}),n$1Q("div",{class:b$b.dateFormatHint,id:Vt},Ft)),Pt?n$1Q("div",{class:b$b.dateInputPart,key:"time-input"},n$1Q("input",{"aria-describedby":zt,"aria-label":_t.label,type:"text",...Tt,"data-date-part":"time",class:this.classes(Tt.class,b$b.inputTime),value:Wt}),n$1Q("div",{class:b$b.dateFormatHint,id:zt},Dt)):null)}renderUnsupportedField(_t){const Tt=this.getCommonInputProps(_t);return n$1Q("input",{afterCreate:Tt.afterCreate,afterUpdate:Tt.afterUpdate,class:this.classes(b$b.input,b$b.inputField,b$b.inputDisabled),onfocus:Tt.onfocus,readOnly:!0,tabIndex:Tt.tabIndex,type:"text",value:Tt.value,[y$d]:Tt[y$d]})}renderSelectInputField(_t,Tt,Mt){const{value:Pt}=_t,{messages:Ft,messagesTemplates:Dt}=this,Nt=Tt.map(Wt=>Wt.map(Qt=>n$1Q("calcite-combobox-item",{value:`${Qt.value}`,"text-label":Qt.name,key:`#${Qt.value}`,selected:Pt===Qt.value}))),[Vt,zt]=Nt;this._registerIncompatibleValue(Pt,Tt.flat(),_t,Wt=>{zt.unshift(n$1Q("calcite-combobox-item",{value:`${Wt}`,"text-label":`${Wt}`,key:"incompatible-option",readOnly:!0}))});const Xt=zt.length>0?[n$1Q("calcite-combobox-item-group",{key:"recommended",label:Ft.recommended},Vt),n$1Q("calcite-combobox-item-group",{key:"other",label:Dt.other},zt)]:Vt,Ht=t$2e(_t.fieldElement)||this._inputFieldHasInputType(_t,"combo-box")&&_t.fieldElement.input.showNoValueOption;if(!_t.required&&Ht){const Wt="",Qt=this._inputFieldHasInputType(_t,"combo-box")&&_t.fieldElement.input.noValueOptionLabel||this.messages.empty;Xt.unshift(n$1Q("calcite-combobox-item",{value:Wt,"text-label":this.messages.empty,key:"empty-option"},Qt))}return n$1Q("calcite-combobox",{...Mt,"selection-mode":"single",disabled:Mt.readOnly,allowCustomValues:!1,onCalciteComboboxChange:Wt=>this._handleOptionChange(Wt.target)},Xt)}_registerIncompatibleValue(_t,Tt,Mt,Pt){const Ft=this._fieldToInitialIncompatibleDomainValue,Dt=Ft.has(Mt.name);(Dt||_t!=null&&_t!==""&&!Tt.some(Nt=>Nt.value===_t)||Dt)&&(Dt||Ft.set(Mt.name,_t),Pt==null||Pt(Ft.get(Mt.name)))}renderRadioButtonsInputField(_t,Tt,Mt){const{value:Pt}=_t,Ft=Tt.map(Nt=>this.renderRadioButton({key:Nt.name,label:Nt.name,name:_t.name,value:Nt.value,selected:Nt.value===Pt,props:Mt}));this._registerIncompatibleValue(Pt,Tt,_t);const Dt=t$2e(_t.fieldElement)||this._inputFieldHasInputType(_t,"radio-buttons")&&_t.fieldElement.input.showNoValueOption;if(!_t.required&&Dt){const Nt="",Vt=this._inputFieldHasInputType(_t,"radio-buttons")&&_t.fieldElement.input.noValueOptionLabel||this.messages.empty,zt=Pt===Nt||Pt===null;Ft.unshift(this.renderRadioButton({key:"empty-option",label:Vt,name:_t.name,value:Nt,selected:zt,props:Mt}))}return n$1Q("div",{key:`${Mt.key}-radio`,class:b$b.inputRadioGroup},Ft)}renderSwitchInputField(_t,Tt){const{value:Mt}=_t,Pt=!!this._inputFieldHasInputType(_t,"switch")&&Mt===_t.fieldElement.input.onValue;return n$1Q("calcite-switch",{...Tt,class:b$b.inputSwitch,onCalciteSwitchChange:Ft=>{this._parseValue(Ft.currentTarget)},checked:Pt,disabled:Tt.readOnly})}renderRadioButton({key:_t,name:Tt,value:Mt,selected:Pt,label:Ft,props:Dt}){return n$1Q("label",{key:_t,class:b$b.inputRadioLabel},n$1Q("input",{...Dt,class:b$b.inputRadio,name:Tt,type:"radio",value:Mt,checked:Pt,onchange:this._handleRadioInputChange}),Ft)}renderAuxiliaryText(_t){const Tt=this._userUpdatedInputFieldNames.has(_t.name)&&!_t.valid?_t.errorMessage:r$1P(this.viewModel.contingencyConstraintViolations.get(_t.name))?this.messages.validationErrors.valuesIncompatible:null;return r$1P(Tt)?n$1Q("calcite-input-message",{status:"invalid",icon:!0,active:!0},Tt):_t.description?n$1Q("div",{key:"description",class:b$b.description},_t.description):void 0}getCommonInputProps(_t){const{groupDisplay:Tt}=this,{editable:Mt,group:Pt,hint:Ft,maxLength:Dt,minLength:Nt,name:Vt,required:zt,type:Xt,valid:Ht,value:Wt}=_t,Qt=this._userUpdatedInputFieldNames.has(Vt),Zt=!Mt,Kt=Tt==="all"&&r$1P(Pt)&&Pt.state==="collapsed";return{afterCreate:this._afterInputCreateOrUpdate,afterUpdate:this._afterInputCreateOrUpdate,"aria-invalid":Ht?"false":"true",class:this.classes(b$b.input,b$b.inputField,Zt?b$b.inputDisabled:null,Qt&&!Ht?b$b.inputInvalid:null),key:Vt,label:Vt,minlength:Nt>-1?`${Nt}`:"",maxlength:Dt>-1?`${Dt}`:"",...this._getNumberFieldConstraints(_t),readOnly:Zt,value:Wt==null?"":`${Wt}`,[y$d]:Vt,onfocus:this._handleInputFocus,oninput:this._handleInputInput,onblur:this._handleInputBlur,onkeydown:this._handleInputKeyDown,onmousedown:Xt==="number"?this._handleNumberInputMouseDown:null,placeholder:Xt==="number"||Xt==="text"?Ft:"",required:zt,tabIndex:Kt?-1:0}}_isInputFieldInGroup(_t){return!F$6(_t)&&r$1P(_t.group)}_handleNumberInputMouseDown({target:_t}){_t.focus(),this.scheduleRender()}_getFieldValueOptions(_t,Tt){const Mt=Tt.codedValues.map(({code:Ft,name:Dt})=>({value:Ft,name:Dt})),Pt=this.viewModel.fieldsWithContingentValues.has(_t)?this._getContingentValueOptions(_t):[];if(Pt.length>0){const Ft=new Set(Pt.map(Dt=>Dt.value));return[Pt,Mt.filter(Dt=>!Ft.has(Dt.value))]}return[Mt,[]]}_getContingentValueOptions(_t){const Tt={};for(const Ft of this.viewModel.allInputFields){const{name:Dt,value:Nt}=Ft;!t$2e(Nt)&&Dt!==_t&&this.viewModel.fieldsWithContingentValues.has(Dt)&&(Tt[Dt]=Nt)}const Mt=this.viewModel.joinedContingentValues.slice(),Pt=new Map;for(const Ft of Mt){const Dt=Ft.values[_t];if(t$2e(Dt)||Dt.objectType!=="code"&&Dt.objectType!=="null")continue;const{code:Nt,name:Vt}=Dt.objectType==="null"?{code:"",name:this.messages.empty}:Dt.codedValue;Pt.has(Nt)||Object.entries(Tt).every(([zt,Xt])=>!Ft.values.hasOwnProperty(zt)||this._valueIsValidContingentValue(Xt,Ft.values[zt]))&&Pt.set(Nt,{name:Vt,value:Nt})}return[...Pt.values()]}_getInputFieldFromInput(_t){return this.viewModel.findField(_t.getAttribute(y$d))}_getNumberFieldConstraints(_t){const Tt=r$1l(_t.domain)||re$7(_t.field);return Tt&&Tt.max!==Number.MAX_VALUE&&Tt.min!==Number.MIN_VALUE?Tt:{min:null,max:null}}_afterInputCreateOrUpdate(_t){const{viewModel:Tt}=this,Mt=this._getInputFieldFromInput(_t),Pt=Tt.findField(this._activeInputName),Ft=this._fieldToInitialIncompatibleDomainValue.get(Mt.name)===Mt.value;this._fieldFocusNeeded&&Pt===Mt&&(Mt.inputType!=="radio-buttons"||Ft||_t.checked)&&(this._fieldFocusNeeded=!1,_t.focus())}_handleInputFocus(_t){const Tt=_t.target,Mt=this._getInputFieldFromInput(Tt);this._activeInputName=Mt.name,Mt.type==="date"?this._syncDateFieldEdits(Tt):this._isNumberInputField(Mt)&&this._setUpNumberFieldEdit(Tt)}_isNumberInputField({domain:_t,inputType:Tt="text-box",type:Mt}){return Mt==="number"&&Tt==="text-box"&&(!_t||_t.type!=="coded-value")}_handleInputBlur(_t){var Pt;const Tt=_t.target,Mt=this._getInputFieldFromInput(Tt);if(Mt.type==="date"){const Ft=_t.relatedTarget,Dt=Ft&&this._getInputFieldFromInput(Ft);if(Dt&&Mt.type==="date"&&Dt.type==="date"&&Mt.field===Dt.field){if(Tt.value!==""&&Ft.value===""){const Nt=Ft.getAttribute("data-date-part");Ft.value=this._formatDate((Pt=Mt.value)!=null?Pt:Date.now())[Nt],this._parseDate(Tt.value,Tt.getAttribute("data-date-part"))&&this._commitInputValue(_t.target,!0,!1)}return}}Mt.type==="number"&&r$1P(this._activeNumberFieldEdit)&&(this._activeNumberFieldEdit.input.value=`${Mt.value}`,this._activeNumberFieldEdit=null),this._commitInputValue(Tt),this.scheduleRender()}_commitInputValue(_t,Tt=!1,Mt=!0){var Ft,Dt,Nt,Vt;const Pt=this._getInputFieldFromInput(_t);if(this._activeDateFieldEdit){const{date:zt,time:Xt}=this._activeDateFieldEdit,Ht=this._parseDateTime(_t.value,Pt,zt.active?"date":"time"),Wt=this.viewModel.getValue(Pt.name)!==null,Qt=zt.input&&(Xt.input||!Pt.includeTime),Zt=Ht===null;if(Tt){if(Zt)return;(Qt||!Mt||Wt)&&this._updateDateFieldValue(Pt,Ht)}else{if(((Ft=zt.input)==null?void 0:Ft.value)===""||((Dt=Xt.input)==null?void 0:Dt.value)==="")this._updateDateFieldValue(Pt,null);else if(Qt){const Kt=`${zt.input.value} ${(Vt=(Nt=Xt.input)==null?void 0:Nt.value)!=null?Vt:""}`,er=this._parseDateTime(Kt,Pt);er===null&&Wt||this._updateDateFieldValue(Pt,er)}this._activeDateFieldEdit=null}}else r$1P(this._activeNumberFieldEdit)&&this._isNumberInputField(Pt)&&(this._activeNumberFieldEdit.value=_t.value),this._updateFieldValue(_t)}_handleInputKeyDown(_t){const{key:Tt,altKey:Mt,ctrlKey:Pt,metaKey:Ft}=_t,Dt=this._getInputFieldFromInput(_t.target);if(Tt==="Enter")this._isInputFieldInGroup(Dt)&&Dt.group.state==="collapsed"&&(Dt.group.state="expanded");else{const{type:Nt}=Dt.field,Vt=Nt==="single"||Nt==="double";if((Nt==="integer"||Nt==="small-integer"||Vt)&&(!Mt&&!Pt&&!Ft)&&Tt.length===1){const Xt=Number(Tt),Ht=["-","+"],Wt=["e","."],Qt=Vt?[...Ht,...Wt]:Ht;isNaN(Xt)&&!Qt.includes(Tt)&&_t.preventDefault()}}}_setUpNumberFieldEdit(_t){const Tt=this._getInputFieldFromInput(_t);this._activeNumberFieldEdit={fieldName:Tt.name,input:_t,value:_t.value}}_syncDateFieldEdits(_t){var Dt,Nt;const Tt=this._getInputFieldFromInput(_t);if(Tt.type!=="date")return;const Mt=_t.getAttribute("data-date-part"),Pt=Mt==="date"?{value:_t.value,input:_t,active:!0}:{...(Dt=this._activeDateFieldEdit)==null?void 0:Dt.date,active:!1},Ft=Mt==="time"?{value:_t.value,input:_t,active:!0}:{...(Nt=this._activeDateFieldEdit)==null?void 0:Nt.time,active:!1};this._activeDateFieldEdit={fieldName:Tt.name,date:Pt,time:Ft}}_updateFieldValue(_t){const Tt=_t.getAttribute(y$d);if(this.viewModel.setValue(Tt,this._parseValue(_t)),this._userUpdatedInputFieldNames.add(Tt),this.viewModel.fieldsWithContingentValues.has(Tt)){const Mt=Object.fromEntries(Object.entries(this.getValues()).filter(([Pt,Ft])=>r$1P(Ft)));this.viewModel.validateContingencyConstraints(Mt)}}_updateDateFieldValue(_t,Tt){this.viewModel.setValue(_t.name,Tt),this._userUpdatedInputFieldNames.add(_t.name)}_parseValue(_t){const Tt=this._getInputFieldFromInput(_t),Mt=_t.value;if(this._inputFieldHasInputType(Tt,"switch")&&_t.tagName!=="CALCITE-COMBOBOX")return _t.checked?Tt.fieldElement.input.onValue:Tt.fieldElement.input.offValue;if(Tt.inputType==="radio-buttons"&&_t.type==="radio"&&!_t.checked)return Tt.value;const{type:Pt}=Tt;if(Pt==="number")return Mt?parseFloat(Mt):null;if(Pt==="date"){if(!Mt)return null;const Ft=Number(Mt);if(!isNaN(Ft))return Ft;const Dt=_t.getAttribute("data-date-part"),Nt=this._parseDate(Mt,Dt);if(!Nt)return null;let Vt=DateTime.fromJSDate(Nt);const zt=Tt.domain,Xt=DateTime.now();let Ht=Xt;if(zt&&zt.type==="range"){const Zt=DateTime.fromMillis(zt.maxValue);Xt<Zt&&(Ht=Zt)}const Wt=this.viewModel.getValue(Tt.name),Qt=Wt!=null?DateTime.fromMillis(Wt):Ht;return Vt=Dt==="date"?Vt.set({hour:Qt.hour,minute:Qt.minute,second:Qt.second}):Vt.set({day:Qt.day,month:Qt.month,year:Qt.year}),Vt.toMillis()}return Mt}_handleOptionChange(_t){this._commitInputValue(_t),this.scheduleRender()}_handleGroupClick(_t){var Dt;const Tt=_t.currentTarget["data-group"],Mt=Tt.state==="expanded",Pt=this.groupDisplay==="sequential",Ft=`.${b$b.groupHeader}`;if(!(Mt&&!_t.target.closest(Ft))){if(this._activeInputName=(Dt=this._getFocusableInput("forward",Tt))==null?void 0:Dt.name,Pt){const Nt=_t.target.closest(Ft);if(Mt&&!Nt)return;this.viewModel.inputFields.forEach(Vt=>{F$6(Vt)&&Vt!==Tt&&(Vt.state="collapsed")})}Tt.state=Mt?"collapsed":"expanded",this._fieldFocusNeeded=Pt,this.scheduleRender()}}_handleSubmit(_t){_t.preventDefault()}_handleFormKeyDown(_t){_t.key==="Enter"&&this.viewModel.submit()}_formatDate(_t){if(_t==null)return{date:"",time:""};const Tt=DateTime.fromMillis(_t,{locale:l$2q(),numberingSystem:"latn"});return{date:Tt.toLocaleString({year:"numeric",month:"2-digit",day:"2-digit"}),time:Tt.toFormat(I$7.timePattern)}}_parseDate(_t,Tt){if(_t==null||_t==="")return null;const{timePattern:Mt,datePattern:Pt}=I$7,Ft=Tt?Tt==="date"?Pt:Mt:`${Pt} ${Mt}`,Dt=DateTime.fromFormat(_t,Ft,{locale:l$2q(),numberingSystem:"latn"});return Dt.isValid?Dt.toJSDate():null}_inputFieldHasInputType(_t,Tt){var Mt;return r$1P(_t.fieldElement)&&((Mt=_t.fieldElement.input)==null?void 0:Mt.type)===Tt}_valueIsValidContingentValue(_t,Tt){var Mt;switch(Tt.objectType){case"any":return!0;case"null":return _t==null;case"code":return _t===((Mt=Tt.codedValue)==null?void 0:Mt.code);case"range":return _t>=Tt.minValue&&_t<=Tt.maxValue;default:return Tt.objectType,!1}}};e$2a([o$1d("viewModel.feature")],w$4.prototype,"feature",void 0),e$2a([o$1d("viewModel.formTemplate")],w$4.prototype,"formTemplate",void 0),e$2a([d$25()],w$4.prototype,"groupDisplay",void 0),e$2a([d$25()],w$4.prototype,"headingLevel",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],w$4.prototype,"label",void 0),e$2a([o$1d("viewModel.layer")],w$4.prototype,"layer",void 0),e$2a([d$25(),e$1f("esri/widgets/FeatureForm/t9n/FeatureForm")],w$4.prototype,"messages",void 0),e$2a([d$25(),e$1f("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],w$4.prototype,"messagesTemplates",void 0),e$2a([o$1d("viewModel.spatialReference")],w$4.prototype,"spatialReference",void 0),e$2a([o$1d("viewModel.strict")],w$4.prototype,"strict",void 0),e$2a([d$25(),t$1d(["value-change","submit"])],w$4.prototype,"viewModel",void 0),e$2a([o$1d("viewModel.getValues")],w$4.prototype,"getValues",null),e$2a([o$1d("viewModel.submit")],w$4.prototype,"submit",null),w$4=e$2a([n$2L("esri.widgets.FeatureForm")],w$4);const V$8=w$4;var c$h;const y$c=s$2l.getLogger("esri.widgets.FeatureTemplates.TemplateItem");let h$h=c$h=class extends a$2B(y$1E){constructor(_t){super(_t),this._activeFetchInfo={id:null,request:null},this.description=null,this.label=null,this.layer=null,this.template=null,this.thumbnail=null}initialize(){this.handles.add(l$2e(()=>{const{layer:_t}=this;return[_t&&"renderer"in _t?_t.renderer:null,this.template]},()=>{this._activeFetchInfo.id=null,this._activeFetchInfo.request=null,this._set("thumbnail",null)},h$1w))}clone(){const _t=r$1P(this.thumbnail)?this.thumbnail.cloneNode(!0):null,Tt=new c$h({layer:this.layer,template:this.template});return Tt._set("thumbnail",_t),Tt}static async fetchThumbnail(_t,Tt){var Ft;if(b$a(_t))return y$c.warn("Thumbnails for sublayers of a SubtypeGroupLayer are not yet supported."),null;const Mt=await d$d(_t,Tt);if(t$2e(Mt))return null;const Pt={maxSize:36};return((Ft=_t.renderer)==null?void 0:Ft.type)==="dictionary"&&(Pt.fieldMap=_t.renderer.fieldMap,Pt.feature={attributes:Tt.prototype.attributes}),await S$d(Mt,Pt)}};async function d$d(_t,Tt){const{renderer:Mt}=_t;if(Mt){const Pt=new g$$({attributes:Tt.prototype.attributes}),Ft=await Mt.getSymbolAsync(Pt);if(Ft)return Ft}return f$9(_t)}async function f$9(_t){const{geometryType:Tt}=_t,Mt=Tt==="point"||Tt==="multipoint"?await __vitePreload(()=>Promise.resolve().then(()=>SimpleMarkerSymbol),void 0):Tt==="polyline"?await __vitePreload(()=>Promise.resolve().then(()=>SimpleLineSymbol),void 0):Tt==="polygon"||Tt==="mesh"||Tt==="multipatch"?await __vitePreload(()=>Promise.resolve().then(()=>SimpleFillSymbol),void 0):null;return Mt?new Mt.default:null}function b$a(_t){return _t.type==="subtype-group"}e$2a([d$25({aliasOf:"template.description"})],h$h.prototype,"description",void 0),e$2a([d$25({aliasOf:"template.name"})],h$h.prototype,"label",void 0),e$2a([d$25()],h$h.prototype,"layer",void 0),e$2a([d$25()],h$h.prototype,"template",void 0),e$2a([d$25({readOnly:!0})],h$h.prototype,"thumbnail",void 0),h$h=c$h=e$2a([n$2L("esri.widgets.FeatureTemplates.TemplateItem")],h$h);const j$8=h$h;let p$b=class extends s$1P(y$1E){constructor(_t){super(_t),this.items=null,this.label=null}};e$2a([d$25()],p$b.prototype,"items",void 0),e$2a([d$25()],p$b.prototype,"label",void 0),p$b=e$2a([n$2L("esri.widgets.FeatureTemplates.TemplateItemGroup")],p$b);const c$g=p$b;var m$f;const y$b=({layer:_t})=>({key:_t,label:_t.title}),c$f=({layer:_t})=>({key:_t.geometryType,label:_t.geometryType});let h$g=m$f=class extends a$2B(n$2K.EventedAccessor){constructor(_t){super(_t),this._itemPool=new e$29(j$8),this._groupPool=new e$29(c$g),this.filterFunction=null,this.selectedItem=null}initialize(){this._get("groupBy")||(this.groupBy="layer")}destroy(){this._templateToLayer.clear()}get _templateToLayer(){const _t=new Map;for(const[Tt,Mt]of this._featureTemplatesByLayer)for(const Pt of Mt)_t.set(Pt,Tt);return _t}set groupBy(_t){if(this._set("groupBy",_t),typeof _t!="function")switch(_t){case"none":this._groupByFunction=null;break;case"layer":this._groupByFunction=y$b;break;case"geometry":this._groupByFunction=c$f}else this._groupByFunction=Tt=>this._ensureGroupByObject(_t(Tt))}set layers(_t){const Tt="layers";if(this.handles.remove(Tt),_t){const Mt=()=>this.notifyChange("state");this.handles.add(_t.map(Pt=>f$1p(()=>Pt.loadStatus,Mt)),"layers")}this._set("layers",_t)}get layers(){return this._get("layers")}get state(){const{layers:_t}=this;return _t&&_t.length!==0?_t.some(Tt=>Tt.loadStatus==="loading"||Tt.loadStatus==="not-loaded")?"loading":"ready":"disabled"}get _featureTemplatesByLayer(){if(!this.layers)return new Map;const _t=[];for(const Tt of this.layers){const Mt="templates"in Tt&&Tt.templates?Tt.templates:[],Pt="types"in Tt&&Tt.types?f$8(Tt.types):[];_t.push([Tt,[...Mt,...Pt]])}return new Map(_t)}get numberOfFeatureTemplates(){return Array.from(this._featureTemplatesByLayer.values()).reduce((_t,Tt)=>_t+Tt.length,0)}get items(){if(this.numberOfFeatureTemplates===0)return this._releasePreviousItems(),[];const _t=this._featureTemplatesByLayer,Tt=[],Mt=r$1P(this.filterFunction)?this.filterFunction:m$f._nullFilterFunction;for(const[Dt,Nt]of _t){const{loadStatus:Vt,capabilities:{operations:{supportsEditing:zt,supportsAdd:Xt}}}=Dt;if(Vt==="loaded"&&zt&&Xt)for(const Ht of Nt)Tt.push({layer:Dt,template:Ht,matchesFilter:Mt({label:Ht.name})})}if(t$2e(this._groupByFunction)){const Dt=Tt.filter(({matchesFilter:Nt})=>Nt).map(({template:Nt,layer:Vt})=>this._createItem(Nt,Vt));return this._releasePreviousItems(),Dt}const Pt=new Map;for(const Dt of Tt){const{template:Nt,layer:Vt}=Dt,zt=this._groupByFunction({template:Nt,layer:Vt}),{key:Xt,label:Ht}=r$1P(zt.key)?zt:m$f.nullGroupBy;Pt.has(Xt)||Pt.set(Xt,{label:Ht,templateItemInfos:[]}),Pt.get(Xt).templateItemInfos.push(Dt)}const Ft=[];for(const Dt of Pt.values()){const{label:Nt,templateItemInfos:Vt}=Dt,zt=Vt.filter(({matchesFilter:Ht})=>Ht),Xt=Mt({label:Nt})?Vt:Vt.length>0?zt:[];if(Xt.length>0){const Ht=Xt.map(({template:Wt,layer:Qt})=>this._createItem(Wt,Qt));Ft.push(this._createGroup(Nt,Ht))}}return Ft.length===1&&Ft[0].label===m$f.nullGroupBy.label?(this._releasePreviousItems(),Ft[0].items):(this._releasePreviousItems(),Ft)}refresh(){this.notifyChange("items")}select(_t){const Tt=(_t==null?void 0:_t.clone())||null;this._set("selectedItem",Tt),this.emit("select",{item:Tt,template:(Tt==null?void 0:Tt.template)||null})}_createItem(_t,Tt){const Mt=this._itemPool.acquire();return Mt.set({template:_t,layer:Tt}),Mt}_createGroup(_t,Tt){const Mt=this._groupPool.acquire();return Mt.set("label",_t),Mt.items=Tt,Mt}_releasePreviousItems(){this._destroyItems(this._get("items"))}_destroyItems(_t){!_t||(_t[0]instanceof j$8?_t.forEach(Tt=>this._destroyItem(Tt)):_t.forEach(Tt=>this._destroyGroup(Tt)))}_destroyGroup(_t){_t.items.forEach(Tt=>this._destroyItem(Tt)),_t.items.length=0,this._groupPool.release(_t)}_destroyItem(_t){_t.layer=null,_t.template=null,this._itemPool.release(_t)}_ensureGroupByObject(_t){return typeof _t=="string"?{key:_t,label:_t}:_t}};function f$8(_t){return _t.reduce((Tt,Mt)=>[...Tt,...Mt.templates],[])}h$g.nullGroupBy={key:Symbol(),label:"Other\u200B"},h$g._nullFilterFunction=_t=>!0,e$2a([d$25()],h$g.prototype,"_groupByFunction",void 0),e$2a([d$25({readOnly:!0})],h$g.prototype,"_templateToLayer",null),e$2a([d$25()],h$g.prototype,"filterFunction",void 0),e$2a([d$25()],h$g.prototype,"groupBy",null),e$2a([d$25()],h$g.prototype,"layers",null),e$2a([d$25()],h$g.prototype,"state",null),e$2a([d$25({readOnly:!0})],h$g.prototype,"_featureTemplatesByLayer",null),e$2a([d$25({readOnly:!0})],h$g.prototype,"numberOfFeatureTemplates",null),e$2a([d$25({readOnly:!0})],h$g.prototype,"items",null),e$2a([d$25({readOnly:!0})],h$g.prototype,"selectedItem",void 0),e$2a([d$25()],h$g.prototype,"select",null),h$g=m$f=e$2a([n$2L("esri.widgets.FeatureTemplates.FeatureTemplatesViewModel")],h$g);const d$c=h$g,s$d={base:"esri-item-list",list:"esri-item-list__list",group:"esri-item-list__group",scroller:"esri-item-list__scroller",groupHeader:"esri-item-list__group__header",item:"esri-item-list__list-item",itemSelected:"esri-item-list__list-item--selected",itemContainer:"esri-item-list__list-item-container",itemLabel:"esri-item-list__list-item-label",noMatchesMessage:"esri-item-list__no-matches-message",noItemsMessage:"esri-item-list__no-items-message",filterContainer:"esri-item-list__filter-container",filterContainerSticky:"esri-item-list__filter-container--sticky",filterPlaceholder:"esri-item-list__filter-placeholder",filterInput:"esri-item-list__filter-input",filterPlaceholderText:"esri-item-list__filter-placeholder-text",searchIcon:"esri-icon-search",widget:"esri-widget",input:"esri-input"};function r$d(_t){var er;const{id:Tt,identify:Mt,filterEnabled:Pt=!0,headingLevel:Ft=4,items:Dt,selectedItem:Nt,messages:Vt,filterText:zt="",onFilterChange:Xt,renderIcon:Ht,onItemMouseLeave:Wt,onItemMouseEnter:Qt,onItemSelect:Zt}=_t,Kt=(er=_t.enableListScroll)!=null?er:!0;return n$1Q("div",{key:Tt},Pt?a$g({filterText:zt,messages:Vt,onFilterChange:Xt,id:Tt}):null,o$c({enableListScroll:Kt,identify:Mt,items:Dt,selectedItem:Nt,messages:Vt,filterText:zt,headingLevel:Ft,renderIcon:Ht,onItemMouseLeave:Wt,onItemMouseEnter:Qt,onItemSelect:Zt}))}function l$c(_t){return!!_t.items}function o$c(_t){const{headingLevel:Tt,identify:Mt,items:Pt,renderIcon:Ft,filterText:Dt,onItemMouseLeave:Nt,onItemMouseEnter:Vt,onItemSelect:zt,selectedItem:Xt}=_t,Ht=_t.enableListScroll?s$d.scroller:null;return Pt.length===0?n$1Q("div",{class:s$d.noMatchesMessage,key:"no-matches"},_t.messages.noMatches):n$1Q("div",{class:Ht,key:"item-container"},Pt.map(Wt=>l$c(Wt)?m$e({group:Wt,filterText:Dt,headingLevel:Tt,identify:Mt,onItemMouseLeave:Nt,onItemMouseEnter:Vt,onItemSelect:zt,renderIcon:Ft,selectedItem:Xt}):c$e({item:Wt,identify:Mt,grouped:!0,onItemMouseLeave:Nt,onItemMouseEnter:Vt,onItemSelect:zt,renderIcon:Ft,filterText:Dt,selectedItem:Xt})))}function a$g(_t){const{messages:Tt,filterText:Mt,enableListScroll:Pt}=_t;return n$1Q("div",{key:"filter",class:Pt?null:s$d.filterContainerSticky},n$1Q("calcite-input",{onCalciteInputInput:Ft=>{const Dt=Ft.currentTarget;_t.onFilterChange&&_t.onFilterChange(Dt.value)},placeholder:Tt.filterPlaceholder,value:Mt,type:"search"}))}function c$e(_t){const{identify:Tt,item:Mt,selectedItem:Pt,grouped:Ft,onItemSelect:Dt,onItemMouseEnter:Nt,onItemMouseLeave:Vt,renderIcon:zt}=_t,Xt=`${(Tt==null?void 0:Tt(Mt))||Mt.id}__${Mt.label}`,Ht=Pt?`${(Tt==null?void 0:Tt(Pt))||Pt.id}__${Pt.label}`:"";return n$1Q("calcite-list-item",{"aria-level":Ft?"2":"","data-item":Mt,key:Xt,class:p$2l(s$d.item,Xt===Ht?s$d.itemSelected:""),label:Mt.label,onclick:Wt=>{const Qt=Wt.currentTarget["data-item"];Dt&&Dt(Qt)},onmouseenter:Wt=>{const Qt=Wt.currentTarget["data-item"];Nt&&Nt(Qt)},onkeydown:Wt=>{if(!k$m(Wt.key))return;const Qt=Wt.currentTarget["data-item"];Dt&&Dt(Qt)},onmouseleave:Wt=>{const Qt=Wt.currentTarget["data-item"];Vt&&Vt(Qt)},tabIndex:0},n$1Q("div",{slot:"content-start"},zt&&zt({item:Mt})))}function m$e(_t){const{group:Tt,identify:Mt,onItemMouseLeave:Pt,onItemMouseEnter:Ft,onItemSelect:Dt,filterText:Nt,renderIcon:Vt,selectedItem:zt,headingLevel:Xt}=_t;return n$1Q("div",{class:s$d.group,key:Tt.label},n$1Q(n$1P,{level:Xt,class:s$d.groupHeader},Tt.label),Tt.items.map(Ht=>c$e({item:Ht,identify:Mt,grouped:!0,onItemMouseLeave:Pt,onItemMouseEnter:Ft,onItemSelect:Dt,renderIcon:Vt,filterText:Nt,selectedItem:zt})))}const v$c={base:"esri-feature-templates",loader:"esri-feature-templates__loader",widget:"esri-widget"};function b$9(_t){return"items"in _t}function I$6(_t){return _t.length>0&&b$9(_t[0])}function y$a(_t){const{label:Tt}=_t;return b$9(_t)?Tt:`${Tt}\u2013${_t.layer.id}`}const g$7={filter:!0};let w$3=class extends a$2B(O$l){constructor(_t,Tt){super(_t,Tt),this._iconIntersectionObserver=new IntersectionObserver((Mt,Pt)=>{Mt.forEach(async Ft=>{if(Ft.isIntersecting){const Dt=Ft.target;if(Dt["data-has-icon"])return void Pt.unobserve(Dt);const Nt=Dt["data-item"],{layer:Vt,template:zt}=Nt;Dt["data-has-icon"]=!0;const Xt=await j$8.fetchThumbnail(Vt,zt).catch(()=>(Dt["data-has-icon"]=!1,null));if(t$2e(Xt))return;Dt.appendChild(Xt)}})}),this.enableListScroll=!0,this.filterFunction=null,this.filterText="",this.groupBy=null,this.headingLevel=4,this.label=void 0,this.layers=null,this.messages=null,this.selectedItem=null,this.viewModel=new d$c,this.visibleElements={...g$7},this.renderItemIcon=this.renderItemIcon.bind(this),this._afterItemCreateOrUpdate=this._afterItemCreateOrUpdate.bind(this),this._afterItemRemoved=this._afterItemRemoved.bind(this)}initialize(){const _t=({label:Tt})=>!this.filterText||Tt.toLowerCase().includes(this.filterText.toLowerCase());this.own(l$2e(()=>this.viewModel,(Tt,Mt)=>{Tt&&!Tt.filterFunction&&(this.filterFunction=_t),Mt&&Mt!==Tt&&Mt.filterFunction===_t&&(Mt.filterFunction=null)},h$1w))}destroy(){this._iconIntersectionObserver&&(this._iconIntersectionObserver.disconnect(),this._iconIntersectionObserver=null)}loadDependencies(){return Promise.all([__vitePreload(()=>import("./calcite-icon.5a6624c8.js"),["assets/calcite-icon.5a6624c8.js","assets/icon.b8676875.js","assets/dom.6d780cb1.js","assets/observers.e1b59ee4.js"]),__vitePreload(()=>import("./calcite-input.40b2ffd2.js"),["assets/calcite-input.40b2ffd2.js","assets/dom.6d780cb1.js","assets/label.5b6684d1.js","assets/form.ec68f019.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js","assets/icon.b8676875.js","assets/progress.87fd5fc0.js"]),__vitePreload(()=>import("./calcite-list-item.6c0ecb55.js"),["assets/calcite-list-item.6c0ecb55.js","assets/dom.6d780cb1.js","assets/conditionalSlot.14b9b076.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js"]),__vitePreload(()=>import("./calcite-progress.deb1088e.js"),["assets/calcite-progress.deb1088e.js","assets/progress.87fd5fc0.js"])])}castVisibleElements(_t){return{...g$7,..._t}}select(_t){return null}render(){const{enableListScroll:_t,filterText:Tt,headingLevel:Mt,messages:Pt,viewModel:{items:Ft,selectedItem:Dt,state:Nt}}=this,Vt=this.visibleElements.filter;if(I$6(Ft)){const zt=Ft.find(Xt=>Xt.label===d$c.nullGroupBy.label);zt&&(zt.label=Pt.other)}return n$1Q("div",{class:this.classes(v$c.base,v$c.widget),"aria-label":Pt.widgetLabel},Nt==="loading"?this.renderLoader():Nt==="ready"?n$1Q(r$d,{id:this.id,identify:y$a,filterText:Tt,items:Ft,headingLevel:Mt,messages:{filterPlaceholder:Pt.filterPlaceholder,noItems:Pt.noItems,noMatches:Pt.noMatches},filterEnabled:Vt,onItemSelect:zt=>{this.viewModel.select(zt)},onFilterChange:zt=>{this.filterText=zt,this.viewModel.refresh()},renderIcon:this.renderItemIcon,selectedItem:Dt,enableListScroll:_t}):null)}renderItemIcon({item:_t}){return n$1Q("span",{key:"icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":_t,"data-has-icon":!1})}renderLoader(){return n$1Q("div",{class:v$c.loader,key:"loader"})}_afterItemCreateOrUpdate(_t){var Tt;(Tt=this._iconIntersectionObserver)==null||Tt.observe(_t)}_afterItemRemoved(_t){var Tt;(Tt=this._iconIntersectionObserver)==null||Tt.unobserve(_t)}};e$2a([d$25()],w$3.prototype,"enableListScroll",void 0),e$2a([o$1d("viewModel.filterFunction")],w$3.prototype,"filterFunction",void 0),e$2a([d$25()],w$3.prototype,"filterText",void 0),e$2a([o$1d("viewModel.groupBy")],w$3.prototype,"groupBy",void 0),e$2a([d$25()],w$3.prototype,"headingLevel",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],w$3.prototype,"label",void 0),e$2a([o$1d("viewModel.layers")],w$3.prototype,"layers",void 0),e$2a([d$25(),e$1f("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],w$3.prototype,"messages",void 0),e$2a([o$1d("viewModel.selectedItem")],w$3.prototype,"selectedItem",void 0),e$2a([d$25(),t$1d("select")],w$3.prototype,"viewModel",void 0),e$2a([d$25()],w$3.prototype,"visibleElements",void 0),e$2a([s$23("visibleElements")],w$3.prototype,"castVisibleElements",null),e$2a([o$1d("viewModel.select")],w$3.prototype,"select",null),w$3=e$2a([n$2L("esri.widgets.FeatureTemplates")],w$3);const j$7=w$3;function t$c(_t,Tt,Mt){s$2g(_t,"`"+Tt+"` is deprecated, because it instantiates the deprecated class 'esri.widgets.Editor.CreateWorkflow'",{replacement:Mt,version:"4.23",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-Editor-CreateFeaturesWorkflow.html"})}let n$g=class extends a$18(t$O(b$12)){constructor(_t){super(_t),this.elevationInfo=null,this.graphics=new c$T,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(_t){return this.graphics.add(_t),this}addMany(_t){return this.graphics.addMany(_t),this}removeAll(){return this.graphics.removeAll(),this}remove(_t){this.graphics.remove(_t)}removeMany(_t){this.graphics.removeMany(_t)}on(_t,Tt){return super.on(_t,Tt)}graphicChanged(_t){this.emit("graphic-update",_t)}};e$2a([d$25({type:x$m})],n$g.prototype,"elevationInfo",void 0),e$2a([d$25(a$R(c$T,"graphics"))],n$g.prototype,"graphics",void 0),e$2a([d$25({type:["show","hide"]})],n$g.prototype,"listMode",void 0),e$2a([d$25()],n$g.prototype,"screenSizePerspectiveEnabled",void 0),e$2a([d$25({readOnly:!0})],n$g.prototype,"type",void 0),e$2a([d$25({constructOnly:!0})],n$g.prototype,"internal",void 0),n$g=e$2a([n$2L("esri.layers.GraphicsLayer")],n$g);const h$f=n$g;let t$b=class extends y$1E{constructor(_t){super(_t),this.creationInfo=null,this.viewModel=null}};e$2a([d$25()],t$b.prototype,"creationInfo",void 0),e$2a([d$25()],t$b.prototype,"viewModel",void 0),t$b=e$2a([n$2L("esri.widgets.Editor.CreateFeaturesWorkflowData")],t$b);let n$f=class extends a$2B(n$2K.EventedAccessor){constructor(_t){super(_t),this._indexHistory=[],this._lastStepIndex=-1,this._stepIndex=-1,this._handleKeys={afterCommit:"after-commit",beforeCommit:"before-commit"},this.data=void 0,this.started=!1,this.steps=[],this.type=null}get hasNextStep(){const{steps:_t}=this;return!!(_t&&this._stepIndex<_t.filter(Tt=>!Tt.parent).length-1)}get hasPreviousStep(){return this._stepIndex>0}get stepId(){const{steps:_t}=this,Tt=_t&&_t[this._stepIndex];return Tt&&Tt.id}async cancel(_t={force:!0}){return _t.force!==!1?this._cancel():new Promise((Tt,Mt)=>{this.emit("cancel-request",{controller:{allow:()=>{this._cancel().then(Tt)},deny:()=>Mt(new s$2i("workflow:cancel-denied","Request to cancel workflow was denied."))}})})}async commit(){this.handles.remove(this._handleKeys.beforeCommit),await this.onCommit(this.data),this.handles.remove(this._handleKeys.afterCommit),this.emit("commit"),this.started&&await this.reset()}async go(_t){const{steps:Tt}=this,Mt=Tt.findIndex(Pt=>Pt.id===_t);this._indexHistory.push(this._stepIndex),await this._go(Mt)}async next(){this._indexHistory.push(this._stepIndex),await this._go(this._stepIndex+1)}async previous(_t={cancelCurrentStep:!1}){await this._go(this._indexHistory.pop(),_t.cancelCurrentStep)}async reset(){await this._cancel(!1),await this.start()}async start(){this._set("started",!0);const _t=this._stepIndex===-1?0:this._stepIndex;await this._go(_t)}async _cancel(_t=!0){this.started&&(this._set("started",!1),await this.steps[this._stepIndex].tearDown({cancelled:!0}),this.data&&this.data.viewModel.sketchViewModel.layer.removeAll()),this.handles.remove([this._handleKeys.afterCommit,this._handleKeys.beforeCommit]),this._resetIndexing(_t),_t&&this.emit("cancel")}async _go(_t=-1,Tt=!1){if(!(_t<=-1||_t>=this.steps.length)){if(!this.started)return this._stepIndex=_t,void this._notifyStepProps();this._lastStepIndex>-1&&await this.steps[this._lastStepIndex].tearDown({cancelled:Tt}),await this.steps[_t].setUp(),this._lastStepIndex=_t,this._stepIndex=_t,this._notifyStepProps()}}_resetIndexing(_t=!0){this._stepIndex=-1,this._lastStepIndex=-1,this._indexHistory.length=0,_t&&this._notifyStepProps()}_notifyStepProps(){this.notifyChange("stepId"),this.notifyChange("hasPreviousStep"),this.notifyChange("hasNextStep")}};e$2a([d$25()],n$f.prototype,"data",void 0),e$2a([d$25()],n$f.prototype,"hasNextStep",null),e$2a([d$25()],n$f.prototype,"hasPreviousStep",null),e$2a([d$25()],n$f.prototype,"onCommit",void 0),e$2a([d$25()],n$f.prototype,"started",void 0),e$2a([d$25({readOnly:!0})],n$f.prototype,"stepId",null),e$2a([d$25()],n$f.prototype,"steps",void 0),e$2a([d$25({readOnly:!0})],n$f.prototype,"type",void 0),e$2a([d$25()],n$f.prototype,"commit",null),n$f=e$2a([n$2L("esri.widgets.Editor.Workflow")],n$f);const a$f=n$f;function t$a(_t,Tt){return Tt?"xoffset"in Tt&&Tt.xoffset?Math.max(_t,Math.abs(Tt.xoffset)):"yoffset"in Tt&&Tt.yoffset?Math.max(_t,Math.abs(Tt.yoffset||0)):_t:_t}function e$f(_t){let Tt=0,Mt=0;for(let Pt=0;Pt<_t.length;Pt++){const Ft=_t[Pt].size;typeof Ft=="number"&&(Tt+=Ft,Mt++)}return Tt/Mt}function n$e(_t,Tt){return typeof _t=="number"?_t:_t&&_t.stops&&_t.stops.length?e$f(_t.stops):Tt}function r$c(_t,Tt){if(!Tt)return _t;const Mt=Tt.filter(Nt=>Nt.type==="size").map(Nt=>{const{maxSize:Vt,minSize:zt}=Nt;return(n$e(Vt,_t)+n$e(zt,_t))/2});let Pt=0;const Ft=Mt.length;if(Ft===0)return _t;for(let Nt=0;Nt<Ft;Nt++)Pt+=Mt[Nt];const Dt=Math.floor(Pt/Ft);return Math.max(Dt,_t)}function s$c(_t){const Tt=_t&&_t.renderer,Mt=(_t&&_t.event&&_t.event.pointerType)==="touch"?9:6;if(!Tt)return Mt;const Pt="visualVariables"in Tt?r$c(Mt,Tt.visualVariables):Mt;if(Tt.type==="simple")return t$a(Pt,Tt.symbol);if(Tt.type==="unique-value"){let Ft=Pt;return Tt.uniqueValueInfos.forEach(Dt=>{Ft=t$a(Ft,Dt.symbol)}),Ft}if(Tt.type==="class-breaks"){let Ft=Pt;return Tt.classBreakInfos.forEach(Dt=>{Ft=t$a(Ft,Dt.symbol)}),Ft}return Tt.type==="dot-density"||Tt.type,Pt}let e$e=class extends n$2K.EventedAccessor{constructor(_t){super(_t),this.tracking=!1,this.displaying=!1,this.isDraped=!1}};e$2a([d$25({constructOnly:!0})],e$e.prototype,"graphic",void 0),e$2a([d$25()],e$e.prototype,"tracking",void 0),e$2a([d$25()],e$e.prototype,"displaying",void 0),e$2a([d$25()],e$e.prototype,"isDraped",void 0),e$e=e$2a([n$2L("esri.views.3d.layers.graphics.GraphicState")],e$e);function a$e(_t,Tt,Mt,Pt=new M$K){let Ft;if(Mt.type==="2d")Ft=Tt*Mt.resolution;else if(Mt.type==="3d"){const Ht=Mt.overlayPixelSizeInMapUnits(_t),Wt=Mt.basemapSpatialReference;Ft=r$1P(Wt)&&!Wt.equals(Mt.spatialReference)?z$p(Wt)/z$p(Mt.spatialReference):Tt*Ht}const Dt=_t.x-Ft,Nt=_t.y-Ft,Vt=_t.x+Ft,zt=_t.y+Ft,{spatialReference:Xt}=Mt;return Pt.xmin=Math.min(Dt,Vt),Pt.ymin=Math.min(Nt,zt),Pt.xmax=Math.max(Dt,Vt),Pt.ymax=Math.max(Nt,zt),Pt.spatialReference=Xt,Pt}function o$b(_t,Tt,Mt){const Pt=Mt.toMap(_t);return t$2e(Pt)?!1:a$e(Pt,s$c(),Mt,s$b).intersects(Tt)}const s$b=new M$K;async function n$d(_t,Tt){if(_t.type==="2d")return _t.hitTest(Tt);const Mt=await _t.hitTest(Tt);if(Mt.results.length===0)return Mt;const Pt=Mt.results[0],Ft=r$1P(Pt.distance)?Pt.distance*(1+e$d):Pt.distance,Dt=Mt.results.findIndex(Nt=>Nt.distance>Ft);return Dt!==-1&&(Mt.results=Mt.results.slice(0,Dt)),Mt}const e$d=.05;function r$b(_t){return r$1P(_t)&&_t.type==="graphic"}function s$a(_t){var Tt;return(Tt=_t.find(r$b))!=null?Tt:null}function i$d(_t){return _t.filter(r$b)}function V$7(_t){const Tt=_t.sourceLayer;if(Tt.type!=="feature"||!L$5(Tt.renderer))return{rotation:null,size:null};let Mt=null,Pt=null;const Ft=Tt.renderer.getVisualVariablesForType("rotation").filter(Nt=>(!Nt.axis||Nt.axis==="heading")&&Nt.field&&!Nt.valueExpression&&r$1P(m$Z(Nt,_t)));Ft.length===1&&(Mt=U$4(Ft[0],Tt));const Dt=Tt.renderer.getVisualVariablesForType("size").filter(Nt=>Nt.field&&!Nt.useSymbolValue&&!Nt.valueExpression&&a$1l(Nt)===i$1h.RealWorldSize&&r$1P(y$N(Nt,_t)));return Dt.length===1&&(Pt=T$4(Dt[0],Tt)),{rotation:Mt,size:Pt}}function U$4(_t,Tt){var Vt;const Mt=(_t.axis||"heading")==="heading"&&_t.rotationType==="arithmetic"?-1:1,Pt=_t.field,Ft=Tt.fields&&Tt.fields.filter(zt=>zt.name===Pt),Dt=Ft&&Ft.length===1?Ft[0].type:"double",Nt={initial:0,current:0};return{field:Pt,fieldType:Dt,getDefault:()=>Promise.resolve(0),getValue:zt=>(Nt.current=Nt.initial-Mt*zt,x$7((Nt.current+360)%360,Dt)),initValue:zt=>{Nt.initial=zt!=null?zt:Nt.current,Nt.current=0},isUpdatingInteractively:!1,rotationType:(Vt=_t.rotationType)!=null?Vt:"geographic"}}function z$4(_t,Tt){switch(Tt){case"width":return _t[0];case"depth":return _t[1];case"height":return _t[2];default:return _t[2]||_t[1]||_t[0]}}async function F$5(_t,Tt,Mt){if(t$2e(Tt))return 0;const{symbol:Pt}=a$1k(Tt);if(t$2e(Pt)||Pt.type==="web-style"||Pt.type==="cim")return 0;const Ft=Pt.symbolLayers.getItemAt(0);if(!Ft)return 0;switch(Ft.type){case"icon":{const{computeIconLayerResourceSize:Dt}=await __vitePreload(()=>import("./symbolLayerUtils.d43bd90b.js"),[]);return Ft.size||Math.min(J$3.icon,(await Dt(Ft,J$3.icon))[0])||J$3.icon}case"text":return Ft.size||J$3.text;case"line":return Ft.size||J$3.line;case"object":{const{computeObjectLayerResourceSize:Dt}=await __vitePreload(()=>import("./symbolLayerUtils.d43bd90b.js"),[]);return z$4(await Dt(Ft,_t.scale/J$3.viewScaleSizeFactor),Mt)}case"path":return(Ft.width!=null?Ft.width:Ft.height)||_t.scale/J$3.viewScaleSizeFactor;case"extrude":return Ft.size||_t.scale/J$3.viewScaleSizeFactor;default:return 0}}function T$4(_t,Tt){var Xt;const Mt=_t.field,Pt=_t.axis,Ft=Tt.fields&&Tt.fields.filter(Ht=>Ht.name===Mt),Dt=Ft&&Ft.length===1?Ft[0].type:"double",Nt={updating:!1,initial:0,current:0},Vt=(Xt=m$_[_t.valueUnit])!=null?Xt:1;let zt;return zt=_t.valueRepresentation==="area"?Ht=>(Ht*Vt/2)**2*Math.PI:_t.valueRepresentation==="radius"||_t.valueRepresentation==="distance"?Ht=>Ht*Vt/2:Ht=>Ht*Vt,{field:Mt,fieldType:Dt,getDefault:async(Ht,Wt)=>x$7(zt(await F$5(Wt,Ht,Pt)),Dt),getValue:(Ht,Wt)=>(Nt.initial||(Nt.initial=Wt.pixelSizeAt(Wt.center)),Nt.current=Nt.initial*Ht,x$7(Nt.current,Dt)),initValue:Ht=>{Nt.initial=Ht!=null?Ht:Nt.current,Nt.current=0},isUpdatingInteractively:!1,displayUnit:Y(_t.valueUnit),axis:_t.axis}}function x$7(_t,Tt){switch(Tt){case"small-integer":case"integer":case"long":return Math.round(_t);case"double":case"single":return _t;default:return 0}}function L$5(_t){switch(_t.type){case"class-breaks":case"simple":case"unique-value":case"dot-density":case"dictionary":case"pie-chart":return!0;default:return!1}}async function M$9(_t,Tt){const Mt=await x$g(_t,{useSourceLayer:!0,ignoreGraphicSymbol:!0,webStyleCache:Tt}),Pt=m$U(_t.symbol,Mt);r$1P(Pt)&&(_t.symbol=Mt)}function R$4(_t){if(_t==="mesh"||_t==="multipatch")throw new Error("Mesh and Multipatch not supported");return _t}async function E$7(_t,Tt,Mt,Pt){await k$2(_t,Tt,Pt);const Ft=_t.on("create",async Dt=>{if(Dt.state==="cancel")return k$2(_t,Tt,Pt);if(Dt.state==="complete"){const Nt=Dt.graphic;Nt.sourceLayer||(Nt.sourceLayer=Tt.layer),Nt.attributes||(Nt.attributes={...Tt.template.prototype.attributes}),await M$9(Nt,Pt),Mt(Nt)}});return{remove:()=>{Ft.remove(),_t.cancel()}}}async function k$2(_t,Tt,Mt){const Pt=Tt.layer,Ft={...Tt.template.prototype.attributes};await A$5(_t,Pt,Ft,Mt);const Dt={graphicProperties:{attributes:Ft,sourceLayer:Pt},hasZ:Pt.capabilities.data.supportsZ};return _t.layer.elevationInfo=Pt.elevationInfo,_t.create(R$4(Pt.geometryType),Dt)}async function A$5(_t,Tt,Mt,Pt){const Ft=new g$$({sourceLayer:Tt,attributes:Mt}),{rotation:Dt,size:Nt}=V$7(Ft);let Vt=await x$g(Ft,{useSourceLayer:!0,webStyleCache:Pt}),zt=!1;for(const Xt of[Nt,Dt])t$2e(Xt)||Mt[Xt.field]==null&&(Mt[Xt.field]=await Xt.getDefault(Vt,_t.view),zt=!0);switch(zt&&(Vt=await x$g(Ft,{useSourceLayer:!0,webStyleCache:Pt})),Vt==null?void 0:Vt.type){case"simple-fill":case"polygon-3d":_t.polygonSymbol=Vt;break;case"simple-line":case"line-3d":_t.polylineSymbol=Vt;break;case"simple-marker":case"picture-marker":case"point-3d":case"cim":_t.pointSymbol=Vt}G$2(_t.tooltipOptions,Nt,Dt)}function G$2(_t,Tt,Mt){var Pt;r$1P(Tt)||r$1P(Mt)?_t.visualVariables={size:r$1P(Tt)?{unit:Tt.displayUnit,axis:Tt.axis,valueType:Tt.fieldType}:null,rotation:r$1P(Mt)?{valueType:Mt.fieldType,rotationType:(Pt=Mt.rotationType)!=null?Pt:"geographic"}:null}:_t.visualVariables=null}function P$3(_t,Tt){return _t&&_t.find(Mt=>Mt.layer===Tt)}async function q$2(_t,Tt,Mt,Pt){if(_t.length===0)return[];const{updatable:Ft,graphicsByLayer:Dt}=await Mt.async(async()=>{const{results:Nt}=await y$1M(n$d(Tt,Mt),Pt),Vt=new Map,zt=({layer:Ht})=>{const Wt=Vt.get(Ht);if(!Wt){const Qt=new Array;return Vt.set(Ht,Qt),Qt}return Wt};i$d(Nt).forEach(({graphic:Ht})=>zt(Ht).push(Ht));const Xt=_t.filter(({supports:Ht,layer:Wt})=>Ht.includes("update")&&Vt.has(Wt));return Xt.length!==0&&Mt.stopPropagation(),{updatable:Xt,graphicsByLayer:Vt}});return y$1M(E$K(Ft.map(async({layer:Nt})=>{const{objectIdField:Vt,displayField:zt}=Nt,Xt=[Vt];Nt.fieldsIndex.has(zt)&&Xt.push(zt);const Ht=Dt.get(Nt);if(Ht.some(Wt=>Xt.some(Qt=>!(Qt in Wt.attributes)))){const Wt=Nt.createQuery();return Wt.outFields=Xt,Wt.returnGeometry=!1,Wt.objectIds=Ht.map(Qt=>Qt.getObjectId()),Nt.queryFeatures(Wt,{signal:Pt}).then(({features:Qt})=>Qt)}return Ht})),Pt)}async function C$4(_t,Tt,Mt,Pt){if(_t.length===0)return[];let Ft=null;const Dt=await Mt.async(async()=>{const{results:Nt}=await y$1M(Tt.hitTest(Mt),Pt);if(Nt.length===0)return[];const Vt=new Set;Ft=i$d(Nt),Ft.forEach(({graphic:Xt})=>Xt&&Vt.add(Xt.layer));const zt=_t.items.filter(({layer:Xt,supports:Ht})=>Ht.includes("update")&&Vt.has(Xt));return zt.length>0&&Mt.stopPropagation(),zt});return y$1M(E$K(Dt.map(({layer:Nt})=>{const{objectIdField:Vt,displayField:zt}=Nt,Xt=[Vt];Nt.fieldsIndex.has(zt)&&Xt.push(zt);const Ht=Nt.createQuery();Ht.outFields=Xt,Ht.returnGeometry=!1;const Wt="renderer"in Nt?s$c({renderer:Nt.renderer,event:Mt}):0;return Ht.geometry=a$e(Mt.mapPoint,Wt,Tt),Ht.outSpatialReference=Tt.spatialReference,Nt.queryFeatures(Ht,{signal:Pt}).then(({features:Qt})=>(Ft.forEach(({graphic:Zt})=>{Zt.layer===Nt&&(Qt.find(Kt=>Kt.attributes[Vt]===Zt.attributes[Nt.objectIdField])||Qt.push(Zt))}),Qt))})),Pt)}async function D$3(_t,Tt,Mt,Pt){switch(Tt.type){case"3d":return q$2(_t,Tt,Mt,Pt);case"2d":return C$4(_t,Tt,Mt,Pt)}}async function O$6(_t,Tt,Mt){const Pt=_t.layer,Ft=Pt.createQuery();return Ft.objectIds=[_t.getAttribute(Pt.objectIdField)],Ft.outFields=["*"],Ft.outSpatialReference=Tt.spatialReference,Ft.returnM=Pt.capabilities.data.supportsM,Ft.returnZ=Pt.capabilities.data.supportsZ,(await Pt.queryFeatures(Ft,{signal:Mt})).features[0]}async function Z$1(_t,Tt,Mt,Pt,Ft){let Dt=!1;const{rotation:Nt,size:Vt}=Pt;[Nt,Vt].forEach(async Xt=>{if(t$2e(Xt))return;const Ht=Tt.attributes[Xt.field];if(r$1P(Ht))Xt.initValue(Ht);else{const Wt=await Xt.getDefault(Tt.symbol,_t.view);Xt.initValue(Wt),Tt.setAttribute(Xt.field,Wt),Dt=!0}}),Dt&&await M$9(Tt,Ft);const zt={multipleSelectionEnabled:!1};return Mt.geometryType==="point"&&(zt.enableRotation=r$1P(Nt),zt.enableScaling=r$1P(Vt)),G$2(_t.tooltipOptions,Vt,Nt),_t.layer.elevationInfo=Mt.elevationInfo,_t.update(Tt,zt)}function Q$1(_t){return!_t||_t.type!=="rotate-start"&&_t.type!=="rotate"&&_t.type!=="rotate-stop"?null:_t}function B$2(_t){return!_t||_t.type!=="scale-start"&&_t.type!=="scale"&&_t.type!=="scale-stop"?null:_t}async function W(_t,Tt,Mt,Pt,Ft){var Xt;if(!r$1P(Tt.geometry)||((Xt=Tt.geometry)==null?void 0:Xt.type)!=="point")return;const Dt=Pt.rotation,Nt=Q$1(Mt.toolEventInfo);if(r$1P(Dt)&&r$1P(Nt))if(Nt.type==="rotate-stop")Dt.isUpdatingInteractively=!1,Dt.initValue();else{Dt.isUpdatingInteractively=!0;const{field:Ht,getValue:Wt}=Dt;Tt.attributes[Ht]=Wt(Nt.angle,_t)}const Vt=Pt.size,zt=B$2(Mt.toolEventInfo);if(r$1P(Vt)&&r$1P(zt))if(zt.type==="scale-stop")Vt.isUpdatingInteractively=!1,Vt.initValue();else{Vt.isUpdatingInteractively=!0;const{field:Ht,getValue:Wt}=Vt;Tt.attributes[Ht]=Wt(zt.xScale,_t)}await M$9(Tt,Ft)}async function H$2(_t,Tt,Mt,Pt,Ft,Dt){const Nt=_t.clone();await M$9(Nt,Dt),Pt.map.add(Mt.layer),Mt.layer.add(Nt);const Vt=_t.sourceLayer,zt=Pt.whenLayerView(Vt),Xt=()=>{const nr=_t.layer,ar=_t.attributes[nr.objectIdField];return zt.then(or=>or.setVisibility(ar,!1),()=>{}),{remove(){zt.then(or=>or.setVisibility(ar,!0),()=>{})}}};let Ht=null,Wt=null;if(Pt.type==="3d"){const nr=new e$e({graphic:Nt});Ht=r$1M([Pt.trackGraphicState(nr),l$2e(()=>nr.displaying,ar=>{Wt=ar?Xt():a$31(Wt)},h$1w)])}else Wt=Xt();await Z$1(Mt,Nt,Vt,Tt,Dt);let Qt=null;zt.then(nr=>Qt=nr,()=>{});const Zt=Tt.size,Kt=Tt.rotation,er=l$2e(()=>_t.attributes,async nr=>{let ar=!1;for(const or in nr){const ur=nr[or];ur!==Nt.attributes[or]&&(Nt.setAttribute(or,ur),r$1P(Zt)&&!Zt.isUpdatingInteractively&&Zt.field===or&&Zt.initValue(ur),r$1P(Kt)&&!Kt.isUpdatingInteractively&&Kt.field===or&&Kt.initValue(ur),(t$2e(Qt)||Qt.requiredFields.includes(or))&&(ar=!0))}ar&&await M$9(Nt,Dt)}),Yt=Mt.on("update",async nr=>{const ar=nr.graphics[0];if(nr.state==="complete")return Z$1(Mt,ar,Vt,Tt,Dt);await W(Pt,ar,nr,Tt,Dt),Ft(ar.clone())}),rr=Mt.on(["undo","redo"],async nr=>{Ft(nr.graphics[0].clone())}),ir=()=>{};return{interactive:{remove(){rr.remove(),Yt.remove(),Mt.cancel(),er&&er.remove(),this.remove=ir}},visual:{remove(){a$31(Wt),Pt.whenLayerView(Vt).then(nr=>j$U(()=>!nr.updating)).then(()=>{a$31(Ht),Mt.layer.remove(Nt),this.remove=ir})}}}}const J$3={icon:e$1y(24),text:e$1y(12),line:e$1y(1),viewScaleSizeFactor:100};function K(_t,Tt,Mt){let Pt=!1;return _t.filter(Ft=>!!Pt||(Pt=Ft===Tt,Pt)).map(Ft=>Mt[Ft]())}function N$5(_t){if(_t.length!==1)return null;const Tt=_t[0];if("items"in Tt){const Mt=Tt;return Mt.items.length===1?Mt.items[0]:null}return Tt}function X$1(_t,Tt){if(_t.viewModel.refreshCreationTemplates(),Tt[0].id==="awaiting-feature-creation-info"){const Mt=N$5(_t.viewModel.featureTemplatesViewModel.items);r$1P(Mt)&&(_t.creationInfo={layer:Mt.layer,template:Mt.template},Tt.shift())}return Tt}function Y(_t){switch(_t){case"unknown":case"decimal-degrees":return null;default:return _t}}var V$6;let F$4=V$6=class extends a$f{constructor(_t){super(_t),this.type="create-features",this.createFeatureState="create-new",this.featureFormHandle=null,this.visualVariableAttributes={rotation:null,size:null},this.highlightHandles=new Map,this.preventDefaultActionOnCancel=!1}get numPendingFeatures(){return this.data.viewModel.sketchViewModel.layer.graphics.length}get pendingFeatures(){return this.data.viewModel.sketchViewModel.layer.graphics}async updatePendingFeature(_t,Tt){return this.preventDefaultActionOnCancel=!0,this.data.viewModel.sketchViewModel.cancel(),F$z(this.lastActiveGraphics,_t),this._startUpdating(_t,Tt)}static create(_t,Tt,Mt,Pt){const Ft=new V$6({data:new t$b({creationInfo:Tt,viewModel:_t}),onCommit:async Dt=>{await Pt(Dt.creationInfo.layer,{addFeatures:Dt.viewModel.sketchViewModel.layer.graphics.toArray()})}});return Ft._set("steps",this._createWorkflowSteps(Ft,Mt)),Ft}_fadeExistingFeatures(_t){if("effect"in _t){const Mt=_t.effect;return _t.effect="saturate(0.6) opacity(0.8)",n$2W(()=>_t.effect=Mt)}const Tt=_t.opacity;return _t.opacity=.7,n$2W(()=>_t.opacity=Tt)}_highlight(_t){const Tt=this.data.viewModel.view;Tt.type==="3d"&&this.highlightHandles.set(_t,Tt.highlight(_t))}_removeHighlight(_t){a$31(this.highlightHandles.get(_t)),this.highlightHandles.delete(_t)}async _startCreating(_t){return this.createFeatureState="create-new",k$2(this.data.viewModel.sketchViewModel,this.data.creationInfo,_t)}async _startUpdating(_t,Tt){var Vt;const Mt=this.data.viewModel,Pt=Mt.sketchViewModel,Ft=this.data.creationInfo.layer,Dt=(Vt=P$3(Mt.layerInfos,Ft))==null?void 0:Vt.formTemplate,Nt=Mt.view.spatialReference;return Mt.featureFormViewModel.set({feature:_t,formTemplate:Dt,spatialReference:Nt}),a$31(this.featureFormHandle),this.featureFormHandle=Mt.featureFormViewModel.on("value-change",async()=>{_t.attributes=Mt.featureFormViewModel.getValues(),await M$9(_t,Tt)}),this._removeHighlight(_t),this.createFeatureState="update-pending",this.visualVariableAttributes=V$7(_t),Z$1(Pt,_t,Ft,this.visualVariableAttributes,Tt)}static _createWorkflowSteps(_t,Tt="awaiting-feature-creation-info"){const{data:Mt,handles:Pt}=_t;let Ft=null,Dt=!0;const Nt=new Map,Vt=K(["awaiting-feature-creation-info","creating-features"],Tt,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(){Mt.creationInfo=null,Pt.add(Mt.viewModel.featureTemplatesViewModel.on("select",({item:zt})=>{Mt.creationInfo={layer:zt.layer,template:zt.template},Mt.viewModel.activeWorkflow.next()}),this.id)},async tearDown(){Pt.remove(this.id)}}),"creating-features":()=>({id:"creating-features",async setUp(){const zt=Mt.viewModel.view,Xt=Mt.viewModel.sketchViewModel;Dt=Xt.updateOnGraphicClick,Xt.updateOnGraphicClick=!1,_t.lastActiveGraphics=[],_t.featureFormHandle=a$31(_t.featureFormHandle),_t.visualVariableAttributes={rotation:null,size:null};const Ht=zt.type==="2d"?_t._fadeExistingFeatures(Mt.creationInfo.layer):null,Wt=Xt.on("create",async ir=>{if(ir.state==="cancel"){if(_t.preventDefaultActionOnCancel)return void(_t.preventDefaultActionOnCancel=!1);if(_t.lastActiveGraphics.length<1)return _t._startCreating(Nt);const nr=_t.lastActiveGraphics.pop();return _t._startUpdating(nr,Nt)}if(ir.state==="complete")return _t._startUpdating(ir.graphic,Nt)}),Qt=Xt.on("update",async ir=>{const nr=ir.graphics[0];if(ir.state==="complete")return nr!==Ft&&(_t.lastActiveGraphics.push(nr),_t._highlight(nr)),Ft=null,ir.aborted&&_t.preventDefaultActionOnCancel?void(_t.preventDefaultActionOnCancel=!1):_t._startCreating(Nt);ir.state==="start"&&_t._removeHighlight(nr),await W(zt,nr,ir,_t.visualVariableAttributes,Nt);const ar=nr.attributes;if(r$1P(_t.visualVariableAttributes.rotation)){const{field:or}=_t.visualVariableAttributes.rotation;Mt.viewModel.featureFormViewModel.setValue(or,ar[or])}if(r$1P(_t.visualVariableAttributes.size)){const{field:or}=_t.visualVariableAttributes.size;Mt.viewModel.featureFormViewModel.setValue(or,ar[or])}}),Zt=Xt.on("delete",async ir=>{const nr=ir.graphics[0];F$z(_t.lastActiveGraphics,nr),Ft=nr});let Kt=null;const er=l$2e(()=>{var nr;const ir=Xt.snappingOptions.featureSources.find(ar=>ar.layer===Mt.creationInfo.layer);return{hasFeatureLayerSource:!!ir,enabled:(nr=ir==null?void 0:ir.enabled)!=null?nr:!1}},({hasFeatureLayerSource:ir,enabled:nr})=>{const ar=Xt.snappingOptions.featureSources;ir?(t$2e(Kt)&&(Kt=new p$j({layer:Xt.layer,enabled:nr}),ar.add(Kt)),Kt.enabled=nr):(r$1P(Kt)&&ar.remove(Kt),Kt=l$2H(Kt))},w$X),Yt=zt.on("immediate-click",async ir=>{const{results:nr}=await zt.hitTest(ir,{include:Xt.layer}),ar=nr.find(or=>or.type==="graphic");if(ar){const or=ar.graphic;if(Xt.activeTool==="transform"||Xt.activeTool==="reshape"){if(Xt.updateGraphics.getItemAt(0)===or)return;await _t.updatePendingFeature(or,Nt)}}});await _t._startCreating(Nt);const rr={remove:()=>{a$31(_t.featureFormHandle),Wt.remove(),Qt.remove(),Zt.remove(),er.remove(),r$1P(Kt)&&Xt.snappingOptions.featureSources.remove(Kt),Kt=l$2H(Kt),Xt.cancel(),Yt.remove(),a$31(Ht)}};Pt.add(rr,this.id)},async tearDown(zt){zt.cancelled&&Mt.viewModel.sketchViewModel.layer.removeAll(),Pt.remove(this.id),Mt.viewModel.sketchViewModel.updateOnGraphicClick=Dt}})});return X$1(Mt,Vt)}};F$4=V$6=e$2a([n$2L("esri.widgets.Editor.CreateFeaturesWorkflow")],F$4);const A$4=F$4;let e$c=class extends y$1E{constructor(_t){super(_t),this.creationInfo=null,this.edits=null,this.viewModel=null}};e$2a([d$25()],e$c.prototype,"creationInfo",void 0),e$2a([d$25()],e$c.prototype,"edits",void 0),e$2a([d$25()],e$c.prototype,"viewModel",void 0),e$c=e$2a([n$2L("esri.widgets.Editor.CreateWorkflowData")],e$c);const c$d=e$c;function a$d(_t){return t$2e(_t)?null:JSON.stringify(_t)}let u$b=class extends a$2B(y$1E){constructor(_t){super(_t),this._baselineAttributesJSON=null,this._baselineGeometryJSON=null,this.feature=null}get attributesModified(){const{_baselineAttributesJSON:_t,feature:Tt}=this;return!(!Tt||_t===a$d(Tt.attributes))}get geometryModified(){const{_baselineGeometryJSON:_t,feature:Tt}=this;return!(!Tt||_t===a$d(Tt.geometry))}get modified(){return this.attributesModified||this.geometryModified}trackChanges(){this.feature&&(this._baselineAttributesJSON=a$d(this.feature.attributes),this._baselineGeometryJSON=a$d(this.feature.geometry),this.notifyChange("attributesModified"),this.notifyChange("geometryModified"))}updateAttributes(_t){this.feature.attributes=_t,this.notifyChange("attributesModified")}updateGeometry(_t){this.feature.geometry=_t,this.notifyChange("geometryModified")}};e$2a([d$25()],u$b.prototype,"attributesModified",null),e$2a([d$25()],u$b.prototype,"feature",void 0),e$2a([d$25()],u$b.prototype,"geometryModified",null),e$2a([d$25()],u$b.prototype,"modified",null),u$b=e$2a([n$2L("esri.widgets.Editor.Edits")],u$b);var p$a;let m$d=p$a=class extends a$f{constructor(_t){super(_t),this.type="create"}static create(_t,Tt,Mt){const Pt=new p$a({data:new c$d({edits:new u$b,viewModel:_t}),onCommit:async Ft=>{await Mt(Ft.creationInfo.layer,{addFeatures:[Ft.edits.feature]})}});return Pt._set("steps",this._createWorkflowSteps(Pt,Tt)),Pt}static _createWorkflowSteps(_t,Tt="awaiting-feature-creation-info"){const{data:Mt,handles:Pt}=_t,Ft=new Map,Dt=K(["awaiting-feature-creation-info","awaiting-feature-to-create","editing-new-feature"],Tt,{"awaiting-feature-creation-info":()=>({id:"awaiting-feature-creation-info",async setUp(){Mt.creationInfo=null,Mt.edits.feature=null,Mt.viewModel.featureTemplatesViewModel.select(null),Pt.add(Mt.viewModel.featureTemplatesViewModel.on("select",({item:Nt})=>{Mt.creationInfo={layer:Nt.layer,template:Nt.template},Mt.viewModel.activeWorkflow.next()}),this.id)},async tearDown(){Pt.remove(this.id)}}),"awaiting-feature-to-create":()=>({id:"awaiting-feature-to-create",async setUp(){Pt.add(await E$7(Mt.viewModel.sketchViewModel,Mt.creationInfo,Nt=>{Mt.edits.feature=Nt,Mt.viewModel.activeWorkflow.next()},Ft),this.id)},async tearDown(){Pt.remove(this.id)}}),"editing-new-feature":()=>({id:"editing-new-feature",async setUp(){var Kt;const Nt=Mt.edits.feature,Vt=Nt.sourceLayer,zt=Mt.viewModel,Xt=zt.sketchViewModel,Ht=(Kt=P$3(zt.layerInfos,Vt))==null?void 0:Kt.formTemplate,{spatialReference:Wt}=zt.view;zt.featureFormViewModel.set({feature:Nt,formTemplate:Ht,spatialReference:Wt}),Xt.allowDeleteKey=!1;const Qt=V$7(Nt);await Z$1(Xt,Nt,Vt,Qt,Ft);const Zt=Xt.on("update",async er=>{const Yt=er.graphics[0];if(er.state==="complete")return Z$1(Xt,Yt,Vt,Qt,Ft);await W(Xt.view,Yt,er,Qt,Ft);const rr=Yt.attributes;if(r$1P(Qt.rotation)){const{field:ir}=Qt.rotation;zt.featureFormViewModel.setValue(ir,rr[ir])}if(r$1P(Qt.size)){const{field:ir}=Qt.size;zt.featureFormViewModel.setValue(ir,rr[ir])}});Pt.add([Mt.viewModel.featureFormViewModel.on("value-change",async()=>{Mt.edits.updateAttributes(Mt.viewModel.featureFormViewModel.getValues()),Nt.attributes=Mt.edits.feature.attributes,Xt.view.type==="3d"&&await M$9(Nt,Ft)}),Zt],this.id)},async tearDown(Nt){Nt.cancelled&&Mt.viewModel.sketchViewModel.layer.removeAll(),Pt.remove(this.id)}})});return X$1(Mt,Dt)}};m$d=p$a=e$2a([n$2L("esri.widgets.Editor.CreateWorkflow")],m$d);const v$b=m$d;let s$9=class extends y$1E{constructor(_t){super(_t),this.candidates=null,this.editableItem=null,this.edits=null,this.viewModel=null}};e$2a([d$25()],s$9.prototype,"candidates",void 0),e$2a([d$25()],s$9.prototype,"editableItem",void 0),e$2a([d$25()],s$9.prototype,"edits",void 0),e$2a([d$25()],s$9.prototype,"viewModel",void 0),s$9=e$2a([n$2L("esri.widgets.Editor.UpdateWorkflowData")],s$9);const i$c=s$9;var y$9;const M$8="candidate-highlight";let b$8=y$9=class extends a$f{constructor(_t){super(_t),this.type="update"}static create(_t,Tt,Mt){const Pt=new y$9({data:new i$c({edits:new u$b,viewModel:_t}),onCommit:async Ft=>{const Dt=Ft.edits.feature,Nt=Dt.sourceLayer,Vt=Dt.clone();if(!Ft.edits.attributesModified){const{objectIdField:zt}=Nt;Vt.attributes={[zt]:Dt.getAttribute(zt)}}Ft.edits.geometryModified||(Vt.geometry=null),await Mt(Nt,{updateFeatures:[Vt]})}});return Pt._set("steps",this._createWorkflowSteps(Pt,Tt)),Pt}highlight(_t){const{data:{viewModel:{view:Tt}}}=this,Mt=_t&&Tt.allLayerViews.items.find(({layer:Pt})=>Pt===_t.layer);e$E(Mt)&&this.handles.add(Mt.highlight(_t),M$8)}unhighlight(){this.handles.remove(M$8)}static _createWorkflowSteps(_t,Tt="awaiting-feature-to-update"){const{data:Mt,handles:Pt}=_t,Ft=new Map;return K(["awaiting-feature-to-update","awaiting-update-feature-candidate","editing-existing-feature","adding-attachment","editing-attachment"],Tt,{"awaiting-feature-to-update":()=>({id:"awaiting-feature-to-update",async setUp(){const{spinnerViewModel:Dt,view:Nt}=Mt.viewModel;let Vt=null;Pt.add({remove(){Vt&&(Vt.abort(),Vt=null)}},this.id),Mt.edits.feature=null;const zt=Nt.on("immediate-click",Xt=>{Dt.location=Xt.mapPoint,Dt.visible=!0,Vt&&Vt.abort();const{editableItems:Ht}=Mt.viewModel;Vt=new AbortController,new Promise((Wt,Qt)=>{v$16(Vt.signal,()=>Qt(m$2b())),Wt(D$3(Ht,Nt,Xt,Vt.signal))}).then(Wt=>{if(f$1M(Vt),Mt.candidates=Wt.reduce((Qt,Zt)=>Zt.error?Qt:[...Qt,...Zt.value],[]),Mt.viewModel.spinnerViewModel.visible=Mt.candidates.length===1,Mt.candidates.length!==0)if(Mt.candidates.length===1){const Qt=Mt.candidates[0];Mt.edits.feature=Qt,Mt.viewModel.activeWorkflow.go("editing-existing-feature").catch(()=>{}).then(()=>Mt.viewModel.spinnerViewModel.visible=!1)}else Mt.viewModel.activeWorkflow.next()})});Nt.focus(),Pt.add(zt,this.id)},async tearDown(){Pt.remove(this.id)}}),"awaiting-update-feature-candidate":()=>({id:"awaiting-update-feature-candidate",async setUp(){const{edits:Dt}=Mt;Dt.feature=null,Pt.add(l$2e(()=>Dt.feature,Nt=>{_t.unhighlight(),_t.highlight(Nt)}),this.id)},async tearDown(){_t.unhighlight(),Pt.remove(this.id)}}),"editing-existing-feature":()=>({id:"editing-existing-feature",async setUp(){var ir;if(Pt.has("editing-existing-feature"))return;const Dt=Mt.edits.feature,Nt=Mt.viewModel;Mt.editableItem=Nt.editableItems.find(nr=>nr.layer===Dt.layer);const Vt=new AbortController;Pt.add({remove:()=>Vt.abort()},this.id);const zt=Nt.view.whenLayerView(Dt.layer),Xt=O$6(Dt,Nt.view,Vt.signal),Ht=await zt,Wt=await Xt;if(p$3C(Vt))return;Mt.edits.updateGeometry(Wt.geometry),Mt.edits.updateAttributes(Wt.attributes),Mt.edits.trackChanges(),Nt.attachmentsViewModel.set({graphic:Wt,mode:"view"});const Qt=Wt.sourceLayer,Zt=(ir=P$3(Nt.layerInfos,Qt))==null?void 0:ir.formTemplate,Kt=Nt.view.spatialReference;Nt.featureFormViewModel.set({feature:Wt,formTemplate:Zt,spatialReference:Kt});const er="createInteractiveEditSession"in Ht?Ht.createInteractiveEditSession(Dt):null,Yt=[Nt.featureFormViewModel.on("value-change",nr=>{Mt.edits.updateAttributes(Nt.featureFormViewModel.getValues()),Wt.attributes=Mt.edits.feature.attributes,er&&er.setAttribute(nr.fieldName,nr.value)}),l$2e(()=>Nt.attachmentsViewModel.mode,nr=>{nr==="add"&&Mt.viewModel.activeWorkflow.go("adding-attachment"),nr==="edit"&&Mt.viewModel.activeWorkflow.go("editing-attachment")})];er&&(Yt.push(n$2W(()=>er.rollback())),Pt.add(n$2W(()=>er.commit()),_t._handleKeys.afterCommit));const{supportsGeometryUpdate:rr}=Qt.capabilities.editing;if(rr){Nt.sketchViewModel.allowDeleteKey=!1;const nr=V$7(Wt),{interactive:ar,visual:or}=await H$2(Wt,nr,Nt.sketchViewModel,Nt.view,({geometry:ur,attributes:dr})=>{if(r$1P(nr.rotation)){const{field:hr}=nr.rotation;Nt.featureFormViewModel.setValue(hr,dr[hr])}if(r$1P(nr.size)){const{field:hr}=nr.size;Nt.featureFormViewModel.setValue(hr,dr[hr])}Mt.edits.updateAttributes(dr),Mt.edits.updateGeometry(ur),Nt.featureFormViewModel.feature.geometry=ur},Ft);Yt.push(ar,or),Pt.add(ar,_t._handleKeys.beforeCommit),Pt.add(or,_t._handleKeys.afterCommit)}else _t.highlight(Wt);Pt.add(Yt,this.id)},async tearDown({cancelled:Dt}){Dt&&(_t.unhighlight(),Pt.remove(this.id))}}),"adding-attachment":()=>({id:"adding-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){Mt.viewModel.attachmentsViewModel.mode="view"}}),"editing-attachment":()=>({id:"editing-attachment",parent:"editing-existing-feature",async setUp(){},async tearDown(){Mt.viewModel.attachmentsViewModel.mode="view"}})})}};b$8=y$9=e$2a([n$2L("esri.widgets.Editor.UpdateWorkflow")],b$8);const V$5=b$8;function E$6(_t){switch(_t){case P$2.SUPPORTED:break;case P$2.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case P$2.GEOMETRY_MISSING:return"no geometry";case P$2.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case P$2.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case P$2.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var P$2;(function(_t){_t[_t.SUPPORTED=0]="SUPPORTED",_t[_t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",_t[_t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",_t[_t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",_t[_t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",_t[_t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(P$2||(P$2={}));function r$a(_t,Tt){return t$2e(Tt)||!Tt.mode?_t?"absolute-height":"on-the-ground":Tt.mode}function s$8(_t,Tt){return r$a(!!r$1P(_t)&&_t.hasZ,Tt)}function i$b(_t){const Tt=l$b(_t);return s$8(_t.geometry,Tt)}function u$a(_t){const Tt=l$b(_t),Mt=s$8(_t.geometry,Tt);return{mode:Mt,offset:r$1P(Tt)&&Mt!=="on-the-ground"?c$3r(Tt.offset,0)*r$L(c$3r(Tt.unit,"meters")):0}}function a$c(_t){if(i$b(_t)==="on-the-ground")return!1;const Tt=l$b(_t),Mt=r$1P(Tt)&&Tt.featureExpressionInfo?Tt.featureExpressionInfo.expression:null;return!(!Mt||Mt==="0")}function l$b(_t){return _t.layer&&"elevationInfo"in _t.layer?_t.layer.elevationInfo:null}function c$c(_t,Tt,Mt){if(t$2e(Mt)||!Mt.mode)return;const Pt=_t.hasZ?_t.z:0,Ft=r$1P(Mt.offset)?Mt.offset:0;switch(Mt.mode){case"absolute-height":return Pt-Ft;case"on-the-ground":return 0;case"relative-to-ground":return Pt-(c$3r(Tt.elevationProvider.getElevation(_t.x,_t.y,_t.z,_t.spatialReference,"ground"),0)+Ft);case"relative-to-scene":return Pt-(c$3r(Tt.elevationProvider.getElevation(_t.x,_t.y,_t.z,_t.spatialReference,"scene"),0)+Ft)}}function f$7(_t,Tt,Mt,Pt=null){return g$6(_t,Tt.x,Tt.y,Tt.hasZ?Tt.z:0,Tt.spatialReference,Mt,Pt)}function v$a(_t,Tt,Mt,Pt,Ft=null){return g$6(_t,Tt[0],Tt[1],Tt.length>2?Tt[2]:0,Mt,Pt,Ft)}function g$6(_t,Tt,Mt,Pt,Ft,Dt,Nt=null){if(t$2e(Dt))return;const Vt=r$1P(Nt)?Nt.mode:"absolute-height";if(Vt==="on-the-ground")return 0;const{absoluteZ:zt}=d$b(Tt,Mt,Pt,Ft,_t,Dt);return h$e(zt,Tt,Mt,Pt,Ft,_t,Nt,Vt)}function d$b(_t,Tt,Mt,Pt,Ft,Dt){const Nt=r$1P(Dt.offset)?Dt.offset:0;switch(Dt.mode){case"absolute-height":return{absoluteZ:Mt+Nt,elevation:0};case"on-the-ground":{const Vt=c$3r(Ft.elevationProvider.getElevation(_t,Tt,0,Pt,"ground"),0);return{absoluteZ:Vt,elevation:Vt}}case"relative-to-ground":{const Vt=c$3r(Ft.elevationProvider.getElevation(_t,Tt,Mt,Pt,"ground"),0);return{absoluteZ:Mt+Vt+Nt,elevation:Vt}}case"relative-to-scene":{const Vt=c$3r(Ft.elevationProvider.getElevation(_t,Tt,Mt,Pt,"scene"),0);return{absoluteZ:Mt+Vt+Nt,elevation:Vt}}}}function h$e(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt){const zt=r$1P(Nt)&&r$1P(Nt.offset)?Nt.offset:0;switch(Vt){case"absolute-height":return _t-zt;case"relative-to-ground":return _t-(c$3r(Dt.elevationProvider.getElevation(Tt,Mt,Pt,Ft,"ground"),0)+zt);case"relative-to-scene":return _t-(c$3r(Dt.elevationProvider.getElevation(Tt,Mt,Pt,Ft,"scene"),0)+zt)}}function i$a(_t){var Tt;if(((Tt=_t.layer)==null?void 0:Tt.type)!=="graphics")return P$2.GRAPHICS_LAYER_MISSING;if(t$2e(_t.geometry))return P$2.GEOMETRY_MISSING;switch(_t.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return P$2.GEOMETRY_TYPE_UNSUPPORTED}return i$b(_t)!=="on-the-ground"&&a$c(_t)?P$2.ELEVATION_MODE_UNSUPPORTED:P$2.SUPPORTED}function f$6(_t){if(!_t)return null;if(o$1W(_t)&&_t.wkid){const Tt=d$1r[_t.wkid];if(Tt)return Tt}if(_t.wkt){const Tt=p$9(_t.wkt);if(Tt)return Tt}return null}function p$9(_t){const Tt=t$1p.exec(_t);if(!Tt||Tt.length!==2)return null;const Mt=Tt[1].split(",");if(!Mt||Mt.length<3)return null;const Pt=parseFloat(Mt[1]),Ft=parseFloat(Mt[2]);return isNaN(Pt)||isNaN(Ft)?null:{a:Pt,f:Ft===0?0:1/Ft}}function u$9(_t){const Tt=f$6(_t||k$y.WGS84);if(d$a(Tt))return Tt;const Mt=Tt.a*(1-Tt.f);return Object.assign(Tt,{b:Mt,eSq:1-(Mt/Tt.a)**2,radius:(2*Tt.a+Mt)/3,densificationRatio:1e4/((2*Tt.a+Mt)/3)})}function d$a(_t){return"b"in _t&&"eSq"in _t&&"radius"in _t}function g$5(_t,Tt,Mt){const{a:Pt,eSq:Ft}=u$9(Mt),Dt=Math.sqrt(Ft),Nt=Math.sin(Tt[1]*i$1O),Vt=Pt*Tt[0]*i$1O;let zt;return Ft>0?zt=Pt*((1-Ft)*(Nt/(1-Ft*(Nt*Nt))-1/(2*Dt)*Math.log((1-Dt*Nt)/(1+Dt*Nt))))*.5:zt=Pt*Nt,_t[0]=Vt,_t[1]=zt,_t}function M$7(_t){return f$6(_t)!==null}function w$2(_t,Tt="square-meters"){if(_t.some(Nt=>!M$7(Nt.spatialReference)))throw new s$2i("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const Mt=[];for(let Nt=0;Nt<_t.length;Nt++){const Vt=_t[Nt],zt=Vt.spatialReference,{radius:Xt,densificationRatio:Ht}=u$9(zt),Wt=Xt*Ht;Mt.push(R$3(Vt,Wt))}const Pt=[],Ft=[0,0],Dt=[0,0];for(let Nt=0;Nt<Mt.length;Nt++){const{rings:Vt,spatialReference:zt}=Mt[Nt];let Xt=0;for(let Ht=0;Ht<Vt.length;Ht++){const Wt=Vt[Ht];g$5(Ft,Wt[0],zt),g$5(Dt,Wt[Wt.length-1],zt);let Qt=Dt[0]*Ft[1]-Ft[0]*Dt[1];for(let Zt=0;Zt<Wt.length-1;Zt++)g$5(Ft,Wt[Zt+1],zt),g$5(Dt,Wt[Zt],zt),Qt+=Dt[0]*Ft[1]-Ft[0]*Dt[1];Xt+=Qt}Xt=N$o(Xt,"square-meters",Tt),Pt.push(Xt/-2)}return Pt}function y$8(_t,Tt="meters"){if(!_t)throw new s$2i("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(_t.some(Pt=>!M$7(Pt.spatialReference)))throw new s$2i("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const Mt=[];for(let Pt=0;Pt<_t.length;Pt++){const Ft=_t[Pt],{spatialReference:Dt}=Ft,Nt=Ft.type==="polyline"?Ft.paths:Ft.rings;let Vt=0;for(let zt=0;zt<Nt.length;zt++){const Xt=Nt[zt];let Ht=0;for(let Wt=1;Wt<Xt.length;Wt++){const Qt=Xt[Wt-1][0],Zt=Xt[Wt][0],Kt=Xt[Wt-1][1],er=Xt[Wt][1];if(Kt!==er||Qt!==Zt){const Yt={distance:null};z$3(Yt,[Qt,Kt],[Zt,er],Dt),Ht+=Yt.distance}}Vt+=Ht}Vt=N$o(Vt,"meters",Tt),Mt.push(Vt)}return Mt}function R$3(_t,Tt){if(_t.type!=="polyline"&&_t.type!=="polygon")throw new s$2i("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:Mt}=_t;if(!M$7(Mt))throw new s$2i("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const Pt=_t.type==="polyline"?_t.paths:_t.rings,Ft=[],Dt=[0,0],Nt={distance:null};for(const Vt of Pt){const zt=[];Ft.push(zt),zt.push([Vt[0][0],Vt[0][1]]);let Xt,Ht,Wt=Vt[0][0],Qt=Vt[0][1];for(let Zt=0;Zt<Vt.length-1;Zt++){if(Xt=Vt[Zt+1][0],Ht=Vt[Zt+1][1],Wt===Xt&&Qt===Ht)continue;const Kt=[Wt,Qt];z$3(Nt,[Wt,Qt],[Xt,Ht],Mt);const{azimuth:er,distance:Yt}=Nt,rr=Yt/Tt;if(rr>1){for(let ir=1;ir<=rr-1;ir++)v$9(Dt,Kt,er,ir*Tt,Mt),zt.push(Dt.slice(0));v$9(Dt,Kt,er,(Yt+Math.floor(rr-1)*Tt)/2,Mt),zt.push(Dt.slice(0))}v$9(Dt,Kt,er,Yt,Mt),zt.push(Dt.slice(0)),Wt=Dt[0],Qt=Dt[1]}}return _t.type==="polyline"?new m$1R({paths:Ft,spatialReference:Mt}):new v$V({rings:Ft,spatialReference:Mt})}function v$9(_t,Tt,Mt,Pt,Ft){const Dt=Tt[0],Nt=Tt[1],Vt=Dt*i$1O,zt=Nt*i$1O,Xt=Mt*i$1O,{a:Ht,b:Wt,f:Qt}=u$9(Ft),Zt=Math.sin(Xt),Kt=Math.cos(Xt),er=(1-Qt)*Math.tan(zt),Yt=1/Math.sqrt(1+er*er),rr=er*Yt,ir=Math.atan2(er,Kt),nr=Yt*Zt,ar=nr*nr,or=1-ar,ur=or*(Ht*Ht-Wt*Wt)/(Wt*Wt),dr=1+ur/16384*(4096+ur*(ur*(320-175*ur)-768)),hr=ur/1024*(256+ur*(ur*(74-47*ur)-128));let gr,pr,mr,wr,br=Pt/(Wt*dr),_r=2*Math.PI;for(;Math.abs(br-_r)>1e-12;)mr=Math.cos(2*ir+br),gr=Math.sin(br),pr=Math.cos(br),wr=hr*gr*(mr+hr/4*(pr*(2*mr*mr-1)-hr/6*mr*(4*gr*gr-3)*(4*mr*mr-3))),_r=br,br=Pt/(Wt*dr)+wr;const Mr=rr*gr-Yt*pr*Kt,Ar=Math.atan2(rr*pr+Yt*gr*Kt,(1-Qt)*Math.sqrt(ar+Mr*Mr)),xr=Math.atan2(gr*Zt,Yt*pr-rr*gr*Kt),yr=Qt/16*or*(4+Qt*(4-3*or)),Er=Ar/i$1O,Cr=(Vt+(xr-(1-yr)*Qt*nr*(br+yr*gr*(mr+yr*pr*(2*mr*mr-1)))))/i$1O;return _t[0]=Cr,_t[1]=Er,_t}function z$3(_t,Tt,Mt,Pt){const Ft=Tt[0]*i$1O,Dt=Tt[1]*i$1O,Nt=Mt[0]*i$1O,Vt=Mt[1]*i$1O,{a:zt,b:Xt,f:Ht,radius:Wt}=u$9(Pt),Qt=Nt-Ft,Zt=Math.atan((1-Ht)*Math.tan(Dt)),Kt=Math.atan((1-Ht)*Math.tan(Vt)),er=Math.sin(Zt),Yt=Math.cos(Zt),rr=Math.sin(Kt),ir=Math.cos(Kt);let nr,ar,or,ur,dr,hr,gr,pr,mr,wr,br=1e3,_r=Qt;do{if(gr=Math.sin(_r),pr=Math.cos(_r),or=Math.sqrt(ir*gr*(ir*gr)+(Yt*rr-er*ir*pr)*(Yt*rr-er*ir*pr)),or===0)return _t.distance=0,_t.azimuth=void 0,_t.reverseAzimuth=void 0,_t;dr=er*rr+Yt*ir*pr,hr=Math.atan2(or,dr),mr=Yt*ir*gr/or,ar=1-mr*mr,ur=dr-2*er*rr/ar,isNaN(ur)&&(ur=0),wr=Ht/16*ar*(4+Ht*(4-3*ar)),nr=_r,_r=Qt+(1-wr)*Ht*mr*(hr+wr*or*(ur+wr*dr*(2*ur*ur-1)))}while(Math.abs(_r-nr)>1e-12&&--br>0);if(br===0){const Cr=Wt,Dr=Math.acos(Math.sin(Dt)*Math.sin(Vt)+Math.cos(Dt)*Math.cos(Vt)*Math.cos(Nt-Ft))*Cr,jr=Nt-Ft,Hr=Math.sin(jr)*Math.cos(Vt),zr=Math.cos(Dt)*Math.sin(Vt)-Math.sin(Dt)*Math.cos(Vt)*Math.cos(jr),Qr=Math.atan2(Hr,zr);return _t.azimuth=Qr/i$1O,_t.distance=Dr,_t.reverseAzimuth=void 0,_t}const Mr=ar*(zt*zt-Xt*Xt)/(Xt*Xt),Ar=Mr/1024*(256+Mr*(Mr*(74-47*Mr)-128)),xr=Xt*(1+Mr/16384*(4096+Mr*(Mr*(320-175*Mr)-768)))*(hr-Ar*or*(ur+Ar/4*(dr*(2*ur*ur-1)-Ar/6*ur*(4*or*or-3)*(4*ur*ur-3)))),yr=Math.atan2(ir*Math.sin(_r),Yt*rr-er*ir*Math.cos(_r)),Er=Math.atan2(Yt*Math.sin(_r),Yt*rr*Math.cos(_r)-er*ir);return _t.azimuth=yr/i$1O,_t.distance=xr,_t.reverseAzimuth=Er/i$1O,_t}var d$9;let h$d=d$9=class extends v$V{constructor(..._t){super(..._t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(_t,Tt){let Mt;if(_t&&_t.center)Mt=_t;else{if(_t&&_t.rings)return super.normalizeCtorArgs(_t,Tt);Mt={center:_t}}return{...super.normalizeCtorArgs(),...Mt,...Tt}}initialize(){const _t=this.center,Tt=this.numberOfPoints;if(this.hasZ=_t&&_t.hasZ,this.rings.length!==0||!_t)return;const Mt=N$o(this.radius,this.radiusUnit,"meters"),Pt=_t.spatialReference;let Ft,Dt="geographic";if(Pt.isWebMercator?Dt="webMercator":(r$1B[Pt.wkid]!=null||Pt.wkt&&Pt.wkt.indexOf("PROJCS")===0)&&(Dt="projected"),this.geodesic){let Nt;switch(Dt){case"webMercator":Nt=j$_(_t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":Nt=_t}Ft=this._createGeodesicCircle(Nt,Mt,Tt),Dt==="webMercator"&&(Ft=R$v(Ft))}else{let Nt;Dt==="webMercator"||Dt==="projected"?Nt=Mt/this._convert2Meters(1,_t.spatialReference):Dt==="geographic"&&(Nt=G$f(Mt,"meters",p$2q(_t.spatialReference).radius)),Ft=this._createPlanarCircle(_t,Nt,Tt)}this.spatialReference=Ft.spatialReference,this.addRing(Ft.rings[0])}clone(){const{center:_t,numberOfPoints:Tt,radius:Mt,radiusUnit:Pt,geodesic:Ft}=this;return new d$9({center:_t.clone(),numberOfPoints:Tt,radius:Mt,radiusUnit:Pt,geodesic:Ft})}_createGeodesicCircle(_t,Tt,Mt){let Pt=0;const Ft=[];for(;Pt<360;){const Dt=[0,0],Nt=[_t.x,_t.y];v$9(Dt,Nt,Pt,Tt),this.hasZ&&Dt.push(_t.z),Ft.push(Dt),Pt+=360/Mt}return Ft.push(Ft[0]),new v$V(Ft)}_createPlanarCircle(_t,Tt,Mt){const Pt=[],Ft=2*Math.PI/Mt;for(let Dt=0;Dt<Mt;++Dt){const Nt=Ft*Dt,Vt=[_t.x+Math.cos(-Nt)*Tt,_t.y+Math.sin(-Nt)*Tt];this.hasZ&&Vt.push(_t.z),Pt.push(Vt)}return Pt.push(Pt[0]),new v$V({spatialReference:_t.spatialReference,rings:[Pt]})}_convert2Meters(_t,Tt){let Mt;if(r$1B[Tt.wkid]!=null)Mt=r$1B.values[r$1B[Tt.wkid]];else{const Pt=Tt.wkt,Ft=Pt.lastIndexOf(",")+1,Dt=Pt.lastIndexOf("]]");Mt=parseFloat(Pt.substring(Ft,Dt))}return _t*Mt}};e$2a([d$25({type:j$Z})],h$d.prototype,"center",void 0),e$2a([d$25()],h$d.prototype,"geodesic",void 0),e$2a([d$25()],h$d.prototype,"numberOfPoints",void 0),e$2a([d$25()],h$d.prototype,"radius",void 0),e$2a([d$25()],h$d.prototype,"radiusUnit",void 0),h$d=d$9=e$2a([n$2L("esri.geometry.Circle")],h$d);const m$c=h$d;function l$a(_t){return u$8(_t).result}function m$b(_t){return u$8(_t).geometry}function u$8(_t){var Tt;return((Tt=_t.layer)==null?void 0:Tt.type)!=="graphics"?{result:P$2.GRAPHICS_LAYER_MISSING,geometry:null}:t$2e(_t.geometry)?{result:P$2.GEOMETRY_MISSING,geometry:null}:i$b(_t)!=="on-the-ground"&&a$c(_t)?{result:P$2.ELEVATION_MODE_UNSUPPORTED,geometry:null}:_t.geometry.type!=="point"&&_t.geometry.type!=="polyline"&&(_t.geometry.type!=="polygon"||_t.geometry instanceof m$c)?{result:P$2.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:P$2.SUPPORTED,geometry:_t.geometry}}function i$9(_t){var Mt;if(((Mt=_t.layer)==null?void 0:Mt.type)!=="graphics")return P$2.GRAPHICS_LAYER_MISSING;if(t$2e(_t.geometry))return P$2.GEOMETRY_MISSING;switch(_t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return P$2.SUPPORTED;default:return P$2.GEOMETRY_TYPE_UNSUPPORTED}const Tt=r$1P(_t.symbol)&&_t.symbol.type==="point-3d"&&_t.symbol.symbolLayers;return Tt&&Tt.length>0&&Tt.some(Pt=>Pt.type==="object")?i$b(_t)!=="on-the-ground"&&a$c(_t)?P$2.ELEVATION_MODE_UNSUPPORTED:P$2.SUPPORTED:P$2.SYMBOL_TYPE_UNSUPPORTED}function e$b(_t,Tt,Mt){if(!Tt||!_t||!_t.map)return;const{map:Pt}=_t,Ft=Pt.layers.find(Dt=>Dt===Tt);Ft||Pt.add(Tt,Mt),Mt!=null&&Pt.layers.reorder(Ft,Mt)}function n$c(_t,Tt){return _t.allLayerViews.find(Mt=>{const Pt=Mt.layer;return Pt===Tt||"sublayers"in Pt&&r$1P(Pt.sublayers)&&Pt.sublayers.includes(Tt)})}const e$a={redo:"r",undo:"z",center:"Alt",constraint:"Shift",snappingToggle:"Control",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},a$b=(_t,Tt,Mt)=>[Tt,Mt],m$a=(_t,Tt,Mt)=>[Tt,Mt,_t[2]],c$b=(_t,Tt,Mt)=>[Tt,Mt,_t[2],_t[3]];function s$7(_t){return _t?{originPosition:_t.originPosition==="upper-left"?"upperLeft":_t.originPosition==="lower-left"?"lowerLeft":_t.originPosition,scale:_t.tolerance?[_t.tolerance,_t.tolerance]:[1,1],translate:r$1P(_t.extent)?[_t.extent.xmin,_t.extent.ymax]:[0,0]}:null}function x$6({scale:_t,translate:Tt},Mt){return Math.round((Mt-Tt[0])/_t[0])}function h$c({scale:_t,translate:Tt},Mt){return Math.round((Tt[1]-Mt)/_t[1])}function I$5(_t,Tt,Mt){const Pt=[];let Ft,Dt,Nt,Vt;for(let zt=0;zt<Mt.length;zt++){const Xt=Mt[zt];zt>0?(Nt=x$6(_t,Xt[0]),Vt=h$c(_t,Xt[1]),Nt===Ft&&Vt===Dt||(Pt.push(Tt(Xt,Nt-Ft,Vt-Dt)),Ft=Nt,Dt=Vt)):(Ft=x$6(_t,Xt[0]),Dt=h$c(_t,Xt[1]),Pt.push(Tt(Xt,Ft,Dt)))}return Pt.length>0?Pt:null}function p$8(_t,Tt,Mt,Pt){return I$5(_t,Mt?Pt?c$b:m$a:Pt?m$a:a$b,Tt)}function N$4(_t,Tt,Mt,Pt){const Ft=[],Dt=Mt?Pt?c$b:m$a:Pt?m$a:a$b;for(let Nt=0;Nt<Tt.length;Nt++){const Vt=I$5(_t,Dt,Tt[Nt]);Vt&&Vt.length>=3&&Ft.push(Vt)}return Ft.length?Ft:null}function y$7(_t,Tt,Mt,Pt){const Ft=[],Dt=Mt?Pt?c$b:m$a:Pt?m$a:a$b;for(let Nt=0;Nt<Tt.length;Nt++){const Vt=I$5(_t,Dt,Tt[Nt]);Vt&&Vt.length>=2&&Ft.push(Vt)}return Ft.length?Ft:null}function z$2({scale:_t,translate:Tt},Mt){return Mt*_t[0]+Tt[0]}function T$3({scale:_t,translate:Tt},Mt){return Tt[1]-Mt*_t[1]}function M$6(_t,Tt,Mt){const Pt=new Array(Mt.length);if(!Mt.length)return Pt;const[Ft,Dt]=_t.scale;let Nt=z$2(_t,Mt[0][0]),Vt=T$3(_t,Mt[0][1]);Pt[0]=Tt(Mt[0],Nt,Vt);for(let zt=1;zt<Mt.length;zt++){const Xt=Mt[zt];Nt+=Xt[0]*Ft,Vt-=Xt[1]*Dt,Pt[zt]=Tt(Xt,Nt,Vt)}return Pt}function E$5(_t,Tt,Mt){const Pt=new Array(Mt.length);for(let Ft=0;Ft<Mt.length;Ft++)Pt[Ft]=M$6(_t,Tt,Mt[Ft]);return Pt}function b$7(_t,Tt,Mt,Pt){return M$6(_t,Mt?Pt?c$b:m$a:Pt?m$a:a$b,Tt)}function F$3(_t,Tt,Mt,Pt){return E$5(_t,Mt?Pt?c$b:m$a:Pt?m$a:a$b,Tt)}function V$4(_t,Tt,Mt,Pt){return E$5(_t,Mt?Pt?c$b:m$a:Pt?m$a:a$b,Tt)}function G$1(_t,Tt,Mt,Pt,Ft){return Tt.xmin=x$6(_t,Mt.xmin),Tt.ymin=h$c(_t,Mt.ymin),Tt.xmax=x$6(_t,Mt.xmax),Tt.ymax=h$c(_t,Mt.ymax),Tt!==Mt&&(Pt&&(Tt.zmin=Mt.zmin,Tt.zmax=Mt.zmax),Ft&&(Tt.mmin=Mt.mmin,Tt.mmax=Mt.mmax)),Tt}function L$4(_t,Tt,Mt,Pt,Ft){return Tt.points=p$8(_t,Mt.points,Pt,Ft),Tt}function O$5(_t,Tt,Mt,Pt,Ft){return Tt.x=x$6(_t,Mt.x),Tt.y=h$c(_t,Mt.y),Tt!==Mt&&(Pt&&(Tt.z=Mt.z),Ft&&(Tt.m=Mt.m)),Tt}function S$4(_t,Tt,Mt,Pt,Ft){const Dt=N$4(_t,Mt.rings,Pt,Ft);return Dt?(Tt.rings=Dt,Tt):null}function d$8(_t,Tt,Mt,Pt,Ft){const Dt=y$7(_t,Mt.paths,Pt,Ft);return Dt?(Tt.paths=Dt,Tt):null}function U$3(_t,Tt){return _t&&Tt?l$27(Tt)?O$5(_t,{},Tt,!1,!1):y$1q(Tt)?d$8(_t,{},Tt,!1,!1):c$2R(Tt)?S$4(_t,{},Tt,!1,!1):f$1j(Tt)?L$4(_t,{},Tt,!1,!1):s$1Q(Tt)?G$1(_t,{},Tt,!1,!1):null:null}function q$1(_t,Tt,Mt,Pt,Ft){return r$1P(Mt)&&(Tt.points=b$7(_t,Mt.points,Pt,Ft)),Tt}function v$8(_t,Tt,Mt,Pt,Ft){return t$2e(Mt)||(Tt.x=z$2(_t,Mt.x),Tt.y=T$3(_t,Mt.y),Tt!==Mt&&(Pt&&(Tt.z=Mt.z),Ft&&(Tt.m=Mt.m))),Tt}function B$1(_t,Tt,Mt,Pt,Ft){return r$1P(Mt)&&(Tt.rings=V$4(_t,Mt.rings,Pt,Ft)),Tt}function C$3(_t,Tt,Mt,Pt,Ft){return r$1P(Mt)&&(Tt.paths=F$3(_t,Mt.paths,Pt,Ft)),Tt}function a$a(_t,Tt){const Mt=l$9[_t.toLowerCase()];if(Mt==null)throw new Error("Function Not Recognised");if(Tt.length<Mt.minParams||Tt.length>Mt.maxParams)throw new Error(`Invalid Parameter count for call to ${_t.toUpperCase()}`);return Mt.evaluate(Tt)}function n$b(_t,Tt){const Mt=l$9[_t.toLowerCase()];return Mt!=null&&Tt>=Mt.minParams&&Tt<=Mt.maxParams}const l$9={min:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.min.apply(Math,_t[0])},max:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.max.apply(Math,_t[0])},avg:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:t$9(_t[0])},sum:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:r$9(_t[0])},stddev:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.sqrt(e$9(_t[0]))},count:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:_t[0].length},var:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:e$9(_t[0])}};function t$9(_t){let Tt=0;for(let Mt=0;Mt<_t.length;Mt++)Tt+=_t[Mt];return Tt/_t.length}function r$9(_t){let Tt=0;for(let Mt=0;Mt<_t.length;Mt++)Tt+=_t[Mt];return Tt}function e$9(_t){const Tt=t$9(_t),Mt=_t.length;let Pt=0;for(const Ft of _t)Pt+=(Ft-Tt)**2;return Mt>1?Pt/(Mt-1):0}class e$8{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0}static _fixDefaults(Tt){if(Tt.precision!==null||Tt.secondary!==null)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static createFromMilliseconds(Tt){const Mt=new e$8;return Mt.second=Tt/1e3,Mt}static createFromValueAndQualifer(Tt,Mt,Pt){let Ft=null;const Dt=new e$8;if(Dt.op=Pt==="-"?"-":"+",Mt.type==="interval-period"){e$8._fixDefaults(Mt);const Nt=new RegExp("^[0-9]{1,}$");if(Mt.period==="year"||Mt.period==="month")throw new Error("Year-Month Intervals not supported");if(!Nt.test(Tt))throw new Error("Illegal Interval");Dt[Mt.period]=parseFloat(Tt)}else{if(e$8._fixDefaults(Mt.start),e$8._fixDefaults(Mt.end),Mt.start.period==="year"||Mt.start.period==="month")throw new Error("Year-Month Intervals not supported");if(Mt.end.period==="year"||Mt.end.period==="month")throw new Error("Year-Month Intervals not supported");switch(Mt.start.period){case"day":switch(Mt.end.period){case"hour":if(Ft=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!Ft.test(Tt))throw new Error("Illegal Interval");Dt[Mt.start.period]=parseFloat(Tt.split(" ")[0]),Dt[Mt.end.period]=parseFloat(Tt.split(" ")[1]);break;case"minute":if(Ft=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!Ft.test(Tt))throw new Error("Illegal Interval");{Dt[Mt.start.period]=parseFloat(Tt.split(" ")[0]);const Nt=Tt.split(" ")[1].split(":");Dt.hour=parseFloat(Nt[0]),Dt.minute=parseFloat(Nt[1])}break;case"second":if(Ft=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!Ft.test(Tt))throw new Error("Illegal Interval");{Dt[Mt.start.period]=parseFloat(Tt.split(" ")[0]);const Nt=Tt.split(" ")[1].split(":");Dt.hour=parseFloat(Nt[0]),Dt.minute=parseFloat(Nt[1]),Dt.second=parseFloat(Nt[2])}break;default:throw new Error("Invalid Interval.")}break;case"hour":switch(Mt.end.period){case"minute":if(Ft=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!Ft.test(Tt))throw new Error("Illegal Interval");Dt.hour=parseFloat(Tt.split(":")[0]),Dt.minute=parseFloat(Tt.split(":")[1]);break;case"second":if(Ft=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!Ft.test(Tt))throw new Error("Illegal Interval");{const Nt=Tt.split(":");Dt.hour=parseFloat(Nt[0]),Dt.minute=parseFloat(Nt[1]),Dt.second=parseFloat(Nt[2])}break;default:throw new Error("Invalid Interval.")}break;case"minute":if(Mt.end.period!=="second")throw new Error("Invalid Interval.");if(Ft=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!Ft.test(Tt))throw new Error("Illegal Interval");{const Nt=Tt.split(":");Dt.minute=parseFloat(Nt[0]),Dt.second=parseFloat(Nt[1])}break;default:throw new Error("Invalid Interval.")}}return Dt}valueInMilliseconds(){return(this.op==="-"?-1:1)*(1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}function r$8(_t,Tt){const Mt=n$a[_t.toLowerCase()];if(Mt==null)throw new Error("Function Not Recognised");if(Tt.length<Mt.minParams||Tt.length>Mt.maxParams)throw new Error(`Invalid Parameter count for call to ${_t.toUpperCase()}`);return Mt.evaluate(Tt)}function t$8(_t,Tt){const Mt=n$a[_t.toLowerCase()];return Mt!=null&&Tt>=Mt.minParams&&Tt<=Mt.maxParams}const n$a={extract:{minParams:2,maxParams:2,evaluate:([_t,Tt])=>{if(Tt==null)return null;if(Tt instanceof Date)switch(_t.toUpperCase()){case"SECOND":return Tt.getSeconds();case"MINUTE":return Tt.getMinutes();case"HOUR":return Tt.getHours();case"DAY":return Tt.getDate();case"MONTH":return Tt.getMonth()+1;case"YEAR":return Tt.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:_t=>{if(_t.length===2){const[Tt,Mt]=_t;return Tt==null||Mt==null?null:Tt.toString().substring(Mt-1)}if(_t.length===3){const[Tt,Mt,Pt]=_t;return Tt==null||Mt==null||Pt==null?null:Pt<=0?"":Tt.toString().substring(Mt-1,Mt+Pt-1)}}},position:{minParams:2,maxParams:2,evaluate:([_t,Tt])=>_t==null||Tt==null?null:Tt.indexOf(_t)+1},trim:{minParams:2,maxParams:3,evaluate:_t=>{const Tt=_t.length===3,Mt=Tt?_t[1]:" ",Pt=Tt?_t[2]:_t[1];if(Mt==null||Pt==null)return null;const Ft=`(${o$26(Mt)})`;switch(_t[0]){case"BOTH":return Pt.replace(new RegExp(`^${Ft}*|${Ft}*$`,"g"),"");case"LEADING":return Pt.replace(new RegExp(`^${Ft}*`,"g"),"");case"TRAILING":return Pt.replace(new RegExp(`${Ft}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.abs(_t[0])},ceiling:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.ceil(_t[0])},floor:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.floor(_t[0])},log:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.log(_t[0])},log10:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.log(_t[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.sin(_t[0])},cos:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.cos(_t[0])},tan:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.tan(_t[0])},asin:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.asin(_t[0])},acos:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.acos(_t[0])},atan:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:Math.atan(_t[0])},sign:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:_t[0]>0?1:_t[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:_t=>_t[0]==null||_t[1]==null?null:_t[0]**_t[1]},mod:{minParams:2,maxParams:2,evaluate:_t=>_t[0]==null||_t[1]==null?null:_t[0]%_t[1]},round:{minParams:1,maxParams:2,evaluate:_t=>{const Tt=_t[0],Mt=_t.length===2?10**_t[1]:1;return Tt==null?null:Math.round(Tt*Mt)/Mt}},truncate:{minParams:1,maxParams:2,evaluate:_t=>_t[0]==null?null:_t.length===1?parseInt(_t[0].toFixed(0),10):parseFloat(_t[0].toFixed(_t[1]))},char_length:{minParams:1,maxParams:1,evaluate:_t=>typeof _t[0]=="string"||_t[0]instanceof String?_t[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:_t=>{let Tt="";for(let Mt=0;Mt<_t.length;Mt++){if(_t[Mt]==null)return null;Tt+=_t[Mt].toString()}return Tt}},lower:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:_t[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:_t=>_t[0]==null?null:_t[0].toString().toUpperCase()}};var n$9,t$7,e$7={exports:{}};t$7=function(){function _t(Ft,Dt){function Nt(){this.constructor=Ft}Nt.prototype=Dt.prototype,Ft.prototype=new Nt}function Tt(Ft,Dt,Nt,Vt){var zt=Error.call(this,Ft);return Object.setPrototypeOf&&Object.setPrototypeOf(zt,Tt.prototype),zt.expected=Dt,zt.found=Nt,zt.location=Vt,zt.name="SyntaxError",zt}function Mt(Ft,Dt,Nt){return Nt=Nt||" ",Ft.length>Dt?Ft:(Dt-=Ft.length,Ft+(Nt+=Nt.repeat(Dt)).slice(0,Dt))}function Pt(Ft,Dt){var Nt,Vt={},zt=(Dt=Dt!==void 0?Dt:{}).grammarSource,Xt={start:Yo},Ht=Yo,Wt="!",Qt="=",Zt=">=",Kt=">",er="<=",Yt="<>",rr="<",ir="!=",nr="+",ar="-",or="*",ur="/",dr="@",hr="'",gr="N'",pr="''",mr=".",wr="null",br="true",_r="false",Mr="in",Ar="is",xr="like",yr="escape",Er="not",Cr="and",Dr="or",jr="between",Hr="from",zr="for",Qr="substring",Xr="extract",Br="trim",Ur="position",Jr="timestamp",Zr="date",pn="leading",_i="trailing",Rr="both",Mn="to",ls="interval",us="year",ss="month",kn="day",In="hour",_n="minute",Cn="second",jn="case",ts="end",ds="when",es="then",hs="else",rs=",",ys="(",gs=")",Ls="`",Ks=/^[A-Za-z_\x80-\uFFFF]/,Ys=/^[A-Za-z0-9_]/,eo=/^[A-Za-z0-9_.\x80-\uFFFF]/,Os=/^[^']/,to=/^[0-9]/,ro=/^[eE]/,io=/^[+\-]/,no=/^[ \t\n\r]/,Fs=/^[^`]/,so=Nr("!",!1),Rs=Nr("=",!1),oo=Nr(">=",!1),ao=Nr(">",!1),lo=Nr("<=",!1),uo=Nr("<>",!1),co=Nr("<",!1),ho=Nr("!=",!1),Ts=Nr("+",!1),Ms=Nr("-",!1),po=Nr("*",!1),$o=Nr("/",!1),fo=fs([["A","Z"],["a","z"],"_",["\x80","\uFFFF"]],!1,!1),Sr=fs([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Yr=fs([["A","Z"],["a","z"],["0","9"],"_",".",["\x80","\uFFFF"]],!1,!1),bs=Nr("@",!1),cs=Nr("'",!1),Is=Nr("N'",!1),Fr=Nr("''",!1),vs=fs(["'"],!0,!1),xn=Nr(".",!1),_s=fs([["0","9"]],!1,!1),mo=fs(["e","E"],!1,!1),ps=fs(["+","-"],!1,!1),Ds=Nr("NULL",!0),Ns=Nr("TRUE",!0),Vr=Nr("FALSE",!0),yo=Nr("IN",!0),js=Nr("IS",!0),go=Nr("LIKE",!0),vo=Nr("ESCAPE",!0),ks=Nr("NOT",!0),_o=Nr("AND",!0),Ps=Nr("OR",!0),En=Nr("BETWEEN",!0),wo=Nr("FROM",!0),Vs=Nr("FOR",!0),bo=Nr("SUBSTRING",!0),xo=Nr("EXTRACT",!0),So=Nr("TRIM",!0),Eo=Nr("POSITION",!0),To=Nr("TIMESTAMP",!0),os=Nr("DATE",!0),Mo=Nr("LEADING",!0),Io=Nr("TRAILING",!0),vr=Nr("BOTH",!0),kr=Nr("TO",!0),Pr=Nr("INTERVAL",!0),Gr=Nr("YEAR",!0),Tn=Nr("MONTH",!0),sn=Nr("DAY",!0),as=Nr("HOUR",!0),xs=Nr("MINUTE",!0),eu=Nr("SECOND",!0),tu=Nr("CASE",!0),ru=Nr("END",!0),iu=Nr("WHEN",!0),nu=Nr("THEN",!0),su=Nr("ELSE",!0),ou=Nr(",",!1),au=Nr("(",!1),lu=Nr(")",!1),uu=fs([" ","	",`
`,"\r"],!1,!1),Bo=Nr("`",!1),zo=fs(["`"],!0,!1),cu=function(tr){return tr},du=function(tr,lr){var cr={type:"expression-list"},$r=X$(tr,lr);return cr.value=$r,cr},ko=function(tr,lr){return Vo(tr,lr)},hu=function(tr){return G$("NOT",tr)},pu=function(tr,lr){return lr==""||lr==null||lr==null?tr:lr.type=="arithmetic"?Vo(tr,lr.tail):Gl(lr.op,tr,lr.right,lr.escape)},$u=function(tr){return{type:"arithmetic",tail:tr}},fu=function(tr,lr){return{op:tr+"NOT",right:lr}},mu=function(tr,lr){return{op:tr,right:lr}},yu=function(tr,lr,cr){return{op:"NOT"+tr,right:{type:"expression-list",value:[lr,cr]}}},gu=function(tr,lr,cr){return{op:tr,right:{type:"expression-list",value:[lr,cr]}}},Go=function(tr){return tr[0]+" "+tr[2]},vu=function(tr,lr,cr){return{op:tr,right:lr,escape:cr.value}},_u=function(tr,lr){return{op:tr,right:lr,escape:""}},wu=function(tr,lr){return{op:tr,right:lr}},bu=function(tr){return{op:tr,right:{type:"expression-list",value:[]}}},xu=function(tr,lr){return{op:tr,right:lr}},Su=function(tr,lr){return Vo(tr,lr)},Eu=function(tr){return tr.paren=!0,tr},Tu=function(tr){return/^CURRENT_DATE$/i.test(tr)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(tr)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:tr}},Uo=function(tr){return tr},Xo=function(tr,lr){return tr+lr.join("")},Mu=function(tr){return{type:"parameter",value:tr[1]}},Iu=function(tr,lr){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:tr},lr]}}},ku=function(tr,lr,cr){return{type:"function",name:"substring",args:{type:"expression-list",value:cr?[tr,lr,cr[2]]:[tr,lr]}}},Pu=function(tr,lr,cr){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:tr==null?"BOTH":tr},lr,cr]}}},Cu=function(tr,lr){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:tr==null?"BOTH":tr},lr]}}},Au=function(tr,lr){return{type:"function",name:"position",args:{type:"expression-list",value:[tr,lr]}}},Lu=function(tr,lr){return{type:"function",name:tr,args:lr||{type:"expression-list",value:[]}}},Ou=function(tr){return{type:"timestamp",value:tr.value}},Fu=function(tr,lr,cr){return{type:"interval",value:lr,qualifier:cr,op:tr}},Ru=function(tr,lr){return{type:"interval",value:tr,qualifier:lr,op:""}},Du=function(tr,lr){return{type:"interval-qualifier",start:tr,end:lr}},Nu=function(tr,lr){return{type:"interval-period",period:tr.value,precision:lr,secondary:null}},qo=function(tr){return{type:"interval-period",period:tr.value,precision:null,secondary:null}},ju=function(tr){return{type:"interval-period",period:tr.value,precision:null,secondary:null}},Ho=function(tr,lr){return{type:"interval-period",period:"second",precision:tr,secondary:lr}},Vu=function(tr){return{type:"interval-period",period:"second",precision:tr,secondary:null}},Bu=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},zu=function(tr,lr){return{type:"interval-period",period:tr.value,precision:lr,secondary:null}},Gu=function(tr){return{type:"interval-period",period:"second",precision:tr,secondary:null}},Uu=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},Xu=function(){return{type:"string",value:"day"}},qu=function(){return{type:"string",value:"hour"}},Hu=function(){return{type:"string",value:"minute"}},Wu=function(){return{type:"string",value:"month"}},Qu=function(){return{type:"string",value:"year"}},Wo=function(tr){return parseFloat(tr)},Zu=function(tr){return{type:"date",value:tr.value}},Ju=function(){return{type:"null",value:null}},Ku=function(){return{type:"boolean",value:!0}},Yu=function(){return{type:"boolean",value:!1}},Qo=function(){return"'"},_c=function(tr){return{type:"string",value:tr.join("")}},_d=function(tr,lr){return{type:"case-expression",format:"simple",operand:tr,clauses:lr,else:null}},_h=function(tr,lr,cr){return{type:"case-expression",format:"simple",operand:tr,clauses:lr,else:cr.value}},ep=function(tr){return{type:"case-expression",format:"searched",clauses:tr,else:null}},tp=function(tr,lr){return{type:"case-expression",format:"searched",clauses:tr,else:lr.value}},Zo=function(tr,lr){return{type:"when-clause",operand:tr,value:lr}},rp=function(tr){return{type:"else-clause",value:tr}},np=function(tr){return{type:"number",value:tr}},sp=function(tr,lr,cr){return parseFloat(tr+lr+cr)},ap=function(tr,lr){return parseFloat(tr+lr)},lp=function(tr,lr){return parseFloat(tr+lr)},up=function(tr){return parseFloat(tr)},cp=function(tr,lr){return tr[0]+lr},dp=function(tr){return"."+(tr!=null?tr:"")},hp=function(tr,lr){return tr+lr},pp=function(tr){return tr.join("")},$p=function(tr,lr){return"e"+(lr===null?"":lr)},fp=function(){return"IN"},mp=function(){return"IS"},yp=function(){return"LIKE"},gp=function(){return"ESCAPE"},vp=function(){return"NOT"},_p=function(){return"AND"},wp=function(){return"OR"},bp=function(){return"BETWEEN"},xp=function(){return"FROM"},Sp=function(){return"FOR"},Ep=function(){return"SUBSTRING"},Tp=function(){return"EXTRACT"},Mp=function(){return"TRIM"},Ip=function(){return"POSITION"},kp=function(){return"TIMESTAMP"},Pp=function(){return"DATE"},Cp=function(){return"LEADING"},Ap=function(){return"TRAILING"},Lp=function(){return"BOTH"},Op=function(){return"TO"},Fp=function(){return"INTERVAL"},Rp=function(){return"YEAR"},Dp=function(){return"MONTH"},Np=function(){return"DAY"},jp=function(){return"HOUR"},Vp=function(){return"MINUTE"},Bp=function(){return"SECOND"},zp=function(){return"CASE"},Gp=function(){return"END"},Up=function(){return"WHEN"},Xp=function(){return"THEN"},qp=function(){return"ELSE"},Hp=function(tr){return tr.join("")},sr=0,Bs=[{line:1,column:1}],$s=0,Po=[],Tr=0;if("startRule"in Dt){if(!(Dt.startRule in Xt))throw new Error(`Can't start parsing from rule "`+Dt.startRule+'".');Ht=Xt[Dt.startRule]}function Nr(tr,lr){return{type:"literal",text:tr,ignoreCase:lr}}function fs(tr,lr,cr){return{type:"class",parts:tr,inverted:lr,ignoreCase:cr}}function Wp(){return{type:"end"}}function Jo(tr){var lr,cr=Bs[tr];if(cr)return cr;for(lr=tr-1;!Bs[lr];)lr--;for(cr={line:(cr=Bs[lr]).line,column:cr.column};lr<tr;)Ft.charCodeAt(lr)===10?(cr.line++,cr.column=1):cr.column++,lr++;return Bs[tr]=cr,cr}function Ko(tr,lr){var cr=Jo(tr),$r=Jo(lr);return{source:zt,start:{offset:tr,line:cr.line,column:cr.column},end:{offset:lr,line:$r.line,column:$r.column}}}function Lr(tr){sr<$s||(sr>$s&&($s=sr,Po=[]),Po.push(tr))}function Qp(tr,lr,cr){return new Tt(Tt.buildMessage(tr,lr),tr,lr,cr)}function Yo(){var tr,lr;return tr=sr,Ir(),(lr=bn())!==Vt?(Ir(),tr=cu(lr)):(sr=tr,tr=Vt),tr}function na(){var tr,lr,cr,$r,Or,Wr,Kr,vn;if(tr=sr,(lr=bn())!==Vt){for(cr=[],$r=sr,Or=Ir(),(Wr=Js())!==Vt?(Kr=Ir(),(vn=bn())!==Vt?$r=Or=[Or,Wr,Kr,vn]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt);$r!==Vt;)cr.push($r),$r=sr,Or=Ir(),(Wr=Js())!==Vt?(Kr=Ir(),(vn=bn())!==Vt?$r=Or=[Or,Wr,Kr,vn]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt);tr=du(lr,cr)}else sr=tr,tr=Vt;return tr}function bn(){var tr,lr,cr,$r,Or,Wr,Kr,vn;if(tr=sr,(lr=Co())!==Vt){for(cr=[],$r=sr,Or=Ir(),(Wr=Pl())!==Vt?(Kr=Ir(),(vn=Co())!==Vt?$r=Or=[Or,Wr,Kr,vn]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt);$r!==Vt;)cr.push($r),$r=sr,Or=Ir(),(Wr=Pl())!==Vt?(Kr=Ir(),(vn=Co())!==Vt?$r=Or=[Or,Wr,Kr,vn]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt);tr=ko(lr,cr)}else sr=tr,tr=Vt;return tr}function Co(){var tr,lr,cr,$r,Or,Wr,Kr,vn;if(tr=sr,(lr=zs())!==Vt){for(cr=[],$r=sr,Or=Ir(),(Wr=Ws())!==Vt?(Kr=Ir(),(vn=zs())!==Vt?$r=Or=[Or,Wr,Kr,vn]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt);$r!==Vt;)cr.push($r),$r=sr,Or=Ir(),(Wr=Ws())!==Vt?(Kr=Ir(),(vn=zs())!==Vt?$r=Or=[Or,Wr,Kr,vn]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt);tr=ko(lr,cr)}else sr=tr,tr=Vt;return tr}function zs(){var tr,lr,cr,$r,Or;return tr=sr,(lr=As())===Vt&&(lr=sr,Ft.charCodeAt(sr)===33?(cr=Wt,sr++):(cr=Vt,Tr===0&&Lr(so)),cr!==Vt?($r=sr,Tr++,Ft.charCodeAt(sr)===61?(Or=Qt,sr++):(Or=Vt,Tr===0&&Lr(Rs)),Tr--,Or===Vt?$r=void 0:(sr=$r,$r=Vt),$r!==Vt?lr=cr=[cr,$r]:(sr=lr,lr=Vt)):(sr=lr,lr=Vt)),lr!==Vt?(cr=Ir(),($r=zs())!==Vt?tr=hu($r):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=Zp()),tr}function Zp(){var tr,lr,cr;return tr=sr,(lr=ms())!==Vt?(Ir(),(cr=Jp())===Vt&&(cr=null),tr=pu(lr,cr)):(sr=tr,tr=Vt),tr}function Jp(){var tr;return(tr=Kp())===Vt&&(tr=r$())===Vt&&(tr=e$())===Vt&&(tr=Yp())===Vt&&(tr=t$()),tr}function Kp(){var tr,lr,cr,$r,Or,Wr;if(tr=[],lr=sr,cr=Ir(),($r=$a())!==Vt?(Or=Ir(),(Wr=ms())!==Vt?lr=cr=[cr,$r,Or,Wr]:(sr=lr,lr=Vt)):(sr=lr,lr=Vt),lr!==Vt)for(;lr!==Vt;)tr.push(lr),lr=sr,cr=Ir(),($r=$a())!==Vt?(Or=Ir(),(Wr=ms())!==Vt?lr=cr=[cr,$r,Or,Wr]:(sr=lr,lr=Vt)):(sr=lr,lr=Vt);else tr=Vt;return tr!==Vt&&(tr=$u(tr)),tr}function $a(){var tr;return Ft.substr(sr,2)===Zt?(tr=Zt,sr+=2):(tr=Vt,Tr===0&&Lr(oo)),tr===Vt&&(Ft.charCodeAt(sr)===62?(tr=Kt,sr++):(tr=Vt,Tr===0&&Lr(ao)),tr===Vt&&(Ft.substr(sr,2)===er?(tr=er,sr+=2):(tr=Vt,Tr===0&&Lr(lo)),tr===Vt&&(Ft.substr(sr,2)===Yt?(tr=Yt,sr+=2):(tr=Vt,Tr===0&&Lr(uo)),tr===Vt&&(Ft.charCodeAt(sr)===60?(tr=rr,sr++):(tr=Vt,Tr===0&&Lr(co)),tr===Vt&&(Ft.charCodeAt(sr)===61?(tr=Qt,sr++):(tr=Vt,Tr===0&&Lr(Rs)),tr===Vt&&(Ft.substr(sr,2)===ir?(tr=ir,sr+=2):(tr=Vt,Tr===0&&Lr(ho)))))))),tr}function Yp(){var tr,lr,cr,$r;return tr=sr,(lr=Ml())!==Vt?(Ir(),(cr=As())!==Vt?(Ir(),($r=ms())!==Vt?tr=fu(lr,$r):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=Ml())!==Vt?(Ir(),(cr=ms())!==Vt?tr=mu(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)),tr}function e$(){var tr,lr,cr,$r,Or,Wr;return tr=sr,(lr=As())!==Vt?(Ir(),(cr=Cl())!==Vt?(Ir(),($r=ms())!==Vt?(Ir(),(Or=Ws())!==Vt?(Ir(),(Wr=ms())!==Vt?tr=yu(cr,$r,Wr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=Cl())!==Vt?(Ir(),(cr=ms())!==Vt?(Ir(),($r=Ws())!==Vt?(Ir(),(Or=ms())!==Vt?tr=gu(lr,cr,Or):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)),tr}function ga(){var tr,lr,cr,$r,Or;return tr=sr,lr=sr,(cr=As())!==Vt?($r=Ir(),(Or=Il())!==Vt?lr=cr=[cr,$r,Or]:(sr=lr,lr=Vt)):(sr=lr,lr=Vt),lr!==Vt&&(lr=Go(lr)),(tr=lr)===Vt&&(tr=Il()),tr}function Ao(){var tr,lr,cr,$r,Or;return tr=sr,lr=sr,(cr=As())!==Vt?($r=Ir(),(Or=No())!==Vt?lr=cr=[cr,$r,Or]:(sr=lr,lr=Vt)):(sr=lr,lr=Vt),lr!==Vt&&(lr=Go(lr)),(tr=lr)===Vt&&(tr=No()),tr}function t$(){var tr,lr,cr,$r;return tr=sr,(lr=ga())!==Vt?(Ir(),(cr=Ss())!==Vt?(Ir(),P$()!==Vt?(Ir(),($r=Do())!==Vt?tr=vu(lr,cr,$r):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=ga())!==Vt?(Ir(),(cr=Ss())!==Vt?tr=_u(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)),tr}function r$(){var tr,lr,cr,$r;return tr=sr,(lr=Ao())!==Vt?(Ir(),(cr=is())!==Vt?(Ir(),($r=na())!==Vt?(Ir(),ns()!==Vt?tr=wu(lr,$r):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=Ao())!==Vt?(Ir(),(cr=is())!==Vt?(Ir(),($r=ns())!==Vt?tr=bu(lr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=Ao())!==Vt?(Ir(),(cr=Ro())!==Vt?tr=xu(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt))),tr}function ms(){var tr,lr,cr,$r,Or,Wr,Kr,vn;if(tr=sr,(lr=Lo())!==Vt){for(cr=[],$r=sr,Or=Ir(),(Wr=_a())!==Vt?(Kr=Ir(),(vn=Lo())!==Vt?$r=Or=[Or,Wr,Kr,vn]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt);$r!==Vt;)cr.push($r),$r=sr,Or=Ir(),(Wr=_a())!==Vt?(Kr=Ir(),(vn=Lo())!==Vt?$r=Or=[Or,Wr,Kr,vn]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt);tr=ko(lr,cr)}else sr=tr,tr=Vt;return tr}function _a(){var tr;return Ft.charCodeAt(sr)===43?(tr=nr,sr++):(tr=Vt,Tr===0&&Lr(Ts)),tr===Vt&&(Ft.charCodeAt(sr)===45?(tr=ar,sr++):(tr=Vt,Tr===0&&Lr(Ms))),tr}function Lo(){var tr,lr,cr,$r,Or,Wr,Kr,vn;if(tr=sr,(lr=Oo())!==Vt){for(cr=[],$r=sr,Or=Ir(),(Wr=ba())!==Vt?(Kr=Ir(),(vn=Oo())!==Vt?$r=Or=[Or,Wr,Kr,vn]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt);$r!==Vt;)cr.push($r),$r=sr,Or=Ir(),(Wr=ba())!==Vt?(Kr=Ir(),(vn=Oo())!==Vt?$r=Or=[Or,Wr,Kr,vn]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt);tr=Su(lr,cr)}else sr=tr,tr=Vt;return tr}function ba(){var tr;return Ft.charCodeAt(sr)===42?(tr=or,sr++):(tr=Vt,Tr===0&&Lr(po)),tr===Vt&&(Ft.charCodeAt(sr)===47?(tr=ur,sr++):(tr=Vt,Tr===0&&Lr($o))),tr}function Oo(){var tr,lr;return(tr=h$())===Vt&&(tr=o$())===Vt&&(tr=a$())===Vt&&(tr=l$())===Vt&&(tr=u$())===Vt&&(tr=c$())===Vt&&(tr=w$())===Vt&&(tr=i$())===Vt&&(tr=Ro())===Vt&&(tr=sr,is()!==Vt?(Ir(),(lr=bn())!==Vt?(Ir(),ns()!==Vt?tr=Eu(lr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)),tr}function i$(){var tr;return(tr=n$())!==Vt&&(tr=Tu(tr)),tr}function n$(){var tr;return(tr=s$())!==Vt&&(tr=Uo(tr)),tr}function s$(){var tr,lr,cr,$r;if(tr=sr,(lr=Fo())!==Vt){for(cr=[],$r=$l();$r!==Vt;)cr.push($r),$r=$l();tr=Xo(lr,cr)}else sr=tr,tr=Vt;return tr}function xa(){var tr,lr,cr,$r;if(tr=sr,(lr=Fo())!==Vt){for(cr=[],$r=qr();$r!==Vt;)cr.push($r),$r=qr();tr=Xo(lr,cr)}else sr=tr,tr=Vt;return tr}function Fo(){var tr;return Ks.test(Ft.charAt(sr))?(tr=Ft.charAt(sr),sr++):(tr=Vt,Tr===0&&Lr(fo)),tr}function qr(){var tr;return Ys.test(Ft.charAt(sr))?(tr=Ft.charAt(sr),sr++):(tr=Vt,Tr===0&&Lr(Sr)),tr}function $l(){var tr;return eo.test(Ft.charAt(sr))?(tr=Ft.charAt(sr),sr++):(tr=Vt,Tr===0&&Lr(Yr)),tr}function Ro(){var tr,lr,cr;return tr=sr,Ft.charCodeAt(sr)===64?(lr=dr,sr++):(lr=Vt,Tr===0&&Lr(bs)),lr!==Vt&&(cr=xa())!==Vt?tr=lr=[lr,cr]:(sr=tr,tr=Vt),tr!==Vt&&(tr=Mu(tr)),tr}function o$(){var tr,lr,cr;return tr=sr,L$()!==Vt?(Ir(),is()!==Vt?(Ir(),(lr=d$())!==Vt?(Ir(),jo()!==Vt?(Ir(),(cr=bn())!==Vt?(Ir(),ns()!==Vt?tr=Iu(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function a$(){var tr,lr,cr,$r,Or,Wr,Kr;return tr=sr,A$()!==Vt?(Ir(),is()!==Vt?(Ir(),(lr=bn())!==Vt?(Ir(),jo()!==Vt?(Ir(),(cr=bn())!==Vt?(Ir(),$r=sr,(Or=C$())!==Vt?(Wr=Ir(),(Kr=bn())!==Vt?$r=Or=[Or,Wr,Kr,Ir()]:(sr=$r,$r=Vt)):(sr=$r,$r=Vt),$r===Vt&&($r=null),(Or=ns())!==Vt?tr=ku(lr,cr,$r):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function l$(){var tr,lr,cr,$r;return tr=sr,Al()!==Vt?(Ir(),is()!==Vt?(Ir(),(lr=yl())===Vt&&(lr=null),Ir(),(cr=bn())!==Vt?(Ir(),jo()!==Vt?(Ir(),($r=bn())!==Vt?(Ir(),ns()!==Vt?tr=Pu(lr,cr,$r):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,Al()!==Vt?(Ir(),is()!==Vt?(Ir(),(lr=yl())===Vt&&(lr=null),Ir(),(cr=bn())!==Vt?(Ir(),ns()!==Vt?tr=Cu(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)),tr}function yl(){var tr;return(tr=D$())===Vt&&(tr=N$())===Vt&&(tr=j$()),tr}function u$(){var tr,lr,cr;return tr=sr,O$()!==Vt?(Ir(),is()!==Vt?(Ir(),(lr=bn())!==Vt?(Ir(),No()!==Vt?(Ir(),(cr=bn())!==Vt?(Ir(),ns()!==Vt?tr=Au(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function c$(){var tr,lr,cr;return tr=sr,(lr=z$())!==Vt?(Ir(),is()!==Vt?(Ir(),(cr=na())===Vt&&(cr=null),Ir(),ns()!==Vt?tr=Lu(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function d$(){var tr;return(tr=Ol())===Vt&&(tr=Fl())===Vt&&(tr=Rl())===Vt&&(tr=Dl())===Vt&&(tr=Nl())===Vt&&(tr=ws()),tr}function h$(){var tr;return(tr=Do())===Vt&&(tr=S$())===Vt&&(tr=_$())===Vt&&(tr=v$())===Vt&&(tr=g$())===Vt&&(tr=p$())===Vt&&(tr=$$()),tr}function p$(){var tr,lr;return tr=sr,F$()!==Vt?(Ir(),(lr=Ss())!==Vt?tr=Ou(lr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function $$(){var tr,lr,cr,$r;return tr=sr,Ll()!==Vt?(Ir(),Ft.charCodeAt(sr)===45?(lr=ar,sr++):(lr=Vt,Tr===0&&Lr(Ms)),lr===Vt&&(Ft.charCodeAt(sr)===43?(lr=nr,sr++):(lr=Vt,Tr===0&&Lr(Ts))),lr!==Vt?(Ir(),(cr=Ss())!==Vt?(Ir(),($r=_l())!==Vt?tr=Fu(lr,cr,$r):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,Ll()!==Vt?(Ir(),(lr=Ss())!==Vt?(Ir(),(cr=_l())!==Vt?tr=Ru(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)),tr}function _l(){var tr,lr,cr;return tr=sr,(lr=f$())!==Vt?(Ir(),V$()!==Vt?(Ir(),(cr=m$())!==Vt?tr=Du(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=y$()),tr}function f$(){var tr,lr,cr;return tr=sr,(lr=Cs())!==Vt?(Ir(),is()!==Vt?(Ir(),(cr=Us())!==Vt?(Ir(),ns()!==Vt?tr=Nu(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=Cs())!==Vt&&(lr=qo(lr)),tr=lr),tr}function m$(){var tr,lr,cr,$r;return tr=sr,(lr=Cs())!==Vt&&(lr=ju(lr)),(tr=lr)===Vt&&(tr=sr,(lr=ws())!==Vt?(Ir(),is()!==Vt?(Ir(),(cr=Us())!==Vt?(Ir(),Js()!==Vt?(Ir(),($r=Gs())!==Vt?(Ir(),ns()!==Vt?tr=Ho(cr,$r):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=ws())!==Vt?(Ir(),is()!==Vt?(Ir(),(cr=Us())!==Vt?(Ir(),ns()!==Vt?tr=Vu(cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=ws())!==Vt&&(lr=Bu()),tr=lr))),tr}function y$(){var tr,lr,cr,$r;return tr=sr,(lr=Cs())!==Vt?(Ir(),is()!==Vt?(Ir(),(cr=Gs())!==Vt?(Ir(),ns()!==Vt?tr=zu(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=Cs())!==Vt&&(lr=qo(lr)),(tr=lr)===Vt&&(tr=sr,(lr=ws())!==Vt?(Ir(),is()!==Vt?(Ir(),(cr=Us())!==Vt?(Ir(),Js()!==Vt?(Ir(),($r=Gs())!==Vt?(Ir(),ns()!==Vt?tr=Ho(cr,$r):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=ws())!==Vt?(Ir(),is()!==Vt?(Ir(),(cr=Gs())!==Vt?(Ir(),ns()!==Vt?tr=Gu(cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=ws())!==Vt&&(lr=Uu()),tr=lr)))),tr}function Cs(){var tr,lr;return tr=sr,(lr=Rl())!==Vt&&(lr=Xu()),(tr=lr)===Vt&&(tr=sr,(lr=Dl())!==Vt&&(lr=qu()),(tr=lr)===Vt&&(tr=sr,(lr=Nl())!==Vt&&(lr=Hu()),(tr=lr)===Vt&&(tr=sr,(lr=Fl())!==Vt&&(lr=Wu()),(tr=lr)===Vt&&(tr=sr,(lr=Ol())!==Vt&&(lr=Qu()),tr=lr)))),tr}function Gs(){var tr;return(tr=Es())!==Vt&&(tr=Wo(tr)),tr}function Us(){var tr;return(tr=Es())!==Vt&&(tr=Wo(tr)),tr}function g$(){var tr,lr;return tr=sr,R$()!==Vt?(Ir(),(lr=Ss())!==Vt?tr=Zu(lr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function v$(){var tr;return(tr=M$())!==Vt&&(tr=Ju()),tr}function _$(){var tr,lr;return tr=sr,(lr=I$())!==Vt&&(lr=Ku()),(tr=lr)===Vt&&(tr=sr,(lr=k$())!==Vt&&(lr=Yu()),tr=lr),tr}function Ss(){var tr;return(tr=Do())===Vt&&(tr=Ro()),tr}function Do(){var tr,lr,cr,$r,Or;if(tr=sr,Ft.charCodeAt(sr)===39?(lr=hr,sr++):(lr=Vt,Tr===0&&Lr(cs)),lr===Vt&&(Ft.substr(sr,2)===gr?(lr=gr,sr+=2):(lr=Vt,Tr===0&&Lr(Is))),lr!==Vt){for(cr=[],$r=sr,Ft.substr(sr,2)===pr?(Or=pr,sr+=2):(Or=Vt,Tr===0&&Lr(Fr)),Or!==Vt&&(Or=Qo()),($r=Or)===Vt&&(Os.test(Ft.charAt(sr))?($r=Ft.charAt(sr),sr++):($r=Vt,Tr===0&&Lr(vs)));$r!==Vt;)cr.push($r),$r=sr,Ft.substr(sr,2)===pr?(Or=pr,sr+=2):(Or=Vt,Tr===0&&Lr(Fr)),Or!==Vt&&(Or=Qo()),($r=Or)===Vt&&(Os.test(Ft.charAt(sr))?($r=Ft.charAt(sr),sr++):($r=Vt,Tr===0&&Lr(vs)));Ft.charCodeAt(sr)===39?($r=hr,sr++):($r=Vt,Tr===0&&Lr(cs)),$r!==Vt?tr=_c(cr):(sr=tr,tr=Vt)}else sr=tr,tr=Vt;return tr}function w$(){var tr;return(tr=b$())===Vt&&(tr=x$()),tr}function b$(){var tr,lr,cr,$r,Or;if(tr=sr,Qs()!==Vt)if(Ir(),(lr=bn())!==Vt){for(Ir(),cr=[],$r=qs();$r!==Vt;)cr.push($r),$r=qs();$r=Ir(),(Or=Zs())!==Vt?tr=_d(lr,cr):(sr=tr,tr=Vt)}else sr=tr,tr=Vt;else sr=tr,tr=Vt;if(tr===Vt)if(tr=sr,Qs()!==Vt)if(Ir(),(lr=bn())!==Vt){for(Ir(),cr=[],$r=qs();$r!==Vt;)cr.push($r),$r=qs();$r=Ir(),(Or=xl())!==Vt?(Ir(),Zs()!==Vt?tr=_h(lr,cr,Or):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)}else sr=tr,tr=Vt;else sr=tr,tr=Vt;return tr}function x$(){var tr,lr,cr,$r;if(tr=sr,Qs()!==Vt){for(Ir(),lr=[],cr=Xs();cr!==Vt;)lr.push(cr),cr=Xs();cr=Ir(),($r=Zs())!==Vt?tr=ep(lr):(sr=tr,tr=Vt)}else sr=tr,tr=Vt;if(tr===Vt)if(tr=sr,Qs()!==Vt){for(Ir(),lr=[],cr=Xs();cr!==Vt;)lr.push(cr),cr=Xs();cr=Ir(),($r=xl())!==Vt?(Ir(),Zs()!==Vt?tr=tp(lr,$r):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)}else sr=tr,tr=Vt;return tr}function Xs(){var tr,lr,cr;return tr=sr,Vl()!==Vt?(Ir(),(lr=bn())!==Vt?(Ir(),Bl()!==Vt?(Ir(),(cr=bn())!==Vt?tr=Zo(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function qs(){var tr,lr,cr;return tr=sr,Vl()!==Vt?(Ir(),(lr=bn())!==Vt?(Ir(),Bl()!==Vt?(Ir(),(cr=bn())!==Vt?tr=Zo(lr,cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function xl(){var tr,lr;return tr=sr,B$()!==Vt?(Ir(),(lr=bn())!==Vt?tr=rp(lr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function S$(){var tr,lr,cr,$r;return tr=sr,(lr=E$())!==Vt?(cr=sr,Tr++,$r=Fo(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=np(lr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function E$(){var tr,lr,cr,$r;return tr=sr,(lr=Hs())!==Vt&&(cr=Sl())!==Vt&&($r=El())!==Vt?tr=sp(lr,cr,$r):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=Hs())!==Vt&&(cr=Sl())!==Vt?tr=ap(lr,cr):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=Hs())!==Vt&&(cr=El())!==Vt?tr=lp(lr,cr):(sr=tr,tr=Vt),tr===Vt&&(tr=sr,(lr=Hs())!==Vt&&(lr=up(lr)),tr=lr))),tr}function Hs(){var tr,lr,cr;return(tr=Es())===Vt&&(tr=sr,Ft.charCodeAt(sr)===45?(lr=ar,sr++):(lr=Vt,Tr===0&&Lr(Ms)),lr===Vt&&(Ft.charCodeAt(sr)===43?(lr=nr,sr++):(lr=Vt,Tr===0&&Lr(Ts))),lr!==Vt&&(cr=Es())!==Vt?tr=cp(lr,cr):(sr=tr,tr=Vt)),tr}function Sl(){var tr,lr,cr;return tr=sr,Ft.charCodeAt(sr)===46?(lr=mr,sr++):(lr=Vt,Tr===0&&Lr(xn)),lr!==Vt?((cr=Es())===Vt&&(cr=null),tr=dp(cr)):(sr=tr,tr=Vt),tr}function El(){var tr,lr,cr;return tr=sr,(lr=T$())!==Vt&&(cr=Es())!==Vt?tr=hp(lr,cr):(sr=tr,tr=Vt),tr}function Es(){var tr,lr;if(tr=[],(lr=Tl())!==Vt)for(;lr!==Vt;)tr.push(lr),lr=Tl();else tr=Vt;return tr!==Vt&&(tr=pp(tr)),tr}function Tl(){var tr;return to.test(Ft.charAt(sr))?(tr=Ft.charAt(sr),sr++):(tr=Vt,Tr===0&&Lr(_s)),tr}function T$(){var tr,lr,cr;return tr=sr,ro.test(Ft.charAt(sr))?(lr=Ft.charAt(sr),sr++):(lr=Vt,Tr===0&&Lr(mo)),lr!==Vt?(io.test(Ft.charAt(sr))?(cr=Ft.charAt(sr),sr++):(cr=Vt,Tr===0&&Lr(ps)),cr===Vt&&(cr=null),tr=$p(lr,cr)):(sr=tr,tr=Vt),tr}function M$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===wr?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(Ds)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=lr=[lr,cr]:(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function I$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===br?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(Ns)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=lr=[lr,cr]:(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function k$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,5).toLowerCase()===_r?(lr=Ft.substr(sr,5),sr+=5):(lr=Vt,Tr===0&&Lr(Vr)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=lr=[lr,cr]:(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function No(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,2).toLowerCase()===Mr?(lr=Ft.substr(sr,2),sr+=2):(lr=Vt,Tr===0&&Lr(yo)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=fp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Ml(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,2).toLowerCase()===Ar?(lr=Ft.substr(sr,2),sr+=2):(lr=Vt,Tr===0&&Lr(js)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=mp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Il(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===xr?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(go)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=yp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function P$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,6).toLowerCase()===yr?(lr=Ft.substr(sr,6),sr+=6):(lr=Vt,Tr===0&&Lr(vo)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=gp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function As(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,3).toLowerCase()===Er?(lr=Ft.substr(sr,3),sr+=3):(lr=Vt,Tr===0&&Lr(ks)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=vp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Ws(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,3).toLowerCase()===Cr?(lr=Ft.substr(sr,3),sr+=3):(lr=Vt,Tr===0&&Lr(_o)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=_p():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Pl(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,2).toLowerCase()===Dr?(lr=Ft.substr(sr,2),sr+=2):(lr=Vt,Tr===0&&Lr(Ps)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=wp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Cl(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,7).toLowerCase()===jr?(lr=Ft.substr(sr,7),sr+=7):(lr=Vt,Tr===0&&Lr(En)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=bp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function jo(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===Hr?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(wo)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=xp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function C$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,3).toLowerCase()===zr?(lr=Ft.substr(sr,3),sr+=3):(lr=Vt,Tr===0&&Lr(Vs)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Sp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function A$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,9).toLowerCase()===Qr?(lr=Ft.substr(sr,9),sr+=9):(lr=Vt,Tr===0&&Lr(bo)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Ep():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function L$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,7).toLowerCase()===Xr?(lr=Ft.substr(sr,7),sr+=7):(lr=Vt,Tr===0&&Lr(xo)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Tp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Al(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===Br?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(So)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Mp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function O$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,8).toLowerCase()===Ur?(lr=Ft.substr(sr,8),sr+=8):(lr=Vt,Tr===0&&Lr(Eo)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Ip():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function F$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,9).toLowerCase()===Jr?(lr=Ft.substr(sr,9),sr+=9):(lr=Vt,Tr===0&&Lr(To)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=kp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function R$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===Zr?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(os)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Pp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function D$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,7).toLowerCase()===pn?(lr=Ft.substr(sr,7),sr+=7):(lr=Vt,Tr===0&&Lr(Mo)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Cp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function N$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,8).toLowerCase()===_i?(lr=Ft.substr(sr,8),sr+=8):(lr=Vt,Tr===0&&Lr(Io)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Ap():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function j$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===Rr?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(vr)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Lp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function V$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,2).toLowerCase()===Mn?(lr=Ft.substr(sr,2),sr+=2):(lr=Vt,Tr===0&&Lr(kr)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Op():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Ll(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,8).toLowerCase()===ls?(lr=Ft.substr(sr,8),sr+=8):(lr=Vt,Tr===0&&Lr(Pr)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Fp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Ol(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===us?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(Gr)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Rp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Fl(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,5).toLowerCase()===ss?(lr=Ft.substr(sr,5),sr+=5):(lr=Vt,Tr===0&&Lr(Tn)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Dp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Rl(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,3).toLowerCase()===kn?(lr=Ft.substr(sr,3),sr+=3):(lr=Vt,Tr===0&&Lr(sn)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Np():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Dl(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===In?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(as)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=jp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Nl(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,6).toLowerCase()===_n?(lr=Ft.substr(sr,6),sr+=6):(lr=Vt,Tr===0&&Lr(xs)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Vp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function ws(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,6).toLowerCase()===Cn?(lr=Ft.substr(sr,6),sr+=6):(lr=Vt,Tr===0&&Lr(eu)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Bp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Qs(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===jn?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(tu)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=zp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Zs(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,3).toLowerCase()===ts?(lr=Ft.substr(sr,3),sr+=3):(lr=Vt,Tr===0&&Lr(ru)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Gp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Vl(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===ds?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(iu)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Up():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Bl(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===es?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(nu)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=Xp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function B$(){var tr,lr,cr,$r;return tr=sr,Ft.substr(sr,4).toLowerCase()===hs?(lr=Ft.substr(sr,4),sr+=4):(lr=Vt,Tr===0&&Lr(su)),lr!==Vt?(cr=sr,Tr++,$r=qr(),Tr--,$r===Vt?cr=void 0:(sr=cr,cr=Vt),cr!==Vt?tr=qp():(sr=tr,tr=Vt)):(sr=tr,tr=Vt),tr}function Js(){var tr;return Ft.charCodeAt(sr)===44?(tr=rs,sr++):(tr=Vt,Tr===0&&Lr(ou)),tr}function is(){var tr;return Ft.charCodeAt(sr)===40?(tr=ys,sr++):(tr=Vt,Tr===0&&Lr(au)),tr}function ns(){var tr;return Ft.charCodeAt(sr)===41?(tr=gs,sr++):(tr=Vt,Tr===0&&Lr(lu)),tr}function Ir(){var tr,lr;for(tr=[],lr=zl();lr!==Vt;)tr.push(lr),lr=zl();return tr}function zl(){var tr;return no.test(Ft.charAt(sr))?(tr=Ft.charAt(sr),sr++):(tr=Vt,Tr===0&&Lr(uu)),tr}function z$(){var tr,lr,cr,$r;if(tr=sr,(lr=xa())!==Vt&&(lr=Uo(lr)),(tr=lr)===Vt)if(tr=sr,Ft.charCodeAt(sr)===96?(lr=Ls,sr++):(lr=Vt,Tr===0&&Lr(Bo)),lr!==Vt){if(cr=[],Fs.test(Ft.charAt(sr))?($r=Ft.charAt(sr),sr++):($r=Vt,Tr===0&&Lr(zo)),$r!==Vt)for(;$r!==Vt;)cr.push($r),Fs.test(Ft.charAt(sr))?($r=Ft.charAt(sr),sr++):($r=Vt,Tr===0&&Lr(zo));else cr=Vt;cr!==Vt?(Ft.charCodeAt(sr)===96?($r=Ls,sr++):($r=Vt,Tr===0&&Lr(Bo)),$r!==Vt?tr=Hp(cr):(sr=tr,tr=Vt)):(sr=tr,tr=Vt)}else sr=tr,tr=Vt;return tr}function G$(tr,lr){return{type:"unary-expression",operator:tr,expr:lr}}function Gl(tr,lr,cr,$r){var Or={type:"binary-expression",operator:tr,left:lr,right:cr};return $r!==void 0&&(Or.escape=$r),Or}function U$(tr,lr){for(var cr=[tr],$r=0;$r<lr.length;$r++)cr.push(lr[$r][3]);return cr}function X$(tr,lr,cr){return U$(tr,lr)}function Vo(tr,lr){for(var cr=tr,$r=0;$r<lr.length;$r++)cr=Gl(lr[$r][1],cr,lr[$r][3]);return cr}if((Nt=Ht())!==Vt&&sr===Ft.length)return Nt;throw Nt!==Vt&&sr<Ft.length&&Lr(Wp()),Qp(Po,$s<Ft.length?Ft.charAt($s):null,$s<Ft.length?Ko($s,$s+1):Ko($s,$s))}return _t(Tt,Error),Tt.prototype.format=function(Ft){var Dt="Error: "+this.message;if(this.location){var Nt,Vt=null;for(Nt=0;Nt<Ft.length;Nt++)if(Ft[Nt].source===this.location.source){Vt=Ft[Nt].text.split(/\r\n|\n|\r/g);break}var zt=this.location.start,Xt=this.location.source+":"+zt.line+":"+zt.column;if(Vt){var Ht=this.location.end,Wt=Mt("",zt.line.toString().length),Qt=Vt[zt.line-1],Zt=zt.line===Ht.line?Ht.column:Qt.length+1;Dt+=`
 --> `+Xt+`
`+Wt+` |
`+zt.line+" | "+Qt+`
`+Wt+" | "+Mt("",zt.column-1)+Mt("",Zt-zt.column,"^")}else Dt+=`
 at `+Xt}return Dt},Tt.buildMessage=function(Ft,Dt){var Nt={literal:function(Zt){return'"'+zt(Zt.text)+'"'},class:function(Zt){var Kt=Zt.parts.map(function(er){return Array.isArray(er)?Xt(er[0])+"-"+Xt(er[1]):Xt(er)});return"["+(Zt.inverted?"^":"")+Kt+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(Zt){return Zt.description}};function Vt(Zt){return Zt.charCodeAt(0).toString(16).toUpperCase()}function zt(Zt){return Zt.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Kt){return"\\x0"+Vt(Kt)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Kt){return"\\x"+Vt(Kt)})}function Xt(Zt){return Zt.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(Kt){return"\\x0"+Vt(Kt)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(Kt){return"\\x"+Vt(Kt)})}function Ht(Zt){return Nt[Zt.type](Zt)}function Wt(Zt){var Kt,er,Yt=Zt.map(Ht);if(Yt.sort(),Yt.length>0){for(Kt=1,er=1;Kt<Yt.length;Kt++)Yt[Kt-1]!==Yt[Kt]&&(Yt[er]=Yt[Kt],er++);Yt.length=er}switch(Yt.length){case 1:return Yt[0];case 2:return Yt[0]+" or "+Yt[1];default:return Yt.slice(0,-1).join(", ")+", or "+Yt[Yt.length-1]}}function Qt(Zt){return Zt?'"'+zt(Zt)+'"':"end of input"}return"Expected "+Wt(Ft)+" but "+Qt(Dt)+" found."},{SyntaxError:Tt,parse:Pt}},(n$9=e$7).exports&&(n$9.exports=t$7());class u$7{static parse(Tt){return e$7.exports.parse(Tt)}}const l$8=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,u$6=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,o$a=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,c$a=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,h$b=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,d$7=new Set(["current_timestamp","current_date","current_time"]);function p$7(_t,Tt){return(_t+="").length>=Tt?_t:new Array(Tt-_t.length+1).join("0")+_t}function v$7(_t,Tt,Mt="0",Pt="0",Ft="0",Dt="0",Nt="",Vt="0",zt="0"){if(Nt==="+"||Nt==="-"){const Xt=`${p$7(parseInt(_t,10),4)}-${p$7(parseInt(Tt,10),2)}-${p$7(parseInt(Mt,10),2)}`;let Ht="";parseFloat(Dt)<10&&(Ht="0");const Wt=`${p$7(parseInt(Pt,10),2)}:${p$7(parseInt(Ft,10),2)}:${Ht+parseFloat(Dt).toString()}`,Qt=`${Nt}${p$7(parseInt(Vt,10),2)}:${p$7(parseInt(zt,10),2)}`;return new Date(Xt+"T"+Wt+Qt)}return new Date(parseInt(_t,10),parseInt(Tt,10)-1,parseInt(Mt,10),parseInt(Pt,10),parseInt(Ft,10),parseFloat(Dt))}class f$5{static makeBool(Tt){return T$2(Tt)}static featureValue(Tt,Mt,Pt,Ft){return O$4(Tt,Mt,Pt,Ft)}static equalsNull(Tt){return Tt===null}static applyLike(Tt,Mt,Pt){return b$6(Tt,Mt,Pt)}static ensureArray(Tt){return _$3(Tt)}static applyIn(Tt,Mt){return I$4(Tt,Mt)}static currentDate(){const Tt=new Date;return Tt.setHours(0,0,0,0),Tt}static makeSqlInterval(Tt,Mt,Pt){return e$8.createFromValueAndQualifer(Tt,Mt,Pt)}static convertInterval(Tt){return Tt instanceof e$8?Tt.valueInMilliseconds():Tt}static currentTimestamp(){return new Date}static compare(Tt,Mt,Pt){return x$5(Tt,Mt,Pt)}static calculate(Tt,Mt,Pt){return F$2(Tt,Mt,Pt)}static makeComparable(Tt){return E$4(Tt)}static evaluateFunction(Tt,Mt){return r$8(Tt,Mt)}static lookup(Tt,Mt){const Pt=Mt[Tt];return Pt===void 0?null:Pt}static between(Tt,Mt){return Tt==null||Mt[0]==null||Mt[1]==null?null:Tt>=Mt[0]&&Tt<=Mt[1]}static notbetween(Tt,Mt){return Tt==null||Mt[0]==null||Mt[1]==null?null:Tt<Mt[0]||Tt>Mt[1]}static ternaryNot(Tt){return S$3(Tt)}static ternaryAnd(Tt,Mt){return w$1(Tt,Mt)}static ternaryOr(Tt,Mt){return y$6(Tt,Mt)}}class m$9{constructor(Tt,Mt){this.fieldsIndex=Mt,this.datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=u$7.parse(Tt);const{isStandardized:Pt,isAggregate:Ft,referencedFieldNames:Dt}=this._extractExpressionInfo(Mt);this.referencedFieldNames=Dt,this.isStandardized=Pt,this.isAggregate=Ft}static create(Tt,Mt){return new m$9(Tt,Mt)}get fieldNames(){return this.referencedFieldNames}testSet(Tt,Mt=k$1){const Pt={};for(const Ft of this.fieldNames)Pt[Ft]=Tt.map(Dt=>Mt.getAttribute(Dt,Ft));return!!this._evaluateNode(this.parseTree,{attributes:Pt},k$1)}calculateValue(Tt,Mt=k$1){const Pt=this._evaluateNode(this.parseTree,Tt,Mt);return Pt instanceof e$8?Pt.valueInMilliseconds()/864e5:Pt}calculateValueCompiled(Tt,Mt=k$1){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(Tt,this.parameters,Mt,this.datefields):a$32("esri-csp-restrictions")?this.calculateValue(Tt,Mt):(this._compileMe(),this.parseTree._compiledVersion(Tt,this.parameters,Mt,this.datefields))}testFeature(Tt,Mt=k$1){return!!this._evaluateNode(this.parseTree,Tt,Mt)}testFeatureCompiled(Tt,Mt=k$1){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(Tt,this.parameters,Mt,this.datefields):a$32("esri-csp-restrictions")?this.testFeature(Tt,Mt):(this._compileMe(),!!this.parseTree._compiledVersion(Tt,this.parameters,Mt,this.datefields))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,Tt=>{Tt.type==="current-time"?this._hasDateFunctions=!0:Tt.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||d$7.has(Tt.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const Tt=new Set;return this._visitAll(this.parseTree,Mt=>{Mt.type==="function"&&Tt.add(Mt.name.toLowerCase())}),Array.from(Tt)}getExpressions(){const Tt=new Map;return this._visitAll(this.parseTree,Mt=>{if(Mt.type==="function"){const Pt=Mt.name.toLowerCase(),Ft=Mt.args.value[0];if(Ft.type==="column-reference"){const Dt=Ft.column,Nt=`${Pt}-${Dt}`;Tt.has(Nt)||Tt.set(Nt,{aggregateType:Pt,field:Dt})}}}),[...Tt.values()]}getVariables(){const Tt=new Set;return this._visitAll(this.parseTree,Mt=>{Mt.type==="parameter"&&Tt.add(Mt.value.toLowerCase())}),Array.from(Tt)}_compileMe(){const Tt="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",Tt).bind(f$5)}_extractExpressionInfo(Tt){const Mt=[],Pt=new Set;let Ft=!0,Dt=!0;return this._visitAll(this.parseTree,Nt=>{switch(Nt.type){case"column-reference":{const Vt=Tt.get(Nt.column);let zt,Xt;Vt?zt=Xt=Vt.name:(Xt=Nt.column,zt=Xt.toLowerCase()),!Vt||Vt.type!=="date"&&Vt.type!=="esriFieldTypeDate"||(this.datefields[Vt.name]=1),Pt.has(zt)||(Pt.add(zt),Mt.push(Xt)),Nt.column=Xt;break}case"function":{const{name:Vt,args:zt}=Nt,Xt=zt.value.length;Ft&&(Ft=t$8(Vt,Xt)),Dt&&(Dt=n$b(Vt,Xt));break}}}),{referencedFieldNames:Array.from(Mt),isStandardized:Ft,isAggregate:Dt}}_visitAll(Tt,Mt){if(Tt!=null)switch(Mt(Tt),Tt.type){case"when-clause":this._visitAll(Tt.operand,Mt),this._visitAll(Tt.value,Mt);break;case"case-expression":for(const Pt of Tt.clauses)this._visitAll(Pt,Mt);Tt.format==="simple"&&this._visitAll(Tt.operand,Mt),Tt.else!==null&&this._visitAll(Tt.else,Mt);break;case"expression-list":for(const Pt of Tt.value)this._visitAll(Pt,Mt);break;case"unary-expression":this._visitAll(Tt.expr,Mt);break;case"binary-expression":this._visitAll(Tt.left,Mt),this._visitAll(Tt.right,Mt);break;case"function":this._visitAll(Tt.args,Mt)}}evaluateNodeToJavaScript(Tt){switch(Tt.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(Tt.value)+", "+JSON.stringify(Tt.qualifier)+","+JSON.stringify(Tt.op)+")";case"case-expression":{let Mt="";if(Tt.format==="simple"){const Pt="this.makeComparable("+this.evaluateNodeToJavaScript(Tt.operand)+")";Mt="( ";for(let Ft=0;Ft<Tt.clauses.length;Ft++)Mt+=" ("+Pt+" === this.makeComparable("+this.evaluateNodeToJavaScript(Tt.clauses[Ft].operand)+")) ? ("+this.evaluateNodeToJavaScript(Tt.clauses[Ft].value)+") : ";Tt.else!==null?Mt+=this.evaluateNodeToJavaScript(Tt.else):Mt+="null",Mt+=" )"}else{Mt="( ";for(let Pt=0;Pt<Tt.clauses.length;Pt++)Mt+=" this.makeBool("+this.evaluateNodeToJavaScript(Tt.clauses[Pt].operand)+")===true ? ("+this.evaluateNodeToJavaScript(Tt.clauses[Pt].value)+") : ";Tt.else!==null?Mt+=this.evaluateNodeToJavaScript(Tt.else):Mt+="null",Mt+=" )"}return Mt}case"parameter":return"this.lookup("+JSON.stringify(Tt.value.toLowerCase())+",lookups)";case"expression-list":{let Mt="[";for(const Pt of Tt.value)Mt!=="["&&(Mt+=","),Mt+=this.evaluateNodeToJavaScript(Pt);return Mt+="]",Mt}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(Tt.expr)+")";case"binary-expression":switch(Tt.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(Tt.left)+","+this.evaluateNodeToJavaScript(Tt.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(Tt.left)+","+this.evaluateNodeToJavaScript(Tt.right)+" )";case"IS":if(Tt.right.type!=="null")throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(Tt.left)+")";case"ISNOT":if(Tt.right.type!=="null")throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(Tt.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(Tt.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(Tt.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(Tt.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(Tt.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(Tt.left)+","+this.evaluateNodeToJavaScript(Tt.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(Tt.left)+","+this.evaluateNodeToJavaScript(Tt.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(Tt.left)+","+this.evaluateNodeToJavaScript(Tt.right)+","+JSON.stringify(Tt.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(Tt.left)+","+this.evaluateNodeToJavaScript(Tt.right)+","+JSON.stringify(Tt.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(Tt.operator)+","+this.evaluateNodeToJavaScript(Tt.left)+","+this.evaluateNodeToJavaScript(Tt.right)+")";case"*":case"-":case"+":case"/":return"this.calculate("+JSON.stringify(Tt.operator)+","+this.evaluateNodeToJavaScript(Tt.left)+","+this.evaluateNodeToJavaScript(Tt.right)+")"}throw new Error("Not Supported Operator "+Tt.operator);case"null":case"boolean":case"string":case"number":return JSON.stringify(Tt.value);case"date":return"(new Date("+g$4(Tt.value).getTime().toString()+"))";case"timestamp":return"(new Date("+N$3(Tt.value).getTime().toString()+"))";case"current-time":return Tt.mode==="date"?"this.currentDate()":"this.currentTimestamp()";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(Tt.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(Tt.name)+","+this.evaluateNodeToJavaScript(Tt.args)+")"}throw new Error("Unsupported sql syntax "+Tt.type)}_evaluateNode(Tt,Mt,Pt){switch(Tt.type){case"interval":{const Ft=this._evaluateNode(Tt.value,Mt,Pt);return e$8.createFromValueAndQualifer(Ft,Tt.qualifier,Tt.op)}case"case-expression":if(Tt.format==="simple"){const Ft=E$4(this._evaluateNode(Tt.operand,Mt,Pt));for(let Dt=0;Dt<Tt.clauses.length;Dt++)if(Ft===E$4(this._evaluateNode(Tt.clauses[Dt].operand,Mt,Pt)))return this._evaluateNode(Tt.clauses[Dt].value,Mt,Pt);if(Tt.else!==null)return this._evaluateNode(Tt.else,Mt,Pt)}else{for(let Ft=0;Ft<Tt.clauses.length;Ft++)if(T$2(this._evaluateNode(Tt.clauses[Ft].operand,Mt,Pt)))return this._evaluateNode(Tt.clauses[Ft].value,Mt,Pt);if(Tt.else!==null)return this._evaluateNode(Tt.else,Mt,Pt)}return null;case"parameter":return this.parameters[Tt.value.toLowerCase()];case"expression-list":{const Ft=[];for(const Dt of Tt.value)Ft.push(this._evaluateNode(Dt,Mt,Pt));return Ft}case"unary-expression":return S$3(this._evaluateNode(Tt.expr,Mt,Pt));case"binary-expression":switch(Tt.operator){case"AND":return w$1(this._evaluateNode(Tt.left,Mt,Pt),this._evaluateNode(Tt.right,Mt,Pt));case"OR":return y$6(this._evaluateNode(Tt.left,Mt,Pt),this._evaluateNode(Tt.right,Mt,Pt));case"IS":if(Tt.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(Tt.left,Mt,Pt)===null;case"ISNOT":if(Tt.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(Tt.left,Mt,Pt)!==null;case"IN":{const Ft=_$3(this._evaluateNode(Tt.right,Mt,Pt));return I$4(this._evaluateNode(Tt.left,Mt,Pt),Ft)}case"NOT IN":{const Ft=_$3(this._evaluateNode(Tt.right,Mt,Pt));return S$3(I$4(this._evaluateNode(Tt.left,Mt,Pt),Ft))}case"BETWEEN":{const Ft=this._evaluateNode(Tt.left,Mt,Pt),Dt=this._evaluateNode(Tt.right,Mt,Pt);return Ft==null||Dt[0]==null||Dt[1]==null?null:Ft>=E$4(Dt[0])&&Ft<=E$4(Dt[1])}case"NOTBETWEEN":{const Ft=this._evaluateNode(Tt.left,Mt,Pt),Dt=this._evaluateNode(Tt.right,Mt,Pt);return Ft==null||Dt[0]==null||Dt[1]==null?null:Ft<E$4(Dt[0])||Ft>E$4(Dt[1])}case"LIKE":return b$6(this._evaluateNode(Tt.left,Mt,Pt),this._evaluateNode(Tt.right,Mt,Pt),Tt.escape);case"NOT LIKE":return S$3(b$6(this._evaluateNode(Tt.left,Mt,Pt),this._evaluateNode(Tt.right,Mt,Pt),Tt.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return x$5(Tt.operator,this._evaluateNode(Tt.left,Mt,Pt),this._evaluateNode(Tt.right,Mt,Pt));case"-":case"+":case"*":case"/":return F$2(Tt.operator,this._evaluateNode(Tt.left,Mt,Pt),this._evaluateNode(Tt.right,Mt,Pt))}case"null":case"boolean":case"string":case"number":return Tt.value;case"date":return g$4(Tt.value);case"timestamp":return N$3(Tt.value);case"current-time":{const Ft=new Date;return Tt.mode==="date"&&Ft.setHours(0,0,0,0),Ft}case"column-reference":return O$4(Mt,Tt.column,this.datefields,Pt);case"function":{const Ft=this._evaluateNode(Tt.args,Mt,Pt);return this.isAggregate?a$a(Tt.name,Ft):r$8(Tt.name,Ft)}}throw new Error("Unsupported sql syntax "+Tt.type)}}function N$3(_t){let Tt=u$6.exec(_t);if(Tt!==null){const[,Mt,Pt,Ft,Dt,Nt,Vt]=Tt;return v$7(Mt,Pt,Ft,Dt,Nt,Vt)}if(Tt=o$a.exec(_t),Tt!==null){const[,Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht]=Tt;return v$7(Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht)}if(Tt=c$a.exec(_t),Tt!==null){const[,Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt]=Tt;return v$7(Mt,Pt,Ft,Dt,Nt,"0",Vt,zt,Xt)}if(Tt=h$b.exec(_t),Tt!==null){const[,Mt,Pt,Ft,Dt,Nt]=Tt;return v$7(Mt,Pt,Ft,Dt,Nt)}if(Tt=l$8.exec(_t),Tt!==null){const[,Mt,Pt,Ft]=Tt;return v$7(Mt,Pt,Ft)}throw new Error("SQL Invalid Timestamp")}function g$4(_t){const Tt=l$8.exec(_t);if(Tt===null)throw new Error("SQL Invalid Date");const[,Mt,Pt,Ft]=Tt;return new Date(parseInt(Mt,10),parseInt(Pt,10)-1,parseInt(Ft,10))}function T$2(_t){return _t===!0}function _$3(_t){return Array.isArray(_t)?_t:[_t]}function S$3(_t){return _t!==null?_t!==!0:null}function w$1(_t,Tt){return _t!=null&&Tt!=null?_t===!0&&Tt===!0:_t!==!1&&Tt!==!1&&null}function y$6(_t,Tt){return _t!=null&&Tt!=null?_t===!0||Tt===!0:_t===!0||Tt===!0||null}function I$4(_t,Tt){if(_t==null)return null;let Mt=!1;for(const Pt of Tt)if(Pt==null)Mt=null;else if(_t===Pt){Mt=!0;break}return Mt}const J$2="-[]/{}()*+?.\\^$|";var A$3;function D$2(_t,Tt){const Mt=Tt;let Pt="",Ft=A$3.Normal;for(let Dt=0;Dt<_t.length;Dt++){const Nt=_t.charAt(Dt);switch(Ft){case A$3.Normal:Nt===Mt?Ft=A$3.Escaped:J$2.includes(Nt)?Pt+="\\"+Nt:Pt+=Nt==="%"?".*":Nt==="_"?".":Nt;break;case A$3.Escaped:J$2.includes(Nt)?Pt+="\\"+Nt:Pt+=Nt,Ft=A$3.Normal}}return new RegExp("^"+Pt+"$","m")}function b$6(_t,Tt,Mt){return _t==null?null:D$2(Tt,Mt).test(_t)}function E$4(_t){return _t instanceof Date?_t.valueOf():_t}function x$5(_t,Tt,Mt){if(Tt==null||Mt==null)return null;const Pt=E$4(Tt),Ft=E$4(Mt);switch(_t){case"<>":return Pt!==Ft;case"=":return Pt===Ft;case">":return Pt>Ft;case"<":return Pt<Ft;case">=":return Pt>=Ft;case"<=":return Pt<=Ft}}function F$2(_t,Tt,Mt){if(Tt instanceof e$8)if(Mt instanceof Date)switch(_t){case"+":return new Date(Tt.valueInMilliseconds()+Mt.getTime());case"-":return Tt.valueInMilliseconds()-Mt.getTime();case"*":return Tt.valueInMilliseconds()*Mt.getTime();case"/":return Tt.valueInMilliseconds()/Mt.getTime()}else if(Mt instanceof e$8)switch(_t){case"+":return e$8.createFromMilliseconds(Tt.valueInMilliseconds()+Mt.valueInMilliseconds());case"-":return e$8.createFromMilliseconds(Tt.valueInMilliseconds()-Mt.valueInMilliseconds());case"*":return Tt.valueInMilliseconds()*Mt.valueInMilliseconds();case"/":return Tt.valueInMilliseconds()/Mt.valueInMilliseconds()}else Tt=Tt.valueInMilliseconds();else if(Mt instanceof e$8)if(Tt instanceof Date)switch(_t){case"+":return new Date(Mt.valueInMilliseconds()+Tt.getTime());case"-":return new Date(Tt.getTime()-Mt.valueInMilliseconds());case"*":return Tt.getTime()*Mt.valueInMilliseconds();case"/":return Tt.getTime()/Mt.valueInMilliseconds()}else Mt=Mt.valueInMilliseconds();else if(Tt instanceof Date&&typeof Mt=="number")switch(Mt=24*Mt*60*60*1e3,Tt=Tt.getTime(),_t){case"+":return new Date(Tt+Mt);case"-":return new Date(Tt-Mt);case"*":return new Date(Tt*Mt);case"/":return new Date(Tt/Mt)}else if(Mt instanceof Date&&typeof Tt=="number")switch(Tt=24*Tt*60*60*1e3,Mt=Mt.getTime(),_t){case"+":return new Date(Tt+Mt);case"-":return new Date(Tt-Mt);case"*":return new Date(Tt*Mt);case"/":return new Date(Tt/Mt)}switch(_t){case"+":return Tt+Mt;case"-":return Tt-Mt;case"*":return Tt*Mt;case"/":return Tt/Mt}}function M$5(_t){return _t&&typeof _t.attributes=="object"}function O$4(_t,Tt,Mt,Pt){const Ft=Pt.getAttribute(_t,Tt);return Ft!=null&&Mt[Tt]===1?new Date(Ft):Ft}(function(_t){_t[_t.Normal=0]="Normal",_t[_t.Escaped=1]="Escaped"})(A$3||(A$3={}));const k$1={getAttribute:(_t,Tt)=>(M$5(_t)?_t.attributes:_t)[Tt]},WhereClause=Object.freeze(Object.defineProperty({__proto__:null,WhereClause:m$9,defaultAttributeAdapter:k$1},Symbol.toStringTag,{value:"Module"}));class c$9{constructor(Tt,Mt){this._cache=new e$16(Tt),this._invalidCache=new e$16(Mt)}get(Tt,Mt){const Pt=`${Mt.uid}:${Tt}`,Ft=this._cache.get(Pt);if(Ft)return Ft;if(this._invalidCache.get(Pt)!==void 0)return null;try{const Dt=m$9.create(Tt,Mt);return this._cache.put(Pt,Dt),Dt}catch{return this._invalidCache.put(Pt,null),null}}}const s$6=new c$9(50,500),n$8="feature-store:unsupported-query",t$6=" as ",r$7=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function o$9(_t,Tt){if(!Tt)return!0;const Mt=s$6.get(Tt,_t);if(!Mt)throw new s$2i(n$8,"invalid SQL expression",{where:Tt});if(!Mt.isStandardized)throw new s$2i(n$8,"where clause is not standard",{where:Tt});return c$8(_t,Mt.fieldNames,"where clause contains missing fields"),!0}function a$9(_t,Tt,Mt){if(!Tt)return!0;const Pt=s$6.get(Tt,_t);if(!Pt)throw new s$2i(n$8,"invalid SQL expression",{having:Tt});if(!Pt.isAggregate)throw new s$2i(n$8,"having does not contain a valid aggregate function",{having:Tt});const Ft=Pt.fieldNames;if(c$8(_t,Ft,"having contains missing fields"),!Pt.getExpressions().every(Dt=>{const{aggregateType:Nt,field:Vt}=Dt,zt=_t.has(Vt)&&_t.get(Vt).name;return Mt.some(Xt=>{const{onStatisticField:Ht,statisticType:Wt}=Xt;return(_t.has(Ht)&&_t.get(Ht).name)===zt&&Wt.toLowerCase().trim()===Nt})}))throw new s$2i(n$8,"expressions in having should also exist in outStatistics",{having:Tt});return!0}function l$7(_t,Tt){return _t?s$6.get(_t,Tt):null}function c$8(_t,Tt,Mt,Pt=!0){const Ft=[];for(const Dt of Tt)if(Dt!=="*"&&!_t.has(Dt))if(Pt){const Nt=d$6(Dt);try{const Vt=l$7(Nt,_t);if(!Vt)throw new s$2i(n$8,"invalid SQL expression",{where:Nt});if(!Vt.isStandardized)throw new s$2i(n$8,"expression is not standard",{clause:Vt});c$8(_t,Vt.fieldNames,"expression contains missing fields")}catch(Vt){const zt=Vt&&Vt.details;if(zt&&(zt.clause||zt.where))throw Vt;zt&&zt.missingFields?Ft.push(...zt.missingFields):Ft.push(Dt)}}else Ft.push(Dt);if(Ft.length)throw new s$2i(n$8,Mt,{missingFields:Ft})}function d$6(_t){return _t.split(t$6)[0]}function u$5(_t){return _t.split(t$6)[1]}function f$4(_t,Tt){const Mt=Tt.get(_t);return!!Mt&&!r$7.has(Mt.type)}const c$7=new s$1_({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let l$6=class extends l$2v{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};e$2a([d$25({type:a$2f,json:{write:!0}})],l$6.prototype,"baseSymbol",void 0),e$2a([d$25({types:m$10,json:{read:{reader:p$1Q},write:!0}})],l$6.prototype,"colorRamp",void 0),e$2a([d$25({json:{read:c$7.read,write:c$7.write}})],l$6.prototype,"type",void 0),l$6=e$2a([n$2L("esri.rest.support.ClassificationDefinition")],l$6);const m$8=l$6,o$8=new s$1_({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),a$8=new s$1_({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let n$7=class extends m$8{constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}set standardDeviationInterval(_t){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",_t)}set definedInterval(_t){this.classificationMethod==="defined-interval"&&this._set("definedInterval",_t)}};e$2a([d$25({json:{write:!0}})],n$7.prototype,"breakCount",void 0),e$2a([d$25({json:{write:!0}})],n$7.prototype,"classificationField",void 0),e$2a([d$25({type:String,json:{read:o$8.read,write:o$8.write}})],n$7.prototype,"classificationMethod",void 0),e$2a([d$25({json:{write:!0}})],n$7.prototype,"normalizationField",void 0),e$2a([d$25({json:{read:a$8.read,write:a$8.write}})],n$7.prototype,"normalizationType",void 0),e$2a([d$25({value:null,json:{write:!0}})],n$7.prototype,"standardDeviationInterval",null),e$2a([d$25({value:null,json:{write:!0}})],n$7.prototype,"definedInterval",null),e$2a([d$25()],n$7.prototype,"type",void 0),n$7=e$2a([n$2L("esri.rest.support.ClassBreaksDefinition")],n$7);const l$5=n$7;function e$6(_t,Tt){return Number(_t.toFixed(Tt))}function t$5(_t){const{normalizationTotal:Tt}=_t;return{classBreaks:n$6(_t),normalizationTotal:Tt}}function n$6(_t){const Tt=_t.definition,{classificationMethod:Mt,breakCount:Pt,normalizationType:Ft,definedInterval:Dt}=Tt,Nt=[];let Vt=_t.values;if(Vt.length===0)return[];Vt=Vt.sort((Ht,Wt)=>Ht-Wt);const zt=Vt[0],Xt=Vt[Vt.length-1];if(Mt==="equal-interval")if(Vt.length>=Pt){const Ht=(Xt-zt)/Pt;let Wt=zt;for(let Qt=1;Qt<Pt;Qt++){const Zt=e$6(zt+Qt*Ht,6);Nt.push({minValue:Wt,maxValue:Zt,label:a$7(Wt,Zt,Ft)}),Wt=Zt}Nt.push({minValue:Wt,maxValue:Xt,label:a$7(Wt,Xt,Ft)})}else Vt.forEach(Ht=>{Nt.push({minValue:Ht,maxValue:Ht,label:a$7(Ht,Ht,Ft)})});else if(Mt==="natural-breaks"){const Ht=u$4(Vt),Wt=_t.valueFrequency||Ht.valueFrequency,Qt=s$5(Ht.uniqueValues,Wt,Pt);let Zt=zt;for(let Kt=1;Kt<Pt;Kt++)if(Ht.uniqueValues.length>Kt){const er=e$6(Ht.uniqueValues[Qt[Kt]],6);Nt.push({minValue:Zt,maxValue:er,label:a$7(Zt,er,Ft)}),Zt=er}Nt.push({minValue:Zt,maxValue:Xt,label:a$7(Zt,Xt,Ft)})}else if(Mt==="quantile")if(Vt.length>=Pt&&zt!==Xt){let Ht=zt,Wt=Math.ceil(Vt.length/Pt),Qt=0;for(let Zt=1;Zt<Pt;Zt++){let Kt=Wt+Qt-1;Kt>Vt.length&&(Kt=Vt.length-1),Kt<0&&(Kt=0),Nt.push({minValue:Ht,maxValue:Vt[Kt],label:a$7(Ht,Vt[Kt],Ft)}),Ht=Vt[Kt],Qt+=Wt,Wt=Math.ceil((Vt.length-Qt)/(Pt-Zt))}Nt.push({minValue:Ht,maxValue:Xt,label:a$7(Ht,Xt,Ft)})}else{let Ht=-1;for(let Wt=0;Wt<Vt.length;Wt++){const Qt=Vt[Wt];Qt!==Ht&&(Ht=Qt,Nt.push({minValue:Ht,maxValue:Qt,label:a$7(Ht,Qt,Ft)}),Ht=Qt)}}else if(Mt==="standard-deviation"){const Ht=c$6(Vt),Wt=f$3(Vt,Ht);if(Wt===0)Nt.push({minValue:Vt[0],maxValue:Vt[0],label:a$7(Vt[0],Vt[0],Ft)});else{const Qt=i$8(zt,Xt,Pt,Ht,Wt)*Wt;let Zt=0,Kt=zt;for(let Yt=Pt;Yt>=1;Yt--){const rr=e$6(Ht-(Yt-.5)*Qt,6);Nt.push({minValue:Kt,maxValue:rr,label:a$7(Kt,rr,Ft)}),Kt=rr,Zt++}let er=e$6(Ht+.5*Qt,6);Nt.push({minValue:Kt,maxValue:er,label:a$7(Kt,er,Ft)}),Kt=er,Zt++;for(let Yt=1;Yt<=Pt;Yt++)er=Zt===2*Pt?Xt:e$6(Ht+(Yt+.5)*Qt,6),Nt.push({minValue:Kt,maxValue:er,label:a$7(Kt,er,Ft)}),Kt=er,Zt++}}else if(Mt==="defined-interval"){if(!Dt)return Nt;const Ht=Vt[0],Wt=Vt[Vt.length-1],Qt=Math.ceil((Wt-Ht)/Dt);let Zt=Ht;for(let Kt=1;Kt<Qt;Kt++){const er=e$6(Ht+Kt*Dt,6);Nt.push({minValue:Zt,maxValue:er,label:a$7(Zt,er,Ft)}),Zt=er}Nt.push({minValue:Zt,maxValue:Wt,label:a$7(Zt,Wt,Ft)})}return Nt}function a$7(_t,Tt,Mt){let Pt=null;return Pt=_t===Tt?Mt&&Mt==="percent-of-total"?_t+"%":_t.toString():Mt&&Mt==="percent-of-total"?_t+"% - "+Tt+"%":_t+" - "+Tt,Pt}function u$4(_t){const Tt=[],Mt=[];let Pt=Number.MIN_VALUE,Ft=1,Dt=-1;for(let Nt=0;Nt<_t.length;Nt++){const Vt=_t[Nt];Vt===Pt?(Ft++,Mt[Dt]=Ft):Vt!==null&&(Tt.push(Vt),Pt=Vt,Ft=1,Mt.push(Ft),Dt++)}return{uniqueValues:Tt,valueFrequency:Mt}}function s$5(_t,Tt,Mt){const Pt=_t.length,Ft=[];Mt>Pt&&(Mt=Pt);for(let Nt=0;Nt<Mt;Nt++)Ft.push(Math.round(Nt*Pt/Mt-1));Ft.push(Pt-1);let Dt=o$7(Ft,_t,Tt,Mt);return r$6(Dt.mean,Dt.sdcm,Ft,_t,Tt,Mt)&&(Dt=o$7(Ft,_t,Tt,Mt)),Ft}function o$7(_t,Tt,Mt,Pt){let Ft=[],Dt=[],Nt=[],Vt=0;const zt=[],Xt=[];for(let Zt=0;Zt<Pt;Zt++){const Kt=h$a(Zt,_t,Tt,Mt);zt.push(Kt.sbMean),Xt.push(Kt.sbSdcm),Vt+=Xt[Zt]}let Ht,Wt=Vt,Qt=!0;for(;Qt||Vt<Wt;){Qt=!1,Ft=[];for(let Zt=0;Zt<Pt;Zt++)Ft.push(_t[Zt]);for(let Zt=0;Zt<Pt;Zt++)for(let Kt=_t[Zt]+1;Kt<=_t[Zt+1];Kt++)if(Ht=Tt[Kt],Zt>0&&Kt!==_t[Zt+1]&&Math.abs(Ht-zt[Zt])>Math.abs(Ht-zt[Zt-1]))_t[Zt]=Kt;else if(Zt<Pt-1&&_t[Zt]!==Kt-1&&Math.abs(Ht-zt[Zt])>Math.abs(Ht-zt[Zt+1])){_t[Zt+1]=Kt-1;break}Wt=Vt,Vt=0,Dt=[],Nt=[];for(let Zt=0;Zt<Pt;Zt++){Dt.push(zt[Zt]),Nt.push(Xt[Zt]);const Kt=h$a(Zt,_t,Tt,Mt);zt[Zt]=Kt.sbMean,Xt[Zt]=Kt.sbSdcm,Vt+=Xt[Zt]}}if(Vt>Wt){for(let Zt=0;Zt<Pt;Zt++)_t[Zt]=Ft[Zt],zt[Zt]=Dt[Zt],Xt[Zt]=Nt[Zt];Vt=Wt}return{mean:zt,sdcm:Xt}}function r$6(_t,Tt,Mt,Pt,Ft,Dt){let Nt=0,Vt=0,zt=0,Xt=0,Ht=!0;for(let Wt=0;Wt<2&&Ht;Wt++){Wt===0&&(Ht=!1);for(let Qt=0;Qt<Dt-1;Qt++)for(;Mt[Qt+1]+1!==Mt[Qt+2];){Mt[Qt+1]=Mt[Qt+1]+1;const Zt=h$a(Qt,Mt,Pt,Ft);zt=Zt.sbMean,Nt=Zt.sbSdcm;const Kt=h$a(Qt+1,Mt,Pt,Ft);if(Xt=Kt.sbMean,Vt=Kt.sbSdcm,!(Nt+Vt<Tt[Qt]+Tt[Qt+1])){Mt[Qt+1]=Mt[Qt+1]-1;break}Tt[Qt]=Nt,Tt[Qt+1]=Vt,_t[Qt]=zt,_t[Qt+1]=Xt,Ht=!0}for(let Qt=Dt-1;Qt>0;Qt--)for(;Mt[Qt]!==Mt[Qt-1]+1;){Mt[Qt]=Mt[Qt]-1;const Zt=h$a(Qt-1,Mt,Pt,Ft);zt=Zt.sbMean,Nt=Zt.sbSdcm;const Kt=h$a(Qt,Mt,Pt,Ft);if(Xt=Kt.sbMean,Vt=Kt.sbSdcm,!(Nt+Vt<Tt[Qt-1]+Tt[Qt])){Mt[Qt]=Mt[Qt]+1;break}Tt[Qt-1]=Nt,Tt[Qt]=Vt,_t[Qt-1]=zt,_t[Qt]=Xt,Ht=!0}}return Ht}function i$8(_t,Tt,Mt,Pt,Ft){let Dt=Math.max(Pt-_t,Tt-Pt)/Ft/Mt;return Dt=Dt>=1?1:Dt>=.5?.5:.25,Dt}function c$6(_t){let Tt=0;for(let Mt=0;Mt<_t.length;Mt++)Tt+=_t[Mt];return Tt/=_t.length,Tt}function f$3(_t,Tt){let Mt=0;for(let Pt=0;Pt<_t.length;Pt++){const Ft=_t[Pt];Mt+=(Ft-Tt)*(Ft-Tt)}return Mt/=_t.length,Math.sqrt(Mt)}function h$a(_t,Tt,Mt,Pt){let Ft=0,Dt=0;for(let zt=Tt[_t]+1;zt<=Tt[_t+1];zt++){const Xt=Pt[zt];Ft+=Mt[zt]*Xt,Dt+=Xt}Dt<=0&&console.log("Exception in Natural Breaks calculation");const Nt=Ft/Dt;let Vt=0;for(let zt=Tt[_t]+1;zt<=Tt[_t+1];zt++)Vt+=Pt[zt]*(Mt[zt]-Nt)**2;return{sbMean:Nt,sbSdcm:Vt}}const t$4="equal-interval",l$4=1,i$7=5,a$6=10,r$5=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,o$6=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),u$3=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function s$4(_t){const Tt=_t.normalizationField!=null||_t.normalizationType!=null,Mt=_t.minValue!=null||_t.maxValue!=null,Pt=!!_t.sqlExpression&&_t.supportsSQLExpression;return!Tt&&!Mt&&!Pt}function m$7(_t){const Tt=_t.returnDistinct?[...new Set(_t.values)]:_t.values,Mt=Tt.filter(Ft=>Ft!=null).length,Pt={count:Mt};return _t.supportsNullCount&&(Pt.nullcount=Tt.length-Mt),_t.percentileParams&&(Pt.median=d$5(Tt,_t.percentileParams)),Pt}function c$5(_t){const{values:Tt,useSampleStdDev:Mt,supportsNullCount:Pt}=_t;let Ft=Number.POSITIVE_INFINITY,Dt=Number.NEGATIVE_INFINITY,Nt=null,Vt=null,zt=null,Xt=null,Ht=0;const Wt=_t.minValue==null?-1/0:_t.minValue,Qt=_t.maxValue==null?1/0:_t.maxValue;for(const Kt of Tt)Number.isFinite(Kt)?Kt>=Wt&&Kt<=Qt&&(Nt+=Kt,Ft=Math.min(Ft,Kt),Dt=Math.max(Dt,Kt),Ht++):typeof Kt=="string"&&Ht++;if(Ht&&Nt!=null){Vt=Nt/Ht;let Kt=0;for(const er of Tt)Number.isFinite(er)&&er>=Wt&&er<=Qt&&(Kt+=(er-Vt)**2);Xt=Mt?Ht>1?Kt/(Ht-1):0:Ht>0?Kt/Ht:0,zt=Math.sqrt(Xt)}else Ft=null,Dt=null;const Zt={avg:Vt,count:Ht,max:Dt,min:Ft,stddev:zt,sum:Nt,variance:Xt};return Pt&&(Zt.nullcount=Tt.length-Ht),_t.percentileParams&&(Zt.median=d$5(Tt,_t.percentileParams)),Zt}function d$5(_t,Tt){const{fieldType:Mt,value:Pt,orderBy:Ft,isDiscrete:Dt}=Tt,Nt=f$2(Mt,Ft==="desc");if((_t=[..._t].filter(Zt=>Zt!=null).sort((Zt,Kt)=>Nt(Zt,Kt))).length===0)return null;if(Pt<=0)return _t[0];if(Pt>=1)return _t[_t.length-1];const Vt=(_t.length-1)*Pt,zt=Math.floor(Vt),Xt=zt+1,Ht=Vt%1,Wt=_t[zt],Qt=_t[Xt];return Xt>=_t.length||Dt||typeof Wt=="string"||typeof Qt=="string"?Wt:Wt*(1-Ht)+Qt*Ht}function f$2(_t,Tt){const Mt=Tt?1:-1,Pt=v$6(Tt),Ft=p$6(Tt);if(!(!!_t&&["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...o$6].includes(_t)))return(Dt,Nt)=>typeof Dt=="number"&&typeof Nt=="number"?Pt(Dt,Nt):typeof Dt=="string"&&typeof Nt=="string"?Ft(Dt,Nt):Mt;if(_t==="esriFieldTypeDate")return(Dt,Nt)=>{const Vt=new Date(Dt).getTime(),zt=new Date(Nt).getTime();return isNaN(Vt)||isNaN(zt)?Mt:Pt(Vt,zt)};if(o$6.has(_t))return(Dt,Nt)=>Pt(Dt,Nt);if(_t==="esriFieldTypeString")return(Dt,Nt)=>Ft(Dt,Nt);if(_t==="esriFieldTypeGUID"||_t==="esriFieldTypeGlobalID"){const Dt=p$6(Tt);return(Nt,Vt)=>Dt(b$5(Nt),b$5(Vt))}return Tt?(Dt,Nt)=>1:(Dt,Nt)=>-1}function p$6(_t){return _t?(Tt,Mt)=>(Tt=Tt==null?void 0:Tt.toUpperCase(),Mt=Mt==null?void 0:Mt.toUpperCase(),Tt>Mt?-1:Tt<Mt?1:0):(Tt,Mt)=>(Tt=Tt==null?void 0:Tt.toUpperCase(),Mt=Mt==null?void 0:Mt.toUpperCase(),Tt<Mt?-1:Tt>Mt?1:0)}function v$6(_t){return _t?(Tt,Mt)=>Mt-Tt:(Tt,Mt)=>Tt-Mt}function b$5(_t){return _t.substr(24,12)+_t.substr(19,4)+_t.substr(16,2)+_t.substr(14,2)+_t.substr(11,2)+_t.substr(9,2)+_t.substr(6,2)+_t.substr(4,2)+_t.substr(2,2)+_t.substr(0,2)}function V$3(_t,Tt){let Mt;for(Mt in _t)u$3.includes(Mt)&&(Number.isFinite(_t[Mt])||(_t[Mt]=null));return Tt&&["avg","stddev","variance"].forEach(Pt=>{_t[Pt]!=null&&(_t[Pt]=Math.ceil(_t[Pt]))}),_t}function g$3(_t){const Tt={};for(let Mt of _t)(Mt==null||typeof Mt=="string"&&Mt.trim()==="")&&(Mt=null),Tt[Mt]==null?Tt[Mt]={count:1,data:Mt}:Tt[Mt].count++;return{count:Tt}}function h$9(_t,Tt,Mt){const Pt=_t.count,Ft=[];Mt&&Tt&&Tt.type==="coded-value"&&Tt.codedValues.forEach(Dt=>{const Nt=Dt.code;Pt.hasOwnProperty(Nt)||(Pt[Nt]={data:Nt,count:0})});for(const Dt in Pt){const Nt=Pt[Dt];Ft.push({value:Nt.data,count:Nt.count,label:Nt.label})}return{uniqueValueInfos:Ft}}function T$1(_t,Tt,Mt,Pt){let Ft=null;switch(Tt){case"log":_t!==0&&(Ft=Math.log(_t)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(Pt)&&Pt!==0&&(Ft=_t/Pt*100);break;case"field":Number.isFinite(Mt)&&Mt!==0&&(Ft=_t/Mt);break;case"natural-log":_t>0&&(Ft=Math.log(_t));break;case"square-root":_t>0&&(Ft=_t**.5)}return Ft}function y$5(_t,Tt){const Mt=x$4({field:Tt.field,normalizationType:Tt.normalizationType,normalizationField:Tt.normalizationField,classificationMethod:Tt.classificationMethod,standardDeviationInterval:Tt.standardDeviationInterval,breakCount:Tt.numClasses||i$7});return _t=F$1(_t,Tt.minValue,Tt.maxValue),t$5({definition:Mt,values:_t,normalizationTotal:Tt.normalizationTotal})}function F$1(_t,Tt,Mt){return Tt=Tt==null?-1/0:Tt,Mt=Mt==null?1/0:Mt,_t.filter(Pt=>Number.isFinite(Pt)&&Pt>=Tt&&Pt<=Mt)}function x$4(_t){const Tt=_t.field,Mt=_t.classificationMethod||t$4,Pt=_t.normalizationType,Ft=_t.normalizationField,Dt=new l$5;return Dt.classificationField=Tt,Dt.breakCount=_t.breakCount,Dt.classificationMethod=Mt,Dt.standardDeviationInterval=Mt==="standard-deviation"?_t.standardDeviationInterval||l$4:void 0,Dt.normalizationType=Pt,Dt.normalizationField=Pt==="field"?Ft:void 0,Dt}function D$1(_t,Tt){let Mt=_t.classBreaks;const Pt=Mt.length,Ft=Mt[0].minValue,Dt=Mt[Pt-1].maxValue,Nt=Tt==="standard-deviation",Vt=r$5;return Mt=Mt.map(zt=>{const Xt=zt.label,Ht={minValue:zt.minValue,maxValue:zt.maxValue,label:Xt};if(Nt&&Xt){const Wt=Xt.match(Vt).map(Qt=>+Qt.trim());Wt.length===2?(Ht.minStdDev=Wt[0],Ht.maxStdDev=Wt[1],Wt[0]<0&&Wt[1]>0&&(Ht.hasAvg=!0)):Wt.length===1&&(Xt.includes("<")?(Ht.minStdDev=null,Ht.maxStdDev=Wt[0]):Xt.includes(">")&&(Ht.minStdDev=Wt[0],Ht.maxStdDev=null))}return Ht}),{minValue:Ft,maxValue:Dt,classBreakInfos:Mt,normalizationTotal:_t.normalizationTotal}}function z$1(_t,Tt){const{min:Mt,max:Pt,intervals:Ft}=I$3(_t,Tt),Dt=Ft.map((Nt,Vt)=>({minValue:Ft[Vt][0],maxValue:Ft[Vt][1],count:0}));for(const Nt of _t)if(Nt!=null&&Nt>=Mt&&Nt<=Pt){const Vt=N$2(Ft,Nt);Vt>-1&&Dt[Vt].count++}return{bins:Dt,minValue:Mt,maxValue:Pt,normalizationTotal:Tt.normalizationTotal}}function I$3(_t,Tt){const{field:Mt,classificationMethod:Pt,standardDeviationInterval:Ft,normalizationType:Dt,normalizationField:Nt,normalizationTotal:Vt,minValue:zt,maxValue:Xt}=Tt,Ht=Tt.numBins||a$6;let Wt=null,Qt=null,Zt=null;if((!Pt||Pt==="equal-interval")&&!Dt){if(zt!=null&&Xt!=null)Wt=zt,Qt=Xt;else{const Kt=c$5({values:_t,minValue:zt,maxValue:Xt,useSampleStdDev:!Dt,supportsNullCount:s$4({normalizationType:Dt,normalizationField:Nt,minValue:zt,maxValue:Xt})});Wt=Kt.min,Qt=Kt.max}Zt=S$2(Wt,Qt,Ht)}else{const{classBreaks:Kt}=y$5(_t,{field:Mt,normalizationType:Dt,normalizationField:Nt,normalizationTotal:Vt,classificationMethod:Pt,standardDeviationInterval:Ft,minValue:zt,maxValue:Xt,numClasses:Ht});Wt=Kt[0].minValue,Qt=Kt[Kt.length-1].maxValue,Zt=Kt.map(er=>[er.minValue,er.maxValue])}return{min:Wt,max:Qt,intervals:Zt}}function N$2(_t,Tt){let Mt=-1;for(let Pt=_t.length-1;Pt>=0;Pt--)if(Tt>=_t[Pt][0]){Mt=Pt;break}return Mt}function S$2(_t,Tt,Mt){const Pt=(Tt-_t)/Mt,Ft=[];let Dt,Nt=_t;for(let Vt=1;Vt<=Mt;Vt++)Dt=Nt+Pt,Dt=Number(Dt.toFixed(16)),Ft.push([Nt,Vt===Mt?Tt:Dt]),Nt=Dt;return Ft}class r$4{constructor(Tt,Mt,Pt){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=Tt.returnDistinctValues,this.fieldsIndex=Pt,this.featureAdapter=Mt;const Ft=Tt.outFields;if(Ft&&!Ft.includes("*")){this.outFields=Ft;let Dt=0;for(const Nt of Ft){const Vt=d$6(Nt),zt=this.fieldsIndex.get(Vt),Xt=zt?null:l$7(Vt,Pt),Ht=zt?zt.name:u$5(Nt)||"FIELD_EXP_"+Dt++;this._fieldDataCache.set(Nt,{alias:Ht,clause:Xt})}}}countDistinctValues(Tt){return this.returnDistinctValues?(Tt.forEach(Mt=>this.getAttributes(Mt)),this._returnDistinctMap.size):Tt.length}getAttributes(Tt){const Mt=this._processAttributesForOutFields(Tt);return this._processAttributesForDistinctValues(Mt)}getFieldValue(Tt,Mt,Pt){const Ft=Pt?Pt.name:Mt;let Dt=null;return this._fieldDataCache.has(Ft)?Dt=this._fieldDataCache.get(Ft).clause:Pt||(Dt=l$7(Mt,this.fieldsIndex),this._fieldDataCache.set(Ft,{alias:Ft,clause:Dt})),Pt?this.featureAdapter.getAttribute(Tt,Ft):Dt.calculateValue(Tt,this.featureAdapter)}getNormalizedValue(Tt,Mt){const Pt=Mt.normalizationType,Ft=Mt.normalizationTotal;let Dt=this.getFieldValue(Tt,Mt.field,Mt.fieldInfo);if(Pt&&Number.isFinite(Dt)){const Nt=this.getFieldValue(Tt,Mt.normalizationField,Mt.normalizationFieldInfo);Dt=T$1(Dt,Pt,Nt,Ft)}return Dt}getExpressionValue(Tt,Mt,Pt,Ft){const Dt={attributes:this.featureAdapter.getAttributes(Tt),layer:{fields:this.fieldsIndex.fields}},Nt=Ft.createExecContext(Dt,Pt);return Ft.executeFunction(Mt,Nt)}getExpressionValues(Tt,Mt,Pt,Ft){const Dt={fields:this.fieldsIndex.fields};return Tt.map(Nt=>{const Vt={attributes:this.featureAdapter.getAttributes(Nt),layer:Dt},zt=Ft.createExecContext(Vt,Pt);return Ft.executeFunction(Mt,zt)})}validateItem(Tt,Mt){return this._fieldDataCache.has(Mt)||this._fieldDataCache.set(Mt,{alias:Mt,clause:l$7(Mt,this.fieldsIndex)}),this._fieldDataCache.get(Mt).clause.testFeature(Tt,this.featureAdapter)}validateItems(Tt,Mt){return this._fieldDataCache.has(Mt)||this._fieldDataCache.set(Mt,{alias:Mt,clause:l$7(Mt,this.fieldsIndex)}),this._fieldDataCache.get(Mt).clause.testSet(Tt,this.featureAdapter)}_processAttributesForOutFields(Tt){const Mt=this.outFields;if(!Mt||!Mt.length)return this.featureAdapter.getAttributes(Tt);const Pt={};for(const Ft of Mt){const{alias:Dt,clause:Nt}=this._fieldDataCache.get(Ft);Pt[Dt]=Nt?Nt.calculateValue(Tt,this.featureAdapter):this.featureAdapter.getAttribute(Tt,Dt)}return Pt}_processAttributesForDistinctValues(Tt){if(t$2e(Tt)||!this.returnDistinctValues)return Tt;const Mt=this.outFields,Pt=[];if(Mt)for(const Nt of Mt){const{alias:Vt}=this._fieldDataCache.get(Nt);Pt.push(Tt[Vt])}else for(const Nt in Tt)Pt.push(Tt[Nt]);const Ft=`${(Mt||["*"]).join(",")}=${Pt.join(",")}`;let Dt=this._returnDistinctMap.get(Ft)||0;return this._returnDistinctMap.set(Ft,++Dt),Dt>1?null:Tt}}const t$3={convertToGEGeometry:s$3,exportPoint:n$5,exportPolygon:o$5,exportPolyline:a$5,exportMultipoint:c$4,exportExtent:m$6};function s$3(_t,Tt){return Tt==null?null:_t.convertJSONToGeometry(Tt)}class i$6{constructor(Tt,Mt,Pt){this.x=Tt,this.y=Mt,this.spatialReference=Pt,this.z=void 0,this.m=void 0}}function n$5(_t,Tt,Mt){const Pt=new i$6(_t.getPointX(Tt),_t.getPointY(Tt),Mt),Ft=_t.hasZ(Tt),Dt=_t.hasM(Tt);return Ft&&(Pt.z=_t.getPointZ(Tt)),Dt&&(Pt.m=_t.getPointM(Tt)),Pt}class e$5{constructor(Tt,Mt,Pt,Ft){this.rings=Tt,this.spatialReference=Mt,this.hasZ=void 0,this.hasM=void 0,Pt&&(this.hasZ=Pt),Ft&&(this.hasM=Ft)}}function o$5(_t,Tt,Mt){return new e$5(_t.exportPaths(Tt),Mt,_t.hasZ(Tt),_t.hasM(Tt))}class h$8{constructor(Tt,Mt,Pt,Ft){this.paths=Tt,this.spatialReference=Mt,this.hasZ=void 0,this.hasM=void 0,Pt&&(this.hasZ=Pt),Ft&&(this.hasM=Ft)}}function a$5(_t,Tt,Mt){return new h$8(_t.exportPaths(Tt),Mt,_t.hasZ(Tt),_t.hasM(Tt))}class r$3{constructor(Tt,Mt,Pt,Ft){this.points=Tt,this.spatialReference=Mt,this.hasZ=void 0,this.hasM=void 0,Pt&&(this.hasZ=Pt),Ft&&(this.hasM=Ft)}}function c$4(_t,Tt,Mt){return new r$3(_t.exportPoints(Tt),Mt,_t.hasZ(Tt),_t.hasM(Tt))}class x$3{constructor(Tt,Mt,Pt,Ft,Dt){this.xmin=Tt,this.ymin=Mt,this.xmax=Pt,this.ymax=Ft,this.spatialReference=Dt,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}function m$6(_t,Tt,Mt){const Pt=_t.hasZ(Tt),Ft=_t.hasM(Tt),Dt=new x$3(_t.getXMin(Tt),_t.getYMin(Tt),_t.getXMax(Tt),_t.getYMax(Tt),Mt);if(Pt){const Nt=_t.getZExtent(Tt);Dt.zmin=Nt.vmin,Dt.zmax=Nt.vmax}if(Ft){const Nt=_t.getMExtent(Tt);Dt.mmin=Nt.vmin,Dt.mmax=Nt.vmax}return Dt}const h$7=[0,0];function c$3(_t,Tt){if(!Tt)return null;if("x"in Tt){const Mt={x:0,y:0};return[Mt.x,Mt.y]=_t(Tt.x,Tt.y,h$7),Tt.z!=null&&(Mt.z=Tt.z),Tt.m!=null&&(Mt.m=Tt.m),Mt}if("xmin"in Tt){const Mt={xmin:0,ymin:0,xmax:0,ymax:0};return[Mt.xmin,Mt.ymin]=_t(Tt.xmin,Tt.ymin,h$7),[Mt.xmax,Mt.ymax]=_t(Tt.xmax,Tt.ymax,h$7),Tt.hasZ&&(Mt.zmin=Tt.zmin,Mt.zmax=Tt.zmax,Mt.hasZ=!0),Tt.hasM&&(Mt.mmin=Tt.mmin,Mt.mmax=Tt.mmax,Mt.hasM=!0),Mt}return"rings"in Tt?{rings:p$5(Tt.rings,_t),hasM:Tt.hasM,hasZ:Tt.hasZ}:"paths"in Tt?{paths:p$5(Tt.paths,_t),hasM:Tt.hasM,hasZ:Tt.hasZ}:"points"in Tt?{points:l$3(Tt.points,_t),hasM:Tt.hasM,hasZ:Tt.hasZ}:void 0}function p$5(_t,Tt){const Mt=[];for(const Pt of _t)Mt.push(l$3(Pt,Tt));return Mt}function l$3(_t,Tt){const Mt=[];for(const Pt of _t){const Ft=Tt(Pt[0],Pt[1],[0,0]);Mt.push(Ft),Pt.length>2&&Ft.push(Pt[2]),Pt.length>3&&Ft.push(Pt[3])}return Mt}async function f$1(_t,Tt){if(!Tt)return;const Mt=Array.isArray(_t)?_t.map(Pt=>r$1P(Pt.geometry)&&Pt.geometry.spatialReference):[_t];await fn(Mt.map(Pt=>({source:Pt,dest:Tt})))}const x$2=c$3.bind(null,y$1A),y$4=c$3.bind(null,d$1W);function g$2(_t,Tt,Mt,Pt){if(!_t||(Mt||(Mt=Tt,Tt=_t.spatialReference),!I$C(Tt)||!I$C(Mt)||E$G(Tt,Mt)))return _t;if(g$1d(Tt,Mt)){const Ft=k$z(Mt)?x$2(_t):y$4(_t);return Ft.spatialReference=Mt,Ft}return ln(t$3,[_t],Tt,Mt,null,Pt)[0]}class _$2{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(Tt,Mt,Pt){if(!Tt||!Tt.length||!Mt||!Pt||E$G(Mt,Pt))return Tt;const Ft={geometries:Tt,inSpatialReference:Mt,outSpatialReference:Pt,resolve:null};return this._jobs.push(Ft),new Promise(Dt=>{Ft.resolve=Dt,this._timer===null&&(this._timer=setTimeout(this._process,10))})}_process(){this._timer=null;const Tt=this._jobs.shift();if(!Tt)return;const{geometries:Mt,inSpatialReference:Pt,outSpatialReference:Ft,resolve:Dt}=Tt;g$1d(Pt,Ft)?k$z(Ft)?Dt(Mt.map(x$2)):Dt(Mt.map(y$4)):Dt(ln(t$3,Mt,Pt,Ft,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const j$6=new _$2;function M$4(_t,Tt,Mt){return j$6.push(_t,Tt,Mt)}const j$5=new s$1_({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),U$2=Object.freeze({}),M$3=new t$13,F=new t$13,G=new t$13,N$1={esriGeometryPoint:G$c,esriGeometryPolyline:L$h,esriGeometryPolygon:C$f,esriGeometryMultipoint:_$j};function O$3(_t,Tt,Mt,Pt=_t.hasZ,Ft=_t.hasM){if(t$2e(Tt))return null;const Dt=_t.hasZ&&Pt,Nt=_t.hasM&&Ft;if(Mt){const Vt=ie$2(G,Tt,_t.hasZ,_t.hasM,"esriGeometryPoint",Mt,Pt,Ft);return G$c(Vt,Dt,Nt)}return G$c(Tt,Dt,Nt)}function J$1(_t,Tt,Mt,Pt,Ft,Dt,Nt=Tt,Vt=Mt){const zt=Tt&&Nt,Xt=Mt&&Vt,Ht=r$1P(Pt)?"coords"in Pt?Pt:Pt.geometry:null;if(t$2e(Ht))return null;if(Ft){let Wt=fe$2(F,Ht,Tt,Mt,_t,Ft,Nt,Vt);return Dt&&(Wt=ie$2(G,Wt,zt,Xt,_t,Dt)),N$1[_t](Wt,zt,Xt)}if(Dt){const Wt=ie$2(G,Ht,Tt,Mt,_t,Dt,Nt,Vt);return N$1[_t](Wt,zt,Xt)}return ye$2(M$3,Ht,Tt,Mt,Nt,Vt),N$1[_t](M$3,zt,Xt)}async function P$1(_t,Tt,Mt){const{outFields:Pt,orderByFields:Ft,groupByFieldsForStatistics:Dt,outStatistics:Nt}=_t;if(Pt)for(let Vt=0;Vt<Pt.length;Vt++)Pt[Vt]=Pt[Vt].trim();if(Ft)for(let Vt=0;Vt<Ft.length;Vt++)Ft[Vt]=Ft[Vt].trim();if(Dt)for(let Vt=0;Vt<Dt.length;Vt++)Dt[Vt]=Dt[Vt].trim();if(Nt)for(let Vt=0;Vt<Nt.length;Vt++)Nt[Vt].onStatisticField&&(Nt[Vt].onStatisticField=Nt[Vt].onStatisticField.trim());return _t.geometry&&!_t.outSR&&(_t.outSR=_t.geometry.spatialReference),v$5(_t,Tt,Mt)}async function v$5(_t,Tt,Mt){if(!_t)return null;let{where:Pt}=_t;if(_t.where=Pt=Pt&&Pt.trim(),(!Pt||/^1 *= *1$/.test(Pt)||Tt&&Tt===Pt)&&(_t.where=null),!_t.geometry)return _t;let Ft=await Z(_t);if(_t.distance=0,_t.units=null,_t.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:zt}=_t.geometry;Ft=l$28(Ft),Ft.spatialReference=zt}_t.geometry=Ft,await f$1(Ft.spatialReference,Mt);const Dt=(await L$i(d$1M(Ft)))[0];if(t$2e(Dt))throw U$2;const Nt=Dt.toJSON(),Vt=await g$2(Nt,Nt.spatialReference,Mt);if(!Vt)throw U$2;return Vt.spatialReference=Mt,_t.geometry=Vt,_t}async function Z(_t){const{geometry:Tt,distance:Mt,units:Pt}=_t;if(Mt==null||"vertexAttributes"in Tt)return Tt;const Ft=Tt.spatialReference,Dt=Pt?j$5.fromJSON(Pt):Z$8(Ft),Nt=Ft&&(o$1W(Ft)||k$z(Ft))?Tt:await f$1(Ft,c$37).then(()=>g$2(Tt,c$37));return(await b$4())(Nt.spatialReference,Nt,Mt,Dt)}async function b$4(){return(await __vitePreload(()=>import("./geometryEngineJSON.e6f25a73.js"),["assets/geometryEngineJSON.e6f25a73.js","assets/geometryEngineBase.cf4f989f.js","assets/geometryEngineJSON.73e38ad3.js"])).geodesicBuffer}function x$1(_t){return _t&&z in _t?JSON.parse(JSON.stringify(_t,B)):_t}const z="_geVersion",B=(_t,Tt)=>_t!==z?Tt:void 0;class v$4{constructor(Tt,Mt,Pt){this.items=Tt,this.query=Mt,this.geometryType=Pt.geometryType,this.hasM=Pt.hasM,this.hasZ=Pt.hasZ,this.fieldsIndex=Pt.fieldsIndex,this.objectIdField=Pt.objectIdField,this.spatialReference=Pt.spatialReference,this.featureAdapter=Pt.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const Tt=new r$4(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return Tt.countDistinctValues(this.items);const{groupByFieldsForStatistics:Mt,having:Pt,outStatistics:Ft}=this.query;if(!(Mt==null?void 0:Mt.length))return 1;const Nt=new Map,Vt=new Map,zt=new Set;for(const Xt of Ft){const{statisticType:Ht}=Xt,Wt=Ht!=="exceedslimit"?Xt.onStatisticField:void 0;if(!Vt.has(Wt)){const Zt=[];for(const Kt of Mt){const er=this._getAttributeValues(Tt,Kt,Nt);Zt.push(er)}Vt.set(Wt,this._calculateUniqueValues(Zt,Tt.returnDistinctValues))}const Qt=Vt.get(Wt);for(const Zt in Qt){const{data:Kt,items:er}=Qt[Zt],Yt=Kt.join(",");Pt&&!Tt.validateItems(er,Pt)||zt.add(Yt)}}return zt.size}async createQueryResponse(){let Tt;return this.query.outStatistics?Tt=this.query.outStatistics.some(Mt=>Mt.statisticType==="exceedslimit")?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):Tt=this._createFeatureQueryResponse(this.query),this.query.returnQueryGeometry&&(I$C(this.query.outSR)&&!E$G(this.query.geometry.spatialReference,this.query.outSR)?Tt.queryGeometry=x$1({spatialReference:this.query.outSR,...g$2(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):Tt.queryGeometry=x$1({spatialReference:this.query.outSR,...this.query.geometry})),Tt}createSnappingResponse(Tt,Mt){const Pt=this.featureAdapter,Ft=A$2(this.hasZ,this.hasM),{x:Dt,y:Nt}=Tt.point,Vt=typeof Tt.distance=="number"?Tt.distance:Tt.distance.x,zt=typeof Tt.distance=="number"?Tt.distance:Tt.distance.y,Xt={candidates:[]},Ht=this.geometryType==="esriGeometryPolygon",Wt=this._getPointCreator(Tt.point,this.spatialReference,Mt);for(const Qt of this.items){const Zt=Pt.getGeometry(Qt);if(t$2e(Zt))continue;const{coords:Kt,lengths:er}=Zt;if(Tt.types&E$3.EDGE){let Yt=0;for(let rr=0;rr<er.length;rr++){const ir=er[rr];for(let nr=0;nr<ir;nr++,Yt+=Ft){const ar=Kt[Yt],or=Kt[Yt+1];if(nr!==ir-1){const ur=Kt[Yt+Ft],dr=Kt[Yt+Ft+1],{x:hr,y:gr}=R$2(Dt,Nt,ar,or,ur,dr),pr=(Dt-hr)/Vt,mr=(Nt-gr)/zt,wr=pr*pr+mr*mr;wr<=1&&Xt.candidates.push({type:"edge",objectId:Pt.getObjectId(Qt),distance:Math.sqrt(wr),target:Wt(hr,gr),start:Wt(ar,or),end:Wt(ur,dr)})}}}}if(Tt.types&E$3.VERTEX){const Yt=Ht?Kt.length-Ft:Kt.length;for(let rr=0;rr<Yt;rr+=Ft){const ir=Kt[rr],nr=Kt[rr+1],ar=(Dt-ir)/Vt,or=(Nt-nr)/zt,ur=ar*ar+or*or;ur<=1&&Xt.candidates.push({type:"vertex",objectId:Pt.getObjectId(Qt),distance:Math.sqrt(ur),target:Wt(ir,nr)})}}}return Xt.candidates.sort((Qt,Zt)=>Qt.distance-Zt.distance),Xt}_getPointCreator(Tt,Mt,Pt){const Ft=r$1P(Pt)&&!E$G(Mt,Pt)?Dt=>g$2(Dt,Mt,Pt):Dt=>Dt;return Tt.z!=null&&Tt.m!=null?(Dt,Nt)=>Ft({x:Dt,y:Nt,z:Tt.z,m:Tt.m}):Tt.z!=null?(Dt,Nt)=>Ft({x:Dt,y:Nt,z:Tt.z}):Tt.m!=null?(Dt,Nt)=>Ft({x:Dt,y:Nt,m:Tt.m}):(Dt,Nt)=>Ft({x:Dt,y:Nt})}async createSummaryStatisticsResponse(Tt){const{field:Mt,valueExpression:Pt,normalizationField:Ft,normalizationType:Dt,normalizationTotal:Nt,minValue:Vt,maxValue:zt,scale:Xt}=Tt,Ht=this.fieldsIndex.isDateField(Mt),Wt=await this._getDataValues({field:Mt,valueExpression:Pt,normalizationField:Ft,normalizationType:Dt,normalizationTotal:Nt,scale:Xt}),Qt=s$4({normalizationType:Dt,normalizationField:Ft,minValue:Vt,maxValue:zt}),Zt=this.fieldsIndex.get(Mt),Kt={value:.5,fieldType:Zt==null?void 0:Zt.type},er=H$g(Zt)?m$7({values:Wt,supportsNullCount:Qt,percentileParams:Kt}):c$5({values:Wt,minValue:Vt,maxValue:zt,useSampleStdDev:!Dt,supportsNullCount:Qt,percentileParams:Kt});return V$3(er,Ht)}async createUniqueValuesResponse(Tt){const{field:Mt,valueExpression:Pt,domain:Ft,returnAllCodedValues:Dt,scale:Nt}=Tt,Vt=await this._getDataValues({field:Mt,valueExpression:Pt,scale:Nt}),zt=g$3(Vt);return h$9(zt,Ft,Dt)}async createClassBreaksResponse(Tt){const{field:Mt,valueExpression:Pt,normalizationField:Ft,normalizationType:Dt,normalizationTotal:Nt,classificationMethod:Vt,standardDeviationInterval:zt,minValue:Xt,maxValue:Ht,numClasses:Wt,scale:Qt}=Tt,Zt=await this._getDataValues({field:Mt,valueExpression:Pt,normalizationField:Ft,normalizationType:Dt,normalizationTotal:Nt,scale:Qt}),Kt=y$5(Zt,{field:Mt,normalizationField:Ft,normalizationType:Dt,normalizationTotal:Nt,classificationMethod:Vt,standardDeviationInterval:zt,minValue:Xt,maxValue:Ht,numClasses:Wt});return D$1(Kt,Vt)}async createHistogramResponse(Tt){const{field:Mt,valueExpression:Pt,normalizationField:Ft,normalizationType:Dt,normalizationTotal:Nt,classificationMethod:Vt,standardDeviationInterval:zt,minValue:Xt,maxValue:Ht,numBins:Wt,scale:Qt}=Tt,Zt=await this._getDataValues({field:Mt,valueExpression:Pt,normalizationField:Ft,normalizationType:Dt,normalizationTotal:Nt,scale:Qt});return z$1(Zt,{field:Mt,normalizationField:Ft,normalizationType:Dt,normalizationTotal:Nt,classificationMethod:Vt,standardDeviationInterval:zt,minValue:Xt,maxValue:Ht,numBins:Wt})}_sortFeatures(Tt,Mt,Pt){if(Tt.length>1&&Mt&&Mt.length)for(const Ft of Mt.reverse()){const Dt=Ft.split(" "),Nt=Dt[0],Vt=this.fieldsIndex.get(Nt),zt=Dt[1]&&Dt[1].toLowerCase()==="desc",Xt=f$2(Vt==null?void 0:Vt.type,zt);Tt.sort((Ht,Wt)=>{const Qt=Pt(Ht,Nt,Vt),Zt=Pt(Wt,Nt,Vt);return Xt(Qt,Zt)})}}_createFeatureQueryResponse(Tt){const Mt=this.items,{geometryType:Pt,hasM:Ft,hasZ:Dt,objectIdField:Nt,spatialReference:Vt}=this,{outFields:zt,outSR:Xt,quantizationParameters:Ht,resultRecordCount:Wt,resultOffset:Qt,returnZ:Zt,returnM:Kt}=Tt,er=Wt!=null&&Mt.length>(Qt||0)+Wt,Yt=zt&&(zt.includes("*")?[...this.fieldsIndex.fields]:zt.map(rr=>this.fieldsIndex.get(rr)));return{exceededTransferLimit:er,features:this._createFeatures(Tt,Mt),fields:Yt,geometryType:Pt,hasM:Ft&&Kt,hasZ:Dt&&Zt,objectIdFieldName:Nt,spatialReference:x$1(Xt||Vt),transform:Ht&&s$7(Ht)||null}}_createFeatures(Tt,Mt){const Pt=new r$4(Tt,this.featureAdapter,this.fieldsIndex),{hasM:Ft,hasZ:Dt}=this,{orderByFields:Nt,quantizationParameters:Vt,returnGeometry:zt,returnCentroid:Xt,maxAllowableOffset:Ht,resultOffset:Wt,resultRecordCount:Qt,returnZ:Zt=!1,returnM:Kt=!1}=Tt,er=Dt&&Zt,Yt=Ft&&Kt;let rr=[],ir=0;const nr=[...Mt];if(this._sortFeatures(nr,Nt,(or,ur,dr)=>Pt.getFieldValue(or,ur,dr)),zt||Xt){const or=s$7(Vt);if(zt&&!Xt)for(const ur of nr)rr[ir++]={attributes:Pt.getAttributes(ur),geometry:J$1(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ur),Ht,or,er,Yt)};else if(!zt&&Xt)for(const ur of nr)rr[ir++]={attributes:Pt.getAttributes(ur),centroid:O$3(this,this.featureAdapter.getCentroid(ur,this),or)};else for(const ur of nr)rr[ir++]={attributes:Pt.getAttributes(ur),centroid:O$3(this,this.featureAdapter.getCentroid(ur,this),or),geometry:J$1(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(ur),Ht,or,er,Yt)}}else for(const or of nr){const ur=Pt.getAttributes(or);ur&&(rr[ir++]={attributes:ur})}const ar=Wt||0;if(Qt!=null){const or=ar+Qt;rr=rr.slice(ar,Math.min(rr.length,or))}return rr}_createExceedsLimitQueryResponse(Tt){let Mt=!1,Pt=Number.POSITIVE_INFINITY,Ft=Number.POSITIVE_INFINITY,Dt=Number.POSITIVE_INFINITY;for(const Nt of Tt.outStatistics)if(Nt.statisticType==="exceedslimit"){Pt=Nt.maxPointCount!=null?Nt.maxPointCount:Number.POSITIVE_INFINITY,Ft=Nt.maxRecordCount!=null?Nt.maxRecordCount:Number.POSITIVE_INFINITY,Dt=Nt.maxVertexCount!=null?Nt.maxVertexCount:Number.POSITIVE_INFINITY;break}if(this.geometryType==="esriGeometryPoint")Mt=this.items.length>Pt;else if(this.items.length>Ft)Mt=!0;else{const Nt=this.hasZ?this.hasM?4:3:this.hasM?3:2,Vt=this.featureAdapter;Mt=this.items.reduce((zt,Xt)=>{const Ht=Vt.getGeometry(Xt);return zt+(r$1P(Ht)&&Ht.coords.length||0)},0)/Nt>Dt}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(Mt)}}]}}async _createStatisticsQueryResponse(Tt){const Mt={attributes:{}},Pt=[],Ft=new Map,Dt=new Map,Nt=new Map,Vt=new Map,zt=new r$4(Tt,this.featureAdapter,this.fieldsIndex),Xt=Tt.outStatistics,{groupByFieldsForStatistics:Ht,having:Wt,orderByFields:Qt}=Tt,Zt=Ht&&Ht.length,Kt=!!Zt,er=Kt&&Ht[0],Yt=Kt&&!this.fieldsIndex.get(er);for(const ir of Xt){const{outStatisticFieldName:nr,statisticType:ar}=ir,or=ir,ur=ar!=="exceedslimit"?ir.onStatisticField:void 0,dr=ar==="percentile_disc"||ar==="percentile_cont",hr=ar==="EnvelopeAggregate"||ar==="CentroidAggregate"||ar==="ConvexHullAggregate",gr=Kt&&Zt===1&&(ur===er||Yt)&&ar==="count";if(Kt){if(!Nt.has(ur)){const mr=[];for(const wr of Ht){const br=this._getAttributeValues(zt,wr,Ft);mr.push(br)}Nt.set(ur,this._calculateUniqueValues(mr,zt.returnDistinctValues))}const pr=Nt.get(ur);for(const mr in pr){const{count:wr,data:br,items:_r,itemPositions:Mr}=pr[mr],Ar=br.join(",");if(!Wt||zt.validateItems(_r,Wt)){const xr=Vt.get(Ar)||{attributes:{}};if(hr){xr.aggregateGeometries||(xr.aggregateGeometries={});const{aggregateGeometries:yr,outStatisticFieldName:Er}=await this._getAggregateGeometry(or,_r);xr.aggregateGeometries[Er]=yr}else{let yr=null;if(gr)yr=wr;else{const Er=this._getAttributeValues(zt,ur,Ft),Cr=Mr.map(Dr=>Er[Dr]);yr=dr&&"statisticParameters"in or?this._getPercentileValue(or,Cr):this._getStatisticValue(or,Cr,null,zt.returnDistinctValues)}xr.attributes[nr]=yr}Ht.forEach((yr,Er)=>xr.attributes[this.fieldsIndex.get(yr)?yr:`EXPR_${Er+1}`]=br[Er]),Vt.set(Ar,xr)}}}else if(hr){Mt.aggregateGeometries||(Mt.aggregateGeometries={});const{aggregateGeometries:pr,outStatisticFieldName:mr}=await this._getAggregateGeometry(or,this.items);Mt.aggregateGeometries[mr]=pr}else{const pr=this._getAttributeValues(zt,ur,Ft);Mt.attributes[nr]=dr&&"statisticParameters"in or?this._getPercentileValue(or,pr):this._getStatisticValue(or,pr,Dt,zt.returnDistinctValues)}Pt.push({name:nr,alias:nr,type:"esriFieldTypeDouble"})}const rr=Kt?Array.from(Vt.values()):[Mt];return this._sortFeatures(rr,Qt,(ir,nr)=>ir.attributes[nr]),{fields:Pt,features:rr}}async _getAggregateGeometry(Tt,Mt){const Pt=await __vitePreload(()=>import("./geometryEngineJSON.e6f25a73.js"),["assets/geometryEngineJSON.e6f25a73.js","assets/geometryEngineBase.cf4f989f.js","assets/geometryEngineJSON.73e38ad3.js"]),{statisticType:Ft,outStatisticFieldName:Dt}=Tt,{featureAdapter:Nt,spatialReference:Vt,geometryType:zt,hasZ:Xt,hasM:Ht}=this,Wt=Mt.map(Kt=>J$1(zt,Xt,Ht,Nt.getGeometry(Kt))),Qt=Pt.convexHull(Vt,Wt,!0)[0],Zt={aggregateGeometries:null,outStatisticFieldName:null};if(Ft==="EnvelopeAggregate"){const Kt=Qt?v$W(Qt):l$28(Pt.union(Vt,Wt));Zt.aggregateGeometries={...Kt,spatialReference:Vt},Zt.outStatisticFieldName=Dt||"extent"}else if(Ft==="CentroidAggregate"){const Kt=Qt?e$1H(Qt):l$2a(l$28(Pt.union(Vt,Wt)));Zt.aggregateGeometries={x:Kt[0],y:Kt[1],spatialReference:Vt},Zt.outStatisticFieldName=Dt||"centroid"}else Ft==="ConvexHullAggregate"&&(Zt.aggregateGeometries=Qt,Zt.outStatisticFieldName=Dt||"convexHull");return Zt}_getStatisticValue(Tt,Mt,Pt,Ft){const{onStatisticField:Dt,statisticType:Nt}=Tt;let Vt=null;return Vt=Pt!=null&&Pt.has(Dt)?Pt.get(Dt):H$g(this.fieldsIndex.get(Dt))?m$7({values:Mt,returnDistinct:Ft}):c$5({values:Mt,minValue:null,maxValue:null,useSampleStdDev:!0}),Pt&&Pt.set(Dt,Vt),Vt[Nt==="var"?"variance":Nt]}_getPercentileValue(Tt,Mt){const{onStatisticField:Pt,statisticParameters:Ft,statisticType:Dt}=Tt,{value:Nt,orderBy:Vt}=Ft,zt=this.fieldsIndex.get(Pt);return d$5(Mt,{value:Nt,orderBy:Vt,fieldType:zt==null?void 0:zt.type,isDiscrete:Dt==="percentile_disc"})}_getAttributeValues(Tt,Mt,Pt){if(Pt.has(Mt))return Pt.get(Mt);const Ft=this.fieldsIndex.get(Mt),Dt=this.items.map(Nt=>Tt.getFieldValue(Nt,Mt,Ft));return Pt.set(Mt,Dt),Dt}_getAttributeNormalizedValues(Tt,Mt){return this.items.map(Pt=>Tt.getNormalizedValue(Pt,{field:Mt.field,fieldInfo:this.fieldsIndex.get(Mt.field),normalizationField:Mt.normalizationField,normalizationFieldInfo:this.fieldsIndex.get(Mt.normalizationField),normalizationType:Mt.normalizationType,normalizationTotal:Mt.normalizationTotal}))}async _getAttributeExpressionValues(Tt,Mt,Pt){const{arcadeUtils:Ft}=await a$2t(),Dt=Ft.createFunction(Mt),Nt=Pt&&Ft.getViewInfo(Pt);return Tt.getExpressionValues(this.items,Dt,Nt,Ft)}_calculateUniqueValues(Tt,Mt){const Pt={},Ft=this.items,Dt=Ft.length;for(let Nt=0;Nt<Dt;Nt++){const Vt=Ft[Nt],zt=[];for(const Ht of Tt)zt.push(Ht[Nt]);const Xt=zt.join(",");Mt?Pt[Xt]==null&&(Pt[Xt]={count:1,data:zt,items:[Vt],itemPositions:[Nt]}):Pt[Xt]==null?Pt[Xt]={count:1,data:zt,items:[Vt],itemPositions:[Nt]}:(Pt[Xt].count++,Pt[Xt].items.push(Vt),Pt[Xt].itemPositions.push(Nt))}return Pt}async _getDataValues(Tt){const Mt=new r$4(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:Pt,field:Ft,normalizationField:Dt,normalizationType:Nt,normalizationTotal:Vt,scale:zt}=Tt,Xt=Pt?{viewingMode:"map",scale:zt,spatialReference:this.query.outSR||this.spatialReference}:null;return Pt?this._getAttributeExpressionValues(Mt,Pt,Xt):this._getAttributeNormalizedValues(Mt,{field:Ft,normalizationField:Dt,normalizationType:Nt,normalizationTotal:Vt})}}function R$2(_t,Tt,Mt,Pt,Ft,Dt){const Nt=Ft-Mt,Vt=Dt-Pt,zt=Nt*Nt+Vt*Vt,Xt=(_t-Mt)*Nt+(Tt-Pt)*Vt,Ht=Math.min(1,Math.max(0,Xt/zt));return{x:Mt+Nt*Ht,y:Pt+Vt*Ht}}function A$2(_t,Tt){return _t?Tt?4:3:Tt?3:2}var E$3;(function(_t){_t[_t.NONE=0]="NONE",_t[_t.EDGE=1]="EDGE",_t[_t.VERTEX=2]="VERTEX"})(E$3||(E$3={}));function E$2(_t,Tt){const Mt=_t.x-Tt.x,Pt=_t.y-Tt.y;return Mt*Mt+Pt*Pt}function n$4(_t,Tt){const Mt=_t.length===Tt.length&&_t[0]===Tt[0]&&_t[1]===Tt[1];switch(_t.length){case 2:return Mt;case 3:return Mt&&_t[2]===Tt[2];case 4:return Mt&&_t[3]===Tt[3]}return!1}function r$2(_t,Tt){Tt.sort((Mt,Pt)=>b$j(Mt.targetPoint,_t)-b$j(Pt.targetPoint,_t))}var e$4;(function(_t){_t[_t.TARGET=0]="TARGET",_t[_t.REFERENCE=1]="REFERENCE",_t[_t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(e$4||(e$4={}));function h$6(_t,Tt){return _t[0]*Tt[1]-_t[1]*Tt[0]}function E$1(_t,Tt,Mt){const Pt=(Tt[0]-_t[0])*(Mt[1]-_t[1])-(Tt[1]-_t[1])*(Mt[0]-_t[0]);return Math.abs(Pt)/m$u(Tt,Mt)}function I$2(_t,Tt,Mt){const Pt=j$g(Mt,Tt)/p$H(Mt);return l$F(_t,Mt,Pt)}function L$3(_t,Tt,Mt,Pt,Ft=Mt){return o$v(M$2,Pt,Mt),o$v(A$1,Tt,Ft),I$2(R$1,A$1,M$2),s$z(_t,Ft,R$1)}function N(_t,Tt,Mt,Pt){o$v(M$2,Pt,Mt),o$v(A$1,Tt,Mt);const Ft=j$g(M$2,A$1)/p$H(M$2);return Ft>0?d$x(_t,Mt,M$2,Ft):a$K(_t,Mt)}function m$5(_t,Tt,Mt,Pt){o$v(M$2,Tt,Mt);const Ft=Pt/q$6(M$2);return d$x(_t,Mt,M$2,Ft)}function y$3(_t,Tt){return L$3(A$1,Tt,_t.start,_t.end),p$3g(A$1[0],Tt[0])&&p$3g(A$1[1],Tt[1])?[t$t(Tt)]:[]}function d$4(_t,Tt,Mt){return m$5(A$1,Mt,_t,Tt),p$3g(A$1[0],Mt[0])&&p$3g(A$1[1],Mt[1])?[t$t(Mt)]:[]}function j$4(_t,Tt){const Mt=_t.start,Pt=_t.end,Ft=Tt.start,Dt=Tt.end,Nt=o$v(M$2,Pt,Mt),Vt=o$v(k,Dt,Ft),zt=h$6(Nt,Vt);if(Math.abs(zt)<=l$2)return[];const Xt=o$v(A$1,Mt,Ft),Ht=h$6(Vt,Xt)/zt,Wt=h$6(Nt,Xt)/zt;if(Ht>=0){if(Wt>=0||Tt.type===b$3.LINE)return[d$x(R$1,Mt,Nt,Ht)]}else if(_t.type===b$3.LINE&&(Wt>=0||Tt.type===b$3.LINE))return[d$x(R$1,Mt,Nt,Ht)];return[]}function v$3(_t,Tt,Mt){const Pt=[],Ft=o$v(M$2,_t.end,_t.start),Dt=o$v(k,_t.start,Tt),Nt=p$H(Ft),Vt=2*j$g(Ft,Dt),zt=Vt*Vt-4*Nt*(p$H(Dt)-Mt*Mt);if(zt===0){const Xt=-Vt/(2*Nt);(_t.type===b$3.LINE||Xt>=0)&&Pt.push(d$x(R$1,_t.start,Ft,Xt))}else if(zt>0){const Xt=Math.sqrt(zt),Ht=(-Vt+Xt)/(2*Nt);(_t.type===b$3.LINE||Ht>=0)&&Pt.push(d$x(R$1,_t.start,Ft,Ht));const Wt=(-Vt-Xt)/(2*Nt);(_t.type===b$3.LINE||Wt>=0)&&Pt.push(d$x(A$1,_t.start,Ft,Wt))}return Pt}var b$3;(function(_t){_t[_t.RAY=0]="RAY",_t[_t.LINE=1]="LINE"})(b$3||(b$3={}));const l$2=1e-6,M$2=n$N(),k=n$N(),A$1=n$N(),R$1=n$N();class j$3{constructor(Tt){this.coordinateHelper=Tt}}class m$4 extends j$3{constructor(Tt,Mt){super(Tt),this.point=Mt}objectEqual(Tt){return Tt instanceof m$4&&n$4(this.point,Tt.point)}check(Tt){return b$j(Tt,this.point)<p$i.pointThreshold}closestTo(){return this.coordinateHelper.clone(this.point)}intersect(Tt){const Mt=[];return Tt instanceof b$2?Mt.push(...y$3({start:Tt.start,end:Tt.end,type:Tt instanceof H$1?b$3.LINE:b$3.RAY},this.point)):Tt instanceof T&&Mt.push(...d$4(Tt.center,Tt.radius,this.point)),Mt.map(Pt=>new L$2(this.coordinateHelper,Pt,this,Tt))}}class b$2 extends j$3{constructor(Tt,Mt,Pt){super(Tt),this.start=Mt,this.end=Pt}objectEqual(Tt){return Tt instanceof b$2&&n$4(this.start,Tt.start)&&n$4(this.end,Tt.end)}intersect(Tt){const Mt=[];return Tt instanceof m$4?Mt.push(...y$3({start:this.start,end:this.end,type:this instanceof H$1?b$3.LINE:b$3.RAY},Tt.point)):Tt instanceof b$2?Mt.push(...j$4({start:this.start,end:this.end,type:this instanceof H$1?b$3.LINE:b$3.RAY},{start:Tt.start,end:Tt.end,type:Tt instanceof H$1?b$3.LINE:b$3.RAY})):Tt instanceof T&&Mt.push(...v$3({start:this.start,end:this.end,type:this instanceof H$1?b$3.LINE:b$3.RAY},Tt.center,Tt.radius)),Mt.map(Pt=>new L$2(this.coordinateHelper,Pt,this,Tt))}}class q extends b$2{constructor(Tt,Mt,Pt){super(Tt,Mt,Pt),this.dir=n$N(),this.p=n$N()}objectEqual(Tt){return Tt instanceof q&&super.objectEqual(Tt)}check(Tt){return o$v(this.dir,this.end,this.start),o$v(this.p,Tt,this.start),j$g(this.dir,this.p)>=0&&E$1(Tt,this.start,this.end)<p$i.pointOnLineThreshold}closestTo(Tt){const Mt=this.coordinateHelper.clone(Tt);return N(Mt,Tt,this.start,this.end),Mt}}class H$1 extends b$2{constructor(Tt,Mt,Pt){super(Tt,Mt,Pt)}objectEqual(Tt){return Tt instanceof H$1&&super.objectEqual(Tt)}check(Tt){return E$1(Tt,this.start,this.end)<p$i.pointOnLineThreshold}closestTo(Tt){const Mt=this.coordinateHelper.clone(Tt);return L$3(Mt,Tt,this.start,this.end),Mt}}class L$2 extends j$3{constructor(Tt,Mt,Pt,Ft){super(Tt),this.intersection=Mt,this.first=Pt,this.second=Ft}objectEqual(Tt){return Tt instanceof L$2&&this.first.objectEqual(Tt.first)&&this.second.objectEqual(Tt.second)}check(){return!1}closestTo(Tt){const Mt=this.coordinateHelper.clone(Tt);return a$K(Mt,this.intersection),Mt}intersect(){return[]}}class T extends j$3{constructor(Tt,Mt,Pt){super(Tt),this.center=Mt,this.radius=Pt}objectEqual(Tt){return Tt instanceof T&&this.center[0]===Tt.center[0]&&this.center[1]===Tt.center[1]&&this.radius===Tt.radius}check(){return!1}closestTo(Tt){const Mt=this.coordinateHelper.clone(Tt);return m$5(Mt,Tt,this.center,this.radius),Mt}intersect(Tt){const Mt=[];return Tt instanceof b$2?Mt.push(...v$3({start:Tt.start,end:Tt.end,type:Tt instanceof H$1?b$3.LINE:b$3.RAY},this.center,this.radius)):Tt instanceof m$4&&Mt.push(...d$4(this.center,this.radius,Tt.point)),Mt.map(Pt=>new L$2(this.coordinateHelper,Pt,this,Tt))}}class t$2{constructor(Tt,Mt,Pt,Ft){this.coordinateHelper=Tt,this.targetPoint=Mt,this.constraint=Pt,this.elevationInfo=Ft}}class e$3 extends t$2{constructor({coordinateHelper:Tt,targetPoint:Mt,objectId:Pt,constraint:Ft,elevationInfo:Dt}){super(Tt,Mt,Ft,Dt),this.objectId=Pt}}class o$4{constructor(Tt){this.elevationInfo=Tt}}s$2l.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");class s$2 extends o$4{constructor(Tt,Mt,Pt,Ft,Dt=!0,Nt=!0){super(Ft),this.type=Tt,this.lineStart=Mt,this.lineEnd=Pt,this.fadeLeft=Dt,this.fadeRight=Nt}equals(Tt){return Tt instanceof s$2&&this.type===Tt.type&&n$4(this.lineStart,Tt.lineStart)&&n$4(this.lineEnd,Tt.lineEnd)&&this.fadeLeft===Tt.fadeLeft&&this.fadeRight===Tt.fadeRight}}class e$2 extends e$3{constructor(Tt){super({...Tt,constraint:new H$1(Tt.coordinateHelper,Tt.edgeStart,Tt.edgeEnd)})}get hints(){return[new s$2(e$4.REFERENCE,this.constraint.start,this.constraint.end,this.elevationInfo)]}}s$2l.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");class i$5 extends o$4{constructor(Tt,Mt,Pt,Ft){super(Ft),this.previousVertex=Tt,this.centerVertex=Mt,this.nextVertex=Pt}equals(Tt){return Tt instanceof i$5&&n$4(this.previousVertex,Tt.previousVertex)&&n$4(this.centerVertex,Tt.centerVertex)&&n$4(this.nextVertex,Tt.nextVertex)}}class o$3 extends t$2{constructor({coordinateHelper:Tt,targetPoint:Mt,constraint:Pt,previousVertex:Ft,otherVertex:Dt,otherVertexType:Nt,objectId:Vt,elevationInfo:zt}){super(Tt,Mt,Pt,zt),this.previousVertex=Ft,this.otherVertex=Dt,this.otherVertexType=Nt,this.objectId=Vt}get hints(){const Tt=this.previousVertex,Mt=this.otherVertexType===n$3.CENTER?this.otherVertex:this.targetPoint,Pt=this.otherVertexType===n$3.CENTER?this.targetPoint:this.otherVertex,Ft=this.elevationInfo;return[new s$2(e$4.TARGET,Mt,Pt,Ft),new s$2(e$4.REFERENCE,Tt,Mt,Ft),new i$5(this.previousVertex,Mt,Pt,Ft)]}}var n$3;(function(_t){_t[_t.NEXT=0]="NEXT",_t[_t.CENTER=1]="CENTER"})(n$3||(n$3={}));function l$1(_t,Tt,Mt,Pt,Ft=n$2z()){const Dt=Tt.toXYZ(_t);return Dt[2]=v$a(Pt,Dt,Tt.spatialReference,Mt)||0,Pt.renderCoordsHelper.toRenderCoords(Dt,Tt.spatialReference,Ft),Ft}function m$3(_t,Tt,Mt,Pt,Ft=n$2z()){const Dt=r$1t(h$5,_t);return Dt[2]=v$a(Pt,Dt,Tt,Mt)||0,Pt.renderCoordsHelper.toRenderCoords(Dt,Tt,Ft),Ft}function R(_t,Tt,Mt,Pt){return Pt.type==="2d"?Pt.toScreen(Tt.vectorToPoint(_t,C$2)):(l$1(_t,Tt,Mt,Pt,h$5),Pt.state.camera.projectToScreen(h$5,v$2),c$2D(v$2[0],v$2[1]))}function j$2(_t,Tt,Mt,Pt,Ft,Dt,Nt){const Vt=Mt.toXYZ(_t),zt=Mt.toXYZ(Tt);if(Pt.mode!=="absolute-height"){const Xt=v$a(Ft,Vt,Mt.spatialReference,Pt),Ht=v$a(Ft,zt,Mt.spatialReference,Pt),Wt=(Xt==null?Ht:Ht==null?Xt:Math.min(Xt,Ht))||0;Vt[2]=Wt,zt[2]=Wt}Ft.renderCoordsHelper.toRenderCoords(Vt,Mt.spatialReference,Dt),Ft.renderCoordsHelper.toRenderCoords(zt,Mt.spatialReference,Nt)}const C$2=new j$Z,h$5=n$2z(),v$2=i$24();let C$1=class extends d$1O{constructor(_t){super(_t),this.options=null,this.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}}}get updating(){return n$2O(this.snappingSources,({snappingSource:_t})=>_t.updating)||this.updatingHandles.updating}get snappingSources(){const _t=this._get("snappingSources")||new Map,Tt=new Map;if(r$1P(this.options)&&r$1P(this.options.featureSources))for(const Mt of this.options.featureSources.items){const Pt=Mt.layer.uid,Ft=_t.get(Pt);if(Ft){_t.delete(Pt),Tt.set(Pt,Ft);continue}if(!Mt.layer.loaded){this.updatingHandles.addPromise(Mt.layer.load());continue}const Dt=this._createSourceInfo(Mt);r$1P(Dt)&&Tt.set(Pt,Dt)}for(const[,Mt]of _t)Mt.destroy();return Tt}initialize(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),U$r),r$1P(this.view)&&this.handles.add([this.view.on("layerview-create",_t=>this._updateLayerView(_t.layer,_t.layerView)),this.view.on("layerview-destroy",_t=>this._updateLayerView(_t.layer,null))])}_updateLayerView(_t,Tt){for(const[,Mt]of this.snappingSources)Mt.snappingSource.layerSource.layer===_t&&(Mt.layerView=Tt)}destroy(){this._set("options",null);for(const[,_t]of this.snappingSources)_t.destroy()}async fetchCandidates(_t,Tt,Mt){if(t$2e(this.options)||!this.options.effectiveFeatureEnabled)return[];const Pt=[],Ft=this._computeScreeenSizeDistanceParameters(_t,Tt),Dt={distance:Ft,point:_t,coordinateHelper:Tt.coordinateHelper,types:this.types,filter:null};for(const[,{snappingSource:Vt,layerView:zt}]of this.snappingSources)!Vt.layerSource.enabled||r$1P(zt)&&zt.suspended||Pt.push(Vt.fetchCandidates(Dt,Mt).then(Xt=>Xt.filter(Ht=>!this._candidateIsExcluded(Vt,Ht,Tt.excludeFeature))));const Nt=(await C$w(Pt)).flat();return this._addRightAngleCandidates(Nt,_t,Ft,Tt),f$1M(Mt),r$2(_t,Nt),Nt}_addRightAngleCandidates(_t,Tt,Mt,Pt){var Vt,zt,Xt,Ht,Wt,Qt,Zt,Kt;const Ft=r$1P(Pt.vertexHandle)?(zt=(Vt=Pt.vertexHandle.rightEdge)==null?void 0:Vt.rightVertex)==null?void 0:zt.pos:r$1P(Pt.editGeometryOperations)&&Pt.editGeometryOperations.data.type==="polygon"?(Ht=(Xt=Pt.editGeometryOperations.data.components[0])==null?void 0:Xt.getFirstVertex())==null?void 0:Ht.pos:null,Dt=r$1P(Pt.vertexHandle)?(Qt=(Wt=Pt.vertexHandle.leftEdge)==null?void 0:Wt.leftVertex)==null?void 0:Qt.pos:r$1P(Pt.editGeometryOperations)?(Kt=(Zt=Pt.editGeometryOperations.data.components[0])==null?void 0:Zt.getLastVertex())==null?void 0:Kt.pos:null,Nt=_t.length;for(let er=0;er<Nt;er++)this._addRightAngleCandidate(_t[er],Dt,Tt,Mt,Pt,_t),this._addRightAngleCandidate(_t[er],Ft,Tt,Mt,Pt,_t)}_addRightAngleCandidate(_t,Tt,Mt,Pt,Ft,Dt){if(t$2e(Tt)||!(_t instanceof e$2))return;const Nt=_t.constraint.closestTo(Tt),Vt=(Nt[0]-Mt[0])/Pt.x,zt=(Nt[1]-Mt[1])/Pt.y;if(Vt*Vt+zt*zt<=1){const Xt=Ft.coordinateHelper;Dt.push(new o$3({coordinateHelper:Xt,targetPoint:Nt,otherVertex:Tt,otherVertexType:n$3.NEXT,previousVertex:_t.constraint.start,constraint:new q(Xt,Tt,Nt),objectId:_t.objectId,elevationInfo:_t.elevationInfo}))}}_computeScreeenSizeDistanceParameters(_t,Tt){const Mt=r$1P(this.options)?this.options.distance*(Tt.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;if(t$2e(this.view))return{x:Mt,y:Mt,pixelSize:Mt};if(this.view.type==="2d"){const Pt=Mt*this.view.resolution;return{x:Pt,y:Pt,pixelSize:Pt}}return this._computeScreenSizeDistanceParameters3D(_t,Mt,this.view,Tt)}_computeScreenSizeDistanceParameters3D(_t,Tt,Mt,Pt){const{coordinateHelper:Ft,elevationInfo:Dt}=Pt,Nt=Mt.state.camera.computeScreenPixelSizeAt(l$1(_t,Ft,Dt,Mt,M$1)),Vt=Nt*Mt.renderCoordsHelper.unitInMeters/Mt.mapCoordsHelper.unitInMeters,zt=Tt*Vt;return{x:zt/this._computeScreenMagnitudeOfMapOffset(_t,Vt,0,Mt,Pt),y:zt/this._computeScreenMagnitudeOfMapOffset(_t,0,Vt,Mt,Pt),pixelSize:Nt}}_computeScreenMagnitudeOfMapOffset(_t,Tt,Mt,Pt,{coordinateHelper:Ft,elevationInfo:Dt}){const Nt=Ft.clone(_t);Nt[0]+=Tt,Nt[1]+=Mt;const Vt=R(_t,Ft,Dt,Pt),zt=R(Nt,Ft,Dt,Pt),Xt=zt.x-Vt.x,Ht=zt.y-Vt.y;return Math.sqrt(Xt*Xt+Ht*Ht)}get types(){return E$3.EDGE|E$3.VERTEX}_candidateIsExcluded(_t,Tt,Mt){if(t$2e(Mt))return!1;const Pt=this._getCandidateObjectId(Tt);if(t$2e(Pt))return!1;const Ft=_t.layerSource.layer;return Ft.type==="graphics"?Mt.uid===Pt:Mt.sourceLayer===Ft&&!(!Mt.attributes||!("objectIdField"in Ft))&&Mt.attributes[Ft.objectIdField]===Pt}_getCandidateObjectId(_t){return _t instanceof e$3?_t.objectId:null}_createSourceInfo(_t){const Tt=this._createFeatureSnappingSourceType(_t);if(t$2e(Tt))return null;if("loading"in Tt)return this.updatingHandles.addPromise(Tt.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const Mt=r$1P(this.view)?this.view.allLayerViews.find(Pt=>Pt.layer===_t.layer):null;return new H(Tt.source,Mt)}_createFeatureSnappingSourceType(_t){switch(_t.layer.type){case"feature":case"geojson":case"csv":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(_t);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(_t)}return null}_createFeatureSnappingSourceFeatureLayer(_t){switch(_t.layer.source.type){case"feature-layer":{const Tt=this._getSourceModule("featureService");return r$1P(Tt.module)?{source:new Tt.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:_t})}:{loading:Tt.loader}}case"memory":case"csv":case"geojson":case"wfs":{if(_t.layer.geometryType==="mesh")return null;const Tt=this._getSourceModule("featureCollection");return r$1P(Tt.module)?{source:new Tt.module.FeatureCollectionSnappingSource({layerSource:_t})}:{loading:Tt.loader}}}return null}_createFeatureSnappingSourceGraphicsLayer(_t){const Tt=this._getSourceModule("graphics");return r$1P(Tt.module)?{source:new Tt.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:_t})}:{loading:Tt.loader}}_getSourceModule(_t){const Tt=this.sourceModules[_t];if(t$2e(Tt.loader)){const Mt=this._loadSourceModule(_t).then(Pt=>{Tt.module=Pt});return Tt.loader=Mt,{module:Tt.module,loader:Mt}}return{module:Tt.module,loader:Tt.loader}}_loadSourceModule(_t){switch(_t){case"featureService":return this.updatingHandles.addPromise(__vitePreload(()=>import("./FeatureServiceSnappingSource.0facd829.js"),["assets/FeatureServiceSnappingSource.0facd829.js","assets/boundedPlane.d7d86859.js","assets/vectorStacks.a7af424f.js","assets/quatf64.b60d4974.js","assets/mat4f64.84d5c445.js","assets/sphere.fe54e1ae.js","assets/lineSegment.42c0099b.js","assets/plane.1ed71234.js","assets/queryEngineUtils.4c8806d1.js","assets/PointSnappingHint.735dac09.js","assets/WorkerHandle.a8d6acef.js"]));case"featureCollection":return this.updatingHandles.addPromise(__vitePreload(()=>import("./FeatureCollectionSnappingSource.f5dfe986.js"),["assets/FeatureCollectionSnappingSource.f5dfe986.js","assets/queryEngineUtils.4c8806d1.js","assets/PointSnappingHint.735dac09.js"]));case"graphics":return this.updatingHandles.addPromise(__vitePreload(()=>import("./GraphicsSnappingSource.90022b89.js"),["assets/GraphicsSnappingSource.90022b89.js","assets/normalizeUtilsSync.ca14d31b.js","assets/FeatureStore.d8739ab5.js","assets/PooledRBush.88201bbf.js","assets/optimizedFeatureQueryEngineAdapter.5c61cb3b.js","assets/centroid.296f6ecc.js","assets/QueryEngine.9ca689c7.js","assets/QueryEngineCapabilities.c2e9875c.js","assets/timeSupport.a1a47a12.js","assets/queryEngineUtils.4c8806d1.js","assets/PointSnappingHint.735dac09.js"]))}return null}};e$2a([d$25({constructOnly:!0})],C$1.prototype,"spatialReference",void 0),e$2a([d$25({constructOnly:!0})],C$1.prototype,"view",void 0),e$2a([d$25()],C$1.prototype,"options",void 0),e$2a([d$25({readOnly:!0})],C$1.prototype,"updating",null),e$2a([d$25({readOnly:!0})],C$1.prototype,"snappingSources",null),C$1=e$2a([n$2L("esri.views.interactive.snapping.FeatureSnappingEngine")],C$1);class H{constructor(Tt,Mt){this.snappingSource=Tt,this.layerView=Mt,this.handles=new u$1P;const Pt=this.snappingSource.layerSource.layer;if("refresh"in Pt){const Ft=Pt;this.handles.add(Ft.on("refresh",()=>Tt.refresh()))}this.handles.add([l$2e(()=>Tt.updating,Ft=>Tt.layerSource.updating=Ft,w$X),l$2e(()=>Tt.availability,Ft=>Tt.layerSource.availability=Ft,w$X)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}}const M$1=n$2z();class i$4{constructor(Tt,Mt){this.view=Tt,this.options=Mt,this.squaredShortLineThreshold=p$i.shortLineThreshold*p$i.shortLineThreshold}snap(Tt,Mt){return r$1P(Mt.vertexHandle)?Mt.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(Tt,Mt):this.snapNewVertex(Tt,Mt)}edgeExceedsShortLineThreshold(Tt,Mt){return this.exceedsShortLineThreshold(Tt.leftVertex.pos,Tt.rightVertex.pos,Mt)}exceedsShortLineThreshold(Tt,Mt,{elevationInfo:Pt,editGeometryOperations:Ft}){const Dt=Ft.data.coordinateHelper;return this.squaredShortLineThreshold===0||E$2(R(Mt,Dt,Pt,this.view),R(Tt,Dt,Pt,this.view))>this.squaredShortLineThreshold}squaredProximityTreshold(Tt){return Tt==="touch"?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}get squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get squaredTouchProximityThreshold(){const{distance:Tt,touchSensitivityMultiplier:Mt}=this.options,Pt=Tt*Mt;return Pt*Pt}}class a$4 extends t$2{constructor({coordinateHelper:Tt,lineStart:Mt,lineEnd:Pt,targetPoint:Ft,elevationInfo:Dt}){super(Tt,Ft,new H$1(Tt,Mt,Pt),Dt),this.referenceLineHint=new s$2(e$4.REFERENCE_EXTENSION,Mt,Pt,Dt)}get hints(){return[this.referenceLineHint,new s$2(e$4.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.elevationInfo)]}_lineEndClosestToTarget(){const Tt=this.constraint.start,Mt=this.constraint.end;return Math.sign(j$g(o$v(c$2,Mt,Tt),o$v(p$4,this.targetPoint,Tt)))>0?Mt:Tt}}const p$4=n$N(),c$2=n$N();class d$3 extends i$4{snapNewVertex(Tt,Mt){const Pt=Mt.editGeometryOperations.data.components[0],Ft=Pt.edges.length,Dt=[];if(Ft<1)return Dt;const Nt=Mt.coordinateHelper,Vt=R(Tt,Nt,Mt.elevationInfo,this.view),zt=Pt.edges[Ft-1];let Xt=zt;do this.edgeExceedsShortLineThreshold(Xt,Mt)&&this._processCandidateProposal(Xt.leftVertex.pos,Xt.rightVertex.pos,Tt,Vt,Mt,Dt),Xt=Xt.leftVertex.leftEdge;while(Xt&&Xt!==zt);return Dt}snapExistingVertex(Tt,Mt){const Pt=[],Ft=Mt.vertexHandle,Dt=Ft.component;if(Dt.edges.length<2)return Pt;const Nt=Mt.coordinateHelper,Vt=R(Tt,Nt,Mt.elevationInfo,this.view),zt=Ft.leftEdge,Xt=Ft.rightEdge;zt&&Xt&&this.edgeExceedsShortLineThreshold(zt,Mt)&&this.edgeExceedsShortLineThreshold(Xt,Mt)&&this._processCandidateProposal(zt.leftVertex.pos,Xt.rightVertex.pos,Tt,Vt,Mt,Pt);const Ht=Dt.edges[0];let Wt=Ht;do Wt!==Ft.leftEdge&&Wt!==Ft.rightEdge&&this.edgeExceedsShortLineThreshold(Wt,Mt)&&this._processCandidateProposal(Wt.leftVertex.pos,Wt.rightVertex.pos,Tt,Vt,Mt,Pt),Wt=Wt.rightVertex.rightEdge;while(Wt&&Wt!==Ht);return Pt}_processCandidateProposal(Tt,Mt,Pt,Ft,Dt,Nt){const Vt=L$3(n$N(),Pt,Tt,Mt),{coordinateHelper:zt,elevationInfo:Xt,pointer:Ht}=Dt,Wt=zt.fromXYZ(Vt,zt.getZ(Pt,0));E$2(Ft,R(Wt,zt,Xt,this.view))<this.squaredProximityTreshold(Ht)&&Nt.push(new a$4({coordinateHelper:zt,lineStart:Tt,lineEnd:Mt,targetPoint:Wt,elevationInfo:Xt}))}}s$2l.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");class e$1 extends o$4{constructor(Tt,Mt,Pt){super(Pt),this.lineStart=Tt,this.lineEnd=Mt}equals(Tt){return Tt instanceof e$1&&n$4(this.lineStart,Tt.lineStart)&&n$4(this.lineEnd,Tt.lineEnd)}}class o$2 extends t$2{constructor({coordinateHelper:Tt,referenceLine:Mt,lineStart:Pt,targetPoint:Ft,elevationInfo:Dt}){const Nt=Tt.clone(Pt);o$v(Nt,s$z(Nt,Nt,Mt.rightVertex.pos),Mt.leftVertex.pos),super(Tt,Ft,new H$1(Tt,Pt,Nt),Dt),this._referenceLines=[{edge:Mt,fadeLeft:!0,fadeRight:!0}]}get hints(){const Tt=this.elevationInfo;return[new s$2(e$4.TARGET,this.constraint.start,this.targetPoint,Tt),new e$1(this.constraint.start,this.targetPoint,Tt),...this._referenceLines.map(Mt=>new s$2(e$4.REFERENCE,Mt.edge.leftVertex.pos,Mt.edge.rightVertex.pos,Tt,Mt.fadeLeft,Mt.fadeRight))]}addReferenceLine(Tt){const Mt={edge:Tt,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(Pt=>{Tt.rightVertex.rightEdge===Pt.edge&&(Pt.fadeLeft=!1,Mt.fadeRight=!1),Tt.leftVertex.leftEdge===Pt.edge&&(Pt.fadeRight=!1,Mt.fadeLeft=!1)}),this._referenceLines.push(Mt)}}class c$1 extends i$4{constructor(){super(...arguments),this._tmpProjection=n$N()}snapNewVertex(Tt,Mt){const Pt=Mt.editGeometryOperations.data.components[0],Ft=Pt.edges.length,Dt=Pt.vertices.length,Nt=[];if(Ft<2)return Nt;const Vt=R(Tt,Mt.coordinateHelper,Mt.elevationInfo,this.view),zt=Pt.vertices[Dt-1],Xt=Pt.vertices[0],Ht=Pt.edges[Ft-1];let Wt=Ht;do this.edgeExceedsShortLineThreshold(Wt,Mt)&&(this._checkEdgeForParalleLines(Wt,zt.pos,Tt,Vt,Mt,Nt),this._checkEdgeForParalleLines(Wt,Xt.pos,Tt,Vt,Mt,Nt)),Wt=Wt.leftVertex.leftEdge;while(Wt&&Wt!==Ht);return Nt}snapExistingVertex(Tt,Mt){const Pt=[],Ft=Mt.vertexHandle,Dt=Ft.component;if(Dt.edges.length<3)return Pt;const Nt=R(Tt,Mt.coordinateHelper,Mt.elevationInfo,this.view),Vt=Ft.leftEdge,zt=Ft.rightEdge,Xt=Dt.vertices[0],Ht=Dt.vertices.length,Wt=Dt.vertices[Ht-1],Qt=Dt.edges[0];let Zt=Qt;do Zt!==Vt&&Zt!==zt&&this.edgeExceedsShortLineThreshold(Zt,Mt)&&(Vt&&this._checkEdgeForParalleLines(Zt,Vt.leftVertex.pos,Tt,Nt,Mt,Pt),zt&&this._checkEdgeForParalleLines(Zt,zt.rightVertex.pos,Tt,Nt,Mt,Pt),Ft===Xt?this._checkEdgeForParalleLines(Zt,Wt.pos,Tt,Nt,Mt,Pt):Ft===Wt&&this._checkEdgeForParalleLines(Zt,Xt.pos,Tt,Nt,Mt,Pt)),Zt=Zt.rightVertex.rightEdge;while(Zt&&Zt!==Qt);return Pt}_checkEdgeForParalleLines(Tt,Mt,Pt,Ft,Dt,Nt){const Vt=Tt.leftVertex.pos,zt=Tt.rightVertex.pos;if(L$3(this._tmpProjection,Mt,Vt,zt),b$j(this._tmpProjection,Mt)<p$i.parallelLineThreshold)return;L$3(this._tmpProjection,Pt,Vt,zt,Mt);const{coordinateHelper:Xt,elevationInfo:Ht,pointer:Wt}=Dt,Qt=Xt.fromXYZ(this._tmpProjection,Xt.getZ(Pt,0));if(E$2(Ft,R(Qt,Xt,Ht,this.view))<this.squaredProximityTreshold(Wt)){if(this._parallelToPreviousCandidate(Tt,Nt))return;Nt.push(new o$2({coordinateHelper:Xt,referenceLine:Tt,lineStart:Mt,targetPoint:Qt,elevationInfo:Ht}))}}_parallelToPreviousCandidate(Tt,Mt){const Pt=Tt.leftVertex.pos,Ft=Tt.rightVertex.pos;for(const Dt of Mt)if(L$3(this._tmpProjection,Ft,Dt.constraint.start,Dt.constraint.end,Pt),b$j(this._tmpProjection,Ft)<p$i.parallelLineThreshold)return Dt.addReferenceLine(Tt),!0;return!1}}class f extends i$4{constructor(){super(...arguments),this._tmp=n$N()}snapNewVertex(Tt,Mt){const Pt=Mt.editGeometryOperations.data.components[0],Ft=Pt.vertices.length,Dt=[];if(Ft<2)return Dt;const Nt=R(Tt,Mt.coordinateHelper,Mt.elevationInfo,this.view),Vt=Pt.vertices[Ft-1];this._checkForSnappingCandidate(Dt,Vt.leftEdge,Vt.pos,Tt,Vt.leftEdge.leftVertex.pos,Vt.pos,Mt,Tt,Nt);const zt=Pt.vertices[0];return this._checkForSnappingCandidate(Dt,zt.rightEdge,zt.pos,Tt,zt.rightEdge.rightVertex.pos,zt.pos,Mt,Tt,Nt),Dt}snapExistingVertex(Tt,Mt){const Pt=[],Ft=Mt.vertexHandle,Dt=Ft.component,Nt=Dt.vertices.length;if(Nt<3)return Pt;const Vt=R(Tt,Mt.coordinateHelper,Mt.elevationInfo,this.view),zt=Ft.leftEdge,Xt=Ft.rightEdge,Ht=Dt.vertices[0],Wt=Dt.vertices[Nt-1];if(!zt)return this._checkForSnappingCandidate(Pt,Ht.rightEdge.rightVertex.rightEdge,Ht.rightEdge.rightVertex.pos,Tt,Ht.rightEdge.rightVertex.rightEdge.rightVertex.pos,Ht.rightEdge.rightVertex.pos,Mt,Tt,Vt),Pt;if(!Xt)return this._checkForSnappingCandidate(Pt,Wt.leftEdge.leftVertex.leftEdge,Wt.leftEdge.leftVertex.pos,Tt,Wt.leftEdge.leftVertex.leftEdge.leftVertex.pos,Wt.leftEdge.leftVertex.pos,Mt,Tt,Vt),Pt;if(zt&&zt.leftVertex.leftEdge){const Qt=zt.leftVertex.leftEdge;this._checkForSnappingCandidate(Pt,Qt,zt.leftVertex.pos,Tt,Qt.leftVertex.pos,zt.leftVertex.pos,Mt,Tt,Vt)}if(Xt&&Xt.rightVertex.rightEdge){const Qt=Xt.rightVertex.rightEdge;this._checkForSnappingCandidate(Pt,Qt,Xt.rightVertex.pos,Tt,Qt.rightVertex.pos,Xt.rightVertex.pos,Mt,Tt,Vt)}return Pt}_checkForSnappingCandidate(Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt){if(!this.edgeExceedsShortLineThreshold(Mt,Vt))return;o$v(this._tmp,Mt.rightVertex.pos,Mt.leftVertex.pos);const Ht=r$u(this._tmp[1],-this._tmp[0]),Wt=j$g(Ht,o$v(this._tmp,Ft,Pt))/p$H(Ht),{coordinateHelper:Qt,elevationInfo:Zt,pointer:Kt}=Vt,er=Qt.fromXYZ(d$x(n$N(),Nt,Ht,Wt),Qt.getZ(zt,0));E$2(Xt,R(er,Qt,Zt,this.view))<this.squaredProximityTreshold(Kt)&&Tt.push(new o$3({coordinateHelper:Qt,targetPoint:er,constraint:new q(Qt,Nt,d$x(Qt.createVector(),Nt,Ht,Math.sign(Wt))),previousVertex:Dt,otherVertex:Nt,otherVertexType:n$3.CENTER,elevationInfo:Zt}))}}class a$3 extends t$2{constructor({coordinateHelper:Tt,targetPoint:Mt,point1:Pt,point2:Ft,elevationInfo:Dt}){super(Tt,Mt,new T(Tt,A$9(h$4,Pt,Ft,.5),.5*m$u(Pt,Ft)),Dt),this.p1=Pt,this.p2=Ft}get hints(){const Tt=this.elevationInfo;return[new s$2(e$4.REFERENCE,this.targetPoint,this.p1,Tt),new s$2(e$4.REFERENCE,this.targetPoint,this.p2,Tt),new i$5(this.p1,this.targetPoint,this.p2,Tt)]}}const h$4=n$N();class d$2 extends i$4{snapNewVertex(Tt,Mt){const Pt=Mt.editGeometryOperations.data.components[0],Ft=[],Dt=Pt.vertices.length;if(Mt.editGeometryOperations.data.type!=="polygon"||Dt<2)return Ft;const Nt=Pt.vertices[0],Vt=Pt.vertices[Dt-1];return this._processCandidateProposal(Nt.pos,Vt.pos,Tt,Mt,Ft),Ft}snapExistingVertex(Tt,Mt){const Pt=[],Ft=Mt.vertexHandle,Dt=Ft.component;return Dt.edges.length<2||(Mt.editGeometryOperations.data.type!=="polyline"||Ft.index!==0&&Ft.index!==Dt.vertices.length-1)&&this._processCandidateProposal(Ft.leftEdge.leftVertex.pos,Ft.rightEdge.rightVertex.pos,Tt,Mt,Pt),Pt}_processCandidateProposal(Tt,Mt,Pt,Ft,Dt){if(!this.exceedsShortLineThreshold(Tt,Mt,Ft))return;const Nt=A$9(n$N(),Tt,Mt,.5),Vt=.5*m$u(Tt,Mt),zt=m$5(n$N(),Pt,Nt,Vt),{coordinateHelper:Xt,elevationInfo:Ht,pointer:Wt}=Ft,Qt=Xt.fromXYZ(zt,Xt.getZ(Pt,0)),Zt=R(Pt,Xt,Ht,this.view);E$2(Zt,R(Qt,Xt,Ht,this.view))<this.squaredProximityTreshold(Wt)&&Dt.push(new a$3({coordinateHelper:Xt,targetPoint:Qt,point1:Tt,point2:Mt,elevationInfo:Ht}))}}let m$2=class extends y$1E{constructor(_t){super(_t),this.updating=!1,this._snappers=new j$11}initialize(){this._snappers.push(new c$1(this.view,this.options),new d$3(this.view,this.options),new f(this.view,this.options),new d$2(this.view,this.options))}set options(_t){this._set("options",_t);for(const Tt of this._snappers)Tt.options=_t}async fetchCandidates(_t,Tt){if(!this.options.effectiveSelfEnabled)return[];const Mt=[];for(const Pt of this._snappers.items)Mt.push(...Pt.snap(_t,Tt));return r$2(_t,Mt),Mt}};e$2a([d$25({readOnly:!0})],m$2.prototype,"updating",void 0),e$2a([d$25({constructOnly:!0})],m$2.prototype,"view",void 0),e$2a([d$25()],m$2.prototype,"options",null),m$2=e$2a([n$2L("esri.views.interactive.snapping.SelfSnappingEngine")],m$2);function i$3(_t,Tt){return[new m$2({view:_t,options:Tt}),new C$1({view:_t,options:Tt,spatialReference:_t.spatialReference})]}class i$2 extends o$4{constructor(Tt,Mt){super(Mt),this.intersectionPoint=Tt}equals(Tt){return Tt instanceof i$2&&n$4(this.intersectionPoint,Tt.intersectionPoint)}}class s$1 extends t$2{constructor(Tt,Mt,Pt,Ft,Dt){super(Tt,Mt,new L$2(Tt,Mt,Pt.constraint,Ft.constraint),Dt),this.first=Pt,this.second=Ft}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new i$2(this.targetPoint,this.elevationInfo)]}}let _$1=class extends n$2K.EventedMixin(d$1O){constructor(_t){super(_t),this.options=new l$d,this.snappingEnginesFactory=i$3,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}initialize(){this.handles.add([l$2e(()=>{const{effectiveFeatureEnabled:_t,effectiveSelfEnabled:Tt,touchSensitivityMultiplier:Mt,distance:Pt}=this.options;return{effectiveFeatureEnabled:_t,effectiveSelfEnabled:Tt,touchSensitivityMultiplier:Mt,distance:Pt}},()=>{this.doneSnapping(),this.emit("changed")},U$r),l$2e(()=>this.options,_t=>{for(const Tt of this._engines)Tt.options=_t},U$r),l$2e(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:_t,snappingEnginesFactory:Tt})=>this._recreateEngines(_t,Tt),w$X)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(_t=>_t.updating)}_recreateEngines(_t,Tt){if(this._destroyEngines(),!_t)return;const{view:Mt,options:Pt}=this;this._engines=Tt(Mt,Pt)}_destroyEngines(){for(const _t of this._engines)_t.destroy();this._engines=[]}get squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get squaredTouchProximityThreshold(){const{distance:_t,touchSensitivityMultiplier:Tt}=this.options,Mt=_t*Tt;return Mt*Mt}async snap(_t,Tt,Mt){const Pt=Tt.coordinateHelper.pointToVector(_t),Ft=await this._fetchCandidates(Pt,Tt,Mt);return{get valid(){return!p$3C(Mt)},apply:()=>{const{snappedPoint:Dt,hints:Nt}=this._processCandidates(Pt,Ft,Tt);return this._removeVisualization(),r$1P(Tt.visualizer)&&this.handles.add(Tt.visualizer.draw(Nt,{coordinateHelper:Tt.coordinateHelper,elevationInfo:Tt.elevationInfo,view:this.view}),m$1),Dt}}}update(_t,Tt){this._removeVisualization();let Mt=_t;const Pt=[];if(r$1P(this._currentMainCandidate)){const Ft=Tt.coordinateHelper,Dt=Ft.pointToVector(_t),Nt=this._currentMainCandidate.constraint.closestTo(Dt);if(E$2(R(Dt,Ft,Tt.elevationInfo,this.view),R(Nt,Ft,Tt.elevationInfo,this.view))<this._squaredPointProximityThreshold(Tt.pointer)){Mt=Ft.vectorToDehydratedPoint(Nt),this._currentMainCandidate.targetPoint=Nt,Pt.push(...this._currentMainCandidate.hints);for(const Vt of this._currentOtherActiveCandidates)Vt.targetPoint=Nt,Pt.push(...Vt.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}return r$1P(Tt.visualizer)&&this.handles.add(Tt.visualizer.draw(Pt,{coordinateHelper:Tt.coordinateHelper,elevationInfo:Tt.elevationInfo,view:this.view}),m$1),Mt}doneSnapping(){this._removeVisualization(),this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}_removeVisualization(){this.handles.remove(m$1)}async _fetchCandidates(_t,Tt,Mt){return(await Promise.all(this._engines.map(Pt=>Pt.fetchCandidates(_t,Tt,Mt)))).flat()}_processCandidates(_t,Tt,Mt){if(Tt.length<1)return this.doneSnapping(),{snappedPoint:Mt.coordinateHelper.vectorToDehydratedPoint(_t),hints:[]};r$2(_t,Tt);const Pt=this._currentMainCandidate;if(r$1P(Pt)){const Ft=this._findOldConstraintInNewCandidates(Pt,Tt);if(Ft>=0){if(!(Tt[Ft]instanceof s$1))return this._intersectWithOtherCandidates(Ft,Tt,_t,Mt);if(b$j(_t,Pt.targetPoint)<this._squaredPointProximityThreshold(Mt.pointer))return this._updateSnappingCandidate(Pt,Tt,Mt)}}return this._intersectWithOtherCandidates(0,Tt,_t,Mt)}_findOldConstraintInNewCandidates(_t,Tt){return _t instanceof s$1?this._findOldCandidateIndex(Tt,_t.first)>=0&&this._findOldCandidateIndex(Tt,_t.second)>=0?0:-1:this._findOldCandidateIndex(Tt,_t)}_intersectWithOtherCandidates(_t,Tt,Mt,Pt){const Ft=Tt[_t],Dt=[],Nt=Pt.coordinateHelper;for(let Vt=0;Vt<Tt.length;++Vt){if(Vt===_t)continue;const zt=Tt[Vt];for(const Xt of Ft.constraint.intersect(zt.constraint)){const Ht=Nt.fromXYZ(Xt.intersection,Ft.targetPoint[2]);Dt.push([new s$1(Nt,Ht,Ft,zt,zt.elevationInfo),E$2(R(Mt,Pt.coordinateHelper,Pt.elevationInfo,this.view),R(Ht,Pt.coordinateHelper,Pt.elevationInfo,this.view))])}}return Dt.length>0&&(Dt.sort((Vt,zt)=>Vt[1]-zt[1]),Dt[0][1]<this._squaredPointProximityThreshold(Pt.pointer))?this._updateSnappingCandidate(Dt[0][0],Tt,Pt):this._updateSnappingCandidate(Ft,Tt,Pt)}_updateSnappingCandidate(_t,Tt,Mt){this.doneSnapping(),this._currentMainCandidate=_t;const Pt=this._currentMainCandidate.targetPoint,Ft=[];Ft.push(..._t.hints);for(const Dt of Tt){if(_t instanceof s$1){if(Dt.constraint.objectEqual(_t.first.constraint)||Dt.constraint.objectEqual(_t.second.constraint))continue}else if(Dt.constraint.objectEqual(_t.constraint))continue;Dt.constraint.check(Pt)&&(Dt.targetPoint=Pt,this._currentOtherActiveCandidates.push(Dt),Ft.push(...Dt.hints))}return{snappedPoint:Mt.coordinateHelper.vectorToDehydratedPoint(Pt),hints:Ft}}_squaredPointProximityThreshold(_t){return _t==="touch"?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold}_findOldCandidateIndex(_t,Tt){let Mt=-1;for(let Pt=0;Pt<_t.length;++Pt)if(Tt.constraint.objectEqual(_t[Pt].constraint)){Mt=Pt;break}return Mt}get test(){return{visualizationsActive:this.handles.has(m$1),engines:this._engines}}};e$2a([d$25({constructOnly:!0})],_$1.prototype,"view",void 0),e$2a([d$25()],_$1.prototype,"options",void 0),e$2a([d$25({readOnly:!0})],_$1.prototype,"updating",null),e$2a([d$25()],_$1.prototype,"snappingEnginesFactory",void 0),e$2a([d$25()],_$1.prototype,"_engines",void 0),e$2a([d$25()],_$1.prototype,"squaredMouseProximityTreshold",null),e$2a([d$25()],_$1.prototype,"squaredTouchProximityThreshold",null),_$1=e$2a([n$2L("esri.views.interactive.snapping.SnappingManager")],_$1);const m$1="visualization-handle";let p$3=class extends n$2K.EventedAccessor{constructor(_t){super(_t),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(_t){this.history.redo=[],this.history.undo.push(_t)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent.reset()}refreshComponent(){const _t=this.activeComponent;_t&&(_t.type!=="box"&&_t.type!=="reshape"&&_t.type!=="graphic-mover"||_t.refresh())}set undo(_t){this._set("undo",()=>{this.canUndo()&&_t()})}set redo(_t){this._set("redo",()=>{this.canRedo()&&_t()})}};e$2a([d$25()],p$3.prototype,"activeComponent",void 0),e$2a([d$25()],p$3.prototype,"cancelled",void 0),e$2a([d$25()],p$3.prototype,"history",void 0),e$2a([d$25()],p$3.prototype,"tool",null),e$2a([d$25()],p$3.prototype,"type",void 0),e$2a([d$25()],p$3.prototype,"canUndo",null),e$2a([d$25()],p$3.prototype,"canRedo",null),e$2a([d$25()],p$3.prototype,"onEnd",void 0),e$2a([d$25()],p$3.prototype,"undo",null),e$2a([d$25()],p$3.prototype,"redo",null),e$2a([d$25()],p$3.prototype,"toggleTool",void 0),e$2a([d$25()],p$3.prototype,"addToSelection",void 0),e$2a([d$25()],p$3.prototype,"removeFromSelection",void 0),p$3=e$2a([n$2L("esri.widgets.Sketch.support.OperationHandle")],p$3);let n$2=class extends p$3{};e$2a([d$25()],n$2.prototype,"activeComponent",void 0),n$2=e$2a([n$2L("esri.widgets.Sketch.support.CreateOperationHandle")],n$2);let i$1=class extends p$3{constructor(_t){super(_t)}};e$2a([d$25()],i$1.prototype,"activeComponent",void 0),i$1=e$2a([n$2L("esri.widgets.Sketch.support.UpdateOperationHandle")],i$1);const J="esri.widgets.Sketch.SketchViewModel",Q=s$2l.getLogger(J),X={defaultZ:0},ee={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};let te=class extends n$2K.EventedAccessor{constructor(_t){super(_t),this._numUpdating=0,this._handles=new u$1P,this._internalGraphicsLayer=new h$f({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandles=new u$1P,this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.labelOptions=new c$i,this.layer=null,this.pointSymbol=new y$1g({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new S$A({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new m$1F({color:[130,130,130,1],width:2}),this._snappingManager=null,this.tooltipOptions=new r$f,this.updateGraphics=new j$11,this.updateOnGraphicClick=!0,this.updatePointSymbol=new y$1g({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),this.updatePolygonSymbol=new S$A({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),this.updatePolylineSymbol=new m$1F({color:[12,207,255],width:2}),this.vertexSymbol=new y$1g({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalAutoOpenEnabled=null,this.defaultCreateOptions=X,this.defaultUpdateOptions=ee,this.snappingOptions=new l$d}initialize(){this._handles.add([a$2C(()=>{var _t,Tt;return(Tt=(_t=this.view)==null?void 0:_t.map)==null?void 0:Tt.layers},"change",_t=>{_t.removed.includes(this.layer)&&this.cancel()}),a$2C(()=>{var _t;return(_t=this.layer)==null?void 0:_t.graphics},"change",_t=>{if(r$1P(this._operationHandle))for(const Tt of _t.removed)this.updateGraphics.includes(Tt)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(Tt):this._operationHandle.cancel())}),l$2e(()=>{var _t,Tt;return(Tt=(_t=this.layer)==null?void 0:_t.elevationInfo)!=null?Tt:null},_t=>{_t!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=_t)},w$X),l$2e(()=>this.view,_t=>{l$2H(this._snappingManager),_t&&(this._snappingManager=new _$1({view:_t,options:this.snappingOptions}),_t.type==="2d"?__vitePreload(()=>import("./editingTools.a16164e3.js"),["assets/editingTools.a16164e3.js","assets/SnappingVisualizer2D.b2856ee5.js","assets/enums.05a6ea95.js","assets/settings.3262aa4d.js","assets/SnappingContext.6035d506.js","assets/PointSnappingHint.735dac09.js","assets/plane.1ed71234.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/quatf64.b60d4974.js","assets/mat4f64.84d5c445.js","assets/drawSurfaces.7da3d09c.js","assets/geometryEngine.938806be.js","assets/geometryEngineBase.cf4f989f.js","assets/hydrated.54675f53.js","assets/quat.122fba57.js","assets/drawUtils.b3864c8e.js","assets/earcut.d30cbec0.js","assets/triangle.4a12653d.js","assets/lineSegment.42c0099b.js","assets/dehydratedFeatures.5573332f.js"]):_t.type==="3d"&&(__vitePreload(()=>import("./editingTools.ee3d759a.js").then(Tt=>Tt.e),["assets/editingTools.ee3d759a.js","assets/drawSurfaces.7da3d09c.js","assets/geometryEngine.938806be.js","assets/geometryEngineBase.cf4f989f.js","assets/hydrated.54675f53.js","assets/quat.122fba57.js","assets/quatf64.b60d4974.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.6035d506.js","assets/PointSnappingHint.735dac09.js","assets/plane.1ed71234.js","assets/drawUtils.b3864c8e.js","assets/earcut.d30cbec0.js","assets/triangle.4a12653d.js","assets/lineSegment.42c0099b.js","assets/dehydratedFeatures.5573332f.js","assets/vec4f32.8f10672a.js","assets/Octree.74aeccc1.js","assets/Util.221caaac.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.b5350ce1.js","assets/BufferView.43fc091d.js","assets/types.25c129c5.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.9e24b035.js","assets/Texture.7634927e.js","assets/requestImageUtils.16628477.js","assets/geometryDataUtils.8151b70d.js","assets/VertexArrayObject.b7add78f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.b0f0cd6a.js","assets/floatRGBA.5328f61e.js","assets/triangulationUtils.b0bb3487.js","assets/deduplicate.ee0b1de6.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.d7d86859.js","assets/GraphicManipulator.6d798ed3.js","assets/axisAngleDegrees.b0e51c69.js","assets/persistable.eb01740e.js","assets/multiOriginJSONSupportUtils.8128aa52.js"]),__vitePreload(()=>import("./GraphicsLayerView3D.078c0931.js").then(Tt=>Tt.G),["assets/GraphicsLayerView3D.078c0931.js","assets/NativeLineMaterial.b0f0cd6a.js","assets/vec3f32.0772c8d8.js","assets/plane.1ed71234.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/quatf64.b60d4974.js","assets/mat4f64.84d5c445.js","assets/requestImageUtils.16628477.js","assets/enums.de935fa5.js","assets/Matrix4Uniform.9e24b035.js","assets/Texture.7634927e.js","assets/Util.221caaac.js","assets/geometryDataUtils.8151b70d.js","assets/triangle.4a12653d.js","assets/lineSegment.42c0099b.js","assets/VertexAttribute.5551e0d8.js","assets/VertexArrayObject.b7add78f.js","assets/VertexElementDescriptor.d386088d.js","assets/BufferView.43fc091d.js","assets/quat.122fba57.js","assets/InterleavedLayout.b5350ce1.js","assets/types.25c129c5.js","assets/floatRGBA.5328f61e.js","assets/triangulationUtils.b0bb3487.js","assets/earcut.d30cbec0.js","assets/deduplicate.ee0b1de6.js","assets/NestedMap.21c7ee53.js","assets/Octree.74aeccc1.js","assets/boundedPlane.d7d86859.js","assets/glUtil.345a77b1.js","assets/dehydratedFeatures.5573332f.js","assets/rendererConversion.add823be.js","assets/optimizedFeatureQueryEngineAdapter.5c61cb3b.js","assets/centroid.296f6ecc.js","assets/vec33.731df183.js","assets/objectResourceUtils.b3411138.js","assets/devEnvironmentUtils.8c6e6b72.js","assets/DefaultMaterial_COLOR_GAMMA.f2d62e22.js","assets/Version.bed92932.js","assets/callExpressionWithFeature.30f2ad17.js","assets/MeshComponent.41167dc3.js","assets/projection.ba478cd6.js","assets/PooledRBush.88201bbf.js","assets/geometryServiceUtils.654a7e26.js","assets/LayerView.5d769fe2.js"])))},w$X),l$2e(()=>{var _t;return(_t=this.view)==null?void 0:_t.spatialReference},(_t,Tt)=>{_t&&Tt&&!_t.equals(Tt)&&this.cancel()})])}destroy(){this.cancel(),this._handles=l$2H(this._handles),this._viewHandles=l$2H(this._viewHandles),this._removeDefaultLayer(),this._snappingManager=l$2H(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){return this.view.type==="3d"?"move":"transform"}get updating(){return this._numUpdating>0}get activeTool(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}get activeComponent(){return this._operationHandle?this._operationHandle.activeComponent:null}get createGraphic(){return!r$1P(this.activeComponent)||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}set defaultCreateOptions(_t){this._set("defaultCreateOptions",{...X,..._t})}set defaultUpdateOptions(_t){this._set("defaultUpdateOptions",{...ee,..._t,reshapeOptions:{...ee.reshapeOptions,..._t==null?void 0:_t.reshapeOptions}})}set snappingOptions(_t){r$1P(this._snappingManager)&&(this._snappingManager.options=_t),this._set("snappingOptions",_t)}get state(){var Mt;const _t=!(!((Mt=this.view)!=null&&Mt.ready)||!this.layer),Tt=this._operationHandle;return _t&&Tt?"active":_t?"ready":"disabled"}get view(){return this._get("view")}set view(_t){const Tt=this._get("view");if(Tt){const{container:Pt,map:Ft}=Tt;Pt&&(Tt.cursor=null),Ft&&Ft.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}const Mt="view-ready";this._handles.remove(Mt),_t&&this._handles.add(f$1p(()=>_t.ready,Pt=>{this._viewHandles.removeAll(),Pt&&this._viewHandles.add(this._generateViewHandles(_t))},w$X),Mt),this._set("view",_t)}cancel(){this._moduleLoaderAbortController=h$1R(this._moduleLoaderAbortController),this._viewReadyAbortController=h$1R(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:_t,updateGraphics:Tt}=this;if(_t==="active"&&Tt.length){const{activeTool:Mt,layer:Pt}=this,Ft=Tt.toArray();Pt.removeMany(Ft),this.cancel(),this._emitDeleteEvent({graphics:Ft,tool:Mt})}}async create(_t,Tt){if(this.cancel(),await this._waitViewReady(),this.state==="disabled")throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),m$2b();if(r$1P(this.view.activeTool)&&(this.view.activeTool=null),!_t)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");e$b(this.view,this._internalGraphicsLayer);const Mt=await this._setupCreateOperation(_t,Tt);if(t$2e(Mt)||this.destroyed)return void this.view.map.remove(this._internalGraphicsLayer);const Pt=()=>{if(Mt===this._operationHandle){const Ft=this.createGraphic,Dt=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),Mt.cancelled||Ft==null||this.layer.add(Ft),this.emit("create",{graphic:Ft,state:Dt?"cancel":"complete",tool:_t,toolEventInfo:null,type:"create"})}};Mt.on("complete",Pt),this._operationHandle=Mt,this.view.ready&&w$g(this.view)&&this.view.focus()}async update(_t,Tt){this.cancel(),await this._waitViewReady();const{layer:Mt,view:Pt,state:Ft}=this;if(Ft==="disabled")throw Pt||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),Mt||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),m$2b();r$1P(this.view.activeTool)&&(this.view.activeTool=null);const Dt=Array.isArray(_t)?_t:[_t];if(_t==null||!Dt||!Dt.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(Dt.some(Vt=>Vt.layer!==Mt?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):!!t$2e(Vt.geometry)&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const Nt=await this._setupUpdateOperation(Dt,Tt);this.destroyed||t$2e(Nt)||ne(Nt)||(e$b(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(Nt,Tt),this.emit("update",{graphics:Dt,state:"start",aborted:!1,tool:Nt.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(_t){this._beginAsyncOperation(),_t=Array.isArray(_t)?_t:[_t];for(const Tt of _t)r$1P(Tt.geometry)&&Tt.geometry.type!=="mesh"&&!E$G(Tt.geometry.spatialReference,this.view.spatialReference)&&(An(Tt.geometry.spatialReference,this.view.spatialReference)||en()||await tn(),Tt.geometry=rn(Tt.geometry,this.view.spatialReference));this._endAsyncOperation()}undo(){this.canUndo()&&this._operationHandle.undo()}redo(){this.canRedo()&&this._operationHandle.redo()}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(_t){const Tt=this.view;if(Tt.type==="2d"){const Ft=[];this.view.map.allLayers.forEach(Nt=>{Nt.type!=="vector-tile"&&Nt.type!=="imagery"||Ft.push(Nt)});const Dt=await this.view.hitTest(_t,{exclude:Ft});return s$a(Dt.results)}const Mt=[this.view.map.ground];Tt.map.allLayers.forEach(Ft=>{Ft.type==="integrated-mesh"&&Mt.push(Ft)});const Pt=await Tt.hitTest(_t,{exclude:Mt});if(Pt.results.length>0){const Ft=Pt.results[0];if(r$1P(Ft)&&Ft.type==="graphic"&&Ft.graphic&&(!Pt.ground.mapPoint||Tt.map.ground.opacity<1||Pt.ground.distance-c$3r(Ft.distance,0)>-Math.min(3*Pt.ground.distance,Tt.viewingMode==="global"?p$2q(Tt.renderCoordsHelper.spatialReference).radius/Tt.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return Ft}return null}_generateViewHandles(_t){return[_t.on("immediate-click",async Tt=>{const Mt=this.state==="active"&&this._operationHandle.type==="create";if(this.state==="disabled"||Mt||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const Pt=await Tt.async(()=>this._getFirstHit(n$T(Tt)));let Ft=null;if(r$1P(Pt)){const Dt=Pt.graphic;this.updateGraphics.includes(Dt)||Dt.layer===this.layer?(Tt.stopPropagation(),Ft=Dt):_t.type!=="2d"||this._isComponentGraphic(Dt)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();r$1P(Ft)&&!this.updateGraphics.includes(Ft)&&await this.update([Ft],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},g$o.WIDGET)]}async _setupCreateOperation(_t,Tt){const Mt={hasZ:this.view.type==="3d",...this.defaultCreateOptions,...Tt},Pt=await this._setupDrawGraphicTool(_t,this.view,Mt);return t$2e(Pt)?null:(this.view.tools.add(Pt),this.view.activeTool=Pt,this._setupCreateOperationHandle(Pt))}async _setupDrawGraphicTool(_t,Tt,Mt){if(_t==="multipoint"&&Tt.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;const Pt=_t!=="rectangle",Ft=_t!=="rectangle";this.snappingOptions.enabledToggled=!1;const Dt={view:Tt,mode:_t==="rectangle"||_t==="circle"?"hybrid":"click",...Mt,snapToScene:!1,geometryType:_t,graphicSymbol:this._getGraphicSymbolFromTool(_t),snappingManager:this._snappingManager,forceUniformSize:Ft,centered:Pt};return this.view.type==="2d"?this._makeDrawGraphicTool2D(Dt):this._makeDrawGraphicTool3D(Dt)}async _makeDrawGraphicTool2D(_t){const Tt=await this._requireModule(__vitePreload(()=>import("./editingTools.a16164e3.js"),["assets/editingTools.a16164e3.js","assets/SnappingVisualizer2D.b2856ee5.js","assets/enums.05a6ea95.js","assets/settings.3262aa4d.js","assets/SnappingContext.6035d506.js","assets/PointSnappingHint.735dac09.js","assets/plane.1ed71234.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/quatf64.b60d4974.js","assets/mat4f64.84d5c445.js","assets/drawSurfaces.7da3d09c.js","assets/geometryEngine.938806be.js","assets/geometryEngineBase.cf4f989f.js","assets/hydrated.54675f53.js","assets/quat.122fba57.js","assets/drawUtils.b3864c8e.js","assets/earcut.d30cbec0.js","assets/triangle.4a12653d.js","assets/lineSegment.42c0099b.js","assets/dehydratedFeatures.5573332f.js"]));return ne(Tt)||this.destroyed?null:new Tt.module.DrawGraphicTool2D({..._t,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:oe(_t.geometryType)?this.activeFillSymbol:null})}async _makeDrawGraphicTool3D(_t){const Tt=await this._requireModule(__vitePreload(()=>import("./editingTools.ee3d759a.js").then(Pt=>Pt.e),["assets/editingTools.ee3d759a.js","assets/drawSurfaces.7da3d09c.js","assets/geometryEngine.938806be.js","assets/geometryEngineBase.cf4f989f.js","assets/hydrated.54675f53.js","assets/quat.122fba57.js","assets/quatf64.b60d4974.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.6035d506.js","assets/PointSnappingHint.735dac09.js","assets/plane.1ed71234.js","assets/drawUtils.b3864c8e.js","assets/earcut.d30cbec0.js","assets/triangle.4a12653d.js","assets/lineSegment.42c0099b.js","assets/dehydratedFeatures.5573332f.js","assets/vec4f32.8f10672a.js","assets/Octree.74aeccc1.js","assets/Util.221caaac.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.b5350ce1.js","assets/BufferView.43fc091d.js","assets/types.25c129c5.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.9e24b035.js","assets/Texture.7634927e.js","assets/requestImageUtils.16628477.js","assets/geometryDataUtils.8151b70d.js","assets/VertexArrayObject.b7add78f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.b0f0cd6a.js","assets/floatRGBA.5328f61e.js","assets/triangulationUtils.b0bb3487.js","assets/deduplicate.ee0b1de6.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.d7d86859.js","assets/GraphicManipulator.6d798ed3.js","assets/axisAngleDegrees.b0e51c69.js","assets/persistable.eb01740e.js","assets/multiOriginJSONSupportUtils.8128aa52.js"]));if(ne(Tt)||this.destroyed)return null;const{elevationInfo:Mt}=this.layer;return new Tt.module.DrawGraphicTool3D({..._t,elevationInfo:Mt,snapToScene:!r$1P(Mt)||Mt.mode==="absolute-height",labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})}_setupCreateOperationHandle(_t){let Tt=null;const Mt=_t.forceUniformSize,Pt=_t.centered,Ft=[this.view.on("key-down",Nt=>{if(Nt.key===e$a.pan)Nt.stopPropagation(),Nt.repeat||(_t.enabled=!1);else if(Nt.key===e$a.complete)Nt.stopPropagation(),_t.completeCreateOperation();else if(Nt.key!==e$a.vertexAdd||Nt.repeat)Nt.key===e$a.undo?(Nt.stopPropagation(),Dt.undo()):Nt.key===e$a.redo?(Nt.stopPropagation(),Dt.redo()):Nt.key!==e$a.snappingToggle||_t.geometryType==="rectangle"||_t.geometryType==="circle"||Nt.repeat?Nt.key!==e$a.constraint||_t.geometryType!=="rectangle"&&_t.geometryType!=="circle"||Nt.repeat?Nt.key===e$a.center&&(Nt.repeat||(_t.centered=!Pt,Nt.stopPropagation())):(_t.forceUniformSize=!Mt,Nt.stopPropagation()):(this.snappingOptions.enabledToggled=!0,Nt.stopPropagation());else{const Vt=_t.drawOperation.geometryType;Vt!=="polyline"&&Vt!=="polygon"&&Vt!=="multipoint"||(Nt.stopPropagation(),_t.drawOperation.commitStagedVertex())}},g$o.WIDGET),this.view.on("key-up",Nt=>{Nt.key===e$a.pan?_t.enabled=!0:Nt.key===e$a.snappingToggle&&_t.geometryType!=="rectangle"&&_t.geometryType!=="circle"?(this.snappingOptions.enabledToggled=!1,Nt.stopPropagation()):Nt.key!==e$a.constraint||_t.geometryType!=="rectangle"&&_t.geometryType!=="circle"?Nt.key===e$a.center&&(_t.centered=Pt,Nt.stopPropagation()):(_t.forceUniformSize=Mt,Nt.stopPropagation())},g$o.WIDGET),_t.on("vertex-add",Nt=>{switch(Tt=t$2e(Tt)?"start":"active",Nt.operation){case"apply":this.emit("create",{graphic:_t.graphic,state:Tt,tool:this.activeTool,toolEventInfo:Nt,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[_t.graphic],tool:_t.geometryType});break;case"redo":this._emitRedoEvent({graphics:[_t.graphic],tool:_t.geometryType})}}),_t.on("cursor-update",Nt=>{_t.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:_t.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:Nt.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),_t.on("vertex-remove",Nt=>{switch(Nt.operation){case"apply":this.emit("create",{graphic:_t.graphic,state:"active",tool:this.activeTool,toolEventInfo:Nt,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[_t.graphic],tool:_t.geometryType});break;case"redo":this._emitRedoEvent({graphics:[_t.graphic],tool:_t.geometryType})}}),_t.on("complete",Nt=>{this._set("createGraphic",Nt.graphic),Tt="complete",Nt.aborted?Dt&&Dt.cancel():Dt&&Dt.complete()}),l$2e(()=>this._getGraphicSymbolFromTool(_t.geometryType),Nt=>{_t.graphicSymbol=Nt})],Dt=new p$3({activeComponent:_t,tool:_t.geometryType,type:"create",onEnd:()=>{var Nt;Ft.forEach(Vt=>Vt.remove()),Ft.length=0,(Nt=this.view.tools)==null||Nt.remove(_t)},undo:()=>{_t.canUndo&&_t.undo()},redo:()=>{_t.canRedo&&_t.redo()},canUndo:()=>_t.canUndo,canRedo:()=>_t.canRedo});return Dt}_getGraphicSymbolFromTool(_t){switch(_t){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;default:return null}}async _setupUpdateOperation(_t,Tt){const{layer:Mt,view:Pt}=this,Ft={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...Tt,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...Tt==null?void 0:Tt.reshapeOptions}};let Dt=Ft.tool;for(const Nt of _t)Mt.remove(Nt),Mt.add(Nt);if(Pt.type==="3d"){if(_t.length===0)return null;switch(Dt){case"move":return this._setupMove3DOperation(_t,Ft,Pt,Dt);case"reshape":{if(_t.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const Nt=l$a(_t[0]);return Nt===P$2.SUPPORTED?this._setupReshape3DOperation(_t[0],Ft,Pt):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${E$6(Nt)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(_t,Ft,Pt)}}switch(Dt){case"move":return this._setupMove2DOperation(_t,Ft,Pt);case"reshape":{if(_t.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const Nt=l$a(_t[0]);return Nt===P$2.SUPPORTED?this._setupTransformOrReshape2DOperation(_t,Dt,Ft,Pt):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${E$6(Nt)}).`),null)}case"transform":if(_t.length===1){const Nt=m$2g(_t[0].geometry,"type");Nt!=="point"&&Nt!=="multipoint"||(Dt="reshape")}return this._setupTransformOrReshape2DOperation(_t,Dt,Ft,Pt)}}async _setupMove3DOperation(_t,Tt,Mt,Pt,Ft=!1){for(const Xt of _t){const Ht=i$a(Xt);if(Ht!==P$2.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${E$6(Ht)}).`),null}const Dt=await this._requireModule(__vitePreload(()=>import("./editingTools.ee3d759a.js").then(Xt=>Xt.e),["assets/editingTools.ee3d759a.js","assets/drawSurfaces.7da3d09c.js","assets/geometryEngine.938806be.js","assets/geometryEngineBase.cf4f989f.js","assets/hydrated.54675f53.js","assets/quat.122fba57.js","assets/quatf64.b60d4974.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.6035d506.js","assets/PointSnappingHint.735dac09.js","assets/plane.1ed71234.js","assets/drawUtils.b3864c8e.js","assets/earcut.d30cbec0.js","assets/triangle.4a12653d.js","assets/lineSegment.42c0099b.js","assets/dehydratedFeatures.5573332f.js","assets/vec4f32.8f10672a.js","assets/Octree.74aeccc1.js","assets/Util.221caaac.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.b5350ce1.js","assets/BufferView.43fc091d.js","assets/types.25c129c5.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.9e24b035.js","assets/Texture.7634927e.js","assets/requestImageUtils.16628477.js","assets/geometryDataUtils.8151b70d.js","assets/VertexArrayObject.b7add78f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.b0f0cd6a.js","assets/floatRGBA.5328f61e.js","assets/triangulationUtils.b0bb3487.js","assets/deduplicate.ee0b1de6.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.d7d86859.js","assets/GraphicManipulator.6d798ed3.js","assets/axisAngleDegrees.b0e51c69.js","assets/persistable.eb01740e.js","assets/multiOriginJSONSupportUtils.8128aa52.js"]));if(ne(Dt))return Dt;const Nt=new Dt.module.GraphicMoveTool({view:Mt,enableZ:Tt.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(Nt),Nt.graphics.addMany(_t),Ft||this.updateGraphics.addMany(_t);const Vt=[],zt=new i$1({activeComponent:Nt,tool:Pt,type:"update",onEnd:()=>{var Xt;Vt.forEach(Ht=>Ht.remove()),Vt.length=0,(Xt=this.view.tools)==null||Xt.remove(Nt),Nt.destroyed||Nt.destroy()},undo:()=>{ie(zt,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:Pt})},redo:()=>{ae(zt,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:Pt})},addToSelection:Xt=>{this.updateGraphics.push(Xt),Nt.graphics.push(Xt),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Xt],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:Xt=>{const Ht=this.updateGraphics.indexOf(Xt);zt.history.undo.forEach(Wt=>Wt.updates.splice(Ht,1)),zt.history.redo.forEach(Wt=>Wt.updates.splice(Ht,1)),this.updateGraphics.remove(Xt),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Xt],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?Nt.graphics.remove(Xt):zt.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||Tt.toggleToolOnClick===!1||Pt!=="transform")return;const Xt=this.updateGraphics.getItemAt(0);if(l$a(Xt)!==P$2.SUPPORTED)return;const Ht=await this._setupReshape3DOperation(Xt,Tt,Mt,!0);ne(Ht)||(zt.onEnd(),zt.destroy(),this._setUpdateOperationHandle(Ht,Tt))}});return Vt.push(...this._getHandlesForComponent(zt,Tt),this.view.on("immediate-click",Xt=>this._getCommonUpdateOperationClickHandlers(zt,Xt,Tt),g$o.WIDGET),Mt.on("key-down",Xt=>{this._getCommonUpdateOperationKeyDownHandlers(zt,Xt),Xt.key===e$a.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Xt.stopPropagation())},g$o.WIDGET),Mt.on("key-up",Xt=>{Xt.key===e$a.snappingToggle&&(this.snappingOptions.enabledToggled=!1,Xt.stopPropagation())},g$o.WIDGET)),zt}_setupGraphicTransform3DOperation(_t,Tt,Mt,Pt=!1){if(_t.length===1&&i$9(_t[0])===P$2.SUPPORTED){const Ft=_t[0],Dt=Ft.geometry;if(r$1P(Dt)&&(Dt.type==="point"||Dt.type==="mesh"))return this._setupPointTransform3DOperation(Ft,Tt,Mt);if(r$1P(Dt)&&(Dt.type==="polygon"||Dt.type==="polyline"))return this._setupPolyTransform3DOperation(Ft,Tt,Mt,Pt)}return this._setupMove3DOperation(_t,Tt,Mt,"transform",Pt)}async _setupPointTransform3DOperation(_t,Tt,Mt){const Pt="transform",{enableRotation:Ft,enableScaling:Dt,enableZ:Nt}=Tt,Vt=await this._requireModule(__vitePreload(()=>import("./editingTools.ee3d759a.js").then(Wt=>Wt.e),["assets/editingTools.ee3d759a.js","assets/drawSurfaces.7da3d09c.js","assets/geometryEngine.938806be.js","assets/geometryEngineBase.cf4f989f.js","assets/hydrated.54675f53.js","assets/quat.122fba57.js","assets/quatf64.b60d4974.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.6035d506.js","assets/PointSnappingHint.735dac09.js","assets/plane.1ed71234.js","assets/drawUtils.b3864c8e.js","assets/earcut.d30cbec0.js","assets/triangle.4a12653d.js","assets/lineSegment.42c0099b.js","assets/dehydratedFeatures.5573332f.js","assets/vec4f32.8f10672a.js","assets/Octree.74aeccc1.js","assets/Util.221caaac.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.b5350ce1.js","assets/BufferView.43fc091d.js","assets/types.25c129c5.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.9e24b035.js","assets/Texture.7634927e.js","assets/requestImageUtils.16628477.js","assets/geometryDataUtils.8151b70d.js","assets/VertexArrayObject.b7add78f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.b0f0cd6a.js","assets/floatRGBA.5328f61e.js","assets/triangulationUtils.b0bb3487.js","assets/deduplicate.ee0b1de6.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.d7d86859.js","assets/GraphicManipulator.6d798ed3.js","assets/axisAngleDegrees.b0e51c69.js","assets/persistable.eb01740e.js","assets/multiOriginJSONSupportUtils.8128aa52.js"]));if(ne(Vt))return Vt;const zt=new Vt.module.GraphicTransformTool({graphic:_t,view:Mt,enableRotation:Ft,enableScaling:Dt,enableZ:Nt,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});this.view.tools.add(zt),this.updateGraphics.add(_t);const Xt=[],Ht=new i$1({activeComponent:zt,tool:Pt,type:"update",onEnd:()=>{var Wt;Xt.forEach(Qt=>Qt.remove()),Xt.length=0,(Wt=this.view.tools)==null||Wt.remove(zt),zt.destroyed||zt.destroy()},undo:()=>{ie(Ht,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:Pt})},redo:()=>{ae(Ht,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:Pt})},addToSelection:async Wt=>{this.updateGraphics.add(Wt),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Wt],removed:[],type:"selection-change"},type:"update"});const Qt=await this._setupMove3DOperation(this.updateGraphics.toArray(),Tt,Mt,"transform",!0);ne(Qt)||(Ht.onEnd(),Ht.destroy(),this._setUpdateOperationHandle(Qt,Tt))},removeFromSelection:Wt=>{this.updateGraphics.remove(Wt),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Wt],type:"selection-change"},type:"update"}),Ht.complete()},toggleTool:()=>{}});return Xt.push(...this._getHandlesForComponent(Ht,Tt),this.view.on("immediate-click",Wt=>this._getCommonUpdateOperationClickHandlers(Ht,Wt,Tt),g$o.WIDGET),Mt.on("key-down",Wt=>{this._getCommonUpdateOperationKeyDownHandlers(Ht,Wt),Wt.key===e$a.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Wt.stopPropagation())},g$o.WIDGET),Mt.on("key-up",Wt=>{Wt.key===e$a.snappingToggle&&(this.snappingOptions.enabledToggled=!1,Wt.stopPropagation())},g$o.WIDGET)),Ht}async _setupPolyTransform3DOperation(_t,Tt,Mt,Pt=!1){const Ft="transform",{enableRotation:Dt,enableScaling:Nt,enableZ:Vt,preserveAspectRatio:zt}=Tt,Xt=await this._requireModule(__vitePreload(()=>import("./editingTools.ee3d759a.js").then(Zt=>Zt.e),["assets/editingTools.ee3d759a.js","assets/drawSurfaces.7da3d09c.js","assets/geometryEngine.938806be.js","assets/geometryEngineBase.cf4f989f.js","assets/hydrated.54675f53.js","assets/quat.122fba57.js","assets/quatf64.b60d4974.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.6035d506.js","assets/PointSnappingHint.735dac09.js","assets/plane.1ed71234.js","assets/drawUtils.b3864c8e.js","assets/earcut.d30cbec0.js","assets/triangle.4a12653d.js","assets/lineSegment.42c0099b.js","assets/dehydratedFeatures.5573332f.js","assets/vec4f32.8f10672a.js","assets/Octree.74aeccc1.js","assets/Util.221caaac.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.b5350ce1.js","assets/BufferView.43fc091d.js","assets/types.25c129c5.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.9e24b035.js","assets/Texture.7634927e.js","assets/requestImageUtils.16628477.js","assets/geometryDataUtils.8151b70d.js","assets/VertexArrayObject.b7add78f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.b0f0cd6a.js","assets/floatRGBA.5328f61e.js","assets/triangulationUtils.b0bb3487.js","assets/deduplicate.ee0b1de6.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.d7d86859.js","assets/GraphicManipulator.6d798ed3.js","assets/axisAngleDegrees.b0e51c69.js","assets/persistable.eb01740e.js","assets/multiOriginJSONSupportUtils.8128aa52.js"]));if(ne(Xt))return Xt;const Ht=new Xt.module.ExtentTransformTool({graphic:_t,view:Mt,enableRotation:Dt,enableScaling:Nt,enableZ:Vt,preserveAspectRatio:zt,tooltipOptions:this.tooltipOptions});this.view.tools.add(Ht),Pt||this.updateGraphics.add(_t);const Wt=[],Qt=new i$1({activeComponent:Ht,tool:Ft,type:"update",onEnd:()=>{var Zt;Wt.forEach(Kt=>Kt.remove()),Wt.length=0,(Zt=this.view.tools)==null||Zt.remove(Ht),Ht.destroyed||Ht.destroy()},canUndo:()=>Ht.canUndo,undo:()=>{Ht.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:Ft})},canRedo:()=>Ht.canRedo,redo:()=>{Ht.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:Ft})},addToSelection:async Zt=>{this.updateGraphics.add(Zt),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Zt],removed:[],type:"selection-change"},type:"update"});const Kt=await this._setupMove3DOperation(this.updateGraphics.toArray(),Tt,Mt,"transform",!0);ne(Kt)||(Qt.onEnd(),Qt.destroy(),this._setUpdateOperationHandle(Kt,Tt))},removeFromSelection:Zt=>{this.updateGraphics.remove(Zt),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Zt],type:"selection-change"},type:"update"}),Qt.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||Tt.toggleToolOnClick===!1)return;const Zt=this.updateGraphics.getItemAt(0);if(l$a(Zt)!==P$2.SUPPORTED)return;const Kt=await this._setupReshape3DOperation(Zt,Tt,Mt,!0);ne(Kt)||(Qt.onEnd(),Qt.destroy(),this._setUpdateOperationHandle(Kt,Tt))}});return Wt.push(...this._getHandlesForComponent(Qt,Tt),this.view.on("immediate-click",Zt=>this._getCommonUpdateOperationClickHandlers(Qt,Zt,Tt),g$o.WIDGET),this.view.on("key-down",Zt=>this._getCommonUpdateOperationKeyDownHandlers(Qt,Zt),g$o.WIDGET),this.view.on("key-down",Zt=>{Zt.key!==e$a.constraint||Zt.repeat||(Ht.preserveAspectRatio=!Ht.preserveAspectRatio,Zt.stopPropagation())},g$o.WIDGET),this.view.on("key-up",Zt=>{Zt.key===e$a.constraint&&(Ht.preserveAspectRatio=!Ht.preserveAspectRatio,Zt.stopPropagation())},g$o.WIDGET)),Qt}async _setupMove2DOperation(_t,Tt,Mt){const Pt="move";this.updateGraphics.addMany(_t),await this._updateSpatialReference(_t);const Ft=await this._getGraphicMover(_t,Tt,Mt);if(ne(Ft))return Ft;const Dt=new i$1({activeComponent:Ft,tool:Pt,type:"update",onEnd:()=>{var Xt;this._displayDefaultCursor(),zt.forEach(Ht=>Ht.remove()),Vt.forEach(Ht=>Ht.remove()),zt=[],Vt=[],Ft.destroy(),(Xt=this._internalGraphicsLayer)==null||Xt.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const Xt=this.updateGraphics.toArray();ie(Dt,Xt),Dt.refreshComponent(),this._emitUndoEvent({graphics:Xt,tool:Pt})},redo:()=>{const Xt=this.updateGraphics.toArray();ae(Dt,Xt),Dt.refreshComponent(),this._emitRedoEvent({graphics:Xt,tool:Pt})},addToSelection:async Xt=>{await this._updateSpatialReference(Xt),this.updateGraphics.push(Xt),Ft.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Xt],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:Xt=>{const Ht=this.updateGraphics.indexOf(Xt);Dt.history.undo.forEach(Qt=>Qt.updates.splice(Ht,1)),Dt.history.redo.forEach(Qt=>Qt.updates.splice(Ht,1)),this.updateGraphics.remove(Xt);const Wt=this.updateGraphics.toArray();this.emit("update",{graphics:Wt,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Xt],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?Ft.graphics=Wt:Dt.complete()}});let Nt=!1,Vt=[Mt.on("immediate-click",Xt=>this._getCommonUpdateOperationClickHandlers(Dt,Xt,Tt),g$o.WIDGET),Mt.on("key-down",Xt=>{this._getCommonUpdateOperationKeyDownHandlers(Dt,Xt),Xt.key!==e$a.constraint||Xt.repeat||(Nt=!0,Ft.enableMoveAllGraphics=!Ft.enableMoveAllGraphics)},g$o.WIDGET),Mt.on("key-up",Xt=>{Xt.key===e$a.constraint&&Nt&&(Nt=!1,Ft.enableMoveAllGraphics=!Ft.enableMoveAllGraphics)},g$o.WIDGET)],zt=this._getHandlesForComponent(Dt,Tt);return Dt}async _setupReshape3DOperation(_t,Tt,Mt,Pt=!1){const Ft="reshape",Dt=await this._requireModule(__vitePreload(()=>import("./editingTools.ee3d759a.js").then(Xt=>Xt.e),["assets/editingTools.ee3d759a.js","assets/drawSurfaces.7da3d09c.js","assets/geometryEngine.938806be.js","assets/geometryEngineBase.cf4f989f.js","assets/hydrated.54675f53.js","assets/quat.122fba57.js","assets/quatf64.b60d4974.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/mat4f64.84d5c445.js","assets/SnappingContext.6035d506.js","assets/PointSnappingHint.735dac09.js","assets/plane.1ed71234.js","assets/drawUtils.b3864c8e.js","assets/earcut.d30cbec0.js","assets/triangle.4a12653d.js","assets/lineSegment.42c0099b.js","assets/dehydratedFeatures.5573332f.js","assets/vec4f32.8f10672a.js","assets/Octree.74aeccc1.js","assets/Util.221caaac.js","assets/glUtil.345a77b1.js","assets/enums.de935fa5.js","assets/VertexElementDescriptor.d386088d.js","assets/InterleavedLayout.b5350ce1.js","assets/BufferView.43fc091d.js","assets/types.25c129c5.js","assets/VertexAttribute.5551e0d8.js","assets/Matrix4Uniform.9e24b035.js","assets/Texture.7634927e.js","assets/requestImageUtils.16628477.js","assets/geometryDataUtils.8151b70d.js","assets/VertexArrayObject.b7add78f.js","assets/vec3f32.0772c8d8.js","assets/NativeLineMaterial.b0f0cd6a.js","assets/floatRGBA.5328f61e.js","assets/triangulationUtils.b0bb3487.js","assets/deduplicate.ee0b1de6.js","assets/NestedMap.21c7ee53.js","assets/boundedPlane.d7d86859.js","assets/GraphicManipulator.6d798ed3.js","assets/axisAngleDegrees.b0e51c69.js","assets/persistable.eb01740e.js","assets/multiOriginJSONSupportUtils.8128aa52.js"]));if(ne(Dt))return Dt;this.snappingOptions.enabledToggled=!1;const Nt=new Dt.module.GraphicReshapeTool({view:Mt,graphic:_t,enableZVertex:Tt.enableZ&&Tt.reshapeOptions.vertexOperation==="move",enableZShape:Tt.enableZ&&Tt.reshapeOptions.shapeOperation==="move",enableMoveGraphic:Tt.reshapeOptions.shapeOperation==="move"||Tt.reshapeOptions.shapeOperation==="move-xy",enableMidpoints:Tt.reshapeOptions.edgeOperation==="split",enableEdgeOffset:Tt.reshapeOptions.edgeOperation==="offset",snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});Mt.tools.add(Nt),Pt||this.updateGraphics.add(_t);const Vt=[],zt=new i$1({activeComponent:Nt,tool:Ft,type:"update",onEnd:()=>{var Xt;Vt.forEach(Ht=>Ht.remove()),Vt.length=0,(Xt=this.view.tools)==null||Xt.remove(Nt),Nt.destroyed||Nt.destroy()},canUndo:()=>Nt.canUndo,undo:()=>{Nt.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:Ft})},canRedo:()=>Nt.canRedo,redo:()=>{Nt.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:Ft})},addToSelection:async Xt=>{this.updateGraphics.add(Xt),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Xt],removed:[],type:"selection-change"},type:"update"});const Ht=await this._setupMove3DOperation(this.updateGraphics.toArray(),Tt,Mt,"transform",!0);ne(Ht)||(zt.onEnd(),zt.destroy(),this._setUpdateOperationHandle(Ht,Tt))},removeFromSelection:Xt=>{this.updateGraphics.remove(Xt),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Xt],type:"selection-change"},type:"update"}),zt.complete()},toggleTool:async()=>{if(Tt.toggleToolOnClick===!1)return;const Xt=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),Tt,Mt,!0);ne(Xt)||(zt.onEnd(),zt.destroy(),this._setUpdateOperationHandle(Xt,Tt))}});return Vt.push(...this._getHandlesForComponent(zt,Tt),Mt.on("immediate-click",Xt=>this._getCommonUpdateOperationClickHandlers(zt,Xt,Tt),g$o.WIDGET),Mt.on("key-down",Xt=>{this._getCommonUpdateOperationKeyDownHandlers(zt,Xt),Xt.key===e$a.snappingToggle&&(this.snappingOptions.enabledToggled=!0,Xt.stopPropagation())},g$o.WIDGET),Mt.on("key-up",Xt=>{Xt.key===e$a.snappingToggle&&(this.snappingOptions.enabledToggled=!1,Xt.stopPropagation())},g$o.WIDGET)),zt}async _setupTransformOrReshape2DOperation(_t,Tt,Mt,Pt){this.updateGraphics.addMany(_t),await this._updateSpatialReference(_t);const Ft=Tt==="transform"?await this._getBox(_t,Mt,Pt):await this._getReshape(_t,Mt,Pt);if(ne(Ft))return Ft;const Dt=new i$1({activeComponent:Ft,type:"update",onEnd:()=>{Vt.forEach(zt=>zt.remove()),Nt.forEach(zt=>zt.remove()),Vt=[],Nt=[],Dt.activeComponent&&!Dt.activeComponent.destroyed&&Dt.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{ie(Dt,this.updateGraphics.toArray()),Dt.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:Dt.tool})},redo:()=>{ae(Dt,this.updateGraphics.toArray()),Dt.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:Dt.tool})},addToSelection:async zt=>{let Xt=Dt.activeComponent;if(Xt.type==="reshape"){const Ht=[...this.updateGraphics,zt];this.updateGraphics.removeAll();const Wt=await this._setupMove2DOperation(Ht,Mt,Pt);if(ne(Wt))return;Dt.onEnd(),Dt.destroy(),this._setUpdateOperationHandle(Wt,Mt)}else this.updateGraphics.add(zt),Xt.graphics=this.updateGraphics.toArray(),Xt.refresh(),Dt.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[zt],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async zt=>{const Xt=this.updateGraphics.indexOf(zt);Dt.history.undo.forEach(Wt=>Wt.updates.splice(Xt,1)),Dt.history.redo.forEach(Wt=>Wt.updates.splice(Xt,1)),this.updateGraphics.remove(zt);const Ht=this.updateGraphics.toArray();if(Ht.length===0)Dt.complete();else{const Wt=Ht[0].geometry;Ht.length!==1||!r$1P(Wt)||Wt.type!=="point"&&Wt.type!=="multipoint"?Dt.activeComponent.graphics=Ht:Dt.toggleTool()}this.emit("update",{graphics:Ht,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[zt],type:"selection-change"},type:"update"})},toggleTool:async()=>{if(this.updateGraphics.length>1)return;const zt=this.updateGraphics.getItemAt(0),Xt=zt.geometry;if(r$1P(Xt)&&(Dt.tool==="reshape"&&(Xt.type==="point"||Xt.type==="multipoint")||Dt.tool==="transform"&&Xt.type==="extent"))return;let Ht=null;Dt.tool==="transform"?Ht=await this._getReshape([zt],Mt,Pt):Dt.tool==="reshape"&&(Ht=await this._getBox([zt],Mt,Pt)),ne(Ht)||(Dt.activeComponent.destroy(),Dt.activeComponent=Ht,Dt.activeComponent&&(Vt.forEach(Wt=>Wt.remove()),Vt=this._getHandlesForComponent(Dt,Mt)))}});let Nt=[Pt.on("immediate-click",zt=>this._getCommonUpdateOperationClickHandlers(Dt,zt,Mt),g$o.WIDGET),Pt.on("key-down",zt=>{if(this._getCommonUpdateOperationKeyDownHandlers(Dt,zt),zt.key!==e$a.snappingToggle||zt.repeat||(this.snappingOptions.enabledToggled=!0,zt.stopPropagation()),zt.key===e$a.constraint&&!zt.repeat&&Dt){const Xt=Dt.activeComponent;Xt&&Xt.type==="box"&&(Xt.preserveAspectRatio=!Xt.preserveAspectRatio)}},g$o.WIDGET),Pt.on("key-up",zt=>{var Xt;if(zt.key===e$a.snappingToggle&&((Xt=Dt==null?void 0:Dt.activeComponent)==null?void 0:Xt.type)==="reshape"&&(this.snappingOptions.enabledToggled=!1,zt.stopPropagation()),zt.key===e$a.constraint&&Dt){const Ht=Dt.activeComponent;Ht&&Ht.type==="box"&&(Ht.preserveAspectRatio=!Ht.preserveAspectRatio)}},g$o.WIDGET)],Vt=this._getHandlesForComponent(Dt,Mt);return Dt}async _getGraphicMover(_t,Tt,Mt){const{enableMoveAllGraphics:Pt}=Tt,Ft=await this._requireModule(__vitePreload(()=>import("./GraphicMover.ca3f7013.js").then(Dt=>Dt.G),["assets/GraphicMover.ca3f7013.js","assets/drawUtils.b3864c8e.js","assets/GraphicManipulator.6d798ed3.js"]));return ne(Ft)?Ft:new Ft.module.default({enableMoveAllGraphics:Pt,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:_t,view:Mt,callbacks:{onGraphicMoveStart:({dx:Dt,dy:Nt,graphic:Vt})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Dt,dy:Nt,mover:Vt,type:"move-start"},type:"update"})},onGraphicMove:({dx:Dt,dy:Nt,graphic:Vt})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Dt,dy:Nt,mover:Vt,type:"move"},type:"update"}),onGraphicMoveStop:({dx:Dt,dy:Nt,graphic:Vt})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Dt,dy:Nt,mover:Vt,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(_t,Tt,Mt){const{enableRotation:Pt,enableScaling:Ft,preserveAspectRatio:Dt}=Tt,Nt=await this._requireModule(__vitePreload(()=>import("./Box.ba79ad9f.js"),["assets/Box.ba79ad9f.js","assets/drawUtils.b3864c8e.js","assets/GraphicMover.ca3f7013.js","assets/GraphicManipulator.6d798ed3.js","assets/settings.3262aa4d.js"]));return ne(Nt)?Nt:new Nt.module.default({graphics:_t,enableRotation:Pt,enableScaling:Ft,preserveAspectRatio:Dt,layer:this._internalGraphicsLayer,view:Mt,callbacks:{onMoveStart:Vt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Vt},type:"update"}),onMove:Vt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Vt},type:"update"}),onMoveStop:Vt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Vt},type:"update"}),onScaleStart:Vt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Vt},type:"update"}),onScale:Vt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Vt},type:"update"}),onScaleStop:Vt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Vt},type:"update"}),onRotateStart:Vt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Vt},type:"update"}),onRotate:Vt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Vt},type:"update"}),onRotateStop:Vt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...Vt},type:"update"})}})}async _getReshape(_t,Tt,Mt){var Nt,Vt;const Pt=((Nt=Tt.reshapeOptions)==null?void 0:Nt.edgeOperation)==="split",Ft=((Vt=Tt.reshapeOptions)==null?void 0:Vt.shapeOperation)==="move",Dt=await this._requireModule(__vitePreload(()=>import("./Reshape.63a7c621.js"),["assets/Reshape.63a7c621.js","assets/SnappingVisualizer2D.b2856ee5.js","assets/enums.05a6ea95.js","assets/settings.3262aa4d.js","assets/SnappingContext.6035d506.js","assets/PointSnappingHint.735dac09.js","assets/plane.1ed71234.js","assets/sphere.fe54e1ae.js","assets/vectorStacks.a7af424f.js","assets/quatf64.b60d4974.js","assets/mat4f64.84d5c445.js","assets/drawUtils.b3864c8e.js","assets/GraphicMover.ca3f7013.js","assets/GraphicManipulator.6d798ed3.js"]));return ne(Dt)?Dt:new Dt.module.default({enableMidpoints:Pt,enableMovement:Ft,graphic:_t[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:Mt,callbacks:{onReshapeStart:zt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...zt},type:"update"}),onReshape:zt=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...zt},type:"update"}),onReshapeStop:({mover:zt,type:Xt})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:zt,type:Xt},type:"update"}),onMoveStart:({dx:zt,dy:Xt,mover:Ht,type:Wt})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:zt,dy:Xt,mover:Ht,type:Wt},type:"update"}),onMove:({dx:zt,dy:Xt,mover:Ht,type:Wt})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:zt,dy:Xt,mover:Ht,type:Wt},type:"update"}),onMoveStop:({dx:zt,dy:Xt,mover:Ht,type:Wt})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:zt,dy:Xt,mover:Ht,type:Wt},type:"update"}),onVertexAdd:({added:zt,type:Xt,vertices:Ht})=>{const Wt=zt.map(Qt=>t$1I(Qt.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:Wt,vertices:Ht,type:Xt},type:"update"})},onVertexRemove:({removed:zt,type:Xt,vertices:Ht})=>{const Wt=zt.map(Qt=>t$1I(Qt.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:Wt,vertices:Ht,type:Xt},type:"update"})}}})}_getHandlesForComponent(_t,Tt){const Mt=_t.activeComponent;switch(Mt.type){case"graphic-mover":return[Mt.on("graphic-click",({graphic:Pt,viewEvent:Ft})=>{var Dt;(Dt=Ft.native)!=null&&Dt.shiftKey&&(Ft.stopPropagation(),_t.removeFromSelection(Pt))}),Mt.on("graphic-move-start",Pt=>_t.addToHistory(se(Pt.allGraphics)))];case"box":return[Mt.on("graphic-click",Pt=>this._onTransformOrReshape2DGraphicClick(_t,Tt,Pt)),Mt.on("move-start",Pt=>_t.addToHistory(se(Pt.graphics))),Mt.on("rotate-start",Pt=>_t.addToHistory(se(Pt.graphics))),Mt.on("scale-start",Pt=>_t.addToHistory(se(Pt.graphics)))];case"reshape":return[Mt.on("graphic-click",Pt=>this._onTransformOrReshape2DGraphicClick(_t,Tt,Pt)),Mt.on("move-start",Pt=>_t.addToHistory(se([Pt.mover]))),Mt.on("reshape-start",Pt=>_t.addToHistory(se([Pt.graphic]))),Mt.on("vertex-add",Pt=>_t.addToHistory(se([Pt.oldGraphic]))),Mt.on("vertex-remove",Pt=>_t.addToHistory(se([Pt.oldGraphic])))];case"move-3d":return[Mt.on("graphic-move-start",Pt=>{_t.addToHistory(se(Pt.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:Pt.allGraphics.length>0?Pt.allGraphics[0]:null,type:"move-start"},type:"update"})}),Mt.on("graphic-move",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:Pt.dx,dy:Pt.dy,mover:Pt.allGraphics.length>0?Pt.allGraphics[0]:null,type:"move"},type:"update"})}),Mt.on("graphic-move-stop",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:Pt.allGraphics.length>0?Pt.allGraphics[0]:null,type:"move-stop"},type:"update"})}),Mt.on("immediate-click",Pt=>{Pt.shiftKey?this._toggleSelection([Pt.graphic],_t,Tt):_t.toggleTool()})];case"transform-3d":return[Mt.on("record-undo",({record:Pt})=>{_t.addToHistory({updates:[Pt]})}),Mt.on("graphic-translate-start",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Pt.graphic,dx:Pt.dxScreen,dy:Pt.dyScreen,type:"move-start"},type:"update"})}),Mt.on("graphic-translate-stop",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Pt.graphic,dx:Pt.dxScreen,dy:Pt.dyScreen,type:"move-stop"},type:"update"})}),Mt.on("graphic-rotate-start",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Pt.graphic,angle:Pt.angle,type:"rotate-start"},type:"update"})}),Mt.on("graphic-rotate-stop",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Pt.graphic,angle:Pt.angle,type:"rotate-stop"},type:"update"})}),Mt.on("graphic-scale-start",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Pt.graphic,xScale:Pt.xScale,yScale:Pt.yScale,type:"scale-start"},type:"update"})}),Mt.on("graphic-scale-stop",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Pt.graphic,xScale:Pt.xScale,yScale:Pt.yScale,type:"scale-stop"},type:"update"})}),Mt.on("graphic-translate",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Pt.graphic,dx:Pt.dxScreen,dy:Pt.dyScreen,type:"move"},type:"update"})}),Mt.on("graphic-rotate",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Pt.graphic,angle:Pt.angle,type:"rotate"},type:"update"})}),Mt.on("graphic-scale",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:Pt.graphic,xScale:Pt.xScale,yScale:Pt.yScale,type:"scale"},type:"update"})}),Mt.on("immediate-click",Pt=>{Pt.shiftKey?this._toggleSelection([Pt.graphic],_t,Tt):_t.toggleTool()})];case"reshape-3d":return[Mt.on("reshape",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:Pt,type:"update"})}),Mt.on("move",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:Pt,type:"update"})}),Mt.on("vertex-add",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:Pt,type:"update"})}),Mt.on("vertex-remove",Pt=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:Pt,type:"update"})}),Mt.on("immediate-click",Pt=>{Pt.shiftKey?this._toggleSelection([Pt.graphic],_t,Tt):_t.toggleTool()})];default:return}}_onTransformOrReshape2DGraphicClick(_t,Tt,Mt){var Dt;const{graphic:Pt,viewEvent:Ft}=Mt;return((Dt=Ft.native)==null?void 0:Dt.shiftKey)&&Pt.layer===this.layer?(Ft.stopPropagation(),_t.removeFromSelection(Pt)):Tt.toggleToolOnClick?(Ft.stopPropagation(),_t.toggleTool()):void 0}_setUpdateOperationHandle(_t,Tt){this._operationHandle=_t;const Mt=this.view.map;this._disablePopup(Tt);const Pt=()=>{if(_t===this._operationHandle){const Ft=this.updateGraphics.toArray(),Dt=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),Mt&&Mt.remove(this._internalGraphicsLayer),this._restorePopup(Tt),this.emit("update",{graphics:Ft,state:"complete",aborted:_t.cancelled,tool:Dt,toolEventInfo:null,type:"update"})}};_t.on("complete",Pt)}async _getCommonUpdateOperationClickHandlers(_t,Tt,Mt){const Pt=n$T(Tt),Ft=await Tt.async(()=>this._getFirstHit(Pt));if(t$2e(Ft))return void _t.complete();if(Tt.native.shiftKey&&this._toggleSelection([Ft.graphic],_t,Mt))return void Tt.stopPropagation();this.updateGraphics.includes(Ft.graphic)?Tt.stopPropagation():_t.complete()}_toggleSelection(_t,Tt,Mt){const Pt=!!Mt.multipleSelectionEnabled;return _t.some(Ft=>Ft!=null&&!(!Pt||Ft.layer!==this.layer)&&(this.updateGraphics.includes(Ft)?Tt.removeFromSelection(Ft):Tt.addToSelection(Ft),!0))}_getCommonUpdateOperationKeyDownHandlers(_t,Tt){if(!_t)return;const Mt=Tt.key;Mt===e$a.undo&&_t.canUndo()?(Tt.stopPropagation(),_t.undo()):Mt===e$a.redo&&_t.canRedo()?(Tt.stopPropagation(),_t.redo()):Mt===e$a.cancel?(Tt.stopPropagation(),_t.cancel()):this.allowDeleteKey&&e$a.delete.includes(Mt)&&this._onDeleteKey(Tt)}_onDeleteKey(_t){if(!this._operationHandle||this._operationHandle.type!=="update")return;const Tt=this.activeComponent,Mt=this.updateGraphics.toArray();t$2e(Tt)||Tt.type==="reshape-3d"||(Tt.type!=="reshape"||Mt.length===1&&m$2g(Mt[0].geometry,"type")==="point")&&(_t.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=l$2H(this._internalGraphicsLayer))}_isComponentGraphic(_t){const{activeComponent:Tt}=this;return!(!_t||t$2e(Tt))&&(_t.attributes&&_t.attributes.esriSketchTool||Tt.type==="draw-2d"&&Tt.graphic===_t||(Tt.type==="box"||Tt.type==="reshape")&&Tt.isUIGraphic(_t))}_displayPointerCursor(){this.view&&this.view.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view&&this.view.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(_t,Tt,Mt){Q.error(new s$2i(_t,Tt,Mt))}async _requireModule(_t){const Tt=new AbortController;this._moduleLoaderAbortController=Tt;const Mt=await _t;return this._moduleLoaderAbortController!==Tt||Tt.signal.aborted?{requireError:"aborted"}:{module:Mt}}_emitUndoEvent(_t){this.emit("undo",{..._t,type:"undo"})}_emitRedoEvent(_t){this.emit("redo",{..._t,type:"redo"})}_emitDeleteEvent(_t){this.emit("delete",{..._t,type:"delete"})}get test(){return{operationHandle:this._operationHandle,defaultUpdateOptions:ee}}wait(){return j$U(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(_t){var Tt;return((Tt=this.view)==null?void 0:Tt.type)!=="3d"||this.updateOnGraphicClick||r$1P(_t)&&_t.toggleToolOnClick}_disablePopup(_t){if(!this._disablePopupEnabled(_t))return;const Tt=this.view.popup;Tt&&t$2e(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=Tt.autoOpenEnabled,Tt.autoOpenEnabled=!1)}_restorePopup(_t){if(!this._disablePopupEnabled(_t))return;const Tt=this.view.popup;Tt&&r$1P(this._originalAutoOpenEnabled)&&(Tt.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}async _waitViewReady(){const _t=this.view;_t&&(h$1R(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await y$1M(j$U(()=>_t==null?void 0:_t.ready),this._viewReadyAbortController.signal))}};function oe(_t){return _t==="polygon"||_t==="rectangle"||_t==="circle"}function ie(_t,Tt){re("undo",_t.history.undo,_t.history.redo,Tt)}function ae(_t,Tt){re("redo",_t.history.redo,_t.history.undo,Tt)}function re(_t,Tt,Mt,Pt){const Ft=Tt.pop().updates,Dt=[];Pt.forEach((Nt,Vt)=>{const zt=Ft[Vt];zt!=null&&("geometry"in zt&&r$1P(zt.geometry)&&(Dt.push({geometry:Nt.geometry}),Nt.geometry=zt.geometry),"symbol"in zt&&r$1P(zt.symbol)&&(Dt.push({symbol:Nt.symbol}),Nt.symbol=zt.symbol),"undo"in zt&&(Dt.push(zt),zt[_t](Nt)))}),Mt.push({updates:Dt})}function se(_t){return{updates:_t.map(Tt=>({geometry:Tt.geometry}))}}function ne(_t){return"requireError"in _t&&_t.requireError==="aborted"}e$2a([d$25()],te.prototype,"updating",null),e$2a([d$25()],te.prototype,"_operationHandle",void 0),e$2a([d$25({readOnly:!0})],te.prototype,"activeTool",null),e$2a([d$25()],te.prototype,"activeFillSymbol",void 0),e$2a([d$25()],te.prototype,"activeLineSymbol",void 0),e$2a([d$25()],te.prototype,"activeVertexSymbol",void 0),e$2a([d$25()],te.prototype,"allowDeleteKey",void 0),e$2a([d$25({readOnly:!0})],te.prototype,"createGraphic",null),e$2a([d$25()],te.prototype,"defaultCreateOptions",null),e$2a([d$25()],te.prototype,"defaultUpdateOptions",null),e$2a([d$25({type:c$i,nonNullable:!0})],te.prototype,"labelOptions",void 0),e$2a([d$25()],te.prototype,"layer",void 0),e$2a([d$25({types:j$L})],te.prototype,"pointSymbol",void 0),e$2a([d$25({types:j$L})],te.prototype,"polygonSymbol",void 0),e$2a([d$25({types:j$L})],te.prototype,"polylineSymbol",void 0),e$2a([d$25({type:l$d,nonNullable:!0})],te.prototype,"snappingOptions",null),e$2a([d$25()],te.prototype,"_snappingManager",void 0),e$2a([d$25({readOnly:!0})],te.prototype,"state",null),e$2a([d$25({type:r$f,nonNullable:!0})],te.prototype,"tooltipOptions",void 0),e$2a([d$25({readOnly:!0})],te.prototype,"updateGraphics",void 0),e$2a([d$25()],te.prototype,"updateOnGraphicClick",void 0),e$2a([d$25({types:j$L})],te.prototype,"updatePointSymbol",void 0),e$2a([d$25({types:j$L})],te.prototype,"updatePolygonSymbol",void 0),e$2a([d$25({types:j$L})],te.prototype,"updatePolylineSymbol",void 0),e$2a([d$25({types:j$L})],te.prototype,"vertexSymbol",void 0),e$2a([d$25({value:null})],te.prototype,"view",null),te=e$2a([n$2L(J)],te);const pe=te,M="esri.widgets.Editor.EditorViewModel",O$2=s$2l.getLogger(M),V$2=["create","create-features","update"];function A(_t,Tt,Mt){O$2.error(new s$2i(_t,Tt,Mt))}function U$1(_t,Tt){return _t&&_t.find(Mt=>Mt.layer===Tt)}let E=class extends a$2B(n$2K.EventedAccessor){constructor(_t){super(_t),this._sketchGraphicsLayer=new h$f({listMode:"hide",internal:!0}),this.activeWorkflow=null,this.activityQueue=[],this.failures=[],this.attachmentsViewModel=new g$R({abilities:{editing:!0}}),this.featureFormViewModel=new M$a,this.featureTemplatesViewModel=new d$c,this.labelOptions=new c$i,this.layerInfos=null,this.sketchViewModel=new pe({layer:this._sketchGraphicsLayer}),this.snappingOptions=new l$d,this.spinnerViewModel=new c$11,this.tooltipOptions=new r$f}initialize(){this.handles.add([a$2C(()=>this.activeWorkflow,"cancel",()=>this.emit("workflow-cancel")),a$2C(()=>this.activeWorkflow,"commit",()=>this.emit("workflow-commit")),f$1p(()=>{var _t;return(_t=this.view)==null?void 0:_t.map},_t=>{_t.add(this._sketchGraphicsLayer)},h$1w),l$2e(()=>this.editableItems.toArray(),()=>{const{activeWorkflow:_t}=this;if(this.refreshCreationTemplates(),!_t)return;const{stepId:Tt}=_t;_t.type!=="create"?_t.type==="update"&&(Tt==="awaiting-feature-to-update"&&!this.canUpdate||Tt==="awaiting-update-feature-candidate"&&!_t.data.candidates.some(Mt=>{const Pt=this.editableItems.find(Ft=>Ft.layer===Mt.layer);return Pt&&Pt.supports.includes("update")}))&&this._cancelWorkflow():Tt!=="awaiting-feature-creation-info"||this.canCreate||this._cancelWorkflow()})])}destroy(){this._cancelWorkflow().then(()=>{var _t;(_t=this.view)!=null&&_t.map&&this.view.map.remove(this._sketchGraphicsLayer),this.view=null})}get allowedWorkflows(){return this._get("allowedWorkflows")}set allowedWorkflows(_t){_t&&_t.length!==0||(_t=[...V$2]),this._set("allowedWorkflows",_t)}get canCreate(){return this.editableItems.some(_t=>_t.supports.includes("create"))}get canUpdate(){return this.editableItems.some(_t=>_t.supports.includes("update"))}get editableItems(){var Mt,Pt,Ft;const _t=(Mt=this.view)==null?void 0:Mt.allLayerViews;if(!_t)return new j$11;const Tt=new Set((Ft=(Pt=this.view)==null?void 0:Pt.map)==null?void 0:Ft.editableLayers);return _t.filter(Dt=>Tt.has(Dt.layer)).map(Dt=>{const{layer:Nt,suspended:Vt}=Dt,{data:zt,operations:Xt}=Nt.capabilities,Ht=U$1(this.layerInfos,Nt),Wt="supportsAttachment"in zt&&zt.supportsAttachment&&(!Ht||Ht.allowAttachments!==!1);if(Vt)return{hasAttachments:Wt,layer:Nt,supports:[]};const Qt=[];return Xt.supportsAdd&&(this.allowedWorkflows.includes("create")||this.allowedWorkflows.includes("create-features"))&&(!Ht||Ht.enabled!==!1&&Ht.addEnabled!==!1)&&Qt.push("create"),Xt.supportsUpdate&&this.allowedWorkflows.includes("update")&&(!Ht||Ht.enabled!==!1&&Ht.updateEnabled!==!1)&&Qt.push("update"),(Ht&&Ht.deleteEnabled)!==!1&&Xt.supportsDelete&&Qt.push("delete"),{hasAttachments:Wt,layer:Nt,supports:Qt}}).reverse()}get state(){if(!this.get("view.ready")||this.editableItems.length===0)return"disabled";const _t=this.attachmentsViewModel.mode;if(_t==="add")return"adding-attachment";if(_t==="edit")return"editing-attachment";const{activeWorkflow:Tt}=this;return Tt?Tt.stepId:"ready"}get syncing(){return this.activityQueue.length>0}set view(_t){this.sketchViewModel.view=_t,this.spinnerViewModel.view=_t,this._set("view",_t)}async startCreateWorkflowAtFeatureTypeSelection(){if(t$c(O$2,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection"),!this.canCreate)return void A("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const _t=this._createCreateWorkflow();await _t.start(),this._set("activeWorkflow",_t)}async startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.startCreateFeaturesWorkflow()}async startCreateWorkflowAtFeatureCreation(_t){if(t$c(O$2,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation"),!this.canCreate)return void A("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const Tt=this._createCreateWorkflow("awaiting-feature-to-create");Tt.data.creationInfo=_t,await Tt.start(),this._set("activeWorkflow",Tt)}async startCreateFeaturesWorkflowAtFeatureCreation(_t){return this.startCreateFeaturesWorkflow(_t,"creating-features")}async startCreateFeaturesWorkflow(_t,Tt="awaiting-feature-creation-info"){if(!this.canCreate)throw new s$2i("editing:unsupported-workflow","Creating features is unsupported or disabled.");await this._cancelWorkflow();const Mt=this._createCreateFeaturesWorkflow(_t,Tt);await Mt.start(),this._set("activeWorkflow",Mt)}async startCreateWorkflowAtFeatureEdit(_t){if(t$c(O$2,"startCreateWorkflowAtFeatureEdit"),!this.canCreate)return void A("editing:unsupported-workflow","Create workflow is unsupported or disabled.");await this._cancelWorkflow();const Tt=this._createCreateWorkflow("editing-new-feature");Tt.data.edits.feature=_t,await Tt.start(),this._set("activeWorkflow",Tt)}async startUpdateWorkflowAtFeatureSelection(){if(!this.canUpdate)return void A("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const _t=this._createUpdateWorkflow();await _t.start(),this._set("activeWorkflow",_t)}async startUpdateWorkflowAtMultipleFeatureSelection(_t){if(!this.canUpdate)return void A("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const Tt=this._createUpdateWorkflow("awaiting-update-feature-candidate");Tt.data.candidates=_t,await Tt.start(),this._set("activeWorkflow",Tt)}async startUpdateWorkflowAtFeatureEdit(_t){if(!this.canUpdate)return void A("editing:unsupported-workflow","Update workflow is unsupported or disabled.");await this._cancelWorkflow();const Tt=this._createUpdateWorkflow("editing-existing-feature");Tt.data.edits.feature=_t,await Tt.start(),this._set("activeWorkflow",Tt)}async deleteFeatureFromWorkflow(){const{activeWorkflow:_t}=this;_t&&_t.type==="update"?(await this._delete(_t.data.edits.feature),await _t.reset()):A("editing:unsupported-workflow","Deleting requires an active update workflow.")}async cancelWorkflow(_t){return this._cancelWorkflow({warn:!0,..._t})}refreshCreationTemplates(){const _t=[];for(const{layer:Tt,supports:Mt}of this.editableItems)Tt.loaded&&Mt.includes("create")&&_t.push(Tt);this.featureTemplatesViewModel.layers=_t}async _cancelWorkflow(_t){const Tt=this.activeWorkflow;if(!Tt)return void(_t&&_t.warn&&A("editing:no-active-workflow","There is no active workflow to cancel."));if(!_t||_t.force!==!1)return this.emit("workflow-cancel"),this._set("activeWorkflow",null),void await Tt.cancel(_t);await Tt.cancel(_t),this._set("activeWorkflow",null)}_createCreateFeaturesWorkflow(_t,Tt){return A$4.create(this,_t,Tt,(Mt,Pt)=>this._applyEdits(Mt,Pt))}_createCreateWorkflow(_t){return v$b.create(this,_t,(Tt,Mt)=>this._applyEdits(Tt,Mt))}_createUpdateWorkflow(_t){return V$5.create(this,_t,(Tt,Mt)=>this._applyEdits(Tt,Mt))}async _delete(_t){const Tt=_t.sourceLayer;"applyEdits"in Tt&&await this._applyEdits(Tt,{deleteFeatures:[_t]})}async _applyEdits(_t,Tt){await this._queueOperation(async()=>{const Mt=await this.view.whenLayerView(_t),Pt=await _t.applyEdits(Tt);return await j$U(()=>!Mt.updating),Pt})}_queueOperation(_t){this.activityQueue.push(_t),this.notifyChange("syncing");const Tt=(Mt,Pt)=>{const Ft=Pt.indexOf(Mt);Ft>-1&&Pt.splice(Ft,1)};return _t().then(({addFeatureResults:Mt,deleteFeatureResults:Pt,updateFeatureResults:Ft})=>{const Dt=Mt.find(Nt=>!!Nt.error)||Ft.find(Nt=>!!Nt.error)||Pt.find(Nt=>!!Nt.error);if(Dt)throw Dt.error}).catch(Mt=>{A("editing:operation-error","An error occurred.",{error:Mt});const Pt={error:Mt,retry:()=>(Tt(Pt,this.failures),this._queueOperation(_t)),cancel:()=>{Tt(Pt,this.failures)}};this._set("failures",[...this.failures,Pt])}).then(()=>{Tt(_t,this.activityQueue),this.notifyChange("syncing")})}};e$2a([d$25({readOnly:!0})],E.prototype,"activeWorkflow",void 0),e$2a([d$25({readOnly:!0})],E.prototype,"activityQueue",void 0),e$2a([d$25({value:[...V$2]})],E.prototype,"allowedWorkflows",null),e$2a([d$25({readOnly:!0})],E.prototype,"canCreate",null),e$2a([d$25({readOnly:!0})],E.prototype,"canUpdate",null),e$2a([d$25({readOnly:!0})],E.prototype,"editableItems",null),e$2a([d$25({readOnly:!0})],E.prototype,"failures",void 0),e$2a([d$25()],E.prototype,"attachmentsViewModel",void 0),e$2a([d$25()],E.prototype,"featureFormViewModel",void 0),e$2a([d$25()],E.prototype,"featureTemplatesViewModel",void 0),e$2a([o$1d("sketchViewModel.labelOptions")],E.prototype,"labelOptions",void 0),e$2a([d$25()],E.prototype,"layerInfos",void 0),e$2a([d$25()],E.prototype,"sketchViewModel",void 0),e$2a([o$1d("sketchViewModel.snappingOptions")],E.prototype,"snappingOptions",void 0),e$2a([d$25()],E.prototype,"spinnerViewModel",void 0),e$2a([d$25()],E.prototype,"state",null),e$2a([d$25({readOnly:!0})],E.prototype,"syncing",null),e$2a([o$1d("sketchViewModel.tooltipOptions")],E.prototype,"tooltipOptions",void 0),e$2a([d$25()],E.prototype,"view",null),E=e$2a([n$2L(M)],E);const S$1=E,e={hide:"hide",hideChildren:"hide-children"};function n$1(_t){if(_t)return _t.listMode!=null?_t.listMode:void 0}function i(_t){if(_t)return _t.minScale!=null?_t.minScale:void 0}function t$1(_t){if(_t)return _t.maxScale!=null?_t.maxScale:void 0}function r$1(_t){if(!_t)return"inherited";const Tt=_t.get("layer.capabilities.exportMap.supportsSublayerVisibility");if(typeof Tt=="boolean")return Tt?"independent":"inherited";const Mt=_t.get("capabilities.exportMap.supportsSublayerVisibility");return typeof Mt=="boolean"?Mt?"independent":"inherited":_t.visibilityMode!=null?_t.visibilityMode:"independent"}function u$2(_t){if(!!_t){if(!("type"in _t))return"sublayers";if(!(_t.listMode===e.hideChildren||_t.type==="wmts"))return _t.type==="group"?"layers":"sublayers"}}function l(_t){return n$1(_t)!==e.hide}function a$2(_t,Tt){if(!_t||isNaN(Tt))return!1;const Mt=i(_t),Pt=t$1(_t),Ft=!isNaN(Mt)&&Mt>0&&Tt>Mt,Dt=!isNaN(Pt)&&Pt>0&&Tt<Pt;return Ft||Dt}function d$1(_t){const Tt=_t==null?void 0:_t.layer;return Tt&&Tt.type==="group"?Tt.layers:null}function y$2(_t){const Tt=p$2(_t)?_t:null,Mt=_t==null?void 0:_t.parent,Pt=(Mt==null?void 0:Mt.type)==="map-image"&&Tt.source,Ft="";return Pt&&Mt?{layer:Mt,title:Ft,sublayerIds:[Pt.mapLayerId]}:{layer:_t,title:Ft}}function p$2(_t){return!!(_t!=null&&_t.layer)}var o$1;let r=o$1=class extends c$2F{constructor(_t){super(_t),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new o$1({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};e$2a([d$25()],r.prototype,"displayValueEnabled",void 0),e$2a([d$25()],r.prototype,"max",void 0),e$2a([d$25()],r.prototype,"min",void 0),e$2a([d$25()],r.prototype,"step",void 0),e$2a([d$25()],r.prototype,"value",void 0),r=o$1=e$2a([n$2L("esri.support.Action.ActionSlider")],r);const a$1=r,h$3={base:"esri-layer-list-panel",content:"esri-layer-list-panel__content",contentLegend:"esri-layer-list-panel__content--legend",contentString:"esri-layer-list-panel__content--string",contentElement:"esri-layer-list-panel__content--html-element",contentWidget:"esri-layer-list-panel__content--widget"},p$1="legends";let g$1=class extends s$1P(O$l){constructor(_t,Tt){super(_t,Tt),this._legend=null,this._handles=new u$1P,this.content=null,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.own([l$2e(()=>this.content,_t=>this._createLegend(_t),h$1w)])}destroy(){const{_legend:_t}=this;_t&&_t.destroy(),this._legend=null}get className(){const{image:_t}=this,Tt=this._getFirstWidget();return this._get("className")||!_t&&Tt?Tt.iconClass:""}set className(_t){_t!==void 0?this._override("className",_t):this._clearOverride("className")}get title(){const _t=this._getFirstWidget();return this._get("title")||_t?_t.label:""}set title(_t){_t!==void 0?this._override("title",_t):this._clearOverride("title")}render(){return n$1Q("div",{class:h$3.base},this._renderContents())}_renderContent(_t){const{_legend:Tt,listItem:Mt}=this;return _t?_t==="legend"?Mt&&Mt.view&&Mt.layer&&Tt?n$1Q("div",{class:this.classes(h$3.content,h$3.contentLegend),key:Tt},Tt.render()):null:typeof _t=="string"?n$1Q("div",{class:this.classes(h$3.content,h$3.contentString),key:_t,innerHTML:_t}):e$1b(_t)?n$1Q("div",{class:this.classes(h$3.content,h$3.contentWidget),key:_t},_t.render()):_t instanceof HTMLElement?n$1Q("div",{class:this.classes(h$3.content,h$3.contentElement),key:_t,bind:_t,afterCreate:this._attachToNode}):null:null}_renderContents(){const{content:_t}=this;return Array.isArray(_t)?_t.map(Tt=>this._renderContent(Tt)):this._renderContent(_t)}_getLegendOptions(){const{listItem:_t}=this;if(!_t)return{};const{layer:Tt,view:Mt}=_t;return Tt&&Mt?{view:Mt,layerInfos:[y$2(Tt)]}:{}}_createLegend(_t){this._hasLegend(_t)&&!this._legend&&__vitePreload(()=>import("./Legend.3890ef32.js"),["assets/Legend.3890ef32.js","assets/EffectView.d573d8e0.js","assets/ExportImageParameters.21510e73.js","assets/floorFilterUtils.69500d62.js","assets/sublayerUtils.6d16b5d3.js","assets/rendererConversion.add823be.js","assets/previewSymbol3D.955b997c.js","assets/webStyleSymbolUtils.20127335.js","assets/devEnvironmentUtils.8c6e6b72.js"]).then(({default:Tt})=>{const{_handles:Mt,listItem:Pt}=this,Ft=new Tt(this._getLegendOptions());this._legend=Ft,this.notifyChange("className"),this.notifyChange("title");const Dt=l$2e(()=>{var Nt,Vt;return[Pt==null?void 0:Pt.view,Pt==null?void 0:Pt.layer,(Nt=Pt==null?void 0:Pt.layer)==null?void 0:Nt.source,(Vt=Pt==null?void 0:Pt.layer)==null?void 0:Vt.parent]},()=>this._updateLegend(Ft),h$1w);Mt.add(Dt,p$1),this.scheduleRender()})}_hasLegend(_t){const Tt="legend";return _t===Tt||!!Array.isArray(_t)&&_t.includes(Tt)}_attachToNode(_t){_t.appendChild(this)}_updateLegend(_t){_t.set(this._getLegendOptions()),this.scheduleRender()}_getWidget(_t){return _t==="legend"?this._legend:e$1b(_t)?_t:null}_getFirstWidget(){const{content:_t}=this;if(Array.isArray(_t)){let Tt=null;return _t.some(Mt=>{const Pt=this._getWidget(Mt);return Pt&&(Tt=Pt),!!Pt}),Tt}return this._getWidget(_t)}};e$2a([d$25()],g$1.prototype,"className",null),e$2a([d$25()],g$1.prototype,"content",void 0),e$2a([d$25()],g$1.prototype,"image",void 0),e$2a([d$25()],g$1.prototype,"listItem",void 0),e$2a([d$25()],g$1.prototype,"title",null),e$2a([d$25()],g$1.prototype,"open",void 0),e$2a([d$25()],g$1.prototype,"visible",void 0),g$1=e$2a([n$2L("esri.widgets.LayerList.ListItemPanel")],g$1);const _=g$1;var b$1;const C=j$11.ofType({key:"type",defaultKeyValue:"button",base:c$2F,typeMap:{button:a$2h,toggle:a$2g,slider:a$1}}),S=j$11.ofType(C),j$1="layer",L$1="child-list-mode",O$1="hide",I$1="esri.widgets.LayerList.ListItem";let P=b$1=class extends s$1P(a$2B(y$1E)){constructor(_t){super(_t),this.actionsSections=new S,this.actionsOpen=!1,this.children=new(j$11.ofType(b$1)),this.childrenSortable=!0,this.error=null,this.hidden=!1,this.layer=null,this.layerView=null,this.listItemCreatedFunction=null,this.open=!1,this.panel=null,this.parent=null,this.sortable=!0,this.view=null,this.visible=null}initialize(){if(this.handles.add([l$2e(()=>this.layer,_t=>this._watchLayerProperties(_t),h$1w),l$2e(()=>this.view,_t=>this._updateChildren(_t),h$1w),l$2e(()=>this.panel,_t=>this._setListItemOnPanel(_t),h$1w),l$2e(()=>[this.layer,this.view],()=>this._getLayerView(),h$1w)]),typeof this.listItemCreatedFunction=="function"){const _t={item:this};this.listItemCreatedFunction.call(null,_t)}}destroy(){this.view=null}get connectionStatus(){const{layerView:_t}=this;if(_t&&"connectionStatus"in _t)return _t.connectionStatus}get incompatible(){const{layerView:_t}=this;return!(!_t||!("spatialReferenceSupported"in _t))&&!_t.spatialReferenceSupported}castPanel(_t){return this.get("panel.open")&&!_t.hasOwnProperty("open")&&(_t.open=!0),_t?new _(_t):null}get title(){const _t=this.get("layer.layer");return(!_t||_t&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""}set title(_t){_t!==void 0?this._override("title",_t):this._clearOverride("title")}get updating(){const{layerView:_t,connectionStatus:Tt}=this;return!Tt&&(_t?_t.updating:this._isLayerUpdating(this.layer))}get visibleAtCurrentScale(){return!a$2(this.layer,this.get("view.scale"))}get visibilityMode(){return r$1(this.layer)}clone(){return new b$1({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,children:this.children.clone(),layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(_t){_t&&(_t.listItem=this)}_updateChildren(_t){const Tt=this.children;Tt&&Tt.forEach(Mt=>Mt.view=_t)}_addChildren(_t){if(this.handles.remove(L$1),this.children.removeAll(),!_t)return;_t.forEach(Mt=>{this.handles.add(l$2e(()=>Mt.listMode,()=>this._addChildren(_t)),L$1)});const Tt=_t.filter(Mt=>n$1(Mt)!==O$1);this.children.addMany(this._makeChildren(Tt))}_watchSublayerChanges(_t){_t&&this.handles.add(_t.on("change",()=>{this._addChildren(_t)}),j$1)}_initializeChildLayers(_t){this._addChildren(_t),this._watchSublayerChanges(_t)}_makeChildren(_t){return _t.map(Tt=>l(Tt)?new b$1({layer:Tt,listItemCreatedFunction:this.listItemCreatedFunction,parent:this,view:this.view}):null).reverse()}_watchLayerProperties(_t){if(!this.handles||(this.handles.remove(j$1),this.handles.remove(L$1),!_t))return;if(this.handles.add(l$2e(()=>_t.listMode,()=>this._watchLayerProperties(_t)),j$1),n$1(_t)==="hide-children")return void this.children.removeAll();const Tt=u$2(_t);Tt&&this.handles.add(l$2e(()=>_t[Tt],()=>{_t.hasOwnProperty(Tt)&&this._initializeChildLayers(_t[Tt])},h$1w),j$1)}async _getLayerView(){const{layer:_t,view:Tt}=this;if(_t&&Tt)try{const Mt=await Tt.whenLayerView(_t);if(Mt.layer!==this.layer)return;this._set("layerView",Mt)}catch{}}_isLayerUpdating(_t){return _t&&_t.loadStatus==="loading"}};e$2a([d$25({type:S})],P.prototype,"actionsSections",void 0),e$2a([d$25()],P.prototype,"actionsOpen",void 0),e$2a([d$25({type:j$11})],P.prototype,"children",void 0),e$2a([d$25()],P.prototype,"childrenSortable",void 0),e$2a([d$25({readOnly:!0})],P.prototype,"connectionStatus",null),e$2a([o$1d("layer.loadError?")],P.prototype,"error",void 0),e$2a([d$25()],P.prototype,"hidden",void 0),e$2a([d$25({readOnly:!0})],P.prototype,"incompatible",null),e$2a([d$25()],P.prototype,"layer",void 0),e$2a([d$25({readOnly:!0})],P.prototype,"layerView",void 0),e$2a([d$25()],P.prototype,"listItemCreatedFunction",void 0),e$2a([d$25()],P.prototype,"open",void 0),e$2a([d$25({type:_})],P.prototype,"panel",void 0),e$2a([s$23("panel")],P.prototype,"castPanel",null),e$2a([d$25()],P.prototype,"parent",void 0),e$2a([d$25()],P.prototype,"sortable",void 0),e$2a([d$25()],P.prototype,"title",null),e$2a([d$25({readOnly:!0})],P.prototype,"updating",null),e$2a([d$25({value:null})],P.prototype,"view",void 0),e$2a([o$1d("layer.visible")],P.prototype,"visible",void 0),e$2a([d$25({readOnly:!0})],P.prototype,"visibleAtCurrentScale",null),e$2a([d$25({readOnly:!0})],P.prototype,"visibilityMode",null),P=b$1=e$2a([n$2L(I$1)],P);const V$1=P,m={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode",children:"children"},h$2="hide",p=j$11.ofType(V$1);let y$1=class extends n$2K.EventedAccessor{constructor(_t){super(_t),this._handles=new u$1P,this.listItemCreatedFunction=null,this.operationalItems=new p,this.view=null}initialize(){this._handles.add([l$2e(()=>{var _t;return[this.view,(_t=this.view)==null?void 0:_t.ready]},()=>this._viewHandles(),h$1w),l$2e(()=>this.listItemCreatedFunction,()=>this._listItemCreatedFunctionChanged())],m.view)}destroy(){this._handles.destroy(),this._handles=null,this.view=null,this.operationalItems.removeAll()}get state(){const _t=this.get("view");return this.get("view.ready")?"ready":_t?"loading":"disabled"}triggerAction(_t,Tt){_t&&!_t.disabled&&this.emit("trigger-action",{action:_t,item:Tt})}moveListItem(_t,Tt,Mt,Pt){var Qt,Zt;const Ft=_t==null?void 0:_t.layer;if(!Ft)return;const Dt=(Zt=(Qt=this.view)==null?void 0:Qt.map)==null?void 0:Zt.layers,Nt=Tt?d$1(Tt):Dt,Vt=Mt?d$1(Mt):Dt;if(!Nt||!Vt)return;const{operationalItems:zt}=this,Xt=(Tt==null?void 0:Tt.children)||zt,Ht=(Mt==null?void 0:Mt.children)||zt,Wt=Vt.length-Pt;_t.parent=Mt||null,Xt.includes(_t)&&Xt.remove(_t),Nt.includes(Ft)&&Nt.remove(Ft),Ht.includes(_t)||Ht.add(_t,Wt),Vt.includes(Ft)||Vt.add(Ft,Wt)}_createLayerViewHandles(_t){const{_handles:Tt}=this;Tt.remove(m.layerViews),this._compileList(),_t&&Tt.add(_t.on("change",()=>this._compileList()),m.layerViews)}_createMapLayerHandles(_t){const{_handles:Tt}=this;Tt.remove(m.mapLayers),this._compileList(),_t&&Tt.add(_t.on("change",()=>this._compileList()),m.mapLayers)}_createListItem(_t){const{view:Tt,listItemCreatedFunction:Mt}=this;return new V$1({layer:_t,listItemCreatedFunction:Mt,view:Tt})}_removeAllItems(){const{_handles:_t,operationalItems:Tt}=this;Tt.forEach(Mt=>{_t.remove(`${m.children}-${Mt.uid}`)}),Tt.removeAll()}_getViewableLayers(_t){if(_t)return _t.filter(Tt=>n$1(Tt)!==h$2)}_watchLayersListMode(_t){const{_handles:Tt}=this;Tt.remove(m.layerListMode),_t&&_t.forEach(Mt=>{"listMode"in Mt&&Tt.add(l$2e(()=>Mt.listMode,()=>this._compileList()),m.layerListMode)})}_compileList(){const _t=this.get("view.map.layers");this._watchLayersListMode(_t);const Tt=this._getViewableLayers(_t);Tt&&Tt.length?(this._createNewItems(Tt),this._removeItems(Tt),this._sortItems(Tt)):this._removeAllItems()}_createNewItems(_t){const{operationalItems:Tt}=this;_t.forEach(Mt=>{Tt.find(Pt=>Pt.layer===Mt)||Tt.add(this._createListItem(Mt))})}_removeItems(_t){const{_handles:Tt,operationalItems:Mt}=this,Pt=[];Mt.forEach(Ft=>{Ft&&_t&&_t.includes(Ft.layer)||(Tt.remove(`${m.children}-${Ft.uid}`),Pt.push(Ft))}),Mt.removeMany(Pt)}_sortItems(_t){const{operationalItems:Tt}=this;Tt.sort((Mt,Pt)=>{const Ft=_t.indexOf(Mt.layer),Dt=_t.indexOf(Pt.layer);return Ft>Dt?-1:Ft<Dt?1:0})}_listItemCreatedFunctionChanged(){this._removeAllItems(),this._compileList()}_viewHandles(){const{_handles:_t,view:Tt}=this;_t.remove([m.mapLayers,m.layerViews,m.viewLayers]),this._compileList(),Tt&&Tt.ready&&_t.add([l$2e(()=>{var Mt,Pt;return(Pt=(Mt=this.view)==null?void 0:Mt.map)==null?void 0:Pt.allLayers},Mt=>this._createMapLayerHandles(Mt),h$1w),l$2e(()=>{var Mt;return(Mt=this.view)==null?void 0:Mt.allLayerViews},Mt=>this._createLayerViewHandles(Mt),h$1w)],m.viewLayers)}};e$2a([d$25()],y$1.prototype,"listItemCreatedFunction",void 0),e$2a([d$25({type:p})],y$1.prototype,"operationalItems",void 0),e$2a([d$25({readOnly:!0})],y$1.prototype,"state",null),e$2a([d$25()],y$1.prototype,"view",void 0),y$1=e$2a([n$2L("esri.widgets.LayerList.LayerListViewModel")],y$1);const v$1=y$1,t=_t=>s(_t)||o(_t),s=_t=>{if(!("type"in _t))return!1;switch(_t.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":return!0;default:return!1}},o=_t=>{const Tt=u$2(_t);if(_t.hasOwnProperty(Tt)&&r$1P(_t[Tt])){for(const Mt of _t[Tt])if(t(Mt))return!0}return!1};var n;let c=n=class extends V$1{constructor(_t){super(_t),this.children=new j$11}get enabled(){return!!r$1P(this.featureSource)&&this.featureSource.enabled}get featureSource(){const{layer:_t,getFeatureSnappingSources:Tt}=this;return Tt().find(Mt=>Mt.layer===_t)}_initializeChildLayers(_t){const Tt=_t.filter(t);super._initializeChildLayers(Tt)}_makeChildren(_t){return _t.map(Tt=>l(Tt)?new n({layer:Tt,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).reverse()}};e$2a([d$25()],c.prototype,"children",void 0),e$2a([d$25()],c.prototype,"enabled",null),e$2a([d$25({constructOnly:!0})],c.prototype,"getFeatureSnappingSources",void 0),e$2a([d$25()],c.prototype,"featureSource",null),e$2a([d$25()],c.prototype,"parent",void 0),c=n=e$2a([n$2L("esri.widgets.support.SnappingControls.SnappingListItem")],c);let a=class extends v$1{constructor(){super(...arguments),this.featureSnappingSources=new j$11}get operationalItemsFlat(){return this.operationalItems.flatten(_t=>_t.children)}_compileList(){const _t=this.get("view.map.layers");if(!_t)return;const Tt=_t.filter(t);this._watchLayersListMode(Tt);const Mt=this._getViewableLayers(Tt);Mt&&Mt.length?(this._createNewItems(Mt),this._removeItems(Mt),this._sortItems(Mt)):this._removeAllItems()}_createListItem(_t){return new c({layer:_t,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};e$2a([d$25()],a.prototype,"featureSnappingSources",void 0),e$2a([d$25()],a.prototype,"operationalItems",void 0),a=e$2a([n$2L("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],a);const u$1="esri.widgets.support.SnappingControls.SnappingControlsViewModel";let d=class extends a$2B(y$1E){constructor(_t){super(_t),this.layerListViewModel=new a,this.snappingOptions=null,this.view=null}initialize(){this.handles.add([l$2e(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:_t,view:Tt})=>{_t.view=Tt},h$1w),l$2e(()=>{var _t;return{viewModel:this.layerListViewModel,sources:(_t=this.snappingOptions)==null?void 0:_t.featureSources}},({viewModel:_t,sources:Tt})=>{_t.featureSnappingSources=Tt},h$1w)])}get state(){return this.get("snappingOptions")?"ready":"disabled"}enableSnappingForLayer(_t){var Tt;((Tt=this._findSnappingSourceForLayer(_t))!=null?Tt:this._makeSnappingSourceForLayer(_t)).enabled=!0}disableSnappingForLayer(_t){const Tt=this._findSnappingSourceForLayer(_t);Tt&&(Tt.enabled=!1)}updateEnabledFeatureSources(_t){for(const Tt of this.snappingOptions.featureSources)l(Tt.layer)&&(Tt.enabled=_t.includes(Tt.layer.id))}_findSnappingSourceForLayer(_t){return this.snappingOptions.featureSources.find(Tt=>Tt.layer.id===_t)}_makeSnappingSourceForLayer(_t){const{layer:Tt}=this.layerListViewModel.operationalItemsFlat.find(Pt=>Pt.layer.id===_t);if(!Tt)throw new s$2i("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${_t} because no such layer was found in the view`);const Mt=new p$j({layer:Tt});return this.snappingOptions.featureSources.add(Mt),Mt}};e$2a([d$25({constructOnly:!0})],d.prototype,"layerListViewModel",void 0),e$2a([d$25({constructOnly:!0})],d.prototype,"snappingOptions",void 0),e$2a([d$25()],d.prototype,"state",null),e$2a([d$25({constructOnly:!0})],d.prototype,"view",void 0),d=e$2a([n$2L(u$1)],d);const y=d,h$1={header:!0,enabledToggle:!0,selfEnabledToggle:!0,featureEnabledToggle:!0,layerList:!0},g={base:"esri-snapping-controls",container:"esri-snapping-controls__container",panel:"esri-snapping-controls__panel",item:"esri-snapping-controls__item",toggleBlock:"esri-snapping-controls__toggle-block",layerListBlock:"esri-snapping-controls__layer-list-block",layerList:"esri-snapping-controls__layer-list",layerListFilter:"esri-snapping-controls__layer-list__filter",layerListItem:"esri-snapping-controls__layer-list__item",layerListItemCheckbox:"esri-snapping-controls__layer-list__item__checkbox",layerListItemLabel:"esri-snapping-controls__layer-list__item__label",nestedContainer:"esri-snapping-controls__nested-container",disabled:"esri-disabled",esriWidget:"esri-widget",widgetIcon:"esri-icon-vertex-gps"};let b=class extends O$l{constructor(_t,Tt){super((()=>{const{view:Mt,viewModel:Pt,snappingOptions:Ft,...Dt}=_t;return Dt})(),Tt),this._layerListFilter=null,this.label=void 0,this.messages=null,this.messagesCommon=null,this.snappingOptions=null,this.view=null,this.visibleElements={...h$1},this._defaultViewModel=null,_t!=null&&_t.viewModel?this.viewModel=_t.viewModel:(this._defaultViewModel=new y({snappingOptions:_t.snappingOptions,view:_t.view}),this.viewModel=this._defaultViewModel)}destroy(){this._defaultViewModel=l$2H(this._defaultViewModel)}loadDependencies(){return Promise.all([__vitePreload(()=>import("./calcite-action.e0e2f806.js"),["assets/calcite-action.e0e2f806.js","assets/action.556d08fb.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js","assets/dom.6d780cb1.js","assets/icon.b8676875.js","assets/loader.8cfadb87.js","assets/guid.d207555c.js"]),__vitePreload(()=>import("./calcite-block.bbfbb128.js"),["assets/calcite-block.bbfbb128.js","assets/dom.6d780cb1.js","assets/Heading.267a31db.js","assets/conditionalSlot.14b9b076.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js","assets/guid.d207555c.js","assets/action.556d08fb.js","assets/icon.b8676875.js","assets/loader.8cfadb87.js","assets/action-menu.19e1b0c7.js","assets/popover.edb55234.js","assets/popper.28b8c32e.js","assets/scrim.22655cb7.js"]),__vitePreload(()=>import("./calcite-icon.5a6624c8.js"),["assets/calcite-icon.5a6624c8.js","assets/icon.b8676875.js","assets/dom.6d780cb1.js","assets/observers.e1b59ee4.js"]),__vitePreload(()=>import("./calcite-label.8c1d362c.js"),["assets/calcite-label.8c1d362c.js","assets/label.5b6684d1.js","assets/dom.6d780cb1.js"]),__vitePreload(()=>import("./calcite-panel.11c411d3.js"),["assets/calcite-panel.11c411d3.js","assets/dom.6d780cb1.js","assets/Heading.267a31db.js","assets/action-menu.19e1b0c7.js","assets/guid.d207555c.js","assets/observers.e1b59ee4.js","assets/conditionalSlot.14b9b076.js","assets/action.556d08fb.js","assets/interactive.890c7fc0.js","assets/icon.b8676875.js","assets/loader.8cfadb87.js","assets/popover.edb55234.js","assets/popper.28b8c32e.js","assets/scrim.22655cb7.js"]),__vitePreload(()=>import("./calcite-list.5090382c.js"),["assets/calcite-list.5090382c.js","assets/interactive.890c7fc0.js"]),__vitePreload(()=>import("./calcite-list-item.6c0ecb55.js"),["assets/calcite-list-item.6c0ecb55.js","assets/dom.6d780cb1.js","assets/conditionalSlot.14b9b076.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js"]),__vitePreload(()=>import("./calcite-list-item-group.4b9d76f2.js"),["assets/calcite-list-item-group.4b9d76f2.js","assets/Heading.267a31db.js"]),__vitePreload(()=>import("./calcite-switch.07e2de76.js"),["assets/calcite-switch.07e2de76.js","assets/dom.6d780cb1.js","assets/label.5b6684d1.js","assets/form.ec68f019.js","assets/interactive.890c7fc0.js"]),__vitePreload(()=>import("./calcite-checkbox.97c2c68a.js"),["assets/calcite-checkbox.97c2c68a.js","assets/guid.d207555c.js","assets/form.ec68f019.js","assets/dom.6d780cb1.js","assets/label.5b6684d1.js","assets/interactive.890c7fc0.js"]),__vitePreload(()=>import("./calcite-accordion-item.446dde61.js"),["assets/calcite-accordion-item.446dde61.js","assets/dom.6d780cb1.js","assets/guid.d207555c.js","assets/icon.b8676875.js","assets/observers.e1b59ee4.js"]),__vitePreload(()=>import("./calcite-accordion.db697ec0.js"),[]),__vitePreload(()=>import("./calcite-input.40b2ffd2.js"),["assets/calcite-input.40b2ffd2.js","assets/dom.6d780cb1.js","assets/label.5b6684d1.js","assets/form.ec68f019.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js","assets/icon.b8676875.js","assets/progress.87fd5fc0.js"])])}set viewModel(_t){_t!==this._get("viewModel")&&((t$2e(this._defaultViewModel)||this._defaultViewModel!==_t)&&(this._defaultViewModel=l$2H(this._defaultViewModel)),this._set("viewModel",_t))}castVisibleElements(_t){return{...h$1,..._t}}render(){const{label:_t,visibleElements:{header:Tt}}=this;return n$1Q("div",{"aria-label":_t,class:this.classes(g.base,g.esriWidget)},n$1Q("div",{class:g.container},Tt?this.renderHeaderView():this.renderContent()))}renderHeaderView(){return n$1Q("calcite-panel",{heading:this.label,class:g.panel},this.renderContent())}renderContent(){return[this.renderToggles(),this.renderLayerList()]}renderToggles(){return n$1Q("calcite-block",{class:g.toggleBlock,heading:"",open:!0},this.renderEnabledToggle(),n$1Q("div",{class:g.nestedContainer},this.renderSelfEnabledToggle(),this.renderFeatureEnabledToggle()))}renderEnabledToggle(){if(!this.visibleElements.enabledToggle)return;const{messages:{enableSnapping:_t},viewModel:{snappingOptions:{enabled:Tt,enabledToggled:Mt}}}=this;return n$1Q("calcite-label",{layout:"inline-space-between"},_t,n$1Q("calcite-switch",{checked:Tt,disabled:Mt,bind:this,onCalciteSwitchChange:this._enableSnappingSwitchChange}))}renderSelfEnabledToggle(){if(!this.visibleElements.selfEnabledToggle)return;const{messages:{geometryGuides:_t},viewModel:{snappingOptions:{enabled:Tt,selfEnabled:Mt,enabledToggled:Pt}}}=this;return n$1Q("calcite-label",{layout:"inline-space-between"},_t,n$1Q("calcite-switch",{checked:Mt,disabled:Pt||!Tt,bind:this,onCalciteSwitchChange:this._selfEnabledSwitchChange}))}renderFeatureEnabledToggle(){if(!this.visibleElements.featureEnabledToggle)return;const{messages:{featureToFeature:_t},viewModel:{snappingOptions:{enabled:Tt,featureEnabled:Mt,enabledToggled:Pt}}}=this;return n$1Q("calcite-label",{layout:"inline-space-between"},_t,n$1Q("calcite-switch",{checked:Mt,disabled:Pt||!Tt,bind:this,onCalciteSwitchChange:this._featureEnabledSwitchChange}))}renderLayerList(){if(!this.visibleElements.layerList)return;const{messages:_t,messagesCommon:Tt}=this,Mt=({target:{value:Ft}})=>this._layerListFilter=Ft===""?null:new RegExp(Ft,"i"),Pt=this.viewModel.layerListViewModel.operationalItems.length>9?n$1Q("calcite-input",{class:g.layerListFilter,clearable:!0,placeholder:_t==null?void 0:_t.searchLayers,onCalciteInputInput:Mt}):null;return n$1Q("calcite-block",{"intl-collapse":Tt==null?void 0:Tt.collapse,"intl-expand":Tt==null?void 0:Tt.expand,heading:_t.snappingLayers,class:g.layerListBlock,open:!0,collapsible:!0},Pt,n$1Q("calcite-list",{class:g.layerList},this.renderLayerListItemCollection(this.viewModel.layerListViewModel.operationalItems,this._layerListFilter)))}renderLayerListItemCollection(_t,Tt){return _t.map(Mt=>{if(!Tt||this._itemTitleMatchesFilter(Mt,Tt))return Mt.children.length>0?this.renderLayerListItemGroup(Mt):this.renderLayerListItem(Mt);const Pt=Mt.children.filter(Ft=>this._itemTitleMatchesFilter(Ft,Tt));return Pt.length>0?this.renderLayerListItemGroup(Mt,Pt):null}).toArray()}renderLayerListItem(_t){const{messages:{untitledLayer:Tt}}=this,Mt=_t.title||Tt,Pt=_t.enabled,Ft=n$1Q("calcite-checkbox",{value:_t.layer.id,checked:Pt,bind:this,onCalciteCheckboxChange:Nt=>this._handleLayerListItemChange(Nt.target)}),Dt=()=>{const Nt=!Ft.properties.checked;this._handleLayerListItemChange({checked:Nt,value:Ft.properties.value})};return n$1Q("calcite-list-item",{key:`${this.id}-list-item-${_t.uid}`,onclick:Dt},n$1Q("calcite-label",{class:g.layerListItem,slot:"content-start",tabIndex:-1,layout:"inline","disable-spacing":"true"},n$1Q("div",{class:g.layerListItemCheckbox},Ft),n$1Q("div",{class:g.layerListItemLabel},Mt)))}renderLayerListItemGroup(_t,Tt){const Mt=_t.title||this.messages.untitledLayer,Pt=_t.title&&_t.title!==""?_t.title:e$1$(),Ft=!!Tt,Dt=Tt!=null?Tt:_t.children;return n$1Q("calcite-list-item",{key:Pt},n$1Q("calcite-accordion",{"icon-position":"start",appearance:"transparent",afterCreate:Nt=>{Nt.append(...Array.from(Nt.children).map(Vt=>(Vt.remove(),Vt)))}},n$1Q("calcite-accordion-item",{active:Ft,"item-title":Mt,key:_t.uid},n$1Q("calcite-list",null,[...this.renderLayerListItemCollection(Dt)]))))}_enableSnappingSwitchChange(_t){this.snappingOptions.enabled=_t.target.checked}_featureEnabledSwitchChange(_t){this.snappingOptions.featureEnabled=_t.target.checked}_itemTitleMatchesFilter(_t,Tt){return Tt.test(_t.title)}_selfEnabledSwitchChange(_t){this.snappingOptions.selfEnabled=_t.target.checked}async _handleLayerListItemChange(_t){_t.checked?this.viewModel.enableSnappingForLayer(_t.value):this.viewModel.disableSnappingForLayer(_t.value)}};e$2a([d$25()],b.prototype,"_layerListFilter",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],b.prototype,"label",void 0),e$2a([d$25(),e$1f("esri/widgets/support/SnappingControls/t9n/SnappingControls")],b.prototype,"messages",void 0),e$2a([d$25(),e$1f("esri/t9n/common")],b.prototype,"messagesCommon",void 0),e$2a([o$1d("viewModel.snappingOptions")],b.prototype,"snappingOptions",void 0),e$2a([o$1d("viewModel.view")],b.prototype,"view",void 0),e$2a([d$25()],b.prototype,"viewModel",null),e$2a([d$25()],b.prototype,"visibleElements",void 0),e$2a([s$23("visibleElements")],b.prototype,"castVisibleElements",null),b=e$2a([n$2L("esri.widgets.support.SnappingControls")],b);const u=b,j={base:"esri-editor esri-widget esri-widget--panel",message:"esri-editor__message",controls:"esri-editor__controls",controlButton:"esri-editor__control-button",progressBar:"esri-editor__progress-bar",panelToolbar:"esri-editor__panel-toolbar",panelToolbarSnappingButton:"esri-editor__panel-toolbar__snapping-button",panelContent:"esri-editor__panel-content",panelContentMessage:"esri-editor__panel-content__message",panelContentSection:"esri-editor__panel-content__section",panelContentSectionGroup:"esri-editor__panel-content__section__group",scroller:"esri-editor__scroller",snappingControlsPopover:"esri-editor__snapping-controls-popover",updateFeaturesActionButtons:"esri-editor__update-features-action-buttons",updateFeaturesActionButtonsButton:"esri-editor__update-features-action-buttons--button",featureTemplatesContainer:"esri-editor__feature-templates-container",promptContainer:"esri-editor__prompt",promptHeader:"esri-editor__prompt__header",promptHeading:"esri-editor__prompt__header__heading",promptMessage:"esri-editor__prompt__message",promptDivider:"esri-editor__prompt__divider",promptActions:"esri-editor__prompt__actions",warningIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-edit",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonSecondary:"esri-button--secondary",buttonTertiary:"esri-button--tertiary"},L=p$2l(j.scroller,j.panelContent),x={undoRedoButtons:!1};function U(_t){_t.focus()}const V="esri.widgets.Editor",D=s$2l.getLogger(V);let I=class extends a$2B(O$l){constructor(_t,Tt){super(_t,Tt),this._candidateCommitted=!1,this._featureForm=new V$8,this._stateStack=[],this._attachments=new w$H({visibleElements:{addSubmitButton:!1,cancelAddButton:!1,cancelUpdateButton:!1,deleteButton:!1,errorMessage:!1,progressBar:!1,updateButton:!1}}),this._featureTemplates=new j$7({enableListScroll:!1}),this._filterText="",this._prompt=null,this._spinner=new m$F,this._snappingPopover=null,this.activeWorkflow=null,this.allowedWorkflows=null,this.useDeprecatedCreateWorkflow=!1,this.headingLevel=4,this.iconClass=j.widgetIcon,this.label=void 0,this.labelOptions=new c$i,this.layerInfos=null,this.messages=null,this.messagesCommon=null,this.messagesTemplates=null,this.snappingOptions=new l$d,this.tooltipOptions=new r$f,this.supportingWidgetDefaults=null,this.view=null,this.viewModel=new S$1,this.visibleElements={...x},this._setCandidateFeature=(Mt,Pt=!1)=>{if(this._candidateCommitted)return;const Ft=this._assertActiveUpdateWorkflow();Ft.data.edits.feature=Mt,Pt&&(Ft.next(),this._candidateCommitted=!0)},this._handleSave=this._handleSave.bind(this),this._handleBack=this._handleBack.bind(this),this._handleDone=this._handleDone.bind(this),this._handleDelete=this._handleDelete.bind(this),this._handleAdd=this._handleAdd.bind(this),this._handleEdit=this._handleEdit.bind(this),this._handleAttachmentAdd=this._handleAttachmentAdd.bind(this),this._handleAttachmentUpdate=this._handleAttachmentUpdate.bind(this),this._handleAttachmentDelete=this._handleAttachmentDelete.bind(this),this.EditorPanel=this.EditorPanel.bind(this)}initialize(){const{view:_t,snappingOptions:Tt}=this;this._snappingControls=new u({snappingOptions:Tt,view:_t,visibleElements:{header:!1}}),this.own([l$2e(()=>this.headingLevel,Mt=>{this._featureForm.headingLevel=l$1t(Mt),this._featureTemplates.headingLevel=l$1t(Mt)},h$1w),this.viewModel.featureTemplatesViewModel.on("select",({item:Mt})=>this.useDeprecatedCreateWorkflow?this.startCreateWorkflowAtFeatureCreation(Mt):this.startCreateFeaturesWorkflowAtFeatureCreation(Mt)),l$2e(()=>this.viewModel.state,(Mt,Pt)=>{const Ft=this._stateStack.indexOf(Mt);Ft===-1?this._stateStack.push(Pt):this._stateStack.splice(Ft)}),l$2e(()=>this.viewModel,Mt=>{this._featureForm.viewModel=Mt?Mt.featureFormViewModel:null,this._attachments.viewModel=Mt?Mt.attachmentsViewModel:null,this._featureTemplates.viewModel=Mt?Mt.featureTemplatesViewModel:null,this._spinner.viewModel=Mt?Mt.spinnerViewModel:null},h$1w),l$2e(()=>this.view,(Mt,Pt)=>{const Ft=`editor-${this.id}-spinner`;Pt&&Pt.ui.remove(this._spinner,Ft),Mt&&Mt.ui.add(this._spinner,{key:Ft,position:"manual"})},h$1w),a$2C(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.sketchViewModel},"create",()=>{this.scheduleRender()}),a$2C(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.activeWorkflow},"cancel-request",({controller:Mt})=>{const{messages:Pt,messagesCommon:Ft}=this;this._prompt={title:Pt.cancelRequestTitle,message:Pt.cancelRequestWarningMessage,context:"danger",actions:{primary:{label:Ft.form.yes,action:()=>{Mt.allow(),this._prompt=null}},secondary:{label:Ft.form.no,action:()=>(Mt.deny(),this._prompt=null)}}},this.scheduleRender()}),l$2e(()=>this.supportingWidgetDefaults,Mt=>{Mt&&(this._featureForm.set(Mt.featureForm),this._attachments.set(Mt.attachments),this._featureTemplates.set(Mt.featureTemplates),this.viewModel.sketchViewModel.set(Mt.sketch))},h$1w),l$2e(()=>{var Mt;return(Mt=this._attachments)==null?void 0:Mt.error},Mt=>{if(!Mt)return;const{messages:Pt,messagesCommon:Ft}=this;this._prompt={title:Pt.errorWarningTitle,message:Mt.message,context:"warning",actions:{primary:{label:Ft.form.ok,action:()=>{this._prompt=null}}}}}),l$2e(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.failures},Mt=>{if(!Mt)return;const{messages:Pt}=this,[{error:Ft,retry:Dt,cancel:Nt}]=Mt;this._prompt={title:Pt.errorWarningTitle,message:s$1y(Pt.errorWarningMessageTemplate,{errorMessage:Ft.message}),context:"warning",actions:{primary:{label:Pt.retry,action:()=>{Dt(),this._prompt=null}},secondary:{label:Pt.ignore,action:()=>(Nt(),this._prompt=null)}}}}),l$2e(()=>{var Mt;return(Mt=this.viewModel)==null?void 0:Mt.state},Mt=>{Mt==="awaiting-feature-to-update"&&(this._filterText=""),Mt==="awaiting-update-feature-candidate"&&(this._candidateCommitted=!1)}),l$2e(()=>{var Mt,Pt;return[(Mt=this._attachments)==null?void 0:Mt.selectedFile,(Pt=this._attachments)==null?void 0:Pt.submitting]},()=>this.scheduleRender()),f$1p(()=>{var Mt;return!((Mt=this.viewModel)!=null&&Mt.activeWorkflow)},()=>this._featureTemplates.filterText=""),a$2C(()=>this.view,"key-down",Mt=>{var Pt;Mt.key==="Escape"&&((Pt=this.viewModel)==null?void 0:Pt.activeWorkflow)&&this._handleBack()})])}destroy(){this._attachments.destroy(),this._featureForm.destroy(),this._featureTemplates.destroy(),this._snappingControls.destroy()}loadDependencies(){return Promise.all([__vitePreload(()=>import("./calcite-action.e0e2f806.js"),["assets/calcite-action.e0e2f806.js","assets/action.556d08fb.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js","assets/dom.6d780cb1.js","assets/icon.b8676875.js","assets/loader.8cfadb87.js","assets/guid.d207555c.js"]),__vitePreload(()=>import("./calcite-action-menu.ebe0218b.js"),["assets/calcite-action-menu.ebe0218b.js","assets/action-menu.19e1b0c7.js","assets/dom.6d780cb1.js","assets/guid.d207555c.js","assets/observers.e1b59ee4.js","assets/conditionalSlot.14b9b076.js","assets/action.556d08fb.js","assets/interactive.890c7fc0.js","assets/icon.b8676875.js","assets/loader.8cfadb87.js","assets/popover.edb55234.js","assets/popper.28b8c32e.js","assets/Heading.267a31db.js"]),__vitePreload(()=>import("./calcite-button.8539e91f.js"),["assets/calcite-button.8539e91f.js","assets/dom.6d780cb1.js","assets/label.5b6684d1.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js","assets/form.ec68f019.js","assets/icon.b8676875.js","assets/loader.8cfadb87.js","assets/guid.d207555c.js"]),__vitePreload(()=>import("./calcite-flow.849e43b2.js"),["assets/calcite-flow.849e43b2.js","assets/observers.e1b59ee4.js"]),__vitePreload(()=>import("./calcite-icon.5a6624c8.js"),["assets/calcite-icon.5a6624c8.js","assets/icon.b8676875.js","assets/dom.6d780cb1.js","assets/observers.e1b59ee4.js"]),__vitePreload(()=>import("./calcite-loader.4847b134.js"),["assets/calcite-loader.4847b134.js","assets/loader.8cfadb87.js","assets/guid.d207555c.js"]),__vitePreload(()=>import("./calcite-panel.11c411d3.js"),["assets/calcite-panel.11c411d3.js","assets/dom.6d780cb1.js","assets/Heading.267a31db.js","assets/action-menu.19e1b0c7.js","assets/guid.d207555c.js","assets/observers.e1b59ee4.js","assets/conditionalSlot.14b9b076.js","assets/action.556d08fb.js","assets/interactive.890c7fc0.js","assets/icon.b8676875.js","assets/loader.8cfadb87.js","assets/popover.edb55234.js","assets/popper.28b8c32e.js","assets/scrim.22655cb7.js"]),__vitePreload(()=>import("./calcite-popover.dd546d49.js"),["assets/calcite-popover.dd546d49.js","assets/popover.edb55234.js","assets/popper.28b8c32e.js","assets/dom.6d780cb1.js","assets/guid.d207555c.js","assets/Heading.267a31db.js","assets/action.556d08fb.js","assets/observers.e1b59ee4.js","assets/interactive.890c7fc0.js","assets/icon.b8676875.js","assets/loader.8cfadb87.js"]),__vitePreload(()=>import("./calcite-scrim.7d77dddd.js"),["assets/calcite-scrim.7d77dddd.js","assets/scrim.22655cb7.js","assets/loader.8cfadb87.js","assets/guid.d207555c.js"])])}castVisibleElements(_t){return{...x,..._t}}startCreateWorkflowAtFeatureTypeSelection(){return t$c(D,"startCreateWorkflowAtFeatureTypeSelection","startCreateFeaturesWorkflowAtFeatureTypeSelection"),this.viewModel.startCreateWorkflowAtFeatureTypeSelection()}startCreateFeaturesWorkflowAtFeatureTypeSelection(){return this.viewModel.startCreateFeaturesWorkflowAtFeatureTypeSelection()}startCreateWorkflowAtFeatureCreation(_t){return t$c(D,"startCreateWorkflowAtFeatureCreation","startCreateFeaturesWorkflowAtFeatureCreation"),this.viewModel.startCreateWorkflowAtFeatureCreation(_t)}startCreateFeaturesWorkflowAtFeatureCreation(_t){return this.viewModel.startCreateFeaturesWorkflowAtFeatureCreation(_t)}startCreateWorkflowAtFeatureEdit(_t){return t$c(D,"startCreateWorkflowAtFeatureEdit"),this.viewModel.startCreateWorkflowAtFeatureEdit(_t)}startUpdateWorkflowAtFeatureSelection(){return this.viewModel.startUpdateWorkflowAtFeatureSelection()}startUpdateWorkflowAtMultipleFeatureSelection(_t){return this.viewModel.startUpdateWorkflowAtMultipleFeatureSelection(_t)}startUpdateWorkflowAtFeatureEdit(_t){return this.viewModel.startUpdateWorkflowAtFeatureEdit(_t)}deleteFeatureFromWorkflow(){return this.viewModel.deleteFeatureFromWorkflow()}cancelWorkflow(_t){return this.viewModel.cancelWorkflow(_t)}render(){const{_attachments:_t,_prompt:Tt,viewModel:Mt}=this;if(!Mt)return n$1Q("div",{class:j.base});const{state:Pt}=Mt,Ft=r$1P(Tt)?n$1Q("calcite-scrim",null,this.renderPrompt(Tt)):null;return n$1Q("div",{class:j.base},Mt.syncing||_t.submitting?this.renderProgressBar():null,n$1Q("calcite-flow",null,this._stateStack.map(Dt=>this.renderState(Dt)),this.renderState(Pt)),Ft)}renderState(_t){switch(_t){case"disabled":break;case"ready":return this.renderLanding(_t);case"awaiting-feature-creation-info":return this.renderTemplates(_t);case"creating-features":case"editing-new-feature":case"editing-existing-feature":return this.renderAttributeEditing(_t);case"awaiting-feature-to-update":return this.renderFeatureUpdating(_t);case"awaiting-update-feature-candidate":return this.renderFeatureList(_t);case"awaiting-feature-to-create":return this.renderFeatureCreation(_t);case"adding-attachment":return this.renderAttachmentAdding(_t);case"editing-attachment":return this.renderAttachmentEditing(_t)}return n$1Q("div",null)}isPanelActive(_t){return this.viewModel.state===_t}renderTemplates(_t){const{EditorPanel:Tt,headingLevel:Mt,messages:Pt,messagesCommon:Ft,_handleBack:Dt,_snappingControls:Nt,viewModel:{sketchViewModel:Vt}}=this;return n$1Q(Tt,{active:this.isPanelActive(_t),key:"templates-panel",handleBack:Dt,heading:Pt.selectTemplate,headingLevel:Mt,messages:Pt,messagesCommon:Ft,sketchViewModel:Vt,snappingControls:Nt},n$1Q("div",{class:L},this._featureTemplates.render()))}renderAttributeEditing(_t){const{activeWorkflow:Tt,EditorPanel:Mt,messages:Pt,messagesCommon:Ft,headingLevel:Dt,_handleBack:Nt,_snappingControls:Vt,viewModel:zt}=this,{sketchViewModel:Xt}=zt,Ht=zt.featureFormViewModel;if(Tt.type==="create-features"&&Tt.pendingFeatures.length<1)return this.renderFeatureCreation(_t);const Wt=Tt.type==="update"&&!Tt.data.edits.modified||zt.syncing,Qt=Tt.type==="update"?Pt.editFeature:Pt.createFeatures,Zt=Tt.type==="update"?Ft.update:Ft.create,Kt=Tt.type==="create-features"&&Tt.createFeatureState==="create-new",er=Tt.type==="update"&&Tt.data.editableItem.supports.includes("delete"),Yt=Tt.type==="update"&&Tt.data.editableItem.hasAttachments,rr=[{label:Tt.type==="create-features"&&Tt.numPendingFeatures>1?s$1y(Pt.createFeaturesTemplate,{numFeatures:Tt.numPendingFeatures}):Zt,type:"primary",disabled:Wt,clickHandler:this._handleSave,width:er?"half":"full"}];er&&rr.push({label:Ft.delete,type:"tertiary",clickHandler:this._handleDelete,appearance:"outline",width:"half"});const ir=Ht.inputFields.every(nr=>!nr.visible)?this.renderMessage(s$1y(Pt.clickToFinishTemplate,{button:Zt})):n$1Q("div",{class:j.panelContentSection},n$1Q("div",{class:j.panelContentSectionGroup},this._featureForm.render(),Yt?n$1Q("div",{key:"attachments"},n$1Q("div",null,Pt.attachments),this._attachments.render()):null));return n$1Q(Mt,{active:this.isPanelActive(_t),key:"attribute-editing-panel",heading:Qt,headingLevel:Dt,handleBack:Nt,messages:Pt,messagesCommon:Ft,sketchViewModel:Xt,snappingControls:Vt},n$1Q("div",{class:L},ir,Kt?n$1Q("calcite-scrim",null):null),this.renderFooterActions(rr))}renderAttachmentAdding(_t){const{_attachments:Tt,EditorPanel:Mt,_handleBack:Pt,headingLevel:Ft,messages:Dt,messagesCommon:Nt,_snappingControls:Vt,viewModel:{sketchViewModel:zt}}=this,Xt=[{label:Tt.submitting?Nt.cancel:Nt.add,disabled:Tt.submitting||!Tt.selectedFile,type:"primary",clickHandler:this._handleAttachmentAdd,width:"full"}];return n$1Q(Mt,{active:this.isPanelActive(_t),key:"attachment-adding-panel",heading:Dt.addAttachment,headingLevel:Ft,handleBack:Pt,messages:Dt,messagesCommon:Nt,sketchViewModel:zt,snappingControls:Vt},n$1Q("div",{class:L},Tt.render()),this.renderFooterActions(Xt))}renderAttachmentEditing(_t){const{_attachments:Tt,EditorPanel:Mt,_handleBack:Pt,headingLevel:Ft,messages:Dt,messagesCommon:Nt,_snappingControls:Vt,viewModel:{sketchViewModel:zt}}=this,Xt=[{label:Nt.update,disabled:Tt.submitting||!Tt.selectedFile,type:"primary",clickHandler:this._handleAttachmentUpdate,width:"half"},{label:Nt.delete,disabled:Tt.submitting,type:"tertiary",clickHandler:this._handleAttachmentDelete,width:"half",appearance:"outline"}];return n$1Q(Mt,{active:this.isPanelActive(_t),key:"attachment-editing-panel",heading:Dt.editAttachment,headingLevel:Ft,handleBack:Pt,messages:Dt,messagesCommon:Nt,sketchViewModel:zt,snappingControls:Vt},n$1Q("div",{class:L},Tt.render()),this.renderFooterActions(Xt))}renderFeatureUpdating(_t){const{EditorPanel:Tt,_handleBack:Mt,headingLevel:Pt,messages:Ft,messagesCommon:Dt,_snappingControls:Nt,viewModel:{sketchViewModel:Vt}}=this;return n$1Q(Tt,{active:this.isPanelActive(_t),key:"feature-updating-panel",heading:Ft.selectFeature,headingLevel:Pt,handleBack:Mt,messages:Ft,messagesCommon:Dt,sketchViewModel:Vt,snappingControls:Nt},n$1Q("div",{class:L},this.renderMessage(Ft.selectFeatureToEdit)))}renderMessage(_t){return n$1Q("div",{class:j.panelContentMessage},_t)}renderFeatureCreation(_t){const{EditorPanel:Tt,_handleBack:Mt,headingLevel:Pt,messages:Ft,messagesCommon:Dt,_snappingControls:Nt,viewModel:Vt}=this,{sketchViewModel:zt}=Vt,Xt=Vt.sketchViewModel,Ht=this._assertActiveCreateWorkflow().data.creationInfo.layer,Wt=Xt.canUndo()&&Xt.createGraphic?Xt.createGraphic:null,Qt=this._getSketchingTip(Ht.geometryType,Wt);return n$1Q(Tt,{active:this.isPanelActive(_t),key:"feature-creation-panel",heading:Ft.placeFeature,headingLevel:Pt,handleBack:Mt,messages:Ft,messagesCommon:Dt,sketchViewModel:zt,snappingControls:Nt},n$1Q("div",{class:L},this.renderMessage(Qt)))}renderFooterActions(_t){return _t.map(({type:Tt,disabled:Mt,class:Pt,...Ft},Dt)=>this.renderButton({class:this.classes(j.controlButton,Tt==="secondary"?j.buttonSecondary:Tt==="tertiary"?j.buttonTertiary:null,Mt?j.buttonDisabled:null,Pt),disabled:Mt!=null?Mt:!1,key:Dt,slot:"footer-actions",...Ft}))}renderPrompt({title:_t,message:Tt,context:Mt,actions:Pt}){const Ft=!!Pt.secondary,Dt=n$1Q("calcite-button",{appearance:"solid",color:Mt==="danger"?"red":"blue",width:Ft?"half":"full",onclick:Pt.primary.action,key:"prompt-primary-button",afterCreate:U},Pt.primary.label),Nt=Ft?n$1Q("calcite-button",{appearance:"clear",color:Mt==="danger"?"red":"blue",width:"half",onclick:Pt.secondary.action,key:"prompt-secondary-button"},Pt.secondary.label):null;return n$1Q("div",{class:`${j.promptContainer}--${Mt}`},n$1Q("div",{class:j.promptHeader},n$1Q("calcite-icon",{icon:"exclamation-mark-triangle"}),n$1Q(n$1P,{class:j.promptHeading,level:this.headingLevel},_t)),n$1Q("div",{class:j.promptMessage},Tt),n$1Q("div",{class:j.promptDivider}),n$1Q("div",{class:j.promptActions},Nt,Dt))}renderProgressBar(){return n$1Q("div",{class:this.classes(j.progressBar),key:"progress-bar"})}renderButton(_t){const{disabled:Tt,class:Mt,key:Pt,clickHandler:Ft,label:Dt,...Nt}=_t;return n$1Q("calcite-button",{class:Mt,disabled:Tt,key:Pt,onclick:Ft,type:"button",...Nt},Dt)}renderLanding(_t){const{EditorPanel:Tt,headingLevel:Mt,messages:Pt,messagesCommon:Ft,_snappingControls:Dt,viewModel:{sketchViewModel:Nt}}=this;return n$1Q(Tt,{active:this.isPanelActive(_t),key:"landing-panel",heading:Pt.widgetLabel,headingLevel:Mt,showBackButton:!1,messages:Pt,messagesCommon:Ft,sketchViewModel:Nt,snappingControls:Dt},n$1Q("div",{class:L},n$1Q("div",{key:"edit-actions",class:j.panelContentSection},this.renderUpdateActions()),n$1Q("div",{key:"create-actions",class:j.panelContentSection},this.renderCreateActions())))}renderUpdateActions(){const{messages:_t,messagesCommon:Tt}=this;return n$1Q("div",null,n$1Q(n$1P,{level:l$1t(this.headingLevel)},_t.editFeatures),n$1Q("div",{class:j.updateFeaturesActionButtons},n$1Q("calcite-action",{text:Tt.select,textEnabled:!0,icon:"cursor",alignment:"start",class:j.updateFeaturesActionButtonsButton,onclick:this._handleEdit})))}renderCreateActions(){const{_featureTemplates:_t,headingLevel:Tt,messages:Mt}=this;if(_t.viewModel.numberOfFeatureTemplates!==0)return n$1Q("div",null,n$1Q(n$1P,{level:l$1t(Tt)},Mt.createFeatures),n$1Q("div",{key:"templates",class:j.featureTemplatesContainer},_t.render()))}renderFeatureList(_t){const{EditorPanel:Tt,_handleBack:Mt,headingLevel:Pt,messages:Ft,messagesCommon:Dt,messagesTemplates:Nt,_snappingControls:Vt,viewModel:{editableItems:zt,sketchViewModel:Xt}}=this,Ht=this._assertActiveUpdateWorkflow().data.candidates,Wt=s$1y(Ft.multipleFeaturesTemplate,{total:Ht.length}),Qt=new Map;let Zt=0;Ht.map(Yt=>({label:this._getLabel(Yt),id:Yt.attributes[Yt.layer.objectIdField],data:Yt})).filter(Yt=>{const{label:rr,data:ir}=Yt,nr=this._filterText.toLowerCase(),{title:ar}=ir.layer;return this.viewModel.editableItems.find(ur=>ur.layer===ir.layer).supports.includes("update")&&(!nr||rr.toLowerCase().includes(nr)||ar.toLowerCase().includes(nr))}).forEach(Yt=>{Zt++;const rr=Yt.data.layer;Qt.has(rr)?Qt.get(rr).items.push(Yt):Qt.set(rr,{id:`${rr.id}`,label:rr.title,items:[Yt]})});const Kt=zt.filter(({layer:Yt})=>Qt.has(Yt)).map(({layer:Yt})=>Qt.get(Yt)).toArray(),er=Zt>10||this._filterText.length>0;return n$1Q(Tt,{active:this.isPanelActive(_t),key:"feature-list",heading:Wt,headingLevel:Pt,handleBack:Mt,messages:Ft,messagesCommon:Dt,sketchViewModel:Xt,snappingControls:Vt},n$1Q("div",{class:L},r$d({id:this.id,enableListScroll:!1,filterEnabled:er,filterText:this._filterText,items:Kt,messages:{filterPlaceholder:Nt.filterPlaceholder,noItems:Nt.noItems,noMatches:Nt.noMatches},onItemMouseEnter:({data:Yt})=>this._setCandidateFeature(Yt),onItemMouseLeave:()=>this._setCandidateFeature(null),onItemSelect:({data:Yt})=>this._setCandidateFeature(Yt,!0),onFilterChange:Yt=>this._filterText=Yt})))}EditorPanel(_t,...Tt){const{active:Mt,handleBack:Pt,heading:Ft,headingLevel:Dt,key:Nt,messages:Vt,messagesCommon:zt,showBackButton:Xt,sketchViewModel:Ht,snappingControls:Wt}=_t;return n$1Q("calcite-panel",{bind:this,key:Nt,heading:Ft,headingLevel:Dt,showBackButton:Xt!=null?Xt:!0,beforeBack:Pt!=null?Pt:null,onCalcitePanelScroll:this._onSnappingPopoverPanelScroll},n$1Q("div",{class:j.panelToolbar},n$1Q("calcite-popover",{autoClose:Mt,afterCreate:this._afterSnappingPopoverCreated,afterUpdate:this._afterSnappingPopoverUpdated,bind:this,label:Vt.snappingSettings,heading:Vt.snappingSettings,"reference-element":`${Nt}__snappingButton`,"overlay-positioning":"fixed",placement:"bottom"},n$1Q("div",{class:j.snappingControlsPopover},Wt.render())),n$1Q("calcite-button",{id:`${Nt}__snappingButton`,text:Vt.snapping,appearance:"transparent",color:"neutral",alignment:"icon-end-space-between","icon-start":"vertex-gps","icon-end":"caret-down",width:"full",class:j.panelToolbarSnappingButton},Vt.snapping),this.visibleElements.undoRedoButtons?[n$1Q("calcite-button",{key:"undo-button",text:zt.undo,appearance:"transparent",color:"neutral",alignment:"center","icon-start":"undo",scale:"l",disabled:!Ht.canUndo(),onclick:Ht.undo.bind(Ht)}),n$1Q("calcite-button",{key:"redo-button",text:zt.redo,appearance:"transparent",color:"neutral",alignment:"center","icon-start":"redo",scale:"l",disabled:!Ht.canRedo(),onclick:Ht.redo.bind(Ht)})]:null),Tt)}_onSnappingPopoverPanelScroll(){var _t;(_t=this._snappingPopover)!=null&&_t.open&&this._snappingPopover.toggle()}_afterSnappingPopoverCreated(_t){this._snappingPopover=_t}_afterSnappingPopoverUpdated(_t){this._snappingPopover=_t}_getSketchingTip(_t,Tt){const{messages:Mt}=this;if(_t==="point")return Mt.tips.clickToAddPoint;if(_t==="polygon"||_t==="polyline"){if(!Tt)return Mt.tips.clickToStart;const Pt=Tt.geometry,Ft=_t==="polygon"?"rings":"paths",[Dt]=Pt[Ft];return _t==="polygon"&&Dt<4?Mt.tips.clickToContinue:Mt.tips.clickToContinueThenDoubleClickToEnd}return Mt.tips.clickToAddFeature}_getLabel(_t){const Tt=_t.layer;if(!Tt)return null;const{objectIdField:Mt}=Tt,{attributes:Pt}=_t,Ft=h$1o(Tt);return Ft&&Pt[Ft]&&`${Pt[Ft]}`||s$1y(this.messages.untitledFeatureTemplate,{id:Pt[Mt]})}_handleDelete(){const{messages:_t,messagesCommon:Tt}=this;this._prompt={title:_t.deleteWarningTitle,message:_t.deleteWarningMessage,context:"danger",actions:{primary:{label:Tt.delete,action:()=>{this.viewModel.deleteFeatureFromWorkflow(),this._prompt=null}},secondary:{label:_t.keepFeature,action:()=>this._prompt=null}}}}_handleSave(){const{featureFormViewModel:_t}=this.viewModel;_t.submit(),!_t.submittable||_t.validateContingencyConstraints(_t.getValues(),{includeIncompleteViolations:!0}).length>0||this.viewModel.activeWorkflow.commit()}_handleAttachmentAdd(){const{_attachments:_t}=this,{activeWorkflow:Tt}=this.viewModel;_t.addAttachment().then(()=>Tt.previous())}_handleAttachmentUpdate(){const{_attachments:_t}=this,{activeWorkflow:Tt}=this.viewModel;_t.updateAttachment().then(()=>Tt.previous())}_handleAttachmentDelete(){const{messages:_t,messagesCommon:Tt}=this;this._prompt={title:_t.deleteAttachmentWarningTitle,message:_t.deleteAttachmentWarningMessage,context:"danger",actions:{primary:{label:Tt.delete,action:()=>{const{_attachments:Mt}=this,{activeWorkflow:Pt}=this.viewModel;Mt.deleteAttachment(Mt.viewModel.activeAttachmentInfo).then(()=>{Pt.previous(),this._prompt=null})}},secondary:{label:_t.keepAttachment,action:()=>this._prompt=null}}}}_handleAdd(){this.viewModel.canCreate}_handleEdit(){this.viewModel.canUpdate&&this.viewModel.startUpdateWorkflowAtFeatureSelection()}_handleDone(){this.viewModel.cancelWorkflow({force:!0})}async _handleBack(){const{messages:_t}=this,Tt=this.activeWorkflow,Mt=()=>{Tt.hasPreviousStep?Tt.previous({cancelCurrentStep:!0}):this.viewModel.cancelWorkflow({force:!0})};if(Tt.type==="create"||Tt.type==="create-features"&&Tt.numPendingFeatures>0||Tt.stepId==="editing-existing-feature"&&Tt.data.edits.modified){const{type:Pt}=Tt,Ft=Pt==="create"?_t.cancelAddWarningMessage:_t.cancelEditWarningMessage,Dt=Pt==="create"?_t.cancelAddTitle:_t.cancelEditTitle,Nt=Pt==="create"?_t.continueAdding:_t.continueEditing,Vt=Pt==="create"?_t.discardFeature:_t.discardEdits;throw this._prompt={title:Dt,message:Ft,context:"danger",actions:{primary:{label:Vt,action:()=>{Mt(),this._prompt=null}},secondary:{label:Nt,action:()=>this._prompt=null}}},this.scheduleRender(),new Error}Mt()}_assertActiveCreateWorkflow(){const{type:_t}=this.viewModel.activeWorkflow;if(_t==="create"||_t==="create-features")return this.viewModel.activeWorkflow;throw Error("Expected activeWorkflow to be instance of CreateWorkflow or CreateFeaturesWorkflow")}_assertActiveUpdateWorkflow(){if(this.viewModel.activeWorkflow.type==="update")return this.viewModel.activeWorkflow;throw Error("Expected activeWorkflow to be an UpdateWorkflow")}};e$2a([d$25()],I.prototype,"_attachments",void 0),e$2a([o$1d("viewModel.activeWorkflow")],I.prototype,"activeWorkflow",void 0),e$2a([o$1d("viewModel.allowedWorkflows")],I.prototype,"allowedWorkflows",void 0),e$2a([d$25()],I.prototype,"useDeprecatedCreateWorkflow",void 0),e$2a([d$25()],I.prototype,"headingLevel",void 0),e$2a([d$25()],I.prototype,"iconClass",void 0),e$2a([d$25({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],I.prototype,"label",void 0),e$2a([o$1d("viewModel.labelOptions")],I.prototype,"labelOptions",void 0),e$2a([o$1d("viewModel.layerInfos")],I.prototype,"layerInfos",void 0),e$2a([d$25(),e$1f("esri/widgets/Editor/t9n/Editor")],I.prototype,"messages",void 0),e$2a([d$25(),e$1f("esri/t9n/common")],I.prototype,"messagesCommon",void 0),e$2a([d$25(),e$1f("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],I.prototype,"messagesTemplates",void 0),e$2a([o$1d("viewModel.snappingOptions")],I.prototype,"snappingOptions",void 0),e$2a([o$1d("viewModel.tooltipOptions")],I.prototype,"tooltipOptions",void 0),e$2a([d$25()],I.prototype,"supportingWidgetDefaults",void 0),e$2a([o$1d("viewModel.view")],I.prototype,"view",void 0),e$2a([d$25(),t$1d(["workflow-cancel","workflow-commit"])],I.prototype,"viewModel",void 0),e$2a([d$25()],I.prototype,"visibleElements",void 0),e$2a([s$23("visibleElements")],I.prototype,"castVisibleElements",null),e$2a([t$1e()],I.prototype,"_handleDelete",null),e$2a([t$1e()],I.prototype,"_handleAttachmentAdd",null),e$2a([t$1e()],I.prototype,"_handleAttachmentUpdate",null),e$2a([t$1e()],I.prototype,"_handleAttachmentDelete",null),e$2a([t$1e()],I.prototype,"_handleAdd",null),e$2a([t$1e()],I.prototype,"_handleEdit",null),e$2a([t$1e()],I.prototype,"_handleDone",null),I=e$2a([n$2L(V)],I);const O=I,PersilMap=({className:_t,setDataPersil:Tt})=>{r$1O.apiKey="AAPK4b3895d07794469dbd57a083f1ac4fa52nP3iH2KjKBQ2wRSVFdz17o7vuCF-lo_yMcmcIDhijUKcuRGC_oNSu5JKRBZDjYn";const Mt=react.exports.useRef(null);return react.exports.useEffect(()=>{const Pt=new Ke({url:"https://demo.esriindonesia.co.id/arcgis/rest/services/Hosted/KRK_Persil/FeatureServer/3",outFields:["*"]}),Ft=new Ke({url:"https://demo.esriindonesia.co.id/arcgis/rest/services/Hosted/KoordinatGedung_1/FeatureServer/0"}),Dt=new L$t({basemap:"arcgis-topographic",layers:[Pt,Ft]}),Nt=new Ve({map:Dt,center:[106.79752143200005,-6.255],zoom:18,container:Mt.current}),Vt=new y$e({view:Nt,placeholder:"Cari Lokasi Persil Tanah..."}),zt=new O({view:Nt,allowedWorkflows:"create",snappingOptions:{enabled:!1,featureSources:[{layer:Ft}],featureEnabled:!1,selfEnabled:!1},layerInfos:[{layer:Ft,enabled:!0,addEnabled:!0,updateEnabled:!0,deleteEnabled:!0},{layer:Pt,enabled:!1}]});Nt.ui.add(Vt,"top-right"),Nt.ui.add(zt,"bottom-right");let Xt;return Nt.on("click",function(Ht){Nt.hitTest(Ht).then(function(Wt){const Qt=Wt.results[0].graphic.attributes;Tt(Qt),Nt.whenLayerView(Pt).then(Zt=>{Xt&&Xt.remove(),Xt=Zt.highlight(Qt==null?void 0:Qt.objectid)})})}),()=>{Nt&&Nt.destroy()}},[]),jsx("div",{ref:Mt,className:_t})};function SearchPersil(){var Ft,Dt,Nt;const[_t,Tt]=react.exports.useState(null),Mt=useNavigate(),Pt=Vt=>{Vt.preventDefault(),Mt("/submission/3")};return jsxs("div",{className:"flex",children:[jsxs("div",{className:"w-1/4 bg-gray-100 h-[calc(100vh_-_9.5rem)] px-4 flex flex-col text-[#424242]",children:[jsxs("div",{className:"mt-10",children:[jsx("h2",{className:"font-poppins text-2xl font-semibold text-black",children:"Pilih Persil"}),jsx("p",{className:"font-poppins my-2 text-[1rem] text-[#5C5C5C]",children:"Pilih Atau Cari Persil Tanah Untuk Pengajuan Melalui Peta Yang Tersedia"})]}),_t?jsxs("div",{className:"flex flex-col h-[calc(100vh_-_9.5rem)]",children:[jsxs("div",{className:"border-b border-gray-200 font-poppins space-y-2 overflow-y-auto no-scrollbar flex-grow",children:[jsxs("div",{children:[jsx("h2",{className:"font-semibold text-[#12519E] text-lg",children:"Lokasi"}),jsx("table",{className:"table-fixed w-full text-left text-[#424242] text-poppins",children:jsxs("tbody",{children:[jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"Kota"}),jsx("td",{className:" px-6",children:(Ft=String(_t.nama_kota))==null?void 0:Ft.toLowerCase().replace(/(^\w|\s\w)/g,Vt=>Vt.toUpperCase())})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"Kecamatan"}),jsx("td",{className:" px-6",children:(Dt=_t.kecamatan)==null?void 0:Dt.toLowerCase().replace(/(^\w|\s\w)/g,Vt=>Vt.toUpperCase())})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"Kelurahan"}),jsx("td",{className:" px-6",children:(Nt=_t.kelurahan)==null?void 0:Nt.toLowerCase().replace(/(^\w|\s\w)/g,Vt=>Vt.toUpperCase())})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"RT/RW"}),jsx("td",{className:" px-6",children:"-"})]})]})})]}),jsxs("div",{className:"",children:[jsx("h2",{className:"font-semibold text-lg text-[#12519E]",children:"Informasi Sub Zona"}),jsx("table",{className:"table-fixed w-full text-left text-[#424242] text-poppins",children:jsxs("tbody",{children:[jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"Zona"}),jsx("td",{className:"px-6",children:_t.zona})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"Sub Zona"}),jsx("td",{className:" px-6",children:_t.sub_zona})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"-"}),jsx("td",{className:"px-6",children:" - "})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"KDB"}),jsx("td",{className:" px-6",children:_t.kdb})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"KLB"}),jsx("td",{className:" px-6",children:_t.klb})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"KDH"}),jsx("td",{className:" px-6",children:_t.kdh})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"KTB"}),jsx("td",{className:" px-6",children:_t.ktb})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"Ketinggian"}),jsx("td",{className:" px-6",children:_t.tinggi_m_dummy})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"PSL"}),jsx("td",{className:" px-6",children:_t.psl})]}),jsxs("tr",{className:"",children:[jsx("td",{scope:"row",className:"",children:"Tipe"}),jsx("td",{className:" px-6",children:_t.tipe})]})]})})]}),jsxs("div",{className:"space-y-1",children:[jsx("h2",{className:"font-semibold text-lg text-[#12519E]",children:"Informasi Lainnya"}),jsx("p",{className:"",children:"Metode Penggambaran"})]})]}),jsxs("div",{className:"flex justify-evenly items-center font-poppins w-full h-16 mt-auto",children:[jsx("button",{className:"border border-[#757575]  text-[#757575] rounded-lg bg-white h-4/5 w-1/3",children:"Batal"}),jsx("button",{className:"border rounded-lg bg-[#12519E] text-white h-4/5 w-1/3",onClick:Pt,children:"Selanjutnya"})]})]}):jsx("div",{className:"w-full flex flex-grow items-center justify-center px-5 border-b-2",children:jsx("h2",{className:"font-poppins text-[#12519E] text-center",children:"Anda Belum Memilih Lokasi Untuk Pengajuan IMB"})})]}),jsx(PersilMap,{className:"w-3/4 h-[calc(100vh_-_9.5rem)] flex flex-col",setDataPersil:Tt})]})}function SubmissionPage(){const _t=useNavigate();function Tt(Mt){Mt.preventDefault(),_t("/submission/2")}return jsx("div",{className:"w-full h-[calc(100vh_-_9.5rem)] flex justify-center items-center",children:jsx("div",{className:"w-1/3 h-5/6 bg-white rounded-lg shadow-lg shadow-gray-600 font-poppins",children:jsxs("div",{className:"p-10 flex flex-col justify-center h-full",children:[jsx("h2",{className:"font-semibold text-xl",children:"Data Pemohon IMB"}),jsx("p",{className:"text-gray-500",children:"Lengkapilah data pemohon imb dibawah ini"}),jsxs("form",{className:"mt-20 justify-between flex flex-col items-center h-full",onSubmit:Tt,children:[jsxs("div",{className:"w-full space-y-5",children:[jsx("div",{className:"w-full",children:jsxs("label",{htmlFor:"name",children:["Nama Pemohon",jsx("input",{type:"text",className:"p-2 my-2 block w-full border bg-white rounded-md focus:border-gray-600 text-gray-500 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40",name:"name",autoComplete:"name"})]})}),jsx("div",{className:"w-full",children:jsxs("label",{htmlFor:"nik",children:["NIK Pemohon",jsx("input",{type:"text",className:"p-2 my-2 block w-full border bg-white rounded-md focus:border-gray-600 text-gray-500 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40",name:"nik",autoComplete:"nik"})]})}),jsxs("div",{className:"w-full",children:[jsx("label",{htmlFor:"address",className:"block mb-2 text-gray-500 dark:text-gray-400",children:"Alamat Pemohon"}),jsx("textarea",{id:"message",rows:10,className:"block p-2.5 w-full text-sm bg-gray-50 rounded-lg border focus:border-gray-600 text-gray-500 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40",defaultValue:""})]})]}),jsx("div",{className:"mt-auto w-full",children:jsx("button",{className:"bg-[#12519E] rounded-md text-white w-full py-3 hover:bg-[#06489a]",type:"submit",children:"Selanjutnya"})})]})]})})})}function FaCloudUploadAlt(_t){return GenIcon({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z"}}]})(_t)}function FaGlobe(_t){return GenIcon({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"}}]})(_t)}function FaPencilAlt(_t){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}}]})(_t)}function BiTargetLock(_t){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M13 4.069V2h-2v2.069A8.008 8.008 0 0 0 4.069 11H2v2h2.069A8.007 8.007 0 0 0 11 19.931V22h2v-2.069A8.007 8.007 0 0 0 19.931 13H22v-2h-2.069A8.008 8.008 0 0 0 13 4.069zM12 18c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z"}}]})(_t)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(_t,Tt){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Mt,Pt){Mt.__proto__=Pt}||function(Mt,Pt){for(var Ft in Pt)Object.prototype.hasOwnProperty.call(Pt,Ft)&&(Mt[Ft]=Pt[Ft])})(_t,Tt)};function __extends(_t,Tt){if(typeof Tt!="function"&&Tt!==null)throw new TypeError("Class extends value "+String(Tt)+" is not a constructor or null");function Mt(){this.constructor=_t}extendStatics(_t,Tt),_t.prototype=Tt===null?Object.create(Tt):(Mt.prototype=Tt.prototype,new Mt)}var __assign=function(){return(__assign=Object.assign||function(_t){for(var Tt,Mt=1,Pt=arguments.length;Mt<Pt;Mt++)for(var Ft in Tt=arguments[Mt])Object.prototype.hasOwnProperty.call(Tt,Ft)&&(_t[Ft]=Tt[Ft]);return _t}).apply(this,arguments)};function __awaiter(_t,Tt,Mt,Pt){return new(Mt||(Mt=Promise))(function(Ft,Dt){function Nt(Xt){try{zt(Pt.next(Xt))}catch(Ht){Dt(Ht)}}function Vt(Xt){try{zt(Pt.throw(Xt))}catch(Ht){Dt(Ht)}}function zt(Xt){var Ht;Xt.done?Ft(Xt.value):(Ht=Xt.value,Ht instanceof Mt?Ht:new Mt(function(Wt){Wt(Ht)})).then(Nt,Vt)}zt((Pt=Pt.apply(_t,Tt||[])).next())})}function __generator(_t,Tt){var Mt,Pt,Ft,Dt,Nt={label:0,sent:function(){if(1&Ft[0])throw Ft[1];return Ft[1]},trys:[],ops:[]};return Dt={next:Vt(0),throw:Vt(1),return:Vt(2)},typeof Symbol=="function"&&(Dt[Symbol.iterator]=function(){return this}),Dt;function Vt(zt){return function(Xt){return function(Ht){if(Mt)throw new TypeError("Generator is already executing.");for(;Nt;)try{if(Mt=1,Pt&&(Ft=2&Ht[0]?Pt.return:Ht[0]?Pt.throw||((Ft=Pt.return)&&Ft.call(Pt),0):Pt.next)&&!(Ft=Ft.call(Pt,Ht[1])).done)return Ft;switch(Pt=0,Ft&&(Ht=[2&Ht[0],Ft.value]),Ht[0]){case 0:case 1:Ft=Ht;break;case 4:return Nt.label++,{value:Ht[1],done:!1};case 5:Nt.label++,Pt=Ht[1],Ht=[0];continue;case 7:Ht=Nt.ops.pop(),Nt.trys.pop();continue;default:if(Ft=Nt.trys,!((Ft=Ft.length>0&&Ft[Ft.length-1])||Ht[0]!==6&&Ht[0]!==2)){Nt=0;continue}if(Ht[0]===3&&(!Ft||Ht[1]>Ft[0]&&Ht[1]<Ft[3])){Nt.label=Ht[1];break}if(Ht[0]===6&&Nt.label<Ft[1]){Nt.label=Ft[1],Ft=Ht;break}if(Ft&&Nt.label<Ft[2]){Nt.label=Ft[2],Nt.ops.push(Ht);break}Ft[2]&&Nt.ops.pop(),Nt.trys.pop();continue}Ht=Tt.call(_t,Nt)}catch(Wt){Ht=[6,Wt],Pt=0}finally{Mt=Ft=0}if(5&Ht[0])throw Ht[1];return{value:Ht[0]?Ht[1]:void 0,done:!0}}([zt,Xt])}}}function createCommonjsModule(_t,Tt){return _t(Tt={exports:{}},Tt.exports),Tt.exports}var lottie=createCommonjsModule(function(module,exports){typeof navigator<"u"&&function(_t,Tt){module.exports=Tt()}(0,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(_t){_useWebWorker=!!_t},getWebWorker=function(){return _useWebWorker},setLocationHref=function(_t){locationHref=_t},getLocationHref=function(){return locationHref};function createTag(_t){return document.createElement(_t)}function extendPrototype(_t,Tt){var Mt,Pt,Ft=_t.length;for(Mt=0;Mt<Ft;Mt+=1)for(var Dt in Pt=_t[Mt].prototype)Object.prototype.hasOwnProperty.call(Pt,Dt)&&(Tt.prototype[Dt]=Pt[Dt])}function getDescriptor(_t,Tt){return Object.getOwnPropertyDescriptor(_t,Tt)}function createProxyFunction(_t){function Tt(){}return Tt.prototype=_t,Tt}var audioControllerFactory=function(){function _t(Tt){this.audios=[],this.audioFactory=Tt,this._volume=1,this._isMuted=!1}return _t.prototype={addAudio:function(Tt){this.audios.push(Tt)},pause:function(){var Tt,Mt=this.audios.length;for(Tt=0;Tt<Mt;Tt+=1)this.audios[Tt].pause()},resume:function(){var Tt,Mt=this.audios.length;for(Tt=0;Tt<Mt;Tt+=1)this.audios[Tt].resume()},setRate:function(Tt){var Mt,Pt=this.audios.length;for(Mt=0;Mt<Pt;Mt+=1)this.audios[Mt].setRate(Tt)},createAudio:function(Tt){return this.audioFactory?this.audioFactory(Tt):window.Howl?new window.Howl({src:[Tt]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(Tt){this.audioFactory=Tt},setVolume:function(Tt){this._volume=Tt,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var Tt,Mt=this.audios.length;for(Tt=0;Tt<Mt;Tt+=1)this.audios[Tt].volume(this._volume*(this._isMuted?0:1))}},function(){return new _t}}(),createTypedArray=function(){function _t(Tt,Mt){var Pt,Ft=0,Dt=[];switch(Tt){case"int16":case"uint8c":Pt=1;break;default:Pt=1.1}for(Ft=0;Ft<Mt;Ft+=1)Dt.push(Pt);return Dt}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?function(Tt,Mt){return Tt==="float32"?new Float32Array(Mt):Tt==="int16"?new Int16Array(Mt):Tt==="uint8c"?new Uint8ClampedArray(Mt):_t(Tt,Mt)}:_t}();function createSizedArray(_t){return Array.apply(null,{length:_t})}function _typeof$6(_t){return(_typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tt){return typeof Tt}:function(Tt){return Tt&&typeof Symbol=="function"&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt})(_t)}var subframeEnabled=!0,expressionsPlugin=null,idPrefix="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var _t,Tt=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],Mt=Tt.length;for(_t=0;_t<Mt;_t+=1)BMMath[Tt[_t]]=Math[Tt[_t]]})(),BMMath.random=Math.random,BMMath.abs=function(_t){if(_typeof$6(_t)==="object"&&_t.length){var Tt,Mt=createSizedArray(_t.length),Pt=_t.length;for(Tt=0;Tt<Pt;Tt+=1)Mt[Tt]=Math.abs(_t[Tt]);return Mt}return Math.abs(_t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(_t){_t.style.position="absolute",_t.style.top=0,_t.style.left=0,_t.style.display="block",_t.style.transformOrigin="0 0",_t.style.webkitTransformOrigin="0 0",_t.style.backfaceVisibility="visible",_t.style.webkitBackfaceVisibility="visible",_t.style.transformStyle="preserve-3d",_t.style.webkitTransformStyle="preserve-3d",_t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(_t,Tt,Mt,Pt){this.type=_t,this.currentTime=Tt,this.totalTime=Mt,this.direction=Pt<0?-1:1}function BMCompleteEvent(_t,Tt){this.type=_t,this.direction=Tt<0?-1:1}function BMCompleteLoopEvent(_t,Tt,Mt,Pt){this.type=_t,this.currentLoop=Mt,this.totalLoops=Tt,this.direction=Pt<0?-1:1}function BMSegmentStartEvent(_t,Tt,Mt){this.type=_t,this.firstFrame=Tt,this.totalFrames=Mt}function BMDestroyEvent(_t,Tt){this.type=_t,this.target=Tt}function BMRenderFrameErrorEvent(_t,Tt){this.type="renderFrameError",this.nativeError=_t,this.currentTime=Tt}function BMConfigErrorEvent(_t){this.type="configError",this.nativeError=_t}var createElementID=(_count=0,function(){return idPrefix+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(_t,Tt,Mt){var Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht;switch(zt=Mt*(1-Tt),Xt=Mt*(1-(Vt=6*_t-(Nt=Math.floor(6*_t)))*Tt),Ht=Mt*(1-(1-Vt)*Tt),Nt%6){case 0:Pt=Mt,Ft=Ht,Dt=zt;break;case 1:Pt=Xt,Ft=Mt,Dt=zt;break;case 2:Pt=zt,Ft=Mt,Dt=Ht;break;case 3:Pt=zt,Ft=Xt,Dt=Mt;break;case 4:Pt=Ht,Ft=zt,Dt=Mt;break;case 5:Pt=Mt,Ft=zt,Dt=Xt}return[Pt,Ft,Dt]}function RGBtoHSV(_t,Tt,Mt){var Pt,Ft=Math.max(_t,Tt,Mt),Dt=Math.min(_t,Tt,Mt),Nt=Ft-Dt,Vt=Ft===0?0:Nt/Ft,zt=Ft/255;switch(Ft){case Dt:Pt=0;break;case _t:Pt=Tt-Mt+Nt*(Tt<Mt?6:0),Pt/=6*Nt;break;case Tt:Pt=Mt-_t+2*Nt,Pt/=6*Nt;break;case Mt:Pt=_t-Tt+4*Nt,Pt/=6*Nt}return[Pt,Vt,zt]}function addSaturationToRGB(_t,Tt){var Mt=RGBtoHSV(255*_t[0],255*_t[1],255*_t[2]);return Mt[1]+=Tt,Mt[1]>1?Mt[1]=1:Mt[1]<=0&&(Mt[1]=0),HSVtoRGB(Mt[0],Mt[1],Mt[2])}function addBrightnessToRGB(_t,Tt){var Mt=RGBtoHSV(255*_t[0],255*_t[1],255*_t[2]);return Mt[2]+=Tt,Mt[2]>1?Mt[2]=1:Mt[2]<0&&(Mt[2]=0),HSVtoRGB(Mt[0],Mt[1],Mt[2])}function addHueToRGB(_t,Tt){var Mt=RGBtoHSV(255*_t[0],255*_t[1],255*_t[2]);return Mt[0]+=Tt/360,Mt[0]>1?Mt[0]-=1:Mt[0]<0&&(Mt[0]+=1),HSVtoRGB(Mt[0],Mt[1],Mt[2])}var rgbToHex=function(){var _t,Tt,Mt=[];for(_t=0;_t<256;_t+=1)Tt=_t.toString(16),Mt[_t]=Tt.length===1?"0"+Tt:Tt;return function(Pt,Ft,Dt){return Pt<0&&(Pt=0),Ft<0&&(Ft=0),Dt<0&&(Dt=0),"#"+Mt[Pt]+Mt[Ft]+Mt[Dt]}}(),setSubframeEnabled=function(_t){subframeEnabled=!!_t},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(_t){expressionsPlugin=_t},getExpressionsPlugin=function(){return expressionsPlugin},setDefaultCurveSegments=function(_t){defaultCurveSegments=_t},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(_t){idPrefix=_t};function createNS(_t){return document.createElementNS(svgNS,_t)}function _typeof$5(_t){return(_typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tt){return typeof Tt}:function(Tt){return Tt&&typeof Symbol=="function"&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt})(_t)}var dataManager=function(){var _t,Tt,Mt=1,Pt=[],Ft={onmessage:function(){},postMessage:function(zt){_t({data:zt})}},Dt={postMessage:function(zt){Ft.onmessage({data:zt})}};function Nt(){Tt||((Tt=function(zt){if(window.Worker&&window.Blob&&getWebWorker()){var Xt=new Blob(["var _workerSelf = self; self.onmessage = ",zt.toString()],{type:"text/javascript"}),Ht=URL.createObjectURL(Xt);return new Worker(Ht)}return _t=zt,Ft}(function(zt){if(Dt.dataManager||(Dt.dataManager=function(){function Ht(dr,hr){var gr,pr,mr,wr,br,_r,Mr=dr.length;for(pr=0;pr<Mr;pr+=1)if("ks"in(gr=dr[pr])&&!gr.completed){if(gr.completed=!0,gr.tt&&(dr[pr-1].td=gr.tt),gr.hasMask){var Ar=gr.masksProperties;for(wr=Ar.length,mr=0;mr<wr;mr+=1)if(Ar[mr].pt.k.i)Zt(Ar[mr].pt.k);else for(_r=Ar[mr].pt.k.length,br=0;br<_r;br+=1)Ar[mr].pt.k[br].s&&Zt(Ar[mr].pt.k[br].s[0]),Ar[mr].pt.k[br].e&&Zt(Ar[mr].pt.k[br].e[0])}gr.ty===0?(gr.layers=Wt(gr.refId,hr),Ht(gr.layers,hr)):gr.ty===4?Qt(gr.shapes):gr.ty===5&&or(gr)}}function Wt(dr,hr){var gr=function(pr,mr){for(var wr=0,br=mr.length;wr<br;){if(mr[wr].id===pr)return mr[wr];wr+=1}return null}(dr,hr);return gr?gr.layers.__used?JSON.parse(JSON.stringify(gr.layers)):(gr.layers.__used=!0,gr.layers):null}function Qt(dr){var hr,gr,pr;for(hr=dr.length-1;hr>=0;hr-=1)if(dr[hr].ty==="sh")if(dr[hr].ks.k.i)Zt(dr[hr].ks.k);else for(pr=dr[hr].ks.k.length,gr=0;gr<pr;gr+=1)dr[hr].ks.k[gr].s&&Zt(dr[hr].ks.k[gr].s[0]),dr[hr].ks.k[gr].e&&Zt(dr[hr].ks.k[gr].e[0]);else dr[hr].ty==="gr"&&Qt(dr[hr].it)}function Zt(dr){var hr,gr=dr.i.length;for(hr=0;hr<gr;hr+=1)dr.i[hr][0]+=dr.v[hr][0],dr.i[hr][1]+=dr.v[hr][1],dr.o[hr][0]+=dr.v[hr][0],dr.o[hr][1]+=dr.v[hr][1]}function Kt(dr,hr){var gr=hr?hr.split("."):[100,100,100];return dr[0]>gr[0]||!(gr[0]>dr[0])&&(dr[1]>gr[1]||!(gr[1]>dr[1])&&(dr[2]>gr[2]||!(gr[2]>dr[2])&&null))}var er,Yt=function(){var dr=[4,4,14];function hr(gr){var pr,mr,wr,br=gr.length;for(pr=0;pr<br;pr+=1)gr[pr].ty===5&&(mr=gr[pr],wr=void 0,wr=mr.t.d,mr.t.d={k:[{s:wr,t:0}]})}return function(gr){if(Kt(dr,gr.v)&&(hr(gr.layers),gr.assets)){var pr,mr=gr.assets.length;for(pr=0;pr<mr;pr+=1)gr.assets[pr].layers&&hr(gr.assets[pr].layers)}}}(),rr=(er=[4,7,99],function(dr){if(dr.chars&&!Kt(er,dr.v)){var hr,gr=dr.chars.length;for(hr=0;hr<gr;hr+=1){var pr=dr.chars[hr];pr.data&&pr.data.shapes&&(Qt(pr.data.shapes),pr.data.ip=0,pr.data.op=99999,pr.data.st=0,pr.data.sr=1,pr.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},dr.chars[hr].t||(pr.data.shapes.push({ty:"no"}),pr.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),ir=function(){var dr=[5,7,15];function hr(gr){var pr,mr,wr,br=gr.length;for(pr=0;pr<br;pr+=1)gr[pr].ty===5&&(mr=gr[pr],wr=void 0,typeof(wr=mr.t.p).a=="number"&&(wr.a={a:0,k:wr.a}),typeof wr.p=="number"&&(wr.p={a:0,k:wr.p}),typeof wr.r=="number"&&(wr.r={a:0,k:wr.r}))}return function(gr){if(Kt(dr,gr.v)&&(hr(gr.layers),gr.assets)){var pr,mr=gr.assets.length;for(pr=0;pr<mr;pr+=1)gr.assets[pr].layers&&hr(gr.assets[pr].layers)}}}(),nr=function(){var dr=[4,1,9];function hr(pr){var mr,wr,br,_r=pr.length;for(mr=0;mr<_r;mr+=1)if(pr[mr].ty==="gr")hr(pr[mr].it);else if(pr[mr].ty==="fl"||pr[mr].ty==="st")if(pr[mr].c.k&&pr[mr].c.k[0].i)for(br=pr[mr].c.k.length,wr=0;wr<br;wr+=1)pr[mr].c.k[wr].s&&(pr[mr].c.k[wr].s[0]/=255,pr[mr].c.k[wr].s[1]/=255,pr[mr].c.k[wr].s[2]/=255,pr[mr].c.k[wr].s[3]/=255),pr[mr].c.k[wr].e&&(pr[mr].c.k[wr].e[0]/=255,pr[mr].c.k[wr].e[1]/=255,pr[mr].c.k[wr].e[2]/=255,pr[mr].c.k[wr].e[3]/=255);else pr[mr].c.k[0]/=255,pr[mr].c.k[1]/=255,pr[mr].c.k[2]/=255,pr[mr].c.k[3]/=255}function gr(pr){var mr,wr=pr.length;for(mr=0;mr<wr;mr+=1)pr[mr].ty===4&&hr(pr[mr].shapes)}return function(pr){if(Kt(dr,pr.v)&&(gr(pr.layers),pr.assets)){var mr,wr=pr.assets.length;for(mr=0;mr<wr;mr+=1)pr.assets[mr].layers&&gr(pr.assets[mr].layers)}}}(),ar=function(){var dr=[4,4,18];function hr(pr){var mr,wr,br;for(mr=pr.length-1;mr>=0;mr-=1)if(pr[mr].ty==="sh")if(pr[mr].ks.k.i)pr[mr].ks.k.c=pr[mr].closed;else for(br=pr[mr].ks.k.length,wr=0;wr<br;wr+=1)pr[mr].ks.k[wr].s&&(pr[mr].ks.k[wr].s[0].c=pr[mr].closed),pr[mr].ks.k[wr].e&&(pr[mr].ks.k[wr].e[0].c=pr[mr].closed);else pr[mr].ty==="gr"&&hr(pr[mr].it)}function gr(pr){var mr,wr,br,_r,Mr,Ar,xr=pr.length;for(wr=0;wr<xr;wr+=1){if((mr=pr[wr]).hasMask){var yr=mr.masksProperties;for(_r=yr.length,br=0;br<_r;br+=1)if(yr[br].pt.k.i)yr[br].pt.k.c=yr[br].cl;else for(Ar=yr[br].pt.k.length,Mr=0;Mr<Ar;Mr+=1)yr[br].pt.k[Mr].s&&(yr[br].pt.k[Mr].s[0].c=yr[br].cl),yr[br].pt.k[Mr].e&&(yr[br].pt.k[Mr].e[0].c=yr[br].cl)}mr.ty===4&&hr(mr.shapes)}}return function(pr){if(Kt(dr,pr.v)&&(gr(pr.layers),pr.assets)){var mr,wr=pr.assets.length;for(mr=0;mr<wr;mr+=1)pr.assets[mr].layers&&gr(pr.assets[mr].layers)}}}();function or(dr){dr.t.a.length===0&&dr.t.p}var ur={completeData:function(dr){dr.__complete||(nr(dr),Yt(dr),rr(dr),ir(dr),ar(dr),Ht(dr.layers,dr.assets),function(hr,gr){if(hr){var pr=0,mr=hr.length;for(pr=0;pr<mr;pr+=1)hr[pr].t===1&&(hr[pr].data.layers=Wt(hr[pr].data.refId,gr),Ht(hr[pr].data.layers,gr))}}(dr.chars,dr.assets),dr.__complete=!0)}};return ur.checkColors=nr,ur.checkChars=rr,ur.checkPathProperties=ir,ur.checkShapes=ar,ur.completeLayers=Ht,ur}()),Dt.assetLoader||(Dt.assetLoader=function(){function Ht(Wt){var Qt=Wt.getResponseHeader("content-type");return Qt&&Wt.responseType==="json"&&Qt.indexOf("json")!==-1||Wt.response&&_typeof$5(Wt.response)==="object"?Wt.response:Wt.response&&typeof Wt.response=="string"?JSON.parse(Wt.response):Wt.responseText?JSON.parse(Wt.responseText):null}return{load:function(Wt,Qt,Zt,Kt){var er,Yt=new XMLHttpRequest;try{Yt.responseType="json"}catch{}Yt.onreadystatechange=function(){if(Yt.readyState===4)if(Yt.status===200)er=Ht(Yt),Zt(er);else try{er=Ht(Yt),Zt(er)}catch(rr){Kt&&Kt(rr)}};try{Yt.open("GET",Wt,!0)}catch{Yt.open("GET",Qt+"/"+Wt,!0)}Yt.send()}}}()),zt.data.type==="loadAnimation")Dt.assetLoader.load(zt.data.path,zt.data.fullPath,function(Ht){Dt.dataManager.completeData(Ht),Dt.postMessage({id:zt.data.id,payload:Ht,status:"success"})},function(){Dt.postMessage({id:zt.data.id,status:"error"})});else if(zt.data.type==="complete"){var Xt=zt.data.animation;Dt.dataManager.completeData(Xt),Dt.postMessage({id:zt.data.id,payload:Xt,status:"success"})}else zt.data.type==="loadData"&&Dt.assetLoader.load(zt.data.path,zt.data.fullPath,function(Ht){Dt.postMessage({id:zt.data.id,payload:Ht,status:"success"})},function(){Dt.postMessage({id:zt.data.id,status:"error"})})})).onmessage=function(zt){var Xt=zt.data,Ht=Xt.id,Wt=Pt[Ht];Pt[Ht]=null,Xt.status==="success"?Wt.onComplete(Xt.payload):Wt.onError&&Wt.onError()})}function Vt(zt,Xt){var Ht="processId_"+(Mt+=1);return Pt[Ht]={onComplete:zt,onError:Xt},Ht}return{loadAnimation:function(zt,Xt,Ht){Nt();var Wt=Vt(Xt,Ht);Tt.postMessage({type:"loadAnimation",path:zt,fullPath:window.location.origin+window.location.pathname,id:Wt})},loadData:function(zt,Xt,Ht){Nt();var Wt=Vt(Xt,Ht);Tt.postMessage({type:"loadData",path:zt,fullPath:window.location.origin+window.location.pathname,id:Wt})},completeAnimation:function(zt,Xt,Ht){Nt();var Wt=Vt(Xt,Ht);Tt.postMessage({type:"complete",animation:zt,id:Wt})}}}(),ImagePreloader=function(){var _t=function(){var Vt=createTag("canvas");Vt.width=1,Vt.height=1;var zt=Vt.getContext("2d");return zt.fillStyle="rgba(0,0,0,0)",zt.fillRect(0,0,1,1),Vt}();function Tt(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function Mt(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function Pt(Vt,zt,Xt){var Ht="";if(Vt.e)Ht=Vt.p;else if(zt){var Wt=Vt.p;Wt.indexOf("images/")!==-1&&(Wt=Wt.split("/")[1]),Ht=zt+Wt}else Ht=Xt,Ht+=Vt.u?Vt.u:"",Ht+=Vt.p;return Ht}function Ft(Vt){var zt=0,Xt=setInterval(function(){(Vt.getBBox().width||zt>500)&&(this._imageLoaded(),clearInterval(Xt)),zt+=1}.bind(this),50)}function Dt(Vt){var zt={assetData:Vt},Xt=Pt(Vt,this.assetsPath,this.path);return dataManager.loadData(Xt,function(Ht){zt.img=Ht,this._footageLoaded()}.bind(this),function(){zt.img={},this._footageLoaded()}.bind(this)),zt}function Nt(){this._imageLoaded=Tt.bind(this),this._footageLoaded=Mt.bind(this),this.testImageLoaded=Ft.bind(this),this.createFootageData=Dt.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Nt.prototype={loadAssets:function(Vt,zt){var Xt;this.imagesLoadedCb=zt;var Ht=Vt.length;for(Xt=0;Xt<Ht;Xt+=1)Vt[Xt].layers||(Vt[Xt].t&&Vt[Xt].t!=="seq"?Vt[Xt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Vt[Xt]))):(this.totalImages+=1,this.images.push(this._createImageData(Vt[Xt]))))},setAssetsPath:function(Vt){this.assetsPath=Vt||""},setPath:function(Vt){this.path=Vt||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(Vt){for(var zt=0,Xt=this.images.length;zt<Xt;){if(this.images[zt].assetData===Vt)return this.images[zt].img;zt+=1}return null},createImgData:function(Vt){var zt=Pt(Vt,this.assetsPath,this.path),Xt=createTag("img");Xt.crossOrigin="anonymous",Xt.addEventListener("load",this._imageLoaded,!1),Xt.addEventListener("error",function(){Ht.img=_t,this._imageLoaded()}.bind(this),!1),Xt.src=zt;var Ht={img:Xt,assetData:Vt};return Ht},createImageData:function(Vt){var zt=Pt(Vt,this.assetsPath,this.path),Xt=createNS("image");isSafari?this.testImageLoaded(Xt):Xt.addEventListener("load",this._imageLoaded,!1),Xt.addEventListener("error",function(){Ht.img=_t,this._imageLoaded()}.bind(this),!1),Xt.setAttributeNS("http://www.w3.org/1999/xlink","href",zt),this._elementHelper.append?this._elementHelper.append(Xt):this._elementHelper.appendChild(Xt);var Ht={img:Xt,assetData:Vt};return Ht},imageLoaded:Tt,footageLoaded:Mt,setCacheType:function(Vt,zt){Vt==="svg"?(this._elementHelper=zt,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},Nt}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(_t,Tt){if(this._cbs[_t])for(var Mt=this._cbs[_t],Pt=0;Pt<Mt.length;Pt+=1)Mt[Pt](Tt)},addEventListener:function(_t,Tt){return this._cbs[_t]||(this._cbs[_t]=[]),this._cbs[_t].push(Tt),function(){this.removeEventListener(_t,Tt)}.bind(this)},removeEventListener:function(_t,Tt){if(Tt){if(this._cbs[_t]){for(var Mt=0,Pt=this._cbs[_t].length;Mt<Pt;)this._cbs[_t][Mt]===Tt&&(this._cbs[_t].splice(Mt,1),Mt-=1,Pt-=1),Mt+=1;this._cbs[_t].length||(this._cbs[_t]=null)}}else this._cbs[_t]=null}};var markerParser=function(){function _t(Tt){for(var Mt,Pt=Tt.split(`\r
`),Ft={},Dt=0,Nt=0;Nt<Pt.length;Nt+=1)(Mt=Pt[Nt].split(":")).length===2&&(Ft[Mt[0]]=Mt[1].trim(),Dt+=1);if(Dt===0)throw new Error;return Ft}return function(Tt){for(var Mt=[],Pt=0;Pt<Tt.length;Pt+=1){var Ft=Tt[Pt],Dt={time:Ft.tm,duration:Ft.dr};try{Dt.payload=JSON.parse(Tt[Pt].cm)}catch{try{Dt.payload=_t(Tt[Pt].cm)}catch{Dt.payload={name:Tt[Pt]}}}Mt.push(Dt)}return Mt}}(),ProjectInterface=function(){function _t(Tt){this.compositions.push(Tt)}return function(){function Tt(Mt){for(var Pt=0,Ft=this.compositions.length;Pt<Ft;){if(this.compositions[Pt].data&&this.compositions[Pt].data.nm===Mt)return this.compositions[Pt].prepareFrame&&this.compositions[Pt].data.xt&&this.compositions[Pt].prepareFrame(this.currentFrame),this.compositions[Pt].compInterface;Pt+=1}return null}return Tt.compositions=[],Tt.currentFrame=0,Tt.registerComposition=_t,Tt}}(),renderers={},registerRenderer=function(_t,Tt){renderers[_t]=Tt};function getRenderer(_t){return renderers[_t]}function _typeof$4(_t){return(_typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tt){return typeof Tt}:function(Tt){return Tt&&typeof Symbol=="function"&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt})(_t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this)};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(_t){(_t.wrapper||_t.container)&&(this.wrapper=_t.wrapper||_t.container);var Tt="svg";_t.animType?Tt=_t.animType:_t.renderer&&(Tt=_t.renderer);var Mt=getRenderer(Tt);this.renderer=new Mt(this,_t.rendererSettings),this.imagePreloader.setCacheType(Tt,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=Tt,_t.loop===""||_t.loop===null||_t.loop===void 0||_t.loop===!0?this.loop=!0:_t.loop===!1?this.loop=!1:this.loop=parseInt(_t.loop,10),this.autoplay=!("autoplay"in _t)||_t.autoplay,this.name=_t.name?_t.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(_t,"autoloadSegments")||_t.autoloadSegments,this.assetsPath=_t.assetsPath,this.initialSegment=_t.initialSegment,_t.audioFactory&&this.audioController.setAudioFactory(_t.audioFactory),_t.animationData?this.setupAnimation(_t.animationData):_t.path&&(_t.path.lastIndexOf("\\")!==-1?this.path=_t.path.substr(0,_t.path.lastIndexOf("\\")+1):this.path=_t.path.substr(0,_t.path.lastIndexOf("/")+1),this.fileName=_t.path.substr(_t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(_t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(_t){dataManager.completeAnimation(_t,this.configAnimation)},AnimationItem.prototype.setData=function(_t,Tt){Tt&&_typeof$4(Tt)!=="object"&&(Tt=JSON.parse(Tt));var Mt={wrapper:_t,animationData:Tt},Pt=_t.attributes;Mt.path=Pt.getNamedItem("data-animation-path")?Pt.getNamedItem("data-animation-path").value:Pt.getNamedItem("data-bm-path")?Pt.getNamedItem("data-bm-path").value:Pt.getNamedItem("bm-path")?Pt.getNamedItem("bm-path").value:"",Mt.animType=Pt.getNamedItem("data-anim-type")?Pt.getNamedItem("data-anim-type").value:Pt.getNamedItem("data-bm-type")?Pt.getNamedItem("data-bm-type").value:Pt.getNamedItem("bm-type")?Pt.getNamedItem("bm-type").value:Pt.getNamedItem("data-bm-renderer")?Pt.getNamedItem("data-bm-renderer").value:Pt.getNamedItem("bm-renderer")?Pt.getNamedItem("bm-renderer").value:"canvas";var Ft=Pt.getNamedItem("data-anim-loop")?Pt.getNamedItem("data-anim-loop").value:Pt.getNamedItem("data-bm-loop")?Pt.getNamedItem("data-bm-loop").value:Pt.getNamedItem("bm-loop")?Pt.getNamedItem("bm-loop").value:"";Ft==="false"?Mt.loop=!1:Ft==="true"?Mt.loop=!0:Ft!==""&&(Mt.loop=parseInt(Ft,10));var Dt=Pt.getNamedItem("data-anim-autoplay")?Pt.getNamedItem("data-anim-autoplay").value:Pt.getNamedItem("data-bm-autoplay")?Pt.getNamedItem("data-bm-autoplay").value:!Pt.getNamedItem("bm-autoplay")||Pt.getNamedItem("bm-autoplay").value;Mt.autoplay=Dt!=="false",Mt.name=Pt.getNamedItem("data-name")?Pt.getNamedItem("data-name").value:Pt.getNamedItem("data-bm-name")?Pt.getNamedItem("data-bm-name").value:Pt.getNamedItem("bm-name")?Pt.getNamedItem("bm-name").value:"",(Pt.getNamedItem("data-anim-prerender")?Pt.getNamedItem("data-anim-prerender").value:Pt.getNamedItem("data-bm-prerender")?Pt.getNamedItem("data-bm-prerender").value:Pt.getNamedItem("bm-prerender")?Pt.getNamedItem("bm-prerender").value:"")==="false"&&(Mt.prerender=!1),this.setParams(Mt)},AnimationItem.prototype.includeLayers=function(_t){_t.op>this.animationData.op&&(this.animationData.op=_t.op,this.totalFrames=Math.floor(_t.op-this.animationData.ip));var Tt,Mt,Pt=this.animationData.layers,Ft=Pt.length,Dt=_t.layers,Nt=Dt.length;for(Mt=0;Mt<Nt;Mt+=1)for(Tt=0;Tt<Ft;){if(Pt[Tt].id===Dt[Mt].id){Pt[Tt]=Dt[Mt];break}Tt+=1}if((_t.chars||_t.fonts)&&(this.renderer.globalData.fontManager.addChars(_t.chars),this.renderer.globalData.fontManager.addFonts(_t.fonts,this.renderer.globalData.defs)),_t.assets)for(Ft=_t.assets.length,Tt=0;Tt<Ft;Tt+=1)this.animationData.assets.push(_t.assets[Tt]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(_t){this.animationData=_t;var Tt=getExpressionsPlugin();Tt&&Tt.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var _t=this.animationData.segments;if(!_t||_t.length===0||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var Tt=_t.shift();this.timeCompleted=Tt.time*this.frameRate;var Mt=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(Mt,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(_t){if(this.renderer)try{this.animationData=_t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(_t),_t.assets||(_t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(_t.assets),this.markers=markerParser(_t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(Tt){this.triggerConfigError(Tt)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var _t=getExpressionsPlugin();_t&&_t.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(_t){this.isSubframeEnabled=!!_t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(this.isLoaded!==!1&&this.renderer)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(_t){this.triggerRenderFrameError(_t)}},AnimationItem.prototype.play=function(_t){_t&&this.name!==_t||this.isPaused===!0&&(this.isPaused=!1,this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(_t){_t&&this.name!==_t||this.isPaused===!1&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(_t){_t&&this.name!==_t||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(_t){_t&&this.name!==_t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(_t){for(var Tt,Mt=0;Mt<this.markers.length;Mt+=1)if((Tt=this.markers[Mt]).payload&&Tt.payload.name===_t)return Tt;return null},AnimationItem.prototype.goToAndStop=function(_t,Tt,Mt){if(!Mt||this.name===Mt){var Pt=Number(_t);if(isNaN(Pt)){var Ft=this.getMarkerData(_t);Ft&&this.goToAndStop(Ft.time,!0)}else Tt?this.setCurrentRawFrameValue(_t):this.setCurrentRawFrameValue(_t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(_t,Tt,Mt){if(!Mt||this.name===Mt){var Pt=Number(_t);if(isNaN(Pt)){var Ft=this.getMarkerData(_t);Ft&&(Ft.duration?this.playSegments([Ft.time,Ft.time+Ft.duration],!0):this.goToAndStop(Ft.time,!0))}else this.goToAndStop(Pt,Tt,Mt);this.play()}},AnimationItem.prototype.advanceTime=function(_t){if(this.isPaused!==!0&&this.isLoaded!==!1){var Tt=this.currentRawFrame+_t*this.frameModifier,Mt=!1;Tt>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?Tt>=this.totalFrames?(this.playCount+=1,this.checkSegments(Tt%this.totalFrames)||(this.setCurrentRawFrameValue(Tt%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(Tt):this.checkSegments(Tt>this.totalFrames?Tt%this.totalFrames:0)||(Mt=!0,Tt=this.totalFrames-1):Tt<0?this.checkSegments(Tt%this.totalFrames)||(!this.loop||this.playCount--<=0&&this.loop!==!0?(Mt=!0,Tt=0):(this.setCurrentRawFrameValue(this.totalFrames+Tt%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(Tt),Mt&&(this.setCurrentRawFrameValue(Tt),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(_t,Tt){this.playCount=0,_t[1]<_t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=_t[0]-_t[1],this.timeCompleted=this.totalFrames,this.firstFrame=_t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-Tt)):_t[1]>_t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=_t[1]-_t[0],this.timeCompleted=this.totalFrames,this.firstFrame=_t[0],this.setCurrentRawFrameValue(.001+Tt)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(_t,Tt){var Mt=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<_t?Mt=_t:this.currentRawFrame+this.firstFrame>Tt&&(Mt=Tt-_t)),this.firstFrame=_t,this.totalFrames=Tt-_t,this.timeCompleted=this.totalFrames,Mt!==-1&&this.goToAndStop(Mt,!0)},AnimationItem.prototype.playSegments=function(_t,Tt){if(Tt&&(this.segments.length=0),_typeof$4(_t[0])==="object"){var Mt,Pt=_t.length;for(Mt=0;Mt<Pt;Mt+=1)this.segments.push(_t[Mt])}else this.segments.push(_t);this.segments.length&&Tt&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(_t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),_t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(_t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),_t),!0)},AnimationItem.prototype.destroy=function(_t){_t&&this.name!==_t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.renderer=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(_t){this.currentRawFrame=_t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(_t){this.playSpeed=_t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(_t){this.playDirection=_t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setVolume=function(_t,Tt){Tt&&this.name!==Tt||this.audioController.setVolume(_t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(_t){_t&&this.name!==_t||this.audioController.mute()},AnimationItem.prototype.unmute=function(_t){_t&&this.name!==_t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(_t){var Tt="";if(_t.e)Tt=_t.p;else if(this.assetsPath){var Mt=_t.p;Mt.indexOf("images/")!==-1&&(Mt=Mt.split("/")[1]),Tt=this.assetsPath+Mt}else Tt=this.path,Tt+=_t.u?_t.u:"",Tt+=_t.p;return Tt},AnimationItem.prototype.getAssetData=function(_t){for(var Tt=0,Mt=this.assets.length;Tt<Mt;){if(_t===this.assets[Tt].id)return this.assets[Tt];Tt+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(_t){return _t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(_t){if(this._cbs&&this._cbs[_t])switch(_t){case"enterFrame":case"drawnFrame":this.triggerEvent(_t,new BMEnterFrameEvent(_t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(_t,new BMCompleteLoopEvent(_t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(_t,new BMCompleteEvent(_t,this.frameMult));break;case"segmentStart":this.triggerEvent(_t,new BMSegmentStartEvent(_t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(_t,new BMDestroyEvent(_t,this));break;default:this.triggerEvent(_t)}_t==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(_t,this.currentFrame,this.totalFrames,this.frameMult)),_t==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(_t,this.loop,this.playCount,this.frameMult)),_t==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(_t,this.frameMult)),_t==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(_t,this.firstFrame,this.totalFrames)),_t==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(_t,this))},AnimationItem.prototype.triggerRenderFrameError=function(_t){var Tt=new BMRenderFrameErrorEvent(_t,this.currentFrame);this.triggerEvent("error",Tt),this.onError&&this.onError.call(this,Tt)},AnimationItem.prototype.triggerConfigError=function(_t){var Tt=new BMConfigErrorEvent(_t,this.currentFrame);this.triggerEvent("error",Tt),this.onError&&this.onError.call(this,Tt)};var animationManager=function(){var _t={},Tt=[],Mt=0,Pt=0,Ft=0,Dt=!0,Nt=!1;function Vt(er){for(var Yt=0,rr=er.target;Yt<Pt;)Tt[Yt].animation===rr&&(Tt.splice(Yt,1),Yt-=1,Pt-=1,rr.isPaused||Ht()),Yt+=1}function zt(er,Yt){if(!er)return null;for(var rr=0;rr<Pt;){if(Tt[rr].elem===er&&Tt[rr].elem!==null)return Tt[rr].animation;rr+=1}var ir=new AnimationItem;return Wt(ir,er),ir.setData(er,Yt),ir}function Xt(){Ft+=1,Kt()}function Ht(){Ft-=1}function Wt(er,Yt){er.addEventListener("destroy",Vt),er.addEventListener("_active",Xt),er.addEventListener("_idle",Ht),Tt.push({elem:Yt,animation:er}),Pt+=1}function Qt(er){var Yt,rr=er-Mt;for(Yt=0;Yt<Pt;Yt+=1)Tt[Yt].animation.advanceTime(rr);Mt=er,Ft&&!Nt?window.requestAnimationFrame(Qt):Dt=!0}function Zt(er){Mt=er,window.requestAnimationFrame(Qt)}function Kt(){!Nt&&Ft&&Dt&&(window.requestAnimationFrame(Zt),Dt=!1)}return _t.registerAnimation=zt,_t.loadAnimation=function(er){var Yt=new AnimationItem;return Wt(Yt,null),Yt.setParams(er),Yt},_t.setSpeed=function(er,Yt){var rr;for(rr=0;rr<Pt;rr+=1)Tt[rr].animation.setSpeed(er,Yt)},_t.setDirection=function(er,Yt){var rr;for(rr=0;rr<Pt;rr+=1)Tt[rr].animation.setDirection(er,Yt)},_t.play=function(er){var Yt;for(Yt=0;Yt<Pt;Yt+=1)Tt[Yt].animation.play(er)},_t.pause=function(er){var Yt;for(Yt=0;Yt<Pt;Yt+=1)Tt[Yt].animation.pause(er)},_t.stop=function(er){var Yt;for(Yt=0;Yt<Pt;Yt+=1)Tt[Yt].animation.stop(er)},_t.togglePause=function(er){var Yt;for(Yt=0;Yt<Pt;Yt+=1)Tt[Yt].animation.togglePause(er)},_t.searchAnimations=function(er,Yt,rr){var ir,nr=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),ar=nr.length;for(ir=0;ir<ar;ir+=1)rr&&nr[ir].setAttribute("data-bm-type",rr),zt(nr[ir],er);if(Yt&&ar===0){rr||(rr="svg");var or=document.getElementsByTagName("body")[0];or.innerText="";var ur=createTag("div");ur.style.width="100%",ur.style.height="100%",ur.setAttribute("data-bm-type",rr),or.appendChild(ur),zt(ur,er)}},_t.resize=function(){var er;for(er=0;er<Pt;er+=1)Tt[er].animation.resize()},_t.goToAndStop=function(er,Yt,rr){var ir;for(ir=0;ir<Pt;ir+=1)Tt[ir].animation.goToAndStop(er,Yt,rr)},_t.destroy=function(er){var Yt;for(Yt=Pt-1;Yt>=0;Yt-=1)Tt[Yt].animation.destroy(er)},_t.freeze=function(){Nt=!0},_t.unfreeze=function(){Nt=!1,Kt()},_t.setVolume=function(er,Yt){var rr;for(rr=0;rr<Pt;rr+=1)Tt[rr].animation.setVolume(er,Yt)},_t.mute=function(er){var Yt;for(Yt=0;Yt<Pt;Yt+=1)Tt[Yt].animation.mute(er)},_t.unmute=function(er){var Yt;for(Yt=0;Yt<Pt;Yt+=1)Tt[Yt].animation.unmute(er)},_t.getRegisteredAnimations=function(){var er,Yt=Tt.length,rr=[];for(er=0;er<Yt;er+=1)rr.push(Tt[er].animation);return rr},_t}(),BezierFactory=function(){var _t={getBezierEasing:function(Xt,Ht,Wt,Qt,Zt){var Kt=Zt||("bez_"+Xt+"_"+Ht+"_"+Wt+"_"+Qt).replace(/\./g,"p");if(Tt[Kt])return Tt[Kt];var er=new zt([Xt,Ht,Wt,Qt]);return Tt[Kt]=er,er}},Tt={},Mt=typeof Float32Array=="function";function Pt(Xt,Ht){return 1-3*Ht+3*Xt}function Ft(Xt,Ht){return 3*Ht-6*Xt}function Dt(Xt){return 3*Xt}function Nt(Xt,Ht,Wt){return((Pt(Ht,Wt)*Xt+Ft(Ht,Wt))*Xt+Dt(Ht))*Xt}function Vt(Xt,Ht,Wt){return 3*Pt(Ht,Wt)*Xt*Xt+2*Ft(Ht,Wt)*Xt+Dt(Ht)}function zt(Xt){this._p=Xt,this._mSampleValues=Mt?new Float32Array(11):new Array(11),this._precomputed=!1,this.get=this.get.bind(this)}return zt.prototype={get:function(Xt){var Ht=this._p[0],Wt=this._p[1],Qt=this._p[2],Zt=this._p[3];return this._precomputed||this._precompute(),Ht===Wt&&Qt===Zt?Xt:Xt===0?0:Xt===1?1:Nt(this._getTForX(Xt),Wt,Zt)},_precompute:function(){var Xt=this._p[0],Ht=this._p[1],Wt=this._p[2],Qt=this._p[3];this._precomputed=!0,Xt===Ht&&Wt===Qt||this._calcSampleValues()},_calcSampleValues:function(){for(var Xt=this._p[0],Ht=this._p[2],Wt=0;Wt<11;++Wt)this._mSampleValues[Wt]=Nt(.1*Wt,Xt,Ht)},_getTForX:function(Xt){for(var Ht=this._p[0],Wt=this._p[2],Qt=this._mSampleValues,Zt=0,Kt=1;Kt!==10&&Qt[Kt]<=Xt;++Kt)Zt+=.1;var er=Zt+.1*((Xt-Qt[--Kt])/(Qt[Kt+1]-Qt[Kt])),Yt=Vt(er,Ht,Wt);return Yt>=.001?function(rr,ir,nr,ar){for(var or=0;or<4;++or){var ur=Vt(ir,nr,ar);if(ur===0)return ir;ir-=(Nt(ir,nr,ar)-rr)/ur}return ir}(Xt,er,Ht,Wt):Yt===0?er:function(rr,ir,nr,ar,or){var ur,dr,hr=0;do(ur=Nt(dr=ir+(nr-ir)/2,ar,or)-rr)>0?nr=dr:ir=dr;while(Math.abs(ur)>1e-7&&++hr<10);return dr}(Xt,Zt,Zt+.1,Ht,Wt)}},_t}(),pooling={double:function(_t){return _t.concat(createSizedArray(_t.length))}},poolFactory=function(_t,Tt,Mt){var Pt=0,Ft=_t,Dt=createSizedArray(Ft);return{newElement:function(){return Pt?Dt[Pt-=1]:Tt()},release:function(Nt){Pt===Ft&&(Dt=pooling.double(Dt),Ft*=2),Mt&&Mt(Nt),Dt[Pt]=Nt,Pt+=1}}},bezierLengthPool=poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}),segmentsLengthPool=poolFactory(8,function(){return{lengths:[],totalLength:0}},function(_t){var Tt,Mt=_t.lengths.length;for(Tt=0;Tt<Mt;Tt+=1)bezierLengthPool.release(_t.lengths[Tt]);_t.lengths.length=0});function bezFunction(){var _t=Math;function Tt(Xt,Ht,Wt,Qt,Zt,Kt){var er=Xt*Qt+Ht*Zt+Wt*Kt-Zt*Qt-Kt*Xt-Wt*Ht;return er>-.001&&er<.001}var Mt=function(Xt,Ht,Wt,Qt){var Zt,Kt,er,Yt,rr,ir,nr=getDefaultCurveSegments(),ar=0,or=[],ur=[],dr=bezierLengthPool.newElement();for(er=Wt.length,Zt=0;Zt<nr;Zt+=1){for(rr=Zt/(nr-1),ir=0,Kt=0;Kt<er;Kt+=1)Yt=bmPow(1-rr,3)*Xt[Kt]+3*bmPow(1-rr,2)*rr*Wt[Kt]+3*(1-rr)*bmPow(rr,2)*Qt[Kt]+bmPow(rr,3)*Ht[Kt],or[Kt]=Yt,ur[Kt]!==null&&(ir+=bmPow(or[Kt]-ur[Kt],2)),ur[Kt]=or[Kt];ir&&(ar+=ir=bmSqrt(ir)),dr.percents[Zt]=rr,dr.lengths[Zt]=ar}return dr.addedLength=ar,dr};function Pt(Xt){this.segmentLength=0,this.points=new Array(Xt)}function Ft(Xt,Ht){this.partialLength=Xt,this.point=Ht}var Dt,Nt=(Dt={},function(Xt,Ht,Wt,Qt){var Zt=(Xt[0]+"_"+Xt[1]+"_"+Ht[0]+"_"+Ht[1]+"_"+Wt[0]+"_"+Wt[1]+"_"+Qt[0]+"_"+Qt[1]).replace(/\./g,"p");if(!Dt[Zt]){var Kt,er,Yt,rr,ir,nr,ar,or=getDefaultCurveSegments(),ur=0,dr=null;Xt.length===2&&(Xt[0]!==Ht[0]||Xt[1]!==Ht[1])&&Tt(Xt[0],Xt[1],Ht[0],Ht[1],Xt[0]+Wt[0],Xt[1]+Wt[1])&&Tt(Xt[0],Xt[1],Ht[0],Ht[1],Ht[0]+Qt[0],Ht[1]+Qt[1])&&(or=2);var hr=new Pt(or);for(Yt=Wt.length,Kt=0;Kt<or;Kt+=1){for(ar=createSizedArray(Yt),ir=Kt/(or-1),nr=0,er=0;er<Yt;er+=1)rr=bmPow(1-ir,3)*Xt[er]+3*bmPow(1-ir,2)*ir*(Xt[er]+Wt[er])+3*(1-ir)*bmPow(ir,2)*(Ht[er]+Qt[er])+bmPow(ir,3)*Ht[er],ar[er]=rr,dr!==null&&(nr+=bmPow(ar[er]-dr[er],2));ur+=nr=bmSqrt(nr),hr.points[Kt]=new Ft(nr,ar),dr=ar}hr.segmentLength=ur,Dt[Zt]=hr}return Dt[Zt]});function Vt(Xt,Ht){var Wt=Ht.percents,Qt=Ht.lengths,Zt=Wt.length,Kt=bmFloor((Zt-1)*Xt),er=Xt*Ht.addedLength,Yt=0;if(Kt===Zt-1||Kt===0||er===Qt[Kt])return Wt[Kt];for(var rr=Qt[Kt]>er?-1:1,ir=!0;ir;)if(Qt[Kt]<=er&&Qt[Kt+1]>er?(Yt=(er-Qt[Kt])/(Qt[Kt+1]-Qt[Kt]),ir=!1):Kt+=rr,Kt<0||Kt>=Zt-1){if(Kt===Zt-1)return Wt[Kt];ir=!1}return Wt[Kt]+(Wt[Kt+1]-Wt[Kt])*Yt}var zt=createTypedArray("float32",8);return{getSegmentsLength:function(Xt){var Ht,Wt=segmentsLengthPool.newElement(),Qt=Xt.c,Zt=Xt.v,Kt=Xt.o,er=Xt.i,Yt=Xt._length,rr=Wt.lengths,ir=0;for(Ht=0;Ht<Yt-1;Ht+=1)rr[Ht]=Mt(Zt[Ht],Zt[Ht+1],Kt[Ht],er[Ht+1]),ir+=rr[Ht].addedLength;return Qt&&Yt&&(rr[Ht]=Mt(Zt[Ht],Zt[0],Kt[Ht],er[0]),ir+=rr[Ht].addedLength),Wt.totalLength=ir,Wt},getNewSegment:function(Xt,Ht,Wt,Qt,Zt,Kt,er){Zt<0?Zt=0:Zt>1&&(Zt=1);var Yt,rr=Vt(Zt,er),ir=Vt(Kt=Kt>1?1:Kt,er),nr=Xt.length,ar=1-rr,or=1-ir,ur=ar*ar*ar,dr=rr*ar*ar*3,hr=rr*rr*ar*3,gr=rr*rr*rr,pr=ar*ar*or,mr=rr*ar*or+ar*rr*or+ar*ar*ir,wr=rr*rr*or+ar*rr*ir+rr*ar*ir,br=rr*rr*ir,_r=ar*or*or,Mr=rr*or*or+ar*ir*or+ar*or*ir,Ar=rr*ir*or+ar*ir*ir+rr*or*ir,xr=rr*ir*ir,yr=or*or*or,Er=ir*or*or+or*ir*or+or*or*ir,Cr=ir*ir*or+or*ir*ir+ir*or*ir,Dr=ir*ir*ir;for(Yt=0;Yt<nr;Yt+=1)zt[4*Yt]=_t.round(1e3*(ur*Xt[Yt]+dr*Wt[Yt]+hr*Qt[Yt]+gr*Ht[Yt]))/1e3,zt[4*Yt+1]=_t.round(1e3*(pr*Xt[Yt]+mr*Wt[Yt]+wr*Qt[Yt]+br*Ht[Yt]))/1e3,zt[4*Yt+2]=_t.round(1e3*(_r*Xt[Yt]+Mr*Wt[Yt]+Ar*Qt[Yt]+xr*Ht[Yt]))/1e3,zt[4*Yt+3]=_t.round(1e3*(yr*Xt[Yt]+Er*Wt[Yt]+Cr*Qt[Yt]+Dr*Ht[Yt]))/1e3;return zt},getPointInSegment:function(Xt,Ht,Wt,Qt,Zt,Kt){var er=Vt(Zt,Kt),Yt=1-er;return[_t.round(1e3*(Yt*Yt*Yt*Xt[0]+(er*Yt*Yt+Yt*er*Yt+Yt*Yt*er)*Wt[0]+(er*er*Yt+Yt*er*er+er*Yt*er)*Qt[0]+er*er*er*Ht[0]))/1e3,_t.round(1e3*(Yt*Yt*Yt*Xt[1]+(er*Yt*Yt+Yt*er*Yt+Yt*Yt*er)*Wt[1]+(er*er*Yt+Yt*er*er+er*Yt*er)*Qt[1]+er*er*er*Ht[1]))/1e3]},buildBezierData:Nt,pointOnLine2D:Tt,pointOnLine3D:function(Xt,Ht,Wt,Qt,Zt,Kt,er,Yt,rr){if(Wt===0&&Kt===0&&rr===0)return Tt(Xt,Ht,Qt,Zt,er,Yt);var ir,nr=_t.sqrt(_t.pow(Qt-Xt,2)+_t.pow(Zt-Ht,2)+_t.pow(Kt-Wt,2)),ar=_t.sqrt(_t.pow(er-Xt,2)+_t.pow(Yt-Ht,2)+_t.pow(rr-Wt,2)),or=_t.sqrt(_t.pow(er-Qt,2)+_t.pow(Yt-Zt,2)+_t.pow(rr-Kt,2));return(ir=nr>ar?nr>or?nr-ar-or:or-ar-nr:or>ar?or-ar-nr:ar-nr-or)>-1e-4&&ir<1e-4}}}var bez=bezFunction(),PropertyFactory=function(){var _t=initialDefaultFrame,Tt=Math.abs;function Mt(Qt,Zt){var Kt,er=this.offsetTime;this.propType==="multidimensional"&&(Kt=createTypedArray("float32",this.pv.length));for(var Yt,rr,ir,nr,ar,or,ur,dr,hr,gr=Zt.lastIndex,pr=gr,mr=this.keyframes.length-1,wr=!0;wr;){if(Yt=this.keyframes[pr],rr=this.keyframes[pr+1],pr===mr-1&&Qt>=rr.t-er){Yt.h&&(Yt=rr),gr=0;break}if(rr.t-er>Qt){gr=pr;break}pr<mr-1?pr+=1:(gr=0,wr=!1)}ir=this.keyframesMetadata[pr]||{};var br,_r=rr.t-er,Mr=Yt.t-er;if(Yt.to){ir.bezierData||(ir.bezierData=bez.buildBezierData(Yt.s,rr.s||Yt.e,Yt.to,Yt.ti));var Ar=ir.bezierData;if(Qt>=_r||Qt<Mr){var xr=Qt>=_r?Ar.points.length-1:0;for(ar=Ar.points[xr].point.length,nr=0;nr<ar;nr+=1)Kt[nr]=Ar.points[xr].point[nr]}else{ir.__fnct?hr=ir.__fnct:(hr=BezierFactory.getBezierEasing(Yt.o.x,Yt.o.y,Yt.i.x,Yt.i.y,Yt.n).get,ir.__fnct=hr),or=hr((Qt-Mr)/(_r-Mr));var yr,Er=Ar.segmentLength*or,Cr=Zt.lastFrame<Qt&&Zt._lastKeyframeIndex===pr?Zt._lastAddedLength:0;for(dr=Zt.lastFrame<Qt&&Zt._lastKeyframeIndex===pr?Zt._lastPoint:0,wr=!0,ur=Ar.points.length;wr;){if(Cr+=Ar.points[dr].partialLength,Er===0||or===0||dr===Ar.points.length-1){for(ar=Ar.points[dr].point.length,nr=0;nr<ar;nr+=1)Kt[nr]=Ar.points[dr].point[nr];break}if(Er>=Cr&&Er<Cr+Ar.points[dr+1].partialLength){for(yr=(Er-Cr)/Ar.points[dr+1].partialLength,ar=Ar.points[dr].point.length,nr=0;nr<ar;nr+=1)Kt[nr]=Ar.points[dr].point[nr]+(Ar.points[dr+1].point[nr]-Ar.points[dr].point[nr])*yr;break}dr<ur-1?dr+=1:wr=!1}Zt._lastPoint=dr,Zt._lastAddedLength=Cr-Ar.points[dr].partialLength,Zt._lastKeyframeIndex=pr}}else{var Dr,jr,Hr,zr,Qr;if(mr=Yt.s.length,br=rr.s||Yt.e,this.sh&&Yt.h!==1)Qt>=_r?(Kt[0]=br[0],Kt[1]=br[1],Kt[2]=br[2]):Qt<=Mr?(Kt[0]=Yt.s[0],Kt[1]=Yt.s[1],Kt[2]=Yt.s[2]):function(Xr,Br){var Ur=Br[0],Jr=Br[1],Zr=Br[2],pn=Br[3],_i=Math.atan2(2*Jr*pn-2*Ur*Zr,1-2*Jr*Jr-2*Zr*Zr),Rr=Math.asin(2*Ur*Jr+2*Zr*pn),Mn=Math.atan2(2*Ur*pn-2*Jr*Zr,1-2*Ur*Ur-2*Zr*Zr);Xr[0]=_i/degToRads,Xr[1]=Rr/degToRads,Xr[2]=Mn/degToRads}(Kt,function(Xr,Br,Ur){var Jr,Zr,pn,_i,Rr,Mn=[],ls=Xr[0],us=Xr[1],ss=Xr[2],kn=Xr[3],In=Br[0],_n=Br[1],Cn=Br[2],jn=Br[3];return(Zr=ls*In+us*_n+ss*Cn+kn*jn)<0&&(Zr=-Zr,In=-In,_n=-_n,Cn=-Cn,jn=-jn),1-Zr>1e-6?(Jr=Math.acos(Zr),pn=Math.sin(Jr),_i=Math.sin((1-Ur)*Jr)/pn,Rr=Math.sin(Ur*Jr)/pn):(_i=1-Ur,Rr=Ur),Mn[0]=_i*ls+Rr*In,Mn[1]=_i*us+Rr*_n,Mn[2]=_i*ss+Rr*Cn,Mn[3]=_i*kn+Rr*jn,Mn}(Pt(Yt.s),Pt(br),(Qt-Mr)/(_r-Mr)));else for(pr=0;pr<mr;pr+=1)Yt.h!==1&&(Qt>=_r?or=1:Qt<Mr?or=0:(Yt.o.x.constructor===Array?(ir.__fnct||(ir.__fnct=[]),ir.__fnct[pr]?hr=ir.__fnct[pr]:(Dr=Yt.o.x[pr]===void 0?Yt.o.x[0]:Yt.o.x[pr],jr=Yt.o.y[pr]===void 0?Yt.o.y[0]:Yt.o.y[pr],Hr=Yt.i.x[pr]===void 0?Yt.i.x[0]:Yt.i.x[pr],zr=Yt.i.y[pr]===void 0?Yt.i.y[0]:Yt.i.y[pr],hr=BezierFactory.getBezierEasing(Dr,jr,Hr,zr).get,ir.__fnct[pr]=hr)):ir.__fnct?hr=ir.__fnct:(Dr=Yt.o.x,jr=Yt.o.y,Hr=Yt.i.x,zr=Yt.i.y,hr=BezierFactory.getBezierEasing(Dr,jr,Hr,zr).get,Yt.keyframeMetadata=hr),or=hr((Qt-Mr)/(_r-Mr)))),br=rr.s||Yt.e,Qr=Yt.h===1?Yt.s[pr]:Yt.s[pr]+(br[pr]-Yt.s[pr])*or,this.propType==="multidimensional"?Kt[pr]=Qr:Kt=Qr}return Zt.lastIndex=gr,Kt}function Pt(Qt){var Zt=Qt[0]*degToRads,Kt=Qt[1]*degToRads,er=Qt[2]*degToRads,Yt=Math.cos(Zt/2),rr=Math.cos(Kt/2),ir=Math.cos(er/2),nr=Math.sin(Zt/2),ar=Math.sin(Kt/2),or=Math.sin(er/2);return[nr*ar*ir+Yt*rr*or,nr*rr*ir+Yt*ar*or,Yt*ar*ir-nr*rr*or,Yt*rr*ir-nr*ar*or]}function Ft(){var Qt=this.comp.renderedFrame-this.offsetTime,Zt=this.keyframes[0].t-this.offsetTime,Kt=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(Qt===this._caching.lastFrame||this._caching.lastFrame!==_t&&(this._caching.lastFrame>=Kt&&Qt>=Kt||this._caching.lastFrame<Zt&&Qt<Zt))){this._caching.lastFrame>=Qt&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var er=this.interpolateValue(Qt,this._caching);this.pv=er}return this._caching.lastFrame=Qt,this.pv}function Dt(Qt){var Zt;if(this.propType==="unidimensional")Zt=Qt*this.mult,Tt(this.v-Zt)>1e-5&&(this.v=Zt,this._mdf=!0);else for(var Kt=0,er=this.v.length;Kt<er;)Zt=Qt[Kt]*this.mult,Tt(this.v[Kt]-Zt)>1e-5&&(this.v[Kt]=Zt,this._mdf=!0),Kt+=1}function Nt(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var Qt;this.lock=!0,this._mdf=this._isFirstFrame;var Zt=this.effectsSequence.length,Kt=this.kf?this.pv:this.data.k;for(Qt=0;Qt<Zt;Qt+=1)Kt=this.effectsSequence[Qt](Kt);this.setVValue(Kt),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function Vt(Qt){this.effectsSequence.push(Qt),this.container.addDynamicProperty(this)}function zt(Qt,Zt,Kt,er){this.propType="unidimensional",this.mult=Kt||1,this.data=Zt,this.v=Kt?Zt.k*Kt:Zt.k,this.pv=Zt.k,this._mdf=!1,this.elem=Qt,this.container=er,this.comp=Qt.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=Nt,this.setVValue=Dt,this.addEffect=Vt}function Xt(Qt,Zt,Kt,er){var Yt;this.propType="multidimensional",this.mult=Kt||1,this.data=Zt,this._mdf=!1,this.elem=Qt,this.container=er,this.comp=Qt.comp,this.k=!1,this.kf=!1,this.frameId=-1;var rr=Zt.k.length;for(this.v=createTypedArray("float32",rr),this.pv=createTypedArray("float32",rr),this.vel=createTypedArray("float32",rr),Yt=0;Yt<rr;Yt+=1)this.v[Yt]=Zt.k[Yt]*this.mult,this.pv[Yt]=Zt.k[Yt];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=Nt,this.setVValue=Dt,this.addEffect=Vt}function Ht(Qt,Zt,Kt,er){this.propType="unidimensional",this.keyframes=Zt.k,this.keyframesMetadata=[],this.offsetTime=Qt.data.st,this.frameId=-1,this._caching={lastFrame:_t,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=Zt,this.mult=Kt||1,this.elem=Qt,this.container=er,this.comp=Qt.comp,this.v=_t,this.pv=_t,this._isFirstFrame=!0,this.getValue=Nt,this.setVValue=Dt,this.interpolateValue=Mt,this.effectsSequence=[Ft.bind(this)],this.addEffect=Vt}function Wt(Qt,Zt,Kt,er){var Yt;this.propType="multidimensional";var rr,ir,nr,ar,or=Zt.k.length;for(Yt=0;Yt<or-1;Yt+=1)Zt.k[Yt].to&&Zt.k[Yt].s&&Zt.k[Yt+1]&&Zt.k[Yt+1].s&&(rr=Zt.k[Yt].s,ir=Zt.k[Yt+1].s,nr=Zt.k[Yt].to,ar=Zt.k[Yt].ti,(rr.length===2&&(rr[0]!==ir[0]||rr[1]!==ir[1])&&bez.pointOnLine2D(rr[0],rr[1],ir[0],ir[1],rr[0]+nr[0],rr[1]+nr[1])&&bez.pointOnLine2D(rr[0],rr[1],ir[0],ir[1],ir[0]+ar[0],ir[1]+ar[1])||rr.length===3&&(rr[0]!==ir[0]||rr[1]!==ir[1]||rr[2]!==ir[2])&&bez.pointOnLine3D(rr[0],rr[1],rr[2],ir[0],ir[1],ir[2],rr[0]+nr[0],rr[1]+nr[1],rr[2]+nr[2])&&bez.pointOnLine3D(rr[0],rr[1],rr[2],ir[0],ir[1],ir[2],ir[0]+ar[0],ir[1]+ar[1],ir[2]+ar[2]))&&(Zt.k[Yt].to=null,Zt.k[Yt].ti=null),rr[0]===ir[0]&&rr[1]===ir[1]&&nr[0]===0&&nr[1]===0&&ar[0]===0&&ar[1]===0&&(rr.length===2||rr[2]===ir[2]&&nr[2]===0&&ar[2]===0)&&(Zt.k[Yt].to=null,Zt.k[Yt].ti=null));this.effectsSequence=[Ft.bind(this)],this.data=Zt,this.keyframes=Zt.k,this.keyframesMetadata=[],this.offsetTime=Qt.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=Kt||1,this.elem=Qt,this.container=er,this.comp=Qt.comp,this.getValue=Nt,this.setVValue=Dt,this.interpolateValue=Mt,this.frameId=-1;var ur=Zt.k[0].s.length;for(this.v=createTypedArray("float32",ur),this.pv=createTypedArray("float32",ur),Yt=0;Yt<ur;Yt+=1)this.v[Yt]=_t,this.pv[Yt]=_t;this._caching={lastFrame:_t,lastIndex:0,value:createTypedArray("float32",ur)},this.addEffect=Vt}return{getProp:function(Qt,Zt,Kt,er,Yt){var rr;if(Zt.k.length)if(typeof Zt.k[0]=="number")rr=new Xt(Qt,Zt,er,Yt);else switch(Kt){case 0:rr=new Ht(Qt,Zt,er,Yt);break;case 1:rr=new Wt(Qt,Zt,er,Yt)}else rr=new zt(Qt,Zt,er,Yt);return rr.effectsSequence.length&&Yt.addDynamicProperty(rr),rr}}}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(_t){this.dynamicProperties.indexOf(_t)===-1&&(this.dynamicProperties.push(_t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var _t;this._mdf=!1;var Tt=this.dynamicProperties.length;for(_t=0;_t<Tt;_t+=1)this.dynamicProperties[_t].getValue(),this.dynamicProperties[_t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(_t){this.container=_t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,function(){return createTypedArray("float32",2)});function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(_t,Tt){this.c=_t,this.setLength(Tt);for(var Mt=0;Mt<Tt;)this.v[Mt]=pointPool.newElement(),this.o[Mt]=pointPool.newElement(),this.i[Mt]=pointPool.newElement(),Mt+=1},ShapePath.prototype.setLength=function(_t){for(;this._maxLength<_t;)this.doubleArrayLength();this._length=_t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(_t,Tt,Mt,Pt,Ft){var Dt;switch(this._length=Math.max(this._length,Pt+1),this._length>=this._maxLength&&this.doubleArrayLength(),Mt){case"v":Dt=this.v;break;case"i":Dt=this.i;break;case"o":Dt=this.o;break;default:Dt=[]}(!Dt[Pt]||Dt[Pt]&&!Ft)&&(Dt[Pt]=pointPool.newElement()),Dt[Pt][0]=_t,Dt[Pt][1]=Tt},ShapePath.prototype.setTripleAt=function(_t,Tt,Mt,Pt,Ft,Dt,Nt,Vt){this.setXYAt(_t,Tt,"v",Nt,Vt),this.setXYAt(Mt,Pt,"o",Nt,Vt),this.setXYAt(Ft,Dt,"i",Nt,Vt)},ShapePath.prototype.reverse=function(){var _t=new ShapePath;_t.setPathData(this.c,this._length);var Tt=this.v,Mt=this.o,Pt=this.i,Ft=0;this.c&&(_t.setTripleAt(Tt[0][0],Tt[0][1],Pt[0][0],Pt[0][1],Mt[0][0],Mt[0][1],0,!1),Ft=1);var Dt,Nt=this._length-1,Vt=this._length;for(Dt=Ft;Dt<Vt;Dt+=1)_t.setTripleAt(Tt[Nt][0],Tt[Nt][1],Pt[Nt][0],Pt[Nt][1],Mt[Nt][0],Mt[Nt][1],Dt,!1),Nt-=1;return _t};var shapePool=(factory=poolFactory(4,function(){return new ShapePath},function(_t){var Tt,Mt=_t._length;for(Tt=0;Tt<Mt;Tt+=1)pointPool.release(_t.v[Tt]),pointPool.release(_t.i[Tt]),pointPool.release(_t.o[Tt]),_t.v[Tt]=null,_t.i[Tt]=null,_t.o[Tt]=null;_t._length=0,_t.c=!1}),factory.clone=function(_t){var Tt,Mt=factory.newElement(),Pt=_t._length===void 0?_t.v.length:_t._length;for(Mt.setLength(Pt),Mt.c=_t.c,Tt=0;Tt<Pt;Tt+=1)Mt.setTripleAt(_t.v[Tt][0],_t.v[Tt][1],_t.o[Tt][0],_t.o[Tt][1],_t.i[Tt][0],_t.i[Tt][1],Tt);return Mt},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(_t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=_t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var _t;for(_t=0;_t<this._length;_t+=1)shapePool.release(this.shapes[_t]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(_t){var Tt,Mt=_t._length;for(Tt=0;Tt<Mt;Tt+=1)shapePool.release(_t.shapes[Tt]);_t._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=_t,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=function(){function _t(Qt,Zt,Kt){var er,Yt,rr,ir,nr,ar,or,ur,dr,hr=Kt.lastIndex,gr=this.keyframes;if(Qt<gr[0].t-this.offsetTime)er=gr[0].s[0],rr=!0,hr=0;else if(Qt>=gr[gr.length-1].t-this.offsetTime)er=gr[gr.length-1].s?gr[gr.length-1].s[0]:gr[gr.length-2].e[0],rr=!0;else{for(var pr,mr,wr,br=hr,_r=gr.length-1,Mr=!0;Mr&&(pr=gr[br],!((mr=gr[br+1]).t-this.offsetTime>Qt));)br<_r-1?br+=1:Mr=!1;if(wr=this.keyframesMetadata[br]||{},hr=br,!(rr=pr.h===1)){if(Qt>=mr.t-this.offsetTime)ur=1;else if(Qt<pr.t-this.offsetTime)ur=0;else{var Ar;wr.__fnct?Ar=wr.__fnct:(Ar=BezierFactory.getBezierEasing(pr.o.x,pr.o.y,pr.i.x,pr.i.y).get,wr.__fnct=Ar),ur=Ar((Qt-(pr.t-this.offsetTime))/(mr.t-this.offsetTime-(pr.t-this.offsetTime)))}Yt=mr.s?mr.s[0]:pr.e[0]}er=pr.s[0]}for(ar=Zt._length,or=er.i[0].length,Kt.lastIndex=hr,ir=0;ir<ar;ir+=1)for(nr=0;nr<or;nr+=1)dr=rr?er.i[ir][nr]:er.i[ir][nr]+(Yt.i[ir][nr]-er.i[ir][nr])*ur,Zt.i[ir][nr]=dr,dr=rr?er.o[ir][nr]:er.o[ir][nr]+(Yt.o[ir][nr]-er.o[ir][nr])*ur,Zt.o[ir][nr]=dr,dr=rr?er.v[ir][nr]:er.v[ir][nr]+(Yt.v[ir][nr]-er.v[ir][nr])*ur,Zt.v[ir][nr]=dr}function Tt(){var Qt=this.comp.renderedFrame-this.offsetTime,Zt=this.keyframes[0].t-this.offsetTime,Kt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,er=this._caching.lastFrame;return er!==-999999&&(er<Zt&&Qt<Zt||er>Kt&&Qt>Kt)||(this._caching.lastIndex=er<Qt?this._caching.lastIndex:0,this.interpolateShape(Qt,this.pv,this._caching)),this._caching.lastFrame=Qt,this.pv}function Mt(){this.paths=this.localShapeCollection}function Pt(Qt){(function(Zt,Kt){if(Zt._length!==Kt._length||Zt.c!==Kt.c)return!1;var er,Yt=Zt._length;for(er=0;er<Yt;er+=1)if(Zt.v[er][0]!==Kt.v[er][0]||Zt.v[er][1]!==Kt.v[er][1]||Zt.o[er][0]!==Kt.o[er][0]||Zt.o[er][1]!==Kt.o[er][1]||Zt.i[er][0]!==Kt.i[er][0]||Zt.i[er][1]!==Kt.i[er][1])return!1;return!0})(this.v,Qt)||(this.v=shapePool.clone(Qt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function Ft(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var Qt,Zt;this.lock=!0,this._mdf=!1,Qt=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var Kt=this.effectsSequence.length;for(Zt=0;Zt<Kt;Zt+=1)Qt=this.effectsSequence[Zt](Qt);this.setVValue(Qt),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function Dt(Qt,Zt,Kt){this.propType="shape",this.comp=Qt.comp,this.container=Qt,this.elem=Qt,this.data=Zt,this.k=!1,this.kf=!1,this._mdf=!1;var er=Kt===3?Zt.pt.k:Zt.ks.k;this.v=shapePool.clone(er),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=Mt,this.effectsSequence=[]}function Nt(Qt){this.effectsSequence.push(Qt),this.container.addDynamicProperty(this)}function Vt(Qt,Zt,Kt){this.propType="shape",this.comp=Qt.comp,this.elem=Qt,this.container=Qt,this.offsetTime=Qt.data.st,this.keyframes=Kt===3?Zt.pt.k:Zt.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var er=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,er),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=-999999,this.reset=Mt,this._caching={lastFrame:-999999,lastIndex:0},this.effectsSequence=[Tt.bind(this)]}Dt.prototype.interpolateShape=_t,Dt.prototype.getValue=Ft,Dt.prototype.setVValue=Pt,Dt.prototype.addEffect=Nt,Vt.prototype.getValue=Ft,Vt.prototype.interpolateShape=_t,Vt.prototype.setVValue=Pt,Vt.prototype.addEffect=Nt;var zt=function(){var Qt=roundCorner;function Zt(Kt,er){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=er.d,this.elem=Kt,this.comp=Kt.comp,this.frameId=-1,this.initDynamicPropertyContainer(Kt),this.p=PropertyFactory.getProp(Kt,er.p,1,0,this),this.s=PropertyFactory.getProp(Kt,er.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return Zt.prototype={reset:Mt,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Kt=this.p.v[0],er=this.p.v[1],Yt=this.s.v[0]/2,rr=this.s.v[1]/2,ir=this.d!==3,nr=this.v;nr.v[0][0]=Kt,nr.v[0][1]=er-rr,nr.v[1][0]=ir?Kt+Yt:Kt-Yt,nr.v[1][1]=er,nr.v[2][0]=Kt,nr.v[2][1]=er+rr,nr.v[3][0]=ir?Kt-Yt:Kt+Yt,nr.v[3][1]=er,nr.i[0][0]=ir?Kt-Yt*Qt:Kt+Yt*Qt,nr.i[0][1]=er-rr,nr.i[1][0]=ir?Kt+Yt:Kt-Yt,nr.i[1][1]=er-rr*Qt,nr.i[2][0]=ir?Kt+Yt*Qt:Kt-Yt*Qt,nr.i[2][1]=er+rr,nr.i[3][0]=ir?Kt-Yt:Kt+Yt,nr.i[3][1]=er+rr*Qt,nr.o[0][0]=ir?Kt+Yt*Qt:Kt-Yt*Qt,nr.o[0][1]=er-rr,nr.o[1][0]=ir?Kt+Yt:Kt-Yt,nr.o[1][1]=er+rr*Qt,nr.o[2][0]=ir?Kt-Yt*Qt:Kt+Yt*Qt,nr.o[2][1]=er+rr,nr.o[3][0]=ir?Kt-Yt:Kt+Yt,nr.o[3][1]=er-rr*Qt}},extendPrototype([DynamicPropertyContainer],Zt),Zt}(),Xt=function(){function Qt(Zt,Kt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=Zt,this.comp=Zt.comp,this.data=Kt,this.frameId=-1,this.d=Kt.d,this.initDynamicPropertyContainer(Zt),Kt.sy===1?(this.ir=PropertyFactory.getProp(Zt,Kt.ir,0,0,this),this.is=PropertyFactory.getProp(Zt,Kt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(Zt,Kt.pt,0,0,this),this.p=PropertyFactory.getProp(Zt,Kt.p,1,0,this),this.r=PropertyFactory.getProp(Zt,Kt.r,0,degToRads,this),this.or=PropertyFactory.getProp(Zt,Kt.or,0,0,this),this.os=PropertyFactory.getProp(Zt,Kt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Qt.prototype={reset:Mt,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Zt,Kt,er,Yt,rr=2*Math.floor(this.pt.v),ir=2*Math.PI/rr,nr=!0,ar=this.or.v,or=this.ir.v,ur=this.os.v,dr=this.is.v,hr=2*Math.PI*ar/(2*rr),gr=2*Math.PI*or/(2*rr),pr=-Math.PI/2;pr+=this.r.v;var mr=this.data.d===3?-1:1;for(this.v._length=0,Zt=0;Zt<rr;Zt+=1){er=nr?ur:dr,Yt=nr?hr:gr;var wr=(Kt=nr?ar:or)*Math.cos(pr),br=Kt*Math.sin(pr),_r=wr===0&&br===0?0:br/Math.sqrt(wr*wr+br*br),Mr=wr===0&&br===0?0:-wr/Math.sqrt(wr*wr+br*br);wr+=+this.p.v[0],br+=+this.p.v[1],this.v.setTripleAt(wr,br,wr-_r*Yt*er*mr,br-Mr*Yt*er*mr,wr+_r*Yt*er*mr,br+Mr*Yt*er*mr,Zt,!0),nr=!nr,pr+=ir*mr}},convertPolygonToPath:function(){var Zt,Kt=Math.floor(this.pt.v),er=2*Math.PI/Kt,Yt=this.or.v,rr=this.os.v,ir=2*Math.PI*Yt/(4*Kt),nr=.5*-Math.PI,ar=this.data.d===3?-1:1;for(nr+=this.r.v,this.v._length=0,Zt=0;Zt<Kt;Zt+=1){var or=Yt*Math.cos(nr),ur=Yt*Math.sin(nr),dr=or===0&&ur===0?0:ur/Math.sqrt(or*or+ur*ur),hr=or===0&&ur===0?0:-or/Math.sqrt(or*or+ur*ur);or+=+this.p.v[0],ur+=+this.p.v[1],this.v.setTripleAt(or,ur,or-dr*ir*rr*ar,ur-hr*ir*rr*ar,or+dr*ir*rr*ar,ur+hr*ir*rr*ar,Zt,!0),nr+=er*ar}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Qt),Qt}(),Ht=function(){function Qt(Zt,Kt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=Zt,this.comp=Zt.comp,this.frameId=-1,this.d=Kt.d,this.initDynamicPropertyContainer(Zt),this.p=PropertyFactory.getProp(Zt,Kt.p,1,0,this),this.s=PropertyFactory.getProp(Zt,Kt.s,1,0,this),this.r=PropertyFactory.getProp(Zt,Kt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Qt.prototype={convertRectToPath:function(){var Zt=this.p.v[0],Kt=this.p.v[1],er=this.s.v[0]/2,Yt=this.s.v[1]/2,rr=bmMin(er,Yt,this.r.v),ir=rr*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Zt+er,Kt-Yt+rr,Zt+er,Kt-Yt+rr,Zt+er,Kt-Yt+ir,0,!0),this.v.setTripleAt(Zt+er,Kt+Yt-rr,Zt+er,Kt+Yt-ir,Zt+er,Kt+Yt-rr,1,!0),rr!==0?(this.v.setTripleAt(Zt+er-rr,Kt+Yt,Zt+er-rr,Kt+Yt,Zt+er-ir,Kt+Yt,2,!0),this.v.setTripleAt(Zt-er+rr,Kt+Yt,Zt-er+ir,Kt+Yt,Zt-er+rr,Kt+Yt,3,!0),this.v.setTripleAt(Zt-er,Kt+Yt-rr,Zt-er,Kt+Yt-rr,Zt-er,Kt+Yt-ir,4,!0),this.v.setTripleAt(Zt-er,Kt-Yt+rr,Zt-er,Kt-Yt+ir,Zt-er,Kt-Yt+rr,5,!0),this.v.setTripleAt(Zt-er+rr,Kt-Yt,Zt-er+rr,Kt-Yt,Zt-er+ir,Kt-Yt,6,!0),this.v.setTripleAt(Zt+er-rr,Kt-Yt,Zt+er-ir,Kt-Yt,Zt+er-rr,Kt-Yt,7,!0)):(this.v.setTripleAt(Zt-er,Kt+Yt,Zt-er+ir,Kt+Yt,Zt-er,Kt+Yt,2),this.v.setTripleAt(Zt-er,Kt-Yt,Zt-er,Kt-Yt+ir,Zt-er,Kt-Yt,3))):(this.v.setTripleAt(Zt+er,Kt-Yt+rr,Zt+er,Kt-Yt+ir,Zt+er,Kt-Yt+rr,0,!0),rr!==0?(this.v.setTripleAt(Zt+er-rr,Kt-Yt,Zt+er-rr,Kt-Yt,Zt+er-ir,Kt-Yt,1,!0),this.v.setTripleAt(Zt-er+rr,Kt-Yt,Zt-er+ir,Kt-Yt,Zt-er+rr,Kt-Yt,2,!0),this.v.setTripleAt(Zt-er,Kt-Yt+rr,Zt-er,Kt-Yt+rr,Zt-er,Kt-Yt+ir,3,!0),this.v.setTripleAt(Zt-er,Kt+Yt-rr,Zt-er,Kt+Yt-ir,Zt-er,Kt+Yt-rr,4,!0),this.v.setTripleAt(Zt-er+rr,Kt+Yt,Zt-er+rr,Kt+Yt,Zt-er+ir,Kt+Yt,5,!0),this.v.setTripleAt(Zt+er-rr,Kt+Yt,Zt+er-ir,Kt+Yt,Zt+er-rr,Kt+Yt,6,!0),this.v.setTripleAt(Zt+er,Kt+Yt-rr,Zt+er,Kt+Yt-rr,Zt+er,Kt+Yt-ir,7,!0)):(this.v.setTripleAt(Zt-er,Kt-Yt,Zt-er+ir,Kt-Yt,Zt-er,Kt-Yt,1,!0),this.v.setTripleAt(Zt-er,Kt+Yt,Zt-er,Kt+Yt-ir,Zt-er,Kt+Yt,2,!0),this.v.setTripleAt(Zt+er,Kt+Yt,Zt+er-ir,Kt+Yt,Zt+er,Kt+Yt,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:Mt},extendPrototype([DynamicPropertyContainer],Qt),Qt}(),Wt={getShapeProp:function(Qt,Zt,Kt){var er;return Kt===3||Kt===4?er=(Kt===3?Zt.pt:Zt.ks).k.length?new Vt(Qt,Zt,Kt):new Dt(Qt,Zt,Kt):Kt===5?er=new Ht(Qt,Zt):Kt===6?er=new zt(Qt,Zt):Kt===7&&(er=new Xt(Qt,Zt)),er.k&&Qt.addDynamicProperty(er),er},getConstructorFunction:function(){return Dt},getKeyframedConstructorFunction:function(){return Vt}};return Wt}(),Matrix=function(){var _t=Math.cos,Tt=Math.sin,Mt=Math.tan,Pt=Math.round;function Ft(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function Dt(xr){if(xr===0)return this;var yr=_t(xr),Er=Tt(xr);return this._t(yr,-Er,0,0,Er,yr,0,0,0,0,1,0,0,0,0,1)}function Nt(xr){if(xr===0)return this;var yr=_t(xr),Er=Tt(xr);return this._t(1,0,0,0,0,yr,-Er,0,0,Er,yr,0,0,0,0,1)}function Vt(xr){if(xr===0)return this;var yr=_t(xr),Er=Tt(xr);return this._t(yr,0,Er,0,0,1,0,0,-Er,0,yr,0,0,0,0,1)}function zt(xr){if(xr===0)return this;var yr=_t(xr),Er=Tt(xr);return this._t(yr,-Er,0,0,Er,yr,0,0,0,0,1,0,0,0,0,1)}function Xt(xr,yr){return this._t(1,yr,xr,1,0,0)}function Ht(xr,yr){return this.shear(Mt(xr),Mt(yr))}function Wt(xr,yr){var Er=_t(yr),Cr=Tt(yr);return this._t(Er,Cr,0,0,-Cr,Er,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Mt(xr),1,0,0,0,0,1,0,0,0,0,1)._t(Er,-Cr,0,0,Cr,Er,0,0,0,0,1,0,0,0,0,1)}function Qt(xr,yr,Er){return Er||Er===0||(Er=1),xr===1&&yr===1&&Er===1?this:this._t(xr,0,0,0,0,yr,0,0,0,0,Er,0,0,0,0,1)}function Zt(xr,yr,Er,Cr,Dr,jr,Hr,zr,Qr,Xr,Br,Ur,Jr,Zr,pn,_i){return this.props[0]=xr,this.props[1]=yr,this.props[2]=Er,this.props[3]=Cr,this.props[4]=Dr,this.props[5]=jr,this.props[6]=Hr,this.props[7]=zr,this.props[8]=Qr,this.props[9]=Xr,this.props[10]=Br,this.props[11]=Ur,this.props[12]=Jr,this.props[13]=Zr,this.props[14]=pn,this.props[15]=_i,this}function Kt(xr,yr,Er){return Er=Er||0,xr!==0||yr!==0||Er!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,xr,yr,Er,1):this}function er(xr,yr,Er,Cr,Dr,jr,Hr,zr,Qr,Xr,Br,Ur,Jr,Zr,pn,_i){var Rr=this.props;if(xr===1&&yr===0&&Er===0&&Cr===0&&Dr===0&&jr===1&&Hr===0&&zr===0&&Qr===0&&Xr===0&&Br===1&&Ur===0)return Rr[12]=Rr[12]*xr+Rr[15]*Jr,Rr[13]=Rr[13]*jr+Rr[15]*Zr,Rr[14]=Rr[14]*Br+Rr[15]*pn,Rr[15]*=_i,this._identityCalculated=!1,this;var Mn=Rr[0],ls=Rr[1],us=Rr[2],ss=Rr[3],kn=Rr[4],In=Rr[5],_n=Rr[6],Cn=Rr[7],jn=Rr[8],ts=Rr[9],ds=Rr[10],es=Rr[11],hs=Rr[12],rs=Rr[13],ys=Rr[14],gs=Rr[15];return Rr[0]=Mn*xr+ls*Dr+us*Qr+ss*Jr,Rr[1]=Mn*yr+ls*jr+us*Xr+ss*Zr,Rr[2]=Mn*Er+ls*Hr+us*Br+ss*pn,Rr[3]=Mn*Cr+ls*zr+us*Ur+ss*_i,Rr[4]=kn*xr+In*Dr+_n*Qr+Cn*Jr,Rr[5]=kn*yr+In*jr+_n*Xr+Cn*Zr,Rr[6]=kn*Er+In*Hr+_n*Br+Cn*pn,Rr[7]=kn*Cr+In*zr+_n*Ur+Cn*_i,Rr[8]=jn*xr+ts*Dr+ds*Qr+es*Jr,Rr[9]=jn*yr+ts*jr+ds*Xr+es*Zr,Rr[10]=jn*Er+ts*Hr+ds*Br+es*pn,Rr[11]=jn*Cr+ts*zr+ds*Ur+es*_i,Rr[12]=hs*xr+rs*Dr+ys*Qr+gs*Jr,Rr[13]=hs*yr+rs*jr+ys*Xr+gs*Zr,Rr[14]=hs*Er+rs*Hr+ys*Br+gs*pn,Rr[15]=hs*Cr+rs*zr+ys*Ur+gs*_i,this._identityCalculated=!1,this}function Yt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function rr(xr){for(var yr=0;yr<16;){if(xr.props[yr]!==this.props[yr])return!1;yr+=1}return!0}function ir(xr){var yr;for(yr=0;yr<16;yr+=1)xr.props[yr]=this.props[yr];return xr}function nr(xr){var yr;for(yr=0;yr<16;yr+=1)this.props[yr]=xr[yr]}function ar(xr,yr,Er){return{x:xr*this.props[0]+yr*this.props[4]+Er*this.props[8]+this.props[12],y:xr*this.props[1]+yr*this.props[5]+Er*this.props[9]+this.props[13],z:xr*this.props[2]+yr*this.props[6]+Er*this.props[10]+this.props[14]}}function or(xr,yr,Er){return xr*this.props[0]+yr*this.props[4]+Er*this.props[8]+this.props[12]}function ur(xr,yr,Er){return xr*this.props[1]+yr*this.props[5]+Er*this.props[9]+this.props[13]}function dr(xr,yr,Er){return xr*this.props[2]+yr*this.props[6]+Er*this.props[10]+this.props[14]}function hr(){var xr=this.props[0]*this.props[5]-this.props[1]*this.props[4],yr=this.props[5]/xr,Er=-this.props[1]/xr,Cr=-this.props[4]/xr,Dr=this.props[0]/xr,jr=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/xr,Hr=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/xr,zr=new Matrix;return zr.props[0]=yr,zr.props[1]=Er,zr.props[4]=Cr,zr.props[5]=Dr,zr.props[12]=jr,zr.props[13]=Hr,zr}function gr(xr){return this.getInverseMatrix().applyToPointArray(xr[0],xr[1],xr[2]||0)}function pr(xr){var yr,Er=xr.length,Cr=[];for(yr=0;yr<Er;yr+=1)Cr[yr]=gr(xr[yr]);return Cr}function mr(xr,yr,Er){var Cr=createTypedArray("float32",6);if(this.isIdentity())Cr[0]=xr[0],Cr[1]=xr[1],Cr[2]=yr[0],Cr[3]=yr[1],Cr[4]=Er[0],Cr[5]=Er[1];else{var Dr=this.props[0],jr=this.props[1],Hr=this.props[4],zr=this.props[5],Qr=this.props[12],Xr=this.props[13];Cr[0]=xr[0]*Dr+xr[1]*Hr+Qr,Cr[1]=xr[0]*jr+xr[1]*zr+Xr,Cr[2]=yr[0]*Dr+yr[1]*Hr+Qr,Cr[3]=yr[0]*jr+yr[1]*zr+Xr,Cr[4]=Er[0]*Dr+Er[1]*Hr+Qr,Cr[5]=Er[0]*jr+Er[1]*zr+Xr}return Cr}function wr(xr,yr,Er){return this.isIdentity()?[xr,yr,Er]:[xr*this.props[0]+yr*this.props[4]+Er*this.props[8]+this.props[12],xr*this.props[1]+yr*this.props[5]+Er*this.props[9]+this.props[13],xr*this.props[2]+yr*this.props[6]+Er*this.props[10]+this.props[14]]}function br(xr,yr){if(this.isIdentity())return xr+","+yr;var Er=this.props;return Math.round(100*(xr*Er[0]+yr*Er[4]+Er[12]))/100+","+Math.round(100*(xr*Er[1]+yr*Er[5]+Er[13]))/100}function _r(){for(var xr=0,yr=this.props,Er="matrix3d(";xr<16;)Er+=Pt(1e4*yr[xr])/1e4,Er+=xr===15?")":",",xr+=1;return Er}function Mr(xr){return xr<1e-6&&xr>0||xr>-1e-6&&xr<0?Pt(1e4*xr)/1e4:xr}function Ar(){var xr=this.props;return"matrix("+Mr(xr[0])+","+Mr(xr[1])+","+Mr(xr[4])+","+Mr(xr[5])+","+Mr(xr[12])+","+Mr(xr[13])+")"}return function(){this.reset=Ft,this.rotate=Dt,this.rotateX=Nt,this.rotateY=Vt,this.rotateZ=zt,this.skew=Ht,this.skewFromAxis=Wt,this.shear=Xt,this.scale=Qt,this.setTransform=Zt,this.translate=Kt,this.transform=er,this.applyToPoint=ar,this.applyToX=or,this.applyToY=ur,this.applyToZ=dr,this.applyToPointArray=wr,this.applyToTriplePoints=mr,this.applyToPointStringified=br,this.toCSS=_r,this.to2dCSS=Ar,this.clone=ir,this.cloneFromProps=nr,this.equals=rr,this.inversePoints=pr,this.inversePoint=gr,this.getInverseMatrix=hr,this._t=this.transform,this.isIdentity=Yt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(_t){return(_typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tt){return typeof Tt}:function(Tt){return Tt&&typeof Symbol=="function"&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt})(_t)}var lottie={},standalone="__[STANDALONE]__",queryString;function setLocation(_t){setLocationHref(_t)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(_t){setSubframeEnabled(_t)}function setPrefix(_t){setIdPrefix(_t)}function loadAnimation(_t){return animationManager.loadAnimation(_t)}function setQuality(_t){if(typeof _t=="string")switch(_t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(_t)&&_t>1&&setDefaultCurveSegments(_t)}function inBrowser(){return typeof navigator<"u"}function installPlugin(_t,Tt){_t==="expressions"&&setExpressionsPlugin(Tt)}function getFactory(_t){switch(_t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(_t){for(var Tt=queryString.split("&"),Mt=0;Mt<Tt.length;Mt+=1){var Pt=Tt[Mt].split("=");if(decodeURIComponent(Pt[0])==_t)return decodeURIComponent(Pt[1])}return null}if(lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.9.1",standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src.replace(/^[^\?]+\??/,""),getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(_t){}var ShapeModifiers=function(){var _t={},Tt={};return _t.registerModifier=function(Mt,Pt){Tt[Mt]||(Tt[Mt]=Pt)},_t.getModifier=function(Mt,Pt,Ft){return new Tt[Mt](Pt,Ft)},_t}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(_t){if(!this.closed){_t.sh.container.addDynamicProperty(_t.sh);var Tt={shape:_t.sh,data:_t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(Tt),this.addShapeToModifier(Tt),this._isAnimated&&_t.setAsAnimated()}},ShapeModifier.prototype.init=function(_t,Tt){this.shapes=[],this.elem=_t,this.initDynamicPropertyContainer(_t),this.initModifierProperties(_t,Tt),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(_t,Tt){this.s=PropertyFactory.getProp(_t,Tt.s,0,.01,this),this.e=PropertyFactory.getProp(_t,Tt.e,0,.01,this),this.o=PropertyFactory.getProp(_t,Tt.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=Tt.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(_t){_t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(_t,Tt,Mt,Pt,Ft){var Dt=[];Tt<=1?Dt.push({s:_t,e:Tt}):_t>=1?Dt.push({s:_t-1,e:Tt-1}):(Dt.push({s:_t,e:1}),Dt.push({s:0,e:Tt-1}));var Nt,Vt,zt=[],Xt=Dt.length;for(Nt=0;Nt<Xt;Nt+=1){var Ht,Wt;(Vt=Dt[Nt]).e*Ft<Pt||Vt.s*Ft>Pt+Mt||(Ht=Vt.s*Ft<=Pt?0:(Vt.s*Ft-Pt)/Mt,Wt=Vt.e*Ft>=Pt+Mt?1:(Vt.e*Ft-Pt)/Mt,zt.push([Ht,Wt]))}return zt.length||zt.push([0,0]),zt},TrimModifier.prototype.releasePathsData=function(_t){var Tt,Mt=_t.length;for(Tt=0;Tt<Mt;Tt+=1)segmentsLengthPool.release(_t[Tt]);return _t.length=0,_t},TrimModifier.prototype.processShapes=function(_t){var Tt,Mt,Pt,Ft;if(this._mdf||_t){var Dt=this.o.v%360/360;if(Dt<0&&(Dt+=1),(Tt=this.s.v>1?1+Dt:this.s.v<0?0+Dt:this.s.v+Dt)>(Mt=this.e.v>1?1+Dt:this.e.v<0?0+Dt:this.e.v+Dt)){var Nt=Tt;Tt=Mt,Mt=Nt}Tt=1e-4*Math.round(1e4*Tt),Mt=1e-4*Math.round(1e4*Mt),this.sValue=Tt,this.eValue=Mt}else Tt=this.sValue,Mt=this.eValue;var Vt,zt,Xt,Ht,Wt,Qt=this.shapes.length,Zt=0;if(Mt===Tt)for(Ft=0;Ft<Qt;Ft+=1)this.shapes[Ft].localShapeCollection.releaseShapes(),this.shapes[Ft].shape._mdf=!0,this.shapes[Ft].shape.paths=this.shapes[Ft].localShapeCollection,this._mdf&&(this.shapes[Ft].pathsData.length=0);else if(Mt===1&&Tt===0||Mt===0&&Tt===1){if(this._mdf)for(Ft=0;Ft<Qt;Ft+=1)this.shapes[Ft].pathsData.length=0,this.shapes[Ft].shape._mdf=!0}else{var Kt,er,Yt=[];for(Ft=0;Ft<Qt;Ft+=1)if((Kt=this.shapes[Ft]).shape._mdf||this._mdf||_t||this.m===2){if(zt=(Pt=Kt.shape.paths)._length,Wt=0,!Kt.shape._mdf&&Kt.pathsData.length)Wt=Kt.totalShapeLength;else{for(Xt=this.releasePathsData(Kt.pathsData),Vt=0;Vt<zt;Vt+=1)Ht=bez.getSegmentsLength(Pt.shapes[Vt]),Xt.push(Ht),Wt+=Ht.totalLength;Kt.totalShapeLength=Wt,Kt.pathsData=Xt}Zt+=Wt,Kt.shape._mdf=!0}else Kt.shape.paths=Kt.localShapeCollection;var rr,ir=Tt,nr=Mt,ar=0;for(Ft=Qt-1;Ft>=0;Ft-=1)if((Kt=this.shapes[Ft]).shape._mdf){for((er=Kt.localShapeCollection).releaseShapes(),this.m===2&&Qt>1?(rr=this.calculateShapeEdges(Tt,Mt,Kt.totalShapeLength,ar,Zt),ar+=Kt.totalShapeLength):rr=[[ir,nr]],zt=rr.length,Vt=0;Vt<zt;Vt+=1){ir=rr[Vt][0],nr=rr[Vt][1],Yt.length=0,nr<=1?Yt.push({s:Kt.totalShapeLength*ir,e:Kt.totalShapeLength*nr}):ir>=1?Yt.push({s:Kt.totalShapeLength*(ir-1),e:Kt.totalShapeLength*(nr-1)}):(Yt.push({s:Kt.totalShapeLength*ir,e:Kt.totalShapeLength}),Yt.push({s:0,e:Kt.totalShapeLength*(nr-1)}));var or=this.addShapes(Kt,Yt[0]);if(Yt[0].s!==Yt[0].e){if(Yt.length>1)if(Kt.shape.paths.shapes[Kt.shape.paths._length-1].c){var ur=or.pop();this.addPaths(or,er),or=this.addShapes(Kt,Yt[1],ur)}else this.addPaths(or,er),or=this.addShapes(Kt,Yt[1]);this.addPaths(or,er)}}Kt.shape.paths=er}}},TrimModifier.prototype.addPaths=function(_t,Tt){var Mt,Pt=_t.length;for(Mt=0;Mt<Pt;Mt+=1)Tt.addShape(_t[Mt])},TrimModifier.prototype.addSegment=function(_t,Tt,Mt,Pt,Ft,Dt,Nt){Ft.setXYAt(Tt[0],Tt[1],"o",Dt),Ft.setXYAt(Mt[0],Mt[1],"i",Dt+1),Nt&&Ft.setXYAt(_t[0],_t[1],"v",Dt),Ft.setXYAt(Pt[0],Pt[1],"v",Dt+1)},TrimModifier.prototype.addSegmentFromArray=function(_t,Tt,Mt,Pt){Tt.setXYAt(_t[1],_t[5],"o",Mt),Tt.setXYAt(_t[2],_t[6],"i",Mt+1),Pt&&Tt.setXYAt(_t[0],_t[4],"v",Mt),Tt.setXYAt(_t[3],_t[7],"v",Mt+1)},TrimModifier.prototype.addShapes=function(_t,Tt,Mt){var Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt=_t.pathsData,Qt=_t.shape.paths.shapes,Zt=_t.shape.paths._length,Kt=0,er=[],Yt=!0;for(Mt?(Vt=Mt._length,Ht=Mt._length):(Mt=shapePool.newElement(),Vt=0,Ht=0),er.push(Mt),Pt=0;Pt<Zt;Pt+=1){for(zt=Wt[Pt].lengths,Mt.c=Qt[Pt].c,Dt=Qt[Pt].c?zt.length:zt.length+1,Ft=1;Ft<Dt;Ft+=1)if(Kt+(Nt=zt[Ft-1]).addedLength<Tt.s)Kt+=Nt.addedLength,Mt.c=!1;else{if(Kt>Tt.e){Mt.c=!1;break}Tt.s<=Kt&&Tt.e>=Kt+Nt.addedLength?(this.addSegment(Qt[Pt].v[Ft-1],Qt[Pt].o[Ft-1],Qt[Pt].i[Ft],Qt[Pt].v[Ft],Mt,Vt,Yt),Yt=!1):(Xt=bez.getNewSegment(Qt[Pt].v[Ft-1],Qt[Pt].v[Ft],Qt[Pt].o[Ft-1],Qt[Pt].i[Ft],(Tt.s-Kt)/Nt.addedLength,(Tt.e-Kt)/Nt.addedLength,zt[Ft-1]),this.addSegmentFromArray(Xt,Mt,Vt,Yt),Yt=!1,Mt.c=!1),Kt+=Nt.addedLength,Vt+=1}if(Qt[Pt].c&&zt.length){if(Nt=zt[Ft-1],Kt<=Tt.e){var rr=zt[Ft-1].addedLength;Tt.s<=Kt&&Tt.e>=Kt+rr?(this.addSegment(Qt[Pt].v[Ft-1],Qt[Pt].o[Ft-1],Qt[Pt].i[0],Qt[Pt].v[0],Mt,Vt,Yt),Yt=!1):(Xt=bez.getNewSegment(Qt[Pt].v[Ft-1],Qt[Pt].v[0],Qt[Pt].o[Ft-1],Qt[Pt].i[0],(Tt.s-Kt)/rr,(Tt.e-Kt)/rr,zt[Ft-1]),this.addSegmentFromArray(Xt,Mt,Vt,Yt),Yt=!1,Mt.c=!1)}else Mt.c=!1;Kt+=Nt.addedLength,Vt+=1}if(Mt._length&&(Mt.setXYAt(Mt.v[Ht][0],Mt.v[Ht][1],"i",Ht),Mt.setXYAt(Mt.v[Mt._length-1][0],Mt.v[Mt._length-1][1],"o",Mt._length-1)),Kt>Tt.e)break;Pt<Zt-1&&(Mt=shapePool.newElement(),Yt=!0,er.push(Mt),Vt=0)}return er},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(_t,Tt){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(_t,Tt.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(_t,Tt){var Mt=Tt/100,Pt=[0,0],Ft=_t._length,Dt=0;for(Dt=0;Dt<Ft;Dt+=1)Pt[0]+=_t.v[Dt][0],Pt[1]+=_t.v[Dt][1];Pt[0]/=Ft,Pt[1]/=Ft;var Nt,Vt,zt,Xt,Ht,Wt,Qt=shapePool.newElement();for(Qt.c=_t.c,Dt=0;Dt<Ft;Dt+=1)Nt=_t.v[Dt][0]+(Pt[0]-_t.v[Dt][0])*Mt,Vt=_t.v[Dt][1]+(Pt[1]-_t.v[Dt][1])*Mt,zt=_t.o[Dt][0]+(Pt[0]-_t.o[Dt][0])*-Mt,Xt=_t.o[Dt][1]+(Pt[1]-_t.o[Dt][1])*-Mt,Ht=_t.i[Dt][0]+(Pt[0]-_t.i[Dt][0])*-Mt,Wt=_t.i[Dt][1]+(Pt[1]-_t.i[Dt][1])*-Mt,Qt.setTripleAt(Nt,Vt,zt,Xt,Ht,Wt,Dt);return Qt},PuckerAndBloatModifier.prototype.processShapes=function(_t){var Tt,Mt,Pt,Ft,Dt,Nt,Vt=this.shapes.length,zt=this.amount.v;if(zt!==0)for(Mt=0;Mt<Vt;Mt+=1){if(Nt=(Dt=this.shapes[Mt]).localShapeCollection,Dt.shape._mdf||this._mdf||_t)for(Nt.releaseShapes(),Dt.shape._mdf=!0,Tt=Dt.shape.paths.shapes,Ft=Dt.shape.paths._length,Pt=0;Pt<Ft;Pt+=1)Nt.addShape(this.processPath(Tt[Pt],zt));Dt.shape.paths=Dt.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var _t=[0,0];function Tt(Mt,Pt,Ft){if(this.elem=Mt,this.frameId=-1,this.propType="transform",this.data=Pt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(Ft||Mt),Pt.p&&Pt.p.s?(this.px=PropertyFactory.getProp(Mt,Pt.p.x,0,0,this),this.py=PropertyFactory.getProp(Mt,Pt.p.y,0,0,this),Pt.p.z&&(this.pz=PropertyFactory.getProp(Mt,Pt.p.z,0,0,this))):this.p=PropertyFactory.getProp(Mt,Pt.p||{k:[0,0,0]},1,0,this),Pt.rx){if(this.rx=PropertyFactory.getProp(Mt,Pt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(Mt,Pt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(Mt,Pt.rz,0,degToRads,this),Pt.or.k[0].ti){var Dt,Nt=Pt.or.k.length;for(Dt=0;Dt<Nt;Dt+=1)Pt.or.k[Dt].to=null,Pt.or.k[Dt].ti=null}this.or=PropertyFactory.getProp(Mt,Pt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(Mt,Pt.r||{k:0},0,degToRads,this);Pt.sk&&(this.sk=PropertyFactory.getProp(Mt,Pt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(Mt,Pt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(Mt,Pt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(Mt,Pt.s||{k:[100,100,100]},1,.01,this),Pt.o?this.o=PropertyFactory.getProp(Mt,Pt.o,0,.01,Mt):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return Tt.prototype={applyToMatrix:function(Mt){var Pt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||Pt,this.a&&Mt.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&Mt.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&Mt.skewFromAxis(-this.sk.v,this.sa.v),this.r?Mt.rotate(-this.r.v):Mt.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?Mt.translate(this.px.v,this.py.v,-this.pz.v):Mt.translate(this.px.v,this.py.v,0):Mt.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(Mt){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||Mt){var Pt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var Ft,Dt;if(Pt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(Ft=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/Pt,0),Dt=this.p.getValueAtTime(this.p.keyframes[0].t/Pt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(Ft=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/Pt,0),Dt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/Pt,0)):(Ft=this.p.pv,Dt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/Pt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){Ft=[],Dt=[];var Nt=this.px,Vt=this.py;Nt._caching.lastFrame+Nt.offsetTime<=Nt.keyframes[0].t?(Ft[0]=Nt.getValueAtTime((Nt.keyframes[0].t+.01)/Pt,0),Ft[1]=Vt.getValueAtTime((Vt.keyframes[0].t+.01)/Pt,0),Dt[0]=Nt.getValueAtTime(Nt.keyframes[0].t/Pt,0),Dt[1]=Vt.getValueAtTime(Vt.keyframes[0].t/Pt,0)):Nt._caching.lastFrame+Nt.offsetTime>=Nt.keyframes[Nt.keyframes.length-1].t?(Ft[0]=Nt.getValueAtTime(Nt.keyframes[Nt.keyframes.length-1].t/Pt,0),Ft[1]=Vt.getValueAtTime(Vt.keyframes[Vt.keyframes.length-1].t/Pt,0),Dt[0]=Nt.getValueAtTime((Nt.keyframes[Nt.keyframes.length-1].t-.01)/Pt,0),Dt[1]=Vt.getValueAtTime((Vt.keyframes[Vt.keyframes.length-1].t-.01)/Pt,0)):(Ft=[Nt.pv,Vt.pv],Dt[0]=Nt.getValueAtTime((Nt._caching.lastFrame+Nt.offsetTime-.01)/Pt,Nt.offsetTime),Dt[1]=Vt.getValueAtTime((Vt._caching.lastFrame+Vt.offsetTime-.01)/Pt,Vt.offsetTime))}else Ft=Dt=_t;this.v.rotate(-Math.atan2(Ft[1]-Dt[1],Ft[0]-Dt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],Tt),Tt.prototype.addDynamicProperty=function(Mt){this._addDynamicProperty(Mt),this.elem.addDynamicProperty(Mt),this._isDirty=!0},Tt.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(Mt,Pt,Ft){return new Tt(Mt,Pt,Ft)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function getFontProperties(_t){for(var Tt=_t.fStyle?_t.fStyle.split(" "):[],Mt="normal",Pt="normal",Ft=Tt.length,Dt=0;Dt<Ft;Dt+=1)switch(Tt[Dt].toLowerCase()){case"italic":Pt="italic";break;case"bold":Mt="700";break;case"black":Mt="900";break;case"medium":Mt="500";break;case"regular":case"normal":Mt="400";break;case"light":case"thin":Mt="200"}return{style:Pt,weight:_t.fWeight||Mt}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(_t,Tt){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(_t,Tt.c,0,null,this),this.o=PropertyFactory.getProp(_t,Tt.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(_t,Tt.tr,this),this.so=PropertyFactory.getProp(_t,Tt.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(_t,Tt.tr.eo,0,.01,this),this.data=Tt,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(_t,Tt,Mt,Pt,Ft,Dt){var Nt=Dt?-1:1,Vt=Pt.s.v[0]+(1-Pt.s.v[0])*(1-Ft),zt=Pt.s.v[1]+(1-Pt.s.v[1])*(1-Ft);_t.translate(Pt.p.v[0]*Nt*Ft,Pt.p.v[1]*Nt*Ft,Pt.p.v[2]),Tt.translate(-Pt.a.v[0],-Pt.a.v[1],Pt.a.v[2]),Tt.rotate(-Pt.r.v*Nt*Ft),Tt.translate(Pt.a.v[0],Pt.a.v[1],Pt.a.v[2]),Mt.translate(-Pt.a.v[0],-Pt.a.v[1],Pt.a.v[2]),Mt.scale(Dt?1/Vt:Vt,Dt?1/zt:zt),Mt.translate(Pt.a.v[0],Pt.a.v[1],Pt.a.v[2])},RepeaterModifier.prototype.init=function(_t,Tt,Mt,Pt){for(this.elem=_t,this.arr=Tt,this.pos=Mt,this.elemsData=Pt,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(_t),this.initModifierProperties(_t,Tt[Mt]);Mt>0;)Mt-=1,this._elements.unshift(Tt[Mt]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(_t){var Tt,Mt=_t.length;for(Tt=0;Tt<Mt;Tt+=1)_t[Tt]._processed=!1,_t[Tt].ty==="gr"&&this.resetElements(_t[Tt].it)},RepeaterModifier.prototype.cloneElements=function(_t){var Tt=JSON.parse(JSON.stringify(_t));return this.resetElements(Tt),Tt},RepeaterModifier.prototype.changeGroupRender=function(_t,Tt){var Mt,Pt=_t.length;for(Mt=0;Mt<Pt;Mt+=1)_t[Mt]._render=Tt,_t[Mt].ty==="gr"&&this.changeGroupRender(_t[Mt].it,Tt)},RepeaterModifier.prototype.processShapes=function(_t){var Tt,Mt,Pt,Ft,Dt,Nt=!1;if(this._mdf||_t){var Vt,zt=Math.ceil(this.c.v);if(this._groups.length<zt){for(;this._groups.length<zt;){var Xt={it:this.cloneElements(this._elements),ty:"gr"};Xt.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,Xt),this._groups.splice(0,0,Xt),this._currentCopies+=1}this.elem.reloadShapes(),Nt=!0}for(Dt=0,Pt=0;Pt<=this._groups.length-1;Pt+=1){if(Vt=Dt<zt,this._groups[Pt]._render=Vt,this.changeGroupRender(this._groups[Pt].it,Vt),!Vt){var Ht=this.elemsData[Pt].it,Wt=Ht[Ht.length-1];Wt.transform.op.v!==0?(Wt.transform.op._mdf=!0,Wt.transform.op.v=0):Wt.transform.op._mdf=!1}Dt+=1}this._currentCopies=zt;var Qt=this.o.v,Zt=Qt%1,Kt=Qt>0?Math.floor(Qt):Math.ceil(Qt),er=this.pMatrix.props,Yt=this.rMatrix.props,rr=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var ir,nr,ar=0;if(Qt>0){for(;ar<Kt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),ar+=1;Zt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,Zt,!1),ar+=Zt)}else if(Qt<0){for(;ar>Kt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),ar-=1;Zt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-Zt,!0),ar-=Zt)}for(Pt=this.data.m===1?0:this._currentCopies-1,Ft=this.data.m===1?1:-1,Dt=this._currentCopies;Dt;){if(nr=(Mt=(Tt=this.elemsData[Pt].it)[Tt.length-1].transform.mProps.v.props).length,Tt[Tt.length-1].transform.mProps._mdf=!0,Tt[Tt.length-1].transform.op._mdf=!0,Tt[Tt.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(Pt/(this._currentCopies-1)),ar!==0){for((Pt!==0&&Ft===1||Pt!==this._currentCopies-1&&Ft===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Yt[0],Yt[1],Yt[2],Yt[3],Yt[4],Yt[5],Yt[6],Yt[7],Yt[8],Yt[9],Yt[10],Yt[11],Yt[12],Yt[13],Yt[14],Yt[15]),this.matrix.transform(rr[0],rr[1],rr[2],rr[3],rr[4],rr[5],rr[6],rr[7],rr[8],rr[9],rr[10],rr[11],rr[12],rr[13],rr[14],rr[15]),this.matrix.transform(er[0],er[1],er[2],er[3],er[4],er[5],er[6],er[7],er[8],er[9],er[10],er[11],er[12],er[13],er[14],er[15]),ir=0;ir<nr;ir+=1)Mt[ir]=this.matrix.props[ir];this.matrix.reset()}else for(this.matrix.reset(),ir=0;ir<nr;ir+=1)Mt[ir]=this.matrix.props[ir];ar+=1,Dt-=1,Pt+=Ft}}else for(Dt=this._currentCopies,Pt=0,Ft=1;Dt;)Mt=(Tt=this.elemsData[Pt].it)[Tt.length-1].transform.mProps.v.props,Tt[Tt.length-1].transform.mProps._mdf=!1,Tt[Tt.length-1].transform.op._mdf=!1,Dt-=1,Pt+=Ft;return Nt},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(_t,Tt){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(_t,Tt.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(_t,Tt){var Mt,Pt=shapePool.newElement();Pt.c=_t.c;var Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt,Qt,Zt,Kt,er,Yt=_t._length,rr=0;for(Mt=0;Mt<Yt;Mt+=1)Ft=_t.v[Mt],Nt=_t.o[Mt],Dt=_t.i[Mt],Ft[0]===Nt[0]&&Ft[1]===Nt[1]&&Ft[0]===Dt[0]&&Ft[1]===Dt[1]?Mt!==0&&Mt!==Yt-1||_t.c?(Vt=Mt===0?_t.v[Yt-1]:_t.v[Mt-1],Xt=(zt=Math.sqrt(Math.pow(Ft[0]-Vt[0],2)+Math.pow(Ft[1]-Vt[1],2)))?Math.min(zt/2,Tt)/zt:0,Ht=Kt=Ft[0]+(Vt[0]-Ft[0])*Xt,Wt=er=Ft[1]-(Ft[1]-Vt[1])*Xt,Qt=Ht-(Ht-Ft[0])*roundCorner,Zt=Wt-(Wt-Ft[1])*roundCorner,Pt.setTripleAt(Ht,Wt,Qt,Zt,Kt,er,rr),rr+=1,Vt=Mt===Yt-1?_t.v[0]:_t.v[Mt+1],Xt=(zt=Math.sqrt(Math.pow(Ft[0]-Vt[0],2)+Math.pow(Ft[1]-Vt[1],2)))?Math.min(zt/2,Tt)/zt:0,Ht=Qt=Ft[0]+(Vt[0]-Ft[0])*Xt,Wt=Zt=Ft[1]+(Vt[1]-Ft[1])*Xt,Kt=Ht-(Ht-Ft[0])*roundCorner,er=Wt-(Wt-Ft[1])*roundCorner,Pt.setTripleAt(Ht,Wt,Qt,Zt,Kt,er,rr),rr+=1):(Pt.setTripleAt(Ft[0],Ft[1],Nt[0],Nt[1],Dt[0],Dt[1],rr),rr+=1):(Pt.setTripleAt(_t.v[Mt][0],_t.v[Mt][1],_t.o[Mt][0],_t.o[Mt][1],_t.i[Mt][0],_t.i[Mt][1],rr),rr+=1);return Pt},RoundCornersModifier.prototype.processShapes=function(_t){var Tt,Mt,Pt,Ft,Dt,Nt,Vt=this.shapes.length,zt=this.rd.v;if(zt!==0)for(Mt=0;Mt<Vt;Mt+=1){if(Nt=(Dt=this.shapes[Mt]).localShapeCollection,Dt.shape._mdf||this._mdf||_t)for(Nt.releaseShapes(),Dt.shape._mdf=!0,Tt=Dt.shape.paths.shapes,Ft=Dt.shape.paths._length,Pt=0;Pt<Ft;Pt+=1)Nt.addShape(this.processPath(Tt[Pt],zt));Dt.shape.paths=Dt.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var _t={w:0,size:0,shapes:[],data:{shapes:[]}},Tt=[];Tt=Tt.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var Mt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"],Pt=[65039,8205];function Ft(Vt,zt){var Xt=createTag("span");Xt.setAttribute("aria-hidden",!0),Xt.style.fontFamily=zt;var Ht=createTag("span");Ht.innerText="giItT1WQy@!-/#",Xt.style.position="absolute",Xt.style.left="-10000px",Xt.style.top="-10000px",Xt.style.fontSize="300px",Xt.style.fontVariant="normal",Xt.style.fontStyle="normal",Xt.style.fontWeight="normal",Xt.style.letterSpacing="0",Xt.appendChild(Ht),document.body.appendChild(Xt);var Wt=Ht.offsetWidth;return Ht.style.fontFamily=function(Qt){var Zt,Kt=Qt.split(","),er=Kt.length,Yt=[];for(Zt=0;Zt<er;Zt+=1)Kt[Zt]!=="sans-serif"&&Kt[Zt]!=="monospace"&&Yt.push(Kt[Zt]);return Yt.join(",")}(Vt)+", "+zt,{node:Ht,w:Wt,parent:Xt}}function Dt(Vt,zt){var Xt=createNS("text");Xt.style.fontSize="100px";var Ht=getFontProperties(zt);return Xt.setAttribute("font-family",zt.fFamily),Xt.setAttribute("font-style",Ht.style),Xt.setAttribute("font-weight",Ht.weight),Xt.textContent="1",zt.fClass?(Xt.style.fontFamily="inherit",Xt.setAttribute("class",zt.fClass)):Xt.style.fontFamily=zt.fFamily,Vt.appendChild(Xt),createTag("canvas").getContext("2d").font=zt.fWeight+" "+zt.fStyle+" 100px "+zt.fFamily,Xt}var Nt=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};return Nt.isModifier=function(Vt,zt){var Xt=Vt.toString(16)+zt.toString(16);return Mt.indexOf(Xt)!==-1},Nt.isZeroWidthJoiner=function(Vt,zt){return zt?Vt===Pt[0]&&zt===Pt[1]:Vt===Pt[1]},Nt.isCombinedCharacter=function(Vt){return Tt.indexOf(Vt)!==-1},Nt.prototype={addChars:function(Vt){if(Vt){var zt;this.chars||(this.chars=[]);var Xt,Ht,Wt=Vt.length,Qt=this.chars.length;for(zt=0;zt<Wt;zt+=1){for(Xt=0,Ht=!1;Xt<Qt;)this.chars[Xt].style===Vt[zt].style&&this.chars[Xt].fFamily===Vt[zt].fFamily&&this.chars[Xt].ch===Vt[zt].ch&&(Ht=!0),Xt+=1;Ht||(this.chars.push(Vt[zt]),Qt+=1)}}},addFonts:function(Vt,zt){if(Vt){if(this.chars)return this.isLoaded=!0,void(this.fonts=Vt.list);var Xt,Ht=Vt.list,Wt=Ht.length,Qt=Wt;for(Xt=0;Xt<Wt;Xt+=1){var Zt,Kt,er=!0;if(Ht[Xt].loaded=!1,Ht[Xt].monoCase=Ft(Ht[Xt].fFamily,"monospace"),Ht[Xt].sansCase=Ft(Ht[Xt].fFamily,"sans-serif"),Ht[Xt].fPath){if(Ht[Xt].fOrigin==="p"||Ht[Xt].origin===3){if((Zt=document.querySelectorAll('style[f-forigin="p"][f-family="'+Ht[Xt].fFamily+'"], style[f-origin="3"][f-family="'+Ht[Xt].fFamily+'"]')).length>0&&(er=!1),er){var Yt=createTag("style");Yt.setAttribute("f-forigin",Ht[Xt].fOrigin),Yt.setAttribute("f-origin",Ht[Xt].origin),Yt.setAttribute("f-family",Ht[Xt].fFamily),Yt.type="text/css",Yt.innerText="@font-face {font-family: "+Ht[Xt].fFamily+"; font-style: normal; src: url('"+Ht[Xt].fPath+"');}",zt.appendChild(Yt)}}else if(Ht[Xt].fOrigin==="g"||Ht[Xt].origin===1){for(Zt=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Kt=0;Kt<Zt.length;Kt+=1)Zt[Kt].href.indexOf(Ht[Xt].fPath)!==-1&&(er=!1);if(er){var rr=createTag("link");rr.setAttribute("f-forigin",Ht[Xt].fOrigin),rr.setAttribute("f-origin",Ht[Xt].origin),rr.type="text/css",rr.rel="stylesheet",rr.href=Ht[Xt].fPath,document.body.appendChild(rr)}}else if(Ht[Xt].fOrigin==="t"||Ht[Xt].origin===2){for(Zt=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Kt=0;Kt<Zt.length;Kt+=1)Ht[Xt].fPath===Zt[Kt].src&&(er=!1);if(er){var ir=createTag("link");ir.setAttribute("f-forigin",Ht[Xt].fOrigin),ir.setAttribute("f-origin",Ht[Xt].origin),ir.setAttribute("rel","stylesheet"),ir.setAttribute("href",Ht[Xt].fPath),zt.appendChild(ir)}}}else Ht[Xt].loaded=!0,Qt-=1;Ht[Xt].helper=Dt(zt,Ht[Xt]),Ht[Xt].cache={},this.fonts.push(Ht[Xt])}Qt===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(Vt,zt,Xt){for(var Ht=0,Wt=this.chars.length;Ht<Wt;){if(this.chars[Ht].ch===Vt&&this.chars[Ht].style===zt&&this.chars[Ht].fFamily===Xt)return this.chars[Ht];Ht+=1}return(typeof Vt=="string"&&Vt.charCodeAt(0)!==13||!Vt)&&console&&console.warn&&!this._warned&&(this._warned=!0),_t},getFontByName:function(Vt){for(var zt=0,Xt=this.fonts.length;zt<Xt;){if(this.fonts[zt].fName===Vt)return this.fonts[zt];zt+=1}return this.fonts[0]},measureText:function(Vt,zt,Xt){var Ht=this.getFontByName(zt),Wt=Vt.charCodeAt(0);if(!Ht.cache[Wt+1]){var Qt=Ht.helper;if(Vt===" "){Qt.textContent="|"+Vt+"|";var Zt=Qt.getComputedTextLength();Qt.textContent="||";var Kt=Qt.getComputedTextLength();Ht.cache[Wt+1]=(Zt-Kt)/100}else Qt.textContent=Vt,Ht.cache[Wt+1]=Qt.getComputedTextLength()/100}return Ht.cache[Wt+1]*Xt},checkLoadedFonts:function(){var Vt,zt,Xt,Ht=this.fonts.length,Wt=Ht;for(Vt=0;Vt<Ht;Vt+=1)this.fonts[Vt].loaded?Wt-=1:this.fonts[Vt].fOrigin==="n"||this.fonts[Vt].origin===0?this.fonts[Vt].loaded=!0:(zt=this.fonts[Vt].monoCase.node,Xt=this.fonts[Vt].monoCase.w,zt.offsetWidth!==Xt?(Wt-=1,this.fonts[Vt].loaded=!0):(zt=this.fonts[Vt].sansCase.node,Xt=this.fonts[Vt].sansCase.w,zt.offsetWidth!==Xt&&(Wt-=1,this.fonts[Vt].loaded=!0)),this.fonts[Vt].loaded&&(this.fonts[Vt].sansCase.parent.parentNode.removeChild(this.fonts[Vt].sansCase.parent),this.fonts[Vt].monoCase.parent.parentNode.removeChild(this.fonts[Vt].monoCase.parent)));Wt!==0&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}},Nt}();function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(_t){this.renderableComponents.indexOf(_t)===-1&&this.renderableComponents.push(_t)},removeRenderableComponent:function(_t){this.renderableComponents.indexOf(_t)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(_t),1)},prepareRenderableFrame:function(_t){this.checkLayerLimits(_t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(_t){this.data.ip-this.data.st<=_t&&this.data.op-this.data.st>_t?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var _t,Tt=this.renderableComponents.length;for(_t=0;_t<Tt;_t+=1)this.renderableComponents[_t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var MaskManagerInterface=function(){function _t(Tt,Mt){this._mask=Tt,this._data=Mt}return Object.defineProperty(_t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(_t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(Tt){var Mt,Pt=createSizedArray(Tt.viewData.length),Ft=Tt.viewData.length;for(Mt=0;Mt<Ft;Mt+=1)Pt[Mt]=new _t(Tt.viewData[Mt],Tt.masksProperties[Mt]);return function(Dt){for(Mt=0;Mt<Ft;){if(Tt.masksProperties[Mt].nm===Dt)return Pt[Mt];Mt+=1}return null}}}(),ExpressionPropertyInterface=function(){var _t={pv:0,v:0,mult:1},Tt={pv:[0,0,0],v:[0,0,0],mult:1};function Mt(Ft,Dt,Nt){Object.defineProperty(Ft,"velocity",{get:function(){return Dt.getVelocityAtTime(Dt.comp.currentFrame)}}),Ft.numKeys=Dt.keyframes?Dt.keyframes.length:0,Ft.key=function(Vt){if(!Ft.numKeys)return 0;var zt="";zt="s"in Dt.keyframes[Vt-1]?Dt.keyframes[Vt-1].s:"e"in Dt.keyframes[Vt-2]?Dt.keyframes[Vt-2].e:Dt.keyframes[Vt-2].s;var Xt=Nt==="unidimensional"?new Number(zt):Object.assign({},zt);return Xt.time=Dt.keyframes[Vt-1].t/Dt.elem.comp.globalData.frameRate,Xt.value=Nt==="unidimensional"?zt[0]:zt,Xt},Ft.valueAtTime=Dt.getValueAtTime,Ft.speedAtTime=Dt.getSpeedAtTime,Ft.velocityAtTime=Dt.getVelocityAtTime,Ft.propertyGroup=Dt.propertyGroup}function Pt(){return _t}return function(Ft){return Ft?Ft.propType==="unidimensional"?function(Dt){Dt&&"pv"in Dt||(Dt=_t);var Nt=1/Dt.mult,Vt=Dt.pv*Nt,zt=new Number(Vt);return zt.value=Vt,Mt(zt,Dt,"unidimensional"),function(){return Dt.k&&Dt.getValue(),Vt=Dt.v*Nt,zt.value!==Vt&&((zt=new Number(Vt)).value=Vt,Mt(zt,Dt,"unidimensional")),zt}}(Ft):function(Dt){Dt&&"pv"in Dt||(Dt=Tt);var Nt=1/Dt.mult,Vt=Dt.data&&Dt.data.l||Dt.pv.length,zt=createTypedArray("float32",Vt),Xt=createTypedArray("float32",Vt);return zt.value=Xt,Mt(zt,Dt,"multidimensional"),function(){Dt.k&&Dt.getValue();for(var Ht=0;Ht<Vt;Ht+=1)Xt[Ht]=Dt.v[Ht]*Nt,zt[Ht]=Xt[Ht];return zt}}(Ft):Pt}}(),TransformExpressionInterface=function(_t){function Tt(Nt){switch(Nt){case"scale":case"Scale":case"ADBE Scale":case 6:return Tt.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return Tt.rotation;case"ADBE Rotate X":return Tt.xRotation;case"ADBE Rotate Y":return Tt.yRotation;case"position":case"Position":case"ADBE Position":case 2:return Tt.position;case"ADBE Position_0":return Tt.xPosition;case"ADBE Position_1":return Tt.yPosition;case"ADBE Position_2":return Tt.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return Tt.anchorPoint;case"opacity":case"Opacity":case 11:return Tt.opacity;default:return null}}var Mt,Pt,Ft,Dt;return Object.defineProperty(Tt,"rotation",{get:ExpressionPropertyInterface(_t.r||_t.rz)}),Object.defineProperty(Tt,"zRotation",{get:ExpressionPropertyInterface(_t.rz||_t.r)}),Object.defineProperty(Tt,"xRotation",{get:ExpressionPropertyInterface(_t.rx)}),Object.defineProperty(Tt,"yRotation",{get:ExpressionPropertyInterface(_t.ry)}),Object.defineProperty(Tt,"scale",{get:ExpressionPropertyInterface(_t.s)}),_t.p?Dt=ExpressionPropertyInterface(_t.p):(Mt=ExpressionPropertyInterface(_t.px),Pt=ExpressionPropertyInterface(_t.py),_t.pz&&(Ft=ExpressionPropertyInterface(_t.pz))),Object.defineProperty(Tt,"position",{get:function(){return _t.p?Dt():[Mt(),Pt(),Ft?Ft():0]}}),Object.defineProperty(Tt,"xPosition",{get:ExpressionPropertyInterface(_t.px)}),Object.defineProperty(Tt,"yPosition",{get:ExpressionPropertyInterface(_t.py)}),Object.defineProperty(Tt,"zPosition",{get:ExpressionPropertyInterface(_t.pz)}),Object.defineProperty(Tt,"anchorPoint",{get:ExpressionPropertyInterface(_t.a)}),Object.defineProperty(Tt,"opacity",{get:ExpressionPropertyInterface(_t.o)}),Object.defineProperty(Tt,"skew",{get:ExpressionPropertyInterface(_t.sk)}),Object.defineProperty(Tt,"skewAxis",{get:ExpressionPropertyInterface(_t.sa)}),Object.defineProperty(Tt,"orientation",{get:ExpressionPropertyInterface(_t.or)}),Tt},LayerExpressionInterface=function(){function _t(Xt){var Ht=new Matrix;return Xt!==void 0?this._elem.finalTransform.mProp.getValueAtTime(Xt).clone(Ht):this._elem.finalTransform.mProp.applyToMatrix(Ht),Ht}function Tt(Xt,Ht){var Wt=this.getMatrix(Ht);return Wt.props[12]=0,Wt.props[13]=0,Wt.props[14]=0,this.applyPoint(Wt,Xt)}function Mt(Xt,Ht){var Wt=this.getMatrix(Ht);return this.applyPoint(Wt,Xt)}function Pt(Xt,Ht){var Wt=this.getMatrix(Ht);return Wt.props[12]=0,Wt.props[13]=0,Wt.props[14]=0,this.invertPoint(Wt,Xt)}function Ft(Xt,Ht){var Wt=this.getMatrix(Ht);return this.invertPoint(Wt,Xt)}function Dt(Xt,Ht){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Wt,Qt=this._elem.hierarchy.length;for(Wt=0;Wt<Qt;Wt+=1)this._elem.hierarchy[Wt].finalTransform.mProp.applyToMatrix(Xt)}return Xt.applyToPointArray(Ht[0],Ht[1],Ht[2]||0)}function Nt(Xt,Ht){if(this._elem.hierarchy&&this._elem.hierarchy.length){var Wt,Qt=this._elem.hierarchy.length;for(Wt=0;Wt<Qt;Wt+=1)this._elem.hierarchy[Wt].finalTransform.mProp.applyToMatrix(Xt)}return Xt.inversePoint(Ht)}function Vt(Xt){var Ht=new Matrix;if(Ht.reset(),this._elem.finalTransform.mProp.applyToMatrix(Ht),this._elem.hierarchy&&this._elem.hierarchy.length){var Wt,Qt=this._elem.hierarchy.length;for(Wt=0;Wt<Qt;Wt+=1)this._elem.hierarchy[Wt].finalTransform.mProp.applyToMatrix(Ht);return Ht.inversePoint(Xt)}return Ht.inversePoint(Xt)}function zt(){return[1,1,1,1]}return function(Xt){var Ht;function Wt(Zt){switch(Zt){case"ADBE Root Vectors Group":case"Contents":case 2:return Wt.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return Ht;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return Wt.effect;case"ADBE Text Properties":return Wt.textInterface;default:return null}}Wt.getMatrix=_t,Wt.invertPoint=Nt,Wt.applyPoint=Dt,Wt.toWorld=Mt,Wt.toWorldVec=Tt,Wt.fromWorld=Ft,Wt.fromWorldVec=Pt,Wt.toComp=Mt,Wt.fromComp=Vt,Wt.sampleImage=zt,Wt.sourceRectAtTime=Xt.sourceRectAtTime.bind(Xt),Wt._elem=Xt;var Qt=getDescriptor(Ht=TransformExpressionInterface(Xt.finalTransform.mProp),"anchorPoint");return Object.defineProperties(Wt,{hasParent:{get:function(){return Xt.hierarchy.length}},parent:{get:function(){return Xt.hierarchy[0].layerInterface}},rotation:getDescriptor(Ht,"rotation"),scale:getDescriptor(Ht,"scale"),position:getDescriptor(Ht,"position"),opacity:getDescriptor(Ht,"opacity"),anchorPoint:Qt,anchor_point:Qt,transform:{get:function(){return Ht}},active:{get:function(){return Xt.isInRange}}}),Wt.startTime=Xt.data.st,Wt.index=Xt.data.ind,Wt.source=Xt.data.refId,Wt.height=Xt.data.ty===0?Xt.data.h:100,Wt.width=Xt.data.ty===0?Xt.data.w:100,Wt.inPoint=Xt.data.ip/Xt.comp.globalData.frameRate,Wt.outPoint=Xt.data.op/Xt.comp.globalData.frameRate,Wt._name=Xt.data.nm,Wt.registerMaskInterface=function(Zt){Wt.mask=new MaskManagerInterface(Zt,Xt)},Wt.registerEffectsInterface=function(Zt){Wt.effect=Zt},Wt}}(),propertyGroupFactory=function(_t,Tt){return function(Mt){return(Mt=Mt===void 0?1:Mt)<=0?_t:Tt(Mt-1)}},PropertyInterface=function(_t,Tt){var Mt={_name:_t};return function(Pt){return(Pt=Pt===void 0?1:Pt)<=0?Mt:Tt(Pt-1)}},EffectsExpressionInterface=function(){function _t(Mt,Pt,Ft,Dt){function Nt(Wt){for(var Qt=Mt.ef,Zt=0,Kt=Qt.length;Zt<Kt;){if(Wt===Qt[Zt].nm||Wt===Qt[Zt].mn||Wt===Qt[Zt].ix)return Qt[Zt].ty===5?Xt[Zt]:Xt[Zt]();Zt+=1}throw new Error}var Vt,zt=propertyGroupFactory(Nt,Ft),Xt=[],Ht=Mt.ef.length;for(Vt=0;Vt<Ht;Vt+=1)Mt.ef[Vt].ty===5?Xt.push(_t(Mt.ef[Vt],Pt.effectElements[Vt],Pt.effectElements[Vt].propertyGroup,Dt)):Xt.push(Tt(Pt.effectElements[Vt],Mt.ef[Vt].ty,Dt,zt));return Mt.mn==="ADBE Color Control"&&Object.defineProperty(Nt,"color",{get:function(){return Xt[0]()}}),Object.defineProperties(Nt,{numProperties:{get:function(){return Mt.np}},_name:{value:Mt.nm},propertyGroup:{value:zt}}),Nt.enabled=Mt.en!==0,Nt.active=Nt.enabled,Nt}function Tt(Mt,Pt,Ft,Dt){var Nt=ExpressionPropertyInterface(Mt.p);return Mt.p.setGroupProperty&&Mt.p.setGroupProperty(PropertyInterface("",Dt)),function(){return Pt===10?Ft.comp.compInterface(Mt.p.v):Nt()}}return{createEffectsInterface:function(Mt,Pt){if(Mt.effectsManager){var Ft,Dt=[],Nt=Mt.data.ef,Vt=Mt.effectsManager.effectElements.length;for(Ft=0;Ft<Vt;Ft+=1)Dt.push(_t(Nt[Ft],Mt.effectsManager.effectElements[Ft],Pt,Mt));var zt=Mt.data.ef||[],Xt=function(Ht){for(Ft=0,Vt=zt.length;Ft<Vt;){if(Ht===zt[Ft].nm||Ht===zt[Ft].mn||Ht===zt[Ft].ix)return Dt[Ft];Ft+=1}return null};return Object.defineProperty(Xt,"numProperties",{get:function(){return zt.length}}),Xt}return null}}}(),CompExpressionInterface=function(_t){function Tt(Mt){for(var Pt=0,Ft=_t.layers.length;Pt<Ft;){if(_t.layers[Pt].nm===Mt||_t.layers[Pt].ind===Mt)return _t.elements[Pt].layerInterface;Pt+=1}return null}return Object.defineProperty(Tt,"_name",{value:_t.data.nm}),Tt.layer=Tt,Tt.pixelAspect=1,Tt.height=_t.data.h||_t.globalData.compSize.h,Tt.width=_t.data.w||_t.globalData.compSize.w,Tt.pixelAspect=1,Tt.frameDuration=1/_t.globalData.frameRate,Tt.displayStartTime=0,Tt.numLayers=_t.layers.length,Tt},ShapePathInterface=function(_t,Tt,Mt){var Pt=Tt.sh;function Ft(Nt){return Nt==="Shape"||Nt==="shape"||Nt==="Path"||Nt==="path"||Nt==="ADBE Vector Shape"||Nt===2?Ft.path:null}var Dt=propertyGroupFactory(Ft,Mt);return Pt.setGroupProperty(PropertyInterface("Path",Dt)),Object.defineProperties(Ft,{path:{get:function(){return Pt.k&&Pt.getValue(),Pt}},shape:{get:function(){return Pt.k&&Pt.getValue(),Pt}},_name:{value:_t.nm},ix:{value:_t.ix},propertyIndex:{value:_t.ix},mn:{value:_t.mn},propertyGroup:{value:Mt}}),Ft},ShapeExpressionInterface=function(){function _t(Zt,Kt,er){var Yt,rr=[],ir=Zt?Zt.length:0;for(Yt=0;Yt<ir;Yt+=1)Zt[Yt].ty==="gr"?rr.push(Tt(Zt[Yt],Kt[Yt],er)):Zt[Yt].ty==="fl"?rr.push(Mt(Zt[Yt],Kt[Yt],er)):Zt[Yt].ty==="st"?rr.push(Dt(Zt[Yt],Kt[Yt],er)):Zt[Yt].ty==="tm"?rr.push(Nt(Zt[Yt],Kt[Yt],er)):Zt[Yt].ty==="tr"||(Zt[Yt].ty==="el"?rr.push(zt(Zt[Yt],Kt[Yt],er)):Zt[Yt].ty==="sr"?rr.push(Xt(Zt[Yt],Kt[Yt],er)):Zt[Yt].ty==="sh"?rr.push(ShapePathInterface(Zt[Yt],Kt[Yt],er)):Zt[Yt].ty==="rc"?rr.push(Ht(Zt[Yt],Kt[Yt],er)):Zt[Yt].ty==="rd"?rr.push(Wt(Zt[Yt],Kt[Yt],er)):Zt[Yt].ty==="rp"?rr.push(Qt(Zt[Yt],Kt[Yt],er)):Zt[Yt].ty==="gf"?rr.push(Pt(Zt[Yt],Kt[Yt],er)):rr.push(Ft(Zt[Yt],Kt[Yt])));return rr}function Tt(Zt,Kt,er){var Yt=function(nr){switch(nr){case"ADBE Vectors Group":case"Contents":case 2:return Yt.content;default:return Yt.transform}};Yt.propertyGroup=propertyGroupFactory(Yt,er);var rr=function(nr,ar,or){var ur,dr=function(gr){for(var pr=0,mr=ur.length;pr<mr;){if(ur[pr]._name===gr||ur[pr].mn===gr||ur[pr].propertyIndex===gr||ur[pr].ix===gr||ur[pr].ind===gr)return ur[pr];pr+=1}return typeof gr=="number"?ur[gr-1]:null};dr.propertyGroup=propertyGroupFactory(dr,or),ur=_t(nr.it,ar.it,dr.propertyGroup),dr.numProperties=ur.length;var hr=Vt(nr.it[nr.it.length-1],ar.it[ar.it.length-1],dr.propertyGroup);return dr.transform=hr,dr.propertyIndex=nr.cix,dr._name=nr.nm,dr}(Zt,Kt,Yt.propertyGroup),ir=Vt(Zt.it[Zt.it.length-1],Kt.it[Kt.it.length-1],Yt.propertyGroup);return Yt.content=rr,Yt.transform=ir,Object.defineProperty(Yt,"_name",{get:function(){return Zt.nm}}),Yt.numProperties=Zt.np,Yt.propertyIndex=Zt.ix,Yt.nm=Zt.nm,Yt.mn=Zt.mn,Yt}function Mt(Zt,Kt,er){function Yt(rr){return rr==="Color"||rr==="color"?Yt.color:rr==="Opacity"||rr==="opacity"?Yt.opacity:null}return Object.defineProperties(Yt,{color:{get:ExpressionPropertyInterface(Kt.c)},opacity:{get:ExpressionPropertyInterface(Kt.o)},_name:{value:Zt.nm},mn:{value:Zt.mn}}),Kt.c.setGroupProperty(PropertyInterface("Color",er)),Kt.o.setGroupProperty(PropertyInterface("Opacity",er)),Yt}function Pt(Zt,Kt,er){function Yt(rr){return rr==="Start Point"||rr==="start point"?Yt.startPoint:rr==="End Point"||rr==="end point"?Yt.endPoint:rr==="Opacity"||rr==="opacity"?Yt.opacity:null}return Object.defineProperties(Yt,{startPoint:{get:ExpressionPropertyInterface(Kt.s)},endPoint:{get:ExpressionPropertyInterface(Kt.e)},opacity:{get:ExpressionPropertyInterface(Kt.o)},type:{get:function(){return"a"}},_name:{value:Zt.nm},mn:{value:Zt.mn}}),Kt.s.setGroupProperty(PropertyInterface("Start Point",er)),Kt.e.setGroupProperty(PropertyInterface("End Point",er)),Kt.o.setGroupProperty(PropertyInterface("Opacity",er)),Yt}function Ft(){return function(){return null}}function Dt(Zt,Kt,er){var Yt,rr=propertyGroupFactory(ur,er),ir=propertyGroupFactory(or,rr);function nr(dr){Object.defineProperty(or,Zt.d[dr].nm,{get:ExpressionPropertyInterface(Kt.d.dataProps[dr].p)})}var ar=Zt.d?Zt.d.length:0,or={};for(Yt=0;Yt<ar;Yt+=1)nr(Yt),Kt.d.dataProps[Yt].p.setGroupProperty(ir);function ur(dr){return dr==="Color"||dr==="color"?ur.color:dr==="Opacity"||dr==="opacity"?ur.opacity:dr==="Stroke Width"||dr==="stroke width"?ur.strokeWidth:null}return Object.defineProperties(ur,{color:{get:ExpressionPropertyInterface(Kt.c)},opacity:{get:ExpressionPropertyInterface(Kt.o)},strokeWidth:{get:ExpressionPropertyInterface(Kt.w)},dash:{get:function(){return or}},_name:{value:Zt.nm},mn:{value:Zt.mn}}),Kt.c.setGroupProperty(PropertyInterface("Color",rr)),Kt.o.setGroupProperty(PropertyInterface("Opacity",rr)),Kt.w.setGroupProperty(PropertyInterface("Stroke Width",rr)),ur}function Nt(Zt,Kt,er){function Yt(ir){return ir===Zt.e.ix||ir==="End"||ir==="end"?Yt.end:ir===Zt.s.ix?Yt.start:ir===Zt.o.ix?Yt.offset:null}var rr=propertyGroupFactory(Yt,er);return Yt.propertyIndex=Zt.ix,Kt.s.setGroupProperty(PropertyInterface("Start",rr)),Kt.e.setGroupProperty(PropertyInterface("End",rr)),Kt.o.setGroupProperty(PropertyInterface("Offset",rr)),Yt.propertyIndex=Zt.ix,Yt.propertyGroup=er,Object.defineProperties(Yt,{start:{get:ExpressionPropertyInterface(Kt.s)},end:{get:ExpressionPropertyInterface(Kt.e)},offset:{get:ExpressionPropertyInterface(Kt.o)},_name:{value:Zt.nm}}),Yt.mn=Zt.mn,Yt}function Vt(Zt,Kt,er){function Yt(ir){return Zt.a.ix===ir||ir==="Anchor Point"?Yt.anchorPoint:Zt.o.ix===ir||ir==="Opacity"?Yt.opacity:Zt.p.ix===ir||ir==="Position"?Yt.position:Zt.r.ix===ir||ir==="Rotation"||ir==="ADBE Vector Rotation"?Yt.rotation:Zt.s.ix===ir||ir==="Scale"?Yt.scale:Zt.sk&&Zt.sk.ix===ir||ir==="Skew"?Yt.skew:Zt.sa&&Zt.sa.ix===ir||ir==="Skew Axis"?Yt.skewAxis:null}var rr=propertyGroupFactory(Yt,er);return Kt.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",rr)),Kt.transform.mProps.p.setGroupProperty(PropertyInterface("Position",rr)),Kt.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",rr)),Kt.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",rr)),Kt.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",rr)),Kt.transform.mProps.sk&&(Kt.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",rr)),Kt.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",rr))),Kt.transform.op.setGroupProperty(PropertyInterface("Opacity",rr)),Object.defineProperties(Yt,{opacity:{get:ExpressionPropertyInterface(Kt.transform.mProps.o)},position:{get:ExpressionPropertyInterface(Kt.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(Kt.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(Kt.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(Kt.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(Kt.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(Kt.transform.mProps.sa)},_name:{value:Zt.nm}}),Yt.ty="tr",Yt.mn=Zt.mn,Yt.propertyGroup=er,Yt}function zt(Zt,Kt,er){function Yt(nr){return Zt.p.ix===nr?Yt.position:Zt.s.ix===nr?Yt.size:null}var rr=propertyGroupFactory(Yt,er);Yt.propertyIndex=Zt.ix;var ir=Kt.sh.ty==="tm"?Kt.sh.prop:Kt.sh;return ir.s.setGroupProperty(PropertyInterface("Size",rr)),ir.p.setGroupProperty(PropertyInterface("Position",rr)),Object.defineProperties(Yt,{size:{get:ExpressionPropertyInterface(ir.s)},position:{get:ExpressionPropertyInterface(ir.p)},_name:{value:Zt.nm}}),Yt.mn=Zt.mn,Yt}function Xt(Zt,Kt,er){function Yt(nr){return Zt.p.ix===nr?Yt.position:Zt.r.ix===nr?Yt.rotation:Zt.pt.ix===nr?Yt.points:Zt.or.ix===nr||nr==="ADBE Vector Star Outer Radius"?Yt.outerRadius:Zt.os.ix===nr?Yt.outerRoundness:!Zt.ir||Zt.ir.ix!==nr&&nr!=="ADBE Vector Star Inner Radius"?Zt.is&&Zt.is.ix===nr?Yt.innerRoundness:null:Yt.innerRadius}var rr=propertyGroupFactory(Yt,er),ir=Kt.sh.ty==="tm"?Kt.sh.prop:Kt.sh;return Yt.propertyIndex=Zt.ix,ir.or.setGroupProperty(PropertyInterface("Outer Radius",rr)),ir.os.setGroupProperty(PropertyInterface("Outer Roundness",rr)),ir.pt.setGroupProperty(PropertyInterface("Points",rr)),ir.p.setGroupProperty(PropertyInterface("Position",rr)),ir.r.setGroupProperty(PropertyInterface("Rotation",rr)),Zt.ir&&(ir.ir.setGroupProperty(PropertyInterface("Inner Radius",rr)),ir.is.setGroupProperty(PropertyInterface("Inner Roundness",rr))),Object.defineProperties(Yt,{position:{get:ExpressionPropertyInterface(ir.p)},rotation:{get:ExpressionPropertyInterface(ir.r)},points:{get:ExpressionPropertyInterface(ir.pt)},outerRadius:{get:ExpressionPropertyInterface(ir.or)},outerRoundness:{get:ExpressionPropertyInterface(ir.os)},innerRadius:{get:ExpressionPropertyInterface(ir.ir)},innerRoundness:{get:ExpressionPropertyInterface(ir.is)},_name:{value:Zt.nm}}),Yt.mn=Zt.mn,Yt}function Ht(Zt,Kt,er){function Yt(nr){return Zt.p.ix===nr?Yt.position:Zt.r.ix===nr?Yt.roundness:Zt.s.ix===nr||nr==="Size"||nr==="ADBE Vector Rect Size"?Yt.size:null}var rr=propertyGroupFactory(Yt,er),ir=Kt.sh.ty==="tm"?Kt.sh.prop:Kt.sh;return Yt.propertyIndex=Zt.ix,ir.p.setGroupProperty(PropertyInterface("Position",rr)),ir.s.setGroupProperty(PropertyInterface("Size",rr)),ir.r.setGroupProperty(PropertyInterface("Rotation",rr)),Object.defineProperties(Yt,{position:{get:ExpressionPropertyInterface(ir.p)},roundness:{get:ExpressionPropertyInterface(ir.r)},size:{get:ExpressionPropertyInterface(ir.s)},_name:{value:Zt.nm}}),Yt.mn=Zt.mn,Yt}function Wt(Zt,Kt,er){function Yt(nr){return Zt.r.ix===nr||nr==="Round Corners 1"?Yt.radius:null}var rr=propertyGroupFactory(Yt,er),ir=Kt;return Yt.propertyIndex=Zt.ix,ir.rd.setGroupProperty(PropertyInterface("Radius",rr)),Object.defineProperties(Yt,{radius:{get:ExpressionPropertyInterface(ir.rd)},_name:{value:Zt.nm}}),Yt.mn=Zt.mn,Yt}function Qt(Zt,Kt,er){function Yt(nr){return Zt.c.ix===nr||nr==="Copies"?Yt.copies:Zt.o.ix===nr||nr==="Offset"?Yt.offset:null}var rr=propertyGroupFactory(Yt,er),ir=Kt;return Yt.propertyIndex=Zt.ix,ir.c.setGroupProperty(PropertyInterface("Copies",rr)),ir.o.setGroupProperty(PropertyInterface("Offset",rr)),Object.defineProperties(Yt,{copies:{get:ExpressionPropertyInterface(ir.c)},offset:{get:ExpressionPropertyInterface(ir.o)},_name:{value:Zt.nm}}),Yt.mn=Zt.mn,Yt}return function(Zt,Kt,er){var Yt;function rr(ir){if(typeof ir=="number")return(ir=ir===void 0?1:ir)===0?er:Yt[ir-1];for(var nr=0,ar=Yt.length;nr<ar;){if(Yt[nr]._name===ir)return Yt[nr];nr+=1}return null}return rr.propertyGroup=propertyGroupFactory(rr,function(){return er}),Yt=_t(Zt,Kt,rr.propertyGroup),rr.numProperties=Yt.length,rr._name="Contents",rr}}(),TextExpressionInterface=function(_t){var Tt;function Mt(Pt){switch(Pt){case"ADBE Text Document":return Mt.sourceText;default:return null}}return Object.defineProperty(Mt,"sourceText",{get:function(){_t.textProperty.getValue();var Pt=_t.textProperty.currentData.t;return Pt!==void 0&&(_t.textProperty.currentData.t=void 0,(Tt=new String(Pt)).value=Pt||new String(Pt)),Tt}}),Mt},getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(_t){return blendModeEnums[_t]||""}),blendModeEnums;function SliderEffect(_t,Tt,Mt){this.p=PropertyFactory.getProp(Tt,_t.v,0,0,Mt)}function AngleEffect(_t,Tt,Mt){this.p=PropertyFactory.getProp(Tt,_t.v,0,0,Mt)}function ColorEffect(_t,Tt,Mt){this.p=PropertyFactory.getProp(Tt,_t.v,1,0,Mt)}function PointEffect(_t,Tt,Mt){this.p=PropertyFactory.getProp(Tt,_t.v,1,0,Mt)}function LayerIndexEffect(_t,Tt,Mt){this.p=PropertyFactory.getProp(Tt,_t.v,0,0,Mt)}function MaskIndexEffect(_t,Tt,Mt){this.p=PropertyFactory.getProp(Tt,_t.v,0,0,Mt)}function CheckboxEffect(_t,Tt,Mt){this.p=PropertyFactory.getProp(Tt,_t.v,0,0,Mt)}function NoValueEffect(){this.p={}}function EffectsManager(_t,Tt){var Mt,Pt=_t.ef||[];this.effectElements=[];var Ft,Dt=Pt.length;for(Mt=0;Mt<Dt;Mt+=1)Ft=new GroupEffect(Pt[Mt],Tt),this.effectElements.push(Ft)}function GroupEffect(_t,Tt){this.init(_t,Tt)}function BaseElement(){}function FrameElement(){}function _typeof$2(_t){return(_typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tt){return typeof Tt}:function(Tt){return Tt&&typeof Symbol=="function"&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt})(_t)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(_t,Tt){var Mt;this.data=_t,this.effectElements=[],this.initDynamicPropertyContainer(Tt);var Pt,Ft=this.data.ef.length,Dt=this.data.ef;for(Mt=0;Mt<Ft;Mt+=1){switch(Pt=null,Dt[Mt].ty){case 0:Pt=new SliderEffect(Dt[Mt],Tt,this);break;case 1:Pt=new AngleEffect(Dt[Mt],Tt,this);break;case 2:Pt=new ColorEffect(Dt[Mt],Tt,this);break;case 3:Pt=new PointEffect(Dt[Mt],Tt,this);break;case 4:case 7:Pt=new CheckboxEffect(Dt[Mt],Tt,this);break;case 10:Pt=new LayerIndexEffect(Dt[Mt],Tt,this);break;case 11:Pt=new MaskIndexEffect(Dt[Mt],Tt,this);break;case 5:Pt=new EffectsManager(Dt[Mt],Tt);break;default:Pt=new NoValueEffect(Dt[Mt])}Pt&&this.effectElements.push(Pt)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var _t=0,Tt=this.data.masksProperties.length;_t<Tt;){if(this.data.masksProperties[_t].mode!=="n"&&this.data.masksProperties[_t].cl!==!1)return!0;_t+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var _t=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(_t),this.data.ty===0||this.data.xt?this.compInterface=CompExpressionInterface(this):this.data.ty===4?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var _t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=_t},initBaseData:function(_t,Tt,Mt){this.globalData=Tt,this.comp=Mt,this.data=_t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(_t,Tt){var Mt,Pt=this.dynamicProperties.length;for(Mt=0;Mt<Pt;Mt+=1)(Tt||this._isParent&&this.dynamicProperties[Mt].propType==="transform")&&(this.dynamicProperties[Mt].getValue(),this.dynamicProperties[Mt]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(_t){this.dynamicProperties.indexOf(_t)===-1&&this.dynamicProperties.push(_t)}};var FootageInterface=(dataInterfaceFactory=function(_t){function Tt(Mt){return Mt==="Outline"?Tt.outlineInterface():null}return Tt._name="Outline",Tt.outlineInterface=function(Mt){var Pt="",Ft=Mt.getFootageData();function Dt(Nt){if(Ft[Nt])return Pt=Nt,_typeof$2(Ft=Ft[Nt])==="object"?Dt:Ft;var Vt=Nt.indexOf(Pt);if(Vt!==-1){var zt=parseInt(Nt.substr(Vt+Pt.length),10);return _typeof$2(Ft=Ft[zt])==="object"?Dt:Ft}return""}return function(){return Pt="",Ft=Mt.getFootageData(),Dt}}(_t),Tt},function(_t){function Tt(Mt){return Mt==="Data"?Tt.dataInterface:null}return Tt._name="Data",Tt.dataInterface=dataInterfaceFactory(_t),Tt}),dataInterfaceFactory;function FootageElement(_t,Tt,Mt){this.initFrame(),this.initRenderable(),this.assetData=Tt.getAssetData(_t.refId),this.footageData=Tt.imageLoader.getAsset(this.assetData),this.initBaseData(_t,Tt,Mt)}function AudioElement(_t,Tt,Mt){this.initFrame(),this.initRenderable(),this.assetData=Tt.getAssetData(_t.refId),this.initBaseData(_t,Tt,Mt),this._isPlaying=!1,this._canPlay=!1;var Pt=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(Pt),this._currentTime=0,this.globalData.audioController.addAudio(this),this.tm=_t.tm?PropertyFactory.getProp(this,_t.tm,0,Tt.frameRate,this):{_placeholder:!0}}function BaseRenderer(){}function TransformElement(){}function MaskElement(_t,Tt,Mt){this.data=_t,this.element=Tt,this.globalData=Mt,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var Pt,Ft,Dt=this.globalData.defs,Nt=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(Nt),this.solidPath="";var Vt,zt,Xt,Ht,Wt,Qt,Zt=this.masksProperties,Kt=0,er=[],Yt=createElementID(),rr="clipPath",ir="clip-path";for(Pt=0;Pt<Nt;Pt+=1)if((Zt[Pt].mode!=="a"&&Zt[Pt].mode!=="n"||Zt[Pt].inv||Zt[Pt].o.k!==100||Zt[Pt].o.x)&&(rr="mask",ir="mask"),Zt[Pt].mode!=="s"&&Zt[Pt].mode!=="i"||Kt!==0?Xt=null:((Xt=createNS("rect")).setAttribute("fill","#ffffff"),Xt.setAttribute("width",this.element.comp.data.w||0),Xt.setAttribute("height",this.element.comp.data.h||0),er.push(Xt)),Ft=createNS("path"),Zt[Pt].mode==="n")this.viewData[Pt]={op:PropertyFactory.getProp(this.element,Zt[Pt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,Zt[Pt],3),elem:Ft,lastPath:""},Dt.appendChild(Ft);else{var nr;if(Kt+=1,Ft.setAttribute("fill",Zt[Pt].mode==="s"?"#000000":"#ffffff"),Ft.setAttribute("clip-rule","nonzero"),Zt[Pt].x.k!==0?(rr="mask",ir="mask",Qt=PropertyFactory.getProp(this.element,Zt[Pt].x,0,null,this.element),nr=createElementID(),(Ht=createNS("filter")).setAttribute("id",nr),(Wt=createNS("feMorphology")).setAttribute("operator","erode"),Wt.setAttribute("in","SourceGraphic"),Wt.setAttribute("radius","0"),Ht.appendChild(Wt),Dt.appendChild(Ht),Ft.setAttribute("stroke",Zt[Pt].mode==="s"?"#000000":"#ffffff")):(Wt=null,Qt=null),this.storedData[Pt]={elem:Ft,x:Qt,expan:Wt,lastPath:"",lastOperator:"",filterId:nr,lastRadius:0},Zt[Pt].mode==="i"){zt=er.length;var ar=createNS("g");for(Vt=0;Vt<zt;Vt+=1)ar.appendChild(er[Vt]);var or=createNS("mask");or.setAttribute("mask-type","alpha"),or.setAttribute("id",Yt+"_"+Kt),or.appendChild(Ft),Dt.appendChild(or),ar.setAttribute("mask","url("+getLocationHref()+"#"+Yt+"_"+Kt+")"),er.length=0,er.push(ar)}else er.push(Ft);Zt[Pt].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[Pt]={elem:Ft,lastPath:"",op:PropertyFactory.getProp(this.element,Zt[Pt].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,Zt[Pt],3),invRect:Xt},this.viewData[Pt].prop.k||this.drawPath(Zt[Pt],this.viewData[Pt].prop.v,this.viewData[Pt])}for(this.maskElement=createNS(rr),Nt=er.length,Pt=0;Pt<Nt;Pt+=1)this.maskElement.appendChild(er[Pt]);Kt>0&&(this.maskElement.setAttribute("id",Yt),this.element.maskedElement.setAttribute(ir,"url("+getLocationHref()+"#"+Yt+")"),Dt.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){this.layerInterface=FootageInterface(this)},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(_t){if(this.prepareRenderableFrame(_t,!0),this.prepareProperties(_t,!0),this.tm._placeholder)this._currentTime=_t/this.data.sr;else{var Tt=this.tm.v;this._currentTime=Tt}},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(_t){this.audio.rate(_t)},AudioElement.prototype.volume=function(_t){this.audio.volume(_t)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(_t){var Tt,Mt,Pt=this.layers.length;for(this.completeLayers=!0,Tt=Pt-1;Tt>=0;Tt-=1)this.elements[Tt]||(Mt=this.layers[Tt]).ip-Mt.st<=_t-this.layers[Tt].st&&Mt.op-Mt.st>_t-this.layers[Tt].st&&this.buildItem(Tt),this.completeLayers=!!this.elements[Tt]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(_t){switch(_t.ty){case 2:return this.createImage(_t);case 0:return this.createComp(_t);case 1:return this.createSolid(_t);case 3:return this.createNull(_t);case 4:return this.createShape(_t);case 5:return this.createText(_t);case 6:return this.createAudio(_t);case 13:return this.createCamera(_t);case 15:return this.createFootage(_t);default:return this.createNull(_t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(_t){return new AudioElement(_t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(_t){return new FootageElement(_t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var _t,Tt=this.layers.length;for(_t=0;_t<Tt;_t+=1)this.buildItem(_t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(_t){var Tt;this.completeLayers=!1;var Mt,Pt=_t.length,Ft=this.layers.length;for(Tt=0;Tt<Pt;Tt+=1)for(Mt=0;Mt<Ft;){if(this.layers[Mt].id===_t[Tt].id){this.layers[Mt]=_t[Tt];break}Mt+=1}},BaseRenderer.prototype.setProjectInterface=function(_t){this.globalData.projectInterface=_t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(_t,Tt,Mt){for(var Pt=this.elements,Ft=this.layers,Dt=0,Nt=Ft.length;Dt<Nt;)Ft[Dt].ind==Tt&&(Pt[Dt]&&Pt[Dt]!==!0?(Mt.push(Pt[Dt]),Pt[Dt].setAsParent(),Ft[Dt].parent!==void 0?this.buildElementParenting(_t,Ft[Dt].parent,Mt):_t.setHierarchy(Mt)):(this.buildItem(Dt),this.addPendingElement(_t))),Dt+=1},BaseRenderer.prototype.addPendingElement=function(_t){this.pendingElements.push(_t)},BaseRenderer.prototype.searchExtraCompositions=function(_t){var Tt,Mt=_t.length;for(Tt=0;Tt<Mt;Tt+=1)if(_t[Tt].xt){var Pt=this.createComp(_t[Tt]);Pt.initExpressions(),this.globalData.projectInterface.registerComposition(Pt)}},BaseRenderer.prototype.setupGlobalData=function(_t,Tt){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(_t.chars),this.globalData.fontManager.addFonts(_t.fonts,Tt),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=_t.fr,this.globalData.nm=_t.nm,this.globalData.compSize={w:_t.w,h:_t.h}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var _t,Tt=this.finalTransform.mat,Mt=0,Pt=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;Mt<Pt;){if(this.hierarchy[Mt].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}Mt+=1}if(this.finalTransform._matMdf)for(_t=this.finalTransform.mProp.v.props,Tt.cloneFromProps(_t),Mt=0;Mt<Pt;Mt+=1)_t=this.hierarchy[Mt].finalTransform.mProp.v.props,Tt.transform(_t[0],_t[1],_t[2],_t[3],_t[4],_t[5],_t[6],_t[7],_t[8],_t[9],_t[10],_t[11],_t[12],_t[13],_t[14],_t[15])}},globalToLocal:function(_t){var Tt=[];Tt.push(this.finalTransform);for(var Mt,Pt=!0,Ft=this.comp;Pt;)Ft.finalTransform?(Ft.data.hasMask&&Tt.splice(0,0,Ft.finalTransform),Ft=Ft.comp):Pt=!1;var Dt,Nt=Tt.length;for(Mt=0;Mt<Nt;Mt+=1)Dt=Tt[Mt].mat.applyToPointArray(0,0,0),_t=[_t[0]-Dt[0],_t[1]-Dt[1],0];return _t},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(_t){return this.viewData[_t].prop},MaskElement.prototype.renderFrame=function(_t){var Tt,Mt=this.element.finalTransform.mat,Pt=this.masksProperties.length;for(Tt=0;Tt<Pt;Tt+=1)if((this.viewData[Tt].prop._mdf||_t)&&this.drawPath(this.masksProperties[Tt],this.viewData[Tt].prop.v,this.viewData[Tt]),(this.viewData[Tt].op._mdf||_t)&&this.viewData[Tt].elem.setAttribute("fill-opacity",this.viewData[Tt].op.v),this.masksProperties[Tt].mode!=="n"&&(this.viewData[Tt].invRect&&(this.element.finalTransform.mProp._mdf||_t)&&this.viewData[Tt].invRect.setAttribute("transform",Mt.getInverseMatrix().to2dCSS()),this.storedData[Tt].x&&(this.storedData[Tt].x._mdf||_t))){var Ft=this.storedData[Tt].expan;this.storedData[Tt].x.v<0?(this.storedData[Tt].lastOperator!=="erode"&&(this.storedData[Tt].lastOperator="erode",this.storedData[Tt].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[Tt].filterId+")")),Ft.setAttribute("radius",-this.storedData[Tt].x.v)):(this.storedData[Tt].lastOperator!=="dilate"&&(this.storedData[Tt].lastOperator="dilate",this.storedData[Tt].elem.setAttribute("filter",null)),this.storedData[Tt].elem.setAttribute("stroke-width",2*this.storedData[Tt].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var _t="M0,0 ";return _t+=" h"+this.globalData.compSize.w,_t+=" v"+this.globalData.compSize.h,_t+=" h-"+this.globalData.compSize.w,_t+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(_t,Tt,Mt){var Pt,Ft,Dt=" M"+Tt.v[0][0]+","+Tt.v[0][1];for(Ft=Tt._length,Pt=1;Pt<Ft;Pt+=1)Dt+=" C"+Tt.o[Pt-1][0]+","+Tt.o[Pt-1][1]+" "+Tt.i[Pt][0]+","+Tt.i[Pt][1]+" "+Tt.v[Pt][0]+","+Tt.v[Pt][1];if(Tt.c&&Ft>1&&(Dt+=" C"+Tt.o[Pt-1][0]+","+Tt.o[Pt-1][1]+" "+Tt.i[0][0]+","+Tt.i[0][1]+" "+Tt.v[0][0]+","+Tt.v[0][1]),Mt.lastPath!==Dt){var Nt="";Mt.elem&&(Tt.c&&(Nt=_t.inv?this.solidPath+Dt:Dt),Mt.elem.setAttribute("d",Nt)),Mt.lastPath=Dt}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var _t={};return _t.createFilter=function(Tt,Mt){var Pt=createNS("filter");return Pt.setAttribute("id",Tt),Mt!==!0&&(Pt.setAttribute("filterUnits","objectBoundingBox"),Pt.setAttribute("x","0%"),Pt.setAttribute("y","0%"),Pt.setAttribute("width","100%"),Pt.setAttribute("height","100%")),Pt},_t.createAlphaToLuminanceFilter=function(){var Tt=createNS("feColorMatrix");return Tt.setAttribute("type","matrix"),Tt.setAttribute("color-interpolation-filters","sRGB"),Tt.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),Tt},_t}(),featureSupport=function(){var _t={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(_t.maskType=!1),_t}();function SVGTintFilter(_t,Tt){this.filterManager=Tt;var Mt=createNS("feColorMatrix");if(Mt.setAttribute("type","matrix"),Mt.setAttribute("color-interpolation-filters","linearRGB"),Mt.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),Mt.setAttribute("result","f1"),_t.appendChild(Mt),(Mt=createNS("feColorMatrix")).setAttribute("type","matrix"),Mt.setAttribute("color-interpolation-filters","sRGB"),Mt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),Mt.setAttribute("result","f2"),_t.appendChild(Mt),this.matrixFilter=Mt,Tt.effectElements[2].p.v!==100||Tt.effectElements[2].p.k){var Pt,Ft=createNS("feMerge");_t.appendChild(Ft),(Pt=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),Ft.appendChild(Pt),(Pt=createNS("feMergeNode")).setAttribute("in","f2"),Ft.appendChild(Pt)}}function SVGFillFilter(_t,Tt){this.filterManager=Tt;var Mt=createNS("feColorMatrix");Mt.setAttribute("type","matrix"),Mt.setAttribute("color-interpolation-filters","sRGB"),Mt.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),_t.appendChild(Mt),this.matrixFilter=Mt}function SVGStrokeEffect(_t,Tt){this.initialized=!1,this.filterManager=Tt,this.elem=_t,this.paths=[]}function SVGTritoneFilter(_t,Tt){this.filterManager=Tt;var Mt=createNS("feColorMatrix");Mt.setAttribute("type","matrix"),Mt.setAttribute("color-interpolation-filters","linearRGB"),Mt.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),Mt.setAttribute("result","f1"),_t.appendChild(Mt);var Pt=createNS("feComponentTransfer");Pt.setAttribute("color-interpolation-filters","sRGB"),_t.appendChild(Pt),this.matrixFilter=Pt;var Ft=createNS("feFuncR");Ft.setAttribute("type","table"),Pt.appendChild(Ft),this.feFuncR=Ft;var Dt=createNS("feFuncG");Dt.setAttribute("type","table"),Pt.appendChild(Dt),this.feFuncG=Dt;var Nt=createNS("feFuncB");Nt.setAttribute("type","table"),Pt.appendChild(Nt),this.feFuncB=Nt}function SVGProLevelsFilter(_t,Tt){this.filterManager=Tt;var Mt=this.filterManager.effectElements,Pt=createNS("feComponentTransfer");(Mt[10].p.k||Mt[10].p.v!==0||Mt[11].p.k||Mt[11].p.v!==1||Mt[12].p.k||Mt[12].p.v!==1||Mt[13].p.k||Mt[13].p.v!==0||Mt[14].p.k||Mt[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",Pt)),(Mt[17].p.k||Mt[17].p.v!==0||Mt[18].p.k||Mt[18].p.v!==1||Mt[19].p.k||Mt[19].p.v!==1||Mt[20].p.k||Mt[20].p.v!==0||Mt[21].p.k||Mt[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",Pt)),(Mt[24].p.k||Mt[24].p.v!==0||Mt[25].p.k||Mt[25].p.v!==1||Mt[26].p.k||Mt[26].p.v!==1||Mt[27].p.k||Mt[27].p.v!==0||Mt[28].p.k||Mt[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",Pt)),(Mt[31].p.k||Mt[31].p.v!==0||Mt[32].p.k||Mt[32].p.v!==1||Mt[33].p.k||Mt[33].p.v!==1||Mt[34].p.k||Mt[34].p.v!==0||Mt[35].p.k||Mt[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",Pt)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(Pt.setAttribute("color-interpolation-filters","sRGB"),_t.appendChild(Pt),Pt=createNS("feComponentTransfer")),(Mt[3].p.k||Mt[3].p.v!==0||Mt[4].p.k||Mt[4].p.v!==1||Mt[5].p.k||Mt[5].p.v!==1||Mt[6].p.k||Mt[6].p.v!==0||Mt[7].p.k||Mt[7].p.v!==1)&&(Pt.setAttribute("color-interpolation-filters","sRGB"),_t.appendChild(Pt),this.feFuncRComposed=this.createFeFunc("feFuncR",Pt),this.feFuncGComposed=this.createFeFunc("feFuncG",Pt),this.feFuncBComposed=this.createFeFunc("feFuncB",Pt))}function SVGDropShadowEffect(_t,Tt){var Mt=Tt.container.globalData.renderConfig.filterSize;_t.setAttribute("x",Mt.x),_t.setAttribute("y",Mt.y),_t.setAttribute("width",Mt.width),_t.setAttribute("height",Mt.height),this.filterManager=Tt;var Pt=createNS("feGaussianBlur");Pt.setAttribute("in","SourceAlpha"),Pt.setAttribute("result","drop_shadow_1"),Pt.setAttribute("stdDeviation","0"),this.feGaussianBlur=Pt,_t.appendChild(Pt);var Ft=createNS("feOffset");Ft.setAttribute("dx","25"),Ft.setAttribute("dy","0"),Ft.setAttribute("in","drop_shadow_1"),Ft.setAttribute("result","drop_shadow_2"),this.feOffset=Ft,_t.appendChild(Ft);var Dt=createNS("feFlood");Dt.setAttribute("flood-color","#00ff00"),Dt.setAttribute("flood-opacity","1"),Dt.setAttribute("result","drop_shadow_3"),this.feFlood=Dt,_t.appendChild(Dt);var Nt=createNS("feComposite");Nt.setAttribute("in","drop_shadow_3"),Nt.setAttribute("in2","drop_shadow_2"),Nt.setAttribute("operator","in"),Nt.setAttribute("result","drop_shadow_4"),_t.appendChild(Nt);var Vt,zt=createNS("feMerge");_t.appendChild(zt),Vt=createNS("feMergeNode"),zt.appendChild(Vt),(Vt=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=Vt,this.feMerge=zt,this.originalNodeAdded=!1,zt.appendChild(Vt)}SVGTintFilter.prototype.renderFrame=function(_t){if(_t||this.filterManager._mdf){var Tt=this.filterManager.effectElements[0].p.v,Mt=this.filterManager.effectElements[1].p.v,Pt=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",Mt[0]-Tt[0]+" 0 0 0 "+Tt[0]+" "+(Mt[1]-Tt[1])+" 0 0 0 "+Tt[1]+" "+(Mt[2]-Tt[2])+" 0 0 0 "+Tt[2]+" 0 0 0 "+Pt+" 0")}},SVGFillFilter.prototype.renderFrame=function(_t){if(_t||this.filterManager._mdf){var Tt=this.filterManager.effectElements[2].p.v,Mt=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+Tt[0]+" 0 0 0 0 "+Tt[1]+" 0 0 0 0 "+Tt[2]+" 0 0 0 "+Mt+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var _t,Tt,Mt,Pt,Ft=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(this.filterManager.effectElements[1].p.v===1?(Pt=this.elem.maskManager.masksProperties.length,Mt=0):Pt=(Mt=this.filterManager.effectElements[0].p.v-1)+1,(Tt=createNS("g")).setAttribute("fill","none"),Tt.setAttribute("stroke-linecap","round"),Tt.setAttribute("stroke-dashoffset",1);Mt<Pt;Mt+=1)_t=createNS("path"),Tt.appendChild(_t),this.paths.push({p:_t,m:Mt});if(this.filterManager.effectElements[10].p.v===3){var Dt=createNS("mask"),Nt=createElementID();Dt.setAttribute("id",Nt),Dt.setAttribute("mask-type","alpha"),Dt.appendChild(Tt),this.elem.globalData.defs.appendChild(Dt);var Vt=createNS("g");for(Vt.setAttribute("mask","url("+getLocationHref()+"#"+Nt+")");Ft[0];)Vt.appendChild(Ft[0]);this.elem.layerElement.appendChild(Vt),this.masker=Dt,Tt.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(Ft=this.elem.layerElement.children||this.elem.layerElement.childNodes;Ft.length;)this.elem.layerElement.removeChild(Ft[0]);this.elem.layerElement.appendChild(Tt),this.elem.layerElement.removeAttribute("mask"),Tt.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=Tt},SVGStrokeEffect.prototype.renderFrame=function(_t){var Tt;this.initialized||this.initialize();var Mt,Pt,Ft=this.paths.length;for(Tt=0;Tt<Ft;Tt+=1)if(this.paths[Tt].m!==-1&&(Mt=this.elem.maskManager.viewData[this.paths[Tt].m],Pt=this.paths[Tt].p,(_t||this.filterManager._mdf||Mt.prop._mdf)&&Pt.setAttribute("d",Mt.lastPath),_t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||Mt.prop._mdf)){var Dt;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var Nt=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),Vt=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),zt=Pt.getTotalLength();Dt="0 0 0 "+zt*Nt+" ";var Xt,Ht=zt*(Vt-Nt),Wt=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,Qt=Math.floor(Ht/Wt);for(Xt=0;Xt<Qt;Xt+=1)Dt+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";Dt+="0 "+10*zt+" 0 0"}else Dt="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;Pt.setAttribute("stroke-dasharray",Dt)}if((_t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(_t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(_t||this.filterManager.effectElements[3].p._mdf)){var Zt=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*Zt[0])+","+bmFloor(255*Zt[1])+","+bmFloor(255*Zt[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(_t){if(_t||this.filterManager._mdf){var Tt=this.filterManager.effectElements[0].p.v,Mt=this.filterManager.effectElements[1].p.v,Pt=this.filterManager.effectElements[2].p.v,Ft=Pt[0]+" "+Mt[0]+" "+Tt[0],Dt=Pt[1]+" "+Mt[1]+" "+Tt[1],Nt=Pt[2]+" "+Mt[2]+" "+Tt[2];this.feFuncR.setAttribute("tableValues",Ft),this.feFuncG.setAttribute("tableValues",Dt),this.feFuncB.setAttribute("tableValues",Nt)}},SVGProLevelsFilter.prototype.createFeFunc=function(_t,Tt){var Mt=createNS(_t);return Mt.setAttribute("type","table"),Tt.appendChild(Mt),Mt},SVGProLevelsFilter.prototype.getTableValue=function(_t,Tt,Mt,Pt,Ft){for(var Dt,Nt,Vt=0,zt=Math.min(_t,Tt),Xt=Math.max(_t,Tt),Ht=Array.call(null,{length:256}),Wt=0,Qt=Ft-Pt,Zt=Tt-_t;Vt<=256;)Nt=(Dt=Vt/256)<=zt?Zt<0?Ft:Pt:Dt>=Xt?Zt<0?Pt:Ft:Pt+Qt*Math.pow((Dt-_t)/Zt,1/Mt),Ht[Wt]=Nt,Wt+=1,Vt+=256/255;return Ht.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(_t){if(_t||this.filterManager._mdf){var Tt,Mt=this.filterManager.effectElements;this.feFuncRComposed&&(_t||Mt[3].p._mdf||Mt[4].p._mdf||Mt[5].p._mdf||Mt[6].p._mdf||Mt[7].p._mdf)&&(Tt=this.getTableValue(Mt[3].p.v,Mt[4].p.v,Mt[5].p.v,Mt[6].p.v,Mt[7].p.v),this.feFuncRComposed.setAttribute("tableValues",Tt),this.feFuncGComposed.setAttribute("tableValues",Tt),this.feFuncBComposed.setAttribute("tableValues",Tt)),this.feFuncR&&(_t||Mt[10].p._mdf||Mt[11].p._mdf||Mt[12].p._mdf||Mt[13].p._mdf||Mt[14].p._mdf)&&(Tt=this.getTableValue(Mt[10].p.v,Mt[11].p.v,Mt[12].p.v,Mt[13].p.v,Mt[14].p.v),this.feFuncR.setAttribute("tableValues",Tt)),this.feFuncG&&(_t||Mt[17].p._mdf||Mt[18].p._mdf||Mt[19].p._mdf||Mt[20].p._mdf||Mt[21].p._mdf)&&(Tt=this.getTableValue(Mt[17].p.v,Mt[18].p.v,Mt[19].p.v,Mt[20].p.v,Mt[21].p.v),this.feFuncG.setAttribute("tableValues",Tt)),this.feFuncB&&(_t||Mt[24].p._mdf||Mt[25].p._mdf||Mt[26].p._mdf||Mt[27].p._mdf||Mt[28].p._mdf)&&(Tt=this.getTableValue(Mt[24].p.v,Mt[25].p.v,Mt[26].p.v,Mt[27].p.v,Mt[28].p.v),this.feFuncB.setAttribute("tableValues",Tt)),this.feFuncA&&(_t||Mt[31].p._mdf||Mt[32].p._mdf||Mt[33].p._mdf||Mt[34].p._mdf||Mt[35].p._mdf)&&(Tt=this.getTableValue(Mt[31].p.v,Mt[32].p.v,Mt[33].p.v,Mt[34].p.v,Mt[35].p.v),this.feFuncA.setAttribute("tableValues",Tt))}},SVGDropShadowEffect.prototype.renderFrame=function(_t){if(_t||this.filterManager._mdf){if((_t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),_t||this.filterManager.effectElements[0].p._mdf){var Tt=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*Tt[0]),Math.round(255*Tt[1]),Math.round(255*Tt[2])))}if((_t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),_t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var Mt=this.filterManager.effectElements[3].p.v,Pt=(this.filterManager.effectElements[2].p.v-90)*degToRads,Ft=Mt*Math.cos(Pt),Dt=Mt*Math.sin(Pt);this.feOffset.setAttribute("dx",Ft),this.feOffset.setAttribute("dy",Dt)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(_t,Tt,Mt){this.initialized=!1,this.filterManager=Tt,this.filterElem=_t,this.elem=Mt,Mt.matteElement=createNS("g"),Mt.matteElement.appendChild(Mt.layerElement),Mt.matteElement.appendChild(Mt.transformedElement),Mt.baseElement=Mt.matteElement}function SVGGaussianBlurEffect(_t,Tt){_t.setAttribute("x","-100%"),_t.setAttribute("y","-100%"),_t.setAttribute("width","300%"),_t.setAttribute("height","300%"),this.filterManager=Tt;var Mt=createNS("feGaussianBlur");_t.appendChild(Mt),this.feGaussianBlur=Mt}SVGMatte3Effect.prototype.findSymbol=function(_t){for(var Tt=0,Mt=_svgMatteSymbols.length;Tt<Mt;){if(_svgMatteSymbols[Tt]===_t)return _svgMatteSymbols[Tt];Tt+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(_t,Tt){var Mt=_t.layerElement.parentNode;if(Mt){for(var Pt,Ft=Mt.children,Dt=0,Nt=Ft.length;Dt<Nt&&Ft[Dt]!==_t.layerElement;)Dt+=1;Dt<=Nt-2&&(Pt=Ft[Dt+1]);var Vt=createNS("use");Vt.setAttribute("href","#"+Tt),Pt?Mt.insertBefore(Vt,Pt):Mt.appendChild(Vt)}},SVGMatte3Effect.prototype.setElementAsMask=function(_t,Tt){if(!this.findSymbol(Tt)){var Mt=createElementID(),Pt=createNS("mask");Pt.setAttribute("id",Tt.layerId),Pt.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(Tt);var Ft=_t.globalData.defs;Ft.appendChild(Pt);var Dt=createNS("symbol");Dt.setAttribute("id",Mt),this.replaceInParent(Tt,Mt),Dt.appendChild(Tt.layerElement),Ft.appendChild(Dt);var Nt=createNS("use");Nt.setAttribute("href","#"+Mt),Pt.appendChild(Nt),Tt.data.hd=!1,Tt.show()}_t.setMatte(Tt.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var _t=this.filterManager.effectElements[0].p.v,Tt=this.elem.comp.elements,Mt=0,Pt=Tt.length;Mt<Pt;)Tt[Mt]&&Tt[Mt].data.ind===_t&&this.setElementAsMask(this.elem,Tt[Mt]),Mt+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(_t){if(_t||this.filterManager._mdf){var Tt=.3*this.filterManager.effectElements[0].p.v,Mt=this.filterManager.effectElements[1].p.v,Pt=Mt==3?0:Tt,Ft=Mt==2?0:Tt;this.feGaussianBlur.setAttribute("stdDeviation",Pt+" "+Ft);var Dt=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",Dt)}};var registeredEffects={};function SVGEffects(_t){var Tt,Mt,Pt=_t.data.ef?_t.data.ef.length:0,Ft=createElementID(),Dt=filtersFactory.createFilter(Ft,!0),Nt=0;for(this.filters=[],Tt=0;Tt<Pt;Tt+=1){Mt=null;var Vt=_t.data.ef[Tt].ty;registeredEffects[Vt]&&(Mt=new registeredEffects[Vt].effect(Dt,_t.effectsManager.effectElements[Tt],_t),registeredEffects[Vt].countsAsEffect&&(Nt+=1)),_t.data.ef[Tt].ty===20?(Nt+=1,Mt=new SVGTintFilter(Dt,_t.effectsManager.effectElements[Tt])):_t.data.ef[Tt].ty===21?(Nt+=1,Mt=new SVGFillFilter(Dt,_t.effectsManager.effectElements[Tt])):_t.data.ef[Tt].ty===22?Mt=new SVGStrokeEffect(_t,_t.effectsManager.effectElements[Tt]):_t.data.ef[Tt].ty===23?(Nt+=1,Mt=new SVGTritoneFilter(Dt,_t.effectsManager.effectElements[Tt])):_t.data.ef[Tt].ty===24?(Nt+=1,Mt=new SVGProLevelsFilter(Dt,_t.effectsManager.effectElements[Tt])):_t.data.ef[Tt].ty===25?(Nt+=1,Mt=new SVGDropShadowEffect(Dt,_t.effectsManager.effectElements[Tt])):_t.data.ef[Tt].ty===28?Mt=new SVGMatte3Effect(Dt,_t.effectsManager.effectElements[Tt],_t):_t.data.ef[Tt].ty===29&&(Nt+=1,Mt=new SVGGaussianBlurEffect(Dt,_t.effectsManager.effectElements[Tt])),Mt&&this.filters.push(Mt)}Nt&&(_t.globalData.defs.appendChild(Dt),_t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+Ft+")")),this.filters.length&&_t.addRenderableComponent(this)}function registerEffect(_t,Tt,Mt){registeredEffects[_t]={effect:Tt,countsAsEffect:Mt}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(_t,Tt,Mt){this.assetData=Tt.getAssetData(_t.refId),this.initElement(_t,Tt,Mt),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(_t,Tt){this.elem=_t,this.pos=Tt}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(_t){var Tt,Mt=this.filters.length;for(Tt=0;Tt<Mt;Tt+=1)this.filters[Tt].renderFrame(_t)},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var _t,Tt,Mt,Pt=null;if(this.data.td){if(this.data.td==3||this.data.td==1){var Ft=createNS("mask");Ft.setAttribute("id",this.layerId),Ft.setAttribute("mask-type",this.data.td==3?"luminance":"alpha"),Ft.appendChild(this.layerElement),Pt=Ft,this.globalData.defs.appendChild(Ft),featureSupport.maskType||this.data.td!=1||(Ft.setAttribute("mask-type","luminance"),_t=createElementID(),Tt=filtersFactory.createFilter(_t),this.globalData.defs.appendChild(Tt),Tt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(Mt=createNS("g")).appendChild(this.layerElement),Pt=Mt,Ft.appendChild(Mt),Mt.setAttribute("filter","url("+getLocationHref()+"#"+_t+")"))}else if(this.data.td==2){var Dt=createNS("mask");Dt.setAttribute("id",this.layerId),Dt.setAttribute("mask-type","alpha");var Nt=createNS("g");Dt.appendChild(Nt),_t=createElementID(),Tt=filtersFactory.createFilter(_t);var Vt=createNS("feComponentTransfer");Vt.setAttribute("in","SourceGraphic"),Tt.appendChild(Vt);var zt=createNS("feFuncA");zt.setAttribute("type","table"),zt.setAttribute("tableValues","1.0 0.0"),Vt.appendChild(zt),this.globalData.defs.appendChild(Tt);var Xt=createNS("rect");Xt.setAttribute("width",this.comp.data.w),Xt.setAttribute("height",this.comp.data.h),Xt.setAttribute("x","0"),Xt.setAttribute("y","0"),Xt.setAttribute("fill","#ffffff"),Xt.setAttribute("opacity","0"),Nt.setAttribute("filter","url("+getLocationHref()+"#"+_t+")"),Nt.appendChild(Xt),Nt.appendChild(this.layerElement),Pt=Nt,featureSupport.maskType||(Dt.setAttribute("mask-type","luminance"),Tt.appendChild(filtersFactory.createAlphaToLuminanceFilter()),Mt=createNS("g"),Nt.appendChild(Xt),Mt.appendChild(this.layerElement),Pt=Mt,Nt.appendChild(Mt)),this.globalData.defs.appendChild(Dt)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),Pt=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var Ht=createNS("clipPath"),Wt=createNS("path");Wt.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var Qt=createElementID();if(Ht.setAttribute("id",Qt),Ht.appendChild(Wt),this.globalData.defs.appendChild(Ht),this.checkMasks()){var Zt=createNS("g");Zt.setAttribute("clip-path","url("+getLocationHref()+"#"+Qt+")"),Zt.appendChild(this.layerElement),this.transformedElement=Zt,Pt?Pt.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+Qt+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(_t){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+_t+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(_t){this.hierarchy=_t},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(_t,Tt,Mt){this.initFrame(),this.initBaseData(_t,Tt,Mt),this.initTransform(_t,Tt,Mt),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(_t){this._mdf=!1,this.prepareRenderableFrame(_t),this.prepareProperties(_t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var _t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",_t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(_t){var Tt,Mt=this.shapeModifiers.length;for(Tt=0;Tt<Mt;Tt+=1)this.shapeModifiers[Tt].addShape(_t)},isShapeInAnimatedModifiers:function(_t){for(var Tt=this.shapeModifiers.length;0<Tt;)if(this.shapeModifiers[0].isAnimatedWithShape(_t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var _t,Tt=this.shapes.length;for(_t=0;_t<Tt;_t+=1)this.shapes[_t].sh.reset();for(_t=(Tt=this.shapeModifiers.length)-1;_t>=0&&!this.shapeModifiers[_t].processShapes(this._isFirstFrame);_t-=1);}},searchProcessedElement:function(_t){for(var Tt=this.processedElements,Mt=0,Pt=Tt.length;Mt<Pt;){if(Tt[Mt].elem===_t)return Tt[Mt].pos;Mt+=1}return 0},addProcessedElement:function(_t,Tt){for(var Mt=this.processedElements,Pt=Mt.length;Pt;)if(Mt[Pt-=1].elem===_t)return void(Mt[Pt].pos=Tt);Mt.push(new ProcessedElement(_t,Tt))},prepareFrame:function(_t){this.prepareRenderableFrame(_t),this.prepareProperties(_t,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(_t,Tt,Mt){this.caches=[],this.styles=[],this.transformers=_t,this.lStr="",this.sh=Mt,this.lvl=Tt,this._isAnimated=!!Mt.k;for(var Pt=0,Ft=_t.length;Pt<Ft;){if(_t[Pt].mProps.dynamicProperties.length){this._isAnimated=!0;break}Pt+=1}}function SVGStyleData(_t,Tt){this.data=_t,this.type=_t.ty,this.d="",this.lvl=Tt,this._mdf=!1,this.closed=_t.hd===!0,this.pElem=createNS("path"),this.msElem=null}function DashProperty(_t,Tt,Mt,Pt){var Ft;this.elem=_t,this.frameId=-1,this.dataProps=createSizedArray(Tt.length),this.renderer=Mt,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",Tt.length?Tt.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(Pt);var Dt,Nt=Tt.length||0;for(Ft=0;Ft<Nt;Ft+=1)Dt=PropertyFactory.getProp(_t,Tt[Ft].v,0,0,this),this.k=Dt.k||this.k,this.dataProps[Ft]={n:Tt[Ft].n,p:Dt};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(_t,Tt,Mt){this.initDynamicPropertyContainer(_t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(_t,Tt.o,0,.01,this),this.w=PropertyFactory.getProp(_t,Tt.w,0,null,this),this.d=new DashProperty(_t,Tt.d||{},"svg",this),this.c=PropertyFactory.getProp(_t,Tt.c,1,255,this),this.style=Mt,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(_t,Tt,Mt){this.initDynamicPropertyContainer(_t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(_t,Tt.o,0,.01,this),this.c=PropertyFactory.getProp(_t,Tt.c,1,255,this),this.style=Mt}function SVGNoStyleData(_t,Tt,Mt){this.initDynamicPropertyContainer(_t),this.getValue=this.iterateDynamicProperties,this.style=Mt}function GradientProperty(_t,Tt,Mt){this.data=Tt,this.c=createTypedArray("uint8c",4*Tt.p);var Pt=Tt.k.k[0].s?Tt.k.k[0].s.length-4*Tt.p:Tt.k.k.length-4*Tt.p;this.o=createTypedArray("float32",Pt),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=Pt,this.initDynamicPropertyContainer(Mt),this.prop=PropertyFactory.getProp(_t,Tt.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(_t,Tt,Mt){this.initDynamicPropertyContainer(_t),this.getValue=this.iterateDynamicProperties,this.initGradientData(_t,Tt,Mt)}function SVGGradientStrokeStyleData(_t,Tt,Mt){this.initDynamicPropertyContainer(_t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(_t,Tt.w,0,null,this),this.d=new DashProperty(_t,Tt.d||{},"svg",this),this.initGradientData(_t,Tt,Mt),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(_t,Tt,Mt){this.transform={mProps:_t,op:Tt,container:Mt},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(_t){if((this.elem.globalData.frameId!==this.frameId||_t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||_t,this._mdf)){var Tt=0,Mt=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),Tt=0;Tt<Mt;Tt+=1)this.dataProps[Tt].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[Tt].p.v:this.dashArray[Tt]=this.dataProps[Tt].p.v:this.dashoffset[0]=this.dataProps[Tt].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(_t,Tt){for(var Mt=0,Pt=this.o.length/2;Mt<Pt;){if(Math.abs(_t[4*Mt]-_t[4*Tt+2*Mt])>.01)return!1;Mt+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var _t=0,Tt=this.data.k.k.length;_t<Tt;){if(!this.comparePoints(this.data.k.k[_t].s,this.data.p))return!1;_t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(_t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||_t){var Tt,Mt,Pt,Ft=4*this.data.p;for(Tt=0;Tt<Ft;Tt+=1)Mt=Tt%4==0?100:255,Pt=Math.round(this.prop.v[Tt]*Mt),this.c[Tt]!==Pt&&(this.c[Tt]=Pt,this._cmdf=!_t);if(this.o.length)for(Ft=this.prop.v.length,Tt=4*this.data.p;Tt<Ft;Tt+=1)Mt=Tt%2==0?100:1,Pt=Tt%2==0?Math.round(100*this.prop.v[Tt]):this.prop.v[Tt],this.o[Tt-4*this.data.p]!==Pt&&(this.o[Tt-4*this.data.p]=Pt,this._omdf=!_t);this._mdf=!_t}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(_t,Tt,Mt){this.o=PropertyFactory.getProp(_t,Tt.o,0,.01,this),this.s=PropertyFactory.getProp(_t,Tt.s,1,null,this),this.e=PropertyFactory.getProp(_t,Tt.e,1,null,this),this.h=PropertyFactory.getProp(_t,Tt.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(_t,Tt.a||{k:0},0,degToRads,this),this.g=new GradientProperty(_t,Tt.g,this),this.style=Mt,this.stops=[],this.setGradientData(Mt.pElem,Tt),this.setGradientOpacity(Tt,Mt),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(_t,Tt){var Mt=createElementID(),Pt=createNS(Tt.t===1?"linearGradient":"radialGradient");Pt.setAttribute("id",Mt),Pt.setAttribute("spreadMethod","pad"),Pt.setAttribute("gradientUnits","userSpaceOnUse");var Ft,Dt,Nt,Vt=[];for(Nt=4*Tt.g.p,Dt=0;Dt<Nt;Dt+=4)Ft=createNS("stop"),Pt.appendChild(Ft),Vt.push(Ft);_t.setAttribute(Tt.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+Mt+")"),this.gf=Pt,this.cst=Vt},SVGGradientFillStyleData.prototype.setGradientOpacity=function(_t,Tt){if(this.g._hasOpacity&&!this.g._collapsable){var Mt,Pt,Ft,Dt=createNS("mask"),Nt=createNS("path");Dt.appendChild(Nt);var Vt=createElementID(),zt=createElementID();Dt.setAttribute("id",zt);var Xt=createNS(_t.t===1?"linearGradient":"radialGradient");Xt.setAttribute("id",Vt),Xt.setAttribute("spreadMethod","pad"),Xt.setAttribute("gradientUnits","userSpaceOnUse"),Ft=_t.g.k.k[0].s?_t.g.k.k[0].s.length:_t.g.k.k.length;var Ht=this.stops;for(Pt=4*_t.g.p;Pt<Ft;Pt+=2)(Mt=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),Xt.appendChild(Mt),Ht.push(Mt);Nt.setAttribute(_t.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+Vt+")"),_t.ty==="gs"&&(Nt.setAttribute("stroke-linecap",lineCapEnum[_t.lc||2]),Nt.setAttribute("stroke-linejoin",lineJoinEnum[_t.lj||2]),_t.lj===1&&Nt.setAttribute("stroke-miterlimit",_t.ml)),this.of=Xt,this.ms=Dt,this.ost=Ht,this.maskId=zt,Tt.msElem=Nt}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(_t,Tt,Mt,Pt){if(Tt===0)return"";var Ft,Dt=_t.o,Nt=_t.i,Vt=_t.v,zt=" M"+Pt.applyToPointStringified(Vt[0][0],Vt[0][1]);for(Ft=1;Ft<Tt;Ft+=1)zt+=" C"+Pt.applyToPointStringified(Dt[Ft-1][0],Dt[Ft-1][1])+" "+Pt.applyToPointStringified(Nt[Ft][0],Nt[Ft][1])+" "+Pt.applyToPointStringified(Vt[Ft][0],Vt[Ft][1]);return Mt&&Tt&&(zt+=" C"+Pt.applyToPointStringified(Dt[Ft-1][0],Dt[Ft-1][1])+" "+Pt.applyToPointStringified(Nt[0][0],Nt[0][1])+" "+Pt.applyToPointStringified(Vt[0][0],Vt[0][1]),zt+="z"),zt},SVGElementsRenderer=function(){var _t=new Matrix,Tt=new Matrix;function Mt(Xt,Ht,Wt){(Wt||Ht.transform.op._mdf)&&Ht.transform.container.setAttribute("opacity",Ht.transform.op.v),(Wt||Ht.transform.mProps._mdf)&&Ht.transform.container.setAttribute("transform",Ht.transform.mProps.v.to2dCSS())}function Pt(){}function Ft(Xt,Ht,Wt){var Qt,Zt,Kt,er,Yt,rr,ir,nr,ar,or,ur,dr=Ht.styles.length,hr=Ht.lvl;for(rr=0;rr<dr;rr+=1){if(er=Ht.sh._mdf||Wt,Ht.styles[rr].lvl<hr){for(nr=Tt.reset(),or=hr-Ht.styles[rr].lvl,ur=Ht.transformers.length-1;!er&&or>0;)er=Ht.transformers[ur].mProps._mdf||er,or-=1,ur-=1;if(er)for(or=hr-Ht.styles[rr].lvl,ur=Ht.transformers.length-1;or>0;)ar=Ht.transformers[ur].mProps.v.props,nr.transform(ar[0],ar[1],ar[2],ar[3],ar[4],ar[5],ar[6],ar[7],ar[8],ar[9],ar[10],ar[11],ar[12],ar[13],ar[14],ar[15]),or-=1,ur-=1}else nr=_t;if(Zt=(ir=Ht.sh.paths)._length,er){for(Kt="",Qt=0;Qt<Zt;Qt+=1)(Yt=ir.shapes[Qt])&&Yt._length&&(Kt+=buildShapeString(Yt,Yt._length,Yt.c,nr));Ht.caches[rr]=Kt}else Kt=Ht.caches[rr];Ht.styles[rr].d+=Xt.hd===!0?"":Kt,Ht.styles[rr]._mdf=er||Ht.styles[rr]._mdf}}function Dt(Xt,Ht,Wt){var Qt=Ht.style;(Ht.c._mdf||Wt)&&Qt.pElem.setAttribute("fill","rgb("+bmFloor(Ht.c.v[0])+","+bmFloor(Ht.c.v[1])+","+bmFloor(Ht.c.v[2])+")"),(Ht.o._mdf||Wt)&&Qt.pElem.setAttribute("fill-opacity",Ht.o.v)}function Nt(Xt,Ht,Wt){Vt(Xt,Ht,Wt),zt(Xt,Ht,Wt)}function Vt(Xt,Ht,Wt){var Qt,Zt,Kt,er,Yt,rr=Ht.gf,ir=Ht.g._hasOpacity,nr=Ht.s.v,ar=Ht.e.v;if(Ht.o._mdf||Wt){var or=Xt.ty==="gf"?"fill-opacity":"stroke-opacity";Ht.style.pElem.setAttribute(or,Ht.o.v)}if(Ht.s._mdf||Wt){var ur=Xt.t===1?"x1":"cx",dr=ur==="x1"?"y1":"cy";rr.setAttribute(ur,nr[0]),rr.setAttribute(dr,nr[1]),ir&&!Ht.g._collapsable&&(Ht.of.setAttribute(ur,nr[0]),Ht.of.setAttribute(dr,nr[1]))}if(Ht.g._cmdf||Wt){Qt=Ht.cst;var hr=Ht.g.c;for(Kt=Qt.length,Zt=0;Zt<Kt;Zt+=1)(er=Qt[Zt]).setAttribute("offset",hr[4*Zt]+"%"),er.setAttribute("stop-color","rgb("+hr[4*Zt+1]+","+hr[4*Zt+2]+","+hr[4*Zt+3]+")")}if(ir&&(Ht.g._omdf||Wt)){var gr=Ht.g.o;for(Kt=(Qt=Ht.g._collapsable?Ht.cst:Ht.ost).length,Zt=0;Zt<Kt;Zt+=1)er=Qt[Zt],Ht.g._collapsable||er.setAttribute("offset",gr[2*Zt]+"%"),er.setAttribute("stop-opacity",gr[2*Zt+1])}if(Xt.t===1)(Ht.e._mdf||Wt)&&(rr.setAttribute("x2",ar[0]),rr.setAttribute("y2",ar[1]),ir&&!Ht.g._collapsable&&(Ht.of.setAttribute("x2",ar[0]),Ht.of.setAttribute("y2",ar[1])));else if((Ht.s._mdf||Ht.e._mdf||Wt)&&(Yt=Math.sqrt(Math.pow(nr[0]-ar[0],2)+Math.pow(nr[1]-ar[1],2)),rr.setAttribute("r",Yt),ir&&!Ht.g._collapsable&&Ht.of.setAttribute("r",Yt)),Ht.e._mdf||Ht.h._mdf||Ht.a._mdf||Wt){Yt||(Yt=Math.sqrt(Math.pow(nr[0]-ar[0],2)+Math.pow(nr[1]-ar[1],2)));var pr=Math.atan2(ar[1]-nr[1],ar[0]-nr[0]),mr=Ht.h.v;mr>=1?mr=.99:mr<=-1&&(mr=-.99);var wr=Yt*mr,br=Math.cos(pr+Ht.a.v)*wr+nr[0],_r=Math.sin(pr+Ht.a.v)*wr+nr[1];rr.setAttribute("fx",br),rr.setAttribute("fy",_r),ir&&!Ht.g._collapsable&&(Ht.of.setAttribute("fx",br),Ht.of.setAttribute("fy",_r))}}function zt(Xt,Ht,Wt){var Qt=Ht.style,Zt=Ht.d;Zt&&(Zt._mdf||Wt)&&Zt.dashStr&&(Qt.pElem.setAttribute("stroke-dasharray",Zt.dashStr),Qt.pElem.setAttribute("stroke-dashoffset",Zt.dashoffset[0])),Ht.c&&(Ht.c._mdf||Wt)&&Qt.pElem.setAttribute("stroke","rgb("+bmFloor(Ht.c.v[0])+","+bmFloor(Ht.c.v[1])+","+bmFloor(Ht.c.v[2])+")"),(Ht.o._mdf||Wt)&&Qt.pElem.setAttribute("stroke-opacity",Ht.o.v),(Ht.w._mdf||Wt)&&(Qt.pElem.setAttribute("stroke-width",Ht.w.v),Qt.msElem&&Qt.msElem.setAttribute("stroke-width",Ht.w.v))}return{createRenderFunction:function(Xt){switch(Xt.ty){case"fl":return Dt;case"gf":return Vt;case"gs":return Nt;case"st":return zt;case"sh":case"el":case"rc":case"sr":return Ft;case"tr":return Mt;case"no":return Pt;default:return null}}}}();function SVGShapeElement(_t,Tt,Mt){this.shapes=[],this.shapesData=_t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(_t,Tt,Mt),this.prevViewData=[]}function LetterProps(_t,Tt,Mt,Pt,Ft,Dt){this.o=_t,this.sw=Tt,this.sc=Mt,this.fc=Pt,this.m=Ft,this.p=Dt,this._mdf={o:!0,sw:!!Tt,sc:!!Mt,fc:!!Pt,m:!0,p:!0}}function TextProperty(_t,Tt){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=Tt,this.elem=_t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var _t,Tt,Mt,Pt,Ft=this.shapes.length,Dt=this.stylesList.length,Nt=[],Vt=!1;for(Mt=0;Mt<Dt;Mt+=1){for(Pt=this.stylesList[Mt],Vt=!1,Nt.length=0,_t=0;_t<Ft;_t+=1)(Tt=this.shapes[_t]).styles.indexOf(Pt)!==-1&&(Nt.push(Tt),Vt=Tt._isAnimated||Vt);Nt.length>1&&Vt&&this.setShapesAsAnimated(Nt)}},SVGShapeElement.prototype.setShapesAsAnimated=function(_t){var Tt,Mt=_t.length;for(Tt=0;Tt<Mt;Tt+=1)_t[Tt].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(_t,Tt){var Mt,Pt=new SVGStyleData(_t,Tt),Ft=Pt.pElem;return _t.ty==="st"?Mt=new SVGStrokeStyleData(this,_t,Pt):_t.ty==="fl"?Mt=new SVGFillStyleData(this,_t,Pt):_t.ty==="gf"||_t.ty==="gs"?(Mt=new(_t.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,_t,Pt),this.globalData.defs.appendChild(Mt.gf),Mt.maskId&&(this.globalData.defs.appendChild(Mt.ms),this.globalData.defs.appendChild(Mt.of),Ft.setAttribute("mask","url("+getLocationHref()+"#"+Mt.maskId+")"))):_t.ty==="no"&&(Mt=new SVGNoStyleData(this,_t,Pt)),_t.ty!=="st"&&_t.ty!=="gs"||(Ft.setAttribute("stroke-linecap",lineCapEnum[_t.lc||2]),Ft.setAttribute("stroke-linejoin",lineJoinEnum[_t.lj||2]),Ft.setAttribute("fill-opacity","0"),_t.lj===1&&Ft.setAttribute("stroke-miterlimit",_t.ml)),_t.r===2&&Ft.setAttribute("fill-rule","evenodd"),_t.ln&&Ft.setAttribute("id",_t.ln),_t.cl&&Ft.setAttribute("class",_t.cl),_t.bm&&(Ft.style["mix-blend-mode"]=getBlendMode(_t.bm)),this.stylesList.push(Pt),this.addToAnimatedContents(_t,Mt),Mt},SVGShapeElement.prototype.createGroupElement=function(_t){var Tt=new ShapeGroupData;return _t.ln&&Tt.gr.setAttribute("id",_t.ln),_t.cl&&Tt.gr.setAttribute("class",_t.cl),_t.bm&&(Tt.gr.style["mix-blend-mode"]=getBlendMode(_t.bm)),Tt},SVGShapeElement.prototype.createTransformElement=function(_t,Tt){var Mt=TransformPropertyFactory.getTransformProperty(this,_t,this),Pt=new SVGTransformData(Mt,Mt.o,Tt);return this.addToAnimatedContents(_t,Pt),Pt},SVGShapeElement.prototype.createShapeElement=function(_t,Tt,Mt){var Pt=4;_t.ty==="rc"?Pt=5:_t.ty==="el"?Pt=6:_t.ty==="sr"&&(Pt=7);var Ft=new SVGShapeData(Tt,Mt,ShapePropertyFactory.getShapeProp(this,_t,Pt,this));return this.shapes.push(Ft),this.addShapeToModifiers(Ft),this.addToAnimatedContents(_t,Ft),Ft},SVGShapeElement.prototype.addToAnimatedContents=function(_t,Tt){for(var Mt=0,Pt=this.animatedContents.length;Mt<Pt;){if(this.animatedContents[Mt].element===Tt)return;Mt+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(_t),element:Tt,data:_t})},SVGShapeElement.prototype.setElementStyles=function(_t){var Tt,Mt=_t.styles,Pt=this.stylesList.length;for(Tt=0;Tt<Pt;Tt+=1)this.stylesList[Tt].closed||Mt.push(this.stylesList[Tt])},SVGShapeElement.prototype.reloadShapes=function(){var _t;this._isFirstFrame=!0;var Tt=this.itemsData.length;for(_t=0;_t<Tt;_t+=1)this.prevViewData[_t]=this.itemsData[_t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),Tt=this.dynamicProperties.length,_t=0;_t<Tt;_t+=1)this.dynamicProperties[_t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(_t,Tt,Mt,Pt,Ft,Dt,Nt){var Vt,zt,Xt,Ht,Wt,Qt,Zt=[].concat(Dt),Kt=_t.length-1,er=[],Yt=[];for(Vt=Kt;Vt>=0;Vt-=1){if((Qt=this.searchProcessedElement(_t[Vt]))?Tt[Vt]=Mt[Qt-1]:_t[Vt]._render=Nt,_t[Vt].ty==="fl"||_t[Vt].ty==="st"||_t[Vt].ty==="gf"||_t[Vt].ty==="gs"||_t[Vt].ty==="no")Qt?Tt[Vt].style.closed=!1:Tt[Vt]=this.createStyleElement(_t[Vt],Ft),_t[Vt]._render&&Tt[Vt].style.pElem.parentNode!==Pt&&Pt.appendChild(Tt[Vt].style.pElem),er.push(Tt[Vt].style);else if(_t[Vt].ty==="gr"){if(Qt)for(Xt=Tt[Vt].it.length,zt=0;zt<Xt;zt+=1)Tt[Vt].prevViewData[zt]=Tt[Vt].it[zt];else Tt[Vt]=this.createGroupElement(_t[Vt]);this.searchShapes(_t[Vt].it,Tt[Vt].it,Tt[Vt].prevViewData,Tt[Vt].gr,Ft+1,Zt,Nt),_t[Vt]._render&&Tt[Vt].gr.parentNode!==Pt&&Pt.appendChild(Tt[Vt].gr)}else _t[Vt].ty==="tr"?(Qt||(Tt[Vt]=this.createTransformElement(_t[Vt],Pt)),Ht=Tt[Vt].transform,Zt.push(Ht)):_t[Vt].ty==="sh"||_t[Vt].ty==="rc"||_t[Vt].ty==="el"||_t[Vt].ty==="sr"?(Qt||(Tt[Vt]=this.createShapeElement(_t[Vt],Zt,Ft)),this.setElementStyles(Tt[Vt])):_t[Vt].ty==="tm"||_t[Vt].ty==="rd"||_t[Vt].ty==="ms"||_t[Vt].ty==="pb"?(Qt?(Wt=Tt[Vt]).closed=!1:((Wt=ShapeModifiers.getModifier(_t[Vt].ty)).init(this,_t[Vt]),Tt[Vt]=Wt,this.shapeModifiers.push(Wt)),Yt.push(Wt)):_t[Vt].ty==="rp"&&(Qt?(Wt=Tt[Vt]).closed=!0:(Wt=ShapeModifiers.getModifier(_t[Vt].ty),Tt[Vt]=Wt,Wt.init(this,_t,Vt,Tt),this.shapeModifiers.push(Wt),Nt=!1),Yt.push(Wt));this.addProcessedElement(_t[Vt],Vt+1)}for(Kt=er.length,Vt=0;Vt<Kt;Vt+=1)er[Vt].closed=!0;for(Kt=Yt.length,Vt=0;Vt<Kt;Vt+=1)Yt[Vt].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var _t;this.renderModifiers();var Tt=this.stylesList.length;for(_t=0;_t<Tt;_t+=1)this.stylesList[_t].reset();for(this.renderShape(),_t=0;_t<Tt;_t+=1)(this.stylesList[_t]._mdf||this._isFirstFrame)&&(this.stylesList[_t].msElem&&(this.stylesList[_t].msElem.setAttribute("d",this.stylesList[_t].d),this.stylesList[_t].d="M0 0"+this.stylesList[_t].d),this.stylesList[_t].pElem.setAttribute("d",this.stylesList[_t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var _t,Tt,Mt=this.animatedContents.length;for(_t=0;_t<Mt;_t+=1)Tt=this.animatedContents[_t],(this._isFirstFrame||Tt.element._isAnimated)&&Tt.data!==!0&&Tt.fn(Tt.data,Tt.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(_t,Tt,Mt,Pt,Ft,Dt){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var Nt=!1;return this.o!==_t&&(this.o=_t,this._mdf.o=!0,Nt=!0),this.sw!==Tt&&(this.sw=Tt,this._mdf.sw=!0,Nt=!0),this.sc!==Mt&&(this.sc=Mt,this._mdf.sc=!0,Nt=!0),this.fc!==Pt&&(this.fc=Pt,this._mdf.fc=!0,Nt=!0),this.m!==Ft&&(this.m=Ft,this._mdf.m=!0,Nt=!0),!Dt.length||this.p[0]===Dt[0]&&this.p[1]===Dt[1]&&this.p[4]===Dt[4]&&this.p[5]===Dt[5]&&this.p[12]===Dt[12]&&this.p[13]===Dt[13]||(this.p=Dt,this._mdf.p=!0,Nt=!0),Nt},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(_t,Tt){for(var Mt in Tt)Object.prototype.hasOwnProperty.call(Tt,Mt)&&(_t[Mt]=Tt[Mt]);return _t},TextProperty.prototype.setCurrentData=function(_t){_t.__complete||this.completeTextData(_t),this.currentData=_t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(_t){this.effectsSequence.push(_t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(_t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||_t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var Tt=this.currentData,Mt=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var Pt;this.lock=!0,this._mdf=!1;var Ft=this.effectsSequence.length,Dt=_t||this.data.d.k[this.keysIndex].s;for(Pt=0;Pt<Ft;Pt+=1)Dt=Mt!==this.keysIndex?this.effectsSequence[Pt](Dt,Dt.t):this.effectsSequence[Pt](this.currentData,Dt.t);Tt!==Dt&&this.setCurrentData(Dt),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var _t=this.data.d.k,Tt=this.elem.comp.renderedFrame,Mt=0,Pt=_t.length;Mt<=Pt-1&&!(Mt===Pt-1||_t[Mt+1].t>Tt);)Mt+=1;return this.keysIndex!==Mt&&(this.keysIndex=Mt),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(_t){for(var Tt,Mt,Pt=[],Ft=0,Dt=_t.length,Nt=!1;Ft<Dt;)Tt=_t.charCodeAt(Ft),FontManager.isCombinedCharacter(Tt)?Pt[Pt.length-1]+=_t.charAt(Ft):Tt>=55296&&Tt<=56319?(Mt=_t.charCodeAt(Ft+1))>=56320&&Mt<=57343?(Nt||FontManager.isModifier(Tt,Mt)?(Pt[Pt.length-1]+=_t.substr(Ft,2),Nt=!1):Pt.push(_t.substr(Ft,2)),Ft+=1):Pt.push(_t.charAt(Ft)):Tt>56319?(Mt=_t.charCodeAt(Ft+1),FontManager.isZeroWidthJoiner(Tt,Mt)?(Nt=!0,Pt[Pt.length-1]+=_t.substr(Ft,2),Ft+=1):Pt.push(_t.charAt(Ft))):FontManager.isZeroWidthJoiner(Tt)?(Pt[Pt.length-1]+=_t.charAt(Ft),Nt=!0):Pt.push(_t.charAt(Ft)),Ft+=1;return Pt},TextProperty.prototype.completeTextData=function(_t){_t.__complete=!0;var Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt=this.elem.globalData.fontManager,Xt=this.data,Ht=[],Wt=0,Qt=Xt.m.g,Zt=0,Kt=0,er=0,Yt=[],rr=0,ir=0,nr=zt.getFontByName(_t.f),ar=0,or=getFontProperties(nr);_t.fWeight=or.weight,_t.fStyle=or.style,_t.finalSize=_t.s,_t.finalText=this.buildFinalText(_t.t),Mt=_t.finalText.length,_t.finalLineHeight=_t.lh;var ur,dr=_t.tr/1e3*_t.finalSize;if(_t.sz)for(var hr,gr,pr=!0,mr=_t.sz[0],wr=_t.sz[1];pr;){hr=0,rr=0,Mt=(gr=this.buildFinalText(_t.t)).length,dr=_t.tr/1e3*_t.finalSize;var br=-1;for(Tt=0;Tt<Mt;Tt+=1)ur=gr[Tt].charCodeAt(0),Pt=!1,gr[Tt]===" "?br=Tt:ur!==13&&ur!==3||(rr=0,Pt=!0,hr+=_t.finalLineHeight||1.2*_t.finalSize),zt.chars?(Vt=zt.getCharData(gr[Tt],nr.fStyle,nr.fFamily),ar=Pt?0:Vt.w*_t.finalSize/100):ar=zt.measureText(gr[Tt],_t.f,_t.finalSize),rr+ar>mr&&gr[Tt]!==" "?(br===-1?Mt+=1:Tt=br,hr+=_t.finalLineHeight||1.2*_t.finalSize,gr.splice(Tt,br===Tt?1:0,"\r"),br=-1,rr=0):(rr+=ar,rr+=dr);hr+=nr.ascent*_t.finalSize/100,this.canResize&&_t.finalSize>this.minimumFontSize&&wr<hr?(_t.finalSize-=1,_t.finalLineHeight=_t.finalSize*_t.lh/_t.s):(_t.finalText=gr,Mt=_t.finalText.length,pr=!1)}rr=-dr,ar=0;var _r,Mr=0;for(Tt=0;Tt<Mt;Tt+=1)if(Pt=!1,(ur=(_r=_t.finalText[Tt]).charCodeAt(0))===13||ur===3?(Mr=0,Yt.push(rr),ir=rr>ir?rr:ir,rr=-2*dr,Ft="",Pt=!0,er+=1):Ft=_r,zt.chars?(Vt=zt.getCharData(_r,nr.fStyle,zt.getFontByName(_t.f).fFamily),ar=Pt?0:Vt.w*_t.finalSize/100):ar=zt.measureText(Ft,_t.f,_t.finalSize),_r===" "?Mr+=ar+dr:(rr+=ar+dr+Mr,Mr=0),Ht.push({l:ar,an:ar,add:Zt,n:Pt,anIndexes:[],val:Ft,line:er,animatorJustifyOffset:0}),Qt==2){if(Zt+=ar,Ft===""||Ft===" "||Tt===Mt-1){for(Ft!==""&&Ft!==" "||(Zt-=ar);Kt<=Tt;)Ht[Kt].an=Zt,Ht[Kt].ind=Wt,Ht[Kt].extra=ar,Kt+=1;Wt+=1,Zt=0}}else if(Qt==3){if(Zt+=ar,Ft===""||Tt===Mt-1){for(Ft===""&&(Zt-=ar);Kt<=Tt;)Ht[Kt].an=Zt,Ht[Kt].ind=Wt,Ht[Kt].extra=ar,Kt+=1;Zt=0,Wt+=1}}else Ht[Wt].ind=Wt,Ht[Wt].extra=0,Wt+=1;if(_t.l=Ht,ir=rr>ir?rr:ir,Yt.push(rr),_t.sz)_t.boxWidth=_t.sz[0],_t.justifyOffset=0;else switch(_t.boxWidth=ir,_t.j){case 1:_t.justifyOffset=-_t.boxWidth;break;case 2:_t.justifyOffset=-_t.boxWidth/2;break;default:_t.justifyOffset=0}_t.lineWidths=Yt;var Ar,xr,yr,Er,Cr=Xt.a;Nt=Cr.length;var Dr=[];for(Dt=0;Dt<Nt;Dt+=1){for((Ar=Cr[Dt]).a.sc&&(_t.strokeColorAnim=!0),Ar.a.sw&&(_t.strokeWidthAnim=!0),(Ar.a.fc||Ar.a.fh||Ar.a.fs||Ar.a.fb)&&(_t.fillColorAnim=!0),Er=0,yr=Ar.s.b,Tt=0;Tt<Mt;Tt+=1)(xr=Ht[Tt]).anIndexes[Dt]=Er,(yr==1&&xr.val!==""||yr==2&&xr.val!==""&&xr.val!==" "||yr==3&&(xr.n||xr.val==" "||Tt==Mt-1)||yr==4&&(xr.n||Tt==Mt-1))&&(Ar.s.rn===1&&Dr.push(Er),Er+=1);Xt.a[Dt].s.totalChars=Er;var jr,Hr=-1;if(Ar.s.rn===1)for(Tt=0;Tt<Mt;Tt+=1)Hr!=(xr=Ht[Tt]).anIndexes[Dt]&&(Hr=xr.anIndexes[Dt],jr=Dr.splice(Math.floor(Math.random()*Dr.length),1)[0]),xr.anIndexes[Dt]=jr}_t.yOffset=_t.finalLineHeight||1.2*_t.finalSize,_t.ls=_t.ls||0,_t.ascent=nr.ascent*_t.finalSize/100},TextProperty.prototype.updateDocumentData=function(_t,Tt){Tt=Tt===void 0?this.keysIndex:Tt;var Mt=this.copyData({},this.data.d.k[Tt].s);Mt=this.copyData(Mt,_t),this.data.d.k[Tt].s=Mt,this.recalculate(Tt),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(_t){var Tt=this.data.d.k[_t].s;Tt.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(Tt)},TextProperty.prototype.canResizeFont=function(_t){this.canResize=_t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(_t){this.minimumFontSize=Math.floor(_t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var _t=Math.max,Tt=Math.min,Mt=Math.floor;function Pt(Ft,Dt){this._currentTextLength=-1,this.k=!1,this.data=Dt,this.elem=Ft,this.comp=Ft.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(Ft),this.s=PropertyFactory.getProp(Ft,Dt.s||{k:0},0,0,this),this.e="e"in Dt?PropertyFactory.getProp(Ft,Dt.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(Ft,Dt.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(Ft,Dt.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(Ft,Dt.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(Ft,Dt.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(Ft,Dt.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return Pt.prototype={getMult:function(Ft){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var Dt=0,Nt=0,Vt=1,zt=1;this.ne.v>0?Dt=this.ne.v/100:Nt=-this.ne.v/100,this.xe.v>0?Vt=1-this.xe.v/100:zt=1+this.xe.v/100;var Xt=BezierFactory.getBezierEasing(Dt,Nt,Vt,zt).get,Ht=0,Wt=this.finalS,Qt=this.finalE,Zt=this.data.sh;if(Zt===2)Ht=Xt(Ht=Qt===Wt?Ft>=Qt?1:0:_t(0,Tt(.5/(Qt-Wt)+(Ft-Wt)/(Qt-Wt),1)));else if(Zt===3)Ht=Xt(Ht=Qt===Wt?Ft>=Qt?0:1:1-_t(0,Tt(.5/(Qt-Wt)+(Ft-Wt)/(Qt-Wt),1)));else if(Zt===4)Qt===Wt?Ht=0:(Ht=_t(0,Tt(.5/(Qt-Wt)+(Ft-Wt)/(Qt-Wt),1)))<.5?Ht*=2:Ht=1-2*(Ht-.5),Ht=Xt(Ht);else if(Zt===5){if(Qt===Wt)Ht=0;else{var Kt=Qt-Wt,er=-Kt/2+(Ft=Tt(_t(0,Ft+.5-Wt),Qt-Wt)),Yt=Kt/2;Ht=Math.sqrt(1-er*er/(Yt*Yt))}Ht=Xt(Ht)}else Zt===6?(Qt===Wt?Ht=0:(Ft=Tt(_t(0,Ft+.5-Wt),Qt-Wt),Ht=(1+Math.cos(Math.PI+2*Math.PI*Ft/(Qt-Wt)))/2),Ht=Xt(Ht)):(Ft>=Mt(Wt)&&(Ht=_t(0,Tt(Ft-Wt<0?Tt(Qt,1)-(Wt-Ft):Qt-Ft,1))),Ht=Xt(Ht));if(this.sm.v!==100){var rr=.01*this.sm.v;rr===0&&(rr=1e-8);var ir=.5-.5*rr;Ht<ir?Ht=0:(Ht=(Ht-ir)/rr)>1&&(Ht=1)}return Ht*this.a.v},getValue:function(Ft){this.iterateDynamicProperties(),this._mdf=Ft||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,Ft&&this.data.r===2&&(this.e.v=this._currentTextLength);var Dt=this.data.r===2?1:100/this.data.totalChars,Nt=this.o.v/Dt,Vt=this.s.v/Dt+Nt,zt=this.e.v/Dt+Nt;if(Vt>zt){var Xt=Vt;Vt=zt,zt=Xt}this.finalS=Vt,this.finalE=zt}},extendPrototype([DynamicPropertyContainer],Pt),{getTextSelectorProp:function(Ft,Dt,Nt){return new Pt(Ft,Dt)}}}();function TextAnimatorDataProperty(_t,Tt,Mt){var Pt={propType:!1},Ft=PropertyFactory.getProp,Dt=Tt.a;this.a={r:Dt.r?Ft(_t,Dt.r,0,degToRads,Mt):Pt,rx:Dt.rx?Ft(_t,Dt.rx,0,degToRads,Mt):Pt,ry:Dt.ry?Ft(_t,Dt.ry,0,degToRads,Mt):Pt,sk:Dt.sk?Ft(_t,Dt.sk,0,degToRads,Mt):Pt,sa:Dt.sa?Ft(_t,Dt.sa,0,degToRads,Mt):Pt,s:Dt.s?Ft(_t,Dt.s,1,.01,Mt):Pt,a:Dt.a?Ft(_t,Dt.a,1,0,Mt):Pt,o:Dt.o?Ft(_t,Dt.o,0,.01,Mt):Pt,p:Dt.p?Ft(_t,Dt.p,1,0,Mt):Pt,sw:Dt.sw?Ft(_t,Dt.sw,0,0,Mt):Pt,sc:Dt.sc?Ft(_t,Dt.sc,1,0,Mt):Pt,fc:Dt.fc?Ft(_t,Dt.fc,1,0,Mt):Pt,fh:Dt.fh?Ft(_t,Dt.fh,0,0,Mt):Pt,fs:Dt.fs?Ft(_t,Dt.fs,0,.01,Mt):Pt,fb:Dt.fb?Ft(_t,Dt.fb,0,.01,Mt):Pt,t:Dt.t?Ft(_t,Dt.t,0,0,Mt):Pt},this.s=TextSelectorProp.getTextSelectorProp(_t,Tt.s,Mt),this.s.t=Tt.s.t}function TextAnimatorProperty(_t,Tt,Mt){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=_t,this._renderType=Tt,this._elem=Mt,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(Mt)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var _t,Tt,Mt=this._textData.a.length,Pt=PropertyFactory.getProp;for(_t=0;_t<Mt;_t+=1)Tt=this._textData.a[_t],this._animatorsData[_t]=new TextAnimatorDataProperty(this._elem,Tt,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:Pt(this._elem,this._textData.p.a,0,0,this),f:Pt(this._elem,this._textData.p.f,0,0,this),l:Pt(this._elem,this._textData.p.l,0,0,this),r:Pt(this._elem,this._textData.p.r,0,0,this),p:Pt(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=Pt(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(_t,Tt){if(this.lettersChangedFlag=Tt,this._mdf||this._isFirstFrame||Tt||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt,Qt,Zt,Kt,er,Yt,rr,ir,nr,ar,or=this._moreOptions.alignment.v,ur=this._animatorsData,dr=this._textData,hr=this.mHelper,gr=this._renderType,pr=this.renderedLetters.length,mr=_t.l;if(this._hasMaskedPath){if(ar=this._pathData.m,!this._pathData.n||this._pathData._mdf){var wr,br=ar.v;for(this._pathData.r.v&&(br=br.reverse()),Nt={tLength:0,segments:[]},Dt=br._length-1,rr=0,Ft=0;Ft<Dt;Ft+=1)wr=bez.buildBezierData(br.v[Ft],br.v[Ft+1],[br.o[Ft][0]-br.v[Ft][0],br.o[Ft][1]-br.v[Ft][1]],[br.i[Ft+1][0]-br.v[Ft+1][0],br.i[Ft+1][1]-br.v[Ft+1][1]]),Nt.tLength+=wr.segmentLength,Nt.segments.push(wr),rr+=wr.segmentLength;Ft=Dt,ar.v.c&&(wr=bez.buildBezierData(br.v[Ft],br.v[0],[br.o[Ft][0]-br.v[Ft][0],br.o[Ft][1]-br.v[Ft][1]],[br.i[0][0]-br.v[0][0],br.i[0][1]-br.v[0][1]]),Nt.tLength+=wr.segmentLength,Nt.segments.push(wr),rr+=wr.segmentLength),this._pathData.pi=Nt}if(Nt=this._pathData.pi,Vt=this._pathData.f.v,Qt=0,Wt=1,Xt=0,Ht=!0,er=Nt.segments,Vt<0&&ar.v.c)for(Nt.tLength<Math.abs(Vt)&&(Vt=-Math.abs(Vt)%Nt.tLength),Wt=(Kt=er[Qt=er.length-1].points).length-1;Vt<0;)Vt+=Kt[Wt].partialLength,(Wt-=1)<0&&(Wt=(Kt=er[Qt-=1].points).length-1);Zt=(Kt=er[Qt].points)[Wt-1],Yt=(zt=Kt[Wt]).partialLength}Dt=mr.length,Mt=0,Pt=0;var _r,Mr,Ar,xr,yr,Er=1.2*_t.finalSize*.714,Cr=!0;Ar=ur.length;var Dr,jr,Hr,zr,Qr,Xr,Br,Ur,Jr,Zr,pn,_i,Rr=-1,Mn=Vt,ls=Qt,us=Wt,ss=-1,kn="",In=this.defaultPropsArray;if(_t.j===2||_t.j===1){var _n=0,Cn=0,jn=_t.j===2?-.5:-1,ts=0,ds=!0;for(Ft=0;Ft<Dt;Ft+=1)if(mr[Ft].n){for(_n&&(_n+=Cn);ts<Ft;)mr[ts].animatorJustifyOffset=_n,ts+=1;_n=0,ds=!0}else{for(Mr=0;Mr<Ar;Mr+=1)(_r=ur[Mr].a).t.propType&&(ds&&_t.j===2&&(Cn+=_r.t.v*jn),(yr=ur[Mr].s.getMult(mr[Ft].anIndexes[Mr],dr.a[Mr].s.totalChars)).length?_n+=_r.t.v*yr[0]*jn:_n+=_r.t.v*yr*jn);ds=!1}for(_n&&(_n+=Cn);ts<Ft;)mr[ts].animatorJustifyOffset=_n,ts+=1}for(Ft=0;Ft<Dt;Ft+=1){if(hr.reset(),zr=1,mr[Ft].n)Mt=0,Pt+=_t.yOffset,Pt+=Cr?1:0,Vt=Mn,Cr=!1,this._hasMaskedPath&&(Wt=us,Zt=(Kt=er[Qt=ls].points)[Wt-1],Yt=(zt=Kt[Wt]).partialLength,Xt=0),kn="",pn="",Jr="",_i="",In=this.defaultPropsArray;else{if(this._hasMaskedPath){if(ss!==mr[Ft].line){switch(_t.j){case 1:Vt+=rr-_t.lineWidths[mr[Ft].line];break;case 2:Vt+=(rr-_t.lineWidths[mr[Ft].line])/2}ss=mr[Ft].line}Rr!==mr[Ft].ind&&(mr[Rr]&&(Vt+=mr[Rr].extra),Vt+=mr[Ft].an/2,Rr=mr[Ft].ind),Vt+=or[0]*mr[Ft].an*.005;var es=0;for(Mr=0;Mr<Ar;Mr+=1)(_r=ur[Mr].a).p.propType&&((yr=ur[Mr].s.getMult(mr[Ft].anIndexes[Mr],dr.a[Mr].s.totalChars)).length?es+=_r.p.v[0]*yr[0]:es+=_r.p.v[0]*yr),_r.a.propType&&((yr=ur[Mr].s.getMult(mr[Ft].anIndexes[Mr],dr.a[Mr].s.totalChars)).length?es+=_r.a.v[0]*yr[0]:es+=_r.a.v[0]*yr);for(Ht=!0,this._pathData.a.v&&(Vt=.5*mr[0].an+(rr-this._pathData.f.v-.5*mr[0].an-.5*mr[mr.length-1].an)*Rr/(Dt-1),Vt+=this._pathData.f.v);Ht;)Xt+Yt>=Vt+es||!Kt?(ir=(Vt+es-Xt)/zt.partialLength,jr=Zt.point[0]+(zt.point[0]-Zt.point[0])*ir,Hr=Zt.point[1]+(zt.point[1]-Zt.point[1])*ir,hr.translate(-or[0]*mr[Ft].an*.005,-or[1]*Er*.01),Ht=!1):Kt&&(Xt+=zt.partialLength,(Wt+=1)>=Kt.length&&(Wt=0,er[Qt+=1]?Kt=er[Qt].points:ar.v.c?(Wt=0,Kt=er[Qt=0].points):(Xt-=zt.partialLength,Kt=null)),Kt&&(Zt=zt,Yt=(zt=Kt[Wt]).partialLength));Dr=mr[Ft].an/2-mr[Ft].add,hr.translate(-Dr,0,0)}else Dr=mr[Ft].an/2-mr[Ft].add,hr.translate(-Dr,0,0),hr.translate(-or[0]*mr[Ft].an*.005,-or[1]*Er*.01,0);for(Mr=0;Mr<Ar;Mr+=1)(_r=ur[Mr].a).t.propType&&(yr=ur[Mr].s.getMult(mr[Ft].anIndexes[Mr],dr.a[Mr].s.totalChars),Mt===0&&_t.j===0||(this._hasMaskedPath?yr.length?Vt+=_r.t.v*yr[0]:Vt+=_r.t.v*yr:yr.length?Mt+=_r.t.v*yr[0]:Mt+=_r.t.v*yr));for(_t.strokeWidthAnim&&(Xr=_t.sw||0),_t.strokeColorAnim&&(Qr=_t.sc?[_t.sc[0],_t.sc[1],_t.sc[2]]:[0,0,0]),_t.fillColorAnim&&_t.fc&&(Br=[_t.fc[0],_t.fc[1],_t.fc[2]]),Mr=0;Mr<Ar;Mr+=1)(_r=ur[Mr].a).a.propType&&((yr=ur[Mr].s.getMult(mr[Ft].anIndexes[Mr],dr.a[Mr].s.totalChars)).length?hr.translate(-_r.a.v[0]*yr[0],-_r.a.v[1]*yr[1],_r.a.v[2]*yr[2]):hr.translate(-_r.a.v[0]*yr,-_r.a.v[1]*yr,_r.a.v[2]*yr));for(Mr=0;Mr<Ar;Mr+=1)(_r=ur[Mr].a).s.propType&&((yr=ur[Mr].s.getMult(mr[Ft].anIndexes[Mr],dr.a[Mr].s.totalChars)).length?hr.scale(1+(_r.s.v[0]-1)*yr[0],1+(_r.s.v[1]-1)*yr[1],1):hr.scale(1+(_r.s.v[0]-1)*yr,1+(_r.s.v[1]-1)*yr,1));for(Mr=0;Mr<Ar;Mr+=1){if(_r=ur[Mr].a,yr=ur[Mr].s.getMult(mr[Ft].anIndexes[Mr],dr.a[Mr].s.totalChars),_r.sk.propType&&(yr.length?hr.skewFromAxis(-_r.sk.v*yr[0],_r.sa.v*yr[1]):hr.skewFromAxis(-_r.sk.v*yr,_r.sa.v*yr)),_r.r.propType&&(yr.length?hr.rotateZ(-_r.r.v*yr[2]):hr.rotateZ(-_r.r.v*yr)),_r.ry.propType&&(yr.length?hr.rotateY(_r.ry.v*yr[1]):hr.rotateY(_r.ry.v*yr)),_r.rx.propType&&(yr.length?hr.rotateX(_r.rx.v*yr[0]):hr.rotateX(_r.rx.v*yr)),_r.o.propType&&(yr.length?zr+=(_r.o.v*yr[0]-zr)*yr[0]:zr+=(_r.o.v*yr-zr)*yr),_t.strokeWidthAnim&&_r.sw.propType&&(yr.length?Xr+=_r.sw.v*yr[0]:Xr+=_r.sw.v*yr),_t.strokeColorAnim&&_r.sc.propType)for(Ur=0;Ur<3;Ur+=1)yr.length?Qr[Ur]+=(_r.sc.v[Ur]-Qr[Ur])*yr[0]:Qr[Ur]+=(_r.sc.v[Ur]-Qr[Ur])*yr;if(_t.fillColorAnim&&_t.fc){if(_r.fc.propType)for(Ur=0;Ur<3;Ur+=1)yr.length?Br[Ur]+=(_r.fc.v[Ur]-Br[Ur])*yr[0]:Br[Ur]+=(_r.fc.v[Ur]-Br[Ur])*yr;_r.fh.propType&&(Br=yr.length?addHueToRGB(Br,_r.fh.v*yr[0]):addHueToRGB(Br,_r.fh.v*yr)),_r.fs.propType&&(Br=yr.length?addSaturationToRGB(Br,_r.fs.v*yr[0]):addSaturationToRGB(Br,_r.fs.v*yr)),_r.fb.propType&&(Br=yr.length?addBrightnessToRGB(Br,_r.fb.v*yr[0]):addBrightnessToRGB(Br,_r.fb.v*yr))}}for(Mr=0;Mr<Ar;Mr+=1)(_r=ur[Mr].a).p.propType&&(yr=ur[Mr].s.getMult(mr[Ft].anIndexes[Mr],dr.a[Mr].s.totalChars),this._hasMaskedPath?yr.length?hr.translate(0,_r.p.v[1]*yr[0],-_r.p.v[2]*yr[1]):hr.translate(0,_r.p.v[1]*yr,-_r.p.v[2]*yr):yr.length?hr.translate(_r.p.v[0]*yr[0],_r.p.v[1]*yr[1],-_r.p.v[2]*yr[2]):hr.translate(_r.p.v[0]*yr,_r.p.v[1]*yr,-_r.p.v[2]*yr));if(_t.strokeWidthAnim&&(Jr=Xr<0?0:Xr),_t.strokeColorAnim&&(Zr="rgb("+Math.round(255*Qr[0])+","+Math.round(255*Qr[1])+","+Math.round(255*Qr[2])+")"),_t.fillColorAnim&&_t.fc&&(pn="rgb("+Math.round(255*Br[0])+","+Math.round(255*Br[1])+","+Math.round(255*Br[2])+")"),this._hasMaskedPath){if(hr.translate(0,-_t.ls),hr.translate(0,or[1]*Er*.01+Pt,0),this._pathData.p.v){nr=(zt.point[1]-Zt.point[1])/(zt.point[0]-Zt.point[0]);var hs=180*Math.atan(nr)/Math.PI;zt.point[0]<Zt.point[0]&&(hs+=180),hr.rotate(-hs*Math.PI/180)}hr.translate(jr,Hr,0),Vt-=or[0]*mr[Ft].an*.005,mr[Ft+1]&&Rr!==mr[Ft+1].ind&&(Vt+=mr[Ft].an/2,Vt+=.001*_t.tr*_t.finalSize)}else{switch(hr.translate(Mt,Pt,0),_t.ps&&hr.translate(_t.ps[0],_t.ps[1]+_t.ascent,0),_t.j){case 1:hr.translate(mr[Ft].animatorJustifyOffset+_t.justifyOffset+(_t.boxWidth-_t.lineWidths[mr[Ft].line]),0,0);break;case 2:hr.translate(mr[Ft].animatorJustifyOffset+_t.justifyOffset+(_t.boxWidth-_t.lineWidths[mr[Ft].line])/2,0,0)}hr.translate(0,-_t.ls),hr.translate(Dr,0,0),hr.translate(or[0]*mr[Ft].an*.005,or[1]*Er*.01,0),Mt+=mr[Ft].l+.001*_t.tr*_t.finalSize}gr==="html"?kn=hr.toCSS():gr==="svg"?kn=hr.to2dCSS():In=[hr.props[0],hr.props[1],hr.props[2],hr.props[3],hr.props[4],hr.props[5],hr.props[6],hr.props[7],hr.props[8],hr.props[9],hr.props[10],hr.props[11],hr.props[12],hr.props[13],hr.props[14],hr.props[15]],_i=zr}pr<=Ft?(xr=new LetterProps(_i,Jr,Zr,pn,kn,In),this.renderedLetters.push(xr),pr+=1,this.lettersChangedFlag=!0):(xr=this.renderedLetters[Ft],this.lettersChangedFlag=xr.update(_i,Jr,Zr,pn,kn,In)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(_t,Tt,Mt){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(_t,Tt,Mt),this.textProperty=new TextProperty(this,_t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(_t.t,this.renderType,this),this.initTransform(_t,Tt,Mt),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(_t){this._mdf=!1,this.prepareRenderableFrame(_t),this.prepareProperties(_t,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(_t,Tt){var Mt,Pt,Ft=Tt.length,Dt="";for(Mt=0;Mt<Ft;Mt+=1)Tt[Mt].ty==="sh"&&(Pt=Tt[Mt].ks.k,Dt+=buildShapeString(Pt,Pt.i.length,!0,_t));return Dt},ITextElement.prototype.updateDocumentData=function(_t,Tt){this.textProperty.updateDocumentData(_t,Tt)},ITextElement.prototype.canResizeFont=function(_t){this.textProperty.canResizeFont(_t)},ITextElement.prototype.setMinimumFontSize=function(_t){this.textProperty.setMinimumFontSize(_t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(_t,Tt,Mt,Pt,Ft){switch(_t.ps&&Tt.translate(_t.ps[0],_t.ps[1]+_t.ascent,0),Tt.translate(0,-_t.ls,0),_t.j){case 1:Tt.translate(_t.justifyOffset+(_t.boxWidth-_t.lineWidths[Mt]),0,0);break;case 2:Tt.translate(_t.justifyOffset+(_t.boxWidth-_t.lineWidths[Mt])/2,0,0)}Tt.translate(Pt,Ft,0)},ITextElement.prototype.buildColor=function(_t){return"rgb("+Math.round(255*_t[0])+","+Math.round(255*_t[1])+","+Math.round(255*_t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){};var emptyShapeData={shapes:[]};function SVGTextLottieElement(_t,Tt,Mt){this.textSpans=[],this.renderType="svg",this.initElement(_t,Tt,Mt)}function ISolidElement(_t,Tt,Mt){this.initElement(_t,Tt,Mt)}function NullElement(_t,Tt,Mt){this.initFrame(),this.initBaseData(_t,Tt,Mt),this.initFrame(),this.initTransform(_t,Tt,Mt),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(_t,Tt,Mt){this.layers=_t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(_t,Tt,Mt),this.tm=_t.tm?PropertyFactory.getProp(this,_t.tm,0,Tt.frameRate,this):{_placeholder:!0}}function SVGRenderer(_t,Tt){this.animationItem=_t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var Mt="";if(Tt&&Tt.title){var Pt=createNS("title"),Ft=createElementID();Pt.setAttribute("id",Ft),Pt.textContent=Tt.title,this.svgElement.appendChild(Pt),Mt+=Ft}if(Tt&&Tt.description){var Dt=createNS("desc"),Nt=createElementID();Dt.setAttribute("id",Nt),Dt.textContent=Tt.description,this.svgElement.appendChild(Dt),Mt+=" "+Nt}Mt&&this.svgElement.setAttribute("aria-labelledby",Mt);var Vt=createNS("defs");this.svgElement.appendChild(Vt);var zt=createNS("g");this.svgElement.appendChild(zt),this.layerElement=zt,this.renderConfig={preserveAspectRatio:Tt&&Tt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:Tt&&Tt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:Tt&&Tt.contentVisibility||"visible",progressiveLoad:Tt&&Tt.progressiveLoad||!1,hideOnTransparent:!(Tt&&Tt.hideOnTransparent===!1),viewBoxOnly:Tt&&Tt.viewBoxOnly||!1,viewBoxSize:Tt&&Tt.viewBoxSize||!1,className:Tt&&Tt.className||"",id:Tt&&Tt.id||"",focusable:Tt&&Tt.focusable,filterSize:{width:Tt&&Tt.filterSize&&Tt.filterSize.width||"100%",height:Tt&&Tt.filterSize&&Tt.filterSize.height||"100%",x:Tt&&Tt.filterSize&&Tt.filterSize.x||"0%",y:Tt&&Tt.filterSize&&Tt.filterSize.y||"0%"}},this.globalData={_mdf:!1,frameNum:-1,defs:Vt,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CVContextData(){var _t;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),_t=0;_t<15;_t+=1)this.saved[_t]=createTypedArray("float32",16);this._length=15}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVEffects(){}function CVMaskElement(_t,Tt){var Mt;this.data=_t,this.element=Tt,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var Pt=this.masksProperties.length,Ft=!1;for(Mt=0;Mt<Pt;Mt+=1)this.masksProperties[Mt].mode!=="n"&&(Ft=!0),this.viewData[Mt]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[Mt],3);this.hasMasks=Ft,Ft&&this.element.addRenderableComponent(this)}function CVBaseElement(){}function CVShapeData(_t,Tt,Mt,Pt){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var Ft,Dt=4;Tt.ty==="rc"?Dt=5:Tt.ty==="el"?Dt=6:Tt.ty==="sr"&&(Dt=7),this.sh=ShapePropertyFactory.getShapeProp(_t,Tt,Dt,_t);var Nt,Vt=Mt.length;for(Ft=0;Ft<Vt;Ft+=1)Mt[Ft].closed||(Nt={transforms:Pt.addTransformSequence(Mt[Ft].transforms),trNodes:[]},this.styledShapes.push(Nt),Mt[Ft].elements.push(Nt))}function CVShapeElement(_t,Tt,Mt){this.shapes=[],this.shapesData=_t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(_t,Tt,Mt)}function CVTextElement(_t,Tt,Mt){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(_t,Tt,Mt)}function CVImageElement(_t,Tt,Mt){this.assetData=Tt.getAssetData(_t.refId),this.img=Tt.imageLoader.getAsset(this.assetData),this.initElement(_t,Tt,Mt)}function CVSolidElement(_t,Tt,Mt){this.initElement(_t,Tt,Mt)}function CanvasRendererBase(_t,Tt){this.animationItem=_t,this.renderConfig={clearCanvas:!Tt||Tt.clearCanvas===void 0||Tt.clearCanvas,context:Tt&&Tt.context||null,progressiveLoad:Tt&&Tt.progressiveLoad||!1,preserveAspectRatio:Tt&&Tt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:Tt&&Tt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:Tt&&Tt.contentVisibility||"visible",className:Tt&&Tt.className||"",id:Tt&&Tt.id||""},this.renderConfig.dpr=Tt&&Tt.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=Tt&&Tt.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function CVCompElement(_t,Tt,Mt){this.completeLayers=!1,this.layers=_t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(_t,Tt,Mt),this.tm=_t.tm?PropertyFactory.getProp(this,_t.tm,0,Tt.frameRate,this):{_placeholder:!0}}function CanvasRenderer(_t,Tt){this.animationItem=_t,this.renderConfig={clearCanvas:!Tt||Tt.clearCanvas===void 0||Tt.clearCanvas,context:Tt&&Tt.context||null,progressiveLoad:Tt&&Tt.progressiveLoad||!1,preserveAspectRatio:Tt&&Tt.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:Tt&&Tt.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:Tt&&Tt.contentVisibility||"visible",className:Tt&&Tt.className||"",id:Tt&&Tt.id||""},this.renderConfig.dpr=Tt&&Tt.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=Tt&&Tt.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HBaseElement(){}function HSolidElement(_t,Tt,Mt){this.initElement(_t,Tt,Mt)}function HShapeElement(_t,Tt,Mt){this.shapes=[],this.shapesData=_t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(_t,Tt,Mt),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(_t,Tt,Mt){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(_t,Tt,Mt)}function HCameraElement(_t,Tt,Mt){this.initFrame(),this.initBaseData(_t,Tt,Mt),this.initHierarchy();var Pt=PropertyFactory.getProp;if(this.pe=Pt(this,_t.pe,0,0,this),_t.ks.p.s?(this.px=Pt(this,_t.ks.p.x,1,0,this),this.py=Pt(this,_t.ks.p.y,1,0,this),this.pz=Pt(this,_t.ks.p.z,1,0,this)):this.p=Pt(this,_t.ks.p,1,0,this),_t.ks.a&&(this.a=Pt(this,_t.ks.a,1,0,this)),_t.ks.or.k.length&&_t.ks.or.k[0].to){var Ft,Dt=_t.ks.or.k.length;for(Ft=0;Ft<Dt;Ft+=1)_t.ks.or.k[Ft].to=null,_t.ks.or.k[Ft].ti=null}this.or=Pt(this,_t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=Pt(this,_t.ks.rx,0,degToRads,this),this.ry=Pt(this,_t.ks.ry,0,degToRads,this),this.rz=Pt(this,_t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(_t,Tt,Mt){this.assetData=Tt.getAssetData(_t.refId),this.initElement(_t,Tt,Mt)}function HybridRendererBase(_t,Tt){this.animationItem=_t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:Tt&&Tt.className||"",imagePreserveAspectRatio:Tt&&Tt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(Tt&&Tt.hideOnTransparent===!1),filterSize:{width:Tt&&Tt.filterSize&&Tt.filterSize.width||"400%",height:Tt&&Tt.filterSize&&Tt.filterSize.height||"400%",x:Tt&&Tt.filterSize&&Tt.filterSize.x||"-100%",y:Tt&&Tt.filterSize&&Tt.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(_t,Tt,Mt){this.layers=_t.layers,this.supports3d=!_t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(_t,Tt,Mt),this.tm=_t.tm?PropertyFactory.getProp(this,_t.tm,0,Tt.frameRate,this):{_placeholder:!0}}function HybridRenderer(_t,Tt){this.animationItem=_t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:Tt&&Tt.className||"",imagePreserveAspectRatio:Tt&&Tt.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(Tt&&Tt.hideOnTransparent===!1),filterSize:{width:Tt&&Tt.filterSize&&Tt.filterSize.width||"400%",height:Tt&&Tt.filterSize&&Tt.filterSize.height||"400%",x:Tt&&Tt.filterSize&&Tt.filterSize.x||"-100%",y:Tt&&Tt.filterSize&&Tt.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(_t){for(var Tt=0,Mt=_t.length,Pt=[],Ft="";Tt<Mt;)_t[Tt]===String.fromCharCode(13)||_t[Tt]===String.fromCharCode(3)?(Pt.push(Ft),Ft=""):Ft+=_t[Tt],Tt+=1;return Pt.push(Ft),Pt},SVGTextLottieElement.prototype.buildNewText=function(){var _t,Tt;this.addDynamicProperty(this);var Mt=this.textProperty.currentData;this.renderedLetters=createSizedArray(Mt?Mt.l.length:0),Mt.fc?this.layerElement.setAttribute("fill",this.buildColor(Mt.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),Mt.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(Mt.sc)),this.layerElement.setAttribute("stroke-width",Mt.sw)),this.layerElement.setAttribute("font-size",Mt.finalSize);var Pt=this.globalData.fontManager.getFontByName(Mt.f);if(Pt.fClass)this.layerElement.setAttribute("class",Pt.fClass);else{this.layerElement.setAttribute("font-family",Pt.fFamily);var Ft=Mt.fWeight,Dt=Mt.fStyle;this.layerElement.setAttribute("font-style",Dt),this.layerElement.setAttribute("font-weight",Ft)}this.layerElement.setAttribute("aria-label",Mt.t);var Nt,Vt=Mt.l||[],zt=!!this.globalData.fontManager.chars;Tt=Vt.length;var Xt=this.mHelper,Ht=this.data.singleShape,Wt=0,Qt=0,Zt=!0,Kt=.001*Mt.tr*Mt.finalSize;if(!Ht||zt||Mt.sz){var er,Yt=this.textSpans.length;for(_t=0;_t<Tt;_t+=1){if(this.textSpans[_t]||(this.textSpans[_t]={span:null,childSpan:null,glyph:null}),!zt||!Ht||_t===0){if(Nt=Yt>_t?this.textSpans[_t].span:createNS(zt?"g":"text"),Yt<=_t){if(Nt.setAttribute("stroke-linecap","butt"),Nt.setAttribute("stroke-linejoin","round"),Nt.setAttribute("stroke-miterlimit","4"),this.textSpans[_t].span=Nt,zt){var rr=createNS("g");Nt.appendChild(rr),this.textSpans[_t].childSpan=rr}this.textSpans[_t].span=Nt,this.layerElement.appendChild(Nt)}Nt.style.display="inherit"}if(Xt.reset(),Xt.scale(Mt.finalSize/100,Mt.finalSize/100),Ht&&(Vt[_t].n&&(Wt=-Kt,Qt+=Mt.yOffset,Qt+=Zt?1:0,Zt=!1),this.applyTextPropertiesToMatrix(Mt,Xt,Vt[_t].line,Wt,Qt),Wt+=Vt[_t].l||0,Wt+=Kt),zt){var ir;if((er=this.globalData.fontManager.getCharData(Mt.finalText[_t],Pt.fStyle,this.globalData.fontManager.getFontByName(Mt.f).fFamily)).t===1)ir=new SVGCompElement(er.data,this.globalData,this);else{var nr=emptyShapeData;er.data&&er.data.shapes&&(nr=er.data),ir=new SVGShapeElement(nr,this.globalData,this)}this.textSpans[_t].glyph=ir,ir._debug=!0,ir.prepareFrame(0),ir.renderFrame(),this.textSpans[_t].childSpan.appendChild(ir.layerElement),this.textSpans[_t].childSpan.setAttribute("transform","scale("+Mt.finalSize/100+","+Mt.finalSize/100+")")}else Ht&&Nt.setAttribute("transform","translate("+Xt.props[12]+","+Xt.props[13]+")"),Nt.textContent=Vt[_t].val,Nt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}Ht&&Nt&&Nt.setAttribute("d","")}else{var ar=this.textContainer,or="start";switch(Mt.j){case 1:or="end";break;case 2:or="middle";break;default:or="start"}ar.setAttribute("text-anchor",or),ar.setAttribute("letter-spacing",Kt);var ur=this.buildTextContents(Mt.finalText);for(Tt=ur.length,Qt=Mt.ps?Mt.ps[1]+Mt.ascent:0,_t=0;_t<Tt;_t+=1)(Nt=this.textSpans[_t].span||createNS("tspan")).textContent=ur[_t],Nt.setAttribute("x",0),Nt.setAttribute("y",Qt),Nt.style.display="inherit",ar.appendChild(Nt),this.textSpans[_t]||(this.textSpans[_t]={span:null,glyph:null}),this.textSpans[_t].span=Nt,Qt+=Mt.finalLineHeight;this.layerElement.appendChild(ar)}for(;_t<this.textSpans.length;)this.textSpans[_t].span.style.display="none",_t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var _t=this.layerElement.getBBox();this.bbox={top:_t.y,left:_t.x,width:_t.width,height:_t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var _t,Tt,Mt=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,_t=0;_t<Mt;_t+=1)(Tt=this.textSpans[_t].glyph)&&(Tt.prepareFrame(this.comp.renderedFrame-this.data.st),Tt._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if((!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var _t,Tt;this._sizeChanged=!0;var Mt,Pt,Ft,Dt=this.textAnimator.renderedLetters,Nt=this.textProperty.currentData.l;for(Tt=Nt.length,_t=0;_t<Tt;_t+=1)Nt[_t].n||(Mt=Dt[_t],Pt=this.textSpans[_t].span,(Ft=this.textSpans[_t].glyph)&&Ft.renderFrame(),Mt._mdf.m&&Pt.setAttribute("transform",Mt.m),Mt._mdf.o&&Pt.setAttribute("opacity",Mt.o),Mt._mdf.sw&&Pt.setAttribute("stroke-width",Mt.sw),Mt._mdf.sc&&Pt.setAttribute("stroke",Mt.sc),Mt._mdf.fc&&Pt.setAttribute("fill",Mt.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var _t=createNS("rect");_t.setAttribute("width",this.data.sw),_t.setAttribute("height",this.data.sh),_t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(_t)},NullElement.prototype.prepareFrame=function(_t){this.prepareProperties(_t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(_t){return new NullElement(_t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(_t){return new SVGShapeElement(_t,this.globalData,this)},SVGRendererBase.prototype.createText=function(_t){return new SVGTextLottieElement(_t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(_t){return new IImageElement(_t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(_t){return new ISolidElement(_t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(_t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+_t.w+" "+_t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",_t.w),this.svgElement.setAttribute("height",_t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var Tt=this.globalData.defs;this.setupGlobalData(_t,Tt),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=_t;var Mt=createNS("clipPath"),Pt=createNS("rect");Pt.setAttribute("width",_t.w),Pt.setAttribute("height",_t.h),Pt.setAttribute("x",0),Pt.setAttribute("y",0);var Ft=createElementID();Mt.setAttribute("id",Ft),Mt.appendChild(Pt),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+Ft+")"),Tt.appendChild(Mt),this.layers=_t.layers,this.elements=createSizedArray(_t.layers.length)},SVGRendererBase.prototype.destroy=function(){var _t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var Tt=this.layers?this.layers.length:0;for(_t=0;_t<Tt;_t+=1)this.elements[_t]&&this.elements[_t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.buildItem=function(_t){var Tt=this.elements;if(!Tt[_t]&&this.layers[_t].ty!==99){Tt[_t]=!0;var Mt=this.createItem(this.layers[_t]);Tt[_t]=Mt,getExpressionsPlugin()&&(this.layers[_t].ty===0&&this.globalData.projectInterface.registerComposition(Mt),Mt.initExpressions()),this.appendElementInPos(Mt,_t),this.layers[_t].tt&&(this.elements[_t-1]&&this.elements[_t-1]!==!0?Mt.setMatte(Tt[_t-1].layerId):(this.buildItem(_t-1),this.addPendingElement(Mt)))}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _t=this.pendingElements.pop();if(_t.checkParenting(),_t.data.tt)for(var Tt=0,Mt=this.elements.length;Tt<Mt;){if(this.elements[Tt]===_t){_t.setMatte(this.elements[Tt-1].layerId);break}Tt+=1}}},SVGRendererBase.prototype.renderFrame=function(_t){if(this.renderedFrame!==_t&&!this.destroyed){var Tt;_t===null?_t=this.renderedFrame:this.renderedFrame=_t,this.globalData.frameNum=_t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=_t,this.globalData._mdf=!1;var Mt=this.layers.length;for(this.completeLayers||this.checkLayers(_t),Tt=Mt-1;Tt>=0;Tt-=1)(this.completeLayers||this.elements[Tt])&&this.elements[Tt].prepareFrame(_t-this.layers[Tt].st);if(this.globalData._mdf)for(Tt=0;Tt<Mt;Tt+=1)(this.completeLayers||this.elements[Tt])&&this.elements[Tt].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(_t,Tt){var Mt=_t.getBaseElement();if(Mt){for(var Pt,Ft=0;Ft<Tt;)this.elements[Ft]&&this.elements[Ft]!==!0&&this.elements[Ft].getBaseElement()&&(Pt=this.elements[Ft].getBaseElement()),Ft+=1;Pt?this.layerElement.insertBefore(Mt,Pt):this.layerElement.appendChild(Mt)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(_t,Tt,Mt){this.initFrame(),this.initBaseData(_t,Tt,Mt),this.initTransform(_t,Tt,Mt),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&Tt.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(_t){if(this._mdf=!1,this.prepareRenderableFrame(_t),this.prepareProperties(_t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=_t/this.data.sr;else{var Tt=this.tm.v;Tt===this.data.op&&(Tt=this.data.op-1),this.renderedFrame=Tt}var Mt,Pt=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),Mt=Pt-1;Mt>=0;Mt-=1)(this.completeLayers||this.elements[Mt])&&(this.elements[Mt].prepareFrame(this.renderedFrame-this.layers[Mt].st),this.elements[Mt]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var _t,Tt=this.layers.length;for(_t=0;_t<Tt;_t+=1)(this.completeLayers||this.elements[_t])&&this.elements[_t].renderFrame()},ICompElement.prototype.setElements=function(_t){this.elements=_t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var _t,Tt=this.layers.length;for(_t=0;_t<Tt;_t+=1)this.elements[_t]&&this.elements[_t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(_t){return new SVGCompElement(_t,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(_t){return new SVGCompElement(_t,this.globalData,this)},CVContextData.prototype.duplicate=function(){var _t=2*this._length,Tt=this.savedOp;this.savedOp=createTypedArray("float32",_t),this.savedOp.set(Tt);var Mt=0;for(Mt=this._length;Mt<_t;Mt+=1)this.saved[Mt]=createTypedArray("float32",16);this._length=_t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},ShapeTransformManager.prototype={addTransformSequence:function(_t){var Tt,Mt=_t.length,Pt="_";for(Tt=0;Tt<Mt;Tt+=1)Pt+=_t[Tt].transform.key+"_";var Ft=this.sequences[Pt];return Ft||(Ft={transforms:[].concat(_t),finalTransform:new Matrix,_mdf:!1},this.sequences[Pt]=Ft,this.sequenceList.push(Ft)),Ft},processSequence:function(_t,Tt){for(var Mt,Pt=0,Ft=_t.transforms.length,Dt=Tt;Pt<Ft&&!Tt;){if(_t.transforms[Pt].transform.mProps._mdf){Dt=!0;break}Pt+=1}if(Dt)for(_t.finalTransform.reset(),Pt=Ft-1;Pt>=0;Pt-=1)Mt=_t.transforms[Pt].transform.mProps.v.props,_t.finalTransform.transform(Mt[0],Mt[1],Mt[2],Mt[3],Mt[4],Mt[5],Mt[6],Mt[7],Mt[8],Mt[9],Mt[10],Mt[11],Mt[12],Mt[13],Mt[14],Mt[15]);_t._mdf=Dt},processSequences:function(_t){var Tt,Mt=this.sequenceList.length;for(Tt=0;Tt<Mt;Tt+=1)this.processSequence(this.sequenceList[Tt],_t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}},CVEffects.prototype.renderFrame=function(){},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var _t,Tt,Mt,Pt,Ft=this.element.finalTransform.mat,Dt=this.element.canvasContext,Nt=this.masksProperties.length;for(Dt.beginPath(),_t=0;_t<Nt;_t+=1)if(this.masksProperties[_t].mode!=="n"){var Vt;this.masksProperties[_t].inv&&(Dt.moveTo(0,0),Dt.lineTo(this.element.globalData.compSize.w,0),Dt.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),Dt.lineTo(0,this.element.globalData.compSize.h),Dt.lineTo(0,0)),Pt=this.viewData[_t].v,Tt=Ft.applyToPointArray(Pt.v[0][0],Pt.v[0][1],0),Dt.moveTo(Tt[0],Tt[1]);var zt=Pt._length;for(Vt=1;Vt<zt;Vt+=1)Mt=Ft.applyToTriplePoints(Pt.o[Vt-1],Pt.i[Vt],Pt.v[Vt]),Dt.bezierCurveTo(Mt[0],Mt[1],Mt[2],Mt[3],Mt[4],Mt[5]);Mt=Ft.applyToTriplePoints(Pt.o[Vt-1],Pt.i[0],Pt.v[0]),Dt.bezierCurveTo(Mt[0],Mt[1],Mt[2],Mt[3],Mt[4],Mt[5])}this.element.globalData.renderer.save(!0),Dt.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects},createContent:function(){},setBlendMode:function(){var _t=this.globalData;if(_t.blendMode!==this.data.bm){_t.blendMode=this.data.bm;var Tt=getBlendMode(this.data.bm);_t.canvasContext.globalCompositeOperation=Tt}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var _t=this.data.ty===0;this.globalData.renderer.save(_t),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(_t),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(_t,Tt){var Mt={data:_t,type:_t.ty,preTransforms:this.transformsManager.addTransformSequence(Tt),transforms:[],elements:[],closed:_t.hd===!0},Pt={};if(_t.ty==="fl"||_t.ty==="st"?(Pt.c=PropertyFactory.getProp(this,_t.c,1,255,this),Pt.c.k||(Mt.co="rgb("+bmFloor(Pt.c.v[0])+","+bmFloor(Pt.c.v[1])+","+bmFloor(Pt.c.v[2])+")")):_t.ty!=="gf"&&_t.ty!=="gs"||(Pt.s=PropertyFactory.getProp(this,_t.s,1,null,this),Pt.e=PropertyFactory.getProp(this,_t.e,1,null,this),Pt.h=PropertyFactory.getProp(this,_t.h||{k:0},0,.01,this),Pt.a=PropertyFactory.getProp(this,_t.a||{k:0},0,degToRads,this),Pt.g=new GradientProperty(this,_t.g,this)),Pt.o=PropertyFactory.getProp(this,_t.o,0,.01,this),_t.ty==="st"||_t.ty==="gs"){if(Mt.lc=lineCapEnum[_t.lc||2],Mt.lj=lineJoinEnum[_t.lj||2],_t.lj==1&&(Mt.ml=_t.ml),Pt.w=PropertyFactory.getProp(this,_t.w,0,null,this),Pt.w.k||(Mt.wi=Pt.w.v),_t.d){var Ft=new DashProperty(this,_t.d,"canvas",this);Pt.d=Ft,Pt.d.k||(Mt.da=Pt.d.dashArray,Mt.do=Pt.d.dashoffset[0])}}else Mt.r=_t.r===2?"evenodd":"nonzero";return this.stylesList.push(Mt),Pt.style=Mt,Pt},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(_t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,_t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,_t,this)}}},CVShapeElement.prototype.createShapeElement=function(_t){var Tt=new CVShapeData(this,_t,this.stylesList,this.transformsManager);return this.shapes.push(Tt),this.addShapeToModifiers(Tt),Tt},CVShapeElement.prototype.reloadShapes=function(){var _t;this._isFirstFrame=!0;var Tt=this.itemsData.length;for(_t=0;_t<Tt;_t+=1)this.prevViewData[_t]=this.itemsData[_t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),Tt=this.dynamicProperties.length,_t=0;_t<Tt;_t+=1)this.dynamicProperties[_t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(_t){var Tt,Mt=this.stylesList.length;for(Tt=0;Tt<Mt;Tt+=1)this.stylesList[Tt].closed||this.stylesList[Tt].transforms.push(_t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var _t,Tt=this.stylesList.length;for(_t=0;_t<Tt;_t+=1)this.stylesList[_t].closed||this.stylesList[_t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(_t){var Tt,Mt=_t.length;for(Tt=0;Tt<Mt;Tt+=1)_t[Tt].closed=!0},CVShapeElement.prototype.searchShapes=function(_t,Tt,Mt,Pt,Ft){var Dt,Nt,Vt,zt,Xt,Ht,Wt=_t.length-1,Qt=[],Zt=[],Kt=[].concat(Ft);for(Dt=Wt;Dt>=0;Dt-=1){if((zt=this.searchProcessedElement(_t[Dt]))?Tt[Dt]=Mt[zt-1]:_t[Dt]._shouldRender=Pt,_t[Dt].ty==="fl"||_t[Dt].ty==="st"||_t[Dt].ty==="gf"||_t[Dt].ty==="gs")zt?Tt[Dt].style.closed=!1:Tt[Dt]=this.createStyleElement(_t[Dt],Kt),Qt.push(Tt[Dt].style);else if(_t[Dt].ty==="gr"){if(zt)for(Vt=Tt[Dt].it.length,Nt=0;Nt<Vt;Nt+=1)Tt[Dt].prevViewData[Nt]=Tt[Dt].it[Nt];else Tt[Dt]=this.createGroupElement(_t[Dt]);this.searchShapes(_t[Dt].it,Tt[Dt].it,Tt[Dt].prevViewData,Pt,Kt)}else _t[Dt].ty==="tr"?(zt||(Ht=this.createTransformElement(_t[Dt]),Tt[Dt]=Ht),Kt.push(Tt[Dt]),this.addTransformToStyleList(Tt[Dt])):_t[Dt].ty==="sh"||_t[Dt].ty==="rc"||_t[Dt].ty==="el"||_t[Dt].ty==="sr"?zt||(Tt[Dt]=this.createShapeElement(_t[Dt])):_t[Dt].ty==="tm"||_t[Dt].ty==="rd"||_t[Dt].ty==="pb"?(zt?(Xt=Tt[Dt]).closed=!1:((Xt=ShapeModifiers.getModifier(_t[Dt].ty)).init(this,_t[Dt]),Tt[Dt]=Xt,this.shapeModifiers.push(Xt)),Zt.push(Xt)):_t[Dt].ty==="rp"&&(zt?(Xt=Tt[Dt]).closed=!0:(Xt=ShapeModifiers.getModifier(_t[Dt].ty),Tt[Dt]=Xt,Xt.init(this,_t,Dt,Tt),this.shapeModifiers.push(Xt),Pt=!1),Zt.push(Xt));this.addProcessedElement(_t[Dt],Dt+1)}for(this.removeTransformFromStyleList(),this.closeStyles(Qt),Wt=Zt.length,Dt=0;Dt<Wt;Dt+=1)Zt[Dt].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(_t,Tt){(_t._opMdf||Tt.op._mdf||this._isFirstFrame)&&(Tt.opacity=_t.opacity,Tt.opacity*=Tt.op.v,Tt._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var _t,Tt,Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt=this.stylesList.length,Ht=this.globalData.renderer,Wt=this.globalData.canvasContext;for(_t=0;_t<Xt;_t+=1)if(((Vt=(zt=this.stylesList[_t]).type)!=="st"&&Vt!=="gs"||zt.wi!==0)&&zt.data._shouldRender&&zt.coOp!==0&&this.globalData.currentGlobalAlpha!==0){for(Ht.save(),Dt=zt.elements,Vt==="st"||Vt==="gs"?(Wt.strokeStyle=Vt==="st"?zt.co:zt.grd,Wt.lineWidth=zt.wi,Wt.lineCap=zt.lc,Wt.lineJoin=zt.lj,Wt.miterLimit=zt.ml||0):Wt.fillStyle=Vt==="fl"?zt.co:zt.grd,Ht.ctxOpacity(zt.coOp),Vt!=="st"&&Vt!=="gs"&&Wt.beginPath(),Ht.ctxTransform(zt.preTransforms.finalTransform.props),Mt=Dt.length,Tt=0;Tt<Mt;Tt+=1){for(Vt!=="st"&&Vt!=="gs"||(Wt.beginPath(),zt.da&&(Wt.setLineDash(zt.da),Wt.lineDashOffset=zt.do)),Ft=(Nt=Dt[Tt].trNodes).length,Pt=0;Pt<Ft;Pt+=1)Nt[Pt].t==="m"?Wt.moveTo(Nt[Pt].p[0],Nt[Pt].p[1]):Nt[Pt].t==="c"?Wt.bezierCurveTo(Nt[Pt].pts[0],Nt[Pt].pts[1],Nt[Pt].pts[2],Nt[Pt].pts[3],Nt[Pt].pts[4],Nt[Pt].pts[5]):Wt.closePath();Vt!=="st"&&Vt!=="gs"||(Wt.stroke(),zt.da&&Wt.setLineDash(this.dashResetter))}Vt!=="st"&&Vt!=="gs"&&Wt.fill(zt.r),Ht.restore()}},CVShapeElement.prototype.renderShape=function(_t,Tt,Mt,Pt){var Ft,Dt;for(Dt=_t,Ft=Tt.length-1;Ft>=0;Ft-=1)Tt[Ft].ty==="tr"?(Dt=Mt[Ft].transform,this.renderShapeTransform(_t,Dt)):Tt[Ft].ty==="sh"||Tt[Ft].ty==="el"||Tt[Ft].ty==="rc"||Tt[Ft].ty==="sr"?this.renderPath(Tt[Ft],Mt[Ft]):Tt[Ft].ty==="fl"?this.renderFill(Tt[Ft],Mt[Ft],Dt):Tt[Ft].ty==="st"?this.renderStroke(Tt[Ft],Mt[Ft],Dt):Tt[Ft].ty==="gf"||Tt[Ft].ty==="gs"?this.renderGradientFill(Tt[Ft],Mt[Ft],Dt):Tt[Ft].ty==="gr"?this.renderShape(Dt,Tt[Ft].it,Mt[Ft].it):Tt[Ft].ty;Pt&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(_t,Tt){if(this._isFirstFrame||Tt._mdf||_t.transforms._mdf){var Mt,Pt,Ft,Dt=_t.trNodes,Nt=Tt.paths,Vt=Nt._length;Dt.length=0;var zt=_t.transforms.finalTransform;for(Ft=0;Ft<Vt;Ft+=1){var Xt=Nt.shapes[Ft];if(Xt&&Xt.v){for(Pt=Xt._length,Mt=1;Mt<Pt;Mt+=1)Mt===1&&Dt.push({t:"m",p:zt.applyToPointArray(Xt.v[0][0],Xt.v[0][1],0)}),Dt.push({t:"c",pts:zt.applyToTriplePoints(Xt.o[Mt-1],Xt.i[Mt],Xt.v[Mt])});Pt===1&&Dt.push({t:"m",p:zt.applyToPointArray(Xt.v[0][0],Xt.v[0][1],0)}),Xt.c&&Pt&&(Dt.push({t:"c",pts:zt.applyToTriplePoints(Xt.o[Mt-1],Xt.i[0],Xt.v[0])}),Dt.push({t:"z"}))}}_t.trNodes=Dt}},CVShapeElement.prototype.renderPath=function(_t,Tt){if(_t.hd!==!0&&_t._shouldRender){var Mt,Pt=Tt.styledShapes.length;for(Mt=0;Mt<Pt;Mt+=1)this.renderStyledShape(Tt.styledShapes[Mt],Tt.sh)}},CVShapeElement.prototype.renderFill=function(_t,Tt,Mt){var Pt=Tt.style;(Tt.c._mdf||this._isFirstFrame)&&(Pt.co="rgb("+bmFloor(Tt.c.v[0])+","+bmFloor(Tt.c.v[1])+","+bmFloor(Tt.c.v[2])+")"),(Tt.o._mdf||Mt._opMdf||this._isFirstFrame)&&(Pt.coOp=Tt.o.v*Mt.opacity)},CVShapeElement.prototype.renderGradientFill=function(_t,Tt,Mt){var Pt,Ft=Tt.style;if(!Ft.grd||Tt.g._mdf||Tt.s._mdf||Tt.e._mdf||_t.t!==1&&(Tt.h._mdf||Tt.a._mdf)){var Dt,Nt=this.globalData.canvasContext,Vt=Tt.s.v,zt=Tt.e.v;if(_t.t===1)Pt=Nt.createLinearGradient(Vt[0],Vt[1],zt[0],zt[1]);else{var Xt=Math.sqrt(Math.pow(Vt[0]-zt[0],2)+Math.pow(Vt[1]-zt[1],2)),Ht=Math.atan2(zt[1]-Vt[1],zt[0]-Vt[0]),Wt=Tt.h.v;Wt>=1?Wt=.99:Wt<=-1&&(Wt=-.99);var Qt=Xt*Wt,Zt=Math.cos(Ht+Tt.a.v)*Qt+Vt[0],Kt=Math.sin(Ht+Tt.a.v)*Qt+Vt[1];Pt=Nt.createRadialGradient(Zt,Kt,0,Vt[0],Vt[1],Xt)}var er=_t.g.p,Yt=Tt.g.c,rr=1;for(Dt=0;Dt<er;Dt+=1)Tt.g._hasOpacity&&Tt.g._collapsable&&(rr=Tt.g.o[2*Dt+1]),Pt.addColorStop(Yt[4*Dt]/100,"rgba("+Yt[4*Dt+1]+","+Yt[4*Dt+2]+","+Yt[4*Dt+3]+","+rr+")");Ft.grd=Pt}Ft.coOp=Tt.o.v*Mt.opacity},CVShapeElement.prototype.renderStroke=function(_t,Tt,Mt){var Pt=Tt.style,Ft=Tt.d;Ft&&(Ft._mdf||this._isFirstFrame)&&(Pt.da=Ft.dashArray,Pt.do=Ft.dashoffset[0]),(Tt.c._mdf||this._isFirstFrame)&&(Pt.co="rgb("+bmFloor(Tt.c.v[0])+","+bmFloor(Tt.c.v[1])+","+bmFloor(Tt.c.v[2])+")"),(Tt.o._mdf||Mt._opMdf||this._isFirstFrame)&&(Pt.coOp=Tt.o.v*Mt.opacity),(Tt.w._mdf||this._isFirstFrame)&&(Pt.wi=Tt.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var _t=this.textProperty.currentData;this.renderedLetters=createSizedArray(_t.l?_t.l.length:0);var Tt=!1;_t.fc?(Tt=!0,this.values.fill=this.buildColor(_t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=Tt;var Mt=!1;_t.sc&&(Mt=!0,this.values.stroke=this.buildColor(_t.sc),this.values.sWidth=_t.sw);var Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt,Qt,Zt,Kt,er=this.globalData.fontManager.getFontByName(_t.f),Yt=_t.l,rr=this.mHelper;this.stroke=Mt,this.values.fValue=_t.finalSize+"px "+this.globalData.fontManager.getFontByName(_t.f).fFamily,Ft=_t.finalText.length;var ir=this.data.singleShape,nr=.001*_t.tr*_t.finalSize,ar=0,or=0,ur=!0,dr=0;for(Pt=0;Pt<Ft;Pt+=1){Nt=(Dt=this.globalData.fontManager.getCharData(_t.finalText[Pt],er.fStyle,this.globalData.fontManager.getFontByName(_t.f).fFamily))&&Dt.data||{},rr.reset(),ir&&Yt[Pt].n&&(ar=-nr,or+=_t.yOffset,or+=ur?1:0,ur=!1),Wt=(Xt=Nt.shapes?Nt.shapes[0].it:[]).length,rr.scale(_t.finalSize/100,_t.finalSize/100),ir&&this.applyTextPropertiesToMatrix(_t,rr,Yt[Pt].line,ar,or),Zt=createSizedArray(Wt-1);var hr=0;for(Ht=0;Ht<Wt;Ht+=1)if(Xt[Ht].ty==="sh"){for(zt=Xt[Ht].ks.k.i.length,Qt=Xt[Ht].ks.k,Kt=[],Vt=1;Vt<zt;Vt+=1)Vt===1&&Kt.push(rr.applyToX(Qt.v[0][0],Qt.v[0][1],0),rr.applyToY(Qt.v[0][0],Qt.v[0][1],0)),Kt.push(rr.applyToX(Qt.o[Vt-1][0],Qt.o[Vt-1][1],0),rr.applyToY(Qt.o[Vt-1][0],Qt.o[Vt-1][1],0),rr.applyToX(Qt.i[Vt][0],Qt.i[Vt][1],0),rr.applyToY(Qt.i[Vt][0],Qt.i[Vt][1],0),rr.applyToX(Qt.v[Vt][0],Qt.v[Vt][1],0),rr.applyToY(Qt.v[Vt][0],Qt.v[Vt][1],0));Kt.push(rr.applyToX(Qt.o[Vt-1][0],Qt.o[Vt-1][1],0),rr.applyToY(Qt.o[Vt-1][0],Qt.o[Vt-1][1],0),rr.applyToX(Qt.i[0][0],Qt.i[0][1],0),rr.applyToY(Qt.i[0][0],Qt.i[0][1],0),rr.applyToX(Qt.v[0][0],Qt.v[0][1],0),rr.applyToY(Qt.v[0][0],Qt.v[0][1],0)),Zt[hr]=Kt,hr+=1}ir&&(ar+=Yt[Pt].l,ar+=nr),this.textSpans[dr]?this.textSpans[dr].elem=Zt:this.textSpans[dr]={elem:Zt},dr+=1}},CVTextElement.prototype.renderInnerContent=function(){var _t,Tt,Mt,Pt,Ft,Dt,Nt=this.canvasContext;Nt.font=this.values.fValue,Nt.lineCap="butt",Nt.lineJoin="miter",Nt.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var Vt,zt=this.textAnimator.renderedLetters,Xt=this.textProperty.currentData.l;Tt=Xt.length;var Ht,Wt,Qt=null,Zt=null,Kt=null;for(_t=0;_t<Tt;_t+=1)if(!Xt[_t].n){if((Vt=zt[_t])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(Vt.p),this.globalData.renderer.ctxOpacity(Vt.o)),this.fill){for(Vt&&Vt.fc?Qt!==Vt.fc&&(Qt=Vt.fc,Nt.fillStyle=Vt.fc):Qt!==this.values.fill&&(Qt=this.values.fill,Nt.fillStyle=this.values.fill),Pt=(Ht=this.textSpans[_t].elem).length,this.globalData.canvasContext.beginPath(),Mt=0;Mt<Pt;Mt+=1)for(Dt=(Wt=Ht[Mt]).length,this.globalData.canvasContext.moveTo(Wt[0],Wt[1]),Ft=2;Ft<Dt;Ft+=6)this.globalData.canvasContext.bezierCurveTo(Wt[Ft],Wt[Ft+1],Wt[Ft+2],Wt[Ft+3],Wt[Ft+4],Wt[Ft+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(Vt&&Vt.sw?Kt!==Vt.sw&&(Kt=Vt.sw,Nt.lineWidth=Vt.sw):Kt!==this.values.sWidth&&(Kt=this.values.sWidth,Nt.lineWidth=this.values.sWidth),Vt&&Vt.sc?Zt!==Vt.sc&&(Zt=Vt.sc,Nt.strokeStyle=Vt.sc):Zt!==this.values.stroke&&(Zt=this.values.stroke,Nt.strokeStyle=this.values.stroke),Pt=(Ht=this.textSpans[_t].elem).length,this.globalData.canvasContext.beginPath(),Mt=0;Mt<Pt;Mt+=1)for(Dt=(Wt=Ht[Mt]).length,this.globalData.canvasContext.moveTo(Wt[0],Wt[1]),Ft=2;Ft<Dt;Ft+=6)this.globalData.canvasContext.bezierCurveTo(Wt[Ft],Wt[Ft+1],Wt[Ft+2],Wt[Ft+3],Wt[Ft+4],Wt[Ft+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}Vt&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var _t=createTag("canvas");_t.width=this.assetData.w,_t.height=this.assetData.h;var Tt,Mt,Pt=_t.getContext("2d"),Ft=this.img.width,Dt=this.img.height,Nt=Ft/Dt,Vt=this.assetData.w/this.assetData.h,zt=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;Nt>Vt&&zt==="xMidYMid slice"||Nt<Vt&&zt!=="xMidYMid slice"?Tt=(Mt=Dt)*Vt:Mt=(Tt=Ft)/Vt,Pt.drawImage(this.img,(Ft-Tt)/2,(Dt-Mt)/2,Tt,Mt,0,0,this.assetData.w,this.assetData.h),this.img=_t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var _t=this.canvasContext;_t.fillStyle=this.data.sc,_t.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(_t){return new CVShapeElement(_t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(_t){return new CVTextElement(_t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(_t){return new CVImageElement(_t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(_t){return new CVSolidElement(_t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(_t){if(_t[0]!==1||_t[1]!==0||_t[4]!==0||_t[5]!==1||_t[12]!==0||_t[13]!==0)if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(_t);var Tt=this.contextData.cTr.props;this.transformMat.transform(Tt[0],Tt[1],Tt[2],Tt[3],Tt[4],Tt[5],Tt[6],Tt[7],Tt[8],Tt[9],Tt[10],Tt[11],Tt[12],Tt[13],Tt[14],Tt[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var Mt=this.contextData.cTr.props;this.canvasContext.setTransform(Mt[0],Mt[1],Mt[4],Mt[5],Mt[12],Mt[13])}else this.canvasContext.transform(_t[0],_t[1],_t[4],_t[5],_t[12],_t[13])},CanvasRendererBase.prototype.ctxOpacity=function(_t){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=_t<0?0:_t,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=_t<0?0:_t,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(_t){if(this.renderConfig.clearCanvas){_t&&this.canvasContext.save();var Tt,Mt=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var Pt=this.contextData.saved[this.contextData.cArrPos];for(Tt=0;Tt<16;Tt+=1)Pt[Tt]=Mt[Tt];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(_t){if(this.renderConfig.clearCanvas){_t&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var Tt,Mt=this.contextData.saved[this.contextData.cArrPos],Pt=this.contextData.cTr.props;for(Tt=0;Tt<16;Tt+=1)Pt[Tt]=Mt[Tt];this.canvasContext.setTransform(Mt[0],Mt[1],Mt[4],Mt[5],Mt[12],Mt[13]),Mt=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=Mt,this.globalData.currentGlobalAlpha!==Mt&&(this.canvasContext.globalAlpha=Mt,this.globalData.currentGlobalAlpha=Mt)}else this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(_t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var Tt=this.animationItem.container.style;Tt.width="100%",Tt.height="100%";var Mt="0px 0px 0px";Tt.transformOrigin=Mt,Tt.mozTransformOrigin=Mt,Tt.webkitTransformOrigin=Mt,Tt["-webkit-transform"]=Mt,Tt.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.data=_t,this.layers=_t.layers,this.transformCanvas={w:_t.w,h:_t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(_t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(_t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(){var _t,Tt,Mt,Pt;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(_t=this.animationItem.wrapper.offsetWidth,Tt=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",_t*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",Tt*this.renderConfig.dpr)):(_t=this.canvasContext.canvas.width*this.renderConfig.dpr,Tt=this.canvasContext.canvas.height*this.renderConfig.dpr),this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var Ft=this.renderConfig.preserveAspectRatio.split(" "),Dt=Ft[1]||"meet",Nt=Ft[0]||"xMidYMid",Vt=Nt.substr(0,4),zt=Nt.substr(4);Mt=_t/Tt,(Pt=this.transformCanvas.w/this.transformCanvas.h)>Mt&&Dt==="meet"||Pt<Mt&&Dt==="slice"?(this.transformCanvas.sx=_t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=_t/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=Tt/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=Tt/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx=Vt==="xMid"&&(Pt<Mt&&Dt==="meet"||Pt>Mt&&Dt==="slice")?(_t-this.transformCanvas.w*(Tt/this.transformCanvas.h))/2*this.renderConfig.dpr:Vt==="xMax"&&(Pt<Mt&&Dt==="meet"||Pt>Mt&&Dt==="slice")?(_t-this.transformCanvas.w*(Tt/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty=zt==="YMid"&&(Pt>Mt&&Dt==="meet"||Pt<Mt&&Dt==="slice")?(Tt-this.transformCanvas.h*(_t/this.transformCanvas.w))/2*this.renderConfig.dpr:zt==="YMax"&&(Pt>Mt&&Dt==="meet"||Pt<Mt&&Dt==="slice")?(Tt-this.transformCanvas.h*(_t/this.transformCanvas.w))*this.renderConfig.dpr:0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=_t/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=Tt/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var _t;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),_t=(this.layers?this.layers.length:0)-1;_t>=0;_t-=1)this.elements[_t]&&this.elements[_t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(_t,Tt){if((this.renderedFrame!==_t||this.renderConfig.clearCanvas!==!0||Tt)&&!this.destroyed&&_t!==-1){var Mt;this.renderedFrame=_t,this.globalData.frameNum=_t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||Tt,this.globalData.projectInterface.currentFrame=_t;var Pt=this.layers.length;for(this.completeLayers||this.checkLayers(_t),Mt=0;Mt<Pt;Mt+=1)(this.completeLayers||this.elements[Mt])&&this.elements[Mt].prepareFrame(_t-this.layers[Mt].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),Mt=Pt-1;Mt>=0;Mt-=1)(this.completeLayers||this.elements[Mt])&&this.elements[Mt].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(_t){var Tt=this.elements;if(!Tt[_t]&&this.layers[_t].ty!==99){var Mt=this.createItem(this.layers[_t],this,this.globalData);Tt[_t]=Mt,Mt.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var _t,Tt=this.canvasContext;for(Tt.beginPath(),Tt.moveTo(0,0),Tt.lineTo(this.data.w,0),Tt.lineTo(this.data.w,this.data.h),Tt.lineTo(0,this.data.h),Tt.lineTo(0,0),Tt.clip(),_t=this.layers.length-1;_t>=0;_t-=1)(this.completeLayers||this.elements[_t])&&this.elements[_t].renderFrame()},CVCompElement.prototype.destroy=function(){var _t;for(_t=this.layers.length-1;_t>=0;_t-=1)this.elements[_t]&&this.elements[_t].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(_t){return new CVCompElement(_t,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(_t){return new CVCompElement(_t,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects,this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var _t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var Tt=this.finalTransform.mat.toCSS();_t.transform=Tt,_t.webkitTransform=Tt}this.finalTransform._opMdf&&(_t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var _t;this.data.hasMask?((_t=createNS("rect")).setAttribute("width",this.data.sw),_t.setAttribute("height",this.data.sh),_t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((_t=createTag("div")).style.width=this.data.sw+"px",_t.style.height=this.data.sh+"px",_t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(_t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var _t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),_t=this.svgElement;else{_t=createNS("svg");var Tt=this.comp.data?this.comp.data:this.globalData.compSize;_t.setAttribute("width",Tt.w),_t.setAttribute("height",Tt.h),_t.appendChild(this.shapesContainer),this.layerElement.appendChild(_t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=_t},HShapeElement.prototype.getTransformedPoint=function(_t,Tt){var Mt,Pt=_t.length;for(Mt=0;Mt<Pt;Mt+=1)Tt=_t[Mt].mProps.v.applyToPointArray(Tt[0],Tt[1],0);return Tt},HShapeElement.prototype.calculateShapeBoundingBox=function(_t,Tt){var Mt,Pt,Ft,Dt,Nt,Vt=_t.sh.v,zt=_t.transformers,Xt=Vt._length;if(!(Xt<=1)){for(Mt=0;Mt<Xt-1;Mt+=1)Pt=this.getTransformedPoint(zt,Vt.v[Mt]),Ft=this.getTransformedPoint(zt,Vt.o[Mt]),Dt=this.getTransformedPoint(zt,Vt.i[Mt+1]),Nt=this.getTransformedPoint(zt,Vt.v[Mt+1]),this.checkBounds(Pt,Ft,Dt,Nt,Tt);Vt.c&&(Pt=this.getTransformedPoint(zt,Vt.v[Mt]),Ft=this.getTransformedPoint(zt,Vt.o[Mt]),Dt=this.getTransformedPoint(zt,Vt.i[0]),Nt=this.getTransformedPoint(zt,Vt.v[0]),this.checkBounds(Pt,Ft,Dt,Nt,Tt))}},HShapeElement.prototype.checkBounds=function(_t,Tt,Mt,Pt,Ft){this.getBoundsOfCurve(_t,Tt,Mt,Pt);var Dt=this.shapeBoundingBox;Ft.x=bmMin(Dt.left,Ft.x),Ft.xMax=bmMax(Dt.right,Ft.xMax),Ft.y=bmMin(Dt.top,Ft.y),Ft.yMax=bmMax(Dt.bottom,Ft.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(_t,Tt,Mt,Pt){for(var Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt=[[_t[0],Pt[0]],[_t[1],Pt[1]]],Qt=0;Qt<2;++Qt)Dt=6*_t[Qt]-12*Tt[Qt]+6*Mt[Qt],Ft=-3*_t[Qt]+9*Tt[Qt]-9*Mt[Qt]+3*Pt[Qt],Nt=3*Tt[Qt]-3*_t[Qt],Dt|=0,Nt|=0,(Ft|=0)===0&&Dt===0||(Ft===0?(Vt=-Nt/Dt)>0&&Vt<1&&Wt[Qt].push(this.calculateF(Vt,_t,Tt,Mt,Pt,Qt)):(zt=Dt*Dt-4*Nt*Ft)>=0&&((Xt=(-Dt+bmSqrt(zt))/(2*Ft))>0&&Xt<1&&Wt[Qt].push(this.calculateF(Xt,_t,Tt,Mt,Pt,Qt)),(Ht=(-Dt-bmSqrt(zt))/(2*Ft))>0&&Ht<1&&Wt[Qt].push(this.calculateF(Ht,_t,Tt,Mt,Pt,Qt))));this.shapeBoundingBox.left=bmMin.apply(null,Wt[0]),this.shapeBoundingBox.top=bmMin.apply(null,Wt[1]),this.shapeBoundingBox.right=bmMax.apply(null,Wt[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,Wt[1])},HShapeElement.prototype.calculateF=function(_t,Tt,Mt,Pt,Ft,Dt){return bmPow(1-_t,3)*Tt[Dt]+3*bmPow(1-_t,2)*_t*Mt[Dt]+3*(1-_t)*bmPow(_t,2)*Pt[Dt]+bmPow(_t,3)*Ft[Dt]},HShapeElement.prototype.calculateBoundingBox=function(_t,Tt){var Mt,Pt=_t.length;for(Mt=0;Mt<Pt;Mt+=1)_t[Mt]&&_t[Mt].sh?this.calculateShapeBoundingBox(_t[Mt],Tt):_t[Mt]&&_t[Mt].it&&this.calculateBoundingBox(_t[Mt].it,Tt)},HShapeElement.prototype.currentBoxContains=function(_t){return this.currentBBox.x<=_t.x&&this.currentBBox.y<=_t.y&&this.currentBBox.width+this.currentBBox.x>=_t.x+_t.width&&this.currentBBox.height+this.currentBBox.y>=_t.y+_t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var _t=this.tempBoundingBox,Tt=999999;if(_t.x=Tt,_t.xMax=-Tt,_t.y=Tt,_t.yMax=-Tt,this.calculateBoundingBox(this.itemsData,_t),_t.width=_t.xMax<_t.x?0:_t.xMax-_t.x,_t.height=_t.yMax<_t.y?0:_t.yMax-_t.y,this.currentBoxContains(_t))return;var Mt=!1;if(this.currentBBox.w!==_t.width&&(this.currentBBox.w=_t.width,this.shapeCont.setAttribute("width",_t.width),Mt=!0),this.currentBBox.h!==_t.height&&(this.currentBBox.h=_t.height,this.shapeCont.setAttribute("height",_t.height),Mt=!0),Mt||this.currentBBox.x!==_t.x||this.currentBBox.y!==_t.y){this.currentBBox.w=_t.width,this.currentBBox.h=_t.height,this.currentBBox.x=_t.x,this.currentBBox.y=_t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var Pt=this.shapeCont.style,Ft="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";Pt.transform=Ft,Pt.webkitTransform=Ft}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var _t=createNS("g");this.maskedElement.appendChild(_t),this.innerElem=_t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var _t=this.textProperty.currentData;this.renderedLetters=createSizedArray(_t.l?_t.l.length:0);var Tt=this.innerElem.style,Mt=_t.fc?this.buildColor(_t.fc):"rgba(0,0,0,0)";Tt.fill=Mt,Tt.color=Mt,_t.sc&&(Tt.stroke=this.buildColor(_t.sc),Tt.strokeWidth=_t.sw+"px");var Pt,Ft,Dt=this.globalData.fontManager.getFontByName(_t.f);if(!this.globalData.fontManager.chars)if(Tt.fontSize=_t.finalSize+"px",Tt.lineHeight=_t.finalSize+"px",Dt.fClass)this.innerElem.className=Dt.fClass;else{Tt.fontFamily=Dt.fFamily;var Nt=_t.fWeight,Vt=_t.fStyle;Tt.fontStyle=Vt,Tt.fontWeight=Nt}var zt,Xt,Ht,Wt=_t.l;Ft=Wt.length;var Qt,Zt=this.mHelper,Kt="",er=0;for(Pt=0;Pt<Ft;Pt+=1){if(this.globalData.fontManager.chars?(this.textPaths[er]?zt=this.textPaths[er]:((zt=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),zt.setAttribute("stroke-linejoin",lineJoinEnum[2]),zt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[er]?Ht=(Xt=this.textSpans[er]).children[0]:((Xt=createTag("div")).style.lineHeight=0,(Ht=createNS("svg")).appendChild(zt),styleDiv(Xt)))):this.isMasked?zt=this.textPaths[er]?this.textPaths[er]:createNS("text"):this.textSpans[er]?(Xt=this.textSpans[er],zt=this.textPaths[er]):(styleDiv(Xt=createTag("span")),styleDiv(zt=createTag("span")),Xt.appendChild(zt)),this.globalData.fontManager.chars){var Yt,rr=this.globalData.fontManager.getCharData(_t.finalText[Pt],Dt.fStyle,this.globalData.fontManager.getFontByName(_t.f).fFamily);if(Yt=rr?rr.data:null,Zt.reset(),Yt&&Yt.shapes&&Yt.shapes.length&&(Qt=Yt.shapes[0].it,Zt.scale(_t.finalSize/100,_t.finalSize/100),Kt=this.createPathShape(Zt,Qt),zt.setAttribute("d",Kt)),this.isMasked)this.innerElem.appendChild(zt);else{if(this.innerElem.appendChild(Xt),Yt&&Yt.shapes){document.body.appendChild(Ht);var ir=Ht.getBBox();Ht.setAttribute("width",ir.width+2),Ht.setAttribute("height",ir.height+2),Ht.setAttribute("viewBox",ir.x-1+" "+(ir.y-1)+" "+(ir.width+2)+" "+(ir.height+2));var nr=Ht.style,ar="translate("+(ir.x-1)+"px,"+(ir.y-1)+"px)";nr.transform=ar,nr.webkitTransform=ar,Wt[Pt].yOffset=ir.y-1}else Ht.setAttribute("width",1),Ht.setAttribute("height",1);Xt.appendChild(Ht)}}else if(zt.textContent=Wt[Pt].val,zt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(zt);else{this.innerElem.appendChild(Xt);var or=zt.style,ur="translate3d(0,"+-_t.finalSize/1.2+"px,0)";or.transform=ur,or.webkitTransform=ur}this.isMasked?this.textSpans[er]=zt:this.textSpans[er]=Xt,this.textSpans[er].style.display="block",this.textPaths[er]=zt,er+=1}for(;er<this.textSpans.length;)this.textSpans[er].style.display="none",er+=1},HTextElement.prototype.renderInnerContent=function(){var _t;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),_t=this.svgElement.style;var Tt="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";_t.transform=Tt,_t.webkitTransform=Tt}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var Mt,Pt,Ft,Dt,Nt,Vt=0,zt=this.textAnimator.renderedLetters,Xt=this.textProperty.currentData.l;for(Pt=Xt.length,Mt=0;Mt<Pt;Mt+=1)Xt[Mt].n?Vt+=1:(Dt=this.textSpans[Mt],Nt=this.textPaths[Mt],Ft=zt[Vt],Vt+=1,Ft._mdf.m&&(this.isMasked?Dt.setAttribute("transform",Ft.m):(Dt.style.webkitTransform=Ft.m,Dt.style.transform=Ft.m)),Dt.style.opacity=Ft.o,Ft.sw&&Ft._mdf.sw&&Nt.setAttribute("stroke-width",Ft.sw),Ft.sc&&Ft._mdf.sc&&Nt.setAttribute("stroke",Ft.sc),Ft.fc&&Ft._mdf.fc&&(Nt.setAttribute("fill",Ft.fc),Nt.style.color=Ft.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var Ht=this.innerElem.getBBox();if(this.currentBBox.w!==Ht.width&&(this.currentBBox.w=Ht.width,this.svgElement.setAttribute("width",Ht.width)),this.currentBBox.h!==Ht.height&&(this.currentBBox.h=Ht.height,this.svgElement.setAttribute("height",Ht.height)),this.currentBBox.w!==Ht.width+2||this.currentBBox.h!==Ht.height+2||this.currentBBox.x!==Ht.x-1||this.currentBBox.y!==Ht.y-1){this.currentBBox.w=Ht.width+2,this.currentBBox.h=Ht.height+2,this.currentBBox.x=Ht.x-1,this.currentBBox.y=Ht.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),_t=this.svgElement.style;var Wt="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";_t.transform=Wt,_t.webkitTransform=Wt}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var _t,Tt,Mt,Pt,Ft=this.comp.threeDElements.length;for(_t=0;_t<Ft;_t+=1)if((Tt=this.comp.threeDElements[_t]).type==="3d"){Mt=Tt.perspectiveElem.style,Pt=Tt.container.style;var Dt=this.pe.v+"px",Nt="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";Mt.perspective=Dt,Mt.webkitPerspective=Dt,Pt.transformOrigin="0px 0px 0px",Pt.mozTransformOrigin="0px 0px 0px",Pt.webkitTransformOrigin="0px 0px 0px",Mt.transform=Nt,Mt.webkitTransform=Nt}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var _t,Tt,Mt=this._isFirstFrame;if(this.hierarchy)for(Tt=this.hierarchy.length,_t=0;_t<Tt;_t+=1)Mt=this.hierarchy[_t].finalTransform.mProp._mdf||Mt;if(Mt||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(_t=Tt=this.hierarchy.length-1;_t>=0;_t-=1){var Pt=this.hierarchy[_t].finalTransform.mProp;this.mat.translate(-Pt.p.v[0],-Pt.p.v[1],Pt.p.v[2]),this.mat.rotateX(-Pt.or.v[0]).rotateY(-Pt.or.v[1]).rotateZ(Pt.or.v[2]),this.mat.rotateX(-Pt.rx.v).rotateY(-Pt.ry.v).rotateZ(Pt.rz.v),this.mat.scale(1/Pt.s.v[0],1/Pt.s.v[1],1/Pt.s.v[2]),this.mat.translate(Pt.a.v[0],Pt.a.v[1],Pt.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var Ft;Ft=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var Dt=Math.sqrt(Math.pow(Ft[0],2)+Math.pow(Ft[1],2)+Math.pow(Ft[2],2)),Nt=[Ft[0]/Dt,Ft[1]/Dt,Ft[2]/Dt],Vt=Math.sqrt(Nt[2]*Nt[2]+Nt[0]*Nt[0]),zt=Math.atan2(Nt[1],Vt),Xt=Math.atan2(Nt[0],-Nt[2]);this.mat.rotateY(Xt).rotateX(-zt)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var Ht=!this._prevMat.equals(this.mat);if((Ht||this.pe._mdf)&&this.comp.threeDElements){var Wt,Qt,Zt;for(Tt=this.comp.threeDElements.length,_t=0;_t<Tt;_t+=1)if((Wt=this.comp.threeDElements[_t]).type==="3d"){if(Ht){var Kt=this.mat.toCSS();(Zt=Wt.container.style).transform=Kt,Zt.webkitTransform=Kt}this.pe._mdf&&((Qt=Wt.perspectiveElem.style).perspective=this.pe.v+"px",Qt.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(_t){this.prepareProperties(_t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var _t=this.globalData.getAssetsPath(this.assetData),Tt=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",_t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(Tt),Tt.crossOrigin="anonymous",Tt.src=_t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(_t,Tt){var Mt=_t.getBaseElement();if(Mt){var Pt=this.layers[Tt];if(Pt.ddd&&this.supports3d)this.addTo3dContainer(Mt,Tt);else if(this.threeDElements)this.addTo3dContainer(Mt,Tt);else{for(var Ft,Dt,Nt=0;Nt<Tt;)this.elements[Nt]&&this.elements[Nt]!==!0&&this.elements[Nt].getBaseElement&&(Dt=this.elements[Nt],Ft=(this.layers[Nt].ddd?this.getThreeDContainerByPos(Nt):Dt.getBaseElement())||Ft),Nt+=1;Ft?Pt.ddd&&this.supports3d||this.layerElement.insertBefore(Mt,Ft):Pt.ddd&&this.supports3d||this.layerElement.appendChild(Mt)}}},HybridRendererBase.prototype.createShape=function(_t){return this.supports3d?new HShapeElement(_t,this.globalData,this):new SVGShapeElement(_t,this.globalData,this)},HybridRendererBase.prototype.createText=function(_t){return this.supports3d?new HTextElement(_t,this.globalData,this):new SVGTextLottieElement(_t,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(_t){return this.camera=new HCameraElement(_t,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(_t){return this.supports3d?new HImageElement(_t,this.globalData,this):new IImageElement(_t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(_t){return this.supports3d?new HSolidElement(_t,this.globalData,this):new ISolidElement(_t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(_t){for(var Tt=0,Mt=this.threeDElements.length;Tt<Mt;){if(this.threeDElements[Tt].startPos<=_t&&this.threeDElements[Tt].endPos>=_t)return this.threeDElements[Tt].perspectiveElem;Tt+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(_t,Tt){var Mt,Pt,Ft=createTag("div");styleDiv(Ft);var Dt=createTag("div");if(styleDiv(Dt),Tt==="3d"){(Mt=Ft.style).width=this.globalData.compSize.w+"px",Mt.height=this.globalData.compSize.h+"px",Mt.webkitTransformOrigin="50% 50%",Mt.mozTransformOrigin="50% 50%",Mt.transformOrigin="50% 50%";var Nt="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(Pt=Dt.style).transform=Nt,Pt.webkitTransform=Nt}Ft.appendChild(Dt);var Vt={container:Dt,perspectiveElem:Ft,startPos:_t,endPos:_t,type:Tt};return this.threeDElements.push(Vt),Vt},HybridRendererBase.prototype.build3dContainers=function(){var _t,Tt,Mt=this.layers.length,Pt="";for(_t=0;_t<Mt;_t+=1)this.layers[_t].ddd&&this.layers[_t].ty!==3?(Pt!=="3d"&&(Pt="3d",Tt=this.createThreeDContainer(_t,"3d")),Tt.endPos=Math.max(Tt.endPos,_t)):(Pt!=="2d"&&(Pt="2d",Tt=this.createThreeDContainer(_t,"2d")),Tt.endPos=Math.max(Tt.endPos,_t));for(_t=(Mt=this.threeDElements.length)-1;_t>=0;_t-=1)this.resizerElem.appendChild(this.threeDElements[_t].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(_t,Tt){for(var Mt=0,Pt=this.threeDElements.length;Mt<Pt;){if(Tt<=this.threeDElements[Mt].endPos){for(var Ft,Dt=this.threeDElements[Mt].startPos;Dt<Tt;)this.elements[Dt]&&this.elements[Dt].getBaseElement&&(Ft=this.elements[Dt].getBaseElement()),Dt+=1;Ft?this.threeDElements[Mt].container.insertBefore(_t,Ft):this.threeDElements[Mt].container.appendChild(_t);break}Mt+=1}},HybridRendererBase.prototype.configAnimation=function(_t){var Tt=createTag("div"),Mt=this.animationItem.wrapper,Pt=Tt.style;Pt.width=_t.w+"px",Pt.height=_t.h+"px",this.resizerElem=Tt,styleDiv(Tt),Pt.transformStyle="flat",Pt.mozTransformStyle="flat",Pt.webkitTransformStyle="flat",this.renderConfig.className&&Tt.setAttribute("class",this.renderConfig.className),Mt.appendChild(Tt),Pt.overflow="hidden";var Ft=createNS("svg");Ft.setAttribute("width","1"),Ft.setAttribute("height","1"),styleDiv(Ft),this.resizerElem.appendChild(Ft);var Dt=createNS("defs");Ft.appendChild(Dt),this.data=_t,this.setupGlobalData(_t,Ft),this.globalData.defs=Dt,this.layers=_t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var _t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var Tt=this.layers?this.layers.length:0;for(_t=0;_t<Tt;_t+=1)this.elements[_t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var _t,Tt,Mt,Pt,Ft=this.animationItem.wrapper.offsetWidth,Dt=this.animationItem.wrapper.offsetHeight,Nt=Ft/Dt;this.globalData.compSize.w/this.globalData.compSize.h>Nt?(_t=Ft/this.globalData.compSize.w,Tt=Ft/this.globalData.compSize.w,Mt=0,Pt=(Dt-this.globalData.compSize.h*(Ft/this.globalData.compSize.w))/2):(_t=Dt/this.globalData.compSize.h,Tt=Dt/this.globalData.compSize.h,Mt=(Ft-this.globalData.compSize.w*(Dt/this.globalData.compSize.h))/2,Pt=0);var Vt=this.resizerElem.style;Vt.webkitTransform="matrix3d("+_t+",0,0,0,0,"+Tt+",0,0,0,0,1,0,"+Mt+","+Pt+",0,1)",Vt.transform=Vt.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var _t,Tt=this.globalData.compSize.w,Mt=this.globalData.compSize.h,Pt=this.threeDElements.length;for(_t=0;_t<Pt;_t+=1){var Ft=this.threeDElements[_t].perspectiveElem.style;Ft.webkitPerspective=Math.sqrt(Math.pow(Tt,2)+Math.pow(Mt,2))+"px",Ft.perspective=Ft.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(_t){var Tt,Mt=_t.length,Pt=createTag("div");for(Tt=0;Tt<Mt;Tt+=1)if(_t[Tt].xt){var Ft=this.createComp(_t[Tt],Pt,this.globalData.comp,null);Ft.initExpressions(),this.globalData.projectInterface.registerComposition(Ft)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(_t,Tt){for(var Mt,Pt=0;Pt<Tt;)this.elements[Pt]&&this.elements[Pt].getBaseElement&&(Mt=this.elements[Pt].getBaseElement()),Pt+=1;Mt?this.layerElement.insertBefore(_t,Mt):this.layerElement.appendChild(_t)},HCompElement.prototype.createComp=function(_t){return this.supports3d?new HCompElement(_t,this.globalData,this):new SVGCompElement(_t,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(_t){return this.supports3d?new HCompElement(_t,this.globalData,this):new SVGCompElement(_t,this.globalData,this)};var Expressions=function(){var _t={};return _t.initExpressions=function(Tt){var Mt=0,Pt=[];Tt.renderer.compInterface=CompExpressionInterface(Tt.renderer),Tt.renderer.globalData.projectInterface.registerComposition(Tt.renderer),Tt.renderer.globalData.pushExpression=function(){Mt+=1},Tt.renderer.globalData.popExpression=function(){(Mt-=1)===0&&function(){var Ft,Dt=Pt.length;for(Ft=0;Ft<Dt;Ft+=1)Pt[Ft].release();Pt.length=0}()},Tt.renderer.globalData.registerExpressionProperty=function(Ft){Pt.indexOf(Ft)===-1&&Pt.push(Ft)}},_t}();function _typeof$1(_t){return(_typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tt){return typeof Tt}:function(Tt){return Tt&&typeof Symbol=="function"&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt})(_t)}function seedRandom(_t,Tt){var Mt=this,Pt=Tt.pow(256,6),Ft=Tt.pow(2,52),Dt=2*Ft;function Nt(Ht){var Wt,Qt=Ht.length,Zt=this,Kt=0,er=Zt.i=Zt.j=0,Yt=Zt.S=[];for(Qt||(Ht=[Qt++]);Kt<256;)Yt[Kt]=Kt++;for(Kt=0;Kt<256;Kt++)Yt[Kt]=Yt[er=255&er+Ht[Kt%Qt]+(Wt=Yt[Kt])],Yt[er]=Wt;Zt.g=function(rr){for(var ir,nr=0,ar=Zt.i,or=Zt.j,ur=Zt.S;rr--;)ir=ur[ar=255&ar+1],nr=256*nr+ur[255&(ur[ar]=ur[or=255&or+ir])+(ur[or]=ir)];return Zt.i=ar,Zt.j=or,nr}}function Vt(Ht,Wt){return Wt.i=Ht.i,Wt.j=Ht.j,Wt.S=Ht.S.slice(),Wt}function zt(Ht,Wt){for(var Qt,Zt=Ht+"",Kt=0;Kt<Zt.length;)Wt[255&Kt]=255&(Qt^=19*Wt[255&Kt])+Zt.charCodeAt(Kt++);return Xt(Wt)}function Xt(Ht){return String.fromCharCode.apply(0,Ht)}Tt.seedrandom=function(Ht,Wt,Qt){var Zt=[],Kt=zt(function rr(ir,nr){var ar,or=[],ur=_typeof$1(ir);if(nr&&ur=="object")for(ar in ir)try{or.push(rr(ir[ar],nr-1))}catch{}return or.length?or:ur=="string"?ir:ir+"\0"}((Wt=Wt===!0?{entropy:!0}:Wt||{}).entropy?[Ht,Xt(_t)]:Ht===null?function(){try{var rr=new Uint8Array(256);return(Mt.crypto||Mt.msCrypto).getRandomValues(rr),Xt(rr)}catch{var ir=Mt.navigator,nr=ir&&ir.plugins;return[+new Date,Mt,nr,Mt.screen,Xt(_t)]}}():Ht,3),Zt),er=new Nt(Zt),Yt=function(){for(var rr=er.g(6),ir=Pt,nr=0;rr<Ft;)rr=256*(rr+nr),ir*=256,nr=er.g(1);for(;rr>=Dt;)rr/=2,ir/=2,nr>>>=1;return(rr+nr)/ir};return Yt.int32=function(){return 0|er.g(4)},Yt.quick=function(){return er.g(4)/4294967296},Yt.double=Yt,zt(Xt(er.S),_t),(Wt.pass||Qt||function(rr,ir,nr,ar){return ar&&(ar.S&&Vt(ar,er),rr.state=function(){return Vt(er,{})}),nr?(Tt.random=rr,ir):rr})(Yt,Kt,"global"in Wt?Wt.global:this==Tt,Wt.state)},zt(Tt.random(),_t)}function initialize$2(_t){seedRandom([],_t)}var propTypes={SHAPE:"shape"};function _typeof(_t){return(_typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Tt){return typeof Tt}:function(Tt){return Tt&&typeof Symbol=="function"&&Tt.constructor===Symbol&&Tt!==Symbol.prototype?"symbol":typeof Tt})(_t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null;function $bm_isInstanceOfArray(_t){return _t.constructor===Array||_t.constructor===Float32Array}function isNumerable(_t,Tt){return _t==="number"||_t==="boolean"||_t==="string"||Tt instanceof Number}function $bm_neg(_t){var Tt=_typeof(_t);if(Tt==="number"||Tt==="boolean"||_t instanceof Number)return-_t;if($bm_isInstanceOfArray(_t)){var Mt,Pt=_t.length,Ft=[];for(Mt=0;Mt<Pt;Mt+=1)Ft[Mt]=-_t[Mt];return Ft}return _t.propType?_t.v:-_t}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(_t,Tt){var Mt=_typeof(_t),Pt=_typeof(Tt);if(Mt==="string"||Pt==="string"||isNumerable(Mt,_t)&&isNumerable(Pt,Tt))return _t+Tt;if($bm_isInstanceOfArray(_t)&&isNumerable(Pt,Tt))return(_t=_t.slice(0))[0]+=Tt,_t;if(isNumerable(Mt,_t)&&$bm_isInstanceOfArray(Tt))return(Tt=Tt.slice(0))[0]=_t+Tt[0],Tt;if($bm_isInstanceOfArray(_t)&&$bm_isInstanceOfArray(Tt)){for(var Ft=0,Dt=_t.length,Nt=Tt.length,Vt=[];Ft<Dt||Ft<Nt;)(typeof _t[Ft]=="number"||_t[Ft]instanceof Number)&&(typeof Tt[Ft]=="number"||Tt[Ft]instanceof Number)?Vt[Ft]=_t[Ft]+Tt[Ft]:Vt[Ft]=Tt[Ft]===void 0?_t[Ft]:_t[Ft]||Tt[Ft],Ft+=1;return Vt}return 0}var add=sum;function sub(_t,Tt){var Mt=_typeof(_t),Pt=_typeof(Tt);if(isNumerable(Mt,_t)&&isNumerable(Pt,Tt))return Mt==="string"&&(_t=parseInt(_t,10)),Pt==="string"&&(Tt=parseInt(Tt,10)),_t-Tt;if($bm_isInstanceOfArray(_t)&&isNumerable(Pt,Tt))return(_t=_t.slice(0))[0]-=Tt,_t;if(isNumerable(Mt,_t)&&$bm_isInstanceOfArray(Tt))return(Tt=Tt.slice(0))[0]=_t-Tt[0],Tt;if($bm_isInstanceOfArray(_t)&&$bm_isInstanceOfArray(Tt)){for(var Ft=0,Dt=_t.length,Nt=Tt.length,Vt=[];Ft<Dt||Ft<Nt;)(typeof _t[Ft]=="number"||_t[Ft]instanceof Number)&&(typeof Tt[Ft]=="number"||Tt[Ft]instanceof Number)?Vt[Ft]=_t[Ft]-Tt[Ft]:Vt[Ft]=Tt[Ft]===void 0?_t[Ft]:_t[Ft]||Tt[Ft],Ft+=1;return Vt}return 0}function mul(_t,Tt){var Mt,Pt,Ft,Dt=_typeof(_t),Nt=_typeof(Tt);if(isNumerable(Dt,_t)&&isNumerable(Nt,Tt))return _t*Tt;if($bm_isInstanceOfArray(_t)&&isNumerable(Nt,Tt)){for(Ft=_t.length,Mt=createTypedArray("float32",Ft),Pt=0;Pt<Ft;Pt+=1)Mt[Pt]=_t[Pt]*Tt;return Mt}if(isNumerable(Dt,_t)&&$bm_isInstanceOfArray(Tt)){for(Ft=Tt.length,Mt=createTypedArray("float32",Ft),Pt=0;Pt<Ft;Pt+=1)Mt[Pt]=_t*Tt[Pt];return Mt}return 0}function div(_t,Tt){var Mt,Pt,Ft,Dt=_typeof(_t),Nt=_typeof(Tt);if(isNumerable(Dt,_t)&&isNumerable(Nt,Tt))return _t/Tt;if($bm_isInstanceOfArray(_t)&&isNumerable(Nt,Tt)){for(Ft=_t.length,Mt=createTypedArray("float32",Ft),Pt=0;Pt<Ft;Pt+=1)Mt[Pt]=_t[Pt]/Tt;return Mt}if(isNumerable(Dt,_t)&&$bm_isInstanceOfArray(Tt)){for(Ft=Tt.length,Mt=createTypedArray("float32",Ft),Pt=0;Pt<Ft;Pt+=1)Mt[Pt]=_t/Tt[Pt];return Mt}return 0}function mod(_t,Tt){return typeof _t=="string"&&(_t=parseInt(_t,10)),typeof Tt=="string"&&(Tt=parseInt(Tt,10)),_t%Tt}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(_t,Tt,Mt){if(Tt>Mt){var Pt=Mt;Mt=Tt,Tt=Pt}return Math.min(Math.max(_t,Tt),Mt)}function radiansToDegrees(_t){return _t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(_t){return _t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(_t,Tt){if(typeof _t=="number"||_t instanceof Number)return Tt=Tt||0,Math.abs(_t-Tt);var Mt;Tt||(Tt=helperLengthArray);var Pt=Math.min(_t.length,Tt.length),Ft=0;for(Mt=0;Mt<Pt;Mt+=1)Ft+=Math.pow(Tt[Mt]-_t[Mt],2);return Math.sqrt(Ft)}function normalize(_t){return div(_t,length(_t))}function rgbToHsl(_t){var Tt,Mt,Pt=_t[0],Ft=_t[1],Dt=_t[2],Nt=Math.max(Pt,Ft,Dt),Vt=Math.min(Pt,Ft,Dt),zt=(Nt+Vt)/2;if(Nt===Vt)Tt=0,Mt=0;else{var Xt=Nt-Vt;switch(Mt=zt>.5?Xt/(2-Nt-Vt):Xt/(Nt+Vt),Nt){case Pt:Tt=(Ft-Dt)/Xt+(Ft<Dt?6:0);break;case Ft:Tt=(Dt-Pt)/Xt+2;break;case Dt:Tt=(Pt-Ft)/Xt+4}Tt/=6}return[Tt,Mt,zt,_t[3]]}function hue2rgb(_t,Tt,Mt){return Mt<0&&(Mt+=1),Mt>1&&(Mt-=1),Mt<1/6?_t+6*(Tt-_t)*Mt:Mt<.5?Tt:Mt<2/3?_t+(Tt-_t)*(2/3-Mt)*6:_t}function hslToRgb(_t){var Tt,Mt,Pt,Ft=_t[0],Dt=_t[1],Nt=_t[2];if(Dt===0)Tt=Nt,Pt=Nt,Mt=Nt;else{var Vt=Nt<.5?Nt*(1+Dt):Nt+Dt-Nt*Dt,zt=2*Nt-Vt;Tt=hue2rgb(zt,Vt,Ft+1/3),Mt=hue2rgb(zt,Vt,Ft),Pt=hue2rgb(zt,Vt,Ft-1/3)}return[Tt,Mt,Pt,_t[3]]}function linear(_t,Tt,Mt,Pt,Ft){if(Pt!==void 0&&Ft!==void 0||(Pt=Tt,Ft=Mt,Tt=0,Mt=1),Mt<Tt){var Dt=Mt;Mt=Tt,Tt=Dt}if(_t<=Tt)return Pt;if(_t>=Mt)return Ft;var Nt,Vt=Mt===Tt?0:(_t-Tt)/(Mt-Tt);if(!Pt.length)return Pt+(Ft-Pt)*Vt;var zt=Pt.length,Xt=createTypedArray("float32",zt);for(Nt=0;Nt<zt;Nt+=1)Xt[Nt]=Pt[Nt]+(Ft[Nt]-Pt[Nt])*Vt;return Xt}function random(_t,Tt){if(Tt===void 0&&(_t===void 0?(_t=0,Tt=1):(Tt=_t,_t=void 0)),Tt.length){var Mt,Pt=Tt.length;_t||(_t=createTypedArray("float32",Pt));var Ft=createTypedArray("float32",Pt),Dt=BMMath.random();for(Mt=0;Mt<Pt;Mt+=1)Ft[Mt]=_t[Mt]+Dt*(Tt[Mt]-_t[Mt]);return Ft}return _t===void 0&&(_t=0),_t+BMMath.random()*(Tt-_t)}function createPath(_t,Tt,Mt,Pt){var Ft,Dt=_t.length,Nt=shapePool.newElement();Nt.setPathData(!!Pt,Dt);var Vt,zt,Xt=[0,0];for(Ft=0;Ft<Dt;Ft+=1)Vt=Tt&&Tt[Ft]?Tt[Ft]:Xt,zt=Mt&&Mt[Ft]?Mt[Ft]:Xt,Nt.setTripleAt(_t[Ft][0],_t[Ft][1],zt[0]+_t[Ft][0],zt[1]+_t[Ft][1],Vt[0]+_t[Ft][0],Vt[1]+_t[Ft][1],Ft,!0);return Nt}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=function(_t,Tt){var Mt,Pt,Ft=this.pv.length?this.pv.length:1,Dt=createTypedArray("float32",Ft),Nt=Math.floor(5*time);for(Mt=0,Pt=0;Mt<Nt;){for(Pt=0;Pt<Ft;Pt+=1)Dt[Pt]+=-Tt+2*Tt*BMMath.random();Mt+=1}var Vt=5*time,zt=Vt-Math.floor(Vt),Xt=createTypedArray("float32",Ft);if(Ft>1){for(Pt=0;Pt<Ft;Pt+=1)Xt[Pt]=this.pv[Pt]+Dt[Pt]+(-Tt+2*Tt*BMMath.random())*zt;return Xt}return this.pv+Dt[0]+(-Tt+2*Tt*BMMath.random())*zt}.bind(this);function loopInDuration(_t,Tt){return loopIn(_t,Tt,!0)}function loopOutDuration(_t,Tt){return loopOut(_t,Tt,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(_t,Tt){var Mt=[Tt[0]-_t[0],Tt[1]-_t[1],Tt[2]-_t[2]],Pt=Math.atan2(Mt[0],Math.sqrt(Mt[1]*Mt[1]+Mt[2]*Mt[2]))/degToRads;return[-Math.atan2(Mt[1],Mt[2])/degToRads,Pt,0]}function easeOut(_t,Tt,Mt,Pt,Ft){return applyEase(easeOutBez,_t,Tt,Mt,Pt,Ft)}function easeIn(_t,Tt,Mt,Pt,Ft){return applyEase(easeInBez,_t,Tt,Mt,Pt,Ft)}function ease(_t,Tt,Mt,Pt,Ft){return applyEase(easeInOutBez,_t,Tt,Mt,Pt,Ft)}function applyEase(_t,Tt,Mt,Pt,Ft,Dt){Ft===void 0?(Ft=Mt,Dt=Pt):Tt=(Tt-Mt)/(Pt-Mt),Tt>1?Tt=1:Tt<0&&(Tt=0);var Nt=_t(Tt);if($bm_isInstanceOfArray(Ft)){var Vt,zt=Ft.length,Xt=createTypedArray("float32",zt);for(Vt=0;Vt<zt;Vt+=1)Xt[Vt]=(Dt[Vt]-Ft[Vt])*Nt+Ft[Vt];return Xt}return(Dt-Ft)*Nt+Ft}function nearestKey(_t){var Tt,Mt,Pt,Ft=data.k.length;if(data.k.length&&typeof data.k[0]!="number")if(Mt=-1,(_t*=elem.comp.globalData.frameRate)<data.k[0].t)Mt=1,Pt=data.k[0].t;else{for(Tt=0;Tt<Ft-1;Tt+=1){if(_t===data.k[Tt].t){Mt=Tt+1,Pt=data.k[Tt].t;break}if(_t>data.k[Tt].t&&_t<data.k[Tt+1].t){_t-data.k[Tt].t>data.k[Tt+1].t-_t?(Mt=Tt+2,Pt=data.k[Tt+1].t):(Mt=Tt+1,Pt=data.k[Tt].t);break}}Mt===-1&&(Mt=Tt+1,Pt=data.k[Tt].t)}else Mt=0,Pt=0;var Dt={};return Dt.index=Mt,Dt.time=Pt/elem.comp.globalData.frameRate,Dt}function key(_t){var Tt,Mt,Pt;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+_t);_t-=1,Tt={time:data.k[_t].t/elem.comp.globalData.frameRate,value:[]};var Ft=Object.prototype.hasOwnProperty.call(data.k[_t],"s")?data.k[_t].s:data.k[_t-1].e;for(Pt=Ft.length,Mt=0;Mt<Pt;Mt+=1)Tt[Mt]=Ft[Mt],Tt.value[Mt]=Ft[Mt];return Tt}function framesToTime(_t,Tt){return Tt||(Tt=elem.comp.globalData.frameRate),_t/Tt}function timeToFrames(_t,Tt){return _t||_t===0||(_t=time),Tt||(Tt=elem.comp.globalData.frameRate),_t*Tt}function seedRandom(_t){BMMath.seedrandom(randSeed+_t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(_t,Tt){return typeof value=="string"?Tt===void 0?value.substring(_t):value.substring(_t,Tt):""}function substr(_t,Tt){return typeof value=="string"?Tt===void 0?value.substr(_t):value.substr(_t,Tt):""}function posterizeTime(_t){time=_t===0?0:Math.floor(time*_t)/_t,value=valueAtTime(time)}var index=elem.data.ind;!elem.hierarchy||elem.hierarchy.length;var parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(_t){return value=_t,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType!==4||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),!(!elem.hierarchy||!elem.hierarchy.length)&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath],ob}(),expressionHelpers={searchExpressions:function(_t,Tt,Mt){Tt.x&&(Mt.k=!0,Mt.x=!0,Mt.initiateExpression=ExpressionManager.initiateExpression,Mt.effectsSequence.push(Mt.initiateExpression(_t,Tt,Mt).bind(Mt)))},getSpeedAtTime:function(_t){var Tt=this.getValueAtTime(_t),Mt=this.getValueAtTime(_t+-.01),Pt=0;if(Tt.length){var Ft;for(Ft=0;Ft<Tt.length;Ft+=1)Pt+=Math.pow(Mt[Ft]-Tt[Ft],2);Pt=100*Math.sqrt(Pt)}else Pt=0;return Pt},getVelocityAtTime:function(_t){if(this.vel!==void 0)return this.vel;var Tt,Mt,Pt=this.getValueAtTime(_t),Ft=this.getValueAtTime(_t+-.001);if(Pt.length)for(Tt=createTypedArray("float32",Pt.length),Mt=0;Mt<Pt.length;Mt+=1)Tt[Mt]=(Ft[Mt]-Pt[Mt])/-.001;else Tt=(Ft-Pt)/-.001;return Tt},getValueAtTime:function(_t){return _t*=this.elem.globalData.frameRate,(_t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<_t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(_t,this._cachingAtTime),this._cachingAtTime.lastFrame=_t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(_t){this.propertyGroup=_t}};function addPropertyDecorator(){function _t(Wt,Qt,Zt){if(!this.k||!this.keyframes)return this.pv;Wt=Wt?Wt.toLowerCase():"";var Kt,er,Yt,rr,ir,nr=this.comp.renderedFrame,ar=this.keyframes,or=ar[ar.length-1].t;if(nr<=or)return this.pv;if(Zt?er=or-(Kt=Qt?Math.abs(or-this.elem.comp.globalData.frameRate*Qt):Math.max(0,or-this.elem.data.ip)):((!Qt||Qt>ar.length-1)&&(Qt=ar.length-1),Kt=or-(er=ar[ar.length-1-Qt].t)),Wt==="pingpong"){if(Math.floor((nr-er)/Kt)%2!=0)return this.getValueAtTime((Kt-(nr-er)%Kt+er)/this.comp.globalData.frameRate,0)}else{if(Wt==="offset"){var ur=this.getValueAtTime(er/this.comp.globalData.frameRate,0),dr=this.getValueAtTime(or/this.comp.globalData.frameRate,0),hr=this.getValueAtTime(((nr-er)%Kt+er)/this.comp.globalData.frameRate,0),gr=Math.floor((nr-er)/Kt);if(this.pv.length){for(rr=(ir=new Array(ur.length)).length,Yt=0;Yt<rr;Yt+=1)ir[Yt]=(dr[Yt]-ur[Yt])*gr+hr[Yt];return ir}return(dr-ur)*gr+hr}if(Wt==="continue"){var pr=this.getValueAtTime(or/this.comp.globalData.frameRate,0),mr=this.getValueAtTime((or-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(rr=(ir=new Array(pr.length)).length,Yt=0;Yt<rr;Yt+=1)ir[Yt]=pr[Yt]+(pr[Yt]-mr[Yt])*((nr-or)/this.comp.globalData.frameRate)/5e-4;return ir}return pr+(nr-or)/.001*(pr-mr)}}return this.getValueAtTime(((nr-er)%Kt+er)/this.comp.globalData.frameRate,0)}function Tt(Wt,Qt,Zt){if(!this.k)return this.pv;Wt=Wt?Wt.toLowerCase():"";var Kt,er,Yt,rr,ir,nr=this.comp.renderedFrame,ar=this.keyframes,or=ar[0].t;if(nr>=or)return this.pv;if(Zt?er=or+(Kt=Qt?Math.abs(this.elem.comp.globalData.frameRate*Qt):Math.max(0,this.elem.data.op-or)):((!Qt||Qt>ar.length-1)&&(Qt=ar.length-1),Kt=(er=ar[Qt].t)-or),Wt==="pingpong"){if(Math.floor((or-nr)/Kt)%2==0)return this.getValueAtTime(((or-nr)%Kt+or)/this.comp.globalData.frameRate,0)}else{if(Wt==="offset"){var ur=this.getValueAtTime(or/this.comp.globalData.frameRate,0),dr=this.getValueAtTime(er/this.comp.globalData.frameRate,0),hr=this.getValueAtTime((Kt-(or-nr)%Kt+or)/this.comp.globalData.frameRate,0),gr=Math.floor((or-nr)/Kt)+1;if(this.pv.length){for(rr=(ir=new Array(ur.length)).length,Yt=0;Yt<rr;Yt+=1)ir[Yt]=hr[Yt]-(dr[Yt]-ur[Yt])*gr;return ir}return hr-(dr-ur)*gr}if(Wt==="continue"){var pr=this.getValueAtTime(or/this.comp.globalData.frameRate,0),mr=this.getValueAtTime((or+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(rr=(ir=new Array(pr.length)).length,Yt=0;Yt<rr;Yt+=1)ir[Yt]=pr[Yt]+(pr[Yt]-mr[Yt])*(or-nr)/.001;return ir}return pr+(pr-mr)*(or-nr)/.001}}return this.getValueAtTime((Kt-((or-nr)%Kt+or))/this.comp.globalData.frameRate,0)}function Mt(Wt,Qt){if(!this.k)return this.pv;if(Wt=.5*(Wt||.4),(Qt=Math.floor(Qt||5))<=1)return this.pv;var Zt,Kt,er=this.comp.renderedFrame/this.comp.globalData.frameRate,Yt=er-Wt,rr=Qt>1?(er+Wt-Yt)/(Qt-1):1,ir=0,nr=0;for(Zt=this.pv.length?createTypedArray("float32",this.pv.length):0;ir<Qt;){if(Kt=this.getValueAtTime(Yt+ir*rr),this.pv.length)for(nr=0;nr<this.pv.length;nr+=1)Zt[nr]+=Kt[nr];else Zt+=Kt;ir+=1}if(this.pv.length)for(nr=0;nr<this.pv.length;nr+=1)Zt[nr]/=Qt;else Zt/=Qt;return Zt}function Pt(Wt){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var Qt=this._transformCachingAtTime.v;if(Qt.cloneFromProps(this.pre.props),this.appliedTransformations<1){var Zt=this.a.getValueAtTime(Wt);Qt.translate(-Zt[0]*this.a.mult,-Zt[1]*this.a.mult,Zt[2]*this.a.mult)}if(this.appliedTransformations<2){var Kt=this.s.getValueAtTime(Wt);Qt.scale(Kt[0]*this.s.mult,Kt[1]*this.s.mult,Kt[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var er=this.sk.getValueAtTime(Wt),Yt=this.sa.getValueAtTime(Wt);Qt.skewFromAxis(-er*this.sk.mult,Yt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var rr=this.r.getValueAtTime(Wt);Qt.rotate(-rr*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var ir=this.rz.getValueAtTime(Wt),nr=this.ry.getValueAtTime(Wt),ar=this.rx.getValueAtTime(Wt),or=this.or.getValueAtTime(Wt);Qt.rotateZ(-ir*this.rz.mult).rotateY(nr*this.ry.mult).rotateX(ar*this.rx.mult).rotateZ(-or[2]*this.or.mult).rotateY(or[1]*this.or.mult).rotateX(or[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var ur=this.px.getValueAtTime(Wt),dr=this.py.getValueAtTime(Wt);if(this.data.p.z){var hr=this.pz.getValueAtTime(Wt);Qt.translate(ur*this.px.mult,dr*this.py.mult,-hr*this.pz.mult)}else Qt.translate(ur*this.px.mult,dr*this.py.mult,0)}else{var gr=this.p.getValueAtTime(Wt);Qt.translate(gr[0]*this.p.mult,gr[1]*this.p.mult,-gr[2]*this.p.mult)}return Qt}function Ft(){return this.v.clone(new Matrix)}var Dt=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(Wt,Qt,Zt){var Kt=Dt(Wt,Qt,Zt);return Kt.dynamicProperties.length?Kt.getValueAtTime=Pt.bind(Kt):Kt.getValueAtTime=Ft.bind(Kt),Kt.setGroupProperty=expressionHelpers.setGroupProperty,Kt};var Nt=PropertyFactory.getProp;PropertyFactory.getProp=function(Wt,Qt,Zt,Kt,er){var Yt=Nt(Wt,Qt,Zt,Kt,er);Yt.kf?Yt.getValueAtTime=expressionHelpers.getValueAtTime.bind(Yt):Yt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Yt),Yt.setGroupProperty=expressionHelpers.setGroupProperty,Yt.loopOut=_t,Yt.loopIn=Tt,Yt.smooth=Mt,Yt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Yt),Yt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Yt),Yt.numKeys=Qt.a===1?Qt.k.length:0,Yt.propertyIndex=Qt.ix;var rr=0;return Zt!==0&&(rr=createTypedArray("float32",Qt.a===1?Qt.k[0].s.length:Qt.k.length)),Yt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:rr},expressionHelpers.searchExpressions(Wt,Qt,Yt),Yt.k&&er.addDynamicProperty(Yt),Yt};var Vt=ShapePropertyFactory.getConstructorFunction(),zt=ShapePropertyFactory.getKeyframedConstructorFunction();function Xt(){}Xt.prototype={vertices:function(Wt,Qt){this.k&&this.getValue();var Zt,Kt=this.v;Qt!==void 0&&(Kt=this.getValueAtTime(Qt,0));var er=Kt._length,Yt=Kt[Wt],rr=Kt.v,ir=createSizedArray(er);for(Zt=0;Zt<er;Zt+=1)ir[Zt]=Wt==="i"||Wt==="o"?[Yt[Zt][0]-rr[Zt][0],Yt[Zt][1]-rr[Zt][1]]:[Yt[Zt][0],Yt[Zt][1]];return ir},points:function(Wt){return this.vertices("v",Wt)},inTangents:function(Wt){return this.vertices("i",Wt)},outTangents:function(Wt){return this.vertices("o",Wt)},isClosed:function(){return this.v.c},pointOnPath:function(Wt,Qt){var Zt=this.v;Qt!==void 0&&(Zt=this.getValueAtTime(Qt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(Zt));for(var Kt,er=this._segmentsLength,Yt=er.lengths,rr=er.totalLength*Wt,ir=0,nr=Yt.length,ar=0;ir<nr;){if(ar+Yt[ir].addedLength>rr){var or=ir,ur=Zt.c&&ir===nr-1?0:ir+1,dr=(rr-ar)/Yt[ir].addedLength;Kt=bez.getPointInSegment(Zt.v[or],Zt.v[ur],Zt.o[or],Zt.i[ur],dr,Yt[ir]);break}ar+=Yt[ir].addedLength,ir+=1}return Kt||(Kt=Zt.c?[Zt.v[0][0],Zt.v[0][1]]:[Zt.v[Zt._length-1][0],Zt.v[Zt._length-1][1]]),Kt},vectorOnPath:function(Wt,Qt,Zt){Wt==1?Wt=this.v.c:Wt==0&&(Wt=.999);var Kt=this.pointOnPath(Wt,Qt),er=this.pointOnPath(Wt+.001,Qt),Yt=er[0]-Kt[0],rr=er[1]-Kt[1],ir=Math.sqrt(Math.pow(Yt,2)+Math.pow(rr,2));return ir===0?[0,0]:Zt==="tangent"?[Yt/ir,rr/ir]:[-rr/ir,Yt/ir]},tangentOnPath:function(Wt,Qt){return this.vectorOnPath(Wt,Qt,"tangent")},normalOnPath:function(Wt,Qt){return this.vectorOnPath(Wt,Qt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([Xt],Vt),extendPrototype([Xt],zt),zt.prototype.getValueAtTime=function(Wt){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),Wt*=this.elem.globalData.frameRate,(Wt-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<Wt?this._caching.lastIndex:0,this._cachingAtTime.lastTime=Wt,this.interpolateShape(Wt,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},zt.prototype.initiateExpression=ExpressionManager.initiateExpression;var Ht=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(Wt,Qt,Zt,Kt,er){var Yt=Ht(Wt,Qt,Zt,Kt,er);return Yt.propertyIndex=Qt.ix,Yt.lock=!1,Zt===3?expressionHelpers.searchExpressions(Wt,Qt.pt,Yt):Zt===4&&expressionHelpers.searchExpressions(Wt,Qt.ks,Yt),Yt.k&&Wt.addDynamicProperty(Yt),Yt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(_t,Tt){var Mt=this.calculateExpression(Tt);if(_t.t!==Mt){var Pt={};return this.copyData(Pt,_t),Pt.t=Mt.toString(),Pt.__complete=!1,Pt}return _t},TextProperty.prototype.searchProperty=function(){var _t=this.searchKeyframes(),Tt=this.searchExpressions();return this.kf=_t||Tt,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}return registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),setExpressionsPlugin(Expressions),initialize$1(),initialize(),registerEffect(20,SVGTintFilter,!0),registerEffect(21,SVGFillFilter,!0),registerEffect(22,SVGStrokeEffect,!1),registerEffect(23,SVGTritoneFilter,!0),registerEffect(24,SVGProLevelsFilter,!0),registerEffect(25,SVGDropShadowEffect,!0),registerEffect(28,SVGMatte3Effect,!1),registerEffect(29,SVGGaussianBlurEffect,!0),lottie})}),PlayerState,PlayerEvent;function parseSrc(_t){if(typeof _t=="object")return _t;try{return JSON.parse(_t)}catch{}try{return new URL(_t).toString()}catch{}return _t}(function(_t){_t.Loading="loading",_t.Playing="playing",_t.Paused="paused",_t.Stopped="stopped",_t.Frozen="frozen",_t.Error="error"})(PlayerState||(PlayerState={})),function(_t){_t.Load="load",_t.Error="error",_t.Ready="ready",_t.Play="play",_t.Pause="pause",_t.Stop="stop",_t.Freeze="freeze",_t.Loop="loop",_t.Complete="complete",_t.Frame="frame"}(PlayerEvent||(PlayerEvent={}));var defaultOptions={clearCanvas:!1,hideOnTransparent:!0,progressiveLoad:!0},Player=function(_t){function Tt(Mt){var Pt=_t.call(this,Mt)||this;return Pt.container=null,Pt.unmounted=!1,Pt.handleBgChange=function(Ft){Pt.setState({background:Ft})},Pt.triggerDownload=function(Ft,Dt){var Nt=document.createElement("a");Nt.href=Ft,Nt.download=Dt,document.body.appendChild(Nt),Nt.click(),document.body.removeChild(Nt)},Pt.snapshot=function(Ft){var Dt;Ft===void 0&&(Ft=!0);var Nt=Pt.props.id?Pt.props.id:"lottie",Vt=document.getElementById(Nt);if(Pt.props.renderer==="svg"){if(Vt){var zt=Vt.querySelector("svg");if(zt){var Xt=new XMLSerializer().serializeToString(zt);Dt="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(Xt)}}Ft&&Pt.triggerDownload(Dt,"snapshot.svg")}else if(Pt.props.renderer==="canvas"){if(Vt){var Ht=Vt.querySelector("canvas");Ht&&(Dt=Ht.toDataURL("image/png"))}Ft&&Pt.triggerDownload(Dt,"snapshot.png")}return Dt},typeof window<"u"&&(window.lottie=lottie),Pt.state={animationData:null,background:"transparent",containerRef:react.exports.createRef(),debug:!0,instance:null,playerState:PlayerState.Loading,seeker:0},Pt}return __extends(Tt,_t),Tt.getDerivedStateFromProps=function(Mt,Pt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(Ft){return Mt.background!==Pt.background?[2,{background:Mt.background}]:[2,null]})})},Tt.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(Mt){switch(Mt.label){case 0:return this.unmounted?[3,2]:[4,this.createLottie()];case 1:Mt.sent(),Mt.label=2;case 2:return[2]}})})},Tt.prototype.componentWillUnmount=function(){this.unmounted=!0,this.state.instance&&this.state.instance.destroy()},Tt.prototype.componentDidUpdate=function(Mt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(Pt){switch(Pt.label){case 0:return this.props.src===Mt.src?[3,2]:(this.state.instance&&this.state.instance.destroy(),[4,this.createLottie()]);case 1:Pt.sent(),Pt.label=2;case 2:return[2]}})})},Tt.prototype.render=function(){var Mt=this,Pt=this.props,Ft=Pt.children,Dt=Pt.loop,Nt=Pt.style,Vt=Pt.onBackgroundChange,zt=Pt.className,Xt=this.state,Ht=Xt.animationData,Wt=Xt.instance,Qt=Xt.playerState,Zt=Xt.seeker,Kt=Xt.debug,er=Xt.background;return react.exports.createElement("div",{className:"lf-player-container"},this.state.playerState===PlayerState.Error?react.exports.createElement("div",{className:"lf-error"},react.exports.createElement("span",{"aria-label":"error-symbol",role:"img"},"\u26A0\uFE0F")):react.exports.createElement("div",{id:this.props.id?this.props.id:"lottie",ref:function(Yt){return Mt.container=Yt},style:__assign({background:er,margin:"0 auto",outline:"none",overflow:"hidden"},Nt),className:zt}),react.exports.Children.map(Ft,function(Yt){return react.exports.isValidElement(Yt)?react.exports.cloneElement(Yt,{animationData:Ht,background:er,debug:Kt,instance:Wt,loop:Dt,pause:function(){return Mt.pause()},play:function(){return Mt.play()},playerState:Qt,seeker:Zt,setBackground:function(rr){Mt.setState({background:rr}),typeof Vt=="function"&&Vt(rr)},setSeeker:function(rr,ir){return Mt.setSeeker(rr,ir)},stop:function(){return Mt.stop()},toggleDebug:function(){return Mt.toggleDebug()},setLoop:function(rr){return Mt.setLoop(rr)},colorChangedEvent:function(rr){Mt.handleBgChange(rr)},snapshot:function(){Mt.snapshot()}}):null}))},Tt.prototype.toggleDebug=function(){this.setState({debug:!this.state.debug})},Tt.prototype.createLottie=function(){return __awaiter(this,void 0,void 0,function(){var Mt,Pt,Ft,Dt,Nt,Vt,zt,Xt,Ht,Wt,Qt,Zt,Kt,er,Yt=this;return __generator(this,function(rr){switch(rr.label){case 0:if(Mt=this.props,Pt=Mt.autoplay,Ft=Mt.direction,Dt=Mt.loop,Nt=Mt.lottieRef,Vt=Mt.renderer,zt=Mt.speed,Xt=Mt.src,Ht=Mt.background,Wt=Mt.rendererSettings,Qt=Mt.hover,Zt=this.state.instance,!Xt||!this.container)return[2];rr.label=1;case 1:return rr.trys.push([1,5,,6]),typeof(Kt=parseSrc(Xt))!="string"?[3,4]:[4,fetch(Kt)];case 2:return[4,rr.sent().json()];case 3:Kt=rr.sent(),rr.label=4;case 4:return Zt&&Zt.destroy(),er=lottie.loadAnimation({rendererSettings:Wt||defaultOptions,animationData:Kt,autoplay:Pt||!1,container:this.container,loop:Dt||!1,renderer:Vt}),zt&&er.setSpeed(zt),this.setState({animationData:Kt}),er.addEventListener("enterFrame",function(){Yt.triggerEvent(PlayerEvent.Frame),Yt.setState({seeker:Math.floor(er.currentFrame)})}),er.addEventListener("DOMLoaded",function(){Yt.triggerEvent(PlayerEvent.Load)}),er.addEventListener("data_ready",function(){Yt.triggerEvent(PlayerEvent.Ready)}),er.addEventListener("data_failed",function(){Yt.setState({playerState:PlayerState.Error})}),er.addEventListener("loopComplete",function(){Yt.triggerEvent(PlayerEvent.Loop)}),er.addEventListener("complete",function(){Yt.triggerEvent(PlayerEvent.Complete),Yt.setState({playerState:PlayerState.Paused}),Yt.props.keepLastFrame&&!Yt.props.loop||Yt.setSeeker(0)}),this.container.addEventListener("mouseenter",function(){Qt&&Yt.state.playerState!==PlayerState.Playing&&(Yt.props.keepLastFrame&&Yt.stop(),Yt.play())}),this.container.addEventListener("mouseleave",function(){Qt&&Yt.state.playerState===PlayerState.Playing&&Yt.stop()}),zt&&this.setPlayerSpeed(zt),Ft&&this.setPlayerDirection(Ft),Ht&&this.setState({background:Ht}),this.setState({instance:er},function(){typeof Nt=="function"&&Nt(er),Pt&&Yt.play()}),[3,6];case 5:return rr.sent(),this.setState({playerState:PlayerState.Error}),[3,6];case 6:return[2]}})})},Tt.prototype.play=function(){var Mt=this.state.instance;Mt&&(this.triggerEvent(PlayerEvent.Play),Mt.play(),this.setState({playerState:PlayerState.Playing}))},Tt.prototype.pause=function(){var Mt=this.state.instance;Mt&&(this.triggerEvent(PlayerEvent.Pause),Mt.pause(),this.setState({playerState:PlayerState.Paused}))},Tt.prototype.stop=function(){var Mt=this.state.instance;Mt&&(this.triggerEvent(PlayerEvent.Stop),Mt.stop(),this.setState({playerState:PlayerState.Stopped}))},Tt.prototype.setPlayerSpeed=function(Mt){var Pt=this.state.instance;Pt&&Pt.setSpeed(Mt)},Tt.prototype.setPlayerDirection=function(Mt){var Pt=this.state.instance;Pt&&Pt.setDirection(Mt)},Tt.prototype.setSeeker=function(Mt,Pt){Pt===void 0&&(Pt=!1);var Ft=this.state,Dt=Ft.instance,Nt=Ft.playerState;Dt&&(Pt&&Nt===PlayerState.Playing?Dt.goToAndPlay(Mt,!0):(Dt.goToAndStop(Mt,!0),this.triggerEvent(PlayerEvent.Pause),this.setState({playerState:PlayerState.Paused})))},Tt.prototype.setLoop=function(Mt){var Pt=this.state.instance;Pt&&(Pt.loop=Mt,this.setState({instance:Pt}))},Tt.prototype.triggerEvent=function(Mt){var Pt=this.props.onEvent;Pt&&Pt(Mt)},Tt.defaultProps={loop:!1},Tt}(react.exports.Component);function styleInject(_t,Tt){Tt===void 0&&(Tt={});var Mt=Tt.insertAt;if(_t&&typeof document<"u"){var Pt=document.head||document.getElementsByTagName("head")[0],Ft=document.createElement("style");Ft.type="text/css",Mt==="top"&&Pt.firstChild?Pt.insertBefore(Ft,Pt.firstChild):Pt.appendChild(Ft),Ft.styleSheet?Ft.styleSheet.cssText=_t:Ft.appendChild(document.createTextNode(_t))}}var css_248z=`.lf-progress {
  -webkit-appearance: none;
  -moz-apperance: none;
  width: 100%;
  /* margin: 0 10px; */
  height: 4px;
  border-radius: 3px;
  cursor: pointer;
}
.lf-progress:focus {
  outline: none;
  border: none;
}
.lf-progress::-moz-range-track {
  cursor: pointer;
  background: none;
  border: none;
  outline: none;
}
.lf-progress::-webkit-slider-thumb {
  -webkit-appearance: none !important;
  height: 13px;
  width: 13px;
  border: 0;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress::-moz-range-thumb {
  -moz-appearance: none !important;
  height: 13px;
  width: 13px;
  border: 0;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress::-ms-track {
  width: 100%;
  height: 3px;
  cursor: pointer;
  background: transparent;
  border-color: transparent;
  color: transparent;
}
.lf-progress::-ms-fill-lower {
  background: #ccc;
  border-radius: 3px;
}
.lf-progress::-ms-fill-upper {
  background: #ccc;
  border-radius: 3px;
}
.lf-progress::-ms-thumb {
  border: 0;
  height: 15px;
  width: 15px;
  border-radius: 50%;
  background: #0fccce;
  cursor: pointer;
}
.lf-progress:focus::-ms-fill-lower {
  background: #ccc;
}
.lf-progress:focus::-ms-fill-upper {
  background: #ccc;
}
.lf-player-container :focus {
  outline: 0;
}
.lf-popover {
  position: relative;
}

.lf-popover-content {
  display: inline-block;
  position: absolute;
  opacity: 1;
  visibility: visible;
  transform: translate(0, -10px);
  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
  transition: all 0.3s cubic-bezier(0.75, -0.02, 0.2, 0.97);
}

.lf-popover-content.hidden {
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0px);
}

.lf-player-btn-container {
  display: flex;
  align-items: center;
}
.lf-player-btn {
  cursor: pointer;
  fill: #999;
  width: 14px;
}

.lf-player-btn.active {
  fill: #555;
}

.lf-popover {
  position: relative;
}

.lf-popover-content {
  display: inline-block;
  position: absolute;
  background-color: #ffffff;
  opacity: 1;

  transform: translate(0, -10px);
  box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
  transition: all 0.3s cubic-bezier(0.75, -0.02, 0.2, 0.97);
  padding: 10px;
}

.lf-popover-content.hidden {
  opacity: 0;
  visibility: hidden;
  transform: translate(0, 0px);
}

.lf-arrow {
  position: absolute;
  z-index: -1;
  content: '';
  bottom: -9px;
  border-style: solid;
  border-width: 10px 10px 0px 10px;
}

.lf-left-align,
.lf-left-align .lfarrow {
  left: 0;
  right: unset;
}

.lf-right-align,
.lf-right-align .lf-arrow {
  right: 0;
  left: unset;
}

.lf-text-input {
  border: 1px #ccc solid;
  border-radius: 5px;
  padding: 3px;
  width: 60px;
  margin: 0;
}

.lf-color-picker {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  height: 90px;
}

.lf-color-selectors {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.lf-color-component {
  display: flex;
  flex-direction: row;
  font-size: 12px;
  align-items: center;
  justify-content: center;
}

.lf-color-component strong {
  width: 40px;
}

.lf-color-component input[type='range'] {
  margin: 0 0 0 10px;
}

.lf-color-component input[type='number'] {
  width: 50px;
  margin: 0 0 0 10px;
}

.lf-color-preview {
  font-size: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  padding-left: 5px;
}

.lf-preview {
  height: 60px;
  width: 60px;
}

.lf-popover-snapshot {
  width: 150px;
}
.lf-popover-snapshot h5 {
  margin: 5px 0 10px 0;
  font-size: 0.75rem;
}
.lf-popover-snapshot a {
  display: block;
  text-decoration: none;
}
.lf-popover-snapshot a:before {
  content: '\u297C';
  margin-right: 5px;
}
.lf-popover-snapshot .lf-note {
  display: block;
  margin-top: 10px;
  color: #999;
}
.lf-player-controls > div {
  margin-right: 5px;
  margin-left: 5px;
}
.lf-player-controls > div:first-child {
  margin-left: 0px;
}
.lf-player-controls > div:last-child {
  margin-right: 0px;
}
`;styleInject(css_248z);var ColorPicker=function(_t){function Tt(){var Mt=_t!==null&&_t.apply(this,arguments)||this;return Mt.state={red:0,green:0,blue:0,rgba:null,hex:"#000000",colorComponents:[]},Mt.handleChange=function(Pt,Ft){if(Pt==="r"){var Dt="#"+(256|Ft).toString(16).slice(1)+(256|Mt.state.green).toString(16).slice(1)+(256|Mt.state.blue).toString(16).slice(1);Mt.setState({hex:Dt})}else Pt==="g"?(Dt="#"+(256|Mt.state.red).toString(16).slice(1)+(256|Ft).toString(16).slice(1)+(256|Mt.state.blue).toString(16).slice(1),Mt.setState({hex:Dt})):Pt==="b"&&(Dt="#"+(256|Mt.state.red).toString(16).slice(1)+(256|Mt.state.green).toString(16).slice(1)+(256|Ft).toString(16).slice(1),Mt.setState({hex:Dt}))},Mt.parseColor=function(Pt){var Ft;if(typeof Pt=="string"){if(Pt[0]==="#"){var Dt=Pt.length===4?[Pt.slice(1,2),Pt.slice(2,3),Pt.slice(3,4)].map(function(Nt){return parseInt(""+Nt+Nt,16)}):[Pt.slice(1,3),Pt.slice(3,5),Pt.slice(5,7)].map(function(Nt){return parseInt(Nt,16)});Mt.setState({colorComponents:Dt})}else Pt.startsWith("rgb")&&(Dt=(Ft=Pt.match(/\d+/g))===null||Ft===void 0?void 0:Ft.map(function(Nt){return parseInt(Nt)}))!==void 0&&Mt.setState({colorComponents:Dt});Mt.state.colorComponents.length&&(Mt.setState({red:Mt.state.colorComponents[0]}),Mt.setState({green:Mt.state.colorComponents[1]}),Mt.setState({blue:Mt.state.colorComponents[2]}))}},Mt}return __extends(Tt,_t),Tt.prototype.componentDidUpdate=function(Mt,Pt){return this.props.colorChangedEvent&&this.state.hex!==Pt.hex&&this.props.colorChangedEvent(this.state.hex),!0},Tt.prototype.render=function(){var Mt=this;return react.exports.createElement("div",{className:"lf-color-picker"},react.exports.createElement("div",{className:"lf-color-selectors"},react.exports.createElement("div",{className:"lf-color-component"},react.exports.createElement("strong",null,"Red"),react.exports.createElement("input",{type:"range",min:"0",max:"255",value:this.state.red,onChange:function(Pt){Mt.setState({red:Pt.target.value}),Mt.handleChange("r",Pt.target.value)}}),react.exports.createElement("input",{className:"lf-text-input",type:"number",min:"0",max:"255",value:this.state.red,onChange:function(Pt){Mt.setState({red:Pt.target.value}),Mt.handleChange("r",Pt.target.value)}})),react.exports.createElement("div",{className:"lf-color-component"},react.exports.createElement("strong",null,"Green"),react.exports.createElement("input",{type:"range",min:"0",max:"255",value:this.state.green,onChange:function(Pt){Mt.setState({green:Pt.target.value}),Mt.handleChange("g",Pt.target.value)}}),react.exports.createElement("input",{className:"lf-text-input",type:"number",min:"0",max:"255",value:this.state.green,onChange:function(Pt){Mt.setState({green:Pt.target.value}),Mt.handleChange("g",Pt.target.value)}})),react.exports.createElement("div",{className:"lf-color-component"},react.exports.createElement("strong",null,"Blue"),react.exports.createElement("input",{type:"range",min:"0",max:"255",value:this.state.blue,onChange:function(Pt){Mt.setState({blue:Pt.target.value}),Mt.handleChange("b",Pt.target.value)}}),react.exports.createElement("input",{className:"lf-text-input",type:"number",min:"0",max:"255",value:this.state.blue,onChange:function(Pt){Mt.setState({blue:Pt.target.value}),Mt.handleChange("b",Pt.target.value)}}))),react.exports.createElement("div",{className:"lf-color-preview"},react.exports.createElement("div",{className:"lf-preview",style:{background:"rgb("+this.state.red+", "+this.state.green+", "+this.state.blue+")"}}),react.exports.createElement("div",null,react.exports.createElement("input",{className:"lf-text-input",type:"text",value:this.state.hex,onChange:function(Pt){Mt.setState({hex:Pt.target.value}),Mt.parseColor(Pt.target.value)}}))))},Tt}(react.exports.Component),Popover=function(_t){var Tt=_t.children,Mt=_t.icon,Pt=react.exports.useState(null),Ft=Pt[0],Dt=Pt[1],Nt=react.exports.useState(null),Vt=Nt[0],zt=Nt[1],Xt=react.exports.useState(null),Ht=Xt[0],Wt=Xt[1],Qt=react.exports.useState(!1),Zt=Qt[0],Kt=Qt[1];return react.exports.useEffect(function(){if(Ft&&Vt){var er=Ft.getBoundingClientRect(),Yt=Vt.getBoundingClientRect(),rr=er.left+Yt.width>window.innerWidth?-1:0;Wt(rr)}},[Ht,Vt,Ft]),react.exports.createElement("div",{className:"lf-popover",onMouseOver:function(){Kt(!0)},onMouseLeave:function(){Kt(!1)},ref:function(er){Dt(er)}},react.exports.createElement("div",{className:" lf-player-btn"},Mt),react.exports.createElement("div",{className:"lf-popover-content",ref:function(er){zt(er)},style:{bottom:"22px",right:"0px",zIndex:2,visibility:Zt?"visible":"hidden"}},Tt))},Seeker=function(_t){function Tt(Mt){var Pt=_t.call(this,Mt)||this;return Pt.inputRef=react.exports.createRef(),Pt.handleChange=function(){return function(Ft){var Dt=Ft.target.value,Nt=Math.floor(Dt/100*Pt.props.max);Pt.props.onChange(Nt)}},Pt.state={value:0},Pt}return __extends(Tt,_t),Tt.prototype.render=function(){var Mt=this.props.value/this.props.max*100,Pt={backgroundImage:"-webkit-gradient(linear, left top, right top, color-stop("+Mt+"%, rgba(15, 204, 206, 0.4)), color-stop("+Mt+"%, #DAE1E7))"},Ft={position:"absolute",left:0,marginTop:"8px",width:"20px",display:"block",border:"0px",backgroundColor:this.props.darkTheme?"#505050":"rgb(218, 225, 231)",color:this.props.darkTheme?"#B9B9B9":"#555",padding:"2px",textAlign:"center",borderRadius:"3px",fontSize:"8px",fontWeight:"bold"},Dt={position:"absolute",right:0,marginTop:"8px",width:"20px",display:"block",border:"0px",backgroundColor:this.props.darkTheme?"#505050":"rgb(218, 225, 231)",color:this.props.darkTheme?"#B9B9B9":"#555",padding:"2px",textAlign:"center",borderRadius:"3px",fontSize:"8px",fontWeight:"bold"};return react.exports.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",marginRight:"5px",marginLeft:"5px",position:"relative"}},react.exports.createElement("input",{ref:this.inputRef,id:"track",className:"lf-progress",name:"progress",type:"range",min:"0",max:"100",step:"0.1",value:Mt,onInput:this.handleChange(),onChange:this.handleChange(),style:Pt}),this.props.showLabels&&react.exports.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},react.exports.createElement("div",{style:Ft},this.props.min),react.exports.createElement("div",{style:Dt},this.props.max)))},Tt}(react.exports.Component),ControlButtonStyle={display:"inline-flex",cursor:"pointer"};(function(_t){function Tt(Mt){var Pt=_t.call(this,Mt)||this;return Pt.state={activeFrame:0,mouseDown:!1},Pt}return __extends(Tt,_t),Tt.prototype.render=function(){var Mt=this,Pt=this.props,Ft=Pt.instance,Dt=Pt.playerState,Nt=Pt.seeker,Vt=Pt.setLoop,zt=Pt.setSeeker,Xt=Pt.play,Ht=Pt.pause,Wt=Pt.stop,Qt=Pt.visible,Zt=Pt.buttons;if(!Ft||!Qt)return null;var Kt=!Zt||Zt.includes("play"),er=!Zt||Zt.includes("stop"),Yt=!Zt||Zt.includes("repeat"),rr=!Zt||Zt.includes("frame"),ir=!Zt||Zt.includes("background"),nr=!Zt||Zt.includes("snapshot"),ar={width:14,height:14,viewBox:"0 0 24 24"},or=Math.round(Ft.currentFrame);return react.exports.createElement("div",{className:"lf-player-controls",style:{display:"flex",justifyContent:"space-between",height:"60px",alignItems:"center",backgroundColor:this.props.transparentTheme?"transparent":this.props.darkTheme?"#3C3C3C":"#ffffff",paddingLeft:"10px",paddingRight:"10px"}},Kt&&react.exports.createElement("div",{role:"button",tabIndex:0,onClick:function(){Dt===PlayerState.Playing?typeof Ht=="function"&&Ht():typeof Xt=="function"&&Xt()},onKeyDown:function(){Dt===PlayerState.Playing?typeof Ht=="function"&&Ht():typeof Xt=="function"&&Xt()},className:"lf-player-btn",style:ControlButtonStyle},Dt===PlayerState.Playing?react.exports.createElement("svg",__assign({},ar),react.exports.createElement("rect",{height:"22.9",rx:"1.9",width:"7.6",x:"14",y:".5"}),react.exports.createElement("rect",{height:"22.9",rx:"1.9",width:"7.6",x:"2",y:".5"})):react.exports.createElement("svg",__assign({},ar),react.exports.createElement("path",{d:"M2 3.4C2 1.9 3.5 1 4.8 1.8l16.5 9.6c1.2.7 1.2 2.5 0 3.2L4.8 24.2C3.5 25 2 24.1 2 22.6V3.4z"}))),er&&react.exports.createElement("div",{tabIndex:0,role:"button",onClick:function(){return Wt&&Wt()},onKeyDown:function(){return Wt&&Wt()},className:Dt===PlayerState.Stopped?"lf-player-btn active":"lf-player-btn",style:ControlButtonStyle},react.exports.createElement("svg",__assign({},ar),react.exports.createElement("path",{d:`M2 3.667A1.67 1.67 0 0 1 3.667 2h16.666A1.67 1.67 0 0 1 22 3.667v16.666A1.67 1.67 0 0 1 20.333
            22H3.667A1.67 1.67 0 0 1 2 20.333z`}))),react.exports.createElement(Seeker,{min:0,step:1,max:Ft?Ft.totalFrames:1,value:Nt||0,onChange:function(ur){zt&&Mt.setState({activeFrame:ur},function(){zt(ur,!1)})},onChangeEnd:function(ur){zt&&Mt.setState({activeFrame:ur},function(){zt(ur,!1)})},showLabels:this.props.showLabels,darkTheme:this.props.darkTheme}),rr&&react.exports.createElement("div",{role:"button",className:"lf-player-btn-container"},react.exports.createElement("input",{style:{outline:"none",border:this.props.darkTheme?"1px #505050 solid":"1px #ccc solid",borderRadius:"3px",width:"40px",textAlign:"center",backgroundColor:this.props.darkTheme?"#505050":"#ffffff",color:this.props.darkTheme?"#B9B9B9":"#999",fontSize:"0.7rem",padding:"0",fontFamily:"inherit"},type:"text",value:or,readOnly:!0})),Yt&&react.exports.createElement("div",{role:"button",tabIndex:0,onClick:function(){Ft&&Vt&&Vt(!Ft.loop)},onKeyDown:function(){Ft&&Vt&&Vt(!Ft.loop)},className:Ft.loop?"lf-player-btn active":"lf-player-btn",style:ControlButtonStyle},react.exports.createElement("svg",__assign({},ar),react.exports.createElement("path",{d:`M12.5 16.8137h-.13v1.8939h4.9696c3.6455 0 6.6113-2.9658 6.6113-6.6116
            0-3.64549-2.9658-6.61131-6.6113-6.61131-.5231 0-.947.42391-.947.94696 0 .52304.4239.94696.947.94696 2.6011 0
            4.7174 2.11634 4.7174 4.71739 0 2.6014-2.1166 4.7177-4.7174 4.7177H12.5zM13.6025
            5.61469v-.13H7.48137C3.83582 5.48469.87 8.45051.87 12.096c0 3.6509 3.17269 6.6117 6.81304 6.6117.52304 0
            .94696-.424.94696-.947 0-.5231-.42392-.947-.94696-.947-2.60804 0-4.91907-2.1231-4.91907-4.7176 0-2.60115
            2.11634-4.71744 4.7174-4.71744h6.12113V5.61469z`,stroke:"#8795A1",strokeWidth:".26"}),react.exports.createElement("path",{d:`M11.1482
            2.20355h0l-.001-.00116c-.3412-.40061-.9405-.44558-1.33668-.0996h-.00001c-.39526.34519-.43936.94795-.09898
            1.34767l2.51487 3.03683-2.51894 3.06468c-.33872.40088-.29282 1.00363.10347
            1.34723l.08517-.0982-.08517.0982c.17853.1549.39807.2308.61647.2308.2671 0 .5328-.114.72-.3347h0l.0011-.0014
            3.0435-3.68655.0006-.00068c.3035-.35872.3025-.88754-.0019-1.24526l-3.0425-3.65786zM13.9453
            21.7965h0l.001.0011c.3413.4006.9407.4456 1.337.0996h0c.3953-.3452.4395-.9479.099-1.3477l-2.5154-3.0368
            2.5195-3.0647c.3388-.4008.2929-1.0036-.1035-1.3472l-.0852.0982.0852-.0982c-.1786-.1549-.3981-.2308-.6166-.2308-.2671
            0-.5329.114-.7202.3347h0l-.0011.0014-3.0442
            3.6865c-.0001.0003-.0003.0005-.0005.0007-.3036.3587-.3027.8876.0019 1.2453l3.0431 3.6579z`,fill:"#8795A1",stroke:"#8795A1",strokeWidth:".26"}))),ir&&react.exports.createElement(Popover,{icon:react.exports.createElement("svg",__assign({},ar),react.exports.createElement("path",{d:`M12 3.1L6.1 8.6a7.6 7.6 0 00-2.2 4 7.2 7.2 0 00.4 4.4 7.9 7.9 0 003 3.5 8.7 8.7 0 004.7 1.3c1.6 0
            3.2-.5 4.6-1.3s2.4-2 3-3.5a7.2 7.2 0 00.5-4.5 7.6 7.6 0 00-2.2-4L12 3.2zM12 0l7.5 7a9.8 9.8 0 013 5.1
            9.3 9.3 0 01-.6 5.8c-.9 1.8-2.2 3.3-4 4.4A11.2 11.2 0 0112 24a11.2 11.2 0
            01-6-1.7c-1.7-1-3-2.6-3.9-4.4a9.3 9.3 0 01-.6-5.8c.4-2 1.5-3.7 3-5L12 0zM6 14h12c0 1.5-.7 3-1.8 4s-2.6
            1.6-4.2 1.6S9 19 7.8 18s-1.7-2.5-1.7-4z`}))},react.exports.createElement("div",{slot:"content",className:"lf-popover popover-background"},react.exports.createElement(ColorPicker,{colorChangedEvent:this.props.colorChangedEvent}))),nr&&react.exports.createElement(Popover,{icon:react.exports.createElement("svg",__assign({},ar),react.exports.createElement("path",{clipRule:"evenodd",d:`M0 3.01A2.983 2.983 0 012.983.027H16.99a2.983 2.983 0 012.983 2.983v14.008a2.982 2.982 0 01-2.983
              2.983H2.983A2.983 2.983 0 010 17.018zm2.983-.941a.941.941 0 00-.942.94v14.01c0
              .52.422.94.942.94H16.99a.94.94 0 00.941-.94V3.008a.941.941 0 00-.94-.94H2.981z`,fillRule:"evenodd"}),react.exports.createElement("path",{d:"M12.229 7.945l-2.07 4.598-2.586-2.605-2.414 2.758v2.146h9.656V11.93z"}),react.exports.createElement("circle",{cx:"7.444",cy:"6.513",r:"2.032"}),react.exports.createElement("path",{d:`M9.561 23.916h11.25a2.929 2.929 0 002.926-2.927V9.954a1.06 1.06 0 10-2.122 0v11.035a.805.805 0
              01-.803.804H9.562a1.061 1.061 0 100 2.123z`,stroke:"#8795a1",strokeWidth:".215"}))},react.exports.createElement("div",{slot:"content",className:"lf-popover lf-popover-snapshot",onWheel:function(ur){zt&&zt(or+(ur.deltaY>0?-1:1),!1)}},react.exports.createElement("h5",null,"Frame ",or),react.exports.createElement("div",{style:{cursor:"pointer",color:"#0FCCCE"},onClick:this.props.snapshot},"Download SVG"),react.exports.createElement("div",{style:{cursor:"pointer",color:"#0FCCCE"},onClick:this.props.snapshot},"Download PNG"),react.exports.createElement("i",{className:"lf-note"},"Scroll with mousewheel to find exact frame"))))},Tt})(react.exports.Component);var axios$3={exports:{}},axios$2={exports:{}},bind$2=function _t(Tt,Mt){return function(){for(var Ft=new Array(arguments.length),Dt=0;Dt<Ft.length;Dt++)Ft[Dt]=arguments[Dt];return Tt.apply(Mt,Ft)}},bind$1=bind$2,toString=Object.prototype.toString,kindOf=function(_t){return function(Tt){var Mt=toString.call(Tt);return _t[Mt]||(_t[Mt]=Mt.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(_t){return _t=_t.toLowerCase(),function(Mt){return kindOf(Mt)===_t}}function isArray(_t){return Array.isArray(_t)}function isUndefined(_t){return typeof _t>"u"}function isBuffer(_t){return _t!==null&&!isUndefined(_t)&&_t.constructor!==null&&!isUndefined(_t.constructor)&&typeof _t.constructor.isBuffer=="function"&&_t.constructor.isBuffer(_t)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(_t){var Tt;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Tt=ArrayBuffer.isView(_t):Tt=_t&&_t.buffer&&isArrayBuffer(_t.buffer),Tt}function isString(_t){return typeof _t=="string"}function isNumber(_t){return typeof _t=="number"}function isObject(_t){return _t!==null&&typeof _t=="object"}function isPlainObject(_t){if(kindOf(_t)!=="object")return!1;var Tt=Object.getPrototypeOf(_t);return Tt===null||Tt===Object.prototype}var isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction(_t){return toString.call(_t)==="[object Function]"}function isStream(_t){return isObject(_t)&&isFunction(_t.pipe)}function isFormData(_t){var Tt="[object FormData]";return _t&&(typeof FormData=="function"&&_t instanceof FormData||toString.call(_t)===Tt||isFunction(_t.toString)&&_t.toString()===Tt)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(_t){return _t.trim?_t.trim():_t.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(_t,Tt){if(!(_t===null||typeof _t>"u"))if(typeof _t!="object"&&(_t=[_t]),isArray(_t))for(var Mt=0,Pt=_t.length;Mt<Pt;Mt++)Tt.call(null,_t[Mt],Mt,_t);else for(var Ft in _t)Object.prototype.hasOwnProperty.call(_t,Ft)&&Tt.call(null,_t[Ft],Ft,_t)}function merge(){var _t={};function Tt(Ft,Dt){isPlainObject(_t[Dt])&&isPlainObject(Ft)?_t[Dt]=merge(_t[Dt],Ft):isPlainObject(Ft)?_t[Dt]=merge({},Ft):isArray(Ft)?_t[Dt]=Ft.slice():_t[Dt]=Ft}for(var Mt=0,Pt=arguments.length;Mt<Pt;Mt++)forEach(arguments[Mt],Tt);return _t}function extend(_t,Tt,Mt){return forEach(Tt,function(Ft,Dt){Mt&&typeof Ft=="function"?_t[Dt]=bind$1(Ft,Mt):_t[Dt]=Ft}),_t}function stripBOM(_t){return _t.charCodeAt(0)===65279&&(_t=_t.slice(1)),_t}function inherits(_t,Tt,Mt,Pt){_t.prototype=Object.create(Tt.prototype,Pt),_t.prototype.constructor=_t,Mt&&Object.assign(_t.prototype,Mt)}function toFlatObject(_t,Tt,Mt){var Pt,Ft,Dt,Nt={};Tt=Tt||{};do{for(Pt=Object.getOwnPropertyNames(_t),Ft=Pt.length;Ft-- >0;)Dt=Pt[Ft],Nt[Dt]||(Tt[Dt]=_t[Dt],Nt[Dt]=!0);_t=Object.getPrototypeOf(_t)}while(_t&&(!Mt||Mt(_t,Tt))&&_t!==Object.prototype);return Tt}function endsWith(_t,Tt,Mt){_t=String(_t),(Mt===void 0||Mt>_t.length)&&(Mt=_t.length),Mt-=Tt.length;var Pt=_t.indexOf(Tt,Mt);return Pt!==-1&&Pt===Mt}function toArray(_t){if(!_t)return null;var Tt=_t.length;if(isUndefined(Tt))return null;for(var Mt=new Array(Tt);Tt-- >0;)Mt[Tt]=_t[Tt];return Mt}var isTypedArray=function(_t){return function(Tt){return _t&&Tt instanceof _t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$b={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,isTypedArray,isFileList},utils$a=utils$b;function encode(_t){return encodeURIComponent(_t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function _t(Tt,Mt,Pt){if(!Mt)return Tt;var Ft;if(Pt)Ft=Pt(Mt);else if(utils$a.isURLSearchParams(Mt))Ft=Mt.toString();else{var Dt=[];utils$a.forEach(Mt,function(zt,Xt){zt===null||typeof zt>"u"||(utils$a.isArray(zt)?Xt=Xt+"[]":zt=[zt],utils$a.forEach(zt,function(Wt){utils$a.isDate(Wt)?Wt=Wt.toISOString():utils$a.isObject(Wt)&&(Wt=JSON.stringify(Wt)),Dt.push(encode(Xt)+"="+encode(Wt))}))}),Ft=Dt.join("&")}if(Ft){var Nt=Tt.indexOf("#");Nt!==-1&&(Tt=Tt.slice(0,Nt)),Tt+=(Tt.indexOf("?")===-1?"?":"&")+Ft}return Tt},utils$9=utils$b;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function _t(Tt,Mt,Pt){return this.handlers.push({fulfilled:Tt,rejected:Mt,synchronous:Pt?Pt.synchronous:!1,runWhen:Pt?Pt.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function _t(Tt){this.handlers[Tt]&&(this.handlers[Tt]=null)};InterceptorManager$1.prototype.forEach=function _t(Tt){utils$9.forEach(this.handlers,function(Pt){Pt!==null&&Tt(Pt)})};var InterceptorManager_1=InterceptorManager$1,utils$8=utils$b,normalizeHeaderName$1=function _t(Tt,Mt){utils$8.forEach(Tt,function(Ft,Dt){Dt!==Mt&&Dt.toUpperCase()===Mt.toUpperCase()&&(Tt[Mt]=Ft,delete Tt[Dt])})},utils$7=utils$b;function AxiosError$2(_t,Tt,Mt,Pt,Ft){Error.call(this),this.message=_t,this.name="AxiosError",Tt&&(this.code=Tt),Mt&&(this.config=Mt),Pt&&(this.request=Pt),Ft&&(this.response=Ft)}utils$7.inherits(AxiosError$2,Error,{toJSON:function _t(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError$2.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(_t){descriptors[_t]={value:_t}});Object.defineProperties(AxiosError$2,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:!0});AxiosError$2.from=function(_t,Tt,Mt,Pt,Ft,Dt){var Nt=Object.create(prototype);return utils$7.toFlatObject(_t,Nt,function(zt){return zt!==Error.prototype}),AxiosError$2.call(Nt,_t.message,Tt,Mt,Pt,Ft),Nt.name=_t.name,Dt&&Object.assign(Nt,Dt),Nt};var AxiosError_1=AxiosError$2,transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$6=utils$b;function toFormData$1(_t,Tt){Tt=Tt||new FormData;var Mt=[];function Pt(Dt){return Dt===null?"":utils$6.isDate(Dt)?Dt.toISOString():utils$6.isArrayBuffer(Dt)||utils$6.isTypedArray(Dt)?typeof Blob=="function"?new Blob([Dt]):Buffer.from(Dt):Dt}function Ft(Dt,Nt){if(utils$6.isPlainObject(Dt)||utils$6.isArray(Dt)){if(Mt.indexOf(Dt)!==-1)throw Error("Circular reference detected in "+Nt);Mt.push(Dt),utils$6.forEach(Dt,function(zt,Xt){if(!utils$6.isUndefined(zt)){var Ht=Nt?Nt+"."+Xt:Xt,Wt;if(zt&&!Nt&&typeof zt=="object"){if(utils$6.endsWith(Xt,"{}"))zt=JSON.stringify(zt);else if(utils$6.endsWith(Xt,"[]")&&(Wt=utils$6.toArray(zt))){Wt.forEach(function(Qt){!utils$6.isUndefined(Qt)&&Tt.append(Ht,Pt(Qt))});return}}Ft(zt,Ht)}}),Mt.pop()}else Tt.append(Nt,Pt(Dt))}return Ft(_t),Tt}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var _t=AxiosError_1;return settle=function(Mt,Pt,Ft){var Dt=Ft.config.validateStatus;!Ft.status||!Dt||Dt(Ft.status)?Mt(Ft):Pt(new _t("Request failed with status code "+Ft.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(Ft.status/100)-4],Ft.config,Ft.request,Ft))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var _t=utils$b;return cookies=_t.isStandardBrowserEnv()?function(){return{write:function(Pt,Ft,Dt,Nt,Vt,zt){var Xt=[];Xt.push(Pt+"="+encodeURIComponent(Ft)),_t.isNumber(Dt)&&Xt.push("expires="+new Date(Dt).toGMTString()),_t.isString(Nt)&&Xt.push("path="+Nt),_t.isString(Vt)&&Xt.push("domain="+Vt),zt===!0&&Xt.push("secure"),document.cookie=Xt.join("; ")},read:function(Pt){var Ft=document.cookie.match(new RegExp("(^|;\\s*)("+Pt+")=([^;]*)"));return Ft?decodeURIComponent(Ft[3]):null},remove:function(Pt){this.write(Pt,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function _t(Tt){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(Tt)},combineURLs$1=function _t(Tt,Mt){return Mt?Tt.replace(/\/+$/,"")+"/"+Mt.replace(/^\/+/,""):Tt},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function _t(Tt,Mt){return Tt&&!isAbsoluteURL(Mt)?combineURLs(Tt,Mt):Mt},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var _t=utils$b,Tt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(Pt){var Ft={},Dt,Nt,Vt;return Pt&&_t.forEach(Pt.split(`
`),function(Xt){if(Vt=Xt.indexOf(":"),Dt=_t.trim(Xt.substr(0,Vt)).toLowerCase(),Nt=_t.trim(Xt.substr(Vt+1)),Dt){if(Ft[Dt]&&Tt.indexOf(Dt)>=0)return;Dt==="set-cookie"?Ft[Dt]=(Ft[Dt]?Ft[Dt]:[]).concat([Nt]):Ft[Dt]=Ft[Dt]?Ft[Dt]+", "+Nt:Nt}}),Ft},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var _t=utils$b;return isURLSameOrigin=_t.isStandardBrowserEnv()?function(){var Mt=/(msie|trident)/i.test(navigator.userAgent),Pt=document.createElement("a"),Ft;function Dt(Nt){var Vt=Nt;return Mt&&(Pt.setAttribute("href",Vt),Vt=Pt.href),Pt.setAttribute("href",Vt),{href:Pt.href,protocol:Pt.protocol?Pt.protocol.replace(/:$/,""):"",host:Pt.host,search:Pt.search?Pt.search.replace(/^\?/,""):"",hash:Pt.hash?Pt.hash.replace(/^#/,""):"",hostname:Pt.hostname,port:Pt.port,pathname:Pt.pathname.charAt(0)==="/"?Pt.pathname:"/"+Pt.pathname}}return Ft=Dt(window.location.href),function(Vt){var zt=_t.isString(Vt)?Dt(Vt):Vt;return zt.protocol===Ft.protocol&&zt.host===Ft.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var _t=AxiosError_1,Tt=utils$b;function Mt(Pt){_t.call(this,Pt==null?"canceled":Pt,_t.ERR_CANCELED),this.name="CanceledError"}return Tt.inherits(Mt,_t,{__CANCEL__:!0}),CanceledError_1=Mt,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(Tt){var Mt=/^([-+\w]{1,25})(:?\/\/|:)/.exec(Tt);return Mt&&Mt[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var _t=utils$b,Tt=requireSettle(),Mt=requireCookies(),Pt=buildURL$1,Ft=buildFullPath$1,Dt=requireParseHeaders(),Nt=requireIsURLSameOrigin(),Vt=transitional,zt=AxiosError_1,Xt=requireCanceledError(),Ht=requireParseProtocol();return xhr=function(Qt){return new Promise(function(Kt,er){var Yt=Qt.data,rr=Qt.headers,ir=Qt.responseType,nr;function ar(){Qt.cancelToken&&Qt.cancelToken.unsubscribe(nr),Qt.signal&&Qt.signal.removeEventListener("abort",nr)}_t.isFormData(Yt)&&_t.isStandardBrowserEnv()&&delete rr["Content-Type"];var or=new XMLHttpRequest;if(Qt.auth){var ur=Qt.auth.username||"",dr=Qt.auth.password?unescape(encodeURIComponent(Qt.auth.password)):"";rr.Authorization="Basic "+btoa(ur+":"+dr)}var hr=Ft(Qt.baseURL,Qt.url);or.open(Qt.method.toUpperCase(),Pt(hr,Qt.params,Qt.paramsSerializer),!0),or.timeout=Qt.timeout;function gr(){if(!!or){var wr="getAllResponseHeaders"in or?Dt(or.getAllResponseHeaders()):null,br=!ir||ir==="text"||ir==="json"?or.responseText:or.response,_r={data:br,status:or.status,statusText:or.statusText,headers:wr,config:Qt,request:or};Tt(function(Ar){Kt(Ar),ar()},function(Ar){er(Ar),ar()},_r),or=null}}if("onloadend"in or?or.onloadend=gr:or.onreadystatechange=function(){!or||or.readyState!==4||or.status===0&&!(or.responseURL&&or.responseURL.indexOf("file:")===0)||setTimeout(gr)},or.onabort=function(){!or||(er(new zt("Request aborted",zt.ECONNABORTED,Qt,or)),or=null)},or.onerror=function(){er(new zt("Network Error",zt.ERR_NETWORK,Qt,or,or)),or=null},or.ontimeout=function(){var br=Qt.timeout?"timeout of "+Qt.timeout+"ms exceeded":"timeout exceeded",_r=Qt.transitional||Vt;Qt.timeoutErrorMessage&&(br=Qt.timeoutErrorMessage),er(new zt(br,_r.clarifyTimeoutError?zt.ETIMEDOUT:zt.ECONNABORTED,Qt,or)),or=null},_t.isStandardBrowserEnv()){var pr=(Qt.withCredentials||Nt(hr))&&Qt.xsrfCookieName?Mt.read(Qt.xsrfCookieName):void 0;pr&&(rr[Qt.xsrfHeaderName]=pr)}"setRequestHeader"in or&&_t.forEach(rr,function(br,_r){typeof Yt>"u"&&_r.toLowerCase()==="content-type"?delete rr[_r]:or.setRequestHeader(_r,br)}),_t.isUndefined(Qt.withCredentials)||(or.withCredentials=!!Qt.withCredentials),ir&&ir!=="json"&&(or.responseType=Qt.responseType),typeof Qt.onDownloadProgress=="function"&&or.addEventListener("progress",Qt.onDownloadProgress),typeof Qt.onUploadProgress=="function"&&or.upload&&or.upload.addEventListener("progress",Qt.onUploadProgress),(Qt.cancelToken||Qt.signal)&&(nr=function(wr){!or||(er(!wr||wr&&wr.type?new Xt:wr),or.abort(),or=null)},Qt.cancelToken&&Qt.cancelToken.subscribe(nr),Qt.signal&&(Qt.signal.aborted?nr():Qt.signal.addEventListener("abort",nr))),Yt||(Yt=null);var mr=Ht(hr);if(mr&&["http","https","file"].indexOf(mr)===-1){er(new zt("Unsupported protocol "+mr+":",zt.ERR_BAD_REQUEST,Qt));return}or.send(Yt)})},xhr}var _null,hasRequired_null;function require_null(){return hasRequired_null||(hasRequired_null=1,_null=null),_null}var utils$5=utils$b,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=AxiosError_1,transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(_t,Tt){!utils$5.isUndefined(_t)&&utils$5.isUndefined(_t["Content-Type"])&&(_t["Content-Type"]=Tt)}function getDefaultAdapter(){var _t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(_t=requireXhr()),_t}function stringifySafely(_t,Tt,Mt){if(utils$5.isString(_t))try{return(Tt||JSON.parse)(_t),utils$5.trim(_t)}catch(Pt){if(Pt.name!=="SyntaxError")throw Pt}return(Mt||JSON.stringify)(_t)}var defaults$3={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function _t(Tt,Mt){if(normalizeHeaderName(Mt,"Accept"),normalizeHeaderName(Mt,"Content-Type"),utils$5.isFormData(Tt)||utils$5.isArrayBuffer(Tt)||utils$5.isBuffer(Tt)||utils$5.isStream(Tt)||utils$5.isFile(Tt)||utils$5.isBlob(Tt))return Tt;if(utils$5.isArrayBufferView(Tt))return Tt.buffer;if(utils$5.isURLSearchParams(Tt))return setContentTypeIfUnset(Mt,"application/x-www-form-urlencoded;charset=utf-8"),Tt.toString();var Pt=utils$5.isObject(Tt),Ft=Mt&&Mt["Content-Type"],Dt;if((Dt=utils$5.isFileList(Tt))||Pt&&Ft==="multipart/form-data"){var Nt=this.env&&this.env.FormData;return toFormData(Dt?{"files[]":Tt}:Tt,Nt&&new Nt)}else if(Pt||Ft==="application/json")return setContentTypeIfUnset(Mt,"application/json"),stringifySafely(Tt);return Tt}],transformResponse:[function _t(Tt){var Mt=this.transitional||defaults$3.transitional,Pt=Mt&&Mt.silentJSONParsing,Ft=Mt&&Mt.forcedJSONParsing,Dt=!Pt&&this.responseType==="json";if(Dt||Ft&&utils$5.isString(Tt)&&Tt.length)try{return JSON.parse(Tt)}catch(Nt){if(Dt)throw Nt.name==="SyntaxError"?AxiosError$1.from(Nt,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):Nt}return Tt}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require_null()},validateStatus:function _t(Tt){return Tt>=200&&Tt<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$5.forEach(["delete","get","head"],function _t(Tt){defaults$3.headers[Tt]={}});utils$5.forEach(["post","put","patch"],function _t(Tt){defaults$3.headers[Tt]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$4=utils$b,defaults$2=defaults_1,transformData$1=function _t(Tt,Mt,Pt){var Ft=this||defaults$2;return utils$4.forEach(Pt,function(Nt){Tt=Nt.call(Ft,Tt,Mt)}),Tt},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(Tt){return!!(Tt&&Tt.__CANCEL__)}),isCancel$1}var utils$3=utils$b,transformData=transformData$1,isCancel=requireIsCancel(),defaults$1=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested(_t){if(_t.cancelToken&&_t.cancelToken.throwIfRequested(),_t.signal&&_t.signal.aborted)throw new CanceledError}var dispatchRequest$1=function _t(Tt){throwIfCancellationRequested(Tt),Tt.headers=Tt.headers||{},Tt.data=transformData.call(Tt,Tt.data,Tt.headers,Tt.transformRequest),Tt.headers=utils$3.merge(Tt.headers.common||{},Tt.headers[Tt.method]||{},Tt.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(Ft){delete Tt.headers[Ft]});var Mt=Tt.adapter||defaults$1.adapter;return Mt(Tt).then(function(Ft){return throwIfCancellationRequested(Tt),Ft.data=transformData.call(Tt,Ft.data,Ft.headers,Tt.transformResponse),Ft},function(Ft){return isCancel(Ft)||(throwIfCancellationRequested(Tt),Ft&&Ft.response&&(Ft.response.data=transformData.call(Tt,Ft.response.data,Ft.response.headers,Tt.transformResponse))),Promise.reject(Ft)})},utils$2=utils$b,mergeConfig$2=function _t(Tt,Mt){Mt=Mt||{};var Pt={};function Ft(Ht,Wt){return utils$2.isPlainObject(Ht)&&utils$2.isPlainObject(Wt)?utils$2.merge(Ht,Wt):utils$2.isPlainObject(Wt)?utils$2.merge({},Wt):utils$2.isArray(Wt)?Wt.slice():Wt}function Dt(Ht){if(utils$2.isUndefined(Mt[Ht])){if(!utils$2.isUndefined(Tt[Ht]))return Ft(void 0,Tt[Ht])}else return Ft(Tt[Ht],Mt[Ht])}function Nt(Ht){if(!utils$2.isUndefined(Mt[Ht]))return Ft(void 0,Mt[Ht])}function Vt(Ht){if(utils$2.isUndefined(Mt[Ht])){if(!utils$2.isUndefined(Tt[Ht]))return Ft(void 0,Tt[Ht])}else return Ft(void 0,Mt[Ht])}function zt(Ht){if(Ht in Mt)return Ft(Tt[Ht],Mt[Ht]);if(Ht in Tt)return Ft(void 0,Tt[Ht])}var Xt={url:Nt,method:Nt,data:Nt,baseURL:Vt,transformRequest:Vt,transformResponse:Vt,paramsSerializer:Vt,timeout:Vt,timeoutMessage:Vt,withCredentials:Vt,adapter:Vt,responseType:Vt,xsrfCookieName:Vt,xsrfHeaderName:Vt,onUploadProgress:Vt,onDownloadProgress:Vt,decompress:Vt,maxContentLength:Vt,maxBodyLength:Vt,beforeRedirect:Vt,transport:Vt,httpAgent:Vt,httpsAgent:Vt,cancelToken:Vt,socketPath:Vt,responseEncoding:Vt,validateStatus:zt};return utils$2.forEach(Object.keys(Tt).concat(Object.keys(Mt)),function(Wt){var Qt=Xt[Wt]||Dt,Zt=Qt(Wt);utils$2.isUndefined(Zt)&&Qt!==zt||(Pt[Wt]=Zt)}),Pt},data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var VERSION=requireData().version,AxiosError=AxiosError_1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(_t,Tt){validators$1[_t]=function(Pt){return typeof Pt===_t||"a"+(Tt<1?"n ":" ")+_t}});var deprecatedWarnings={};validators$1.transitional=function _t(Tt,Mt,Pt){function Ft(Dt,Nt){return"[Axios v"+VERSION+"] Transitional option '"+Dt+"'"+Nt+(Pt?". "+Pt:"")}return function(Dt,Nt,Vt){if(Tt===!1)throw new AxiosError(Ft(Nt," has been removed"+(Mt?" in "+Mt:"")),AxiosError.ERR_DEPRECATED);return Mt&&!deprecatedWarnings[Nt]&&(deprecatedWarnings[Nt]=!0,console.warn(Ft(Nt," has been deprecated since v"+Mt+" and will be removed in the near future"))),Tt?Tt(Dt,Nt,Vt):!0}};function assertOptions(_t,Tt,Mt){if(typeof _t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var Pt=Object.keys(_t),Ft=Pt.length;Ft-- >0;){var Dt=Pt[Ft],Nt=Tt[Dt];if(Nt){var Vt=_t[Dt],zt=Vt===void 0||Nt(Vt,Dt,_t);if(zt!==!0)throw new AxiosError("option "+Dt+" must be "+zt,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(Mt!==!0)throw new AxiosError("Unknown option "+Dt,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$1=utils$b,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1(_t){this.defaults=_t,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function _t(Tt,Mt){typeof Tt=="string"?(Mt=Mt||{},Mt.url=Tt):Mt=Tt||{},Mt=mergeConfig$1(this.defaults,Mt),Mt.method?Mt.method=Mt.method.toLowerCase():this.defaults.method?Mt.method=this.defaults.method.toLowerCase():Mt.method="get";var Pt=Mt.transitional;Pt!==void 0&&validator.assertOptions(Pt,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var Ft=[],Dt=!0;this.interceptors.request.forEach(function(Zt){typeof Zt.runWhen=="function"&&Zt.runWhen(Mt)===!1||(Dt=Dt&&Zt.synchronous,Ft.unshift(Zt.fulfilled,Zt.rejected))});var Nt=[];this.interceptors.response.forEach(function(Zt){Nt.push(Zt.fulfilled,Zt.rejected)});var Vt;if(!Dt){var zt=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(zt,Ft),zt=zt.concat(Nt),Vt=Promise.resolve(Mt);zt.length;)Vt=Vt.then(zt.shift(),zt.shift());return Vt}for(var Xt=Mt;Ft.length;){var Ht=Ft.shift(),Wt=Ft.shift();try{Xt=Ht(Xt)}catch(Qt){Wt(Qt);break}}try{Vt=dispatchRequest(Xt)}catch(Qt){return Promise.reject(Qt)}for(;Nt.length;)Vt=Vt.then(Nt.shift(),Nt.shift());return Vt};Axios$1.prototype.getUri=function _t(Tt){Tt=mergeConfig$1(this.defaults,Tt);var Mt=buildFullPath(Tt.baseURL,Tt.url);return buildURL(Mt,Tt.params,Tt.paramsSerializer)};utils$1.forEach(["delete","get","head","options"],function _t(Tt){Axios$1.prototype[Tt]=function(Mt,Pt){return this.request(mergeConfig$1(Pt||{},{method:Tt,url:Mt,data:(Pt||{}).data}))}});utils$1.forEach(["post","put","patch"],function _t(Tt){function Mt(Pt){return function(Dt,Nt,Vt){return this.request(mergeConfig$1(Vt||{},{method:Tt,headers:Pt?{"Content-Type":"multipart/form-data"}:{},url:Dt,data:Nt}))}}Axios$1.prototype[Tt]=Mt(),Axios$1.prototype[Tt+"Form"]=Mt(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var _t=requireCanceledError();function Tt(Mt){if(typeof Mt!="function")throw new TypeError("executor must be a function.");var Pt;this.promise=new Promise(function(Nt){Pt=Nt});var Ft=this;this.promise.then(function(Dt){if(!!Ft._listeners){var Nt,Vt=Ft._listeners.length;for(Nt=0;Nt<Vt;Nt++)Ft._listeners[Nt](Dt);Ft._listeners=null}}),this.promise.then=function(Dt){var Nt,Vt=new Promise(function(zt){Ft.subscribe(zt),Nt=zt}).then(Dt);return Vt.cancel=function(){Ft.unsubscribe(Nt)},Vt},Mt(function(Nt){Ft.reason||(Ft.reason=new _t(Nt),Pt(Ft.reason))})}return Tt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Tt.prototype.subscribe=function(Pt){if(this.reason){Pt(this.reason);return}this._listeners?this._listeners.push(Pt):this._listeners=[Pt]},Tt.prototype.unsubscribe=function(Pt){if(!!this._listeners){var Ft=this._listeners.indexOf(Pt);Ft!==-1&&this._listeners.splice(Ft,1)}},Tt.source=function(){var Pt,Ft=new Tt(function(Nt){Pt=Nt});return{token:Ft,cancel:Pt}},CancelToken_1=Tt,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(Tt){return function(Pt){return Tt.apply(null,Pt)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var _t=utils$b;return isAxiosError=function(Mt){return _t.isObject(Mt)&&Mt.isAxiosError===!0},isAxiosError}var utils=utils$b,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(_t){var Tt=new Axios(_t),Mt=bind(Axios.prototype.request,Tt);return utils.extend(Mt,Axios.prototype,Tt),utils.extend(Mt,Tt),Mt.create=function(Ft){return createInstance(mergeConfig(_t,Ft))},Mt}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.CanceledError=requireCanceledError();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.VERSION=requireData().version;axios$1.toFormData=toFormData_1;axios$1.AxiosError=AxiosError_1;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function _t(Tt){return Promise.all(Tt)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;(function(_t){_t.exports=axios$2.exports})(axios$3);const axios=getDefaultExportFromCjs(axios$3.exports),v="5.5.1",fr=60,ip=0,op=841,w=81,h=81,nm="icn-loader-and-success",ddd=0,assets=[{id:"comp_0",layers:[{ddd:0,ind:1,ty:3,nm:"x-parent",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:1},o:{x:.333,y:0},t:80,s:[40.5,40.5,0],to:[-.292,0,0],ti:[-.292,0,0]},{i:{x:.667,y:1},o:{x:.333,y:0},t:105,s:[38.75,40.5,0],to:[.292,0,0],ti:[0,0,0]},{i:{x:.667,y:1},o:{x:.333,y:0},t:115,s:[42.25,40.5,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:1},o:{x:.333,y:0},t:125,s:[38.75,40.5,0],to:[0,0,0],ti:[-.125,0,0]},{i:{x:.667,y:1},o:{x:.333,y:0},t:135,s:[42.25,40.5,0],to:[.125,0,0],ti:[.125,0,0]},{i:{x:.667,y:1},o:{x:.167,y:0},t:145,s:[39.5,40.5,0],to:[-.125,0,0],ti:[-.167,0,0]},{i:{x:.833,y:1},o:{x:.167,y:0},t:155,s:[41.5,40.5,0],to:[.167,0,0],ti:[.167,0,0]},{t:162.5,s:[40.5,40.5,0]}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,ip:0,op:1800,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"dash-3",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[9.146,0,0],ix:2},a:{a:0,k:[11.358,11.258,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[10.357,-10.258],[-10.357,10.258]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.8,.8,.8,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[11.358,11.258],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.302],y:[1]},o:{x:[.333],y:[0]},t:105,s:[100]},{t:130,s:[0]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:105,s:[100]},{t:130,s:[0]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1800,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"dash-1",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[-2.517,7.282,0],ix:2},a:{a:0,k:[13.774,13.874,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[12.775,12.874],[-12.775,-12.874]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.8,.8,.8,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[13.774,13.874],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.302],y:[1]},o:{x:[.333],y:[0]},t:80,s:[100]},{t:105,s:[0]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:80,s:[100]},{t:105,s:[0]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1800,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"cross-1",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[13.5,13.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[12,12],[-12,-12]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.81568627451,.007843137255,.105882352941,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[13.5,13.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:100,ix:1},e:{a:1,k:[{i:{x:[.341],y:[1]},o:{x:[.371],y:[0]},t:72.5,s:[100]},{t:132.5,s:[0]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1800,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"cross-2",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[0,0,0],ix:2},a:{a:0,k:[13.5,13.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[12,-12],[-12,12]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.81568627451,.007843137255,.105882352941,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[13.5,13.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:100,ix:1},e:{a:1,k:[{i:{x:[.341],y:[1]},o:{x:[.371],y:[0]},t:87.5,s:[100]},{t:147.5,s:[0]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1800,st:0,bm:0},{ddd:0,ind:6,ty:4,nm:"circle-red",sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:47.5,s:[0]},{t:80,s:[100]}],ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:120,s:[360]}],ix:10},p:{a:0,k:[40.5,40.5,0],ix:2},a:{a:0,k:[37.5,37.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-19.054,0],[0,-19.054],[19.054,0],[0,19.054]],o:[[19.054,0],[0,19.054],[-19.054,0],[0,-19.054]],v:[[0,-34.5],[34.5,0],[0,34.5],[-34.5,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.815686285496,.007843137719,.105882354081,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[37.5,37.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.123],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:120,s:[100]}],ix:1},e:{a:0,k:0,ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1800,st:0,bm:0}]},{id:"comp_1",layers:[{ddd:0,ind:1,ty:4,nm:"circle-blue",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:120,s:[360]}],ix:10},p:{a:0,k:[40.5,40.5,0],ix:2},a:{a:0,k:[37.5,37.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-19.054,0],[0,-19.054],[19.054,0],[0,19.054]],o:[[19.054,0],[0,19.054],[-19.054,0],[0,-19.054]],v:[[0,-34.5],[34.5,0],[0,34.5],[-34.5,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.187999994615,.616000007181,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[37.5,37.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.123],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:120,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.262],y:[1]},o:{x:[.581],y:[0]},t:0,s:[0]},{t:120,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1800,st:0,bm:0}]},{id:"comp_2",layers:[{ddd:0,ind:1,ty:3,nm:"tick-parent",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[40.5,40.5,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.576,.576,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:87.5,s:[90,90,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.423,.423,.333],y:[0,0,0]},t:130,s:[108,108,100]},{t:147.5,s:[100,100,100]}],ix:6}},ao:0,ip:0,op:1800,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"dash-1",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[-11.053,15.359,0],ix:2},a:{a:0,k:[4.302,4.302,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[3.303,3.302],[-3.303,-3.302]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.8,.8,.8,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[4.302,4.302],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.302],y:[1]},o:{x:[.333],y:[0]},t:87.5,s:[100]},{t:115,s:[0]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:87.5,s:[100]},{t:115,s:[0]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1800,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"dash-2",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[11.07,3.502,0],ix:2},a:{a:0,k:[11.358,11.257,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[10.357,-10.258],[-10.357,10.258]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.8,.8,.8,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[11.358,11.257],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.302],y:[1]},o:{x:[.333],y:[0]},t:102.5,s:[100]},{t:125,s:[0]}],ix:1},e:{a:1,k:[{i:{x:[.667],y:[1]},o:{x:[.333],y:[0]},t:102.5,s:[100]},{t:125,s:[0]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1800,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"tick",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[-.333,1.799,0],ix:2},a:{a:0,k:[17.739,13.258,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[14.739,-10.258],[-5.976,10.258],[-14.739,1.494]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.187999994615,.616000007181,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[17.739,13.258],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.185],y:[1]},o:{x:[.324],y:[0]},t:87.5,s:[100]},{t:147.5,s:[0]}],ix:1},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1800,st:0,bm:0},{ddd:0,ind:5,ty:4,nm:"circle-blue",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:120,s:[360]}],ix:10},p:{a:0,k:[40.5,40.5,0],ix:2},a:{a:0,k:[37.5,37.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-19.054,0],[0,-19.054],[19.054,0],[0,19.054]],o:[[19.054,0],[0,19.054],[-19.054,0],[0,-19.054]],v:[[0,-34.5],[34.5,0],[0,34.5],[-34.5,0]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.187999994615,.616000007181,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:2,lj:2,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[37.5,37.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.123],y:[1]},o:{x:[.333],y:[0]},t:0,s:[0]},{t:120,s:[100]}],ix:1},e:{a:0,k:0,ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:1800,st:0,bm:0}]}],layers=[{ddd:0,ind:1,ty:0,nm:"icn-failed",refId:"comp_0",sr:1,ks:{o:{a:1,k:[{i:{x:[.999],y:[1]},o:{x:[.42],y:[0]},t:820,s:[100]},{t:839,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[40.5,40.5,0],ix:2},a:{a:0,k:[40.5,40.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:81,h:81,ip:657,op:847,st:657,bm:0},{ddd:0,ind:2,ty:0,nm:"icn-loader",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[40.5,40.5,0],ix:2},a:{a:0,k:[40.5,40.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:81,h:81,ip:537,op:657,st:537,bm:0},{ddd:0,ind:3,ty:0,nm:"icn-loader",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[40.5,40.5,0],ix:2},a:{a:0,k:[40.5,40.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:81,h:81,ip:418,op:538,st:418,bm:0},{ddd:0,ind:4,ty:0,nm:"icn-success",refId:"comp_2",sr:1,ks:{o:{a:1,k:[{i:{x:[.999],y:[1]},o:{x:[.42],y:[0]},t:397,s:[100]},{t:416,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[40.5,40.5,0],ix:2},a:{a:0,k:[40.5,40.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:81,h:81,ip:238,op:423,st:238,bm:0},{ddd:0,ind:5,ty:0,nm:"icn-loader",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[40.5,40.5,0],ix:2},a:{a:0,k:[40.5,40.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:81,h:81,ip:0,op:120,st:0,bm:0},{ddd:0,ind:6,ty:0,nm:"icn-loader",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[40.5,40.5,0],ix:2},a:{a:0,k:[40.5,40.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,w:81,h:81,ip:119,op:239,st:119,bm:0}],markers=[],loading={v,fr,ip,op,w,h,nm,ddd,assets,layers,markers};function UploadFiles(){const[_t,Tt]=react.exports.useState(!1);react.exports.useState(!1);const Mt=react.exports.useRef(null),[Pt,Ft]=react.exports.useState();function Dt(Vt){Mt.current.click()}async function Nt(Vt){const zt=Vt.target.files&&Vt.target.files[0];if(!zt)return;const Xt=new FormData;Xt.append("file",zt);try{const Ht=await axios({method:"post",url:"http://127.0.0.1:8000/upload",data:Xt,headers:{"Content-Type":"multipart/form-data"}})}catch(Ht){console.error(Ht)}Vt.target.value=null}return jsx("div",{className:"w-full h-[calc(100vh_-_9.5rem)] flex justify-center items-center",children:jsxs("div",{className:"w-9/12 h-5/6 bg-white rounded-lg shadow-lg shadow-gray-300 font-poppins flex flex-col",children:[jsxs("div",{className:"flex flex-grow",children:[jsxs("div",{className:"w-2/5 m-16",children:[jsx("h2",{className:"font-semibold text-xl",children:"Upload GPA 3D"}),jsx("p",{className:" text-[#5C5C5C] my-5",children:"Sebelum mengupload file . harap perhatikanlah ketentuan file dibawah ini"}),jsxs("div",{className:"flex flex-col divide-y mt-10 space-y-2",children:[jsxs("div",{className:"flex items-center space-x-3 py-3",children:[jsx(FaGlobe,{className:"w-6 h-6 text-[#12519E]"}),jsx("h2",{className:"text-[#717171]",children:"Sudah dilakukan geo-referensi"})]}),jsxs("div",{className:"items-center flex space-x-3 py-3",children:[jsx(BiTargetLock,{className:"w-6 h-6 text-[#12519E]"}),jsx("h2",{className:"text-[#717171]",children:"Menggunakan sistem koordinat wgs 1984"})]}),jsxs("div",{className:"flex items-center space-x-3 py-3",children:[jsx(BsFileEarmarkText,{className:"w-7 h-7 text-[#12519E]"}),jsx("h2",{className:"text-[#717171]",children:"Unggah model 3d GPA berbasis BIM dalam format .SKP atau .RVT"})]}),jsxs("div",{className:"flex items-center space-x-3 py-3",children:[jsx(FaPencilAlt,{className:"w-6 h-6 text-[#12519E]"}),jsx("h2",{className:"text-[#717171]",children:"Ketentuan lainnya"})]})]})]}),jsx("div",{className:"flex-auto flex m-16",children:jsx("div",{className:"rounded-md bg-white/40 w-full border border-[#0161D5] flex flex-col justify-center items-center",children:_t?jsx("div",{children:jsx(Player,{src:loading,loop:!0,autoplay:!0,className:" w-9 h-9"})}):jsxs(Fragment$1,{children:[jsx(FaCloudUploadAlt,{className:"w-20 h-20 text-sky-500"}),jsxs("div",{className:"font-poppins text-xs my-5",children:[jsxs("p",{className:"text-[#37474F]",children:[jsx("span",{className:"font-bold",children:"Taruh file .SKP atau .RVT disini"})," ","atau klik untuk menggunggah"]}),jsx("p",{className:"text-[#717171] text-center",children:"Maximum file size 100 MB"})]}),jsx("button",{onClick:Dt,className:"rounded-xl mt-12 border-[#BDBDBD] border p-2 px-5 font-poppins text-[#12519E] font-semibold",children:"Upload +"}),jsx("input",{type:"file",ref:Mt,onChange:Nt,className:"hidden",accept:".skp,.rvt"})]})})})]}),jsxs("div",{className:"flex items-center mt-auto w-full justify-end space-x-4 font-poppins font-semibold text-xs px-16 py-4",children:[jsx("button",{className:"border border-[#BDBDBD] rounded-lg py-2 w-28 text-[#757575]",children:"Batal"}),jsx("button",{className:`rounded-lg py-2 w-28 text-[#757575] border border-[#EEEEEE] bg-[#EEEEEE] ${Pt?"bg-blue-300":""}`,children:"Selanjutnya"})]})]})})}function App(){return jsxs(Routes,{children:[jsx(Route,{path:"/",element:jsx(Home,{})}),jsxs(Route,{path:"/submission",element:jsx(SubmitLayout,{}),children:[jsx(Route,{index:!0,element:jsx(SubmissionPage,{})}),jsx(Route,{path:"/submission/2",element:jsx(SearchPersil,{})}),jsx(Route,{path:"/submission/3",element:jsx(UploadFiles,{})})]})]})}const index="";client.createRoot(document.getElementById("root")).render(jsx(BrowserRouter,{children:jsx(App,{})}));export{e$2a as $,n$2z as A,e$x as B,o$1J as C,l$B as D,f$k as E,h$v as F,r$u as G,o$1K as H,n$2K as I,r$1v as J,o$2f as K,c$3r as L,M$d as M,L$y as N,e$n as O,A$B as P,r$1H as Q,l$2e as R,h$1w as S,p$A as T,U$v as U,m$o as V,o$1H as W,i$1h as X,m$_ as Y,a$2B as Z,e$1m as _,s$2p as a,t$r as a$,d$25 as a0,n$2L as a1,y$1E as a2,g$o as a3,c$2D as a4,s$1W as a5,q$l as a6,u$1q as a7,j$Z as a8,f$1p as a9,$$8 as aA,fe$2 as aB,ie$2 as aC,L$h as aD,f$1j as aE,q$i as aF,i$t as aG,z$i as aH,E$C as aI,e$1v as aJ,c$2U as aK,s$1P as aL,l$o as aM,s$1E as aN,l$1T as aO,k$y as aP,w$18 as aQ,s$1Q as aR,f$1 as aS,g$2 as aT,u$1N as aU,l$27 as aV,O$d as aW,j$p as aX,N$b as aY,r$t as aZ,i$B as a_,St as aa,i$24 as ab,nt as ac,s$z as ad,Gt as ae,n$N as af,$$3 as ag,bt as ah,pt as ai,a$K as aj,Rt as ak,__vitePreload as al,u$1P as am,O$z as an,It as ao,R$x as ap,u$1C as aq,v$V as ar,v$U as as,X$5 as at,t$13 as au,c$2R as av,e$1H as aw,O$5 as ax,U$3 as ay,y$1q as az,a$30 as b,H$9 as b$,m$2e as b0,t$2d as b1,n$Y as b2,h$C as b3,o$F as b4,a$V as b5,z$8 as b6,i$R as b7,e$G as b8,o$1r as b9,i$1_ as bA,d$X as bB,r$H as bC,s$O as bD,y$A as bE,p$3C as bF,e$W as bG,i$2h as bH,r$1C as bI,j$u as bJ,e$X as bK,l$1b as bL,t$T as bM,ne$2 as bN,d$1M as bO,W$6 as bP,ce$2 as bQ,ee$3 as bR,e$12 as bS,be$1 as bT,me$2 as bU,m$U as bV,v$19 as bW,A$G as bX,d$L as bY,f$l as bZ,b$i as b_,e$29 as ba,M$s as bb,e$1y as bc,f$X as bd,m$1E as be,c$2X as bf,l$2f as bg,D$D as bh,s$10 as bi,k$z as bj,r$T as bk,s$1a as bl,h$1t as bm,i$1v as bn,e$v as bo,we$1 as bp,te$3 as bq,o$1v as br,f$t as bs,e$15 as bt,c$1s as bu,U$f as bv,j$s as bw,p$1x as bx,B$q as by,j$10 as bz,s$2r as c,b$17 as c$,D$i as c0,d$1g as c1,n$1I as c2,e$17 as c3,s$u as c4,E$M as c5,z$p as c6,e$1s as c7,a$2M as c8,q$1 as c9,l$1u as cA,t$14 as cB,c$24 as cC,x$t as cD,M$K as cE,d$15 as cF,x$s as cG,r$R as cH,G$q as cI,S$o as cJ,K$7 as cK,a$1x as cL,y$1M as cM,m$25 as cN,x$V as cO,i$12 as cP,y$X as cQ,o$2d as cR,l$W as cS,o$K as cT,S$g as cU,S$q as cV,p$1$ as cW,a$2J as cX,s$2q as cY,Ke as cZ,E$K as c_,C$3 as ca,B$1 as cb,v$8 as cc,s$1_ as cd,c$3m as ce,i$1D as cf,o$11 as cg,n$1G as ch,o$1y as ci,p$28 as cj,C$i as ck,a$1J as cl,X$c as cm,nt$1 as cn,s$23 as co,l$2v as cp,j$11 as cq,L$i as cr,g$$ as cs,o$1k as ct,n$2w as cu,n$1B as cv,b$H as cw,d$19 as cx,S$P as cy,i$2A as cz,c$3q as d,U$r as d$,m$O as d0,l$2m as d1,w$q as d2,Ut as d3,j$_ as d4,fn as d5,rn as d6,proxyCustomElement as d7,H$c as d8,createEvent as d9,m$26 as dA,_$B as dB,j$17 as dC,u$1m as dD,l$v as dE,w$p as dF,y$C as dG,g$y as dH,y$1o as dI,I$y as dJ,r$1I as dK,a$2t as dL,j$R as dM,A$r as dN,V$m as dO,N$q as dP,_$s as dQ,g$15 as dR,F$t as dS,de$4 as dT,j$U as dU,L$s as dV,S$w as dW,B$m as dX,t$U as dY,p$1A as dZ,t$1V as d_,h$12 as da,Host as db,forceUpdate as dc,Build as dd,getAssetPath as de,Fragment as df,t$F as dg,f$1h as dh,w$U as di,M$L as dj,c$2u as dk,a$2S as dl,m$1T as dm,m$1R as dn,R$r as dp,s$c as dq,h$t as dr,p$D as ds,r$o as dt,E$G as du,a$e as dv,p$3q as dw,n$2I as dx,w$X as dy,a$2C as dz,a$32 as e,p$1h as e$,d$1O as e0,c$T as e1,M$H as e2,en as e3,tn as e4,An as e5,i$1P as e6,E$x as e7,s$1u as e8,c$2b as e9,p$3d as eA,o$1O as eB,l$1N as eC,j$L as eD,r$1r as eE,r$s as eF,a$1e as eG,v$r as eH,p$Y as eI,z$b as eJ,e$C as eK,e$1f as eL,O$l as eM,n$1Q as eN,s$1y as eO,v$N as eP,n$2W as eQ,e$1b as eR,y$1Q as eS,z$z as eT,y$1C as eU,Z$c as eV,F$x as eW,J$j as eX,t$2b as eY,Q$e as eZ,o$1V as e_,S$x as ea,on as eb,mt as ec,g$1d as ed,s$24 as ee,v$$ as ef,I$D as eg,n$2D as eh,Bt as ei,a$29 as ej,D$r as ek,f$1m as el,f$1g as em,k$t as en,r$g as eo,i$2i as ep,v$13 as eq,o$1U as er,t$1F as es,o$_ as et,e$13 as eu,i$l as ev,r$1K as ew,un as ex,s$21 as ey,r$1F as ez,s$2i as f,a$s as f$,c$1i as f0,v$u as f1,O$e as f2,p$3G as f3,v$x as f4,f$A as f5,b$12 as f6,m$2f as f7,o$1a as f8,y$1L as f9,ge$2 as fA,h$Z as fB,r$Y as fC,a$31 as fD,l$2H as fE,x$1 as fF,U$2 as fG,v$4 as fH,A$q as fI,E$3 as fJ,w$f as fK,P$1 as fL,I$C as fM,y$1S as fN,v$18 as fO,l$7 as fP,M$4 as fQ,J$1 as fR,c$8 as fS,o$9 as fT,a$9 as fU,f$4 as fV,o$1Q as fW,Z$b as fX,r$1y as fY,i$2x as fZ,q$q as f_,n$2R as fa,F$z as fb,m$2g as fc,kt$1 as fd,p$3r as fe,T$1 as ff,d$Z as fg,y$J as fh,s$4 as fi,m$7 as fj,c$5 as fk,V$3 as fl,g$3 as fm,h$9 as fn,y$5 as fo,D$1 as fp,z$1 as fq,t$3 as fr,a$1v as fs,P$o as ft,y$1A as fu,ln as fv,s$17 as fw,c$37 as fx,D$s as fy,O$q as fz,i$2o as g,v$t as g$,u$1S as g0,z$v as g1,p$3F as g2,n$2Z as g3,r$1t as g4,P$r as g5,l$2g as g6,H$h as g7,_$u as g8,e$1K as g9,s$25 as gA,z$7 as gB,m$1X as gC,t$1M as gD,a$2E as gE,s$1V as gF,l$2h as gG,y$1v as gH,j$W as gI,x$K as gJ,q$k as gK,v$Y as gL,D$v as gM,E$E as gN,Y$b as gO,a$2F as gP,u$24 as gQ,i$2V as gR,g$z as gS,a$1z as gT,le$1 as gU,c$1M as gV,r$11 as gW,e$1h as gX,y$1m as gY,T$C as gZ,c$2W as g_,x$L as ga,a$2D as gb,r$1s as gc,q$f as gd,f$12 as ge,c$2c as gf,h$15 as gg,L$w as gh,O$p as gi,qn as gj,u$1k as gk,Un as gl,C$l as gm,F$v as gn,B$j as go,t$1N as gp,j$f as gq,i$1Q as gr,W$8 as gs,N$o as gt,a$F as gu,o$r as gv,O$t as gw,c$35 as gx,u$22 as gy,P$t as gz,e$2d as h,ke$1 as h$,i$1w as h0,Q$7 as h1,B$n as h2,ie$6 as h3,ce$6 as h4,H$g as h5,ne$6 as h6,j$V as h7,y$$ as h8,e$1$ as h9,s$1r as hA,y$u as hB,g$19 as hC,v$Z as hD,p$3i as hE,n$1j as hF,r$O as hG,p$2o as hH,P$q as hI,w$_ as hJ,A$u as hK,t$23 as hL,o$u as hM,u$1T as hN,u$V as hO,t$2c as hP,n$2X as hQ,ht$1 as hR,mt$1 as hS,o$2b as hT,i$2j as hU,t$29 as hV,_$i as hW,O$g as hX,w$w as hY,t$$ as hZ,ee$2 as h_,t$12 as ha,B$l as hb,s$1D as hc,x$G as hd,q$b as he,c$1N as hf,f$U as hg,s$7 as hh,ue$2 as hi,c$2g as hj,y$I as hk,C$w as hl,b$G as hm,M$o as hn,f$1Q as ho,s$22 as hp,o$X as hq,g$1q as hr,l$r as hs,se$2 as ht,e$11 as hu,o$2e as hv,S$K as hw,S$Q as hx,p$1O as hy,a$1M as hz,i$2U as i,m$1F as i$,Me as i0,C$d as i1,ne$1 as i2,oe$1 as i3,X$4 as i4,z$g as i5,re$2 as i6,L$g as i7,G$b as i8,Z$4 as i9,p$1W as iA,K$5 as iB,H$8 as iC,Y$3 as iD,ve$1 as iE,Ae as iF,je$1 as iG,P$e as iH,Re as iI,Fe as iJ,J$8 as iK,P$d as iL,W$5 as iM,Ne$1 as iN,h$P as iO,Ce as iP,D$g as iQ,k$d as iR,A$c as iS,R$d as iT,Ot as iU,p$1G as iV,c$2h as iW,p$2x as iX,l$1J as iY,d$1H as iZ,y$1g as i_,I$h as ia,E$p as ib,j$w as ic,Q$6 as id,k$E as ie,t$10 as ig,N$g as ih,M$m as ii,DateTime as ij,$$6 as ik,l$2q as il,ie$1 as im,V$i as io,G$n as ip,i$1p as iq,f$1n as ir,se$1 as is,ue$1 as it,ye$1 as iu,v$D as iv,he$1 as iw,ge$1 as ix,Se$1 as iy,F$g as iz,b$1e as j,j$X as j$,p$i as j0,o$v as j1,y$n as j2,e$B as j3,r$w as j4,r$C as j5,a$2z as j6,g$17 as j7,m$c as j8,o$A as j9,te$6 as jA,Bn as jB,o$1W as jC,M$7 as jD,w$2 as jE,hn as jF,se$5 as jG,ee$6 as jH,z$3 as jI,yn as jJ,y$8 as jK,Gn as jL,c$i as jM,r$f as jN,f$7 as jO,w$1a as jP,c$c as jQ,i$2 as jR,s$2 as jS,e$1 as jT,i$5 as jU,r$1M as jV,A$9 as jW,m$u as jX,e$z as jY,e$1M as jZ,e$U as j_,w$g as ja,h$f as jb,C$m as jc,l$G as jd,L$a as je,Q$4 as jf,h$1R as jg,w$J as jh,I$r as ji,l$1v as jj,p$2i as jk,D$n as jl,F$o as jm,x$A as jn,h$11 as jo,$$c as jp,y$16 as jq,d$1k as jr,j$G as js,B$h as jt,M$w as ju,ce$5 as jv,m$1N as jw,f$10 as jx,G$g as jy,R$o as jz,a$1A as k,I$s as k$,j$4 as k0,b$3 as k1,v$k as k2,j$g as k3,G$l as k4,I$b as k5,w$d as k6,o$4 as k7,n$4 as k8,t$1I as k9,F$s as kA,t$w as kB,s$1v as kC,p$2q as kD,Pe as kE,Vn as kF,r$1a as kG,u$a as kH,o$2a as kI,_$r as kJ,Hn as kK,l$1_ as kL,R$m as kM,U$s as kN,b$R as kO,q$7 as kP,i$a as kQ,P$2 as kR,d$1e as kS,t$x as kT,m$b as kU,l$a as kV,r$1d as kW,n$2_ as kX,s$1A as kY,a$2Z as kZ,i$E as k_,h$1r as ka,h$1B as kb,b$j as kc,s$8 as kd,l$F as ke,m$3 as kf,n$23 as kg,M$D as kh,x$E as ki,t$27 as kj,l$1 as kk,j$2 as kl,e$4 as km,x$m as kn,p$2D as ko,Y$9 as kp,e$e as kq,r$a as kr,p$2P as ks,u$z as kt,x$H as ku,h$1P as kv,d$1G as kw,y$1n as kx,f$1s as ky,Pn as kz,n$2Q as l,o$w as l$,T$w as l0,f$m as l1,M$e as l2,m$1n as l3,o$1m as l4,l$16 as l5,_$g as l6,l$2G as l7,y$1R as l8,A$E as l9,n$2O as lA,n$2P as lB,ne$4 as lC,H$5 as lD,E$B as lE,q$h as lF,w$T as lG,e$19 as lH,V$o as lI,e$2c as lJ,a$2P as lK,G$e as lL,y$k as lM,i$b as lN,J$7 as lO,o$b as lP,y$1I as lQ,s$2m as lR,m$1z as lS,c$2r as lT,I$v as lU,t$26 as lV,K$f as lW,h$1h as lX,t$1j as lY,R$p as lZ,g$k as l_,l$2b as la,s$1T as lb,o$1D as lc,t$V as ld,S$E as le,z$r as lf,l$2j as lg,l$1B as lh,r$L as li,n$1a as lj,z$s as lk,a$2a as ll,A$n as lm,S$9 as ln,J$h as lo,Z$a as lp,X$a as lq,b$14 as lr,s$1U as ls,F$p as lt,E$y as lu,x$f as lv,b$16 as lw,u$2e as lx,i$1E as ly,s$1g as lz,m$2b as m,e$E as m$,N$f as m0,h$1e as m1,c$1a as m2,b$Y as m3,u$L as m4,S$B as m5,a$$ as m6,a$20 as m7,f$1f as m8,e$M as m9,_$b as mA,q$6 as mB,N$r as mC,u$1B as mD,d$28 as mE,o$E as mF,a$1k as mG,t$1Y as mH,d$Y as mI,gn as mJ,b$Z as mK,m$1s as mL,b$W as mM,P$b as mN,v$15 as mO,h$1k as mP,b$$ as mQ,p$2E as mR,c$W as mS,a$h as mT,n$j as mU,i$2q as mV,p$2B as mW,M$c as mX,Y$d as mY,g$X as mZ,n$c as m_,c$2A as ma,i$V as mb,V$l as mc,u$2j as md,d$1A as me,i$1Y as mf,o$1p as mg,H$f as mh,zn as mi,n$2F as mj,l$1S as mk,M$E as ml,G$h as mm,R$q as mn,c$2t as mo,g$O as mp,j$P as mq,dn as mr,h$1j as ms,u$t as mt,g$14 as mu,c$2s as mv,F$r as mw,t$1u as mx,c$2Z as my,t$t as mz,n$s as n,r$V as n$,e$b as n0,n$T as n1,S$A as n2,P$p as n3,i$2l as n4,e$a as n5,t$D as n6,k$h as n7,h$E as n8,w$F as n9,m$4 as nA,e$2 as nB,r$2 as nC,A$F as nD,u$1e as nE,w$E as nF,u$19 as nG,r$10 as nH,p$27 as nI,i$1H as nJ,o$10 as nK,l$1p as nL,s$1d as nM,i$1B as nN,g$p as nO,u$18 as nP,a$1H as nQ,i$1F as nR,m$z as nS,b$l as nT,r$U as nU,i$1A as nV,n$1F as nW,e$14 as nX,S$d as nY,a$1m as nZ,K$c as n_,f$r as na,l$K as nb,m$E as nc,c$$ as nd,x$w as ne,u$G as nf,s$K as ng,L$d as nh,n$_ as ni,o$I as nj,l$N as nk,e$J as nl,p$Z as nm,b$L as nn,j$D as no,d$H as np,i$1C as nq,c$1V as nr,p$2A as ns,m$1f as nt,r$X as nu,e$16 as nv,j$N as nw,p$2m as nx,p$P as ny,e$3 as nz,o$g as o,$$j as o$,s$1$ as o0,p$2l as o1,M$g as o2,A$b as o3,$$4 as o4,v$q as o5,T$b as o6,E$g as o7,V$e as o8,q$c as o9,i$11 as oA,j$q as oB,d$O as oC,v$v as oD,y$D as oE,h$I as oF,L$f as oG,b$r as oH,G$p as oI,c$1j as oJ,a$2f as oK,n$27 as oL,p$1b as oM,o$O as oN,p$1f as oO,a$12 as oP,c$2Q as oQ,m$1P as oR,p$14 as oS,m$K as oT,j$o as oU,r$F as oV,w$o as oW,p$1w as oX,l$$ as oY,p$13 as oZ,n$12 as o_,i$1K as oa,t$1e as ob,n$1P as oc,l$1t as od,D$b as oe,o$1d as of,v$5 as og,_$A as oh,a$18 as oi,t$O as oj,p$3b as ok,y$1p as ol,t$1K as om,y$1x as on,n$2E as oo,e$28 as op,n$16 as oq,y$B as or,S$i as os,d$K as ot,n$1g as ou,p$1d as ov,l$T as ow,t$1W as ox,i$2B as oy,t$1y as oz,g$1l as p,t$_ as p$,s$15 as p0,v$12 as p1,e$L as p2,v$z as p3,j$v as p4,m$10 as p5,p$1Q as p6,n$1m as p7,M$q as p8,T$f as p9,p$15 as pA,r$1q as pB,I$e as pC,b$q as pD,s$2d as pE,M$C as pF,d$S as pG,H$j as pH,C$t as pI,U$q as pJ,u$N as pK,I$f as pL,g$1f as pM,q$p as pN,r$1B as pO,u$1l as pP,m$V as pQ,l$15 as pR,x$l as pS,s$1O as pT,L$r as pU,_$f as pV,S$G as pW,m$9 as pX,S$m as pY,i$1n as pZ,n$1q as p_,N$i as pa,m$Z as pb,N$e as pc,a$1i as pd,T$z as pe,a$1s as pf,n$1h as pg,S$h as ph,Wn as pi,u$26 as pj,b$1b as pk,u$2g as pl,a$25 as pm,m$1D as pn,s$2e as po,c$1P as pp,p$12 as pq,n$2T as pr,ft$1 as ps,r$1L as pt,i$25 as pu,Ct as pv,t$h as pw,i$2W as px,o$R as py,t$M as pz,f$1M as q,Te$1 as q0,F$h as q1,D$h as q2,m$18 as q3,b$B as q4,y$R as q5,l$1e as q6,c$1F as q7,m$14 as q8,f$Q as q9,o$T as qa,v$E as qb,d$12 as qc,xe as qd,ce$1 as qe,le as qf,fe$1 as qg,it$1 as qh,w$Z as qi,request as qj,query as qk,FeatureSet as ql,visualVariableUtils as qm,DictionaryLoader as qn,FeatureLayer as qo,WhereClause as qp,r$1P as r,s$2l as s,t$2e as t,l$y as u,v$16 as v,r$1O as w,r$v as x,u$1E as y,n$I as z};
